<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="coconutnut">
    
    <title>
        
            TCP/IPå¤ä¹  |
        
        CoCoNutNut&#39;s NoteBook
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/avatar.png">
    
<link rel="stylesheet" href="/css/font-awesome.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"coconutnutx.github.io","root":"/","language":"en","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"rgb(70,179,119)","avatar":"/images/avatar.jpg","favicon":"/images/avatar.png","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":false,"background_img":"/images/panorama1.jpg","description":"The cave you fear to enter holds the treasure you seek."},"scroll":{"progress_bar":{"enable":false},"percent":{"enable":false}}},"local_search":{"enable":true,"preload":false},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":false},"lazyload":{"enable":true},"version":"3.4.3"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="CoCoNutNut's NoteBook" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                CoCoNutNut&#39;s NoteBook
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                CATEGORIES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                TAGS
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">CATEGORIES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">TAGS</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">TCP/IPå¤ä¹ </span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.jpg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">coconutnut</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;2023-01-08 16:57:24
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/Note/">Note</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <p>æ¯ä¸€å¹´å‰3é¢˜å¥—è·¯éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‡ç‚¹ï¼š</p>
<ol>
<li>IPåœ°å€&amp;è·¯ç”±ï¼ˆé—®è¯·æ±‚çš„souce/destã€é…ç½®network boxä¸ºNAT/proxy/VLAN switchåçš„å˜åŒ–ï¼‰</li>
<li>BGPï¼ˆE-BGPå’ŒI-BGPï¼ŒOSPFï¼‰</li>
<li>æ‹¥å¡æ§åˆ¶3ç§åˆ†é…æµé‡çš„æ–¹æ³•</li>
</ol>
<p>ç¬¬å››é¢˜æ¯å¹´æœ‰äº›å˜åŒ–</p>
<h1 id="äº”å±‚ä½“ç³»ç»“æ„"><a href="#äº”å±‚ä½“ç³»ç»“æ„" class="headerlink" title="äº”å±‚ä½“ç³»ç»“æ„"></a>äº”å±‚ä½“ç³»ç»“æ„</h1><ul>
<li>applicationï¼šHTTPã€DNS</li>
<li>transportï¼šTCPã€IP</li>
<li>networkï¼šIP</li>
<li>link<ul>
<li>MACï¼šARP</li>
</ul>
</li>
<li>physical</li>
</ul>
<h1 id="ç¼©å†™å’Œæ¦‚å¿µ"><a href="#ç¼©å†™å’Œæ¦‚å¿µ" class="headerlink" title="ç¼©å†™å’Œæ¦‚å¿µ"></a>ç¼©å†™å’Œæ¦‚å¿µ</h1><ul>
<li><p>DNS</p>
<ul>
<li>A/AAAA recordï¼šå‰è€…ç”¨äºå°†åŸŸåæ˜ å°„åˆ°IPv4åœ°å€ï¼Œåè€…IPv6<ul>
<li>å¦‚æœæœ‰ä¸€ä¸ªç½‘ç«™ä¸çŸ¥é“ç”¨v4è¿˜æ˜¯v6ï¼Œå¯ä»¥ç”¨DNSï¼Œæ ¹æ®æ”¶åˆ°çš„recordç±»å‹åˆ†è¾¨</li>
</ul>
</li>
</ul>
</li>
<li><p>TCP</p>
<ul>
<li>MSSï¼šMaximum Segment Sizeï¼ŒæŒ‡æ¯ä¸ªæ•°æ®æŠ¥æ‰€èƒ½æºå¸¦çš„æœ€å¤§æ•°æ®é‡</li>
<li>ECNï¼šExplicit Congestion Notificationï¼Œåœ¨æ•°æ®åŒ…ä¸­æ·»åŠ ç‰¹æ®Šçš„æ ‡è®°ï¼Œè¡¨ç¤ºæ•°æ®åŒ…å¯èƒ½ä¼šåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±ï¼Œæºç«¯æ”¶åˆ°åï¼Œé™ä½å‘é€é€Ÿç‡ï¼Œä»è€Œå‡è½»ç½‘ç»œæ‹¥å¡</li>
<li>TCP Cubicï¼šless sensitive to RTT than Reno</li>
</ul>
</li>
<li><p>IP</p>
<ul>
<li>address prefix delegation through DHCPv6ï¼šåœ¨ IPv6 ç½‘ç»œä¸­ï¼Œåœ°å€åˆ†é…ç”± DHCPv6 æœåŠ¡å™¨å®Œæˆã€‚å½“ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥åˆ°ç½‘ç»œæ—¶ï¼Œå®ƒä¼šå‘é€ä¸€ä¸ª Solicit æ¶ˆæ¯ç»™ DHCPv6 æœåŠ¡å™¨ï¼Œè¯·æ±‚è·å–ä¸€ä¸ªåœ°å€å‰ç¼€ã€‚å¦‚æœ DHCPv6 æœåŠ¡å™¨è®¤ä¸ºè¯¥è¯·æ±‚æ˜¯åˆæ³•çš„ï¼Œå®ƒä¼šå‘è¯¥å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª Advertise æ¶ˆæ¯ï¼Œæä¾›ä¸€ä¸ªåœ°å€å‰ç¼€ã€‚å®¢æˆ·ç«¯æ”¶åˆ°çš„åœ°å€å‰ç¼€å¯ä»¥ç”¨äºåˆ†é…å…¶ä»–åœ°å€ã€‚</li>
</ul>
</li>
<li><p>ARPï¼šæ ¹æ®IPåœ°å€æŸ¥è¯¢MACåœ°å€</p>
<ul>
<li>Proxy ARPï¼šä¸»æœºAå’ŒBä½äºä¸åŒå±€åŸŸç½‘ï¼ˆé€šå¸¸éœ€è¦é€šè¿‡è·¯ç”±è¿›è¡Œé€šä¿¡ï¼‰ï¼Œå¯ä»¥ç”¨Proxy ARPè®¾ç½®è·¯ç”±å™¨ä½œä¸ºä»£ç†ï¼Œæ¥æ”¶ARPè¯·æ±‚å¹¶è¿”å›è™šæ‹Ÿçš„MACåœ°å€</li>
</ul>
</li>
<li><p>è·¯ç”±</p>
<ul>
<li>IGPï¼šInterior Gateway Protocolï¼ŒASå†…ä½¿ç”¨<ul>
<li>RIPï¼šRouting Information Protocolï¼ŒåŸºäºè·ç¦»å‘é‡</li>
<li>OSPFï¼šç”¨Dijkstraè®¡ç®—æœ€çŸ­è·¯å¾„</li>
</ul>
</li>
<li>EGPï¼šExterior Gateway Protocolï¼ŒASé—´ä½¿ç”¨<ul>
<li>BGPï¼šBorder Gateway Protocol</li>
</ul>
</li>
<li>è·ç¦»å‘é‡è·¯ç”±ç®—æ³•<ul>
<li>route poisoningï¼šå½“ä¸€ä¸ªè·¯ç”±å™¨å‘ç°æŸæ¡è·¯å¾„ä¸å¯ç”¨æ—¶ï¼Œå‘ç›¸é‚»è·¯ç”±å™¨å‘é€å¸¦æœ‰è¾ƒå¤§è·ç¦»çš„è·¯ç”±ä¿¡æ¯ï¼Œè¡¨ç¤ºè¯¥è·¯å¾„ä¸å¯ç”¨</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h1><h2 id="6to4å’ŒNAT64"><a href="#6to4å’ŒNAT64" class="headerlink" title="6to4å’ŒNAT64"></a>6to4å’ŒNAT64</h2><p>6to4å’ŒNAT64éƒ½æ˜¯ç”¨äºåœ¨IPv6å’ŒIPv4ä¹‹é—´å»ºç«‹è¿æ¥çš„æŠ€æœ¯ã€‚åŒºåˆ«ï¼š</p>
<ul>
<li>è¿æ¥æ–¹å¼ä¸åŒ<ul>
<li>6to4ï¼šç›´æ¥å°†IPv4åœ°å€è½¬æ¢ä¸ºIPv6åœ°å€ï¼Œå¹¶åœ¨å‰é¢æ·»åŠ ä¸€æ®µç‰¹æ®Šçš„å‰ç¼€<code>2002::/16</code></li>
<li>NAT64ï¼šåˆ©ç”¨NATè¡¨ï¼Œåœ¨IPv4å’ŒIPv6ä¹‹é—´å»ºç«‹åœ°å€æ˜ å°„å…³ç³»</li>
</ul>
</li>
<li>è¿æ¥æ–¹å‘ä¸åŒ<ul>
<li>6to4åªèƒ½ç”¨äºä»IPv4åˆ°IPv6çš„è¿æ¥</li>
<li>NAT64æ”¯æŒåŒå‘è½¬æ¢</li>
</ul>
</li>
</ul>
<h2 id="NAT64è½¬å‘"><a href="#NAT64è½¬å‘" class="headerlink" title="NAT64è½¬å‘"></a>NAT64è½¬å‘</h2><p>æ”¶åˆ°IPv6åŒ…åï¼Œè½¬å‘ç»™åªæ”¯æŒIPv4çš„ä¸»æœºï¼Œæ­¥éª¤ï¼š</p>
<ol>
<li>æ£€æŸ¥NAT64è½¬æ¢è¡¨ï¼Œçœ‹æ˜¯å¦å·²ç»ä¸ºè¯¥IPv6åœ°å€åˆ†é…äº†IPv4åœ°å€</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œåˆ†é…åœ°å€ï¼Œå°†è¯¥åœ°å€æ·»åŠ åˆ°è¡¨ä¸­ï¼Œå¹¶ä½¿ç”¨è¯¥åœ°å€è½¬å‘IPv4åŒ…ç»™ç›®æ ‡ä¸»æœº</li>
</ol>
<p>*ä¸èƒ½ç”¨NAT64è®¾å¤‡è‡ªå·±çš„IPv4åœ°å€</p>
<h2 id="Multicast"><a href="#Multicast" class="headerlink" title="Multicast"></a>Multicast</h2><p>å½“receiveræƒ³åŠ å…¥ä¸€ä¸ªmulticast  groupï¼Œå®ƒéœ€è¦å‘é€MLDæ¶ˆæ¯ã€‚å…¶å®ƒreceiverå’Œserverä¸éœ€è¦ä»»ä½•æ“ä½œã€‚</p>
<h2 id="åˆ†ç‰‡"><a href="#åˆ†ç‰‡" class="headerlink" title="åˆ†ç‰‡"></a>åˆ†ç‰‡</h2><p>IPv4ï¼šä¸»æœº/è·¯ç”±å™¨éƒ½å¯ä»¥å¯¹æ•°æ®æŠ¥è¿›è¡Œåˆ†ç‰‡</p>
<p>IPv6ï¼šåªæœ‰ä¸»æœºå¯ä»¥å¯¹æ•°æ®æŠ¥è¿›è¡Œåˆ†ç‰‡</p>
<p>ä½†æ˜¯ï¼Œè·¯ç”±å™¨ä¸ä¼šé‡æ–°ç»„è£…æ•°æ®æŠ¥ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæ•°æ®æŠ¥åœ¨ç½‘ç»œä¸­è¢«åˆ†ç‰‡ï¼Œåˆ™æ¥æ”¶æ–¹å¿…é¡»è‡ªå·±é‡æ–°ç»„è£…æ•°æ®æŠ¥ã€‚</p>
<h1 id="OSPF"><a href="#OSPF" class="headerlink" title="OSPF"></a>OSPF</h1><p>Qï¼šå½“æœ‰å¤šæ¡equal-costæœ€çŸ­è·¯å¾„æ—¶ï¼Œä¼šæœ‰ä»€ä¹ˆè´Ÿé¢å½±å“ï¼Ÿ</p>
<p>Aï¼šæ‰€æœ‰ç”¨Dijkstraç®—æ³•è®¡ç®—å‡ºçš„æœ€çŸ­è·¯å¾„éƒ½ä¼šå‡ºç°åœ¨è·¯ç”±è¡¨ä¸­ã€‚The router then does per-flow load balancing to ensure that packets of the same flow (e.g. same TCP connection) are sent to the same next hop. This is done to improve TCP performance by avoiding reordering of packets at the destination. It is typically achieved using hash functions on flow identifiers (source and destination IPâ€™s and port numbers).</p>
<h1 id="å¥—è·¯"><a href="#å¥—è·¯" class="headerlink" title="å¥—è·¯"></a>å¥—è·¯</h1><h2 id="ç¬¬ä¸€é¢˜ï¼šIPã€è·¯ç”±"><a href="#ç¬¬ä¸€é¢˜ï¼šIPã€è·¯ç”±" class="headerlink" title="ç¬¬ä¸€é¢˜ï¼šIPã€è·¯ç”±"></a>ç¬¬ä¸€é¢˜ï¼šIPã€è·¯ç”±</h2><h3 id="subnet-mask"><a href="#subnet-mask" class="headerlink" title="subnet mask"></a>subnet mask</h3><ul>
<li><p>ä¸èƒ½å¤ªé•¿ï¼šä¿è¯åŒä¸€LANå†…å‰ç¼€ç›¸åŒ</p>
</li>
<li><p>ä¸èƒ½å¤ªçŸ­ï¼šé¿å…ä¸åŒLANå†…å‰ç¼€ç›¸åŒ</p>
<ul>
<li>ä¸åŒLANå‰ç¼€ç›¸åŒçš„é—®é¢˜ï¼šThe hosts will think that other hosts are on the same LAN, and will try using ARP to get their MAC addresses. To solve this, one solution is to use proxy ARP in all routers X1, X2, X3, X4 .</li>
</ul>
</li>
<li><p>ä¸åŒLANä¸­ï¼Œé•¿åº¦å¯ä»¥ä¸åŒ</p>
</li>
</ul>
<h3 id="ping-request-ARP"><a href="#ping-request-ARP" class="headerlink" title="ping request/ARP"></a>ping request/ARP</h3><ul>
<li><p>pingçš„è¿‡ç¨‹</p>
<ol>
<li><p>æŸ¥è¯¢æœ¬åœ°è·¯ç”±è¡¨ï¼Œçœ‹pingçš„æ˜¯å†…ç½‘è¿˜æ˜¯å¤–ç½‘åœ°å€</p>
</li>
<li><p>å¦‚æœæ˜¯å†…ç½‘åœ°å€</p>
<ol>
<li><p>æŸ¥è¯¢ARPç¼“å­˜ï¼Œå¦‚æœæœ‰ï¼Œç›´æ¥è¿”å›ICMP reply</p>
</li>
<li><p>å¦‚æœç¼“å­˜æ²¡æœ‰ï¼Œç”¨ARPåè®®åœ¨LANå†…å¹¿æ’­ï¼Œè¦æ±‚æ‹¥æœ‰æŒ‡å®šIPåœ°å€çš„ä¸»æœºå›å¤è‡ªå·±çš„MACåœ°å€</p>
<ul>
<li><p>ARPçš„å¯è§èŒƒå›´æ˜¯LANå†…</p>
</li>
<li><p>å¦‚æœæ”¶åˆ°ï¼ŒåŠ å…¥ARPç¼“å­˜ï¼Œè¿”å›ICMP reply</p>
</li>
</ul>
</li>
</ol>
</li>
<li><p>å¦‚æœæ˜¯å¤–ç½‘åœ°å€</p>
<ol>
<li><p>ARPè¯·æ±‚çš„IPç›®çš„åœ°å€æ˜¯è·¯ç”±å™¨çš„IPåœ°å€</p>
</li>
<li><p>è·¯ç”±å™¨è½¬å‘è¯·æ±‚åˆ°å¤–ç½‘</p>
<ul>
<li>è·¯ç”±å™¨å¯èƒ½å†æ¬¡ç”¨ARPåè®®ï¼ŒæŸ¥æ‰¾ç›®æ ‡ä¸»æœºçš„MACåœ°å€</li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
<li><p>æ³¨æ„network boxsçš„é…ç½®ï¼Œæ˜¯bridgeè¿˜æ˜¯router</p>
<ul>
<li>åªæœ‰è¿‡routeræ‰å‡å°‘TTL/HCï¼Œbridgeä¸å‡ï¼ˆæ˜“é”™ï¼šhostå’Œrouterç›¸è¿çš„ä¸€æ®µæ²¡æ³¨æ„ï¼Œç›´æ¥å¡«äº†64ï¼‰</li>
<li>å¦‚æœæ˜¯bridge<ul>
<li>æ³¨æ„å†…ç½‘æœ‰æ²¡æœ‰ç¯ï¼Œå¦‚æœæœ‰ï¼Œè¦å…ˆç”¨spanning tree algorithmï¼Œç¦ç”¨éƒ¨åˆ†é“¾æ¥</li>
<li>å†…ç½‘å¯ä»¥ç»è¿‡å¤šä¸ªbridgeï¼Œç›´æ¥å‘ç»™ç›®æ ‡MACåœ°å€ï¼ˆæ˜“é”™ï¼šæŠŠbridgeçœ‹æˆrouterï¼Œå¡«äº†bridgeçš„MACï¼‰</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="requestç»è¿‡NAT-proxy-VLAN-switchçš„å˜åŒ–"><a href="#requestç»è¿‡NAT-proxy-VLAN-switchçš„å˜åŒ–" class="headerlink" title="requestç»è¿‡NAT/proxy/VLAN switchçš„å˜åŒ–"></a>requestç»è¿‡NAT/proxy/VLAN switchçš„å˜åŒ–</h3><ul>
<li><p>NATï¼šå»ºç«‹{å†…ç½‘IPå’Œç«¯å£ï¼Œå¤–ç½‘IPå’Œç«¯å£}çš„å¯¹åº”</p>
<ul>
<li>å†…ç½‘å‘å¤–å‘è¯·æ±‚æ—¶ï¼Œæ­£å¸¸ç”¨è‡ªå·±çš„åœ°å€ï¼Œåƒæ²¡æœ‰NATä¸€æ ·</li>
<li>å¤–ç½‘å‘å†…å‘è¯·æ±‚æ—¶ï¼Œç”¨NATç¿»è¯‘åçš„åœ°å€ï¼Œåƒå†…ç½‘çš„ä¸»æœºä¸å­˜åœ¨ä¸€æ ·<ul>
<li>å¤–ç½‘çš„Cæƒ³pingå†…ç½‘çš„Aï¼Œç›´æ¥pingç¿»è¯‘åçš„åœ°å€å³å¯</li>
</ul>
</li>
</ul>
</li>
<li><p>application layer gateway, acting as web proxy</p>
<ul>
<li>hostå‘serverå‘è¯·æ±‚æ—¶ï¼Œå‘ç»™proxyï¼Œåƒserverä¸å­˜åœ¨ä¸€æ ·</li>
<li>serveråƒhostå‘è¯·æ±‚æ—¶ï¼Œå‘ç»™proxyï¼Œåƒhostä¸å­˜åœ¨ä¸€æ ·</li>
<li>proxyè½¬å‘hostçš„è¯·æ±‚æ—¶ï¼Œä¸åŒçš„hostç”¨ä¸åŒçš„ç«¯å£</li>
</ul>
</li>
<li><p>VLAN switchï¼šå°†åŸæœ¬ç›¸è¿çš„ç½‘ç»œåˆ†æˆä¸åŒçš„VLANï¼Œé€šä¿¡å¿…é¡»ç»è¿‡è·¯ç”±å™¨</p>
<ul>
<li>å¦‚æœ2ä¸ªVLANé“¾æ¥åˆ°åŒä¸€ä¸ªè·¯ç”±ï¼Œå¯ä»¥ï¼šconfigure the Y1 interface of the router with two different IP addresses, each belonging to a different VLAN</li>
</ul>
</li>
<li><p>é¢˜ç›®ä¸­æœ‰ping requestå’ŒHTTPä¸¤ç§ï¼Œåœ°å€å˜åŒ–éƒ½ä¸€æ ·</p>
<ul>
<li>HTTPçš„protocolæ˜¯TCP</li>
</ul>
</li>
</ul>
<p>ğŸŒ° A/Béƒ½ç”¨ç«¯å£4567é€šè¿‡HTTPä»æœåŠ¡å™¨Sä¸‹è½½æ–‡ä»¶ï¼Œç»è¿‡X</p>
<ol>
<li><p>å½“Xæ˜¯NAT</p>
<ul>
<li><p>A/Båˆ°Xæ®µè§‚å¯Ÿï¼ˆå†…ç½‘ï¼‰</p>
<ul>
<li><p>A/Bå‘é€çš„åŒ…ï¼ˆä»¿ä½›æ²¡æœ‰Xï¼Œç›´æ¥å‘ç»™Sä¸€æ ·ï¼‰</p>
<table>
<thead>
<tr>
<th>IP source</th>
<th>IP dest</th>
<th>protocol</th>
<th>source port</th>
<th>dest port</th>
</tr>
</thead>
<tbody><tr>
<td>A/B</td>
<td>S</td>
<td>TCP</td>
<td>4567</td>
<td>80</td>
</tr>
</tbody></table>
</li>
<li><p>Så‘é€çš„åŒ…ï¼ˆä»¿ä½›æ²¡æœ‰ç»è¿‡Xï¼Œç›´æ¥å‘ç»™A/Bä¸€æ ·ï¼‰</p>
<table>
<thead>
<tr>
<th>IP source</th>
<th>IP dest</th>
<th>protocol</th>
<th>source port</th>
<th>dest port</th>
</tr>
</thead>
<tbody><tr>
<td>S</td>
<td>A/B</td>
<td>TCP</td>
<td>80</td>
<td>4567</td>
</tr>
</tbody></table>
</li>
<li><p>Xåˆ°Sæ®µè§‚å¯Ÿï¼ˆå¤–ç½‘ï¼ŒNATè½¬æ¢åï¼‰</p>
<ul>
<li><p>A/Bå‘é€çš„åŒ…</p>
<table>
<thead>
<tr>
<th>IP source</th>
<th>IP dest</th>
<th>protocol</th>
<th>source port</th>
<th>dest port</th>
</tr>
</thead>
<tbody><tr>
<td>X</td>
<td>S</td>
<td>TCP</td>
<td>23456/23457</td>
<td>80</td>
</tr>
</tbody></table>
</li>
<li><p>Så‘é€çš„åŒ…ï¼ˆå…ˆå‘ç»™Xï¼Œç”¨Xçš„IPï¼Œå’Œä¸åŒçš„ç«¯å£å·ï¼‰</p>
<table>
<thead>
<tr>
<th>IP source</th>
<th>IP dest</th>
<th>protocol</th>
<th>source port</th>
<th>dest port</th>
</tr>
</thead>
<tbody><tr>
<td>S</td>
<td>X</td>
<td>TCP</td>
<td>80</td>
<td>23456/23457</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>â€‹    å®é™…ä¸Šå°±æ˜¯åœ¨NATå¤„åšäº†ä¸€ä¸ªåœ°å€æ˜ å°„ï¼Œå°†A,4567æ¢æˆX,23456ï¼Œå°†B:4567æ¢æˆX,23457</p>
<p>â€‹    ä»A/Bçš„è§†è§’ï¼Œæ²¡æœ‰Xï¼Œä»¥ä¸ºæ˜¯ç›´æ¥å’ŒSé€šä¿¡</p>
<p>â€‹    ä»Sçš„è§†è§’ï¼Œæ²¡æœ‰A/B</p>
<ol start="2">
<li><p>å½“Xæ˜¯application layer gateway, acting as web proxy</p>
<ul>
<li><p>A/Båˆ°Xæ®µè§‚å¯Ÿ</p>
<ul>
<li><p>A/Bå‘é€çš„åŒ…</p>
<table>
<thead>
<tr>
<th>IP source</th>
<th>IP dest</th>
<th>protocol</th>
<th>source port</th>
<th>dest port</th>
</tr>
</thead>
<tbody><tr>
<td>A/B</td>
<td>Xçš„å†…ç½‘IP</td>
<td>TCP</td>
<td>4678</td>
<td>8080</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><p>Xåˆ°Sæ®µè§‚å¯Ÿ</p>
<ul>
<li><p>A/Bå‘é€çš„åŒ…</p>
<table>
<thead>
<tr>
<th>IP source</th>
<th>IP dest</th>
<th>protocol</th>
<th>source port</th>
<th>dest port</th>
</tr>
</thead>
<tbody><tr>
<td>Xçš„å¤–ç½‘IP</td>
<td>S</td>
<td>TCP</td>
<td>8923/8924</td>
<td>80</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>â€‹    ä»A/Bçš„è§†è§’ï¼Œæ²¡æœ‰Sï¼ˆä»¥ä¸ºXå°±æ˜¯Sï¼‰</p>
<p>â€‹    Xæ”¶åˆ°A/Bçš„è¯·æ±‚åï¼Œä»ä¸åŒç«¯å£è½¬å‘ç»™S</p>
<p>â€‹    ä»Sçš„è§†è§’ï¼Œæ²¡æœ‰A/B</p>
<h3 id="è·¯ç”±è¡¨é…ç½®"><a href="#è·¯ç”±è¡¨é…ç½®" class="headerlink" title="è·¯ç”±è¡¨é…ç½®"></a>è·¯ç”±è¡¨é…ç½®</h3><p>è·¯ç”±å™¨çš„routing tableéœ€è¦çš„å‡ åˆ—ï¼š</p>
<table>
<thead>
<tr>
<th>Destination Network</th>
<th>Interface</th>
<th>Gateway</th>
</tr>
</thead>
<tbody><tr>
<td>10.1/16</td>
<td>Xw VLAN A</td>
<td>onlink</td>
</tr>
<tr>
<td>10.2/16</td>
<td>Xw VLAN B</td>
<td>onlink</td>
</tr>
<tr>
<td>9/8</td>
<td>Xe</td>
<td>onlink</td>
</tr>
</tbody></table>
<ul>
<li><p>Interfaceæ˜¯è¯¥è·¯ç”±å™¨çš„ç½‘ç»œæ¥å£</p>
<ul>
<li>é€šå¸¸ä»¥eth0ã€eth1ã€eth2ç­‰å‘½åï¼Œè¡¨ç¤ºç½‘å¡çš„ç¼–å·</li>
</ul>
</li>
<li><p>å¦‚æœéœ€è¦å…¶å®ƒè·¯ç”±å™¨è½¬å‘ï¼Œgatewayå¡«å…¶å®ƒè·¯ç”±å™¨çš„IP</p>
</li>
</ul>
<h2 id="ç¬¬äºŒé¢˜ï¼šBGP-OSPF"><a href="#ç¬¬äºŒé¢˜ï¼šBGP-OSPF" class="headerlink" title="ç¬¬äºŒé¢˜ï¼šBGP/OSPF"></a>ç¬¬äºŒé¢˜ï¼šBGP/OSPF</h2><h2 id="ç¬¬ä¸‰é¢˜ï¼šæ‹¥å¡æ§åˆ¶"><a href="#ç¬¬ä¸‰é¢˜ï¼šæ‹¥å¡æ§åˆ¶" class="headerlink" title="ç¬¬ä¸‰é¢˜ï¼šæ‹¥å¡æ§åˆ¶"></a>ç¬¬ä¸‰é¢˜ï¼šæ‹¥å¡æ§åˆ¶</h2><p>max-min fairness</p>
<p>propotional fairness</p>
<pre><code>- è®¡ç®—propotional fairçš„åˆ†é…
- åˆ¤æ–­åˆ†é…æ˜¯å¦propotional fair</code></pre><p>TCP with ECN</p>

        </div>

        

        
            <div class="article-nav">
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2022/07/30/obsedian/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Obsidianä½¿ç”¨æ„Ÿå—2</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>&nbsp;-&nbsp;
            
            2023&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">coconutnut</a>
        </div>
        
            <script async  src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        Totalview&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.3</a>
        </div>
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%94%E5%B1%82%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="nav-number">1.</span> <span class="nav-text">äº”å±‚ä½“ç³»ç»“æ„</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BC%A9%E5%86%99%E5%92%8C%E6%A6%82%E5%BF%B5"><span class="nav-number">2.</span> <span class="nav-text">ç¼©å†™å’Œæ¦‚å¿µ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#IP"><span class="nav-number">3.</span> <span class="nav-text">IP</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6to4%E5%92%8CNAT64"><span class="nav-number">3.1.</span> <span class="nav-text">6to4å’ŒNAT64</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NAT64%E8%BD%AC%E5%8F%91"><span class="nav-number">3.2.</span> <span class="nav-text">NAT64è½¬å‘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Multicast"><span class="nav-number">3.3.</span> <span class="nav-text">Multicast</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E7%89%87"><span class="nav-number">3.4.</span> <span class="nav-text">åˆ†ç‰‡</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#OSPF"><span class="nav-number">4.</span> <span class="nav-text">OSPF</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A5%97%E8%B7%AF"><span class="nav-number">5.</span> <span class="nav-text">å¥—è·¯</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E9%A2%98%EF%BC%9AIP%E3%80%81%E8%B7%AF%E7%94%B1"><span class="nav-number">5.1.</span> <span class="nav-text">ç¬¬ä¸€é¢˜ï¼šIPã€è·¯ç”±</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#subnet-mask"><span class="nav-number">5.1.1.</span> <span class="nav-text">subnet mask</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ping-request-ARP"><span class="nav-number">5.1.2.</span> <span class="nav-text">ping request&#x2F;ARP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#request%E7%BB%8F%E8%BF%87NAT-proxy-VLAN-switch%E7%9A%84%E5%8F%98%E5%8C%96"><span class="nav-number">5.1.3.</span> <span class="nav-text">requestç»è¿‡NAT&#x2F;proxy&#x2F;VLAN switchçš„å˜åŒ–</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E8%A1%A8%E9%85%8D%E7%BD%AE"><span class="nav-number">5.1.4.</span> <span class="nav-text">è·¯ç”±è¡¨é…ç½®</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E9%A2%98%EF%BC%9ABGP-OSPF"><span class="nav-number">5.2.</span> <span class="nav-text">ç¬¬äºŒé¢˜ï¼šBGP&#x2F;OSPF</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E9%A2%98%EF%BC%9A%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="nav-number">5.3.</span> <span class="nav-text">ç¬¬ä¸‰é¢˜ï¼šæ‹¥å¡æ§åˆ¶</span></a></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>



    
<script src="/js/local-search.js"></script>




    
<script src="/js/code-copy.js"></script>




    
<script src="/js/lazyload.js"></script>



<div class="post-scripts">
    
        
<script src="/js/left-side-toggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/toc.js"></script>

    
</div>



</body>
</html>
