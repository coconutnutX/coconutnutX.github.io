<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Springç¬”è®°15 æ€»ç»“</title>
    <url>/2020/03/20/note-spring-15/</url>
    <content><![CDATA[<img src="/images/2020/spring.png">]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>mindmap</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç¬”è®°14 Spring5çš„æ–°ç‰¹æ€§</title>
    <url>/2020/03/20/note-spring-14/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931?p=82" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931?p=82</a></p>
</blockquote>
<p>åŸºäºjdk1.8ï¼Œtomcatç‰ˆæœ¬è¦æ±‚8.5ä»¥ä¸Š</p>
<h1 id="åˆ©ç”¨jdk8ç‰ˆæœ¬æ›´æ–°çš„å†…å®¹"><a href="#åˆ©ç”¨jdk8ç‰ˆæœ¬æ›´æ–°çš„å†…å®¹" class="headerlink" title="åˆ©ç”¨jdk8ç‰ˆæœ¬æ›´æ–°çš„å†…å®¹"></a>åˆ©ç”¨jdk8ç‰ˆæœ¬æ›´æ–°çš„å†…å®¹</h1><h2 id="åŸºäºjdk8çš„åå°„å¢å¼º"><a href="#åŸºäºjdk8çš„åå°„å¢å¼º" class="headerlink" title="åŸºäºjdk8çš„åå°„å¢å¼º"></a>åŸºäºjdk8çš„åå°„å¢å¼º</h2><p> <strong>ä¸€ä¸ªæµ‹è¯•</strong></p>
<p>ä¸‰ç§æ“ä½œï¼š</p>
<p>1.åˆ›å»ºæ–°å¯¹è±¡å¹¶èµ‹å€¼</p>
<p>2.åˆ›å»ºä¸€ä¸ªå¯¹è±¡èµ‹å€¼å¤šæ¬¡</p>
<p>3.é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡å¹¶èµ‹å€¼</p>
<p>åˆ†åˆ«æ‰§è¡Œ10äº¿æ¬¡ï¼Œæ¯”è¾ƒç”¨æ—¶(ms)</p>
<p>jdk8ï¼š8ã€31ã€2417</p>
<p>jdk7ï¼š6212ã€3025ã€290400</p>
<h2 id="NonNull-å’Œ-Nullable-çš„ä½¿ç”¨"><a href="#NonNull-å’Œ-Nullable-çš„ä½¿ç”¨" class="headerlink" title="@NonNull å’Œ@Nullable çš„ä½¿ç”¨"></a>@NonNull å’Œ@Nullable çš„ä½¿ç”¨</h2><p>ç”¨ @Nullable å’Œ @NotNull æ³¨è§£æ¥è¡¨æ˜å¯ä¸ºç©ºçš„å‚æ•°å’Œä»¥åŠè¿”å›å€¼</p>
<p>è¿™æ ·å°±å¤Ÿåœ¨ç¼–è¯‘çš„æ—¶å€™å¤„ç†ç©ºå€¼è€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶æŠ›å‡º NullPointerExceptions</p>
<h2 id="æ—¥å¿—è®°å½•æ–¹é¢"><a href="#æ—¥å¿—è®°å½•æ–¹é¢" class="headerlink" title="æ—¥å¿—è®°å½•æ–¹é¢"></a>æ—¥å¿—è®°å½•æ–¹é¢</h2><p>å°è£… Commons Logging æ¡¥æ¥æ¨¡å—ï¼ˆå«åš spring-jclï¼‰</p>
<h1 id="æ ¸å¿ƒå®¹å™¨çš„æ›´æ–°"><a href="#æ ¸å¿ƒå®¹å™¨çš„æ›´æ–°" class="headerlink" title="æ ¸å¿ƒå®¹å™¨çš„æ›´æ–°"></a>æ ¸å¿ƒå®¹å™¨çš„æ›´æ–°</h1><p>æ”¯æŒå€™é€‰ç»„ä»¶ç´¢å¼•ä½œä¸ºç±»è·¯å¾„æ‰«æçš„æ›¿ä»£æ–¹æ¡ˆ</p>
<p>ä»ç´¢å¼•è¯»å–å®ä½“è€Œä¸æ˜¯æ‰«æç±»è·¯å¾„å¯¹äºå°äº 200 ä¸ªç±»çš„å°å‹é¡¹ç›®æ²¡æœ‰æ˜æ˜¾å·®å¼‚</p>
<p>å¯¹äºå¤§å‹é¡¹ç›®ï¼Œåº”ç”¨ç¨‹åºçš„å¯åŠ¨æ—¶é—´å°†è¢«å¤§å¤§ç¼©å‡</p>
<h1 id="JetBrains-Kotlin-è¯­è¨€æ”¯æŒ"><a href="#JetBrains-Kotlin-è¯­è¨€æ”¯æŒ" class="headerlink" title="JetBrains Kotlin è¯­è¨€æ”¯æŒ"></a>JetBrains Kotlin è¯­è¨€æ”¯æŒ</h1><h1 id="å“åº”å¼ç¼–ç¨‹é£æ ¼"><a href="#å“åº”å¼ç¼–ç¨‹é£æ ¼" class="headerlink" title="å“åº”å¼ç¼–ç¨‹é£æ ¼"></a>å“åº”å¼ç¼–ç¨‹é£æ ¼</h1><p>å“åº”å¼å †æ ˆ WEB æ¡†æ¶</p>
<p>è¿™ä¸ªå †æ ˆå®Œå…¨çš„å“åº”å¼ä¸”éé˜»å¡ï¼Œé€‚åˆäºäº‹ä»¶å¾ªç¯é£æ ¼çš„å¤„ç†ï¼Œå¯ä»¥è¿›è¡Œå°‘é‡çº¿ç¨‹çš„æ‰©å±•</p>
<p>ï¼ˆæœ‰ä¸€ä¸ªå“åº”å¼ç¼–ç¨‹å®æˆ˜ç¤ºä¾‹ï¼Œå»ºè®®å­¦å®ŒSpring Bootä¹‹åæ­å»º  â€“MARKâ€“ï¼‰</p>
<h1 id="Junit5-æ”¯æŒ"><a href="#Junit5-æ”¯æŒ" class="headerlink" title="Junit5 æ”¯æŒ"></a>Junit5 æ”¯æŒ</h1>]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç¬”è®°13 Springä¸­çš„äº‹åŠ¡æ§åˆ¶</title>
    <url>/2020/03/19/note-spring-13/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p75-78</p>
</blockquote>
<p>å‡ ä¸ªç‚¹ï¼š</p>
<ul>
<li>JavaEEä½“ç³»è¿›è¡Œåˆ†å±‚å¼€å‘ï¼Œäº‹åŠ¡å¤„ç†ä½äºä¸šåŠ¡å±‚</li>
<li>Springæä¾›äº‹åŠ¡æ§åˆ¶çš„æ¥å£ï¼Œåœ¨spring-tx-5.0.2.RELEASE.jarä¸­</li>
<li>Springçš„äº‹åŠ¡æ§åˆ¶åŸºäºAOPã€‚å®ƒæ—¢å¯ä»¥ç”¨é…ç½®æ–¹å¼å®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨ç¼–ç¨‹æ–¹å¼å®ç°ï¼ˆé‡ç‚¹æ˜¯é…ç½®å®ç°ï¼‰</li>
</ul>
<h1 id="Springä¸­äº‹åŠ¡æ§åˆ¶çš„API"><a href="#Springä¸­äº‹åŠ¡æ§åˆ¶çš„API" class="headerlink" title="Springä¸­äº‹åŠ¡æ§åˆ¶çš„API"></a>Springä¸­äº‹åŠ¡æ§åˆ¶çš„API</h1><h2 id="PlatformTransactionManager"><a href="#PlatformTransactionManager" class="headerlink" title="PlatformTransactionManager"></a>PlatformTransactionManager</h2><p>è¯¥æ¥å£æä¾›äº‹åŠ¡æ“ä½œçš„æ–¹æ³•ï¼š</p>
<ul>
<li>è·å–çŠ¶æ€ getTransaction()</li>
<li>æäº¤ commit()</li>
<li>å›æ»š rollback()</li>
</ul>
<p>å¸¸ç”¨å®ç°ç±»ï¼š</p>
<ul>
<li>org.springframework.jdbc.datasource.DataSourceTransactionManager </li>
<li>org.springframework.orm.hibernate5.HibernateTransactionManager </li>
</ul>
<h2 id="TransactionDefinition"><a href="#TransactionDefinition" class="headerlink" title="TransactionDefinition"></a>TransactionDefinition</h2><p>è¯¥æ¥å£æ˜¯äº‹åŠ¡çš„å®šä¹‰ä¿¡æ¯å¯¹è±¡ï¼Œå¯ä»¥è·å–äº‹åŠ¡å¯¹è±¡åç§°ã€éš”ç¦»çº§åˆ«ã€ä¼ æ’­è¡Œä¸ºã€è¶…æ—¶æ—¶é—´ã€æ˜¯å¦åªè¯»</p>
<p>Springé»˜è®¤ä½¿ç”¨æ•°æ®åº“çš„éš”ç¦»çº§åˆ«</p>
<p>ä¼ æ’­è¡Œä¸ºæŒ‡ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»æœ‰äº‹åŠ¡ã€ä»€ä¹ˆæƒ…å†µå¯æœ‰å¯æ— </p>
<h2 id="TransactionStatus"><a href="#TransactionStatus" class="headerlink" title="TransactionStatus"></a>TransactionStatus</h2><p>è¯¥æ¥å£æä¾›äº‹åŠ¡çš„è¿è¡ŒçŠ¶æ€ï¼Œå¯ä»¥åˆ·æ–°äº‹åŠ¡ã€è·å–æ˜¯å¦å­˜åœ¨å­˜å‚¨ç‚¹ï¼ˆå¯ä»¥ç†è§£ä¸ºæŒ‰æ­¥æäº¤ï¼Œå›æ»šå¯ä»¥å›æ»šåˆ°å½“å‰ç‚¹ï¼Œä¸ç”¨å…¨éƒ¨å›æ»šï¼‰ã€æ˜¯å¦å®Œæˆã€æ˜¯å¦ä¸ºæ–°çš„äº‹åŠ¡ã€æ˜¯å¦å›æ»šã€è®¾ç½®å›æ»š</p>
<h1 id="Springçš„äº‹åŠ¡æ§åˆ¶"><a href="#Springçš„äº‹åŠ¡æ§åˆ¶" class="headerlink" title="Springçš„äº‹åŠ¡æ§åˆ¶"></a>Springçš„äº‹åŠ¡æ§åˆ¶</h1><h2 id="ä»£ç å‡†å¤‡"><a href="#ä»£ç å‡†å¤‡" class="headerlink" title="ä»£ç å‡†å¤‡"></a>ä»£ç å‡†å¤‡</h2><p>pom.xmlä¸­éœ€è¦å¯¼å…¥aspectjçš„ä¾èµ–ï¼Œå› ä¸ºäº‹åŠ¡æ§åˆ¶åŸºäºAOP</p>
<p>å‡†å¤‡æ•°æ®åº“è¡¨å’Œå®ä½“ç±»ï¼ˆè¿˜æ˜¯è´¦æˆ·ï¼‰</p>
<p>å®ç°ä¸‰ä¸ªæ–¹æ³•ï¼šæ ¹æ®IdæŸ¥è¯¢è´¦æˆ·ã€æ ¹æ®åç§°æŸ¥è¯¢è´¦æˆ·ã€è½¬è´¦</p>
<p>ç¼–å†™Daoå±‚å’Œä¸šåŠ¡å±‚æ¥å£å’Œå®ç°ç±»</p>
<h2 id="åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶"><a href="#åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶" class="headerlink" title="åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶"></a>åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶</h2><p>é…ç½®æ­¥éª¤</p>
<p>1ã€é…ç½®äº‹åŠ¡ç®¡ç†å™¨</p>
<p>2ã€é…ç½®äº‹åŠ¡çš„é€šçŸ¥</p>
<p>æ­¤æ—¶éœ€è¦å¯¼å…¥äº‹åŠ¡çš„çº¦æŸï¼ˆæ–‡æ¡£é¦–é¡µç‚¹Data Accessï¼Œæœxmlns:txï¼ŒåŒæ—¶ä¹Ÿä¼šå¯¼å…¥AOPçš„çº¦æŸï¼‰</p>
<p>ä½¿ç”¨tx:adviceæ ‡ç­¾é…ç½®äº‹åŠ¡é€šçŸ¥<br>å±æ€§ï¼šidï¼šäº‹åŠ¡é€šçŸ¥çš„å”¯ä¸€æ ‡è¯†   transaction-managerï¼šç»™äº‹åŠ¡é€šçŸ¥æä¾›ä¸€ä¸ªäº‹åŠ¡ç®¡ç†å™¨å¼•ç”¨</p>
<p>3ã€é…ç½®AOPä¸­çš„é€šç”¨åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</p>
<p>4ã€å»ºç«‹äº‹åŠ¡é€šçŸ¥å’Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„å¯¹åº”å…³ç³»</p>
<p>5ã€é…ç½®äº‹åŠ¡çš„å±æ€§ï¼ˆåœ¨äº‹åŠ¡çš„é€šçŸ¥tx:adviceæ ‡ç­¾çš„å†…éƒ¨ï¼‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®äº‹åŠ¡çš„é€šçŸ¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡çš„å±æ€§</span></span><br><span class="line"><span class="comment">                isolationï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚é»˜è®¤å€¼æ˜¯DEFAULTï¼Œè¡¨ç¤ºä½¿ç”¨æ•°æ®åº“çš„é»˜è®¤éš”ç¦»çº§åˆ«ã€‚</span></span><br><span class="line"><span class="comment">                propagationï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºã€‚é»˜è®¤å€¼æ˜¯REQUIREDï¼Œè¡¨ç¤ºä¸€å®šä¼šæœ‰äº‹åŠ¡ï¼Œå¢åˆ æ”¹çš„é€‰æ‹©ã€‚æŸ¥è¯¢æ–¹æ³•å¯ä»¥é€‰æ‹©SUPPORTSã€‚</span></span><br><span class="line"><span class="comment">                read-onlyï¼šç”¨äºæŒ‡å®šäº‹åŠ¡æ˜¯å¦åªè¯»ã€‚åªæœ‰æŸ¥è¯¢æ–¹æ³•æ‰èƒ½è®¾ç½®ä¸ºtrueã€‚é»˜è®¤å€¼æ˜¯falseï¼Œè¡¨ç¤ºè¯»å†™ã€‚</span></span><br><span class="line"><span class="comment">                timeoutï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤å€¼æ˜¯-1ï¼Œè¡¨ç¤ºæ°¸ä¸è¶…æ—¶ã€‚å¦‚æœæŒ‡å®šäº†æ•°å€¼ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</span></span><br><span class="line"><span class="comment">                rollback-forï¼šç”¨äºæŒ‡å®šä¸€ä¸ªå¼‚å¸¸ï¼Œå½“äº§ç”Ÿè¯¥å¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡å›æ»šï¼Œäº§ç”Ÿå…¶ä»–å¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡ä¸å›æ»šã€‚æ²¡æœ‰é»˜è®¤å€¼ã€‚è¡¨ç¤ºä»»ä½•å¼‚å¸¸éƒ½å›æ»šã€‚</span></span><br><span class="line"><span class="comment">                no-rollback-forï¼šç”¨äºæŒ‡å®šä¸€ä¸ªå¼‚å¸¸ï¼Œå½“äº§ç”Ÿè¯¥å¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡ä¸å›æ»šï¼Œäº§ç”Ÿå…¶ä»–å¼‚å¸¸æ—¶äº‹åŠ¡å›æ»šã€‚æ²¡æœ‰é»˜è®¤å€¼ã€‚è¡¨ç¤ºä»»ä½•å¼‚å¸¸éƒ½å›æ»šã€‚</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åé¢å†™æŸ¥è¯¢æ–¹æ³•éƒ½ä»¥findå¼€å¤´ è¿™æ ·ä¸¤è¡Œé…ç½®å°±å¤Ÿäº†--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"find*"</span> <span class="attr">propagation</span>=<span class="string">"SUPPORTS"</span> <span class="attr">read-only</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:method</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®aop--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- é…ç½®åˆ‡å…¥ç‚¹è¡¨è¾¾å¼--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"pt1"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:pointcut</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--å»ºç«‹åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å’Œäº‹åŠ¡é€šçŸ¥çš„å¯¹åº”å…³ç³» --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:advisor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·service.implä¸‹çš„å®ç°ç±»å°±éƒ½é…ç½®å¥½äº‹åŠ¡æ§åˆ¶äº†</p>
<h2 id="åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶"><a href="#åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶" class="headerlink" title="åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶"></a>åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶</h2><p>å¯¼åç§°ç©ºé—´æ—¶è¦å¤šä¸€ä¸ªcontextï¼Œä»¥åŠå¯¹åº”çš„çº¦æŸ</p>
<p>ä¸šåŠ¡å±‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="meta">@Transactional</span>(propagation= Propagation.SUPPORTS,readOnly=<span class="keyword">true</span>) <span class="comment">// åªè¯»å‹äº‹åŠ¡çš„é…ç½®</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">findAccountById</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findAccountById(accountId);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éœ€è¦çš„æ˜¯è¯»å†™å‹äº‹åŠ¡é…ç½®</span></span><br><span class="line">    <span class="meta">@Transactional</span>(propagation= Propagation.REQUIRED,readOnly=<span class="keyword">false</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(String sourceName, String targetName, Float money)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// 2.1æ ¹æ®åç§°æŸ¥è¯¢è½¬å‡ºè´¦æˆ·</span></span><br><span class="line">            Account source = accountDao.findAccountByName(sourceName);</span><br><span class="line">            <span class="comment">// 2.2æ ¹æ®åç§°æŸ¥è¯¢è½¬å…¥è´¦æˆ·</span></span><br><span class="line">            Account target = accountDao.findAccountByName(targetName);</span><br><span class="line">            <span class="comment">// 2.3è½¬å‡ºè´¦æˆ·å‡é’±</span></span><br><span class="line">            source.setMoney(source.getMoney()-money);</span><br><span class="line">            <span class="comment">// 2.4è½¬å…¥è´¦æˆ·åŠ é’±</span></span><br><span class="line">            target.setMoney(target.getMoney()+money);</span><br><span class="line">            <span class="comment">// 2.5æ›´æ–°è½¬å‡ºè´¦æˆ·</span></span><br><span class="line">            accountDao.updateAccount(source);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> i=<span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2.6æ›´æ–°è½¬å…¥è´¦æˆ·</span></span><br><span class="line">            accountDao.updateAccount(target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Daoå±‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span>(<span class="string">"accountDao"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountDaoImpl</span> <span class="keyword">implements</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ä¸èƒ½å†ç»§æ‰¿JdbcDaoSupportäº†ï¼ˆå› ä¸ºæ²¡æ³•ç»™jdbcTemplateåŠ æ³¨è§£ï¼‰ï¼Œå¿…é¡»è‡ªå·±å®šä¹‰ä¸€ä¸ªjdbcTemplateï¼Œå¹¶åœ¨xmlä¸­é…ç½®ï¼ˆå¹¶æ³¨å…¥dataSourceï¼Œè¿˜è¦é…ç½®Springåœ¨åˆ›å»ºå®¹å™¨æ—¶éœ€è¦æ‰«æçš„åŒ…ï¼‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®springåˆ›å»ºå®¹å™¨æ—¶è¦æ‰«æçš„åŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.itheima"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®JdbcTemplate--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®æ•°æ®æº--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/eesy"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"1234"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- springä¸­åŸºäºæ³¨è§£ çš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶é…ç½®æ­¥éª¤</span></span><br><span class="line"><span class="comment">            1ã€é…ç½®äº‹åŠ¡ç®¡ç†å™¨</span></span><br><span class="line"><span class="comment">            2ã€å¼€å¯springå¯¹æ³¨è§£äº‹åŠ¡çš„æ”¯æŒ</span></span><br><span class="line"><span class="comment">            3ã€åœ¨éœ€è¦äº‹åŠ¡æ”¯æŒçš„åœ°æ–¹ä½¿ç”¨@Transactionalæ³¨è§£</span></span><br><span class="line"><span class="comment">         --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼€å¯springå¯¹æ³¨è§£äº‹åŠ¡çš„æ”¯æŒ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å±æ€§åœ¨@Transactionalä¸­é…ç½®</p>
<p>ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœæœ‰åä¸ªäº‹åŠ¡ï¼Œä¸€åŠåªè¯»ä¸€åŠè¯»å†™ï¼Œå°±éƒ½å¾—å•ç‹¬é…ç½®å±æ€§</p>
<p>è€Œç”¨xmlé…ç½®æ—¶ä¸€æ¬¡å°±è§£å†³äº†</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç¬”è®°12 åŸºäºXMLå’Œæ³¨è§£çš„äº‹åŠ¡æ§åˆ¶</title>
    <url>/2020/03/19/note-spring-12/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p72-74</p>
</blockquote>
<h1 id="åŸºäºXMLçš„äº‹åŠ¡æ§åˆ¶"><a href="#åŸºäºXMLçš„äº‹åŠ¡æ§åˆ¶" class="headerlink" title="åŸºäºXMLçš„äº‹åŠ¡æ§åˆ¶"></a>åŸºäºXMLçš„äº‹åŠ¡æ§åˆ¶</h1><p>2ä¸ªå·¥å…·ç±»ï¼šConnectionUtils å’Œ TransactionManager</p>
<p>è§ <a href="/2020/03/09/note-spring-09/">Springç¬”è®°09 äº‹åŠ¡æ§åˆ¶çš„é—®é¢˜&amp;åŠ¨æ€ä»£ç†</a></p>
<p>ä¸»è¦é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®Connectionçš„å·¥å…·ç±» ConnectionUtils --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"connectionUtils"</span> <span class="attr">class</span>=<span class="string">"com.itheima.utils.ConnectionUtils"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ³¨å…¥æ•°æ®æº--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"com.itheima.utils.TransactionManager"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ³¨å…¥ConnectionUtils --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connectionUtils"</span> <span class="attr">ref</span>=<span class="string">"connectionUtils"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--é…ç½®aop--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--é…ç½®é€šç”¨åˆ‡å…¥ç‚¹è¡¨è¾¾å¼--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"pt1"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:pointcut</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">ref</span>=<span class="string">"txManager"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®å‰ç½®é€šçŸ¥ï¼šå¼€å¯äº‹åŠ¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">"beginTransaction"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®åç½®é€šçŸ¥ï¼šæäº¤äº‹åŠ¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">"commit"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after-returning</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®å¼‚å¸¸é€šçŸ¥ï¼šå›æ»šäº‹åŠ¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">"rollback"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after-throwing</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®æœ€ç»ˆé€šçŸ¥ï¼šé‡Šæ”¾è¿æ¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">"release"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="åŸºäºæ³¨è§£çš„AOPé…ç½®"><a href="#åŸºäºæ³¨è§£çš„AOPé…ç½®" class="headerlink" title="åŸºäºæ³¨è§£çš„AOPé…ç½®"></a>åŸºäºæ³¨è§£çš„AOPé…ç½®</h1><p>xmlä¸­è¦å¼€å¯å¯¹æ³¨è§£çš„æ”¯æŒ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountDao accountDao;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span>(<span class="string">"accountDao"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountDaoImpl</span> <span class="keyword">implements</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> QueryRunner runner;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ConnectionUtils connectionUtils;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"connectionUtils"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectionUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"txManager"</span>)</span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TransactionManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ConnectionUtils connectionUtils;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">pt1</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="meta">@Around</span>(<span class="string">"pt1()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">aroundAdvice</span><span class="params">(ProceedingJoinPoint pjp)</span></span>&#123;</span><br><span class="line">        Object rtValue = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.è·å–å‚æ•°</span></span><br><span class="line">            Object[] args = pjp.getArgs();</span><br><span class="line">            <span class="comment">// 2.å¼€å¯äº‹åŠ¡</span></span><br><span class="line">            <span class="keyword">this</span>.beginTransaction();</span><br><span class="line">            <span class="comment">// 3.æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">            rtValue = pjp.proceed(args);</span><br><span class="line">            <span class="comment">// 4.æäº¤äº‹åŠ¡</span></span><br><span class="line">            <span class="keyword">this</span>.commit();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è¿”å›ç»“æœ</span></span><br><span class="line">            <span class="keyword">return</span>  rtValue;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Throwable e)&#123;</span><br><span class="line">            <span class="comment">// 5.å›æ»šäº‹åŠ¡</span></span><br><span class="line">            <span class="keyword">this</span>.rollback();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6.é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">this</span>.release();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœåˆ†åˆ«åœ¨å¼€å¯äº‹åŠ¡ã€æäº¤äº‹åŠ¡ã€å›æ»šäº‹åŠ¡ã€é‡Šæ”¾è¿æ¥çš„å‡½æ•°ä¸Šåˆ†åˆ«åŠ @Before(â€œpt1()â€)ã€@AfterReturning(â€œpt1()â€)ã€@AfterThrowing(â€œpt1()â€)ã€@After(â€œpt1()â€)</p>
<p>ç†è®ºä¸Šæ²¡æ¯›ç—…ã€‚ä½†æ˜¯ï¼Springå®é™…çš„æ‰§è¡Œé¡ºåºæ˜¯æœ‰é—®é¢˜çš„ï¼ˆåŒ è§ç¬”è®°9ï¼‰</p>
<p>æœ€ç»ˆé€šçŸ¥åœ¨åç½®é€šçŸ¥ä¹‹å‰æ‰§è¡Œäº†ï¼Œäºæ˜¯æ ¹æœ¬æ²¡æœ‰æäº¤å°±é‡Šæ”¾äº†ï¼Œè¿æ¥å·²ç»å˜æˆäº†æ–°çš„è¿æ¥</p>
<p>æ‰€ä»¥ä¸è¦åˆ†åˆ«ç”¨ã€‚ç”¨ä¸€ä¸ªç¯ç»•é€šçŸ¥ï¼Œé‡Œé¢try-catchï¼Œè‡ªå·±æ§åˆ¶é¡ºåº</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>å­¦ä¹ Springçš„ä¸€ç‚¹æ„Ÿæƒ³</title>
    <url>/2020/03/19/note-spring/</url>
    <content><![CDATA[<p>Springå­¦åˆ°è¿™é‡Œï¼Œè®°å½•ä¸€ç‚¹ç‚¹æ„Ÿæƒ³</p>
<hr>
<p>è¿™ä¸ªæ•™ç¨‹ä¸€ä¸ªç»å¸¸çš„æ“ä½œå°±æ˜¯</p>
<p>å™¼é‡Œå•ªå•¦å™¼é‡Œå•ªå•¦å†™äº†ä¸€å¤§å †ï¼Œç„¶åçµé­‚è´¨é—®ï¼š<strong>ä½ éƒ½èƒ½å†™å‡ºæ¥çš„ä¸œè¥¿Springä¼šæ²¡æœ‰å—ï¼Ÿ</strong></p>
<p>ğŸ¥¶ğŸ¥¶ğŸ¥¶</p>
<p>fine</p>
<p>ä¸è¿‡è¿™ç§è¿‡ç¨‹è§£é‡Šäº†è¿™äº›è®¾è®¡çš„ç”¨æ„ï¼Œä¹Ÿéš¾æ€ªè¯„è®ºå¾ˆå¤šéƒ½è¯´è¿™ä¸ªæ•™ç¨‹æ˜¯çœ‹è¿‡æœ€å¥½çš„</p>
<p>ç„¶é¹…ï¼Œç”¨Spring Bootçš„æ—¶å€™ç°åœ¨çš„è¿™ä¸€å †ä¹Ÿä¸ç”¨å†™å•Šï¼</p>
<p>æœ€åˆæ¥è§¦java webè¿™ä¸€å¤§è¶´çš„æ—¶å€™ç‰¹åˆ«è¿·æƒ‘ï¼ŒTomcatã€Springã€Spring MVCã€Spring Bootâ€¦ä¸€ğŸ˜³è„¸ğŸ˜³æ‡µğŸ˜³é€¼</p>
<p>çœ‹åˆ°å¤§å¤šçš„å»ºè®®æ˜¯ä»Springå¼€å§‹ï¼Œä¸ç„¶Spring Bootèƒ½ç”¨ä½†æ˜¯ä¸æ‡‚ä¸ºä»€ä¹ˆ</p>
<p>äºæ˜¯å­¦äº†ä¸€äº›Springï¼ˆä¼°è®¡æ˜¯ä¸€ä¸ªå››å°æ—¶ç‰ˆæœ¬ï¼‰ï¼Œç”¨çš„æ—¶å€™ä¸ºäº†æ–¹ä¾¿è¿˜æ˜¯ç›´æ¥ä¸Šäº†Spring Boot</p>
<p>ç°åœ¨é‡æ–°å­¦ä¸€éï¼Œæ²¡ä¹‹å‰é‚£ä¹ˆğŸ˜³ğŸ˜³ğŸ˜³äº†ï¼Œæ•™ç¨‹é‡Œè¯´åˆ°Springå¯ä»¥ç®€åŒ–æ‰‹æ’•ä»£ç çš„æ—¶å€™ï¼Œä¹ŸçŸ¥é“Spring Bootè¿˜èƒ½å†ç®€åŒ–ä¸€äº›</p>
<p>å¯¹å®ƒä»¬çš„ç†è§£ä¹Ÿæ…¢æ…¢æ¸…æ™°äº†ä¸€ç‚¹ç‚¹ï¼Œæ„Ÿè§‰å°±æ˜¯ä¸€ä¸ªä¸æ–­å°è£…ã€çº¦å®š&gt;é…ç½®çš„ç®€åŒ–è¿‡ç¨‹ï¼Œå’Œè®¡ç®—æœºä¸­è®¸è®¸å¤šå¤šçš„è¿›åŒ–è¿‡ç¨‹ä¸€æ ·ï¼Œéƒ½æ˜¯ä¸€å±‚ä¸€å±‚çš„æŠ½(tou)è±¡(lan)</p>
<hr>
<img src="/images/2020/1949370-200.png" width=100>


<p>è¯´èµ·æ¥ï¼Œæ˜¥å¤©åˆ°äº†å‘¢</p>
<p>ä»Šå¤©æ¹–åŒ—å·²ç»0æ–°å¢äº†ï¼Œå¸Œæœ›èƒ½èµ¶å¿«å¼€é—¨â€¦</p>
<p>ğŸ¦¢</p>
]]></content>
      <categories>
        <category>Memo</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç¬”è®°11 Springä¸­çš„JdbcTemplate</title>
    <url>/2020/03/19/note-spring-11/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a></p>
<p>p67~71</p>
</blockquote>
<p>æŒä¹…å±‚æ€»å›¾</p>
<img src="/images/2020/20200319.jpg">

<p>Springä¸­çš„JdbcTemplate</p>
<p>ä½œç”¨ï¼šå’Œæ•°æ®åº“äº¤äº’ï¼Œå®ç°å¯¹è¡¨çš„CRUDæ“ä½œ</p>
<h1 id="JdbcTemplateä¸DbUtils"><a href="#JdbcTemplateä¸DbUtils" class="headerlink" title="JdbcTemplateä¸DbUtils"></a>JdbcTemplateä¸DbUtils</h1><p>DbUtilsæ˜¯Apacheæä¾›çš„ä¸€ä¸ªå¯¹JDBCè¿›è¡Œç®€å•å°è£…çš„å¼€æºå·¥å…·ç±»åº“ï¼Œä¸»è¦æœ‰</p>
<ul>
<li>org.apache.commons.dbutils.QueryRunner â€” æ ¸å¿ƒç±»ï¼Œæ‰§è¡ŒSQLæŸ¥è¯¢ä»¥å¤„ç†ç»“æœé›†ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</li>
<li>org.apache.commons.dbutils.ResultSetHandler â€” ç»“æœé›†å°è£…å™¨</li>
<li>org.apache.commons.dbutils.DbUtils â€” æä¾›å¦‚åŠ è½½é©±åŠ¨ã€å…³é—­è¿æ¥ã€äº‹åŠ¡æäº¤ã€å›æ»šç­‰å¸¸è§„å·¥ä½œçš„å·¥å…·ç±»</li>
</ul>
<p>JdbcTemplateæ˜¯Springæä¾›çš„ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯å¯¹åŸå§‹Jdbc APIå¯¹è±¡çš„ç®€å•å°è£…ï¼ŒåŸºæœ¬æ–¹æ³•ï¼š</p>
<ul>
<li>executeæ–¹æ³•</li>
<li>updateä¸batchUpdateæ–¹æ³•</li>
<li>queryä¸queryXXXæ–¹æ³•</li>
<li>callæ–¹æ³•</li>
</ul>
<p>DbUtilså¯¼çš„ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--        dbutils--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        mysqlé©±åŠ¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        jdbcè¿æ¥æ± --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>JdbcTemplateå¯¼çš„ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--        JdbcTemplate--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        å’Œäº‹åŠ¡ç›¸å…³--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        mysqlé©±åŠ¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="è¡¨çš„å®ä½“ç±»"><a href="#è¡¨çš„å®ä½“ç±»" class="headerlink" title="è¡¨çš„å®ä½“ç±»"></a>è¡¨çš„å®ä½“ç±»</h1><p>å®ç°Serializableæ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·çš„å®ä½“ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Float money;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get set toString</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="JdbcTemplateçš„æœ€åŸºæœ¬ç”¨æ³•"><a href="#JdbcTemplateçš„æœ€åŸºæœ¬ç”¨æ³•" class="headerlink" title="JdbcTemplateçš„æœ€åŸºæœ¬ç”¨æ³•"></a>JdbcTemplateçš„æœ€åŸºæœ¬ç”¨æ³•</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcTemplateDemo1</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å‡†å¤‡æ•°æ®æºï¼šspringçš„å†…ç½®æ•°æ®æº</span></span><br><span class="line">        DriverManagerDataSource ds = <span class="keyword">new</span> DriverManagerDataSource();</span><br><span class="line">        ds.setDriverClassName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">        ds.setUrl(<span class="string">"jdbc:mysql://localhost:3306/groot?characterEncoding=utf8"</span>);</span><br><span class="line">        ds.setUsername(<span class="string">"root"</span>);</span><br><span class="line">        ds.setPassword(<span class="string">"iamgroot"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.åˆ›å»ºJdbcTemplateå¯¹è±¡</span></span><br><span class="line">        JdbcTemplate jt = <span class="keyword">new</span> JdbcTemplate();</span><br><span class="line">        <span class="comment">// ç»™jtè®¾ç½®æ•°æ®æº</span></span><br><span class="line">        jt.setDataSource(ds);</span><br><span class="line">        <span class="comment">// 2.æ‰§è¡Œæ“ä½œ</span></span><br><span class="line">        jt.execute(<span class="string">"insert into account(name,money) values('ccc',1000)"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œï¼Œæ²¡æœ‰é—®é¢˜</p>
<img src="/images/2020/screencapture2020-03-19PM3.57.43.jpg" width=200>

<p>ä½†æ˜¯è¿™æ ·å†™æ•°æ®åº“çš„é…ç½®éƒ½å†™æ­»äº†ï¼Œè€Œä¸”ç”¨äº†å¾ˆå¤šsetã€new</p>
<p>éƒ½å¯ä»¥é€šè¿‡IoCé…ç½®</p>
<h2 id="IoCé…ç½®"><a href="#IoCé…ç½®" class="headerlink" title="IoCé…ç½®"></a>IoCé…ç½®</h2><p>è¿™é‡ŒdataSourceæš‚æ—¶å…ˆç”¨Springå†…ç½®çš„ï¼ˆid=â€dataSourceâ€ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcTemplateDemo2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.è·å–å®¹å™¨</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.è·å–å¯¹è±¡</span></span><br><span class="line">        JdbcTemplate jt = ac.getBean(<span class="string">"jdbcTemplate"</span>,JdbcTemplate<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.æ‰§è¡Œæ“ä½œ</span></span><br><span class="line">        jt.execute(<span class="string">"insert into account(name,money)values('ddd',2222)"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿæ²¡é—®é¢˜</p>
<img src="/images/2020/screencapture2020-03-19PM4.04.17.jpg" width=200>

<h1 id="ä½¿ç”¨JdbcTemplateå®ç°åŸºæœ¬çš„CRUD"><a href="#ä½¿ç”¨JdbcTemplateå®ç°åŸºæœ¬çš„CRUD" class="headerlink" title="ä½¿ç”¨JdbcTemplateå®ç°åŸºæœ¬çš„CRUD"></a>ä½¿ç”¨JdbcTemplateå®ç°åŸºæœ¬çš„CRUD</h1><p>å¢åˆ æ”¹éƒ½æ˜¯updateæ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¿å­˜</span></span><br><span class="line">jt.update(<span class="string">"insert into account(name,money)values(?,?)"</span>,<span class="string">"eee"</span>,<span class="number">3333f</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°</span></span><br><span class="line">jt.update(<span class="string">"update account set name=?,money=? where id=?"</span>,<span class="string">"test"</span>,<span class="number">4567</span>,<span class="number">7</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤</span></span><br><span class="line">jt.update(<span class="string">"delete from account where id=?"</span>,<span class="number">8</span>);</span><br></pre></td></tr></table></figure>

<p>æŸ¥è¯¢æ˜¯query</p>
<p>queryæœ‰å¾ˆå¤šå¾ˆå¤šå¾ˆå¤šé‡è½½çš„æ–¹æ³•ï¼Œæ‰¾çš„æ—¶å€™å…³æ³¨ä¸¤ä¸ªç‚¹ï¼šæˆ‘ä»¬æœ‰ä»€ä¹ˆï¼ˆå‚æ•°ï¼‰ã€æˆ‘ä»¬è¦ä»€ä¹ˆï¼ˆè¿”å›å€¼ï¼‰</p>
<p>æ¯”å¦‚æœ‰sqlè¯­å¥ã€å‚æ•°ï¼Œè¦è¿”å›ä¸€ä¸ªListï¼Œç­›é€‰å‡ºæ¥åŸºæœ¬å°±å‰©2ä¸ªäº†ï¼Œå®ƒä»¬ä¸€ä¸ªè¦ä¼ Object[] argsï¼Œä¸€ä¸ªæ˜¯Objectâ€¦ argsï¼Œæ˜¯é’ˆå¯¹ä¸åŒç‰ˆæœ¬çš„ï¼ˆå‰è€…æ‰€æœ‰ç‰ˆæœ¬å¯ç”¨ï¼Œåè€…jdk5ä¹‹åæ”¯æŒå¯å˜å‚æ•°å¯ç”¨ï¼‰</p>
<p>ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢æ‰€æœ‰</span></span><br><span class="line">List&lt;Account&gt; accounts = jt.query(<span class="string">"select * from account where money &gt; ?"</span>,<span class="keyword">new</span> AccountRowMapper(),<span class="number">1000f</span>);</span><br></pre></td></tr></table></figure>

<p>éœ€è¦å†™ä¸€ä¸ªAccountRowMapperç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®šä¹‰Accountçš„å°è£…ç­–ç•¥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AccountRowMapper</span> <span class="keyword">implements</span> <span class="title">RowMapper</span>&lt;<span class="title">Account</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŠŠç»“æœé›†ä¸­çš„æ•°æ®å°è£…åˆ°Accountä¸­ï¼Œç„¶åç”±springæŠŠæ¯ä¸ªAccountåŠ åˆ°é›†åˆä¸­</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> rowNum</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">mapRow</span><span class="params">(ResultSet rs, <span class="keyword">int</span> rowNum)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setId(rs.getInt(<span class="string">"id"</span>));</span><br><span class="line">        account.setName(rs.getString(<span class="string">"name"</span>));</span><br><span class="line">        account.setMoney(rs.getFloat(<span class="string">"money"</span>));</span><br><span class="line">        <span class="keyword">return</span> account;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶é—®é¢˜æ¥äº†ï¼Œå¯¹æ¯”dbutilsä¸­çš„QueryRunner</p>
<img src="/images/2020/2020031902.png">

<p>ä¸åŒçš„åªæœ‰ResultSetHandlerå’ŒAccountRowMapperï¼Œä»å°è£…çš„è§’åº¦ä½œç”¨æ˜¯ä¸€æ ·çš„</p>
<p>ä»¥å‰æ˜¯ç”¨çš„dbutilsæä¾›çš„beanListHandlerå®ç°çš„</p>
<p>éš¾é“æœºæ™ºçš„Springæ²¡æœ‰è¿™ä¸ªå®ç°å—è¿˜è¦è‡ªå·±å†™ï¼Ÿ</p>
<p>æ˜¾ç„¶å¿…é¡»æœ‰ -&gt; BeanPropertyRowMapper</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢æ‰€æœ‰</span></span><br><span class="line"><span class="comment">// List&lt;Account&gt; accounts = jt.query("select * from account where money &gt; ?",new AccountRowMapper(),1000f);</span></span><br><span class="line">List&lt;Account&gt; accounts = jt.query(<span class="string">"select * from account where money &gt; ?"</span>,<span class="keyword">new</span> BeanPropertyRowMapper&lt;Account&gt;(Account<span class="class">.<span class="keyword">class</span>),1000<span class="title">f</span>)</span>;</span><br><span class="line"><span class="keyword">for</span>(Account account : accounts)&#123;</span><br><span class="line">  System.out.println(account);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>èƒ½æŸ¥æ‰€æœ‰äº†ï¼ŒæŸ¥ä¸€ä¸ªä¹Ÿå·®ä¸å¤šï¼ˆå®é™…ä½¿ç”¨BeanPropertyRowMapperæ¯”è¾ƒå¤šï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢ä¸€ä¸ª</span></span><br><span class="line">List&lt;Account&gt; accounts = jt.query(<span class="string">"select * from account where id = ?"</span>,<span class="keyword">new</span> BeanPropertyRowMapper&lt;Account&gt;(Account<span class="class">.<span class="keyword">class</span>),3)</span>;</span><br><span class="line">System.out.println(accounts.isEmpty()? <span class="string">"æ²¡æœ‰å†…å®¹"</span> :accounts.get(<span class="number">0</span>));</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰èšåˆ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢è¿”å›ä¸€è¡Œä¸€åˆ—ï¼ˆä½¿ç”¨èšåˆå‡½æ•°ï¼Œä½†ä¸åŠ group byå­å¥ï¼‰</span></span><br><span class="line">Long count = jt.queryForObject(<span class="string">"select count(*) from account where money &gt; ?"</span>,Long<span class="class">.<span class="keyword">class</span>,1000<span class="title">f</span>)</span>;</span><br><span class="line">System.out.println(count);</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒä¸ªå‚æ•°ç”¨æ¥æŒ‡å®šè¿”å›ç±»å‹ï¼ˆå‰ææ˜¯èƒ½è½¬ï¼Œä¸ºé˜²æº¢å‡ºä¸€èˆ¬ç”¨Longæ¥æ”¶ï¼‰</p>
<h1 id="JdbcTemplateåœ¨Daoä¸­çš„ä½¿ç”¨"><a href="#JdbcTemplateåœ¨Daoä¸­çš„ä½¿ç”¨" class="headerlink" title="JdbcTemplateåœ¨Daoä¸­çš„ä½¿ç”¨"></a>JdbcTemplateåœ¨Daoä¸­çš„ä½¿ç”¨</h1><p>å†™ä¸€ä¸ªIAccountDaoæ¥å£ï¼Œå®ç°ç±»ä¸­ç”¨ä¸Šé¢çš„æ–¹æ³•å®ŒæˆåŠŸèƒ½å³å¯</p>
<h2 id="JdbcDaoSupportçš„ä½¿ç”¨"><a href="#JdbcDaoSupportçš„ä½¿ç”¨" class="headerlink" title="JdbcDaoSupportçš„ä½¿ç”¨"></a>JdbcDaoSupportçš„ä½¿ç”¨</h2><p>æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœå®é™…å¼€å‘ä¸­æœ‰å¤šä¸ªDaoï¼Œæ¯ä¸ªå®ç°ç±»ä¸­éƒ½è¦è·å–JdbcTemplate</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setJdbcTemplate</span><span class="params">(JdbcTemplate jdbcTemplate)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.jdbcTemplate = jdbcTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç ä¼šé‡å¤å¾ˆå¤šæ¬¡</p>
<p>å¯ä»¥å†™ä¸€ä¸ªJdbcDaoSupportç±»ç”¨äºæŠ½å–è¿™æ®µé‡å¤ä»£ç </p>
<p>å…¶å®ƒDaoImpç»§æ‰¿è¿™ä¸ªç±»ï¼Œgetå…¶ä¸­çš„jdbcTemplateï¼ŒdataSourceä¹Ÿåœ¨å…¶ä¸­è®¾ç½®å¥½</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ­¤ç±»ç”¨äºæŠ½å–daoä¸­çš„é‡å¤ä»£ç </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcDaoSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setJdbcTemplate</span><span class="params">(JdbcTemplate jdbcTemplate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.jdbcTemplate = jdbcTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JdbcTemplate <span class="title">getJdbcTemplate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDataSource</span><span class="params">(DataSource dataSource)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(jdbcTemplate == <span class="keyword">null</span>)&#123;</span><br><span class="line">            jdbcTemplate = createJdbcTemplate(dataSource);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> JdbcTemplate <span class="title">createJdbcTemplate</span><span class="params">(DataSource dataSource)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JdbcTemplate(dataSource);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ˜¾ç„¶ï¼ŒsetDataSourceçš„æ—¶å€™JdbcTemplateä¹Ÿæœ‰äº†</p>
<p>äºæ˜¯é…ç½®çš„æ—¶å€™å°±ä¸ç”¨é…JdbcTemplateäº†</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®è´¦æˆ·çš„æŒä¹…å±‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountDao"</span> <span class="attr">class</span>=<span class="string">"com.itheima.dao.impl.AccountDaoImpl"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--        &lt;property name="jdbcTemplate" ref="jdbcTemplate"&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--é…ç½®JdbcTemplate--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate"&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/bean&gt;--&gt;</span></span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆé—®é¢˜åˆæ¥äº†</p>
<p>è‡ªå·±éƒ½èƒ½å†™å‡ºæ¥çš„ä¸œè¥¿Springæ˜¾ç„¶å¿…é¡»æœ‰</p>
<p>æŠŠè¿™ä¸ªè‡ªå·±å†™çš„JdbcDaoSupportæ³¨é‡Šæ‰ï¼Œè¿˜èƒ½è·‘ï¼Œä¸ºå•¥å‘¢</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.support.JdbcDaoSupport;</span><br></pre></td></tr></table></figure>

<p>è‡ªåŠ¨å¯¼å…¥äº†Springçš„JdbcDaoSupport</p>
<p>æ‰“å¼€è¿™ä¸ªç±»çœ‹ä¸€ä¸‹ï¼Œå°±æœ‰JdbcTemplateï¼Œæœ‰setDataSourceæ–¹æ³•ï¼Œæœ‰ä¸Šé¢ä¸€å †</p>
<p>æ‰€ä»¥ä¸éœ€è¦è‡ªå·±å†™ï¼Œç»§æ‰¿å°±å®Œäº‹</p>
<p>ç»§æ‰¿å®ƒçš„ç›®çš„å°±æ˜¯åœ¨æœ‰å¤šä¸ªDaoæ—¶å»é™¤é‡å¤ä»£ç </p>
<p>ä½†æ˜¯ç”±äºæºç ä¸èƒ½åŠ¨ï¼Œå°±ä¸å¥½é€šè¿‡æ³¨è§£é…ç½®äº†ï¼Œè‡ªå·±å†™å’Œç›´æ¥ç»§æ‰¿çš„åŒºåˆ«å°±åœ¨äºè¿™é‡Œï¼Œéœ€è¦æƒè¡¡</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>è®°å½•é‚£äº›è®©æˆ‘å¿ƒåŠ¨çš„è®¾è®¡</title>
    <url>/2020/03/18/aha/</url>
    <content><![CDATA[<h1 id="Trelloçš„åˆ—è¡¨å®Œæˆæœ€åä¸€ä¸ªæ—¶ä¼šæ‰­åŠ¨ï½è¿˜æœ‰ä¸åŒçš„æ‘‡æ‘†æ–¹å¼ï¼"><a href="#Trelloçš„åˆ—è¡¨å®Œæˆæœ€åä¸€ä¸ªæ—¶ä¼šæ‰­åŠ¨ï½è¿˜æœ‰ä¸åŒçš„æ‘‡æ‘†æ–¹å¼ï¼" class="headerlink" title="Trelloçš„åˆ—è¡¨å®Œæˆæœ€åä¸€ä¸ªæ—¶ä¼šæ‰­åŠ¨ï½è¿˜æœ‰ä¸åŒçš„æ‘‡æ‘†æ–¹å¼ï¼"></a>Trelloçš„åˆ—è¡¨å®Œæˆæœ€åä¸€ä¸ªæ—¶ä¼šæ‰­åŠ¨ï½è¿˜æœ‰ä¸åŒçš„æ‘‡æ‘†æ–¹å¼ï¼</h1><img src="/images/2020/Mar-18-2020 22-56-56.gif" width=400>
<img src="/images/2020/Mar-18-2020 22-56-19.gif" width=400>
<img src="/images/2020/Mar-18-2020 22-57-26.gif" width=400>
å•ŠTrelloæˆ‘çš„â¤ï¸ï¼

<h1 id="ä¼é¹…å²›é‡Œçš„ä¼é¹…ä¼šæŠŠèŠ±ç”°é‡Œçš„èŠ±å¼å‡ºæ¥ç§ï½æˆ³å®ƒä¼šæ‘”å€’"><a href="#ä¼é¹…å²›é‡Œçš„ä¼é¹…ä¼šæŠŠèŠ±ç”°é‡Œçš„èŠ±å¼å‡ºæ¥ç§ï½æˆ³å®ƒä¼šæ‘”å€’" class="headerlink" title="ä¼é¹…å²›é‡Œçš„ä¼é¹…ä¼šæŠŠèŠ±ç”°é‡Œçš„èŠ±å¼å‡ºæ¥ç§ï½æˆ³å®ƒä¼šæ‘”å€’~"></a>ä¼é¹…å²›é‡Œçš„ä¼é¹…ä¼šæŠŠèŠ±ç”°é‡Œçš„èŠ±å¼å‡ºæ¥ç§ï½æˆ³å®ƒä¼šæ‘”å€’~</h1><img src="/images/2020/20200318_233535.gif" width=300>
å¤©å‘æˆ‘éœ€è¦ä¸€ä¸ªé«˜æ¸…çš„å½•å±app --MARK--]]></content>
      <categories>
        <category>Resource</category>
      </categories>
      <tags>
        <tag>aha</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueç¬”è®°07 æ€»ç»“</title>
    <url>/2020/03/17/note-vue-07/</url>
    <content><![CDATA[<p>è¿™ä¸ªæ•™ç¨‹6på­¦å®Œäº†ï½æ€»ç»“ä¸€ä¸‹è¿™ä¸ªå›¾ä¹¦å¢åˆ æ”¹æŸ¥çš„demo</p>
<blockquote>
<p><a href="https://www.bilibili.com/video/av85793766" target="_blank" rel="noopener">https://www.bilibili.com/video/av85793766</a></p>
</blockquote>
<hr>
<p><a href="/2020/03/06/note-vue-02/">å·¥ç¨‹åˆ›å»º</a>ç•¥<br>æ•°æ®åº“éƒ¨åˆ†ç•¥</p>
<h1 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h1><h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><img src="/images/2020/screencapture2020-03-17PM5.44.27.jpg" width=400>

<ul>
<li>Book å®ä½“ç±»</li>
<li>BookRepository ç»§æ‰¿JpaRepositoryï¼Œæä¾›æ•°æ®åº“å¢åˆ æ”¹æŸ¥æ¥å£</li>
<li>BookHandler ç›¸åº”è¯·æ±‚</li>
<li>BookRepositoryTest æµ‹è¯•BookRepositoryçš„æ–¹æ³•</li>
</ul>
<h2 id="Book"><a href="#Book" class="headerlink" title="Book"></a>Book</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coconutnut.bookstore_server.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GenerationType;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span> <span class="comment">// æ ¹æ®ç±»åå’Œè¡¨åå¯¹åº”ç»‘å®š</span></span><br><span class="line"><span class="meta">@Data</span>   <span class="comment">// è‡ªåŠ¨ç”Ÿæˆget/set</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span> <span class="comment">// ä¸»é”®</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY) <span class="comment">// idè‡ªå¢</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="BookRepository"><a href="#BookRepository" class="headerlink" title="BookRepository"></a>BookRepository</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coconutnut.bookstore_server.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.coconutnut.bookstore_server.entity.Book;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &lt;&gt;ä¸­ç¬¬ä¸€ä¸ªæ˜¯å®ä½“ç±»ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸»é”®ç±»å‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BookRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Book</span>,<span class="title">Integer</span>&gt; </span>&#123; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>JpaRepositoryä¸­æœ‰å¸¸ç”¨çš„å¢åˆ æ”¹æŸ¥æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨</p>
<p>&amp; é€šå¸¸æµç¨‹ï¼šå…ˆåœ¨Testä¸­æµ‹è¯•æ–¹æ³•ï¼Œæ²¡é—®é¢˜åœ¨Controllerä¸­å†™å¯¹å¤–æ¥å£ï¼Œæµè§ˆå™¨çœ‹ä¸€ä¸‹è¿”å›å€¼å¯¹ä¸å¯¹ï¼Œæœ€åå†™å‰ç«¯</p>
<p>Springå·¥ç¨‹è‡ªå¸¦ä¸€ä¸ªæµ‹è¯•ç±»BookstoreServerApplicationTests<br>è‡ªå·±åˆ›å»ºå¯åœ¨æ¥å£åä¸Šå³é”®-&gt;Go To-&gt;Test-&gt;Create New Test<br>ç”Ÿæˆçš„æµ‹è¯•ç±»åŠ @SpringBootTestï¼Œè¦æµ‹è¯•çš„ç±»@Autowiredè‡ªåŠ¨æ³¨å…¥ï¼Œå†™çš„æ–¹æ³•åŠ @Testå³å¯</p>
<h2 id="BookHandler"><a href="#BookHandler" class="headerlink" title="BookHandler"></a>BookHandler</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coconutnut.bookstore_server.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.coconutnut.bookstore_server.entity.Book;</span><br><span class="line"><span class="keyword">import</span> com.coconutnut.bookstore_server.repository.BookRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.PageRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/book"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookRepository bookRepository;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥æ‰€æœ‰ä¹¦</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Book&gt; <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bookRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥ä¸€é¡µ</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findAll/&#123;page&#125;/&#123;size&#125;"</span>)</span><br><span class="line">    <span class="comment">// @PathVariableè·å–å‚æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Page&lt;Book&gt; <span class="title">findAll</span><span class="params">(@PathVariable(<span class="string">"page"</span>)</span> Integer page,@<span class="title">PathVariable</span><span class="params">(<span class="string">"size"</span>)</span> Integer size)</span>&#123;</span><br><span class="line">        PageRequest pageRequest = PageRequest.of(page,size);</span><br><span class="line">        <span class="keyword">return</span> bookRepository.findAll(pageRequest);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–°å¢</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/save"</span>)</span><br><span class="line">    <span class="comment">// @RequestBodyæŠŠjsonæ ¼å¼è½¬æˆjavaå¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">(@RequestBody Book book)</span></span>&#123;</span><br><span class="line">        Book result = bookRepository.save(book);</span><br><span class="line">        <span class="keyword">if</span>(result != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥ä¸€ä¸ª</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findById/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Book <span class="title">findById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bookRepository.findById(id).get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¿®æ”¹</span></span><br><span class="line">    <span class="meta">@PutMapping</span>(<span class="string">"/update"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">update</span><span class="params">(@RequestBody Book book)</span></span>&#123;</span><br><span class="line">        Book result = bookRepository.save(book);</span><br><span class="line">        <span class="keyword">if</span>(result != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤</span></span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"/deleteById/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id)</span>&#123;</span><br><span class="line">        bookRepository.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h1><h2 id="é¡¹ç›®ç»“æ„-1"><a href="#é¡¹ç›®ç»“æ„-1" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><img src="/images/2020/screencapture2020-03-17PM5.46.22.jpg"  width=400>

<ul>
<li>Index.js é…è·¯ç”±</li>
<li>App.vue å¸¸é©»çš„é¡µé¢</li>
<li>å…¶å®ƒvue åµŒå…¥çš„é¡µé¢</li>
</ul>
<h2 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h2><p>é…ç½®é¡µé¢çš„ä»å±å…³ç³»ä¸è·¯å¾„</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> Index <span class="keyword">from</span> <span class="string">"../views/Index"</span>;</span><br><span class="line"><span class="keyword">import</span> BookManage <span class="keyword">from</span> <span class="string">'../views/BookManage'</span></span><br><span class="line"><span class="keyword">import</span> AddBook <span class="keyword">from</span> <span class="string">'../views/AddBook'</span></span><br><span class="line"><span class="keyword">import</span> BookUpdate <span class="keyword">from</span> <span class="string">'../views/BookUpdate'</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    name: <span class="string">'å›¾ä¹¦ç®¡ç†'</span>,</span><br><span class="line">    show: <span class="literal">true</span>,</span><br><span class="line">    component:Index,</span><br><span class="line">    redirect:<span class="string">'book-manage'</span>,</span><br><span class="line">    children:[</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/book-manage'</span>,</span><br><span class="line">        name: <span class="string">'æŸ¥è¯¢å›¾ä¹¦'</span>,</span><br><span class="line">        component: BookManage</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/add-book'</span>,</span><br><span class="line">        name: <span class="string">'æ·»åŠ å›¾ä¹¦'</span>,</span><br><span class="line">        component: AddBook</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/book-update'</span>,</span><br><span class="line">    name: <span class="string">'ä¿®æ”¹'</span>,</span><br><span class="line">    show: <span class="literal">false</span>,</span><br><span class="line">    component: BookUpdate</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">'history'</span>,</span><br><span class="line">  base: process.env.BASE_URL,</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<h2 id="é¡µé¢åµŒå¥—ä¸è·³è½¬"><a href="#é¡µé¢åµŒå¥—ä¸è·³è½¬" class="headerlink" title="é¡µé¢åµŒå¥—ä¸è·³è½¬"></a>é¡µé¢åµŒå¥—ä¸è·³è½¬</h2><p>App.vueä¸­templateç»“æ„</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-container</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-aside</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-menu</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-main</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+------------------------------------+ </span><br><span class="line">| App                                |  </span><br><span class="line">| +------+-------------------------+ | </span><br><span class="line">| | menu | main                    | |  </span><br><span class="line">| |      | +---------------------+ | |  </span><br><span class="line">| |      | | router-view         | | | </span><br><span class="line">| |      | +---------------------+ | |  </span><br><span class="line">| +------+-------------------------+ | </span><br><span class="line">+------------------------------------+</span><br></pre></td></tr></table></figure>

<p>å·¦ä¾§asideåŒºåŸŸä¸­æ”¾menuï¼Œå³ä¾§mainä¸­ç”±routeråŠ¨æ€åŠ è½½</p>
<p>Index.vueä¸­templateç»“æ„</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Index.vueä¸­å…¶å®ƒéƒ½æ˜¯é»˜è®¤çš„</p>
<p>æ ¹æ®index.jsä¸­çš„é…ç½®ï¼Œâ€™/â€˜å°±åŠ è½½Index.vueåˆ°App.vueçš„router-viewåŒºåŸŸï¼Œå†â€™/book-manageâ€™åŠ è½½Index.vueçš„router-viewåŒºåŸŸã€‚è€ŒIndexé‡å®šå‘åˆ°book-manageï¼Œäºæ˜¯â€™http:localhost:4000/â€˜é»˜è®¤å°±æ˜¾ç¤ºäº†book-manage</p>
<p>è€Œâ€™/book-updateâ€™åŠ è½½Update.vueåˆ°App.vueçš„router-viewåŒºåŸŸ</p>
<p>æ•…æ˜¾ç¤ºæ‰€æœ‰å­é¡µé¢çš„æ—¶å€™éƒ½å¯ä»¥çœ‹åˆ°èœå•</p>
<h2 id="æ ¹æ®routesé…ç½®åŠ¨æ€åŠ è½½èœå•æ -gt-App-vue"><a href="#æ ¹æ®routesé…ç½®åŠ¨æ€åŠ è½½èœå•æ -gt-App-vue" class="headerlink" title="æ ¹æ®routesé…ç½®åŠ¨æ€åŠ è½½èœå•æ  -&gt; App.vue"></a>æ ¹æ®routesé…ç½®åŠ¨æ€åŠ è½½èœå•æ  -&gt; App.vue</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-container</span> <span class="attr">style</span>=<span class="string">"height: 500px; border: 1px solid #eee"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">width</span>=<span class="string">"200px"</span> <span class="attr">style</span>=<span class="string">"background-color: rgb(238, 241, 246)"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--            è¿™é‡Œæ·»åŠ routeræ ‡ç­¾ï¼Œel-menu-itemçš„indexå°±ä¼šè¢«ä½œä¸ºrouterè·¯å¾„--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-menu</span> <span class="attr">router</span> <span class="attr">:default-openeds</span>=<span class="string">"['0','1']"</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--          showå±æ€§ä¸ºtrueåˆ™éå†--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in $router.options.routes"</span> <span class="attr">:index</span>=<span class="string">"index+''"</span> <span class="attr">v-if</span>=<span class="string">"item.show"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-setting"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--                    æ¡ä»¶åˆ¤æ–­å½“å‰è·¯å¾„æ˜¯å¦ç­‰äºindexï¼Œæ›´æ”¹é€‰ä¸­çŠ¶æ€ï¼Œä¸»è¦æ˜¯åœ¨åˆå§‹åŒ–æ—¶å¢åŠ é»˜è®¤çš„é€‰ä¸­çŠ¶æ€--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">v-for</span>=<span class="string">"item2 in item.children"</span> <span class="attr">:index</span>=<span class="string">"item2.path"</span> <span class="attr">:class</span>=<span class="string">"$route.path==item2.path ? 'is-active' : ''"</span>&gt;</span>&#123;&#123;item2.name&#125;&#125;<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-main</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--            ä¸Šé¢åˆindexç¡®å®šçš„routerè¢«æ˜¾ç¤ºåœ¨è¿™é‡Œï¼Œä¹Ÿå°±æ˜¯mainåŒºåŸŸä¸­--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'app'</span>,</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-id">#app</span> &#123;</span></span><br><span class="line">  font-family: 'Avenir', Helvetica, Arial, sans-serif;</span><br><span class="line">  -webkit-font-smoothing: antialiased;</span><br><span class="line">  -moz-osx-font-smoothing: grayscale;</span><br><span class="line">  text-align: center;</span><br><span class="line"><span class="css">  <span class="selector-tag">color</span>: <span class="selector-id">#2c3e50</span>;</span></span><br><span class="line">  margin-top: 60px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="è¡¨å•æ˜¾ç¤ºæ‰€æœ‰ä¹¦ç±ã€ç¿»é¡µã€åˆ é™¤-gt-BookManage-vue"><a href="#è¡¨å•æ˜¾ç¤ºæ‰€æœ‰ä¹¦ç±ã€ç¿»é¡µã€åˆ é™¤-gt-BookManage-vue" class="headerlink" title="è¡¨å•æ˜¾ç¤ºæ‰€æœ‰ä¹¦ç±ã€ç¿»é¡µã€åˆ é™¤ -&gt; BookManage.vue"></a>è¡¨å•æ˜¾ç¤ºæ‰€æœ‰ä¹¦ç±ã€ç¿»é¡µã€åˆ é™¤ -&gt; BookManage.vue</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:data</span>=<span class="string">"tableData"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">border</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">"width: 100%"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">                <span class="attr">fixed</span></span></span><br><span class="line"><span class="tag">                <span class="attr">prop</span>=<span class="string">"id"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">label</span>=<span class="string">"ç¼–å·"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">width</span>=<span class="string">"150"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">                <span class="attr">prop</span>=<span class="string">"name"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">label</span>=<span class="string">"ä¹¦å"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">width</span>=<span class="string">"150"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">                <span class="attr">prop</span>=<span class="string">"author"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">label</span>=<span class="string">"ä½œè€…"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">width</span>=<span class="string">"150"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                fixed="right"--&gt;</span></span><br><span class="line">                label="æ“ä½œ"</span><br><span class="line">                width="100"&gt;</span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"edit(scope.row)"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">size</span>=<span class="string">"small"</span>&gt;</span>ä¿®æ”¹<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"deleteBook(scope.row)"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">size</span>=<span class="string">"small"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            <span class="attr">background</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">"prev, pager, next"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">"pageSize"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">"total"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">"clickPage"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">        methods: &#123;</span><br><span class="line"><span class="actionscript">            <span class="comment">// åˆ é™¤</span></span></span><br><span class="line">            deleteBook(row) &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> _this = <span class="keyword">this</span></span></span><br><span class="line"><span class="actionscript">                axios.delete(<span class="string">'http://localhost:8181/book/deleteById/'</span>+row.id).then(<span class="function"><span class="keyword">function</span><span class="params">(resp)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">// è¿™é‡Œæ²¡æœ‰ç®¡è¿”å›ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥åˆ¤æ–­çŠ¶æ€ï¼Œ200å°±æ˜¯æˆåŠŸ</span></span></span><br><span class="line"><span class="actionscript">                    _this.$alert(<span class="string">'ã€Š'</span>+row.name+<span class="string">'ã€‹åˆ é™¤æˆåŠŸï¼'</span>, <span class="string">'æ¶ˆæ¯'</span>, &#123;</span></span><br><span class="line"><span class="actionscript">                        confirmButtonText: <span class="string">'ç¡®å®š'</span>,</span></span><br><span class="line"><span class="javascript">                        callback: <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">                            <span class="comment">// åˆ·æ–°</span></span></span><br><span class="line"><span class="javascript">                            <span class="built_in">window</span>.location.reload()</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="actionscript">            <span class="comment">// è·³è½¬åˆ°ç¼–è¾‘</span></span></span><br><span class="line">            edit(row) &#123;</span><br><span class="line"><span class="actionscript">                <span class="comment">// this.$router.push('/book-update')</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.$router.push(&#123;</span></span><br><span class="line"><span class="actionscript">                    path: <span class="string">'/book-update'</span>,</span></span><br><span class="line">                    query: &#123;</span><br><span class="line">                        id: row.id</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="actionscript">            <span class="comment">// ç¿»é¡µ</span></span></span><br><span class="line">            clickPage(index)&#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> _this = <span class="keyword">this</span></span></span><br><span class="line"><span class="actionscript">                axios.get(<span class="string">'http://localhost:8181/book/findAll/'</span>+(index<span class="number">-1</span>)+<span class="string">'/6'</span>).then(<span class="function"><span class="keyword">function</span><span class="params">(resp)</span></span>&#123;</span></span><br><span class="line">                    _this.tableData = resp.data.content</span><br><span class="line">                    _this.pageSize = resp.data.size</span><br><span class="line">                    _this.total = resp.data.totalElements</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                pageSize:<span class="string">'6'</span>,</span></span><br><span class="line"><span class="actionscript">                total:<span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">                tableData:<span class="string">''</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// åŠ è½½ä¹¦ç±ä¿¡æ¯åˆ°è¡¨å•</span></span></span><br><span class="line">        created()&#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">const</span> _this = <span class="keyword">this</span></span></span><br><span class="line"><span class="actionscript">            axios.get(<span class="string">'http://localhost:8181/book/findAll/0/6'</span>).then(<span class="function"><span class="keyword">function</span><span class="params">(resp)</span></span>&#123;</span></span><br><span class="line">                _this.tableData = resp.data.content</span><br><span class="line">                _this.pageSize = resp.data.size</span><br><span class="line">                _this.total = resp.data.totalElements</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ–°å¢-gt-AddBook-vue"><a href="#æ–°å¢-gt-AddBook-vue" class="headerlink" title="æ–°å¢ -&gt; AddBook.vue"></a>æ–°å¢ -&gt; AddBook.vue</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    modelè®¾ç½®æ•°æ®ç»‘å®šï¼Œrulesè®¾ç½®æ ¡éªŒè§„åˆ™ï¼Œrefæ˜¯åå­—ï¼Œåœ¨æäº¤æ—¶ä½¿ç”¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">style</span>=<span class="string">"width: 60%"</span> <span class="attr">:model</span>=<span class="string">"ruleForm"</span> <span class="attr">:rules</span>=<span class="string">"rules"</span> <span class="attr">ref</span>=<span class="string">"ruleForm"</span> <span class="attr">label-width</span>=<span class="string">"100px"</span> <span class="attr">class</span>=<span class="string">"demo-ruleForm"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"ä¹¦å"</span> <span class="attr">prop</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.name"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"ä½œè€…"</span> <span class="attr">prop</span>=<span class="string">"author"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.author"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"submitForm('ruleForm')"</span>&gt;</span>ç«‹å³åˆ›å»º<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"resetForm('ruleForm')"</span>&gt;</span>é‡ç½®<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line">                ruleForm: &#123;</span><br><span class="line"><span class="actionscript">                    name: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">                    author: <span class="string">''</span>,</span></span><br><span class="line">                &#125;,</span><br><span class="line">                rules: &#123;</span><br><span class="line">                    name: [</span><br><span class="line"><span class="actionscript">                        &#123; required: <span class="literal">true</span>, message: <span class="string">'è¯·è¾“å…¥ä¹¦å'</span>, trigger: <span class="string">'blur'</span> &#125;,</span></span><br><span class="line">                    ],</span><br><span class="line">                    author: [</span><br><span class="line"><span class="actionscript">                        &#123; required: <span class="literal">true</span>, message: <span class="string">'è¯·è¾“å…¥ä½œè€…'</span>, trigger: <span class="string">'blur'</span> &#125;,</span></span><br><span class="line">                    ],</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line"><span class="actionscript">            <span class="comment">// æäº¤è¡¨å•</span></span></span><br><span class="line">            submitForm(formName) &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> _this = <span class="keyword">this</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.$refs[formName].validate(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span><br><span class="line">                    if (valid) &#123;</span><br><span class="line"><span class="actionscript">                        axios.post(<span class="string">'http://localhost:8181/book/save'</span>,<span class="keyword">this</span>.ruleForm).then(<span class="function"><span class="keyword">function</span><span class="params">(resp)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">if</span>(resp.data == <span class="string">'success'</span>)&#123;</span></span><br><span class="line">                                _this.$message(&#123;</span><br><span class="line"><span class="actionscript">                                    message: <span class="string">'ã€Š'</span>+_this.ruleForm.name+<span class="string">'ã€‹'</span>+<span class="string">'æ·»åŠ æˆåŠŸ'</span>,</span></span><br><span class="line"><span class="actionscript">                                    type: <span class="string">'success'</span></span></span><br><span class="line">                                &#125;)</span><br><span class="line"><span class="actionscript">                                _this.$router.push(<span class="string">'/book-manage'</span>)</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="actionscript">            <span class="comment">// é‡ç½®è¡¨å•</span></span></span><br><span class="line">            resetForm(formName) &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.$refs[formName].resetFields();</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ä¿®æ”¹-gt-BookUpdate-vue"><a href="#ä¿®æ”¹-gt-BookUpdate-vue" class="headerlink" title="ä¿®æ”¹ -&gt;  BookUpdate.vue"></a>ä¿®æ”¹ -&gt;  BookUpdate.vue</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    modelè®¾ç½®æ•°æ®ç»‘å®šï¼Œrulesè®¾ç½®æ ¡éªŒè§„åˆ™ï¼Œrefæ˜¯åå­—ï¼Œåœ¨æäº¤æ—¶ä½¿ç”¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">style</span>=<span class="string">"width: 60%"</span> <span class="attr">:model</span>=<span class="string">"ruleForm"</span> <span class="attr">:rules</span>=<span class="string">"rules"</span> <span class="attr">ref</span>=<span class="string">"ruleForm"</span> <span class="attr">label-width</span>=<span class="string">"100px"</span> <span class="attr">class</span>=<span class="string">"demo-ruleForm"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"ç¼–å·"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.id"</span> <span class="attr">readonly</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"ä¹¦å"</span> <span class="attr">prop</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.name"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"ä½œè€…"</span> <span class="attr">prop</span>=<span class="string">"author"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.author"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"submitForm('ruleForm')"</span>&gt;</span>ä¿®æ”¹<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"submitForm('ruleForm')"</span>&gt;</span>é‡ç½®<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line">                ruleForm: &#123;</span><br><span class="line"><span class="actionscript">                    id: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">                    name: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">                    author: <span class="string">''</span>,</span></span><br><span class="line">                &#125;,</span><br><span class="line">                rules: &#123;</span><br><span class="line">                    name: [</span><br><span class="line"><span class="actionscript">                        &#123; required: <span class="literal">true</span>, message: <span class="string">'è¯·è¾“å…¥ä¹¦å'</span>, trigger: <span class="string">'blur'</span> &#125;,</span></span><br><span class="line">                    ],</span><br><span class="line">                    author: [</span><br><span class="line"><span class="actionscript">                        &#123; required: <span class="literal">true</span>, message: <span class="string">'è¯·è¾“å…¥ä½œè€…'</span>, trigger: <span class="string">'blur'</span> &#125;,</span></span><br><span class="line">                    ],</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line"><span class="actionscript">            <span class="comment">// æäº¤è¡¨å•</span></span></span><br><span class="line">            submitForm(formName) &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> _this = <span class="keyword">this</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.$refs[formName].validate(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span><br><span class="line">                    if (valid) &#123;</span><br><span class="line"><span class="actionscript">                        axios.put(<span class="string">'http://localhost:8181/book/update'</span>,<span class="keyword">this</span>.ruleForm).then(<span class="function"><span class="keyword">function</span><span class="params">(resp)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">if</span>(resp.data == <span class="string">'success'</span>)&#123;</span></span><br><span class="line">                                _this.$message(&#123;</span><br><span class="line"><span class="actionscript">                                    message: <span class="string">'ã€Š'</span>+_this.ruleForm.name+<span class="string">'ã€‹'</span>+<span class="string">'ä¿®æ”¹æˆåŠŸ'</span>,</span></span><br><span class="line"><span class="actionscript">                                    type: <span class="string">'success'</span></span></span><br><span class="line">                                &#125;)</span><br><span class="line"><span class="actionscript">                                _this.$router.push(<span class="string">'/book-manage'</span>)</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            resetForm(formName) &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.$refs[formName].resetFields();</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="actionscript">        <span class="comment">// å¡«å…¥åˆå§‹ä¿¡æ¯</span></span></span><br><span class="line">        created()&#123;</span><br><span class="line"><span class="actionscript">            <span class="comment">// æ˜¯routeä¸æ˜¯router!</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// alert(this.$route.query.id)</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">const</span> _this = <span class="keyword">this</span></span></span><br><span class="line"><span class="actionscript">            axios.get(<span class="string">'http://localhost:8181/book/findById/'</span>+<span class="keyword">this</span>.$route.query.id).then(<span class="function"><span class="keyword">function</span><span class="params">(resp)</span></span>&#123;</span></span><br><span class="line">                _this.ruleForm = resp.data</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="ä¸€ç‚¹æƒ³æ³•"><a href="#ä¸€ç‚¹æƒ³æ³•" class="headerlink" title="ä¸€ç‚¹æƒ³æ³•"></a>ä¸€ç‚¹æƒ³æ³•</h1><p>Spring Boot + Vue çœŸæ˜¯å¥½æ–¹ä¾¿</p>
<p>åç«¯åŸºæœ¬ä¸ç”¨å†™ä»€ä¹ˆï¼Œè¦ç”¨çš„æ–¹æ³•éƒ½æœ‰</p>
<p>å‰ç«¯è¦ä»€ä¹ˆæ¨¡ç‰ˆç›´æ¥åœ¨element uié‡Œæ‰¾æ¥ç”¨</p>
<p>è·Ÿç€æ•²è¿™ä¸ªdemoçš„æ—¶å€™ç¢°åˆ°çš„å‘åŸºæœ¬éƒ½æ˜¯å’Œè·¯ç”±æœ‰å…³çš„ï¼Œrouterè½¬æ¥è½¬å»æœ‰ç‚¹æ™•</p>
<p>ä½†æ˜¯ æ€»ä¹‹</p>
<p>æˆ‘çœŸçš„ä»æ¥æ²¡æœ‰åœ¨å“ªä¸ªæ•™ç¨‹å¬è§è¿™ä¹ˆå¤šâ€œå°±è¡Œäº†â€ã€â€œè‡ªåŠ¨â€ã€â€œä¸ç”¨ç®¡äº†â€â€¦æåº¦èˆ’é€‚ï¼æœ‰æ¶å­ä¸ç”¨å¾’æ‰‹çˆ¬å¢™çœŸå¥½</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueç¬”è®°06 ä¿®æ”¹å’Œåˆ é™¤</title>
    <url>/2020/03/17/note-vue-06/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av85793766?p=6" target="_blank" rel="noopener">https://www.bilibili.com/video/av85793766?p=6</a></p>
</blockquote>
<h1 id="è·³è½¬åˆ°ä¿®æ”¹é¡µé¢"><a href="#è·³è½¬åˆ°ä¿®æ”¹é¡µé¢" class="headerlink" title="è·³è½¬åˆ°ä¿®æ”¹é¡µé¢"></a>è·³è½¬åˆ°ä¿®æ”¹é¡µé¢</h1><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;template slot-scope=<span class="string">"scope"</span>&gt;</span><br><span class="line">  &lt;el-button @click="edit(scope.row)" type="text" size="small"&gt;ä¿®æ”¹&lt;/el-button&gt;</span><br><span class="line">  &lt;el-button type="text" size="small"&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>@clickä¸­ç»‘å®šç‚¹å‡»äº‹ä»¶</p>
<p>è¿™é‡Œè·³è½¬ç”¨thisè€Œä¸éœ€è¦_thisï¼Œå› ä¸ºä¸åœ¨å›è°ƒå‡½æ•°ä¸­</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">edit(row) &#123;</span><br><span class="line">	this.$router.push(&#39;&#x2F;book-update&#39;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>DEBUG</strong></p>
<p>è¿™é‡Œè·³è½¬è¿‡å»ä¹‹åï¼Œæ•´é¡µéƒ½æ˜¯ä¿®æ”¹é¡µé¢ï¼Œå·¦ä¾§èœå•æ²¡æœ‰äº†</p>
<p>å’Œæºç å¯¹æ¯”ï¼Œå‘ç°å·¦ä¾§èœå•çš„ä»£ç æ”¾åœ¨App.vueè€Œä¸æ˜¯Index.vue æˆ‘å¤±å¿†äº†ï¼Ÿ</p>
<p>ä¸è¿‡ä¹Ÿå°±å¯ä»¥è§£é‡Šäº†ï¼ŒåŠ è½½ç®¡ç†ã€æ–°å¢å’Œä¿®æ”¹æ›¿æ¢çš„æ˜¯mainé‡Œçš„Indexéƒ¨åˆ†ï¼Œä¸ç®¡æ€ä¹ˆæ›¿æ¢èœå•éƒ½è¿˜åœ¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+------------------------------------+ </span><br><span class="line">| App                                |  </span><br><span class="line">| +------+-------------------------+ | </span><br><span class="line">| | menu | main                    | |  </span><br><span class="line">| |      | +---------------------+ | |  </span><br><span class="line">| |      | | Index               | | | </span><br><span class="line">| |      | +---------------------+ | |  </span><br><span class="line">| +------+-------------------------+ | </span><br><span class="line">+------------------------------------+</span><br></pre></td></tr></table></figure>

<p>è€Œæˆ‘çš„æŠŠmenuå†™åœ¨Indexé‡Œé¢ï¼Œç®¡ç†å’Œæ–°å¢æ›¿æ¢çš„æ˜¯Indexé‡Œçš„mainåŒºåŸŸï¼Œmenuè¿˜åœ¨ï¼Œè€Œä¿®æ”¹ç›´æ¥æŠŠIndexæ¢æ‰äº†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+------------------------------------+ </span><br><span class="line">| App                                |  </span><br><span class="line">| +--------------------------------+ | </span><br><span class="line">| | Index                          | |  </span><br><span class="line">| | +------+---------------------+ | |  </span><br><span class="line">| | | menu | main                | | | </span><br><span class="line">| | +------+---------------------+ | |  </span><br><span class="line">| +--------------------------------+ | </span><br><span class="line">+------------------------------------+</span><br></pre></td></tr></table></figure>

<p>æ”¹è¿‡æ¥ä¹‹åé¡µé¢å°±æ­£å¸¸äº†</p>
<hr>
<h1 id="ä¿®æ”¹é¡µé¢"><a href="#ä¿®æ”¹é¡µé¢" class="headerlink" title="ä¿®æ”¹é¡µé¢"></a>ä¿®æ”¹é¡µé¢</h1><p>å…ˆæŠŠæ–°å¢ç•Œé¢è¡¨å•å¤åˆ¶è¿‡å»</p>
<p>åœ¨createdæ–¹æ³•ä¸­è°ƒåå°æ•°æ®ï¼Œæ˜¾ç¤ºåˆ°é¡µé¢</p>
<p>é¦–å…ˆéœ€è¦è·å–å½“å‰çš„idï¼ŒBookManageé¡µé¢åœ¨routerä¸­å¸¦å‚æ•°ç©¿è¿‡å»</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">edit(row) &#123;</span><br><span class="line">  <span class="comment">// this.$router.push('/book-update')</span></span><br><span class="line">  <span class="keyword">this</span>.$router.push(&#123;</span><br><span class="line">    path: <span class="string">'/book-update'</span>,</span><br><span class="line">    query: &#123;</span><br><span class="line">    	id: row.id</span><br><span class="line">  	&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>BookUpdateé¡µé¢ä¸­æ¥æ”¶</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  submitForm(formName) &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;,</span><br><span class="line">    resetForm(formName) &#123;</span><br><span class="line">      <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">created()&#123;</span><br><span class="line">    <span class="comment">// æ˜¯routeä¸æ˜¯router!</span></span><br><span class="line">    alert(<span class="keyword">this</span>.$route.query.id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œcreated()åœ¨methodså¤–é¢</p>
<h1 id="è·å–å¾…ä¿®æ”¹ä¿®æ”¹å›¾ä¹¦ä¿¡æ¯"><a href="#è·å–å¾…ä¿®æ”¹ä¿®æ”¹å›¾ä¹¦ä¿¡æ¯" class="headerlink" title="è·å–å¾…ä¿®æ”¹ä¿®æ”¹å›¾ä¹¦ä¿¡æ¯"></a>è·å–å¾…ä¿®æ”¹ä¿®æ”¹å›¾ä¹¦ä¿¡æ¯</h1><h2 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h2><p>Repositoryçš„findById()è¿”å›çš„æ˜¯Optionç±»ï¼Œç›¸å½“äºæŠŠBookåˆåŒ…äº†ä¸€å±‚ï¼Œå†ç”¨get()å¾—åˆ°Bookå¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">findById</span><span class="params">()</span></span>&#123;</span><br><span class="line">  Book book = repository.findById(<span class="number">1</span>).get();</span><br><span class="line">  System.out.println(book);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…ˆæµ‹è¯•ä¸€ä¸‹ï¼Œæ¥å£æ²¡æœ‰é—®é¢˜ï¼Œå†å†™å¯¹å¤–æä¾›çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/findById/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Book <span class="title">findById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> bookRepository.findById(id).get();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å¯¹æ¥"><a href="#å¯¹æ¥" class="headerlink" title="å¯¹æ¥"></a>å¯¹æ¥</h2><p>è·å–æ•°æ®å¹¶ç»‘å®šåˆ°è¡¨å•ä¸Š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">created()&#123;</span><br><span class="line">  <span class="keyword">const</span> _this = <span class="keyword">this</span></span><br><span class="line">  axios.get(<span class="string">'http://localhost:8181/book/findById/'</span>+<span class="keyword">this</span>.$route.query.id).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>)</span>&#123;</span><br><span class="line">    _this.ruleForm = resp.data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¡¨å•åŠ ä¸€ä¸ªidå±æ€§</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"ç¼–å·"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.id"</span> <span class="attr">readonly</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¸å¯ä¿®æ”¹ï¼ŒåŠ readonlyï¼Œä¸éœ€è¦æ ¡éªŒï¼Œåˆ prop=â€idâ€</p>
<p>ä¸‹é¢ruleFormä¹Ÿè¦åŠ å¯¹åº”çš„id</p>
<h1 id="ä¿®æ”¹å›¾ä¹¦"><a href="#ä¿®æ”¹å›¾ä¹¦" class="headerlink" title="ä¿®æ”¹å›¾ä¹¦"></a>ä¿®æ”¹å›¾ä¹¦</h1><p>åç«¯å†™ä¸€ä¸ªä¿®æ”¹æ–¹æ³•</p>
<p>repositoryæ²¡æœ‰updateæ–¹æ³•ï¼Œsaveå¯ä»¥ç”¨äºä¿®æ”¹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PutMapping</span>(<span class="string">"/update"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">update</span><span class="params">(@RequestBody Book book)</span></span>&#123;</span><br><span class="line">  Book result = bookRepository.save(book);</span><br><span class="line">  <span class="keyword">if</span>(result != <span class="keyword">null</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†…å®¹å’Œsaveæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¸ºäº†ç¬¦åˆRESTfulé£æ ¼ï¼Œæ–°å†™ä¸€ä¸ªPutMappingçš„</p>
<p>å‰ç«¯submitFormé‡Œé¢ç¨å¾®ä¿®æ”¹ä¸€ä¸‹ï¼Œpostæ”¹æˆputï¼Œurlæ”¹ä¸€ä¸‹ï¼Œmessageæ”¹æˆä¿®æ”¹æˆåŠŸ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">axios.put(<span class="string">'http://localhost:8181/book/update'</span>,<span class="keyword">this</span>.ruleForm).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(resp.data == <span class="string">'success'</span>)&#123;</span><br><span class="line">    _this.$message(&#123;</span><br><span class="line">      message: <span class="string">'ã€Š'</span>+_this.ruleForm.name+<span class="string">'ã€‹'</span>+<span class="string">'ä¿®æ”¹æˆåŠŸ'</span>,</span><br><span class="line">      type: <span class="string">'success'</span></span><br><span class="line">    &#125;)</span><br><span class="line">    _this.$router.push(<span class="string">'/book-manage'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="åˆ é™¤å›¾ä¹¦"><a href="#åˆ é™¤å›¾ä¹¦" class="headerlink" title="åˆ é™¤å›¾ä¹¦"></a>åˆ é™¤å›¾ä¹¦</h1><p>åç«¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping</span>(<span class="string">"/deleteById/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id)</span>&#123;</span><br><span class="line">  bookRepository.deleteById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>buttonç»‘ä¸€ä¸ªäº‹ä»¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"deleteBook(scope.row)"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">size</span>=<span class="string">"small"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¸èƒ½å«deleteï¼Œå’Œå…³é”®å­—å†²çª</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">deleteBook(row) &#123;</span><br><span class="line">  <span class="keyword">const</span> _this = <span class="keyword">this</span></span><br><span class="line">  axios.delete(<span class="string">'http://localhost:8181/book/deleteById/'</span>+row.id).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œæ²¡æœ‰ç®¡è¿”å›ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥åˆ¤æ–­çŠ¶æ€ï¼Œ200å°±æ˜¯æˆåŠŸ</span></span><br><span class="line">    _this.$alert(<span class="string">'ã€Š'</span>+row.name+<span class="string">'ã€‹åˆ é™¤æˆåŠŸï¼'</span>, <span class="string">'æ¶ˆæ¯'</span>, &#123;</span><br><span class="line">      confirmButtonText: <span class="string">'ç¡®å®š'</span>,</span><br><span class="line">      callback: <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ·æ–°</span></span><br><span class="line">        <span class="built_in">window</span>.location.reload()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>å®Œæ•´çš„å¢åˆ æ”¹æŸ¥å°±å®ç°äº†ï½</p>
<h1 id="ä¿®æ”¹èœå•"><a href="#ä¿®æ”¹èœå•" class="headerlink" title="ä¿®æ”¹èœå•"></a>ä¿®æ”¹èœå•</h1><p>ç”±äºåŠ äº†ä¸€ä¸ªè·¯ç”±ï¼Œè€Œèœå•æ˜¯æ ¹æ®è·¯ç”±åŠ¨æ€åŠ è½½çš„ï¼Œä¼šæŠŠé…ç½®çš„è·¯ç”±å…¨éƒ¨éå†å‡ºæ¥ï¼Œäºæ˜¯èœå•å·¦ä¾§å°±å¤šäº†ä¸€ä¸ª</p>
<p>å¯ä»¥æ·»åŠ ä¸€ä¸ªå±æ€§æ¥åˆ¤æ–­ï¼Œshowæ˜¯trueå°±éå†ï¼Œfalseå°±ä¸éå†</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    name: <span class="string">'å›¾ä¹¦ç®¡ç†'</span>,</span><br><span class="line">    show: <span class="literal">true</span>,</span><br><span class="line">    component:Index,</span><br><span class="line">    redirect:<span class="string">'book-manage'</span>,</span><br><span class="line">    children:[</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/book-manage'</span>,</span><br><span class="line">        name: <span class="string">'æŸ¥è¯¢å›¾ä¹¦'</span>,</span><br><span class="line">        component: BookManage</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/add-book'</span>,</span><br><span class="line">        name: <span class="string">'æ·»åŠ å›¾ä¹¦'</span>,</span><br><span class="line">        component: AddBook</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/book-update'</span>,</span><br><span class="line">    name: <span class="string">'ä¿®æ”¹'</span>,</span><br><span class="line">    show: <span class="literal">false</span>,</span><br><span class="line">    component: BookUpdate</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>App.vueä¸­é€šè¿‡v-if=â€item.showâ€åˆ¤æ–­</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-container</span> <span class="attr">style</span>=<span class="string">"height: 500px; border: 1px solid #eee"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">width</span>=<span class="string">"200px"</span> <span class="attr">style</span>=<span class="string">"background-color: rgb(238, 241, 246)"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--            è¿™é‡Œæ·»åŠ routeræ ‡ç­¾ï¼Œel-menu-itemçš„indexå°±ä¼šè¢«ä½œä¸ºrouterè·¯å¾„--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-menu</span> <span class="attr">router</span> <span class="attr">:default-openeds</span>=<span class="string">"['0','1']"</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--          showå±æ€§ä¸ºtrueåˆ™éå†--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in $router.options.routes"</span> <span class="attr">:index</span>=<span class="string">"index+''"</span> <span class="attr">v-if</span>=<span class="string">"item.show"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-setting"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--                    æ¡ä»¶åˆ¤æ–­å½“å‰è·¯å¾„æ˜¯å¦ç­‰äºindexï¼Œæ›´æ”¹é€‰ä¸­çŠ¶æ€ï¼Œä¸»è¦æ˜¯åœ¨åˆå§‹åŒ–æ—¶å¢åŠ é»˜è®¤çš„é€‰ä¸­çŠ¶æ€--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">v-for</span>=<span class="string">"item2 in item.children"</span> <span class="attr">:index</span>=<span class="string">"item2.path"</span> <span class="attr">:class</span>=<span class="string">"$route.path==item2.path ? 'is-active' : ''"</span>&gt;</span>&#123;&#123;item2.name&#125;&#125;<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-main</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--            ä¸Šé¢åˆindexç¡®å®šçš„routerè¢«æ˜¾ç¤ºåœ¨è¿™é‡Œï¼Œä¹Ÿå°±æ˜¯mainåŒºåŸŸä¸­--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å®Œå·¥ï¼</p>
<img src="/images/2020/screencapture2020-03-17PM5.05.48.jpg">]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueç¬”è®°05 è¡¨å•</title>
    <url>/2020/03/16/note-vue-05/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av85793766?p=5" target="_blank" rel="noopener">https://www.bilibili.com/video/av85793766?p=5</a></p>
</blockquote>
<h1 id="æ–°å¢ä¹¦ç±é¡µé¢"><a href="#æ–°å¢ä¹¦ç±é¡µé¢" class="headerlink" title="æ–°å¢ä¹¦ç±é¡µé¢"></a>æ–°å¢ä¹¦ç±é¡µé¢</h1><p>ç»§ç»­å®ç°å¯¹å›¾ä¹¦å®Œæ•´çš„å¢åˆ æ”¹æŸ¥</p>
<p>å®˜ç½‘æ‰¾ä¸€ä¸ªformè¡¨å•</p>
<p>æ•°æ®æ˜¯åŒå‘ç»‘å®šçš„ï¼Œ:modelå’Œv-modelç”¨æ¥ç»‘å®šå¯¹è±¡</p>
<p>å¯ä»¥æ·»åŠ æ ¡éªŒè§„åˆ™ï¼Œé€šè¿‡rulesç»‘å®šã€‚æ ¡éªŒè§„åˆ™ä¸­ï¼Œè§¦å‘äº‹ä»¶bluræŒ‡å¤±å»ç„¦ç‚¹æ—¶è§¦å‘æ ¡éªŒ</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">"ruleForm"</span> <span class="attr">:rules</span>=<span class="string">"rules"</span> <span class="attr">ref</span>=<span class="string">"ruleForm"</span> <span class="attr">label-width</span>=<span class="string">"100px"</span> <span class="attr">class</span>=<span class="string">"demo-ruleForm"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"ä¹¦å"</span> <span class="attr">prop</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.name"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"ä½œè€…"</span> <span class="attr">prop</span>=<span class="string">"author"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.author"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"submitForm('ruleForm')"</span>&gt;</span>ç«‹å³åˆ›å»º<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"resetForm('ruleForm')"</span>&gt;</span>é‡ç½®<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ruleForm: &#123;</span><br><span class="line">                    name: <span class="string">''</span>,</span><br><span class="line">                    author: <span class="string">''</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                rules: &#123;</span><br><span class="line">                    name: [</span><br><span class="line">                        &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'è¯·è¾“å…¥ä¹¦å'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> &#125;,</span><br><span class="line">                    ],</span><br><span class="line">                    author: [</span><br><span class="line">                        &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'è¯·è¾“å…¥ä½œè€…'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> &#125;,</span><br><span class="line">                    ],</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            submitForm(formName) &#123;</span><br><span class="line">                <span class="keyword">this</span>.$refs[formName].validate(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">                        alert(<span class="string">'submit!'</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">'error submit!!'</span>);</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            resetForm(formName) &#123;</span><br><span class="line">                <span class="keyword">this</span>.$refs[formName].resetFields();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h1><p>Bookçš„idè¦åŠ è‡ªå¢æ³¨è§£ï¼Œå¦åˆ™ä¼šå‡ºé—®é¢˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)  <span class="comment">// idè‡ªå¢</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>controllerä¸­åŠ </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/save"</span>)</span><br><span class="line"><span class="comment">// @RequestBodyæŠŠjsonæ ¼å¼è½¬æˆjavaå¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">(@RequestBody Book book)</span></span>&#123;</span><br><span class="line">  Book result = bookRepository.save(book);</span><br><span class="line">  <span class="keyword">if</span>(result != <span class="keyword">null</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"sucess"</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å¯¹æ¥"><a href="#å¯¹æ¥" class="headerlink" title="å¯¹æ¥"></a>å¯¹æ¥</h1><p>ä¼ Bookå¯¹è±¡ï¼Œç›´æ¥è¿½åŠ å°±è¡Œäº†ï¼Œä¸éœ€è¦æ‹¼æ¥</p>
<p>æç¤ºä¿¡æ¯å¯ä»¥å†å»å®˜ç½‘æ‰¾ä¸€ä¸ªåˆé€‚çš„æ‹¿æ¥ç”¨</p>
<p>æ·»åŠ æˆåŠŸåè·³è½¬åˆ°æŸ¥è¯¢é¡µé¢ï¼Œç”¨router.push</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">submitForm(formName) &#123;</span><br><span class="line">  <span class="keyword">const</span> _this = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">this</span>.$refs[formName].validate(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">      axios.post(<span class="string">'http://localhost:8181/book/save'</span>,<span class="keyword">this</span>.ruleForm).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(resp.data == <span class="string">'success'</span>)&#123;</span><br><span class="line">          _this.$message(&#123;</span><br><span class="line">            message: <span class="string">'ã€Š'</span>+_this.ruleForm.name+<span class="string">'ã€‹'</span>+<span class="string">'æ·»åŠ æˆåŠŸ'</span>,</span><br><span class="line">            type: <span class="string">'success'</span></span><br><span class="line">          &#125;)</span><br><span class="line">          _this.$router.push(<span class="string">'/book-manage'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>å‘ç°ä¸€ä¸ªå°é—®é¢˜</p>
<p>è¿™æ ·å¼¹å‡ºé¡¶éƒ¨æç¤ºä¹‹åç›´æ¥åˆ‡æ¢é¡µé¢ï¼Œå·¦ä¾§çš„é€‰ä¸­çŠ¶æ€æœ‰é—®é¢˜ï¼ŒåŸé¡µé¢å’Œæ–°é¡µé¢éƒ½é€‰ä¸­äº†</p>
<p>ä½†æ˜¯ç”¨éœ€è¦ç‚¹å‡»ç¡®å®šçš„æç¤ºæ¡†ä¹‹ååˆ‡å›å»ï¼Œé€‰ä¸­çŠ¶æ€å°±æ²¡æœ‰é—®é¢˜</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">_this.$alert(<span class="string">'æ·»åŠ æˆåŠŸ'</span>,<span class="string">'MSG'</span>,&#123;</span><br><span class="line">  confirmButtonTest: <span class="string">'OK'</span>,</span><br><span class="line">  callback: <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">      type: <span class="string">'info'</span>,</span><br><span class="line">      message: <span class="string">`action: <span class="subst">$&#123;action&#125;</span>`</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">_this.$router.push(<span class="string">'/book-manage'</span>)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueç¬”è®°04 åˆ†é¡µ</title>
    <url>/2020/03/16/note-vue-04/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av85793766?p=4" target="_blank" rel="noopener">https://www.bilibili.com/video/av85793766?p=4</a></p>
</blockquote>
<h1 id="è¡¨æ ¼ä¸åˆ†é¡µ"><a href="#è¡¨æ ¼ä¸åˆ†é¡µ" class="headerlink" title="è¡¨æ ¼ä¸åˆ†é¡µ"></a>è¡¨æ ¼ä¸åˆ†é¡µ</h1><p>åœ¨ä¸Šä¸€æ¬¡çš„åŸºç¡€ä¸Šæ·»åŠ è¡¨æ ¼å’Œåˆ†é¡µï¼Œåœ¨å®˜ç½‘æ‹·è¿‡æ¥ï¼Œæ”¾åœ¨Page1</p>
<p>æ³¨æ„ä¸èƒ½ç›´æ¥å¹¶åˆ—æ”¾åœ¨templateä¸‹ï¼Œç”±äºåªèƒ½æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå¤–é¢è¦å¥—ä¸€ä¸ªdiv</p>
<h2 id="è¡¨æ ¼æ•°æ®åŠ è½½"><a href="#è¡¨æ ¼æ•°æ®åŠ è½½" class="headerlink" title="è¡¨æ ¼æ•°æ®åŠ è½½"></a>è¡¨æ ¼æ•°æ®åŠ è½½</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">    <span class="attr">fixed</span></span></span><br><span class="line"><span class="tag">    <span class="attr">prop</span>=<span class="string">"id"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">label</span>=<span class="string">"ç¼–å·"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">"150"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">tableData: [&#123;</span><br><span class="line">     id: <span class="string">'01'</span>,</span><br><span class="line">     name: <span class="string">'ä¹¦ç±1'</span>,</span><br><span class="line">     author: <span class="string">'ä½œè€…1'</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®propçš„å€¼å’Œæ•°æ®å¯¹åº”</p>
<h2 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="headerlink" title="åˆ†é¡µ"></a>åˆ†é¡µ</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">     <span class="attr">background</span></span></span><br><span class="line"><span class="tag">     <span class="attr">layout</span>=<span class="string">"prev, pager, next"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">:total</span>=<span class="string">"1000"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>totalæ˜¯æ€»è®°å½•æ•°ï¼Œé»˜è®¤æ¯é¡µ10æ¡ï¼Œæ­¤æ—¶å°±æœ‰1000/10=100é¡µ</p>
<h2 id="ç»‘å®šç‚¹å‡»äº‹ä»¶"><a href="#ç»‘å®šç‚¹å‡»äº‹ä»¶" class="headerlink" title="ç»‘å®šç‚¹å‡»äº‹ä»¶"></a>ç»‘å®šç‚¹å‡»äº‹ä»¶</h2><p>ç”¨@current-change=â€pageâ€</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">               <span class="attr">background</span></span></span><br><span class="line"><span class="tag">               <span class="attr">layout</span>=<span class="string">"prev, pager, next"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">:total</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">               @<span class="attr">current-change</span>=<span class="string">"clickPage"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Scriptä¸­åŠ </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">        methods: &#123;</span><br><span class="line">            clickPage()&#123;</span><br><span class="line">                alert(<span class="number">1</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å³å¯çœ‹åˆ°æ•ˆæœ</p>
<h2 id="ç‚¹å‡»ç¿»é¡µ"><a href="#ç‚¹å‡»ç¿»é¡µ" class="headerlink" title="ç‚¹å‡»ç¿»é¡µ"></a>ç‚¹å‡»ç¿»é¡µ</h2><p>æŠŠä¼ è¿‡æ¥çš„å¯¹è±¡æ‰“å°çœ‹çœ‹ï¼Œå‘ç°å°±æ˜¯é¡µé¢çš„index</p>
<p>ç»‘æµ‹è¯•çš„æ•°æ®è¯•è¯•ï¼Œåé¢åœ¨è¿åå°</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">clickPage(index)&#123;</span><br><span class="line">  <span class="keyword">switch</span>(index)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">      <span class="keyword">this</span>.tableData = [&#123;</span><br><span class="line">        id: <span class="string">'01'</span>,</span><br><span class="line">        name: <span class="string">'ä¹¦ç±1'</span>,</span><br><span class="line">        author: <span class="string">'ä½œè€…1'</span>,</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        id: <span class="string">'02'</span>,</span><br><span class="line">        name: <span class="string">'ä¹¦ç±2'</span>,</span><br><span class="line">        author: <span class="string">'ä½œè€…2'</span>,</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        id: <span class="string">'03'</span>,</span><br><span class="line">        name: <span class="string">'ä¹¦ç±3'</span>,</span><br><span class="line">        author: <span class="string">'ä½œè€…3'</span>,</span><br><span class="line">      &#125;]</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">      <span class="keyword">this</span>.tableData = [&#123;</span><br><span class="line">        id: <span class="string">'04'</span>,</span><br><span class="line">        name: <span class="string">'ä¹¦ç±4'</span>,</span><br><span class="line">        author: <span class="string">'ä½œè€…4'</span>,</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        id: <span class="string">'05'</span>,</span><br><span class="line">        name: <span class="string">'ä¹¦ç±5'</span>,</span><br><span class="line">        author: <span class="string">'ä½œè€…5'</span>,</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        id: <span class="string">'06'</span>,</span><br><span class="line">        name: <span class="string">'ä¹¦ç±6'</span>,</span><br><span class="line">        author: <span class="string">'ä½œè€…6'</span>,</span><br><span class="line">      &#125;]</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥æ­£å¸¸åˆ‡æ¢</p>
<h1 id="åç«¯æ·»åŠ åˆ†é¡µæ“ä½œ"><a href="#åç«¯æ·»åŠ åˆ†é¡µæ“ä½œ" class="headerlink" title="åç«¯æ·»åŠ åˆ†é¡µæ“ä½œ"></a>åç«¯æ·»åŠ åˆ†é¡µæ“ä½œ</h1><p>Spring Bootçš„RepositoryæŠŠåˆ†é¡µä¹Ÿè§£å†³äº†</p>
<p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookstoreServerApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    BookRepository repository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        PageRequest pageRequest = PageRequest.of(<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line">        Page&lt;Book&gt; page = repository.findAll(pageRequest);</span><br><span class="line">        System.out.println(page);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-03-16AM11.08.48.jpg">

<p>éœ€è¦çš„ä¸œè¥¿éƒ½å–å‡ºæ¥äº†</p>
<p>ç›´æ¥è°ƒæ–¹æ³•å®ç°æ¥å£å°±å¯ä»¥äº†</p>
<p>åœ¨controllerä¸­ï¼Œæ¥æ”¶å‚æ•°ï¼Œè°ƒfindAllï¼Œè¿”å›Page</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/findAll/&#123;page&#125;/&#123;size&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Page&lt;Book&gt; <span class="title">findAll</span><span class="params">(@PathVariable(<span class="string">"page"</span>)</span> Integer page,@<span class="title">PathVariable</span><span class="params">(<span class="string">"size"</span>)</span> Integer size)</span>&#123;</span><br><span class="line">        PageRequest pageRequest = PageRequest.of(page,size);</span><br><span class="line">        <span class="keyword">return</span> bookRepository.findAll(pageRequest);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-03-16AM11.15.19.jpg">

<h1 id="å¯¹æ¥"><a href="#å¯¹æ¥" class="headerlink" title="å¯¹æ¥"></a>å¯¹æ¥</h1><p>è£…æ’ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vue add axios</span><br></pre></td></tr></table></figure>

<p>axio.get().then()</p>
<p>geté‡Œæ˜¯è¯·æ±‚ï¼Œthené‡Œæ˜¯å›è°ƒå‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">created()&#123;</span><br><span class="line">	axios.get(<span class="string">'http://localhost:8181/book/findAll/0/6'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(resp)</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-03-16AM11.22.45.jpg">

<p>çœ‹åˆ°æ•°æ®å¾—åˆ°äº†</p>
<p>Pageä¸­data.contentéƒ¨åˆ†å°±æ˜¯ä¹¦ç±æ•°æ®ï¼Œèµ‹å€¼å³å¯</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    pageSize:<span class="string">'6'</span>,</span><br><span class="line">    total:<span class="string">''</span>,</span><br><span class="line">    tableData:<span class="string">''</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">created()&#123;</span><br><span class="line">  <span class="keyword">const</span> _this = <span class="keyword">this</span></span><br><span class="line">  axios.get(<span class="string">'http://localhost:8181/book/findAll/0/6'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>)</span>&#123;</span><br><span class="line">    _this.tableData = resp.data.content</span><br><span class="line">    _this.pageSize = resp.data.size</span><br><span class="line">    _this.total = resp.data.totalElements</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">               <span class="attr">background</span></span></span><br><span class="line"><span class="tag">               <span class="attr">layout</span>=<span class="string">"prev, pager, next"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">:page-size</span>=<span class="string">"pageSize"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">:total</span>=<span class="string">"total"</span></span></span><br><span class="line"><span class="tag">               @<span class="attr">current-change</span>=<span class="string">"clickPage"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¹¶ä¸”ä¿®æ”¹ç‚¹å‡»äº‹ä»¶ç»‘å®šçš„å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">clickPage(index)&#123;</span><br><span class="line">  <span class="keyword">const</span> _this = <span class="keyword">this</span></span><br><span class="line">  axios.get(<span class="string">'http://localhost:8181/book/findAll/'</span>+(index<span class="number">-1</span>)+<span class="string">'/6'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>)</span>&#123;</span><br><span class="line">    _this.tableData = resp.data.content</span><br><span class="line">    _this.pageSize = resp.data.size</span><br><span class="line">    _this.total = resp.data.totalElements</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>å°±å¯ä»¥ç‚¹å‡»ç¿»é¡µäº†</p>
<img src="/images/2020/screencapture2020-03-16AM11.35.54.jpg">

<img src="/images/2020/screencapture2020-03-16AM11.35.57.jpg">

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>å„ç§å„æ ·çš„åŠ¨æ€è§„åˆ’å°ç»“</title>
    <url>/2020/03/14/dynamic-programming/</url>
    <content><![CDATA[<h1 id="å¡«å……dpæ•°ç»„çš„æ–¹å¼"><a href="#å¡«å……dpæ•°ç»„çš„æ–¹å¼" class="headerlink" title="å¡«å……dpæ•°ç»„çš„æ–¹å¼"></a>å¡«å……dpæ•°ç»„çš„æ–¹å¼</h1><p>ç›®å‰ç¢°åˆ°çš„é¢˜ç›®ä¸­ï¼Œä¸€èˆ¬å¡«å……dpè¦ä¹ˆæ˜¯æŒ‰ç…§é¡ºåºä¸€ä¸ªä¸€ä¸ªå¡«ï¼Œè¦ä¹ˆæ˜¯å…ˆå…¨åˆå§‹åŒ–ä¸º-1ï¼Œç¼ºå“ªä¸ªè¡¥å“ªä¸ª</p>
<p>ä»¥<a href="#point">æœ€é•¿ä¸Šå‡å­åºåˆ—</a>ä¸ºä¾‹</p>
<h2 id="æŒ‰é¡ºåºæ‰«æ"><a href="#æŒ‰é¡ºåºæ‰«æ" class="headerlink" title="æŒ‰é¡ºåºæ‰«æ"></a>æŒ‰é¡ºåºæ‰«æ</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLIS</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.length==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            dp[i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;i;k++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(nums[i]&gt;nums[k])&#123;</span><br><span class="line">                        dp[i] = Math.max(dp[i],dp[k]+<span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            max = Math.max(max,dp[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æŒ‰éœ€è¦è®¡ç®—"><a href="#æŒ‰éœ€è¦è®¡ç®—" class="headerlink" title="æŒ‰éœ€è¦è®¡ç®—"></a>æŒ‰éœ€è¦è®¡ç®—</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer[] dp;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] nums;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLIS</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.length==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.nums = nums;</span><br><span class="line">        dp = <span class="keyword">new</span> Integer[nums.length];</span><br><span class="line">        Arrays.fill(dp,-<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            max = Math.max(max,getDp(i));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDp</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(dp[i]==-<span class="number">1</span>)&#123;</span><br><span class="line">            dp[i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;i;k++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(nums[i]&gt;nums[k])&#123;</span><br><span class="line">                        dp[i] = Math.max(dp[i],getDp(k)+<span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸€äº›æƒ³æ³•"><a href="#ä¸€äº›æƒ³æ³•" class="headerlink" title="ä¸€äº›æƒ³æ³•"></a>ä¸€äº›æƒ³æ³•</h3><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±äºdpçš„æ¯ä¸ªå…ƒç´ éƒ½éœ€è¦å¡«å……ï¼ˆç„¶åæ‰¾æœ€å¤§å€¼ï¼‰ï¼Œè€Œä¸”å¯ä»¥æ–¹ä¾¿çš„æŒ‰ç…§é¡ºåºéå†ï¼Œæ‰€ä»¥æ–¹æ³•ä¸€æ˜¾å¾—ç®€å•ä¸€äº›</p>
<p>ä½†æ˜¯æœ‰çš„é¢˜ç›®ä¸­é¡ºåºä¸æ˜¯å¾ˆå¥½æ‰¾ï¼Œæ¯”å¦‚æœ‰çš„äºŒç»´dpæ•°ç»„ä¸­ï¼Œè¦å¡«å……çš„æ˜¯ä¸‰è§’å½¢åŒºåŸŸï¼Œæœ‰çš„æ˜¯ä»å·¦å¾€å³æ‰«ï¼Œæœ‰çš„æ˜¯ä»ä¸Šå¾€ä¸‹æ‰«ï¼Œå…¶å®ƒä¸€äº›å¥‡æ€ªçš„dpå‡ ä¹æ‰¾ä¸åˆ°é¡ºåº</p>
<p>è€Œä¸”å¾ˆå¤šé¢˜ç›®ä¸­å¹¶ä¸éœ€è¦æŠŠæ•´ä¸ªdpéƒ½å¡«æ»¡ï¼Œåªéœ€è¦å¾—åˆ°ç‰¹å®šä¸€ä¸ªå…ƒç´ å³ä¸ºç­”æ¡ˆï¼Œå…¶å®æ²¡å¿…è¦æŒ‰é¡ºåºæŠŠæ‰€æœ‰çš„å…ƒç´ éƒ½ç®—å‡ºæ¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// getDpçœŸæ˜¯éå¸¸å¥—è·¯</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDp</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(dp[i]==-<span class="number">1</span>)&#123;</span><br><span class="line">    <span class="comment">// æ²¡ç®—è¿‡å°±ç®—</span></span><br><span class="line">    <span class="comment">// ç®—çš„è¿‡ç¨‹ä¸­ç»§ç»­getDp(k)</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ç®—è¿‡äº†ç›´æ¥è¿”å›</span></span><br><span class="line">  <span class="keyword">return</span> dp[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥æ„Ÿè§‰ï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°é¡ºåºã€æˆ–è€…å¿…é¡»å¡«æ»¡çš„å¯ä»¥ç”¨æ–¹æ³•ä¸€ï¼Œå…¶å®ƒçš„ç›´æ¥getDp()çœè„‘ç»†èƒ</p>
<h1 id="ä¸€ç»´"><a href="#ä¸€ç»´" class="headerlink" title="ä¸€ç»´ "></a>ä¸€ç»´ <h1 id="point"></h1></h1><h2 id="ä¾‹1-æœ€é•¿ä¸Šå‡å­åºåˆ—-LeetCode-300"><a href="#ä¾‹1-æœ€é•¿ä¸Šå‡å­åºåˆ—-LeetCode-300" class="headerlink" title="ä¾‹1 æœ€é•¿ä¸Šå‡å­åºåˆ— (LeetCode 300)"></a>ä¾‹1 æœ€é•¿ä¸Šå‡å­åºåˆ— (LeetCode 300)</h2><a href="https://leetcode-cn.com/problems/longest-increasing-subsequence/" title="" target="">link</a>

<h3 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h3><p>ç»™å®šä¸€ä¸ªæ— åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦</p>
<h3 id="çŠ¶æ€è¡¨ç¤º"><a href="#çŠ¶æ€è¡¨ç¤º" class="headerlink" title="çŠ¶æ€è¡¨ç¤º"></a>çŠ¶æ€è¡¨ç¤º</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[i] è¡¨ç¤ºç¬¬iä¸ªå…ƒç´ ï¼ˆåŒ…å«iï¼‰ä¹‹å‰æœ€å¤§ä¸Šå‡å­åºåˆ—çš„é•¿åº¦</span><br></pre></td></tr></table></figure>

<h3 id="çŠ¶æ€è½¬ç§»æ–¹ç¨‹"><a href="#çŠ¶æ€è½¬ç§»æ–¹ç¨‹" class="headerlink" title="çŠ¶æ€è½¬ç§»æ–¹ç¨‹"></a>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[i] &#x3D; max&#123; dp[k] + 1&#125;</span><br><span class="line">å…¶ä¸­ 0&lt;&#x3D;k&lt;i ä¸” nums[i]&gt;nums[k]</span><br></pre></td></tr></table></figure>

<h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>è§ï¼š<a href="#å¡«å……dpæ•°ç»„çš„æ–¹å¼">å¡«å……dpæ•°ç»„çš„æ–¹å¼</a></p>
<h1 id="äºŒç»´"><a href="#äºŒç»´" class="headerlink" title="äºŒç»´"></a>äºŒç»´</h1><h2 id="ä¾‹1-æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜ï¼ˆç®—æ³•è®¾è®¡æŠ€å·§ä¸åˆ†æ-æ²™ç‰¹ç‰ˆ-p130ï¼‰"><a href="#ä¾‹1-æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜ï¼ˆç®—æ³•è®¾è®¡æŠ€å·§ä¸åˆ†æ-æ²™ç‰¹ç‰ˆ-p130ï¼‰" class="headerlink" title="ä¾‹1 æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜ï¼ˆç®—æ³•è®¾è®¡æŠ€å·§ä¸åˆ†æ æ²™ç‰¹ç‰ˆ p130ï¼‰"></a>ä¾‹1 æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜ï¼ˆç®—æ³•è®¾è®¡æŠ€å·§ä¸åˆ†æ æ²™ç‰¹ç‰ˆ p130ï¼‰</h2><h3 id="æè¿°-1"><a href="#æè¿°-1" class="headerlink" title="æè¿°"></a>æè¿°</h3><p>æ‰¾ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦</p>
<p>å¦‚A=zxyxyz B=xyyzx åˆ™æœ€é•¿å…¬å…±å­åºåˆ—ä¸ºxyyz</p>
<h3 id="çŠ¶æ€è¡¨ç¤º-1"><a href="#çŠ¶æ€è¡¨ç¤º-1" class="headerlink" title="çŠ¶æ€è¡¨ç¤º"></a>çŠ¶æ€è¡¨ç¤º</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ä»¤ A &#x3D; a1a2â€¦anï¼ŒB &#x3D; b1b2â€¦bn</span><br><span class="line">L[i , j] è¡¨ç¤º a1a2â€¦ai å’Œ b1b2â€¦bj çš„æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦</span><br></pre></td></tr></table></figure>

<h3 id="çŠ¶æ€è½¬ç§»æ–¹ç¨‹-1"><a href="#çŠ¶æ€è½¬ç§»æ–¹ç¨‹-1" class="headerlink" title="çŠ¶æ€è½¬ç§»æ–¹ç¨‹"></a>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å½“ A[i] &#x3D;&#x3D; B[i]ï¼ŒL[i , j] &#x3D; L[i-1 , j-1] + 1</span><br><span class="line">å½“ A[i] !&#x3D; B[i]ï¼ŒL[i , j] &#x3D; max&#123; L[i-1 , j] , L[i , j-1] &#125;</span><br></pre></td></tr></table></figure>

<p>eg:<br>A = horseï¼ŒB = ros<br>iä¸º2ï¼Œjä¸º2æ—¶ï¼Œo == oï¼ŒL[ ho , ro ] = L[ h , r ] + 1<br>iä¸º3ï¼Œjä¸º3æ—¶ï¼Œr != sï¼ŒL[ hor , ros ] = max{ L[ ho , ros ] , L[ hor , ro ] }</p>
<h3 id="å®ç°-1"><a href="#å®ç°-1" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">LCS</span><span class="params">(String word1, String word2)</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">  <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[word1.length()+<span class="number">1</span>][word2.length()+<span class="number">1</span>];</span><br><span class="line">    </span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;word1.length()+<span class="number">1</span>;i++) &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;word2.length()+<span class="number">1</span>;j++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(word1.charAt(i-<span class="number">1</span>)==word2.charAt(j-<span class="number">1</span>)) &#123;</span><br><span class="line">				dp[i][j] = dp[i-<span class="number">1</span>][j-<span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				dp[i][j] = Math.max(dp[i-<span class="number">1</span>][j], dp[i][j-<span class="number">1</span>]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">  </span><br><span class="line">	<span class="keyword">return</span> dp[word1.length()][word2.length()];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¾‹2-ç¼–è¾‘è·ç¦»-LeetCode-72"><a href="#ä¾‹2-ç¼–è¾‘è·ç¦»-LeetCode-72" class="headerlink" title="ä¾‹2 ç¼–è¾‘è·ç¦» (LeetCode 72)"></a>ä¾‹2 ç¼–è¾‘è·ç¦» (LeetCode 72)</h2><a href="https://leetcode-cn.com/problems/edit-distance/" title="" target="">link</a>

<h3 id="æè¿°-2"><a href="#æè¿°-2" class="headerlink" title="æè¿°"></a>æè¿°</h3><p>ç»™å®šä¸¤ä¸ªå•è¯ word1 å’Œ word2ï¼Œè®¡ç®—å°† word1 è½¬æ¢æˆ word2 æ‰€ä½¿ç”¨çš„æœ€å°‘æ“ä½œæ•°</p>
<p>æ“ä½œåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ’å…¥ä¸€ä¸ªå­—ç¬¦</li>
<li>åˆ é™¤ä¸€ä¸ªå­—ç¬¦</li>
<li>æ›¿æ¢ä¸€ä¸ªå­—ç¬¦</li>
</ul>
<h3 id="çŠ¶æ€è¡¨ç¤º-2"><a href="#çŠ¶æ€è¡¨ç¤º-2" class="headerlink" title="çŠ¶æ€è¡¨ç¤º"></a>çŠ¶æ€è¡¨ç¤º</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ä»¤ A &#x3D; a1a2â€¦anï¼ŒB &#x3D; b1b2â€¦bn</span><br><span class="line">L[i , j] è¡¨ç¤º a1a2â€¦ai å’Œ b1b2â€¦bj çš„æœ€çŸ­ç¼–è¾‘è·ç¦»</span><br></pre></td></tr></table></figure>

<p>å’Œå…¬å…±å­åºåˆ—ä¸€æ ·</p>
<h3 id="çŠ¶æ€è½¬ç§»æ–¹ç¨‹-2"><a href="#çŠ¶æ€è½¬ç§»æ–¹ç¨‹-2" class="headerlink" title="çŠ¶æ€è½¬ç§»æ–¹ç¨‹"></a>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å½“ A[i] &#x3D;&#x3D; B[i]ï¼ŒL[i , j] &#x3D; L[i-1 , j-1]</span><br><span class="line">å½“ A[i] !&#x3D; B[i]ï¼ŒL[i , j] &#x3D; min&#123; L[i-1 , j-1] , L[i-1 , j] , L[i , j-1] &#125; + 1</span><br><span class="line">å…¶ä¸­ï¼ŒL[i-1 , j-1]ä»£è¡¨æ›¿æ¢æ“ä½œï¼ŒL[i-1 , j]ä»£è¡¨åˆ é™¤æ“ä½œï¼ŒL[i , j-1]ä»£è¡¨æ’å…¥æ“ä½œ</span><br></pre></td></tr></table></figure>

<p>eg:<br>A = horseï¼ŒB = ros<br>iä¸º2ï¼Œjä¸º2æ—¶ï¼Œo == oï¼ŒL[ ho , ro ] = L[ h , r ]ï¼Œæ— éœ€ç»§ç»­ç¼–è¾‘<br>iä¸º3ï¼Œjä¸º3æ—¶ï¼Œr != sï¼ŒL[ hor , ros ] = min{ L[ ho , ro ] , L[ ho , ros ] , L[ hor , ro ] } + 1<br>L[ ho , ro ] + 1 ä»£è¡¨ï¼Œåœ¨hoå·²ç»ç¼–è¾‘æˆroä¹‹åï¼Œå°†ræ›¿æ¢æˆs<br>L[ ho , ros ] + 1 ä»£è¡¨ï¼Œåœ¨hoå·²ç»ç¼–è¾‘æˆrosä¹‹åï¼Œå°†råˆ é™¤<br>L[ hor , ro ] + 1 ä»£è¡¨ï¼Œåœ¨horå·²ç»ç¼–è¾‘æˆroä¹‹åï¼Œæ’å…¥s</p>
<h3 id="å®ç°-2"><a href="#å®ç°-2" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">minDistance</span><span class="params">(String word1, String word2)</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[word1.length()+<span class="number">1</span>][word2.length()+<span class="number">1</span>];</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;word1.length()+<span class="number">1</span>;i++) &#123;</span><br><span class="line">    	    dp[i][<span class="number">0</span>] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;word2.length()+<span class="number">1</span>;i++) &#123;</span><br><span class="line">    	    dp[<span class="number">0</span>][i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;word1.length()+<span class="number">1</span>;i++) &#123;</span><br><span class="line">	    	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;word2.length()+<span class="number">1</span>;j++) &#123;</span><br><span class="line">		    	<span class="keyword">if</span>(word1.charAt(i-<span class="number">1</span>)==word2.charAt(j-<span class="number">1</span>)) &#123;</span><br><span class="line">			    	dp[i][j] = dp[i-<span class="number">1</span>][j-<span class="number">1</span>];</span><br><span class="line">    			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">	    			<span class="keyword">int</span> min = Math.min(dp[i-<span class="number">1</span>][j], dp[i][j-<span class="number">1</span>]);</span><br><span class="line">		    		min = Math.min(min, dp[i-<span class="number">1</span>][j-<span class="number">1</span>]);</span><br><span class="line">			    	dp[i][j] = min+<span class="number">1</span>;</span><br><span class="line">			    &#125;</span><br><span class="line">    		&#125;</span><br><span class="line">	    &#125;	</span><br><span class="line">	</span><br><span class="line">	    <span class="keyword">return</span> dp[word1.length()][word2.length()];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><p>è¿™é¢˜dpç¬¬0è¡Œå’Œç¬¬0åˆ—åˆå§‹åŒ–ä¸º0,1,2,3â€¦</p>
<h2 id="ä¾‹3-å›æ–‡å­ä¸²-LeetCode-647"><a href="#ä¾‹3-å›æ–‡å­ä¸²-LeetCode-647" class="headerlink" title="ä¾‹3 å›æ–‡å­ä¸² (LeetCode 647)"></a>ä¾‹3 å›æ–‡å­ä¸² (LeetCode 647)</h2><a href="https://leetcode-cn.com/problems/palindromic-substrings/" title="" target="">link</a>

<h3 id="æè¿°-3"><a href="#æè¿°-3" class="headerlink" title="æè¿°"></a>æè¿°</h3><p>ç»Ÿè®¡ç»™å®šå­—ç¬¦ä¸²ä¸­å›æ–‡å­ä¸²çš„ä¸ªæ•°</p>
<p>å¦‚â€aaaâ€ä¸­æœ‰â€aâ€, â€œaâ€, â€œaâ€, â€œaaâ€, â€œaaâ€, â€œaaaâ€å…±6ä¸ª</p>
<h3 id="çŠ¶æ€è¡¨ç¤º-3"><a href="#çŠ¶æ€è¡¨ç¤º-3" class="headerlink" title="çŠ¶æ€è¡¨ç¤º"></a>çŠ¶æ€è¡¨ç¤º</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[i][j] è¡¨ç¤ºå­—ç¬¦ä¸²çš„ç¬¬iåˆ°jä½(å«)æ˜¯å¦ä¸ºå›æ–‡ä¸²</span><br></pre></td></tr></table></figure>

<h3 id="çŠ¶æ€è½¬ç§»æ–¹ç¨‹-3"><a href="#çŠ¶æ€è½¬ç§»æ–¹ç¨‹-3" class="headerlink" title="çŠ¶æ€è½¬ç§»æ–¹ç¨‹"></a>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</h3><p>è§æ³¨é‡Š</p>
<h3 id="å®ç°-3"><a href="#å®ç°-3" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    Integer[][] dp;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countSubstrings</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s.length()==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        dp = <span class="keyword">new</span> Integer[s.length()][s.length()];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</span><br><span class="line">            Arrays.fill(dp[i],-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;s.length();j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(getDp(i,j,s)==<span class="number">1</span>)&#123;</span><br><span class="line">                    cnt++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cnt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDp</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j,String s)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(dp[i][j]==-<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i==j)&#123;</span><br><span class="line">                <span class="comment">// "a"æ˜¯</span></span><br><span class="line">                dp[i][j] = <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s.charAt(i)!=s.charAt(j))&#123;</span><br><span class="line">                <span class="comment">// "ab"ã€"a***b"ä¸æ˜¯</span></span><br><span class="line">                dp[i][j] = <span class="number">0</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(j-i==<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="comment">// "aa"æ˜¯</span></span><br><span class="line">                    dp[i][j] = <span class="number">1</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">// "a****a"</span></span><br><span class="line">                    <span class="keyword">if</span>(getDp(i+<span class="number">1</span>,j-<span class="number">1</span>,s)==<span class="number">1</span>)&#123;</span><br><span class="line">                        <span class="comment">// ä¸­é—´æ˜¯åˆ™æ˜¯</span></span><br><span class="line">                        dp[i][j] = <span class="number">1</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        dp[i][j] = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ä¸‰ç»´"><a href="#ä¸‰ç»´" class="headerlink" title="ä¸‰ç»´"></a>ä¸‰ç»´</h1><h2 id="ä¾‹1-äºŒæŒ‡è¾“å…¥çš„çš„æœ€å°è·ç¦»-LeetCode-1320"><a href="#ä¾‹1-äºŒæŒ‡è¾“å…¥çš„çš„æœ€å°è·ç¦»-LeetCode-1320" class="headerlink" title="ä¾‹1 äºŒæŒ‡è¾“å…¥çš„çš„æœ€å°è·ç¦» (LeetCode 1320)"></a>ä¾‹1 äºŒæŒ‡è¾“å…¥çš„çš„æœ€å°è·ç¦» (LeetCode 1320)</h2><a href="https://leetcode-cn.com/problems/minimum-distance-to-type-a-word-using-two-fingers/" title="" target="">link</a>

<h3 id="æè¿°-4"><a href="#æè¿°-4" class="headerlink" title="æè¿°"></a>æè¿°</h3><img src="/images/2020/screencapture2020-03-14PM4.50.56.jpg" width=400>

<p>äºŒæŒ‡è¾“å…¥æ³•é”®ç›˜ä¸Šï¼Œæ¯ä¸ªå­—æ¯å¯ç”¨åæ ‡è¡¨ç¤ºï¼Œå¦‚P(2,3)</p>
<p>ç»™å®šä¸€ä¸ªå¾…è¾“å…¥å­—ç¬¦ä¸²ï¼Œè®¡ç®—ä»…ç”¨ä¸¤æ ¹æ‰‹æŒ‡ï¼Œè¾“å…¥è¯¥å­—ç¬¦ä¸²çš„æœ€å°ç§»åŠ¨è·ç¦»ï¼ˆèµ·å§‹ä½ç½®ä»»æ„ï¼Œä»£ä»·ä½0ï¼‰</p>
<p>è·ç¦»æŒ‰ |x1-x2| + |y1-y2| è®¡ç®—</p>
<h3 id="çŠ¶æ€è¡¨ç¤º-4"><a href="#çŠ¶æ€è¡¨ç¤º-4" class="headerlink" title="çŠ¶æ€è¡¨ç¤º"></a>çŠ¶æ€è¡¨ç¤º</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[i][l][r] è¡¨ç¤ºè¾“å…¥å®Œç¬¬iä¸ªå­—æ¯åï¼Œå·¦æ‰‹ä½ç½®ä¸ºlï¼Œå³æ‰‹ä½ç½®ä¸ºr</span><br><span class="line">lã€rå¯¹åº”å­—æ¯ç¼–å·ï¼Œå¦‚A-0,B-1</span><br></pre></td></tr></table></figure>

<h3 id="çŠ¶æ€è½¬ç§»æ–¹ç¨‹-4"><a href="#çŠ¶æ€è½¬ç§»æ–¹ç¨‹-4" class="headerlink" title="çŠ¶æ€è½¬ç§»æ–¹ç¨‹"></a>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è®°ç¬¬iä¸ªå­—æ¯ä½curï¼Œç¬¬i-1ä¸ªå­—æ¯ä¸ºpre</span><br><span class="line"></span><br><span class="line">1.å·¦æ‰‹ç§»åŠ¨åˆ°curå¤„</span><br><span class="line">	- ç§»åŠ¨å‰å·¦æ‰‹åœ¨preå¤„ï¼Œåˆ™å·¦æ‰‹å¿…ç„¶ä»preç§»åˆ°curï¼Œå³æ‰‹å¯ä»¥åœ¨ä»»æ„ä½ç½®m</span><br><span class="line">	   dp[i][cur][m] &#x3D; dp[i-1][pre][m] + dis(pre,cur);</span><br><span class="line">	- ç§»åŠ¨å‰å³æ‰‹åœ¨preå¤„(å³m&#x3D;&#x3D;pre)ï¼Œåˆ™å·¦æ‰‹å¯ä»¥ä»ä»»æ„ä½ç½®nç§»åˆ°cur</span><br><span class="line">	   dp[i][cur][m] &#x3D; dp[i-1][n][m] + dis(n,cur);</span><br><span class="line"></span><br><span class="line">æ•… dp[i][cur][m] &#x3D; min&#123; dp[i-1][pre][m] , dp[i-1][n][pre] &#125;</span><br><span class="line">å…¶ä¸­må–å€¼0~26ï¼Œnå–å€¼0~26</span><br><span class="line"></span><br><span class="line">2.å³æ‰‹ç§»åŠ¨åˆ°curå¤„</span><br><span class="line">	- ç§»åŠ¨å‰å³æ‰‹åœ¨preå¤„ï¼Œåˆ™å³æ‰‹å¿…ç„¶ä»preç§»åˆ°curï¼Œå·¦æ‰‹å¯ä»¥åœ¨ä»»æ„ä½ç½®m</span><br><span class="line">	   dp[i][m][cur] &#x3D; dp[i-1][m][pre] + dis(pre,cur);</span><br><span class="line">	- ç§»åŠ¨å‰å·¦æ‰‹åœ¨preå¤„(å³m&#x3D;&#x3D;pre)ï¼Œåˆ™å³æ‰‹å¯ä»¥ä»ä»»æ„ä½ç½®nç§»åˆ°cur</span><br><span class="line">	   dp[i][m][cur] &#x3D; dp[i-1][m][n] + dis(n,cur);</span><br><span class="line"></span><br><span class="line">åŒä¸Šï¼Œdp[i][cur][m] &#x3D; min&#123; dp[i-1][pre][m] , dp[i-1][n][pre] &#125;</span><br></pre></td></tr></table></figure>

<h3 id="å®ç°-4"><a href="#å®ç°-4" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minimumDistance</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] words = <span class="keyword">new</span> <span class="keyword">int</span>[word.length()];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;word.length();i++)&#123;</span><br><span class="line">            words[i] = word.charAt(i) - <span class="string">'A'</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[][][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[words.length][<span class="number">26</span>][<span class="number">26</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)&#123;</span><br><span class="line">            <span class="comment">// å·¦æ‰‹å¼€å§‹</span></span><br><span class="line">            dp[<span class="number">0</span>][words[<span class="number">0</span>]][i] = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">// å³æ‰‹å¼€å§‹</span></span><br><span class="line">            dp[<span class="number">0</span>][i][words[<span class="number">0</span>]] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;words.length;i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> cur = words[i];</span><br><span class="line">            <span class="keyword">int</span> pre = words[i-<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> dis = calDis(cur,pre);</span><br><span class="line">            <span class="comment">// è‡³å°‘æœ‰ä¸€åªæ‰‹åœ¨curï¼Œå¦ä¸€åªæ‰‹å¯ä»¥åœ¨ä»»æ„ä½ç½®</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> m=<span class="number">0</span>;m&lt;<span class="number">26</span>;m++)&#123;</span><br><span class="line">                <span class="comment">// å³æ‰‹ä¸åŠ¨ï¼Œå·¦æ‰‹ä»preç§»åˆ°curï¼ˆä¸Šä¸€ä¸ªå­—ç¬¦æ˜¯å·¦æ‰‹æŒ‰çš„ï¼‰</span></span><br><span class="line">                dp[i][cur][m] = dp[i-<span class="number">1</span>][pre][m] + dis;</span><br><span class="line">                <span class="comment">// å·¦æ‰‹ä¸åŠ¨ï¼Œå³æ‰‹ä»preç§»åˆ°curï¼ˆä¸Šä¸€ä¸ªå­—ç¬¦æ˜¯å³æ‰‹æŒ‰çš„ï¼‰</span></span><br><span class="line">                dp[i][m][cur] = dp[i-<span class="number">1</span>][m][pre] + dis;</span><br><span class="line">                <span class="keyword">if</span>(m==pre)&#123;</span><br><span class="line">                    <span class="comment">// ç§»åŠ¨å‰å¦ä¸€åªæ‰‹åˆšå¥½åœ¨preå¤„</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> n=<span class="number">0</span>;n&lt;<span class="number">26</span>;n++)&#123;</span><br><span class="line">                        <span class="keyword">int</span> dis2 = calDis(n,cur);</span><br><span class="line">                        <span class="comment">// å³æ‰‹ä¸åŠ¨ï¼Œå·¦æ‰‹ä»ä»»æ„ä½ç½®ç§»åˆ°curï¼ˆä¸Šä¸€ä¸ªå­—ç¬¦æ˜¯å³æ‰‹æŒ‰çš„ï¼‰</span></span><br><span class="line">                        dp[i][cur][m] = Math.min(dp[i][cur][m],dp[i-<span class="number">1</span>][n][m]+dis2);</span><br><span class="line">                        <span class="comment">// å·¦æ‰‹ä¸åŠ¨ï¼Œå³æ‰‹ä»ä»»æ„ä½ç½®ç§»åˆ°curï¼ˆä¸Šä¸€ä¸ªå­—ç¬¦æ˜¯å·¦æ‰‹æŒ‰çš„ï¼‰</span></span><br><span class="line">                        dp[i][m][cur] = Math.min(dp[i][m][cur],dp[i-<span class="number">1</span>][m][n]+dis2);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> min = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">int</span> last = words[words.length-<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> m=<span class="number">0</span>;m&lt;<span class="number">26</span>;m++)&#123;</span><br><span class="line">            min = Math.min(min,dp[words.length-<span class="number">1</span>][last][m]);</span><br><span class="line">            min = Math.min(min,dp[words.length-<span class="number">1</span>][m][last]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> min;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calDis</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x1 = a / <span class="number">6</span>, y1 = a % <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">int</span> x2 = b / <span class="number">6</span>, y2 = b % <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)(Math.abs(x1 - x2)) + (<span class="keyword">int</span>)(Math.abs(y1 - y2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¼˜åŒ–ä¸ºäºŒç»´"><a href="#ä¼˜åŒ–ä¸ºäºŒç»´" class="headerlink" title="ä¼˜åŒ–ä¸ºäºŒç»´"></a>ä¼˜åŒ–ä¸ºäºŒç»´</h3><p>ç”±äºä¸¤åªæ‰‹æ˜¯å®Œå…¨å¯¹ç§°çš„ï¼Œä¸éœ€è¦çŸ¥é“å…·ä½“å“ªåªæ‰‹åœ¨curå¤„ï¼Œåªè¦æœ‰ä¸€åªåœ¨å°±è¡Œäº†</p>
<h4 id="çŠ¶æ€è¡¨ç¤º-5"><a href="#çŠ¶æ€è¡¨ç¤º-5" class="headerlink" title="çŠ¶æ€è¡¨ç¤º"></a>çŠ¶æ€è¡¨ç¤º</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[i][rest] è¡¨ç¤ºä¸€åªæ‰‹åœ¨curï¼Œå¦ä¸€åªæ‰‹åœ¨restå¤„æ—¶çš„æœ€å°ç§»åŠ¨è·ç¦»</span><br></pre></td></tr></table></figure>

<h4 id="çŠ¶æ€è½¬ç§»æ–¹ç¨‹-5"><a href="#çŠ¶æ€è½¬ç§»æ–¹ç¨‹-5" class="headerlink" title="çŠ¶æ€è½¬ç§»æ–¹ç¨‹"></a>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ä¸€åªæ‰‹ä»preç§»åŠ¨åˆ°curï¼Œå¦ä¸€åªæ‰‹éšä¾¿åœ¨å“ª</span><br><span class="line">dp[i][anywhere] &#x3D; dp[i-1][anywhere] + dis(pre,cur)</span><br><span class="line"></span><br><span class="line">è‹¥å¦ä¸€åªæ‰‹æ°å¥½åœ¨preå¤„ï¼Œè¿™åªæ‰‹å¯ä»¥ä»ä»»ä½•åœ°æ–¹ç§»åŠ¨åˆ°cur</span><br><span class="line">dp[i][pre] &#x3D; dp[i-1][anywhere] + dis(anywhere,cur)</span><br></pre></td></tr></table></figure>

<h4 id="å®ç°-5"><a href="#å®ç°-5" class="headerlink" title="å®ç°"></a>å®ç°</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minimumDistance</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] words = <span class="keyword">new</span> <span class="keyword">int</span>[word.length()];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;word.length();i++)&#123;</span><br><span class="line">            words[i] = word.charAt(i) - <span class="string">'A'</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[words.length][<span class="number">26</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;words.length;i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> cur = words[i];</span><br><span class="line">            <span class="keyword">int</span> pre = words[i-<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> dis = calDis(cur,pre);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> m=<span class="number">0</span>;m&lt;<span class="number">26</span>;m++)&#123;</span><br><span class="line">                <span class="comment">// ä¸€åªæ‰‹ä»preç§»åŠ¨åˆ°curï¼Œå¦ä¸€åªæ‰‹éšä¾¿åœ¨å“ª</span></span><br><span class="line">                dp[i][m] = dp[i-<span class="number">1</span>][m] + dis;</span><br><span class="line">                <span class="keyword">if</span>(m==pre)&#123;</span><br><span class="line">                    <span class="comment">// å¦ä¸€åªæ‰‹æ°å¥½åœ¨preå¤„ï¼Œè¿™åªæ‰‹å¯ä»¥ä»ä»»ä½•åœ°æ–¹ç§»åŠ¨åˆ°cur</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> n=<span class="number">0</span>;n&lt;<span class="number">26</span>;n++)&#123;</span><br><span class="line">                        dp[i][m] = Math.min(dp[i][m],dp[i-<span class="number">1</span>][n]+calDis(n,cur));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> min = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> m=<span class="number">0</span>;m&lt;<span class="number">26</span>;m++)&#123;</span><br><span class="line">            min = Math.min(min,dp[words.length-<span class="number">1</span>][m]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> min;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calDis</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x1 = a / <span class="number">6</span>, y1 = a % <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">int</span> x2 = b / <span class="number">6</span>, y2 = b % <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)(Math.abs(x1 - x2)) + (<span class="keyword">int</span>)(Math.abs(y1 - y2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¼˜åŒ–å‰ æ‰§è¡Œç”¨æ—¶ï¼š<strong>19 ms</strong> å†…å­˜æ¶ˆè€—ï¼š<strong>42.6 MB</strong></p>
<p>ä¼˜åŒ–å æ‰§è¡Œç”¨æ—¶ï¼š<strong>7 ms</strong> å†…å­˜æ¶ˆè€—ï¼š<strong>38.1 MB</strong></p>
<p>ä¹Ÿä¸å¤šçš„æ ·å­â€¦ä½†æ˜¯æ€è·¯ç®€å•å¤šäº†</p>
<h1 id="çŠ¶æ€å‹ç¼©"><a href="#çŠ¶æ€å‹ç¼©" class="headerlink" title="çŠ¶æ€å‹ç¼©"></a>çŠ¶æ€å‹ç¼©</h1><p>å°†çŠ¶æ€ç”¨äºŒè¿›åˆ¶ä¸²è¡¨ç¤ºï¼ŒäºŒè¿›åˆ¶ä¸²ä»¥intå½¢å¼ä½œä¸ºä¸‹æ ‡</p>
<h2 id="ä¾‹1-å‚åŠ è€ƒè¯•çš„æœ€å¤§å­¦ç”Ÿæ•°-LeetCode-1349"><a href="#ä¾‹1-å‚åŠ è€ƒè¯•çš„æœ€å¤§å­¦ç”Ÿæ•°-LeetCode-1349" class="headerlink" title="ä¾‹1 å‚åŠ è€ƒè¯•çš„æœ€å¤§å­¦ç”Ÿæ•° (LeetCode 1349)"></a>ä¾‹1 å‚åŠ è€ƒè¯•çš„æœ€å¤§å­¦ç”Ÿæ•° (LeetCode 1349)</h2><a href="https://leetcode-cn.com/problems/maximum-students-taking-exam/" title="" target="">link</a>

<h3 id="æè¿°-5"><a href="#æè¿°-5" class="headerlink" title="æè¿°"></a>æè¿°</h3><img src="/images/2020/screencapture2020-03-13PM5.17.37.jpg">

<ul>
<li>æ•™å®¤é‡Œæœ‰çš„åº§ä½æ˜¯åçš„</li>
<li>å­¦ç”Ÿå¯ä»¥çœ‹åˆ°å·¦ã€å³ã€å·¦ä¸Šã€å³ä¸Šæ–¹å‘çš„è¯•å·</li>
</ul>
<p>è®¡ç®—è¯¥è€ƒåœºå¯ä»¥å®¹çº³çš„ä¸€èµ·å‚åŠ è€ƒè¯•ä¸”æ— æ³•ä½œå¼Šçš„æœ€å¤§å­¦ç”Ÿäººæ•°</p>
<h3 id="çŠ¶æ€å‹ç¼©-1"><a href="#çŠ¶æ€å‹ç¼©-1" class="headerlink" title="çŠ¶æ€å‹ç¼©"></a>çŠ¶æ€å‹ç¼©</h3><p>ç”¨ä¸€ä¸ªäºŒè¿›åˆ¶ä¸²è¡¨ç¤ºä¸€è¡Œä¸­æ¯ä¸ªä½ç½®æœ‰æ²¡æœ‰äººå</p>
<p>å¦‚ 0011 è¡¨ç¤º æ— æ— æœ‰æœ‰ï¼Œè®°ä¸º3</p>
<h3 id="çŠ¶æ€è¡¨ç¤º-6"><a href="#çŠ¶æ€è¡¨ç¤º-6" class="headerlink" title="çŠ¶æ€è¡¨ç¤º"></a>çŠ¶æ€è¡¨ç¤º</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[row][pre] è¡¨ç¤ºå½“row-1è¡Œçš„åæ³•ä¸ºpreæ—¶ï¼Œç¬¬rowè¡ŒåŠåé¢æ‰€æœ‰è¡Œæœ€å¤šåå¤šå°‘äºº</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ï¼Œpreåˆå§‹åŒ–çš„å¤§å°ä¸º 1 &lt;&lt; åˆ—æ•°</p>
<p>å¦‚ æœ‰6åˆ—ï¼Œæœ€å¤š 2 ^ 6 ç§åæ³•ï¼Œå³ 1 &lt;&lt; 6</p>
<h3 id="çŠ¶æ€è½¬ç§»æ–¹ç¨‹-6"><a href="#çŠ¶æ€è½¬ç§»æ–¹ç¨‹-6" class="headerlink" title="çŠ¶æ€è½¬ç§»æ–¹ç¨‹"></a>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[row][pre] &#x3D; max&#123; dp[row+1][cur] + Integer.bitCount(cur) &#125;</span><br><span class="line">å…¶ä¸­curæ˜¯rowè¡Œæ‰€æœ‰å¯è¡ŒçŠ¶æ€</span><br></pre></td></tr></table></figure>

<p>æ¯æ¬¡éœ€å…ˆåˆ¤æ–­åæ³•ä¸º cur æ˜¯å¦å¯è¡Œ</p>
<h3 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[0][0] å³ä¸º ç¬¬-1è¡Œæ²¡äººåæ—¶ï¼Œç¬¬1è¡ŒåŠåé¢æ‰€æœ‰è¡Œæœ€å¤šåçš„äººæ•°</span><br></pre></td></tr></table></figure>

<h3 id="å®ç°-6"><a href="#å®ç°-6" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">char</span>[][] seats;</span><br><span class="line">    <span class="keyword">private</span> Integer[][] dp;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxStudents</span><span class="params">(<span class="keyword">char</span>[][] seats)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.seats = seats;</span><br><span class="line">        dp = <span class="keyword">new</span> Integer[seats.length][<span class="number">1</span> &lt;&lt; seats[<span class="number">0</span>].length];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ret = getDp(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDp</span><span class="params">(<span class="keyword">int</span> row,<span class="keyword">int</span> pre)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(row == seats.length)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(dp[row][pre] == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">// éå†rowè¡Œæ‰€æœ‰åæ³•</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;dp[<span class="number">0</span>].length;i++)&#123;</span><br><span class="line">                <span class="comment">// æ£€æŸ¥æ˜¯å¦ç¬¦åˆè¦æ±‚</span></span><br><span class="line">                <span class="keyword">if</span>(isValid(row,pre,i))&#123;</span><br><span class="line">                    <span class="keyword">int</span> backNum = getDp(row+<span class="number">1</span>,i);     <span class="comment">// åæ’èƒ½åå¤šå°‘</span></span><br><span class="line">                    <span class="keyword">int</span> curNum = Integer.bitCount(i); <span class="comment">// æœ¬æ’èƒ½åå¤šå°‘</span></span><br><span class="line">                    res = Math.max(res,backNum+curNum);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            dp[row][pre] = res;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[row][pre];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// åˆ¤æ–­å½“ç¬¬row-1è¡Œåæ³•ä¸ºpreæ—¶ï¼Œrowè¡Œåæ³•ä¸ºcuræ˜¯å¦å¯è¡Œ</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> pre, <span class="keyword">int</span> cur)</span> </span>&#123; <span class="comment">//... &#125;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Exercise</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode.337 æ‰“å®¶åŠ«èˆ</title>
    <url>/2020/03/12/exercise/</url>
    <content><![CDATA[<a href="https://leetcode-cn.com/problems/house-robber-iii/" title="" target="">é¢˜ç›®åœ°å€</a>

<h1 id="æš´åŠ›æŠ¢åŠ«"><a href="#æš´åŠ›æŠ¢åŠ«" class="headerlink" title="æš´åŠ›æŠ¢åŠ«"></a>æš´åŠ›æŠ¢åŠ«</h1><p>å†™å‡ºæ¥å€’æ˜¯æŒºå¿«ï¼Œç»“æœå‘ç°æ—¶é—´çˆ†ç‚¸</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rob</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Math.max(find(root,<span class="keyword">true</span>),find(root,<span class="keyword">false</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(TreeNode root, <span class="keyword">boolean</span> isGap)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(!isGap)&#123;</span><br><span class="line">            <span class="comment">// æœ¬å±‚æŠ¢ï¼Œä¸‹å±‚ä¸èƒ½æŠ¢</span></span><br><span class="line">            ret+=root.val;</span><br><span class="line">            ret+=find(root.left,<span class="keyword">false</span>);</span><br><span class="line">            ret+=find(root.right,<span class="keyword">false</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">int</span> next1 = Math.max(find(root.left,<span class="keyword">true</span>),find(root.left,<span class="keyword">false</span>));</span><br><span class="line">            <span class="keyword">int</span> next2 = Math.max(find(root.right,<span class="keyword">true</span>),find(root.right,<span class="keyword">false</span>));</span><br><span class="line">            ret = next1 + next2;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">æ‰§è¡Œç”¨æ—¶ï¼š2817 ms</span><br><span class="line">å†…å­˜æ¶ˆè€—ï¼š39.3 MB</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å†™æ¯æ¬¡éƒ½é€’å½’æ‰¾äº†è‡³å°‘2æ¬¡ã€ç”šè‡³4æ¬¡å­èŠ‚ç‚¹</p>
<p>ç›¸å½“äºæŠŠäºŒå‰æ ‘çœä¸‹æ¥çš„logåˆç»™ç¿»å€ä¹˜å›å»äº†</p>
<h1 id="æœºæ™ºçš„åŠ«åŒª"><a href="#æœºæ™ºçš„åŠ«åŒª" class="headerlink" title="æœºæ™ºçš„åŠ«åŒª"></a>æœºæ™ºçš„åŠ«åŒª</h1><p>çœ‹äº†é¢˜è§£ä¸­ä¸€æ¬¡è¿”å›2ç§æƒ…å†µï¼Œä¿®æ”¹ä¸€ä¸‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rob</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] ans = find(root);</span><br><span class="line">        <span class="keyword">return</span> Math.max(ans[<span class="number">0</span>],ans[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] find(TreeNode root)&#123;</span><br><span class="line">        <span class="comment">// ret0-æœ¬å±‚ä¸æŠ¢ï¼›ret1-æœ¬å±‚æŠ¢</span></span><br><span class="line">        <span class="keyword">int</span>[] ret = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(root==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> ret;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span>[] left = find(root.left);</span><br><span class="line">        <span class="keyword">int</span>[] right = find(root.right);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¸‹å±‚çˆ±æŠ¢ä¸æŠ¢</span></span><br><span class="line">        ret[<span class="number">0</span>] = Math.max(left[<span class="number">0</span>],left[<span class="number">1</span>]) + Math.max(right[<span class="number">0</span>],right[<span class="number">1</span>]);</span><br><span class="line">        <span class="comment">// ä¸‹å±‚ä¸èƒ½æŠ¢</span></span><br><span class="line">        ret[<span class="number">1</span>] = root.val + left[<span class="number">0</span>] + right[<span class="number">0</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">æ‰§è¡Œç”¨æ—¶ï¼š1 ms</span><br><span class="line">å†…å­˜æ¶ˆè€—ï¼š41.6 MB</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±åªéå†äº†1æ¬¡</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é€’å½’ä¸­å¦‚æœè¦åˆ†æƒ…å†µè®¨è®ºï¼Œä¸€æ¬¡è¿”å›å¤šä¸ªç»“æœï¼Œä¸è¦å¤šæ¬¡è°ƒç”¨é€’å½’</p>
]]></content>
      <categories>
        <category>Exercise</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>Android 10 å†™æ–‡ä»¶æƒé™é—®é¢˜</title>
    <url>/2020/03/12/debug-android/</url>
    <content><![CDATA[<h1 id="bugæè¿°"><a href="#bugæè¿°" class="headerlink" title="bugæè¿°"></a>bugæè¿°</h1><p>æ¢æ‰‹æœºä¹‹åä¸€ä¸ªä»¥å‰æ²¡æ¯›ç—…çš„å†™æ–‡ä»¶æ“ä½œå†™ä¸äº†äº†<br>ä¼°æ‘¸ç€æ˜¯ç‰ˆæœ¬é—®é¢˜</p>
<h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><p>AndroidManifest.xmlä¸­ï¼Œapplicationæ ‡ç­¾ä¸­åŠ </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">android:requestLegacyExternalStorage&#x3D;&quot;true&quot;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ref:<br><a href="https://blog.csdn.net/weixin_40093242/article/details/104067573?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task" target="_blank" rel="noopener">https://blog.csdn.net/weixin_40093242/article/details/104067573?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Debug</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç¬”è®°10 AOP</title>
    <url>/2020/03/12/note-spring-10/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p56~65</p>
</blockquote>
<hr>
<h1 id="AOPæ¦‚è¿°"><a href="#AOPæ¦‚è¿°" class="headerlink" title="AOPæ¦‚è¿°"></a>AOPæ¦‚è¿°</h1><p>Aspect Oriented Programming é¢å‘åˆ‡é¢ç¼–ç¨‹</p>
<ul>
<li><p>æ‰©å±•åŠŸèƒ½ä¸é€šè¿‡ä¿®æ”¹æºä»£ç å®ç°</p>
</li>
<li><p>AOPé‡‡å–æ¨ªå‘æŠ½å–æœºåˆ¶ï¼Œå–ä»£äº†ä¼ ç»Ÿçš„çºµå‘ç»§æ‰¿ä½“ç³»é‡å¤æ€§ä»£ç </p>
</li>
<li><p>åº•å±‚ä½¿ç”¨åŠ¨æ€ä»£ç†æ–¹æ³•å®ç°</p>
<ul>
<li>æœ‰æ¥å£æ—¶ï¼Œä½¿ç”¨jdkåŠ¨æ€ä»£ç†ï¼Œåˆ›å»ºå’Œæ¥å£å®ç°å¹³çº§çš„ä»£ç†å¯¹è±¡</li>
<li>æ— æ¥å£æ—¶ï¼Œä½¿ç”¨cglibåŠ¨æ€ä»£ç†ï¼Œåˆ›å»ºç±»çš„å­ç±»çš„ä»£ç†å¯¹è±¡</li>
</ul>
</li>
</ul>
<h2 id="ä½œç”¨åŠä¼˜åŠ¿"><a href="#ä½œç”¨åŠä¼˜åŠ¿" class="headerlink" title="ä½œç”¨åŠä¼˜åŠ¿"></a>ä½œç”¨åŠä¼˜åŠ¿</h2><p>ä½œç”¨ï¼š</p>
<ul>
<li>åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œä¸ä¿®æ”¹æºç å¯¹å·²æœ‰æ–¹æ³•è¿›è¡Œå¢å¼º</li>
</ul>
<p>ä¼˜åŠ¿ï¼š</p>
<ul>
<li>å‡å°‘é‡å¤ä»£ç </li>
<li>æé«˜å¼€å‘æ•ˆç‡</li>
<li>ç»´æŠ¤æ–¹ä¾¿</li>
</ul>
<h1 id="Springä¸­çš„AOP"><a href="#Springä¸­çš„AOP" class="headerlink" title="Springä¸­çš„AOP"></a>Springä¸­çš„AOP</h1><h2 id="ç›¸å…³æœ¯è¯­"><a href="#ç›¸å…³æœ¯è¯­" class="headerlink" title="ç›¸å…³æœ¯è¯­"></a>ç›¸å…³æœ¯è¯­</h2><h3 id="Joinpoint-è¿æ¥ç‚¹"><a href="#Joinpoint-è¿æ¥ç‚¹" class="headerlink" title="Joinpoint è¿æ¥ç‚¹"></a>Joinpoint è¿æ¥ç‚¹</h3><p>ç±»ä¸­å¯ä»¥è¢«å¢å¼ºçš„æ–¹æ³•</p>
<h3 id="Pointcut-åˆ‡å…¥ç‚¹"><a href="#Pointcut-åˆ‡å…¥ç‚¹" class="headerlink" title="Pointcut åˆ‡å…¥ç‚¹"></a>Pointcut åˆ‡å…¥ç‚¹</h3><p>ç±»ä¸­å®é™…å¢å¼ºçš„æ–¹æ³•</p>
<h3 id="Advice-é€šçŸ¥-å¢å¼º"><a href="#Advice-é€šçŸ¥-å¢å¼º" class="headerlink" title="Advice é€šçŸ¥/å¢å¼º"></a>Advice é€šçŸ¥/å¢å¼º</h3><p>åˆ‡å…¥ç‚¹ä¸Šæ‰©å±•çš„åŠŸèƒ½</p>
<ul>
<li>å‰ç½®å¢å¼ºï¼šåœ¨æ–¹æ³•ä¹‹å‰æ‰§è¡Œ</li>
<li>åç½®å¢å¼ºï¼šåœ¨æ–¹æ³•æ­£å¸¸æ‰§è¡Œä¹‹åæ‰§è¡Œ</li>
<li>æœ€ç»ˆå¢å¼ºï¼šåœ¨æœ€åæ‰§è¡Œï¼Œæ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸</li>
<li>ç¯ç»•å¢å¼ºï¼šåœ¨ä¹‹å‰å’Œä¹‹åæ‰§è¡Œ</li>
<li>å¼‚å¸¸å¢å¼ºï¼šæ–¹æ³•å‡ºç°å¼‚å¸¸æ—¶æ‰§è¡Œ</li>
</ul>
<h3 id="Introduction-å¼•ä»‹"><a href="#Introduction-å¼•ä»‹" class="headerlink" title="Introduction å¼•ä»‹"></a>Introduction å¼•ä»‹</h3><p>ä¸€ç§ç‰¹æ®Šçš„å¢å¼ºï¼Œåœ¨ä¸ä¿®æ”¹ç±»ä»£ç çš„å‰æä¸‹ï¼Œå¯ä»¥åœ¨è¿è¡ŒæœŸé—´ä¸ºç±»åŠ¨æ€åœ°æ·»åŠ ä¸€äº›æ–¹æ³•æˆ–Field</p>
<h3 id="Target-ç›®æ ‡å¯¹è±¡"><a href="#Target-ç›®æ ‡å¯¹è±¡" class="headerlink" title="Target ç›®æ ‡å¯¹è±¡"></a>Target ç›®æ ‡å¯¹è±¡</h3><p>è¦å¢å¼ºçš„ç±»</p>
<h3 id="Weaving-ç»‡å…¥"><a href="#Weaving-ç»‡å…¥" class="headerlink" title="Weaving ç»‡å…¥"></a>Weaving ç»‡å…¥</h3><p>æŠŠå¢å¼ºåº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡çš„è¿‡ç¨‹</p>
<h3 id="Proxy-ä»£ç†"><a href="#Proxy-ä»£ç†" class="headerlink" title="Proxy ä»£ç†"></a>Proxy ä»£ç†</h3><p>ä¸€ä¸ªç±»è¢«AOPç»‡å…¥å¢å¼ºåï¼Œå°±äº§ç”Ÿä¸€ä¸ªç»“æœä»£ç†ç±»</p>
<h3 id="Aspect-åˆ‡é¢"><a href="#Aspect-åˆ‡é¢" class="headerlink" title="Aspect åˆ‡é¢"></a>Aspect åˆ‡é¢</h3><p>åˆ‡å…¥ç‚¹ + é€šçŸ¥/å¼•ä»‹</p>
<h1 id="SpringåŸºäºXMLçš„AOPé…ç½®"><a href="#SpringåŸºäºXMLçš„AOPé…ç½®" class="headerlink" title="SpringåŸºäºXMLçš„AOPé…ç½®"></a>SpringåŸºäºXMLçš„AOPé…ç½®</h1><h2 id="é…ç½®æ­¥éª¤"><a href="#é…ç½®æ­¥éª¤" class="headerlink" title="é…ç½®æ­¥éª¤"></a>é…ç½®æ­¥éª¤</h2><ol>
<li><p>é…ç½®å¢å¼ºBean</p>
</li>
<li><p>ä½¿ç”¨aop:configæ ‡ç­¾è¡¨æ˜å¼€å§‹AOPçš„é…ç½®</p>
</li>
<li><p>ä½¿ç”¨aop:aspectæ ‡ç­¾è¡¨æ˜é…ç½®åˆ‡é¢</p>
<p>idå±æ€§ï¼šæ˜¯ç»™åˆ‡é¢æä¾›ä¸€ä¸ªå”¯ä¸€æ ‡è¯†<br>refå±æ€§ï¼šæ˜¯æŒ‡å®šé€šçŸ¥ç±»beançš„Id</p>
</li>
<li><p>åœ¨aop:aspectæ ‡ç­¾çš„å†…éƒ¨ä½¿ç”¨å¯¹åº”æ ‡ç­¾æ¥é…ç½®é€šçŸ¥çš„ç±»å‹</p>
<p>aop:beforeï¼šè¡¨ç¤ºé…ç½®å‰ç½®é€šçŸ¥ï¼ˆå®ä¾‹ä¸­è®©printLogæ–¹æ³•åœ¨åˆ‡å…¥ç‚¹æ–¹æ³•å‰æ‰§è¡Œï¼‰<br>methodå±æ€§ï¼šç”¨äºæŒ‡å®šç±»ä¸­å“ªä¸ªæ–¹æ³•æ˜¯å‰ç½®é€šçŸ¥<br>pointcutå±æ€§ï¼šç”¨äºæŒ‡å®šåˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œè¯¥è¡¨è¾¾å¼çš„å«ä¹‰æŒ‡çš„æ˜¯å¯¹ä¸šåŠ¡å±‚ä¸­å“ªäº›æ–¹æ³•å¢å¼º</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„å†™æ³•ï¼š</span><br><span class="line">	å…³é”®å­—ï¼šexecution(è¡¨è¾¾å¼)</span><br><span class="line">	è¡¨è¾¾å¼ï¼š</span><br><span class="line">		è®¿é—®ä¿®é¥°ç¬¦  è¿”å›å€¼  åŒ…å.åŒ…å.åŒ…å...ç±»å.æ–¹æ³•å(å‚æ•°åˆ—è¡¨)</span><br><span class="line">		</span><br><span class="line">	æ ‡å‡†çš„è¡¨è¾¾å¼å†™æ³•ï¼š</span><br><span class="line">		public void com.itheima.service.impl.AccountServiceImpl.saveAccount()</span><br><span class="line">	è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥çœç•¥</span><br><span class="line">		void com.itheima.service.impl.AccountServiceImpl.saveAccount()</span><br><span class="line">	è¿”å›å€¼å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼Œè¡¨ç¤ºä»»æ„è¿”å›å€¼</span><br><span class="line">		* com.itheima.service.impl.AccountServiceImpl.saveAccount()</span><br><span class="line">	åŒ…åå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼Œè¡¨ç¤ºä»»æ„åŒ…ã€‚ä½†æ˜¯æœ‰å‡ çº§åŒ…ï¼Œå°±éœ€è¦å†™å‡ ä¸ª*.</span><br><span class="line">		* *.*.*.*.AccountServiceImpl.saveAccount())</span><br><span class="line">	åŒ…åå¯ä»¥ä½¿ç”¨..è¡¨ç¤ºå½“å‰åŒ…åŠå…¶å­åŒ…</span><br><span class="line">		* *..AccountServiceImpl.saveAccount()</span><br><span class="line">	ç±»åå’Œæ–¹æ³•åéƒ½å¯ä»¥ä½¿ç”¨*æ¥å®ç°é€šé…</span><br><span class="line">		* *..*.*()</span><br><span class="line"></span><br><span class="line">	å‚æ•°åˆ—è¡¨ï¼š</span><br><span class="line">		å¯ä»¥ç›´æ¥å†™æ•°æ®ç±»å‹ï¼š</span><br><span class="line">			åŸºæœ¬ç±»å‹ç›´æ¥å†™åç§°           int</span><br><span class="line">			å¼•ç”¨ç±»å‹å†™åŒ…å.ç±»åçš„æ–¹å¼   java.lang.String</span><br><span class="line">			å¯ä»¥ä½¿ç”¨é€šé…ç¬¦è¡¨ç¤ºä»»æ„ç±»å‹ï¼Œä½†æ˜¯å¿…é¡»æœ‰å‚æ•°</span><br><span class="line">			å¯ä»¥ä½¿ç”¨..è¡¨ç¤ºæœ‰æ— å‚æ•°å‡å¯ï¼Œæœ‰å‚æ•°å¯ä»¥æ˜¯ä»»æ„ç±»å‹</span><br><span class="line"></span><br><span class="line">	å…¨é€šé…å†™æ³•ï¼š</span><br><span class="line">		* *..*.*(..)</span><br><span class="line"></span><br><span class="line">	å®é™…å¼€å‘ä¸­åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„é€šå¸¸å†™æ³•ï¼š</span><br><span class="line">		åˆ‡åˆ°ä¸šåŠ¡å±‚å®ç°ç±»ä¸‹çš„æ‰€æœ‰æ–¹æ³•</span><br><span class="line">			* com.itheima.service.impl.*.*(..)</span><br></pre></td></tr></table></figure>

<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><h3 id="xmlé…ç½®"><a href="#xmlé…ç½®" class="headerlink" title="xmlé…ç½®"></a>xmlé…ç½®</h3><p>åœ¨Spring Framework Documentationçš„Coreä¸­æœç´¢xmlns:aopï¼Œå¯¼å…¥çº¦æŸ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®srpingçš„Ioc,æŠŠserviceå¯¹è±¡é…ç½®è¿›æ¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">     <span class="comment">&lt;!-- é…ç½®Loggerç±» --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"logger"</span> <span class="attr">class</span>=<span class="string">"com.itheima.utils.Logger"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®AOP--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é…ç½®åˆ‡é¢ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">id</span>=<span class="string">"logAdvice"</span> <span class="attr">ref</span>=<span class="string">"logger"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- é…ç½®é€šçŸ¥çš„ç±»å‹ï¼Œå¹¶ä¸”å»ºç«‹é€šçŸ¥æ–¹æ³•å’Œåˆ‡å…¥ç‚¹æ–¹æ³•çš„å…³è”--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">"printLog"</span> <span class="attr">pointcut</span>=<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¸šåŠ¡å±‚"><a href="#ä¸šåŠ¡å±‚" class="headerlink" title="ä¸šåŠ¡å±‚"></a>ä¸šåŠ¡å±‚</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·çš„ä¸šåŠ¡å±‚æ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿä¿å­˜è´¦æˆ· æ— è¿”å›å€¼æ— å‚</span></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿæ›´æ–°è´¦æˆ· æ— è¿”å›å€¼æœ‰å‚</span></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(<span class="keyword">int</span> i)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤è´¦æˆ· æœ‰è¿”å›å€¼æ— å‚</span></span><br><span class="line">   <span class="function"><span class="keyword">int</span>  <span class="title">deleteAccount</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·çš„ä¸šåŠ¡å±‚å®ç°ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ‰§è¡Œäº†ä¿å­˜"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ‰§è¡Œäº†æ›´æ–°"</span>+i);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteAccount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ‰§è¡Œäº†åˆ é™¤"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é€šçŸ¥"><a href="#é€šçŸ¥" class="headerlink" title="é€šçŸ¥"></a>é€šçŸ¥</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨äºè®°å½•æ—¥å¿—çš„å·¥å…·ç±»ï¼Œå®ƒé‡Œé¢æä¾›äº†å…¬å…±çš„ä»£ç </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨äºæ‰“å°æ—¥å¿—ï¼šè®¡åˆ’è®©å…¶åœ¨åˆ‡å…¥ç‚¹æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">printLog</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Loggerç±»ä¸­çš„pringLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†ã€‚ã€‚ã€‚"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•AOPçš„é…ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AOPTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1.è·å–å®¹å™¨</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);</span><br><span class="line">        <span class="comment">//2.è·å–å¯¹è±¡</span></span><br><span class="line">        IAccountService as = (IAccountService)ac.getBean(<span class="string">"accountService"</span>);</span><br><span class="line">        <span class="comment">//3.æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        as.saveAccount();</span><br><span class="line">        as.updateAccount(<span class="number">1</span>);</span><br><span class="line">        as.deleteAccount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-03-12AM9.48.57.jpg">

<h2 id="é…ç½®åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"><a href="#é…ç½®åˆ‡å…¥ç‚¹è¡¨è¾¾å¼" class="headerlink" title="é…ç½®åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"></a>é…ç½®åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</h2><p>idå±æ€§ç”¨äºæŒ‡å®šè¡¨è¾¾å¼çš„å”¯ä¸€æ ‡è¯†</p>
<p>expressionå±æ€§ç”¨äºæŒ‡å®šè¡¨è¾¾å¼å†…å®¹</p>
<p>è¯¥æ ‡ç­¾å†™åœ¨aop:aspectæ ‡ç­¾å†…éƒ¨åªèƒ½å½“å‰åˆ‡é¢ä½¿ç”¨</p>
<p>è¿˜å¯ä»¥å†™åœ¨aop:aspectå¤–é¢ï¼Œæ­¤æ—¶å°±å˜æˆäº†æ‰€æœ‰åˆ‡é¢å¯ç”¨</p>
<p>æ³¨æ„ï¼šå¿…é¡»æ”¾åœ¨åˆ‡é¢ä¹‹å‰ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼ˆè¿˜ä¸æé†’æ€ä¹ˆé”™çš„ï¼‰</p>
<h2 id="4ç§å¸¸ç”¨é€šçŸ¥ç±»å‹"><a href="#4ç§å¸¸ç”¨é€šçŸ¥ç±»å‹" class="headerlink" title="4ç§å¸¸ç”¨é€šçŸ¥ç±»å‹"></a>4ç§å¸¸ç”¨é€šçŸ¥ç±»å‹</h2><p>ç»§ç»­åœ¨åˆšæ‰çš„å®ä¾‹ä¸ŠåŠ å…¶å®ƒé€šçŸ¥ç±»å‹</p>
<p>ä½¿ç”¨åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ç®€åŒ–é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®AOP--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"pt1"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:pointcut</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®åˆ‡é¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">id</span>=<span class="string">"logAdvice"</span> <span class="attr">ref</span>=<span class="string">"logger"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®å‰ç½®é€šçŸ¥ï¼šåœ¨åˆ‡å…¥ç‚¹æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">"beforePrintLog"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span> &gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®åç½®é€šçŸ¥ï¼šåœ¨åˆ‡å…¥ç‚¹æ–¹æ³•æ­£å¸¸æ‰§è¡Œä¹‹åå€¼ã€‚å®ƒå’Œå¼‚å¸¸é€šçŸ¥æ°¸è¿œåªèƒ½æ‰§è¡Œä¸€ä¸ª--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">"afterReturningPrintLog"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after-returning</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®å¼‚å¸¸é€šçŸ¥ï¼šåœ¨åˆ‡å…¥ç‚¹æ–¹æ³•æ‰§è¡Œäº§ç”Ÿå¼‚å¸¸ä¹‹åæ‰§è¡Œã€‚å®ƒå’Œåç½®é€šçŸ¥æ°¸è¿œåªèƒ½æ‰§è¡Œä¸€ä¸ª--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">"afterThrowingPrintLog"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after-throwing</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®æœ€ç»ˆé€šçŸ¥ï¼šæ— è®ºåˆ‡å…¥ç‚¹æ–¹æ³•æ˜¯å¦æ­£å¸¸æ‰§è¡Œå®ƒéƒ½ä¼šåœ¨å…¶åé¢æ‰§è¡Œ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">"afterPrintLog"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åˆ‡å…¥ç‚¹æ–¹æ³•æ— å¼‚å¸¸æ—¶è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å‰ç½®é€šçŸ¥Loggerç±»ä¸­çš„beforePrintLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...</span><br><span class="line">æ‰§è¡Œäº†ä¿å­˜</span><br><span class="line">åç½®é€šçŸ¥Loggerç±»ä¸­çš„afterReturningPrintLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...</span><br><span class="line">æœ€ç»ˆé€šçŸ¥Loggerç±»ä¸­çš„afterPrintLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...</span><br></pre></td></tr></table></figure>

<p>åˆ‡å…¥ç‚¹æ–¹æ³•æœ‰å¼‚å¸¸æ—¶è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å‰ç½®é€šçŸ¥Loggerç±»ä¸­çš„beforePrintLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...</span><br><span class="line">æ‰§è¡Œäº†ä¿å­˜</span><br><span class="line">å¼‚å¸¸é€šçŸ¥Loggerç±»ä¸­çš„afterThrowingPrintLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...</span><br><span class="line">æœ€ç»ˆé€šçŸ¥Loggerç±»ä¸­çš„afterPrintLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.ArithmeticException: &#x2F; by zero</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>åç½®å’Œå¼‚å¸¸åªä¼šæ‰§è¡Œå…¶ä¸­ä¸€ä¸ª</p>
<h2 id="ç¯ç»•é€šçŸ¥"><a href="#ç¯ç»•é€šçŸ¥" class="headerlink" title="ç¯ç»•é€šçŸ¥"></a>ç¯ç»•é€šçŸ¥</h2><p>ä¸‹é¢è¿™æ ·é…ç½®ç¯ç»•é€šçŸ¥æ˜¯ä¸è¡Œçš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">aroundPringLog</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"Loggerç±»ä¸­çš„afterThrowingPrintLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†..."</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·é…ç½®åï¼Œåˆ‡å…¥ç‚¹æ–¹æ³•ä¸æ‰§è¡Œäº†ï¼Œåªæ‰§è¡Œé€šçŸ¥æ–¹æ³•</p>
<p>åˆ†æï¼šå¯¹æ¯”åŠ¨æ€ä»£ç†ä¸­ï¼Œå‘ç°å…¶ä¸­çš„ç¯ç»•é€šçŸ¥æœ‰æ˜ç¡®çš„åˆ‡å…¥ç‚¹è°ƒç”¨ï¼Œè€Œè¿™æ ·æ²¡æœ‰</p>
<p>è§£å†³ï¼šä½¿ç”¨Springçš„ProceedingJoinPointæ¥å£ã€‚è¯¥æ¥å£æœ‰ä¸€ä¸ªproceed()æ–¹æ³•ï¼Œåœ¨ç¨‹åºæ‰§è¡Œæ—¶ï¼ŒSpringä¼šæä¾›è¯¥æ¥å£çš„å®ç°ç±»ä¾›æˆ‘ä»¬ä½¿ç”¨</p>
<p>è¿™æ ·å¯ä»¥æ§åˆ¶å¢å¼ºæ–¹æ³•ä½•æ—¶æ‰§è¡Œï¼Œå‰ç½®ã€åç½®ã€å¼‚å¸¸ã€æœ€ç»ˆéƒ½å¯ä»¥å®ç°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">	 <span class="function"><span class="keyword">public</span> Object <span class="title">aroundPringLog</span><span class="params">(ProceedingJoinPoint pjp)</span></span>&#123;</span><br><span class="line">        Object rtValue = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Object[] args = pjp.getArgs();<span class="comment">// å¾—åˆ°æ–¹æ³•æ‰§è¡Œæ‰€éœ€çš„å‚æ•°</span></span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"Loggerç±»ä¸­çš„aroundPringLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...å‰ç½®"</span>);</span><br><span class="line">            rtValue = pjp.proceed(args);<span class="comment">// æ˜ç¡®è°ƒç”¨ä¸šåŠ¡å±‚æ–¹æ³•ï¼ˆåˆ‡å…¥ç‚¹æ–¹æ³•ï¼‰</span></span><br><span class="line">            System.out.println(<span class="string">"Loggerç±»ä¸­çš„aroundPringLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...åç½®"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> rtValue;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Throwable t)&#123;</span><br><span class="line">            System.out.println(<span class="string">"Loggerç±»ä¸­çš„aroundPringLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...å¼‚å¸¸"</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(t);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"Loggerç±»ä¸­çš„aroundPringLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...æœ€ç»ˆ"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®ç¯ç»•é€šçŸ¥--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">"aroundPringLog"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:around</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="SpringåŸºäºæ³¨è§£çš„AOPé…ç½®"><a href="#SpringåŸºäºæ³¨è§£çš„AOPé…ç½®" class="headerlink" title="SpringåŸºäºæ³¨è§£çš„AOPé…ç½®"></a>SpringåŸºäºæ³¨è§£çš„AOPé…ç½®</h1><h2 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><h3 id="xmlé…ç½®-1"><a href="#xmlé…ç½®-1" class="headerlink" title="xmlé…ç½®"></a>xmlé…ç½®</h3><p>çº¦æŸæ¯”åŸºäºxmlçš„å¤šäº†context</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®springåˆ›å»ºå®¹å™¨æ—¶è¦æ‰«æçš„åŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.itheima"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®springå¼€å¯æ³¨è§£AOPçš„æ”¯æŒ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Loggeré…ç½®ï¼ˆ4ç§å¸¸ç”¨ç±»å‹ï¼‰ï¼-å»ºè®®åˆ«ç”¨ï¼Œæœ‰bug"><a href="#Loggeré…ç½®ï¼ˆ4ç§å¸¸ç”¨ç±»å‹ï¼‰ï¼-å»ºè®®åˆ«ç”¨ï¼Œæœ‰bug" class="headerlink" title="Loggeré…ç½®ï¼ˆ4ç§å¸¸ç”¨ç±»å‹ï¼‰ï¼[å»ºè®®åˆ«ç”¨ï¼Œæœ‰bug]"></a>Loggeré…ç½®ï¼ˆ4ç§å¸¸ç”¨ç±»å‹ï¼‰ï¼[å»ºè®®åˆ«ç”¨ï¼Œæœ‰bug]</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"logger"</span>)</span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">// è¡¨ç¤ºå½“å‰ç±»æ˜¯ä¸€ä¸ªåˆ‡é¢ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é…ç½®åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">pt1</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ³¨æ„è¦åŠ ()</span></span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">"pt1()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">beforePrintLog</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å‰ç½®é€šçŸ¥Loggerç±»ä¸­çš„beforePrintLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterReturning</span>(<span class="string">"pt1()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">afterReturningPrintLog</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"åç½®é€šçŸ¥Loggerç±»ä¸­çš„afterReturningPrintLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterThrowing</span>(<span class="string">"pt1()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">afterThrowingPrintLog</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å¼‚å¸¸é€šçŸ¥Loggerç±»ä¸­çš„afterThrowingPrintLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span>(<span class="string">"pt1()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">afterPrintLog</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æœ€ç»ˆé€šçŸ¥Loggerç±»ä¸­çš„afterPrintLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œè¾“å‡ºï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">å‰ç½®é€šçŸ¥Loggerç±»ä¸­çš„beforePrintLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...</span><br><span class="line">æ‰§è¡Œäº†ä¿å­˜</span><br><span class="line">æœ€ç»ˆé€šçŸ¥Loggerç±»ä¸­çš„afterPrintLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...</span><br><span class="line">åç½®é€šçŸ¥Loggerç±»ä¸­çš„afterReturningPrintLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...</span><br></pre></td></tr></table></figure>

<p>å‘ç°æœ€ç»ˆåœ¨åç½®ä¹‹å‰æ‰§è¡Œäº†ï¼ˆå¼‚å¸¸ä¹Ÿä¸€æ ·ï¼‰</p>
<p>æ²¡æœ‰åŠæ³•ï¼Œå› ä¸ºSpringåŸºäºæ³¨è§£çš„AOPä¸­ï¼Œè°ƒç”¨é¡ºåºç¡®å®æœ‰é—®é¢˜ï¼Œå®é™…å¼€å‘ä¸­åº”è¯¥æ…é‡</p>
<h3 id="Loggeré…ç½®ï¼ˆç¯ç»•é€šçŸ¥ï¼‰"><a href="#Loggeré…ç½®ï¼ˆç¯ç»•é€šçŸ¥ï¼‰" class="headerlink" title="Loggeré…ç½®ï¼ˆç¯ç»•é€šçŸ¥ï¼‰"></a>Loggeré…ç½®ï¼ˆç¯ç»•é€šçŸ¥ï¼‰</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"logger"</span>)</span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">// è¡¨ç¤ºå½“å‰ç±»æ˜¯ä¸€ä¸ªåˆ‡é¢ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é…ç½®åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">pt1</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around</span>(<span class="string">"pt1()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">aroundPringLog</span><span class="params">(ProceedingJoinPoint pjp)</span></span>&#123;</span><br><span class="line">        Object rtValue = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Object[] args = pjp.getArgs();<span class="comment">// å¾—åˆ°æ–¹æ³•æ‰§è¡Œæ‰€éœ€çš„å‚æ•°</span></span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"Loggerç±»ä¸­çš„aroundPringLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...å‰ç½®"</span>);</span><br><span class="line"></span><br><span class="line">            rtValue = pjp.proceed(args);<span class="comment">// æ˜ç¡®è°ƒç”¨ä¸šåŠ¡å±‚æ–¹æ³•ï¼ˆåˆ‡å…¥ç‚¹æ–¹æ³•ï¼‰</span></span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"Loggerç±»ä¸­çš„aroundPringLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...åç½®"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> rtValue;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Throwable t)&#123;</span><br><span class="line">            System.out.println(<span class="string">"Loggerç±»ä¸­çš„aroundPringLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...å¼‚å¸¸"</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(t);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"Loggerç±»ä¸­çš„aroundPringLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...æœ€ç»ˆ"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶å°±æ²¡æœ‰é¡ºåºé—®é¢˜äº†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Loggerç±»ä¸­çš„aroundPringLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...å‰ç½®</span><br><span class="line">æ‰§è¡Œäº†ä¿å­˜</span><br><span class="line">Loggerç±»ä¸­çš„aroundPringLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...åç½®</span><br><span class="line">Loggerç±»ä¸­çš„aroundPringLogæ–¹æ³•å¼€å§‹è®°å½•æ—¥å¿—äº†...æœ€ç»ˆ</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueç¬”è®°03 Element UIä½¿ç”¨&amp;åŠ¨æ€è·¯ç”±å¯¼èˆªæ </title>
    <url>/2020/03/11/note-vue-03/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av85793766" target="_blank" rel="noopener">https://www.bilibili.com/video/av85793766</a><br>p2~3</p>
</blockquote>
<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>å’Œä¸Šæ¬¡ä¸€æ ·åˆ›å»ºé¡¹ç›®ï¼Œåœ¨vue uiä¸­æ·»åŠ Element UIæ’ä»¶</p>
<p>Ideaä¸­å¯¼å…¥å·¥ç¨‹</p>
<p>å¦‚æœæ’ä»¶åœ¨åˆšæ‰UIä¸­æ²¡æœ‰è£…æˆåŠŸï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œè£…</p>
<h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p>Element UIçš„ä½¿ç”¨å¯ä»¥çœ‹å®˜ç½‘æ‰‹å†Œ</p>
<a href="https://element.eleme.cn/2.0/#/zh-CN" title="" target="">Elemnt UI ä¸­æ–‡å®˜ç½‘</a>

<p>æœ‰ä¸€äº›å¸¸è§çš„å¸ƒå±€æ–¹å¼</p>
<h2 id="å¯¼å…¥å®ä¾‹"><a href="#å¯¼å…¥å®ä¾‹" class="headerlink" title="å¯¼å…¥å®ä¾‹"></a>å¯¼å…¥å®ä¾‹</h2><p>ç›´æ¥æŠŠå®˜ç½‘å®ä¾‹å¤åˆ¶åˆ°App.vueä¸­ï¼ˆhtmlå¤åˆ¶åˆ°divæ ‡ç­¾ä¹‹é—´ï¼‰</p>
<p>åˆ·æ–°ç½‘é¡µå°±èƒ½çœ‹åˆ°æ•ˆæœ</p>
<h2 id="ä¸€äº›æ ‡ç­¾è¯´æ˜"><a href="#ä¸€äº›æ ‡ç­¾è¯´æ˜" class="headerlink" title="ä¸€äº›æ ‡ç­¾è¯´æ˜"></a>ä¸€äº›æ ‡ç­¾è¯´æ˜</h2><p>el-container: æ„å»ºæ•´ä¸ªâ»šé¢æ¡†æ¶</p>
<p>el-menu: å·¦ä¾§èœå•</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// :default-openedsé»˜è®¤å±•å¼€çš„èœå• :default-activeé»˜è®¤é€‰ä¸­çš„èœå•</span><br><span class="line"><span class="tag">&lt;<span class="name">el-menu</span> <span class="attr">:default-openeds</span>=<span class="string">"['1', '3']"</span> <span class="attr">:default-active</span>=<span class="string">"1-2"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è§†é¢‘é‡Œè¯´è¿™ä¸ªâ€1-2â€å¿…é¡»å†™æˆâ€[1-2]â€æˆ–åˆ™â€â€˜1-2â€™â€æ‰èƒ½è¯†åˆ«</p>
<p>ä½†æ˜¯è¯•äº†ä¸€ä¸‹ç›´æ¥å†™ä¹Ÿè¯†åˆ«äº†</p>
<p>el-submenu: å¯å±•å¼€çš„èœå•</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// èœå•çš„ä¸‹æ ‡ï¼Œæ–‡æœ¬ç±»å‹ï¼Œä¸èƒ½æ˜¯æ•°å€¼ç±»å‹</span><br><span class="line"><span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">index</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">  // template:å¯¹åº” el-submenu çš„èœå•å i:è®¾ç½®èœå•å›¾æ ‡ï¼Œå…·ä½“åœ¨æ–‡æ¡£æ‰¾</span><br><span class="line">	<span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-message"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>å¯¼èˆªä¸€<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>éœ€è¦çš„è¯è¿˜å¯ä»¥åµŒå¥—å¤šçº§submenu</p>
<h2 id="é€šè¿‡vue-routeråŠ¨æ€æ„å»ºå·¦ä¾§èœå•"><a href="#é€šè¿‡vue-routeråŠ¨æ€æ„å»ºå·¦ä¾§èœå•" class="headerlink" title="é€šè¿‡vue routeråŠ¨æ€æ„å»ºå·¦ä¾§èœå•"></a>é€šè¿‡vue routeråŠ¨æ€æ„å»ºå·¦ä¾§èœå•</h2><h3 id="é…ç½®é¡µé¢"><a href="#é…ç½®é¡µé¢" class="headerlink" title="é…ç½®é¡µé¢"></a>é…ç½®é¡µé¢</h3><p>æ–°å»º4ä¸ªé¡µé¢ï¼Œåœ¨routerä¸­é…ç½®</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Page1 <span class="keyword">from</span> <span class="string">'../views/Page1'</span></span><br><span class="line"><span class="keyword">import</span> Page2 <span class="keyword">from</span> <span class="string">'../views/Page2'</span></span><br><span class="line"><span class="keyword">import</span> Page3 <span class="keyword">from</span> <span class="string">'../views/Page3'</span></span><br><span class="line"><span class="keyword">import</span> Page4 <span class="keyword">from</span> <span class="string">'../views/Page4'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/page1'</span>,</span><br><span class="line">    name: <span class="string">'é¡µé¢1'</span>,</span><br><span class="line">    component: Page1</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/page2'</span>,</span><br><span class="line">    name: <span class="string">'é¡µé¢2'</span>,</span><br><span class="line">    component: Page2</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/page3'</span>,</span><br><span class="line">    name: <span class="string">'é¡µé¢3'</span>,</span><br><span class="line">    component: Page3</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/page4'</span>,</span><br><span class="line">    name: <span class="string">'é¡µé¢4'</span>,</span><br><span class="line">    component: Page4</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯è¿™æ ·è¿˜ä¸ä¼šæ˜¾ç¤ºï¼Œè¦åœ¨App.vueä¸­åŠ ä¸Šrouterå¯¹åº”çš„é¡µé¢</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">        ...</span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-03-11AM10.59.18.jpg">

<p>æ­¤æ—¶ç›¸å½“äºAppä¸­çš„å†…å®¹æ˜¯æœ¬æ¥å°±æ˜¾ç¤ºçš„ï¼Œä¸‹é¢çš„viewæ˜¯é™„åŠ ä¸Šå»çš„</p>
<p>è¿™æ ·æ”¾æ˜¾ç„¶æ˜¯æœ‰é—®é¢˜çš„</p>
<p>æŠŠå®ƒæ”¾åˆ°mainé‡Œé¢</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">				...</span><br><span class="line">				<span class="tag">&lt;<span class="name">el-main</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-03-11AM11.03.53.jpg">

<p>è¿™æ ·å°±æ”¾è¿›å»äº†ï¼Œä¸‹ä¸€æ­¥æŠŠå®ƒä»¬è¿ä¸Š</p>
<h3 id="éå†router"><a href="#éå†router" class="headerlink" title="éå†router"></a>éå†router</h3><p>éœ€è¦ä¿®æ”¹routerçš„å±‚çº§ç»“æ„</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    name: <span class="string">'å¯¼èˆª1'</span>,</span><br><span class="line">    component:App,</span><br><span class="line">    children:[</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page1'</span>,</span><br><span class="line">        name: <span class="string">'é¡µé¢1'</span>,</span><br><span class="line">        component: Page1</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page2'</span>,</span><br><span class="line">        name: <span class="string">'é¡µé¢2'</span>,</span><br><span class="line">        component: Page2</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path:<span class="string">'/navigation'</span>,</span><br><span class="line">    name: <span class="string">'å¯¼èˆª2'</span>,</span><br><span class="line">    component:App,</span><br><span class="line">    children:[</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page3'</span>,</span><br><span class="line">        name: <span class="string">'é¡µé¢3'</span>,</span><br><span class="line">        component: Page3</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page4'</span>,</span><br><span class="line">        name: <span class="string">'é¡µé¢4'</span>,</span><br><span class="line">        component: Page4</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨App.vueä¸­è¯»å–</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">width</span>=<span class="string">"200px"</span> <span class="attr">style</span>=<span class="string">"background-color: rgb(238, 241, 246)"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">el-menu</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">v-for</span>=<span class="string">"item in $router.options.routes"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-setting"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å°±æ˜¾ç¤ºå‡ºæ¥äº†</p>
<img src="/images/2020/screencapture2020-03-11AM11.14.49.jpg">

<hr>
<p>ä¸€ä¸ªå°bug</p>
<p>é¡µé¢ä¸€å¼€å§‹æ˜¯ç©ºç™½çš„ï¼Œå‘ç°æ˜¯Appæ²¡æœ‰å¼•å…¥ï¼Œrouterä¸­è¦åŠ </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br></pre></td></tr></table></figure>

<hr>
<p>æŠŠå†…å±‚çš„å…ƒç´ ä¹Ÿè¯»å‡ºæ¥</p>
<p>ç°åœ¨ç‚¹ä¸€ä¸ªå¯¼èˆªæ—¶ï¼Œä¸¤ä¸ªä¼šä¸€èµ·å±•å¼€ã€åˆä¸Šï¼Œå› ä¸ºæ²¡æœ‰åŠ index</p>
<p>å†åŠ ä¸Šindexå±æ€§ï¼ˆé€šè¿‡itemçš„ä¸‹æ ‡ï¼Œitemåœ¨å‰ï¼Œindexåœ¨åï¼‰ï¼Œéœ€è¦å­—ç¬¦ä¸²å±æ€§ï¼Œæ‹¼ä¸€ä¸ªâ€™â€™</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">width</span>=<span class="string">"200px"</span> <span class="attr">style</span>=<span class="string">"background-color: rgb(238, 241, 246)"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-menu</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in $router.options.routes"</span> <span class="attr">:index</span>=<span class="string">"index+''"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-setting"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#123;&#123;index&#125;&#125;-&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">v-for</span>=<span class="string">"(item2,index2) in item.children"</span> <span class="attr">:index</span>=<span class="string">"index+'-'+index2"</span>&gt;</span>&#123;&#123;item2.name&#125;&#125;<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å°±å¯ä»¥å®šä½åˆ°æ¯ä¸€ä¸ªäº†</p>
<img src="/images/2020/screencapture2020-03-11AM11.29.49.jpg">

<h2 id="menuä¸routerç»‘å®š"><a href="#menuä¸routerç»‘å®š" class="headerlink" title="menuä¸routerç»‘å®š"></a>menuä¸routerç»‘å®š</h2><p>æŠŠAppä¸­çš„å†…å®¹æ”¾åˆ°Indexé¡µé¢ä¸­</p>
<p>1ã€ç»™ el-menu æ ‡ç­¾æ·»åŠ  router å±æ€§</p>
<p>2ã€åœ¨â»šé¢ä¸­æ·»åŠ  router-view æ ‡ç­¾ï¼ˆå®ƒæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå¯ä»¥åŠ¨æ€æ¸²æŸ“é€‰æ‹©çš„routerï¼‰</p>
<p>3ã€el-menu-item æ ‡ç­¾çš„ index å€¼å°±æ˜¯è¦è·³è½¬çš„ router</p>
<p>é»˜è®¤é¡µé¢ï¼Œåœ¨routerä¸­å†™redirect</p>
<p>å¹¶åˆå§‹åŒ–é€‰ä¸­ï¼Œå¦‚æœé€‰æ‹©åˆ™åŠ is-activeçŠ¶æ€ã€‚ç”¨route.pathè·å–å½“å‰è·¯å¾„</p>
<img src="/images/2020/screencapture2020-03-11PM4.09.10.jpg">

<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="æ–‡ä»¶ç»“æ„"><a href="#æ–‡ä»¶ç»“æ„" class="headerlink" title="æ–‡ä»¶ç»“æ„"></a>æ–‡ä»¶ç»“æ„</h2><img src="/images/2020/screencapture2020-03-11PM4.10.22.jpg" width=300>

<h2 id="App-vue"><a href="#App-vue" class="headerlink" title="App.vue"></a>App.vue</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    è¿™ä¸ªrouterå¯¹åº”çš„å³ä¸º/ï¼Œä¹Ÿå°±æ˜¯Indexé¡µé¢--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Index-vue"><a href="#Index-vue" class="headerlink" title="Index.vue"></a>Index.vue</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-container</span> <span class="attr">style</span>=<span class="string">"height: 500px; border: 1px solid #eee"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">width</span>=<span class="string">"200px"</span> <span class="attr">style</span>=<span class="string">"background-color: rgb(238, 241, 246)"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            è¿™é‡Œæ·»åŠ routeræ ‡ç­¾ï¼Œel-menu-itemçš„indexå°±ä¼šè¢«ä½œä¸ºrouterè·¯å¾„--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu</span> <span class="attr">router</span> <span class="attr">:default-openeds</span>=<span class="string">"['0','1']"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in $router.options.routes"</span> <span class="attr">:index</span>=<span class="string">"index+''"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-setting"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#123;&#123;index&#125;&#125;-&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                    æ¡ä»¶åˆ¤æ–­å½“å‰è·¯å¾„æ˜¯å¦ç­‰äºindexï¼Œæ›´æ”¹é€‰ä¸­çŠ¶æ€ï¼Œä¸»è¦æ˜¯åœ¨åˆå§‹åŒ–æ—¶å¢åŠ é»˜è®¤çš„é€‰ä¸­çŠ¶æ€--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">v-for</span>=<span class="string">"item2 in item.children"</span> <span class="attr">:index</span>=<span class="string">"item2.path"</span> <span class="attr">:class</span>=<span class="string">"$route.path==item2.path ? 'is-active' : ''"</span>&gt;</span>&#123;&#123;item2.path&#125;&#125;-&#123;&#123;item2.name&#125;&#125;<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-main</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            ä¸Šé¢åˆindexç¡®å®šçš„routerè¢«æ˜¾ç¤ºåœ¨è¿™é‡Œï¼Œä¹Ÿå°±æ˜¯mainåŒºåŸŸä¸­--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    name: <span class="string">'å¯¼èˆª1'</span>,</span><br><span class="line">    component:Index,</span><br><span class="line">    redirect:<span class="string">'page1'</span>,</span><br><span class="line">    children:[</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page1'</span>,</span><br><span class="line">        name: <span class="string">'é¡µé¢1'</span>,</span><br><span class="line">        component: Page1</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page2'</span>,</span><br><span class="line">        name: <span class="string">'é¡µé¢2'</span>,</span><br><span class="line">        component: Page2</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path:<span class="string">'/navigation'</span>,</span><br><span class="line">    name: <span class="string">'å¯¼èˆª2'</span>,</span><br><span class="line">    component:Index,</span><br><span class="line">    children:[</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page3'</span>,</span><br><span class="line">        name: <span class="string">'é¡µé¢3'</span>,</span><br><span class="line">        component: Page3</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page4'</span>,</span><br><span class="line">        name: <span class="string">'é¡µé¢4'</span>,</span><br><span class="line">        component: Page4</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„åŒºåˆ«ï¼šrouter/route/routes</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>maxOSæˆªå›¾è®¾ç½®</title>
    <url>/2020/03/11/mac-screencapture/</url>
    <content><![CDATA[<p>é—®é¢˜ï¼šä»¥å‰æ’å…¥æˆªå›¾å¾—å…ˆæ”¹æ–‡ä»¶åï¼Œè¦æ—¶é—´æˆ³ä¸å«ä¸­æ–‡ï¼Œè€Œä¸”pngç‰¹åˆ«å¤§ï¼Œæœ€å¥½è½¬æˆjpgï¼Œå¾ˆéº»çƒ¦</p>
<p>ç›®æ ‡ï¼šæ–‡ä»¶åæ—¶é—´æˆ³ä¸å«ä¸­æ–‡ &amp; jpgæ ¼å¼</p>
<hr>
<h1 id="ä¸€é€šæ“ä½œ"><a href="#ä¸€é€šæ“ä½œ" class="headerlink" title="ä¸€é€šæ“ä½œ"></a>ä¸€é€šæ“ä½œ</h1><h2 id="æ”¹æ ¼å¼"><a href="#æ”¹æ ¼å¼" class="headerlink" title="æ”¹æ ¼å¼"></a>æ”¹æ ¼å¼</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">defaults write com.apple.screencapture type jpg</span><br></pre></td></tr></table></figure>

<h2 id="æ”¹å"><a href="#æ”¹å" class="headerlink" title="æ”¹å"></a>æ”¹å</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">defaults write com.apple.screencapture name screencapture</span><br></pre></td></tr></table></figure>

<h2 id="æ”¹æ—¶é—´æˆ³æ ¼å¼"><a href="#æ”¹æ—¶é—´æˆ³æ ¼å¼" class="headerlink" title="æ”¹æ—¶é—´æˆ³æ ¼å¼"></a>æ”¹æ—¶é—´æˆ³æ ¼å¼</h2><p>ç³»ç»Ÿåå¥½è®¾ç½®-&gt;è¯­è¨€ä¸åœ°åŒº-&gt;é«˜çº§-&gt;æ—¶é—´</p>
<p>æ­£åˆå‰å’Œä¸­åˆåæ¡†ä¸­ï¼šä¸Šåˆ/ä¸‹åˆæ”¹æˆAM/PM </p>
<h2 id="å®Œå·¥"><a href="#å®Œå·¥" class="headerlink" title="å®Œå·¥"></a>å®Œå·¥</h2><p>Before:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">æˆªå±2020-03-11ä¸Šåˆ9.50.34</span><br></pre></td></tr></table></figure>

<p>After:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">screencapture2020-03-11AM10.05.30</span><br></pre></td></tr></table></figure>



<hr>
<h1 id="å‘½ä»¤å¤‡å¿˜"><a href="#å‘½ä»¤å¤‡å¿˜" class="headerlink" title="å‘½ä»¤å¤‡å¿˜"></a>å‘½ä»¤å¤‡å¿˜</h1><h2 id="ä¿®æ”¹æ ¼å¼"><a href="#ä¿®æ”¹æ ¼å¼" class="headerlink" title="ä¿®æ”¹æ ¼å¼"></a>ä¿®æ”¹æ ¼å¼</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">defaults write com.apple.screencapture type jpg</span><br></pre></td></tr></table></figure>

<h2 id="ä¿®æ”¹æ–‡ä»¶å"><a href="#ä¿®æ”¹æ–‡ä»¶å" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶å"></a>ä¿®æ”¹æ–‡ä»¶å</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">defaults write com.apple.screencapture name XXX</span><br></pre></td></tr></table></figure>

<h2 id="æ—¶é—´æˆ³"><a href="#æ—¶é—´æˆ³" class="headerlink" title="æ—¶é—´æˆ³"></a>æ—¶é—´æˆ³</h2><h3 id="ç§»é™¤æ—¶é—´æˆ³"><a href="#ç§»é™¤æ—¶é—´æˆ³" class="headerlink" title="ç§»é™¤æ—¶é—´æˆ³"></a>ç§»é™¤æ—¶é—´æˆ³</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">defaults write com.apple.screencapture &quot;include-date&quot; 0</span><br></pre></td></tr></table></figure>

<h3 id="åŠ æ—¶é—´æˆ³"><a href="#åŠ æ—¶é—´æˆ³" class="headerlink" title="åŠ æ—¶é—´æˆ³"></a>åŠ æ—¶é—´æˆ³</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">defaults write com.apple.screencapture &quot;include-date&quot; 1</span><br></pre></td></tr></table></figure>

<h2 id="å…¶å®ƒå¸®åŠ©"><a href="#å…¶å®ƒå¸®åŠ©" class="headerlink" title="å…¶å®ƒå¸®åŠ©"></a>å…¶å®ƒå¸®åŠ©</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">screencapture -h</span><br></pre></td></tr></table></figure>



<blockquote>
<p>ref:</p>
<p><a href="https://zhuanlan.zhihu.com/p/73725126" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/73725126</a></p>
<p><a href="https://www.maketecheasier.com/remove-time-stamp-screenshot-mac/" target="_blank" rel="noopener">https://www.maketecheasier.com/remove-time-stamp-screenshot-mac/</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>tool</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¥åˆ°Hexoçš„ç¬¬ä¸€å¤©ï¼</title>
    <url>/2020/03/10/hello-hexo/</url>
    <content><![CDATA[<p>ä»ä¸‹åˆå¼€å§‹æ­å»ºï¼Œè°ƒä¸»é¢˜ï¼Œä¸€ç›´åˆ°æ™šä¸Šæ¬è¿å®Œäº†æ­£åœ¨å†™çš„ç¬”è®°ï¼Œå¿ƒæƒ…èˆ’ç•…</p>
<p>å…ˆå°è¯•çš„æ˜¯Jekyllï¼Œæˆ‘çš„è€å¤©é¹…å•Šï¼ŒæŠ˜è…¾äº†ä¸€æ•´å¤©ï¼Œä¸æ˜¯é…ç½®æœ‰é—®é¢˜å°±æ˜¯èµ„æºæœ‰é—®é¢˜ï¼Œæœ¬åœ°å¥½ä¸å®¹æ˜“æˆåŠŸäº†æäº¤åˆ°githubåˆå´©äº†ï¼ŒbuildæˆåŠŸäº†cssåˆä¸æ¸²æŸ“â€¦<br>æ‚¨æ˜¯Hydeå§</p>
<p>æ€»ä¹‹ï¼Œç°åœ¨æ‹¥æœ‰ä¸€ä¸ªå¸¦ä¾§è¾¹æ ç›®å½•çš„å°ä»“åº“äº†ï½<br><img src="/images/2020/8586786.png" width=200></p>
<p>å¼€å¯æ¢ç´¢è¿›åº¦æ¡<br>[|||||Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·]10%</p>
<p>(deprecated)<a href="https://blog.csdn.net/weixin_42319408" title="" target="">è€å®¶</a></p>
]]></content>
      <categories>
        <category>Memo</category>
      </categories>
  </entry>
  <entry>
    <title>ä¸€äº›æœ‰è¶£çš„ç½‘ç«™</title>
    <url>/2020/03/10/bookmark/</url>
    <content><![CDATA[<h1 id="é…è‰²"><a href="#é…è‰²" class="headerlink" title="é…è‰²"></a>é…è‰²</h1><h2 id=""><a href="#" class="headerlink" title=""></a><a href="http://zhongguose.com/" title="" target="">ä¸­å›½è‰²</a></h2><p>ä¸­å›½ä¼ ç»Ÿé¢œè‰²ï¼Œæ¯ä¸€ä¸ªéƒ½æœ‰CMYKã€RGBå€¼(åŒ…æ‹¬16è¿›åˆ¶å­—ç¬¦ä¸²å½¢å¼ï½å¥½ç”¨ï¼)<br><img src="/images/2020/2020-03-10.8.30.50.jpg"><br>#5dbe8a è¶…çˆ±çš„è”»æ¢¢ç»¿ï½</p>
<h2 id="-1"><a href="#-1" class="headerlink" title=""></a><a href="https://brandcolors.net/" title="" target="">brandcolors</a></h2><p>å“ç‰Œé…è‰²ï¼Œå¯ä»¥å‘ç°å„ç§çœ¼ç†Ÿçš„é¢œè‰²</p>
<p>è¿™æ˜¯ç™¾åº¦<br><img src="/images/2020/2020-03-10.8.44.30.jpg"><br>è¿™æ˜¯NASA<br><img src="/images/2020/2020-03-10.8.48.06.jpg"><br>è¿™æ˜¯è°·æ­Œ<br><img src="/images/2020/2020-03-10.8.46.18.jpg"><br>è¿™æ˜¯å¾®è½¯<br><img src="/images/2020/2020-03-10.8.47.35.jpg"><br>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå®ƒä»¬æ˜¯è°ï¼Ÿ<br><img src="/images/2020/2020-03-10.8.24.22.jpg"></p>
<p><a href="/images/2020/2020-03-10.8.24.21.jpg">æˆ‘æ˜¯ç­”æ¡ˆ</a></p>
<h2 id="-2"><a href="#-2" class="headerlink" title=""></a><a href="https://webgradients.com/" title="" target="">webgradients</a></h2><p>ä¸€é¢—ä¸€é¢—è¶…ä»™çš„æ¸å˜è‰²ï¼Œä¹Ÿå¯ä»¥å…¨å±æŸ¥çœ‹ï¼Œèˆ’é€‚<br><img src="/images/2020/2020-03-10.8.26.24.jpg"></p>
<h2 id="-3"><a href="#-3" class="headerlink" title=""></a><a href="https://uigradients.com/" title="" target="">uigradients</a></h2><p>ä¹Ÿæ˜¯ç¾ä¸½çš„æ¸å˜è‰²<br><img src="/images/2020/2020-03-10.8.30.23.jpg"></p>
<h2 id="-4"><a href="#-4" class="headerlink" title=""></a><a href="https://www.webdesignrankings.com/resources/lolcolors/" title="" target="">LOLCOLORS</a></h2><p>æ°´æ»´å½¢çš„é…è‰²<br><img src="/images/2020/2020-03-10.9.13.18.jpg"></p>
<h2 id="-5"><a href="#-5" class="headerlink" title=""></a><a href="https://color.adobe.com/zh/create/color-wheel/" title="" target="">è‰²è½®</a></h2><p>adobeå‡ºå“ï¼Œä¸ä¼šç”¨ï¼Œä½†æ˜¯å¾ˆå¥½ç©<br><img src="/images/2020/2020-03-10.9.10.41.jpg"></p>
<h2 id="-6"><a href="#-6" class="headerlink" title=""></a><a href="https://color.hailpixel.com/" title="" target="">Colordot</a></h2><p>è¿™ä¸ªä¹Ÿå¾ˆæœ‰è¶£ï¼æŒªåŠ¨å…‰æ ‡è°ƒè‰²ï¼Œç‚¹å‡»å›ºå®š<br><img src="/images/2020/2020-03-10.9.15.21.jpg"><br><img src="/images/2020/2020-03-10.9.17.15.jpg"></p>
<h1 id="å›¾æ ‡"><a href="#å›¾æ ‡" class="headerlink" title="å›¾æ ‡"></a>å›¾æ ‡</h1><h2 id="-7"><a href="#-7" class="headerlink" title=""></a><a href="https://thenounproject.com/" title="" target="">thenounproject</a></h2><p>å¸¸ç”¨çš„å›¾æ ‡ç½‘ç«™</p>
<img src="/images/2020/2020-03-10.9.22.23.jpg">



<h1 id="è®¾è®¡"><a href="#è®¾è®¡" class="headerlink" title="è®¾è®¡"></a>è®¾è®¡</h1><h2 id="-8"><a href="#-8" class="headerlink" title=""></a><a href="https://dribbble.com/" title="" target="">dribbble</a></h2><img src="/images/2020/screencapture2020-03-18PM11.47.55.jpg">

<h2 id="-9"><a href="#-9" class="headerlink" title=""></a><a href="https://tympanus.net/codrops/" title="" target="">codrops</a></h2><p>å‘ç°é…·ç‚«çš„é¡µé¢</p>
<img src="/images/2020/screencapture2020-03-18PM11.49.26.jpg">

]]></content>
      <categories>
        <category>Resource</category>
      </categories>
      <tags>
        <tag>aha</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç¬”è®°09 äº‹åŠ¡æ§åˆ¶çš„é—®é¢˜&amp;åŠ¨æ€ä»£ç†</title>
    <url>/2020/03/09/note-spring-09/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p46~55</p>
</blockquote>
<hr>
<h1 id="Accountæ¡ˆä¾‹ä¸­è½¬è´¦æ–¹æ³•çš„äº‹åŠ¡é—®é¢˜"><a href="#Accountæ¡ˆä¾‹ä¸­è½¬è´¦æ–¹æ³•çš„äº‹åŠ¡é—®é¢˜" class="headerlink" title="Accountæ¡ˆä¾‹ä¸­è½¬è´¦æ–¹æ³•çš„äº‹åŠ¡é—®é¢˜"></a>Accountæ¡ˆä¾‹ä¸­è½¬è´¦æ–¹æ³•çš„äº‹åŠ¡é—®é¢˜</h1><img src="/images/2020/20200309100124499.png">

<p>äº‹åŠ¡æ§åˆ¶åº”è¯¥éƒ½åœ¨ä¸šåŠ¡å±‚ï¼Œä¹‹å‰çš„æ¡ˆä¾‹ä¸­éƒ½åœ¨æŒä¹…å±‚ï¼Œéœ€è¦ä¿®æ”¹<br>å†™ä¸¤ä¸ªå·¥å…·ç±»</p>
<h1 id="2ä¸ªå·¥å…·ç±»"><a href="#2ä¸ªå·¥å…·ç±»" class="headerlink" title="2ä¸ªå·¥å…·ç±»"></a>2ä¸ªå·¥å…·ç±»</h1><h2 id="ConnectionUtils"><a href="#ConnectionUtils" class="headerlink" title="ConnectionUtils"></a>ConnectionUtils</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿æ¥çš„å·¥å…·ç±»ï¼Œå®ƒç”¨äºä»æ•°æ®æºä¸­è·å–ä¸€ä¸ªè¿æ¥ï¼Œå¹¶ä¸”å®ç°å’Œçº¿ç¨‹çš„ç»‘å®š</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectionUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ThreadLocal&lt;Connection&gt; tl = <span class="keyword">new</span> ThreadLocal&lt;Connection&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDataSource</span><span class="params">(DataSource dataSource)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dataSource = dataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å½“å‰çº¿ç¨‹ä¸Šçš„è¿æ¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Connection <span class="title">getThreadConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// 1.å…ˆä»ThreadLocalä¸Šè·å–</span></span><br><span class="line">            Connection conn = tl.get();</span><br><span class="line">            <span class="comment">// 2.åˆ¤æ–­å½“å‰çº¿ç¨‹ä¸Šæ˜¯å¦æœ‰è¿æ¥</span></span><br><span class="line">            <span class="keyword">if</span> (conn == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// 3.ä»æ•°æ®æºä¸­è·å–ä¸€ä¸ªè¿æ¥ï¼Œå¹¶ä¸”å­˜å…¥ThreadLocalä¸­</span></span><br><span class="line">                conn = dataSource.getConnection();</span><br><span class="line">                tl.set(conn);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 4.è¿”å›å½“å‰çº¿ç¨‹ä¸Šçš„è¿æ¥</span></span><br><span class="line">            <span class="keyword">return</span> conn;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŠŠè¿æ¥å’Œçº¿ç¨‹è§£ç»‘</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeConnection</span><span class="params">()</span></span>&#123;</span><br><span class="line">        tl.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="TransactionManager"><a href="#TransactionManager" class="headerlink" title="TransactionManager"></a>TransactionManager</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å’Œäº‹åŠ¡ç®¡ç†ç›¸å…³çš„å·¥å…·ç±»ï¼Œå®ƒåŒ…å«äº†ï¼Œå¼€å¯äº‹åŠ¡ï¼Œæäº¤äº‹åŠ¡ï¼Œå›æ»šäº‹åŠ¡å’Œé‡Šæ”¾è¿æ¥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TransactionManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ConnectionUtils connectionUtils;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setConnectionUtils</span><span class="params">(ConnectionUtils connectionUtils)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.connectionUtils = connectionUtils;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">beginTransaction</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connectionUtils.getThreadConnection().setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">commit</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connectionUtils.getThreadConnection().commit();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å›æ»šäº‹åŠ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">rollback</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connectionUtils.getThreadConnection().rollback();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é‡Šæ”¾è¿æ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">release</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connectionUtils.getThreadConnection().close();<span class="comment">// è¿˜å›è¿æ¥æ± ä¸­</span></span><br><span class="line">            connectionUtils.removeConnection();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿æ¥è¿˜å›è¿æ¥æ± ä¸­åï¼Œè¿˜éœ€å†æŠŠè¿æ¥å’Œçº¿ç¨‹è§£ç»‘ï¼Œå¦åˆ™ä¸‹æ¬¡ConnectionUtilsä¸­åˆ¤æ–­æ˜¯å¦æœ‰è¿æ¥æ˜¯trueï¼Œä½†è¿™ä¸ªè¿æ¥æ˜¯å·²ç»å…³é—­çš„é”™è¯¯çš„è¿æ¥</p>
<h2 id="æ³¨å…¥"><a href="#æ³¨å…¥" class="headerlink" title="æ³¨å…¥"></a>æ³¨å…¥</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;!-- é…ç½®Connectionçš„å·¥å…·ç±» ConnectionUtils --&gt;</span><br><span class="line">   &lt;bean id=<span class="string">"connectionUtils"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.itheima.utils.ConnectionUtils"</span>&gt;</span><br><span class="line">       &lt;!-- æ³¨å…¥æ•°æ®æº--&gt;</span><br><span class="line">       &lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨--&gt;</span><br><span class="line">   &lt;bean id=<span class="string">"txManager"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.itheima.utils.TransactionManager"</span>&gt;</span><br><span class="line">       &lt;!-- æ³¨å…¥ConnectionUtils --&gt;</span><br><span class="line">       &lt;property name="connectionUtils" ref="connectionUtils"&gt;&lt;/property&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<h1 id="ä»£ç æ”¹é€ "><a href="#ä»£ç æ”¹é€ " class="headerlink" title="ä»£ç æ”¹é€ "></a>ä»£ç æ”¹é€ </h1><p>ä¿®æ”¹ä¹‹åä¸éœ€è¦åœ¨beans.xmlä¸­æ³¨å…¥dataSourceäº†</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®Connectionçš„å·¥å…·ç±» ConnectionUtils --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"connectionUtils"</span> <span class="attr">class</span>=<span class="string">"com.itheima.utils.ConnectionUtils"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ³¨å…¥æ•°æ®æº--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- property name="dataSource" ref="dataSource"&gt;&lt;/property--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨AccountDaoImplä¸­åŠ ä¸€ä¸ªConnectionUtils</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> ConnectionUtils connectionUtils;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setConnectionUtils</span><span class="params">(ConnectionUtils connectionUtils)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">this</span>.connectionUtils = connectionUtils;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¹¶ä¸”runnerè·å–è¿æ¥æ”¹ä¸º</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">runner.query(connectionUtils.getThreadConnection(),<span class="string">"select * from account"</span>,<span class="keyword">new</span> BeanListHandler&lt;Account&gt;(Account<span class="class">.<span class="keyword">class</span>))</span>;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼ŒAccountServiceImplä¸­ä¸€ä¸ªå®Œæ•´çš„äº‹åŠ¡æµç¨‹æ˜¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">findAllAccount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.å¼€å¯äº‹åŠ¡</span></span><br><span class="line">            txManager.beginTransaction();</span><br><span class="line">            <span class="comment">// 2.æ‰§è¡Œæ“ä½œ</span></span><br><span class="line">            List&lt;Account&gt; accounts = accountDao.findAllAccount();</span><br><span class="line">            <span class="comment">// 3.æäº¤äº‹åŠ¡</span></span><br><span class="line">            txManager.commit();</span><br><span class="line">            <span class="comment">// 4.è¿”å›ç»“æœ</span></span><br><span class="line">            <span class="keyword">return</span> accounts;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="comment">// 5.å›æ»šæ“ä½œ</span></span><br><span class="line">            txManager.rollback();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6.é‡Šæ”¾è¿æ¥</span></span><br><span class="line">            txManager.release();</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯æ¯ä¸ªæ–¹æ³•éƒ½è¦è¿™æ ·å†™ï¼Œå¾ˆè‡ƒè‚¿<br>è€Œä¸”æ–¹æ³•çš„ä¾èµ–å¾ˆä¸¥é‡ï¼ˆå¦‚æœTransactionManagerä¸­beginTransactionæ–¹æ³•åæ”¹æˆbeginTransaction1ï¼ŒAccountServiceImplä¸­æ¯ä¸€å¤„ç”¨åˆ°çš„éƒ½è¦æ”¹ï¼‰<br>è¿›ä¸€æ­¥æ”¹é€ ï¼šä»£ç†</p>
<p>&amp; ç°åœ¨çš„ä¾èµ–æœ‰äº›ä¹±ä¸ƒå…«ç³Ÿï¼Œåœ¨åé¢Springçš„äº‹åŠ¡æ§åˆ¶ä¸­è§£å†³</p>
<h1 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h1><h2 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h2><img src="/images/2020/20200309104823423.png">

<p>ç‰¹ç‚¹ï¼šå­—èŠ‚ç éšç”¨éšåˆ›å»ºï¼Œéšç”¨éšåŠ è½½<br>ä½œç”¨ï¼šä¸ä¿®æ”¹æºç çš„åŸºç¡€ä¸Šå¯¹æ–¹æ³•å¢å¼º</p>
<p>åˆ†ç±»ï¼š</p>
<ul>
<li>åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†</li>
<li>åŸºäºå­ç±»çš„åŠ¨æ€ä»£ç†</li>
</ul>
<p>ç”¨å¤„å¦‚ï¼š<br>è¿æ¥æ± closeæ–¹æ³•å…³é—­æ—¶ä¸èƒ½çœŸæ­£å…³é—­ï¼Œè¿˜è¦è¿˜å›æ± ä¸­ã€‚å¯ä»¥ä½¿ç”¨åŠ¨æ€ä»£ç†å¯¹å…¶è¿›è¡Œå¢å¼ºï¼ŒæŠŠå®ƒè¿˜å›æ± é‡Œ<br>è§£å†³ä¸­æ–‡ä¹±ç ï¼Œrequestå¯¹è±¡çš„æ–¹æ³•å¢å¼ºï¼Œç”¨è£…é¥°è€…æ¨¡å¼å¯ä»¥å®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨åŠ¨æ€ä»£ç†å®ç°</p>
<h2 id="åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†"><a href="#åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†" class="headerlink" title="åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†"></a>åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†</h2><p>æ¶‰åŠçš„ç±»ï¼šProxy<br>æä¾›è€…ï¼šJDKå®˜æ–¹<br>å¦‚ä½•åˆ›å»ºä»£ç†å¯¹è±¡ï¼šä½¿ç”¨Proxyç±»ä¸­çš„newProxyInstanceæ–¹æ³•<br>åˆ›å»ºä»£ç†å¯¹è±¡çš„è¦æ±‚ï¼šè¢«ä»£ç†ç±»æœ€å°‘å®ç°ä¸€ä¸ªæ¥å£ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸èƒ½ä½¿ç”¨</p>
<p>newProxyInstanceæ–¹æ³•çš„å‚æ•°ï¼š</p>
<ul>
<li>ClassLoaderï¼šç±»åŠ è½½å™¨<br>å®ƒæ˜¯ç”¨äºåŠ è½½ä»£ç†å¯¹è±¡å­—èŠ‚ç çš„ã€‚å’Œè¢«ä»£ç†å¯¹è±¡ä½¿ç”¨ç›¸åŒçš„ç±»åŠ è½½å™¨ã€‚å›ºå®šå†™æ³•</li>
<li>Class[]ï¼šå­—èŠ‚ç æ•°ç»„<br>å®ƒæ˜¯ç”¨äºè®©ä»£ç†å¯¹è±¡å’Œè¢«ä»£ç†å¯¹è±¡æœ‰ç›¸åŒæ–¹æ³•ã€‚å›ºå®šå†™æ³•</li>
<li>InvocationHandlerï¼šç”¨äºæä¾›å¢å¼ºçš„ä»£ç <br>å†™å¦‚ä½•ä»£ç†ã€‚ä¸€èˆ¬éƒ½æ˜¯å†™ä¸€ä¸ªè¯¥æ¥å£çš„å®ç°ç±»ï¼Œé€šå¸¸æƒ…å†µä¸‹éƒ½æ˜¯åŒ¿åå†…éƒ¨ç±»ï¼Œä½†ä¸æ˜¯å¿…é¡»çš„ã€‚æ­¤æ¥å£çš„å®ç°ç±»éƒ½æ˜¯è°ç”¨è°å†™</li>
</ul>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><img src="/images/2020/20200309110447314.png" width=300>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¹ç”Ÿäº§å‚å®¶è¦æ±‚çš„æ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IProducer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é”€å”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saleProduct</span><span class="params">(<span class="keyword">float</span> money)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å”®å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterService</span><span class="params">(<span class="keyword">float</span> money)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸€ä¸ªç”Ÿäº§è€…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Producer</span> <span class="keyword">implements</span> <span class="title">IProducer</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saleProduct</span><span class="params">(<span class="keyword">float</span> money)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"é”€å”®äº§å“ï¼Œå¹¶æ‹¿åˆ°é’±ï¼š"</span>+money);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterService</span><span class="params">(<span class="keyword">float</span> money)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æä¾›å”®åæœåŠ¡ï¼Œå¹¶æ‹¿åˆ°é’±ï¼š"</span>+money);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¨¡æ‹Ÿä¸€ä¸ªæ¶ˆè´¹è€…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Producer producer = <span class="keyword">new</span> Producer();</span><br><span class="line"></span><br><span class="line">        IProducer proxyProducer = (IProducer) Proxy.newProxyInstance(producer.getClass().getClassLoader(),</span><br><span class="line">                producer.getClass().getInterfaces(),</span><br><span class="line">                <span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line">                    <span class="comment">/**</span></span><br><span class="line"><span class="comment">                     * ä½œç”¨ï¼šæ‰§è¡Œè¢«ä»£ç†å¯¹è±¡çš„ä»»ä½•æ¥å£æ–¹æ³•éƒ½ä¼šç»è¿‡è¯¥æ–¹æ³•ï¼ˆå³æœ‰æ‹¦æˆªåŠŸèƒ½ï¼‰</span></span><br><span class="line"><span class="comment">                     * æ–¹æ³•å‚æ•°çš„å«ä¹‰</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@param</span> proxy   ä»£ç†å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@param</span> method  å½“å‰æ‰§è¡Œçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@param</span> args    å½“å‰æ‰§è¡Œæ–¹æ³•æ‰€éœ€çš„å‚æ•°</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@return</span>        å’Œè¢«ä»£ç†å¯¹è±¡æ–¹æ³•æœ‰ç›¸åŒçš„è¿”å›å€¼</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">                     */</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                        <span class="comment">// æ¥æ”¶è¿”å›å€¼</span></span><br><span class="line">                        Object returnValue = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">                        <span class="comment">// 1.è·å–æ–¹æ³•æ‰§è¡Œçš„å‚æ•°</span></span><br><span class="line">                        Float money = (Float)args[<span class="number">0</span>];</span><br><span class="line">                        <span class="comment">// 2.åˆ¤æ–­å½“å‰æ–¹æ³•æ˜¯ä¸æ˜¯é”€å”®</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="string">"saleProduct"</span>.equals(method.getName())) &#123;</span><br><span class="line">                            returnValue = method.invoke(producer, money*<span class="number">0.8f</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">return</span> returnValue;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">    </span><br><span class="line">    	proxyProducer.saleProduct(<span class="number">10000f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/images/2020/20200309111349124.png" width=600>

<p>ä½¿ç”¨ä»£ç†åï¼Œæ¶ˆè´¹è€…ä»˜10000ï¼Œä»£ç†ææˆ20%ï¼Œç”Ÿäº§è€…æ‹¿åˆ°8000</p>
<p>å¹¶æ²¡æœ‰å¯¹ç”Ÿäº§è€…çš„ä»£ç åšä»»ä½•ä¿®æ”¹ï¼Œä½†æ˜¯å®ç°äº†å¢å¼º<br>æ­¤å¤„å³ä¸ºåŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†</p>
<p>ä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜<br>å¦‚æœç”Ÿäº§è€…æ²¡æœ‰å®ç°æ¥å£ï¼Œå°±ä¸èƒ½è¿™æ ·ç”¨äº†ï¼Œä¼šæŠ¥ä»£ç†å¼‚å¸¸</p>
<h2 id="åŸºäºå­ç±»çš„åŠ¨æ€ä»£ç†"><a href="#åŸºäºå­ç±»çš„åŠ¨æ€ä»£ç†" class="headerlink" title="åŸºäºå­ç±»çš„åŠ¨æ€ä»£ç†"></a>åŸºäºå­ç±»çš„åŠ¨æ€ä»£ç†</h2><p>è¦æ±‚æœ‰ç¬¬ä¸‰æ–¹jaråŒ…çš„æ”¯æŒ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1_3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ¶‰åŠçš„ç±»ï¼šEnhancer<br>æä¾›è€…ï¼šç¬¬ä¸‰æ–¹cglibåº“</p>
<p>å¦‚ä½•åˆ›å»ºä»£ç†å¯¹è±¡ï¼šä½¿ç”¨Enhancerç±»ä¸­çš„createæ–¹æ³•<br>åˆ›å»ºä»£ç†å¯¹è±¡çš„è¦æ±‚ï¼šè¢«ä»£ç†ç±»ä¸èƒ½æ˜¯æœ€ç»ˆç±»</p>
<p>createæ–¹æ³•çš„å‚æ•°ï¼š</p>
<ul>
<li>Classï¼šå­—èŠ‚ç <br>ç”¨äºæŒ‡å®šè¢«ä»£ç†å¯¹è±¡çš„å­—èŠ‚ç </li>
<li>Callbackï¼šç”¨äºæä¾›å¢å¼ºçš„ä»£ç <br>å†™å¦‚ä½•ä»£ç†ã€‚ä¸€èˆ¬æ˜¯å†™ä¸€ä¸ªè¯¥æ¥å£çš„å®ç°ç±»ï¼Œé€šå¸¸æƒ…å†µä¸‹éƒ½æ˜¯åŒ¿åå†…éƒ¨ç±»ï¼Œä½†ä¸æ˜¯å¿…é¡»çš„<br>æ­¤æ¥å£çš„å®ç°ç±»éƒ½æ˜¯è°ç”¨è°å†™<br>ä¸€èˆ¬å†™çš„éƒ½æ˜¯è¯¥æ¥å£çš„å­æ¥å£å®ç°ç±»ï¼šMethodInterceptor</li>
</ul>
<h3 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸€ä¸ªç”Ÿäº§è€…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Producer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é”€å”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saleProduct</span><span class="params">(<span class="keyword">float</span> money)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"é”€å”®äº§å“ï¼Œå¹¶æ‹¿åˆ°é’±ï¼š"</span>+money);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å”®å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterService</span><span class="params">(<span class="keyword">float</span> money)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æä¾›å”®åæœåŠ¡ï¼Œå¹¶æ‹¿åˆ°é’±ï¼š"</span>+money);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.cglib;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> net.sf.cglib.proxy.Enhancer;</span><br><span class="line"><span class="keyword">import</span> net.sf.cglib.proxy.MethodInterceptor;</span><br><span class="line"><span class="keyword">import</span> net.sf.cglib.proxy.MethodProxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¨¡æ‹Ÿä¸€ä¸ªæ¶ˆè´¹è€…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Producer producer = <span class="keyword">new</span> Producer();</span><br><span class="line"></span><br><span class="line">        Producer cglibProducer = (Producer)Enhancer.create(producer.getClass(), <span class="keyword">new</span> MethodInterceptor() &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * æ‰§è¡Œè¢«ä»£ç†å¯¹è±¡çš„ä»»ä½•æ–¹æ³•éƒ½ä¼šç»è¿‡è¯¥æ–¹æ³•</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> proxy</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> method</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">             *    ä»¥ä¸Šä¸‰ä¸ªå‚æ•°å’ŒåŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†ä¸­invokeæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€æ ·çš„</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> methodProxy ï¼šå½“å‰æ‰§è¡Œæ–¹æ³•çš„ä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">             * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span><span class="params">(Object proxy, Method method, Object[] args, MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                Object returnValue = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 1.è·å–æ–¹æ³•æ‰§è¡Œçš„å‚æ•°</span></span><br><span class="line">                Float money = (Float)args[<span class="number">0</span>];</span><br><span class="line">                <span class="comment">// 2.åˆ¤æ–­å½“å‰æ–¹æ³•æ˜¯ä¸æ˜¯é”€å”®</span></span><br><span class="line">                <span class="keyword">if</span>(<span class="string">"saleProduct"</span>.equals(method.getName())) &#123;</span><br><span class="line">                    returnValue = method.invoke(producer, money*<span class="number">0.8f</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> returnValue;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        cglibProducer.saleProduct(<span class="number">12000f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä½¿ç”¨åŠ¨æ€ä»£ç†å®ç°äº‹åŠ¡æ§åˆ¶"><a href="#ä½¿ç”¨åŠ¨æ€ä»£ç†å®ç°äº‹åŠ¡æ§åˆ¶" class="headerlink" title="ä½¿ç”¨åŠ¨æ€ä»£ç†å®ç°äº‹åŠ¡æ§åˆ¶"></a>ä½¿ç”¨åŠ¨æ€ä»£ç†å®ç°äº‹åŠ¡æ§åˆ¶</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨äºåˆ›å»ºServiceçš„ä»£ç†å¯¹è±¡çš„å·¥å‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IAccountService accountService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TransactionManager txManager;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">setAccountService</span><span class="params">(IAccountService accountService)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.accountService = accountService;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTxManager</span><span class="params">(TransactionManager txManager)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.txManager = txManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–Serviceä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IAccountService <span class="title">getAccountService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (IAccountService)Proxy.newProxyInstance(accountService.getClass().getClassLoader(),</span><br><span class="line">                accountService.getClass().getInterfaces(),</span><br><span class="line">                <span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line">                    <span class="comment">/**</span></span><br><span class="line"><span class="comment">                     * æ·»åŠ äº‹åŠ¡çš„æ”¯æŒ</span></span><br><span class="line"><span class="comment">                     *</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@param</span> proxy</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@param</span> method</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">                     */</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                        <span class="keyword">if</span>(<span class="string">"test"</span>.equals(method.getName()))&#123;</span><br><span class="line">                            <span class="keyword">return</span> method.invoke(accountService,args);</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        Object rtValue = <span class="keyword">null</span>;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="comment">// 1.å¼€å¯äº‹åŠ¡</span></span><br><span class="line">                            txManager.beginTransaction();</span><br><span class="line">                            <span class="comment">// 2.æ‰§è¡Œæ“ä½œ</span></span><br><span class="line">                            rtValue = method.invoke(accountService, args);</span><br><span class="line">                            <span class="comment">// 3.æäº¤äº‹åŠ¡</span></span><br><span class="line">                            txManager.commit();</span><br><span class="line">                            <span class="comment">// 4.è¿”å›ç»“æœ</span></span><br><span class="line">                            <span class="keyword">return</span> rtValue;</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                            <span class="comment">// 5.å›æ»šæ“ä½œ</span></span><br><span class="line">                            txManager.rollback();</span><br><span class="line">                            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">                        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                            <span class="comment">// 6.é‡Šæ”¾è¿æ¥</span></span><br><span class="line">                            txManager.release();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¹¶å¯¹beans.xmlåšç›¸åº”çš„ä¿®æ”¹<br>æµ‹è¯•ä¸­IAccountServiceåªç”¨Autowirdä¸å¤Ÿäº†ï¼Œè¿˜éœ€@Qualifier(â€œproxyAccountServiceâ€)</p>
<p>ä½¿ç”¨åŠ¨æ€ä»£ç†åï¼Œæ¶ˆé™¤äº†é‡å¤ä»£ç ï¼Œè§£é™¤äº†æ–¹æ³•çš„ä¾èµ–<br>ä½†æ˜¯é…ç½®å˜å¾—ç¹çäº†<br>æ›´å¥½çš„æ–¹å¼ï¼Ÿâ€”â€”&gt;AOP</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueç¬”è®°02 Spring Boot+Vueå‰åç«¯åˆ†ç¦»å¼€å‘åŸºæœ¬æµç¨‹</title>
    <url>/2020/03/06/note-vue-02/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av85793766?p=1" target="_blank" rel="noopener">https://www.bilibili.com/video/av85793766?p=1</a></p>
</blockquote>
<hr>
<h1 id="Vueå·¥ç¨‹"><a href="#Vueå·¥ç¨‹" class="headerlink" title="Vueå·¥ç¨‹"></a>Vueå·¥ç¨‹</h1><h2 id="åˆ›å»º"><a href="#åˆ›å»º" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h2><p>vue uiåˆ›å»ºå·¥ç¨‹ï¼Œå¯¼å…¥Idea<br>(jsç‰ˆæœ¬å¤ªä½å¯èƒ½æœ‰è¯­æ³•æŠ¥é”™ï¼Œé…ç½®ä¸­æ”¹ä¸º6å³å¯)</p>
<p>å¯åŠ¨ï¼šnpm run serve<br>åœæ­¢ï¼šctrl+C</p>
<h2 id="å¼•å…¥é¡µé¢-amp-é…ç½®è·¯å¾„"><a href="#å¼•å…¥é¡µé¢-amp-é…ç½®è·¯å¾„" class="headerlink" title="å¼•å…¥é¡µé¢&amp;é…ç½®è·¯å¾„"></a>å¼•å…¥é¡µé¢&amp;é…ç½®è·¯å¾„</h2><p>router/index.jsä¸­å¼•å…¥.vue<br>App.vueä¸­é…ç½®router</p>
<h2 id="Book-vue"><a href="#Book-vue" class="headerlink" title="Book.vue"></a>Book.vue</h2><p>templateå°±æ˜¯htmlï¼Œscriptå°±æ˜¯jsï¼Œstyleå°±æ˜¯css<br>templateä¸­åªå…è®¸æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹<br>å‰ç«¯å¯ä»¥å…ˆç”¨å‡æ•°æ®ï¼Œå†™åœ¨scripté‡Œé¢</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div id=<span class="string">"showcase"</span>&gt;</span><br><span class="line">        &lt;table&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;ç¼–å·&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">                &lt;td&gt;åç§°&lt;/</span>td&gt;</span><br><span class="line">                &lt;td&gt;ä½œè€…&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>tr&gt;</span><br><span class="line">            &lt;tr v-<span class="keyword">for</span>=<span class="string">"item in books"</span>&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;item.id&#125;&#125;&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">                &lt;td&gt;&#123;&#123;item.name&#125;&#125;&lt;/</span>td&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;item.author&#125;&#125;&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>tr&gt;</span><br><span class="line">        &lt;<span class="regexp">/table&gt;</span></span><br><span class="line"><span class="regexp">        &#123;&#123;msg&#125;&#125;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">    export default &#123;</span></span><br><span class="line"><span class="regexp">        name: "Book",</span></span><br><span class="line"><span class="regexp">        data()&#123;</span></span><br><span class="line"><span class="regexp">            return&#123;</span></span><br><span class="line"><span class="regexp">                msg:'2019999999999999',</span></span><br><span class="line"><span class="regexp">                books:[</span></span><br><span class="line"><span class="regexp">                    &#123;</span></span><br><span class="line"><span class="regexp">                        id: 20200001,</span></span><br><span class="line"><span class="regexp">                        name: 'ç—…æ¯’æ˜Ÿçƒ',</span></span><br><span class="line"><span class="regexp">                        author: 'å¡å°”Â·é½é»˜'</span></span><br><span class="line"><span class="regexp">                    &#125;,</span></span><br><span class="line"><span class="regexp">                    &#123;</span></span><br><span class="line"><span class="regexp">                        id:20200002,</span></span><br><span class="line"><span class="regexp">                        name: 'æ´›åŸºå¯ç¤ºå½•',</span></span><br><span class="line"><span class="regexp">                        author: 'ä¹”å®‰å¦®Â·MÂ·å“ˆé‡Œæ–¯'</span></span><br><span class="line"><span class="regexp">                    &#125;,</span></span><br><span class="line"><span class="regexp">                    &#123;</span></span><br><span class="line"><span class="regexp">                        id:20200003,</span></span><br><span class="line"><span class="regexp">                        name: 'å¢å¼ºäººç±»',</span></span><br><span class="line"><span class="regexp">                        author: 'æµ·ä¼¦Â·å¸•å¸•æ‰¬å°¼æ–¯'</span></span><br><span class="line"><span class="regexp">                    &#125;</span></span><br><span class="line"><span class="regexp">                ]</span></span><br><span class="line"><span class="regexp">            &#125;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure>
<p>vueå¯ä»¥åŠ¨æ€åŠ è½½ï¼Œæ”¹å®Œä»£ç ä¸éœ€è¦é‡å¯ï¼Œç›´æ¥è®¿é—®å³å¯<br>è¯•äº†ä¸‹å¯ä»¥æ­£å¸¸è®¿é—®ï½</p>
<h1 id="Springå·¥ç¨‹"><a href="#Springå·¥ç¨‹" class="headerlink" title="Springå·¥ç¨‹"></a>Springå·¥ç¨‹</h1><h2 id="åˆ›å»º-1"><a href="#åˆ›å»º-1" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h2><p>Ideaä¸­Spring Initializré»˜è®¤æ¨¡ç‰ˆåˆ›å»º<br>ä¾èµ–å‹¾ä¸Šï¼šLombokã€Spring Webã€Spring Data JPAã€MySQL Driver</p>
<h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><p>è¿™é‡Œæ²¡æœ‰ç”¨application.propertiesï¼Œåˆ æ‰<br>æ–°å»ºapplication.ymlï¼Œå­˜æ”¾è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯</p>
<h2 id="æ•°æ®åº“å»ºè¡¨"><a href="#æ•°æ®åº“å»ºè¡¨" class="headerlink" title="æ•°æ®åº“å»ºè¡¨"></a>æ•°æ®åº“å»ºè¡¨</h2><p>ç”¨æä¾›çš„book.sqlå»ºbookè¡¨</p>
<h2 id="Book"><a href="#Book" class="headerlink" title="Book"></a>Book</h2><p>å’Œbookè¡¨å¯¹åº”ï¼ŒåŠ @Entityåï¼Œæ ¹æ®ç±»åå’Œè¡¨åå¯¹åº”ç»‘å®š<br>å†åŠ ä¸€ä¸ª@Dataï¼Œæ˜¯lombokçš„æ³¨è§£ï¼Œè‡ªåŠ¨ç”Ÿæˆget/set<br>å±æ€§åå’Œå˜é‡åå¯¹åº”ï¼Œè‡ªåŠ¨ç»‘å®š<br>idè¦åŠ ä¸€ä¸ª@Idï¼Œå®ƒæ˜¯ä¸»é”®</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="BookRepository"><a href="#BookRepository" class="headerlink" title="BookRepository"></a>BookRepository</h2><p>ç»§æ‰¿JpaRepositoryï¼Œ&lt;&gt;ä¸­ç¬¬ä¸€ä¸ªæ˜¯å®ä½“ç±»ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸»é”®ç±»å‹<br>æ¥å£ä¸­findAllç­‰æ–¹æ³•éƒ½æœ‰ï¼Œç›´æ¥ç”¨å°±è¡Œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BookRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Book</span>,<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æµ‹è¯•BookRepository"><a href="#æµ‹è¯•BookRepository" class="headerlink" title="æµ‹è¯•BookRepository"></a>æµ‹è¯•BookRepository</h2><p>ç„¶åæµ‹è¯•ä¸€ä¸‹<br>å»ºç«‹çš„Springå·¥ç¨‹è‡ªå¸¦ä¸€ä¸ªæµ‹è¯•ç±»BookstoreServerApplicationTests<br>æˆ–è€…è‡ªå·±åˆ›å»ºï¼Œåœ¨æ¥å£åä¸Šå³é”®-&gt;Go To-&gt;Test-&gt;Create New Test<br>ç»™ç”Ÿæˆçš„æµ‹è¯•ç±»åŠ ä¸€ä¸ª@SpringBootTestï¼Œè¦æµ‹è¯•çš„ç±»@Autowiredè‡ªåŠ¨æ³¨å…¥ï¼Œå†™çš„æ–¹æ³•åŠ ä¸€ä¸ª@Testï¼Œå°±å¯ä»¥è¿è¡Œäº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookRepositoryTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookRepository bookRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(bookRepository.findAll());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯•ä¸€ä¸‹<br><img src="/images/2020/20200306180717607.png"><br>æˆåŠŸ<br>ä¸”æ‰“å°äº†sqlè¯­å¥ï¼Œå› ä¸ºymlé‡Œé¢é…äº†jpa: show-sql: trueå’Œæ ¼å¼åŒ–</p>
<p>æ¯å†™ä¸€ä¸ªrepositoryå…ˆæµ‹ä¸€ä¸‹ï¼Œä¿è¯æ²¡é—®é¢˜å†ç»§ç»­å†™controller</p>
<h2 id="BookHandler"><a href="#BookHandler" class="headerlink" title="BookHandler"></a>BookHandler</h2><p>é…ä¸Šå¯¹åº”çš„æ³¨è§£å’Œmapping</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/book"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookRepository bookRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Book&gt; <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bookRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>è¿è¡ŒBookstoreServerApplicationå¯åŠ¨ç±»<br>æ³¨æ„æ­¤æ—¶ç«¯å£æ˜¯8181<br><img src="/images/2020/20200306181433240.png"><br>æ²¡æœ‰é—®é¢˜ï¼Œåç«¯å°±æå®šäº†<br>æ¥ä¸‹æ¥å‰åç«¯å¯¹æ¥å°±è¡Œ</p>
<h1 id="å¯¹æ¥"><a href="#å¯¹æ¥" class="headerlink" title="å¯¹æ¥"></a>å¯¹æ¥</h1><p>vueä¸­ajaxè¯·æ±‚ç”¨axiosç»„ä»¶<br>ï¼ˆå…ˆåœ¨å‘½ä»¤è¡ŒæŠŠæœåŠ¡åœæ‰ï¼Œå®‰è£…ï¼Œvue add axiosï¼‰<br>è£…å¥½ä¹‹åè‡ªåŠ¨æœ‰äº†src/plugins/axios.js</p>
<p>åˆ·æ–°é¡µé¢æ—¶è¯»å–æ•°æ®ï¼Œå¯ä»¥å†™åˆ°åˆå§‹åŒ–å‡½æ•°ä¸­ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">		created() &#123;</span><br><span class="line">            alert(<span class="number">123</span>)</span><br><span class="line">            axios.get(<span class="string">'http://localhost:8181/book/findAll/'</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">resp</span>)</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(resp)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>åˆ·æ–°ï¼Œçœ‹æµè§ˆå™¨çš„æ§åˆ¶å°<br>æœ‰ä¸ªè·¨åŸŸé—®é¢˜ï¼ˆ8181è®¿é—®8080ï¼‰ï¼Œå‰ç«¯åç«¯éƒ½å¯ä»¥è§£å†³<br>è¿™é‡Œåœ¨SpringBootä¸­è§£å†³<br>åªéœ€æ·»åŠ ä¸€ä¸ªé…ç½®ç±»ï¼Œé‡å†™addCorsMappingsæ–¹æ³•å³å¯ï¼ˆä¸ç”¨è®°ï¼Œå›ºå®šçš„ï¼Œè¦ç”¨çš„æ—¶å€™å¤åˆ¶å°±è¡Œï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CrosConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addMapping(<span class="string">"/**"</span>)</span><br><span class="line">                .allowedOrigins(<span class="string">"*"</span>)</span><br><span class="line">                .allowedMethods(<span class="string">"GET"</span>, <span class="string">"HEAD"</span>, <span class="string">"POST"</span>, <span class="string">"PUT"</span>, <span class="string">"DELETE"</span>, <span class="string">"OPTIONS"</span>)</span><br><span class="line">                .allowCredentials(<span class="keyword">true</span>)</span><br><span class="line">                .maxAge(<span class="number">3600</span>)</span><br><span class="line">                .allowedHeaders(<span class="string">"*"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡å¯ï¼Œå†è®¿é—®å°±å¥½äº†<br><img src="https://img-blog.csdnimg.cn/20200306185233941.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjMxOTQwOA==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åå†å›è°ƒå‡½æ•°ä¸­æŠŠdataæ‹¿åˆ°å°±è¡Œ<br>æ³¨æ„ï¼šä¸èƒ½ç›´æ¥ç”¨thisï¼Œå›è°ƒå‡½æ•°ä¸­thisæŒ‡çš„æ˜¯å›è°ƒï¼Œè€Œä¸æ˜¯å¤–é¢ï¼Œè¦å…ˆåœ¨å¤–é¢æ‹¿åˆ°this</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div id=<span class="string">"showcase"</span>&gt;</span><br><span class="line">        &lt;table&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;ç¼–å·&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;åç§°&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;ä½œè€…&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr v-<span class="keyword">for</span>=<span class="string">"item in books"</span>&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;item.id&#125;&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;item.name&#125;&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;item.author&#125;&#125;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export <span class="keyword">default</span> &#123;</span><br><span class="line">        name: <span class="string">"Book"</span>,</span><br><span class="line">        data()&#123;</span><br><span class="line">            <span class="keyword">return</span>&#123;</span><br><span class="line">                books:[]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        created() &#123;</span><br><span class="line">            <span class="keyword">const</span> _this = <span class="keyword">this</span></span><br><span class="line">            axios.get(<span class="string">'http://localhost:8181/book/findAll'</span>).then(function (resp)&#123;</span><br><span class="line">                _this.books = resp.data</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å‰åç«¯å°±è¿ä¸Šäº†<br><img src="/images/2020/20200306185851937.png"></p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ol>
<li>å†™å‰ç«¯ï¼Œç”¨åŠ æ•°æ®æµ‹è¯•</li>
<li>å†™åç«¯ï¼Œä¿è¯æ¥å£èƒ½è®¿é—®</li>
<li>è°ƒåç«¯ï¼ˆåç«¯è§£å†³è·¨åŸŸé—®é¢˜ï¼‰</li>
</ol>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueç¬”è®°01 @vue_cliç¯å¢ƒæ­å»º</title>
    <url>/2020/03/06/note-vue-01/</url>
    <content><![CDATA[<img src="/images/2020/20200306115323370.png">
åœ¨ç»å†äº†è¿™ä¹ˆå¤šå‘ä¹‹åç»ˆäºbuild succeededäº†
å¯å–œå¯è´º
æ•´ç†ä¸‹æˆåŠŸè·¯å¾„

<hr>
<p>ç‰ˆæœ¬ï¼š</p>
<ul>
<li>macOS Catalina 10.15.3</li>
<li>Homebrew 2.2.6</li>
<li>node v13.8.0</li>
<li>npm 6.13.7</li>
<li>@vue/cli 4.2.3</li>
</ul>
<hr>
<h2 id="1-å®‰è£…node"><a href="#1-å®‰è£…node" class="headerlink" title="1. å®‰è£…node"></a>1. å®‰è£…node</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">brew install node</span><br></pre></td></tr></table></figure>
<p>å‘ï¼šbrewå·¨æ…¢æ— æ¯”<br>è§£å†³ï¼šæ¢æ¸…åé•œåƒ</p>
<blockquote>
<p><a href="https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/</a></p>
</blockquote>
<h2 id="2-å®‰è£…-vue-cli"><a href="#2-å®‰è£…-vue-cli" class="headerlink" title="2. å®‰è£…@vue/cli"></a>2. å®‰è£…@vue/cli</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo npm install -g @vue&#x2F;cli</span><br></pre></td></tr></table></figure>
<p>å‘ï¼šæ²¡æœ‰æƒé™<br>è§£å†³ï¼šsudo</p>
<blockquote>
<p><a href="https://www.jianshu.com/p/0207ee424422" target="_blank" rel="noopener">https://www.jianshu.com/p/0207ee424422</a></p>
</blockquote>
<p>å‘ï¼šæ–°æ—§ç‰ˆæœ¬åå­—ä¸ä¸€æ ·<br>è§£å†³ï¼š@vue/cliï¼ˆä¸æ˜¯vue-cliï¼‰</p>
<blockquote>
<p><a href="https://cli.vuejs.org/zh/guide/installation.html" target="_blank" rel="noopener">https://cli.vuejs.org/zh/guide/installation.html</a></p>
</blockquote>
<h2 id="3-åˆ›å»ºé¡¹ç›®"><a href="#3-åˆ›å»ºé¡¹ç›®" class="headerlink" title="3. åˆ›å»ºé¡¹ç›®"></a>3. åˆ›å»ºé¡¹ç›®</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vue ui</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç¬”è®°08 Springæ•´åˆJunit</title>
    <url>/2020/03/04/note-spring-08/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p44ï½45 </p>
</blockquote>
<hr>
<p>ç”¨äºè§£å†³ä¹‹å‰æµ‹è¯•æ—¶çš„é‡å¤ä»£ç </p>
<p>åŸæœ¬çš„AccountServiceTestä¸­ï¼Œæ¯ä¸ªæ–¹æ³•ä¸­éƒ½æœ‰æ­¥éª¤1å’Œ2</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCreate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.è·å–å®¹å™¨</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.å¾—åˆ°ä¸šåŠ¡å±‚å¯¹è±¡</span></span><br><span class="line">        IAccountService as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setName(<span class="string">"eee"</span>);</span><br><span class="line">        account.setMoney(<span class="number">10000f</span>);</span><br><span class="line">        as.createAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.è·å–å®¹å™¨</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.å¾—åˆ°ä¸šåŠ¡å±‚å¯¹è±¡</span></span><br><span class="line">        IAccountService as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        as.deleteAccount(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨init()å¯ä»¥å°†é‡å¤ä»£ç æŠ½å‡ºæ¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ApplicationContext ac;</span><br><span class="line">    <span class="keyword">private</span> IAccountService as;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.è·å–å®¹å™¨</span></span><br><span class="line">        ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.å¾—åˆ°ä¸šåŠ¡å±‚å¯¹è±¡</span></span><br><span class="line">        as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCreate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setName(<span class="string">"eee"</span>);</span><br><span class="line">        account.setMoney(<span class="number">10000f</span>);</span><br><span class="line">        as.createAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span></span>&#123;</span><br><span class="line">        as.deleteAccount(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å¹¶æ²¡æœ‰æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜<br>å¼€å‘å’Œæµ‹è¯•çš„ä»£ç ä»åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œéœ€è¦è¿›ä¸€æ­¥è§£è€¦</p>
<p>å¦‚æœä¸è¦init()ï¼Œåªåœ¨å˜é‡ä¸ŠåŠ @Autowiredæ²¡æœ‰ç”¨<br>ä¸€æ³¢åˆ†æï¼š<br><img src="/images/2020/20200304194906403.png" width=600></p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<ol>
<li><p>pom.xmlä¸­å¯¼å…¥springæ•´åˆjunitçš„ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¸”ï¼šä½¿ç”¨spring 5.xæ—¶ï¼Œjuintéœ€è¦4.12ä»¥ä¸Šçš„ç‰ˆæœ¬</p>
</li>
<li><p>ä½¿ç”¨junitçš„@RunWithæ³¨è§£å°†åŸæœ‰çš„main()æ›¿æ¢æˆspringæä¾›çš„</p>
</li>
<li><p>ç”¨@ContextConfigurationå‘ŠçŸ¥springçš„è¿è¡Œå™¨ï¼ŒåŸºäºxmlè¿˜æ˜¯æ³¨è§£ï¼Œå¹¶è¯´æ˜ä½ç½®<br>locationsï¼šæŒ‡å®šxmlæ–‡ä»¶çš„ä½ç½®ï¼ŒåŠ ä¸Šclasspathå…³é”®å­—ï¼Œè¡¨ç¤ºåœ¨ç±»è·¯å¾„ä¸‹<br>classesï¼šæŒ‡å®šæ³¨é‡Šç±»æ‰€åœ¨çš„ä½ç½®</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">ContextConfiguration</span>(<span class="title">locations</span> </span>= <span class="string">"classpath:beans.xml"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountService as;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCreate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setName(<span class="string">"eee"</span>);</span><br><span class="line">        account.setMoney(<span class="number">10000f</span>);</span><br><span class="line">        as.createAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å³å¯æ­£å¸¸æ‰§è¡Œ</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç¬”è®°07 åŸºäºæ³¨è§£çš„IoCæ¡ˆä¾‹ï¼ˆå®ç°CRUDï¼‰</title>
    <url>/2020/03/04/note-spring-07/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931?p=38" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931?p=38</a></p>
</blockquote>
<hr>
<h1 id="æ•°æ®åº“éƒ¨åˆ†"><a href="#æ•°æ®åº“éƒ¨åˆ†" class="headerlink" title="æ•°æ®åº“éƒ¨åˆ†"></a>æ•°æ®åº“éƒ¨åˆ†</h1><p>ç»§ç»­ç”¨ä¸Šæ¬¡çš„è¡¨<br><img src="/images/2020/20200304181444129.png" width=200></p>
<hr>
<h1 id="åœ¨åŸºäºxmlçš„æ¡ˆä¾‹ä¸Šä¿®æ”¹"><a href="#åœ¨åŸºäºxmlçš„æ¡ˆä¾‹ä¸Šä¿®æ”¹" class="headerlink" title="åœ¨åŸºäºxmlçš„æ¡ˆä¾‹ä¸Šä¿®æ”¹"></a>åœ¨åŸºäºxmlçš„æ¡ˆä¾‹ä¸Šä¿®æ”¹</h1><p>ï¼ˆåŠ ä¸Šæ•´åˆjunitçš„éƒ¨åˆ†ï¼Œå…·ä½“è®°å½•åœ¨ç¬”è®°8ï¼‰</p>
<p>pom.xmlåŠ ä¸Šæ•´åˆjunitéœ€è¦çš„ä¾èµ–spring-test<br>junitç‰ˆæœ¬4.12åŠä»¥ä¸Š</p>
<p>beans.xmlåç§°ç©ºé—´éœ€è¦ä¿®æ”¹<br>åœ¨Springæ–‡æ¡£ä¸­æœç´¢xmlns:contextï¼ˆåŸºäºxmlæ—¶æ˜¯xmlnsï¼‰æ‰¾åç§°ç©ºé—´<br>é…ç½®Serviceå’ŒDaoçš„éƒ¨åˆ†å¯ä»¥ä¸è¦äº†<br>åŠ ä¸Šcomponent-scanå‘ŠçŸ¥Springåœ¨åˆ›å»ºå®¹å™¨æ—¶è¦æ‰«æçš„åŒ…</p>
<p>å®ä½“ç±»ã€æ¥å£æ²¡æœ‰å˜åŒ–</p>
<p>ä¸šåŠ¡å±‚å®ç°ç±»AccountServiceImplåŠ æ³¨è§£<br>@Service(â€œaccountServiceâ€)<br>å˜é‡accountDaoä¸ŠåŠ æ³¨è§£ï¼Œç”±äºåªæœ‰ä¸€ä¸ªAccountDaoï¼Œå¯ä»¥ç”¨@Autowired<br>å¯¹åº”çš„setæ–¹æ³•å¯ä»¥åˆ æ‰</p>
<p>æŒä¹…å±‚å®ç°ç±»AccountDaoImplåŠ æ³¨è§£<br>@Repository(â€œaccountDaoâ€)<br>runneråŒæ ·ç”¨@Autowiredï¼Œsetæ–¹æ³•åˆ æ‰</p>
<p>æµ‹è¯•ç±»æ”¹ä¸ºæ•´åˆjunitçš„å†™æ³•</p>
<hr>
<h1 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h1><h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><img src="/images/2020/20200304183227273.png" width=300>

<h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.coconutnut<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>day02_02_account_xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    æ‰“æˆjaråŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    åŠ å…¥ä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        spring--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    	<span class="comment">&lt;!--    	springæ•´åˆjunit--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--        dbutils--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--        mysqlé©±åŠ¨--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--        jdbcè¿æ¥æ± --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--    junitæµ‹è¯•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="beans-xml"><a href="#beans-xml" class="headerlink" title="beans.xml"></a>beans.xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    å‘ŠçŸ¥Springåœ¨åˆ›å»ºå®¹å™¨æ—¶è¦æ‰«æçš„åŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.cc"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    é…ç½®QueryRunnerï¼ˆå¤šä¾‹ï¼‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"runner"</span> <span class="attr">class</span>=<span class="string">"org.apache.commons.dbutils.QueryRunner"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        æ³¨å…¥æ•°æ®æºï¼ˆæ²¡æœ‰setæ–¹æ³•ï¼Œåªèƒ½æ„é€ å‡½æ•°æ³¨å…¥ï¼‰--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"ds"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    é…ç½®æ•°æ®æº--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        æ³¨å…¥è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/groot?characterEncoding=utf8"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"iamgroot"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="å®ä½“ç±»"><a href="#å®ä½“ç±»" class="headerlink" title="å®ä½“ç±»"></a>å®ä½“ç±»</h2><p>Account.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·çš„å®ä½“ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Float money;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Float <span class="title">getMoney</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMoney</span><span class="params">(Float money)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.money = money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Account&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", money="</span> + money +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸šåŠ¡å±‚"><a href="#ä¸šåŠ¡å±‚" class="headerlink" title="ä¸šåŠ¡å±‚"></a>ä¸šåŠ¡å±‚</h2><p>IAccountService.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·çš„ä¸šåŠ¡å±‚æ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> account</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> accountId</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ”¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> account</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥ä¸€ä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> accountId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥æ‰€æœ‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AccountServiceImpl.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.dao.IAccountDao;</span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"><span class="keyword">import</span> com.cc.service.IAccountService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·çš„ä¸šåŠ¡å±‚å®ç°ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        accountDao.createAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        accountDao.deleteAccount(accountId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        accountDao.updateAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.retrieveAccountById(accountId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.retrieveAllAccounts();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æŒä¹…å±‚"><a href="#æŒä¹…å±‚" class="headerlink" title="æŒä¹…å±‚"></a>æŒä¹…å±‚</h2><p>IAccountDao.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·çš„æŒä¹…å±‚æ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AccountDaoImpl.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.dao.IAccountDao;</span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.QueryRunner;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanListHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·çš„æŒä¹…å±‚å®ç°ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Repository</span>(<span class="string">"accountDao"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountDaoImpl</span> <span class="keyword">implements</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> QueryRunner runner;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            runner.update(<span class="string">"insert into account(name,money) values(?,?)"</span>, account.getName(), account.getMoney());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            runner.update(<span class="string">"delete from account where id = ?"</span>, accountId);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            runner.update(<span class="string">"update account set name = ?, money = ? where id = ?"</span>, account.getName(), account.getMoney(),account.getId());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> runner.query(<span class="string">"select * from account where id = ?"</span>, <span class="keyword">new</span> BeanHandler&lt;Account&gt;(Account<span class="class">.<span class="keyword">class</span>), <span class="title">accountId</span>)</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> runner.query(<span class="string">"select * from account"</span>, <span class="keyword">new</span> BeanListHandler&lt;Account&gt;(Account<span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æµ‹è¯•æ–¹æ³•"><a href="#æµ‹è¯•æ–¹æ³•" class="headerlink" title="æµ‹è¯•æ–¹æ³•"></a>æµ‹è¯•æ–¹æ³•</h2><p>AccountServiceTest.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"><span class="keyword">import</span> com.cc.service.IAccountService;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨Junitæµ‹è¯•é…ç½®</span></span><br><span class="line"><span class="comment"> * Springæ•´åˆJunitçš„é…ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">ContextConfiguration</span>(<span class="title">locations</span> </span>= <span class="string">"classpath:beans.xml"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountService as;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCreate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setName(<span class="string">"eee"</span>);</span><br><span class="line">        account.setMoney(<span class="number">10000f</span>);</span><br><span class="line">        as.createAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span></span>&#123;</span><br><span class="line">        as.deleteAccount(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Account account = as.retrieveAccountById(<span class="number">3</span>);</span><br><span class="line">        account.setMoney(<span class="number">3000f</span>);</span><br><span class="line">        as.updateAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRetrieveOne</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Account account = as.retrieveAccountById(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRetrieveAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Account&gt; accounts = as.retrieveAllAccounts();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(Account account : accounts)&#123;</span><br><span class="line">            System.out.println(account);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h1><p>testRetrieveAll()<br><img src="/images/2020/20200304182802930.png" width=800></p>
<p>testRetrieveOne()<br><img src="/images/2020/20200304182924177.png" width=800></p>
<p>testCreate()<br><img src="/images/2020/20200304183005488.png" width=200></p>
<p>testDelete()<br><img src="/images/2020/20200304183052388.png" width=200></p>
<p>testUpdate()<br><img src="/images/2020/20200304183142618.png" width=200></p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç¬”è®°06 åŸºäºxmlçš„IoCæ¡ˆä¾‹ï¼ˆå®ç°CRUDï¼‰</title>
    <url>/2020/03/04/note-spring-06/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p35~37</p>
</blockquote>
<hr>
<h1 id="æ•°æ®åº“éƒ¨åˆ†"><a href="#æ•°æ®åº“éƒ¨åˆ†" class="headerlink" title="æ•°æ®åº“éƒ¨åˆ†"></a>æ•°æ®åº“éƒ¨åˆ†</h1><p>mysqlä¸­å»ºä¸€å¼ accountè¡¨<br><img src="/images/2020/20200304160612648.png" width=200></p>
<hr>
<h1 id="mavenå·¥ç¨‹"><a href="#mavenå·¥ç¨‹" class="headerlink" title="mavenå·¥ç¨‹"></a>mavenå·¥ç¨‹</h1><h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><img src="/images/2020/20200304180408780.png" width=300>

<h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.coconutnut<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>day02_02_account_xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    æ‰“æˆjaråŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    åŠ å…¥ä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        spring--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        dbutils--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        mysqlé©±åŠ¨--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        jdbcè¿æ¥æ± --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    junitæµ‹è¯•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="å®ä½“ç±»"><a href="#å®ä½“ç±»" class="headerlink" title="å®ä½“ç±»"></a>å®ä½“ç±»</h2><p>Account.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·çš„å®ä½“ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Float money;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Float <span class="title">getMoney</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMoney</span><span class="params">(Float money)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.money = money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Account&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", money="</span> + money +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸šåŠ¡å±‚"><a href="#ä¸šåŠ¡å±‚" class="headerlink" title="ä¸šåŠ¡å±‚"></a>ä¸šåŠ¡å±‚</h2><p>IAccountService.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·çš„ä¸šåŠ¡å±‚æ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> account</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> accountId</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ”¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> account</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥ä¸€ä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> accountId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥æ‰€æœ‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AccountServiceImpl.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.dao.IAccountDao;</span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"><span class="keyword">import</span> com.cc.service.IAccountService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·çš„ä¸šåŠ¡å±‚å®ç°ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IAccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAccountDao</span><span class="params">(IAccountDao accountDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.accountDao = accountDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        accountDao.createAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        accountDao.deleteAccount(accountId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        accountDao.updateAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.retrieveAccountById(accountId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.retrieveAllAccounts();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æŒä¹…å±‚"><a href="#æŒä¹…å±‚" class="headerlink" title="æŒä¹…å±‚"></a>æŒä¹…å±‚</h2><p>IAccountDao.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·çš„æŒä¹…å±‚æ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AccountDaoImpl.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.dao.IAccountDao;</span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.QueryRunner;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanListHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·çš„æŒä¹…å±‚å®ç°ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountDaoImpl</span> <span class="keyword">implements</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> QueryRunner runner;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRunner</span><span class="params">(QueryRunner runner)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.runner = runner;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            runner.update(<span class="string">"insert into account(name,money) values(?,?)"</span>, account.getName(), account.getMoney());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            runner.update(<span class="string">"delete from account where id = ?"</span>, accountId);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            runner.update(<span class="string">"update account set name = ?, money = ? where id = ?"</span>, account.getName(), account.getMoney(),account.getId());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> runner.query(<span class="string">"select * from account where id = ?"</span>, <span class="keyword">new</span> BeanHandler&lt;Account&gt;(Account<span class="class">.<span class="keyword">class</span>), <span class="title">accountId</span>)</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> runner.query(<span class="string">"select * from account"</span>, <span class="keyword">new</span> BeanListHandler&lt;Account&gt;(Account<span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="beans-xml"><a href="#beans-xml" class="headerlink" title="beans.xml"></a>beans.xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®Service--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.cc.service.impl.AccountServiceImpl"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥Dao--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"accountDao"</span> <span class="attr">ref</span>=<span class="string">"accountDao"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--    é…ç½®Dao--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountDao"</span> <span class="attr">class</span>=<span class="string">"com.cc.dao.impl.AccountDaoImpl"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥QueryRunner--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"runner"</span> <span class="attr">ref</span>=<span class="string">"runner"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--    é…ç½®QueryRunnerï¼ˆå¤šä¾‹ï¼‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"runner"</span> <span class="attr">class</span>=<span class="string">"org.apache.commons.dbutils.QueryRunner"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥æ•°æ®æºï¼ˆæ²¡æœ‰setæ–¹æ³•ï¼Œåªèƒ½æ„é€ å‡½æ•°æ³¨å…¥ï¼‰--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"ds"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®æ•°æ®æº--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ³¨å…¥è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/groot?characterEncoding=utf8"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"iamgroot"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="æµ‹è¯•æ–¹æ³•"><a href="#æµ‹è¯•æ–¹æ³•" class="headerlink" title="æµ‹è¯•æ–¹æ³•"></a>æµ‹è¯•æ–¹æ³•</h2><p>AccountServiceTest.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"><span class="keyword">import</span> com.cc.service.IAccountService;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨Junitæµ‹è¯•é…ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCreate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.è·å–å®¹å™¨</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.å¾—åˆ°ä¸šåŠ¡å±‚å¯¹è±¡</span></span><br><span class="line">        IAccountService as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setName(<span class="string">"ddd"</span>);</span><br><span class="line">        account.setMoney(<span class="number">10f</span>);</span><br><span class="line">        as.createAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.è·å–å®¹å™¨</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.å¾—åˆ°ä¸šåŠ¡å±‚å¯¹è±¡</span></span><br><span class="line">        IAccountService as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        as.deleteAccount(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.è·å–å®¹å™¨</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.å¾—åˆ°ä¸šåŠ¡å±‚å¯¹è±¡</span></span><br><span class="line">        IAccountService as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        Account account = as.retrieveAccountById(<span class="number">1</span>);</span><br><span class="line">        account.setMoney(<span class="number">2000f</span>);</span><br><span class="line">        as.updateAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRetrieveOne</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.è·å–å®¹å™¨</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.å¾—åˆ°ä¸šåŠ¡å±‚å¯¹è±¡</span></span><br><span class="line">        IAccountService as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        Account account = as.retrieveAccountById(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRetrieveAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.è·å–å®¹å™¨</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.å¾—åˆ°ä¸šåŠ¡å±‚å¯¹è±¡</span></span><br><span class="line">        IAccountService as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        List&lt;Account&gt; accounts = as.retrieveAllAccounts();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(Account account : accounts)&#123;</span><br><span class="line">            System.out.println(account);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h1><p>testRetrieveAll()<br><img src="/images/2020/20200304174231997.png" width=800></p>
<p>testRetrieveOne()<br><img src="/images/2020/20200304174150392.png" width=800></p>
<p>testCreate()<br><img src="/images/2020/20200304175250925.png" width=200></p>
<p>testDelete()<br><img src="/images/2020/2020030417540352.png" width=200></p>
<p>testUpdate()<br><img src="/images/2020/20200304175530135.png" width=200></p>
<hr>
<h1 id="é‡åˆ°çš„bug"><a href="#é‡åˆ°çš„bug" class="headerlink" title="é‡åˆ°çš„bug"></a>é‡åˆ°çš„bug</h1><p>æ‰§è¡ŒtestRetrieveAll()æ—¶</p>
<p>==BUG01==</p>
<pre><code>è­¦å‘Š: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;accountService&apos; defined in class path resource [beans.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property &apos;accountDao &apos; of bean class [com.cc.service.impl.AccountServiceImpl]: Bean property &apos;accountDao &apos; is not writable or has an invalid setter method. Did you mean &apos;accountDao&apos;?

org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;accountService&apos; defined in class path resource [beans.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property &apos;accountDao &apos; of bean class [com.cc.service.impl.AccountServiceImpl]: Bean property &apos;accountDao &apos; is not writable or has an invalid setter method. Did you mean &apos;accountDao&apos;?

at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1650)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1357)
...</code></pre><p>å…¶ä¸­</p>
<pre><code>Bean property &apos;accountDao &apos; is not writable or has an invalid setter method. Did you mean &apos;accountDao&apos;?</code></pre><p>å‘ç°å¤šæ‰“äº†ä¸ªç©ºæ ¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">beans.xmlä¸­</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"accountDao "</span> <span class="attr">ref</span>=<span class="string">"accountDao"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">æ”¹ä¸º</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"accountDao"</span> <span class="attr">ref</span>=<span class="string">"accountDao"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ”¹è¿‡æ¥ä¹‹å</p>
<p>==BUG02==</p>
<pre><code>è­¦å‘Š: com.mchange.v2.resourcepool.BasicResourcePool$ScatteredAcquireTask@63fd9b65 -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception: 
java.sql.SQLException: Unknown initial character set index &apos;255&apos; received from server. Initial client character set can be forced via the &apos;characterEncoding&apos; property.
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)
...</code></pre><p>ä¼¼ä¹æ˜¯ç¼–ç é—®é¢˜</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">beans.xmlä¸­</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/groot"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">æ”¹ä¸º</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/groot?characterEncoding=utf8"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ”¹äº†ä¹‹å</p>
<p>==BUG03==</p>
<pre><code>è­¦å‘Š: com.mchange.v2.resourcepool.BasicResourcePool$ScatteredAcquireTask@4879bf70 -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception: 
java.sql.SQLException: Unknown system variable &apos;tx_isolation&apos;
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)</code></pre><p>æŸ¥ä¸€ä¸‹è§£å†³æ–¹å•Š</p>
<blockquote>
<p><a href="https://blog.csdn.net/always_younger/article/details/80421783" target="_blank" rel="noopener">https://blog.csdn.net/always_younger/article/details/80421783</a></p>
</blockquote>
<p>è¯´æ˜¯mysql-connector-javaç‰ˆæœ¬å¤ªä½çš„åŸå› </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">pom.xmlä¸­</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">æ”¹ä¸º</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰ä¸€ç‚¹å°é—®é¢˜</p>
<pre><code>Loading class `com.mysql.jdbc.Driver&apos;. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver&apos;. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.</code></pre><p>æŠŠè¿‡æ—¶çš„ç±»æ¢æ‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">beans.xmlä¸­</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">æ”¹ä¸º</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å°±å¥½äº†ï¼</p>
<pre><code>Account{id=1, name=&apos;aaa&apos;, money=1000.0}
Account{id=2, name=&apos;bbb&apos;, money=1000.0}
Account{id=3, name=&apos;ccc&apos;, money=1000.0}

Process finished with exit code 0</code></pre>]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºé—®é¢˜</title>
    <url>/2020/02/29/exercise/</url>
    <content><![CDATA[<p>æ€è·¯ï¼šåŠ¨æ€è§„åˆ’</p>
<p>dp[ i ][ j ][ k ]<br>i - åˆ°ç¬¬ i å¤©<br>j - æœ€å¤šäº¤æ˜“ j æ¬¡<br>k - 0:å½“å‰æŒè‚¡ / 1:å½“å‰ä¸æŒè‚¡</p>
<p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; ç¬¬iå¤©ï¼Œæœ€å¤šäº¤æ˜“jæ¬¡ï¼Œå½“å‰ä¸æŒè‚¡</span><br><span class="line">dp[i][j][0] &#x3D; MAX&#123;</span><br><span class="line">	dp[i-1][j][0],                 &#x2F;&#x2F; æœ¬æ¬¡ä¸æŒ-ä¸Šæ¬¡å°±ä¸æŒ</span><br><span class="line">	dp[i-1][j-1][1] + å·®ä»·          &#x2F;&#x2F; æœ¬æ¬¡ä¸æŒ-æœ¬æ¬¡å–</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; ç¬¬iå¤©ï¼Œæœ€å¤šäº¤æ˜“jæ¬¡ï¼Œå½“å‰æŒè‚¡</span><br><span class="line">dp[i][j][1] &#x3D; MAX&#123;</span><br><span class="line">	dp[i-1][j][0],                &#x2F;&#x2F; æœ¬æ¬¡æŒ-æœ¬æ¬¡ä¹°</span><br><span class="line">	dp[i-1][j][1] + å·®ä»·           &#x2F;&#x2F; æœ¬æ¬¡æŒ-ä¸Šæ¬¡å°±æŒ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®ç°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getdp</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j,<span class="keyword">int</span> k,<span class="keyword">int</span>[][][] dp,<span class="keyword">int</span>[] prices)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(dp[i][j][k]==-<span class="number">1</span>)&#123;</span><br><span class="line">		<span class="keyword">if</span>(i&lt;<span class="number">1</span>)&#123;</span><br><span class="line">			dp[i][j][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">			dp[i][j][<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="comment">// æœ¬æ¬¡ä¸æŒ-ä¸Šæ¬¡å°±ä¸æŒ</span></span><br><span class="line">			<span class="keyword">int</span> dp1 = getdp(i-<span class="number">1</span>,j,<span class="number">0</span>,dp,prices);</span><br><span class="line">			<span class="comment">// æœ¬æ¬¡ä¸æŒ-æœ¬æ¬¡å–</span></span><br><span class="line">			<span class="keyword">int</span> dp2 = j&gt;<span class="number">0</span> ? getdp(i-<span class="number">1</span>,j-<span class="number">1</span>,<span class="number">1</span>,dp,prices)+prices[i]-prices[i-<span class="number">1</span>] : <span class="number">0</span>;</span><br><span class="line">			dp[i][j][<span class="number">0</span>] = Math.max(dp1,dp2);</span><br><span class="line">           </span><br><span class="line">			<span class="comment">// æœ¬æ¬¡æŒ-æœ¬æ¬¡ä¹°</span></span><br><span class="line">			<span class="keyword">int</span> dp3 = getdp(i-<span class="number">1</span>,j,<span class="number">0</span>,dp,prices);</span><br><span class="line">			<span class="comment">// æœ¬æ¬¡æŒ-ä¸Šæ¬¡å°±æŒ</span></span><br><span class="line">			<span class="keyword">int</span> dp4 = getdp(i-<span class="number">1</span>,j,<span class="number">1</span>,dp,prices)+prices[i]-prices[i-<span class="number">1</span>];</span><br><span class="line">			dp[i][j][<span class="number">1</span>] = Math.max(dp3,dp4);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">	<span class="keyword">return</span> dp[i][j][k];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‘ï¼šå½“kå¾ˆå¤§æ—¶ï¼Œå†…å­˜ä¼šçˆ†ï¼Œæ­¤æ—¶ç›¸å½“äºä¸é™åˆ¶äº¤æ˜“æ¬¡æ•°ï¼Œç›´æ¥ç”¨è´ªå¿ƒè§£å†³</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span>[] prices)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(prices.length&lt;<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(k &gt; prices.length/<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="comment">// ç›¸å½“äºä¸é™åˆ¶æ¬¡æ•°ï¼Œè´ªå¿ƒ</span></span><br><span class="line">            <span class="keyword">int</span> value = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;prices.length;i++)&#123;</span><br><span class="line">                value += prices[i]&gt;prices[i-<span class="number">1</span>] ? prices[i]-prices[i-<span class="number">1</span>] : <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[][][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[prices.length][k+<span class="number">1</span>][<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;prices.length;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;k+<span class="number">1</span>;j++)&#123;</span><br><span class="line">                Arrays.fill(dp[i][j],-<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> getdp(prices.length-<span class="number">1</span>,k,<span class="number">0</span>,dp,prices);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getdp</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j,<span class="keyword">int</span> k,<span class="keyword">int</span>[][][] dp,<span class="keyword">int</span>[] prices)</span></span>&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>ç”¨è¿™ä¸€å¥—è§£æ³•å¹²æ‰4é¢˜</p>
<p>Leetcode 121 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº â€”â€” æœ€å¤šäº¤æ˜“1æ¬¡<br>ä»¤ k = 1</p>
<p>Leetcode 122 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II â€”â€” ä¸é™æ¬¡æ•°<br>ç›´æ¥è´ªå¿ƒ</p>
<p>Leetcode 123 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III â€”â€” æœ€å¤šäº¤æ˜“2æ¬¡<br>ä»¤ k = 2</p>
<p>Leetcode 188 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV â€”â€” æœ€å¤šäº¤æ˜“kæ¬¡</p>
]]></content>
      <categories>
        <category>Exercise</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç¬”è®°05 IoC</title>
    <url>/2020/02/28/note-spring-05/</url>
    <content><![CDATA[<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p15ï½34</p>
<hr>
<h1 id="IoCçš„æ¦‚å¿µå’Œä½œç”¨"><a href="#IoCçš„æ¦‚å¿µå’Œä½œç”¨" class="headerlink" title="IoCçš„æ¦‚å¿µå’Œä½œç”¨"></a>IoCçš„æ¦‚å¿µå’Œä½œç”¨</h1><p>ä¸Šæ¬¡å·¥å‚æ¨¡å¼ä¸­åˆ›å»ºå¯¹è±¡æœ‰2ç§æ–¹å¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–¹å¼1</span></span><br><span class="line">IAccountService as = <span class="keyword">new</span> AccountServiceImpl();</span><br><span class="line"><span class="comment">// æ–¹å¼2</span></span><br><span class="line">IAccountService as = (IAccountService) BeanFactory.getBean(<span class="string">"accountService"</span>);</span><br></pre></td></tr></table></figure>
<p>æ–¹å¼1æ˜¯ä¸»åŠ¨çš„ï¼›æ–¹å¼2æ˜¯è¢«åŠ¨çš„ï¼ˆæ ¹æ®é…ç½®åˆ›å»ºï¼‰ï¼Œæ§åˆ¶æƒè½¬ç§»ç»™äº†å·¥å‚</p>
<p><strong>IoC (Inversion of Control æ§åˆ¶åè½¬)æŠŠåˆ›å»ºå¯¹è±¡çš„æƒåˆ©äº¤ç»™æ¡†æ¶</strong><br><strong>å…¶ä½œç”¨æ˜¯é™ä½ç¨‹åºçš„è€¦åˆ</strong><br>ä½†åªèƒ½æ˜¯é™ä½ï¼Œè€Œä¸èƒ½å®Œå…¨æ¶ˆé™¤ã€‚å¦‚æœä¸¤ä¸ªç±»ä¹‹é—´ä»»ä½•å…³ç³»éƒ½æ²¡æœ‰ï¼Œé‚£æœ‰ä¸€ä¸ªç±»ä¸€å®šæ˜¯å¤šä½™çš„ã€‚<br>è‡ªå·±å†™æ—¶ç”¨å·¥å‚æ¨¡å¼å®ç°ï¼ŒSpringä¸­çš„Iocå¦‚ä½•å®ç°ï¼Ÿ</p>
<hr>
<h1 id="Springä¸­çš„IoC"><a href="#Springä¸­çš„IoC" class="headerlink" title="Springä¸­çš„IoC"></a>Springä¸­çš„IoC</h1><p><strong>æ§åˆ¶åè½¬ Inversion of Control, IoC</strong></p>
<p>è§£å†³çš„é—®é¢˜ï¼šé™ä½ç¨‹åºè€¦åˆï¼ˆå‡å°‘ä¾èµ–å…³ç³»ï¼‰<br>è§£å†³çš„æ–¹æ³•ï¼šä½¿ç”¨é…ç½®çš„æ–¹å¼</p>
<h2 id="1-å¯¼å…¥ä¾èµ–"><a href="#1-å¯¼å…¥ä¾èµ–" class="headerlink" title="1.å¯¼å…¥ä¾èµ–"></a>1.å¯¼å…¥ä¾èµ–</h2><p>å¯¼å…¥Springä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æŸ¥çœ‹å¼•å…¥çš„ä¾èµ–<br><img src="/images/2020/20200228105855284.png" width=400>  <img src="/images/2020/20200228110642475.png" width=500><br>åŒ…å«äº†å¸¸ç”¨çš„æ ¸å¿ƒç»„ä»¶<br><img src="/images/2020/20200228110023357.png" width=400></p>
<p>Core Containerç®€å•çš„è¯´å°±æ˜¯ä¸€ä¸ªMapï¼Œå°è£…äº†è¦ç”¨çš„å¯¹è±¡</p>
<h2 id="2-åˆ›å»ºé…ç½®æ–‡ä»¶-amp-å¯¼å…¥çº¦æŸ-amp-é…ç½®bean"><a href="#2-åˆ›å»ºé…ç½®æ–‡ä»¶-amp-å¯¼å…¥çº¦æŸ-amp-é…ç½®bean" class="headerlink" title="2.åˆ›å»ºé…ç½®æ–‡ä»¶&amp;å¯¼å…¥çº¦æŸ&amp;é…ç½®bean"></a>2.åˆ›å»ºé…ç½®æ–‡ä»¶&amp;å¯¼å…¥çº¦æŸ&amp;é…ç½®bean</h2><p>ç„¶ååˆ›å»ºbean.xmlï¼ˆæ²¡æœ‰å›ºå®šè¦æ±‚ï¼Œä¹ æƒ¯è¿™æ ·å‘½åï¼Œå› ä¸ºæ˜¯ç®¡beansçš„ï¼‰<br>åœ¨spring-framework-5.0.2.RELEASE-docs/spring-framework-referenceæ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°index.html<br><img src="/images/2020/20200228111723489.png" width=800><br>ç‚¹coreï¼Œæœç´¢xmlnsï¼ˆå¯¼å…¥xml schemaçº¦æŸçš„å…³é”®å­—ï¼‰<br><img src="/images/2020/20200228111921799.png" width=800><br>æŠŠå®ƒå¤åˆ¶ç²˜è´´åˆ°é…ç½®æ–‡ä»¶ä¸­</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é…ç½®beanï¼ŒæŠŠå¯¹è±¡çš„åˆ›å»ºäº¤ç»™Springæ¥ç®¡ç†<br>åŒå·¥å‚æ¨¡å¼ï¼Œéœ€è¦å”¯ä¸€æ ‡å¿—å’Œå¯¹è±¡çš„å…¨é™å®šç±»åï¼ˆåŒ…å+ç±»åï¼‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountDao"</span> <span class="attr">class</span>=<span class="string">"com.itheima.dao.impl.AccountDaoImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å‰©ä¸‹çš„è§£æé…ç½®æ–‡ä»¶çš„äº‹å°±ç”±Springåšäº†</p>
<h2 id="3-å–å‡ºå®¹å™¨-amp-è·å–å¯¹è±¡"><a href="#3-å–å‡ºå®¹å™¨-amp-è·å–å¯¹è±¡" class="headerlink" title="3.å–å‡ºå®¹å™¨&amp;è·å–å¯¹è±¡"></a>3.å–å‡ºå®¹å™¨&amp;è·å–å¯¹è±¡</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Client.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.è·å–æ ¸å¿ƒå®¹å™¨å¯¹è±¡</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.æ ¹æ®idè·å–Beanå¯¹è±¡</span></span><br><span class="line">        <span class="comment">// æ–¹æ³•ä¸€ï¼šæ‹¿åˆ°ä¸€ä¸ªObjectç±»ï¼Œè‡ªå·±å¼ºè½¬</span></span><br><span class="line">        IAccountService as  = (IAccountService)ac.getBean(<span class="string">"accountService"</span>);</span><br><span class="line">        <span class="comment">// æ–¹æ³•äºŒï¼šç»™ä¸€ä¸ªç±»å‹ï¼Œç›´æ¥å¾—åˆ°è¯¥ç±»å‹å¯¹è±¡</span></span><br><span class="line">        IAccountDao adao = ac.getBean(<span class="string">"accountDao"</span>,IAccountDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="tip-ApplicationContextçš„ç»§æ‰¿å…³ç³»"><a href="#tip-ApplicationContextçš„ç»§æ‰¿å…³ç³»" class="headerlink" title="tip: ApplicationContextçš„ç»§æ‰¿å…³ç³»"></a>tip: ApplicationContextçš„ç»§æ‰¿å…³ç³»</h2><p>Ideaä¸­ï¼Œåœ¨ç±»ä¸Šå³é”®-&gt;Diagrams-&gt;Show Diagram<br>åœ¨æ¥å£ä¸Šå³é”®-&gt;Show Implementations<br><img src="/images/2020/20200228114140888.png"><br>å¯ä»¥çœ‹åˆ°ï¼ŒApplicationContextç»§æ‰¿è‡ªBeanFactoryï¼ŒClassPathXmlApplicationContextæ˜¯å®ƒçš„å®ç°ç±»</p>
<p>ApplicationContextçš„ä¸‰ä¸ªå¸¸ç”¨å®ç°ç±»ï¼š<br>     *      ClassPathXmlApplicationContextï¼šå®ƒå¯ä»¥åŠ è½½ç±»è·¯å¾„ä¸‹çš„é…ç½®æ–‡ä»¶ï¼ˆé…ç½®æ–‡ä»¶å¿…é¡»åœ¨ç±»è·¯å¾„ä¸‹ï¼Œä¸åœ¨çš„åŠ è½½ä¸äº†ï¼‰ï¼ˆæ›´å¸¸ç”¨ï¼‰<br>     *      FileSystemXmlApplicationContextï¼šå®ƒå¯ä»¥åŠ è½½ç£ç›˜ä»»æ„è·¯å¾„ä¸‹çš„é…ç½®æ–‡ä»¶ï¼ˆå¿…é¡»æœ‰è®¿é—®æƒé™ï¼‰<br>     *      AnnotationConfigApplicationContextï¼šå®ƒæ˜¯ç”¨äºè¯»å–æ³¨è§£åˆ›å»ºå®¹å™¨çš„ï¼ˆåé¢è®²ï¼‰</p>
<h2 id="tip-ApplicationContextå’ŒBeanFactoryçš„åŒºåˆ«"><a href="#tip-ApplicationContextå’ŒBeanFactoryçš„åŒºåˆ«" class="headerlink" title="tip: ApplicationContextå’ŒBeanFactoryçš„åŒºåˆ«"></a>tip: ApplicationContextå’ŒBeanFactoryçš„åŒºåˆ«</h2><p><strong>ApplicationContext</strong></p>
<ul>
<li>æ„å»ºæ ¸å¿ƒå®¹å™¨æ—¶ï¼Œåˆ›å»ºå¯¹è±¡é‡‡å–çš„ç­–ç•¥æ˜¯é‡‡ç”¨ç«‹å³åŠ è½½çš„æ–¹å¼ã€‚å³ï¼Œä¸€è¯»å–å®Œé…ç½®æ–‡ä»¶é©¬ä¸Šå°±åˆ›å»ºé…ç½®æ–‡ä»¶ä¸­é…ç½®çš„å¯¹è±¡</li>
<li>å•ä¾‹å¯¹è±¡é€‚ç”¨ </li>
</ul>
<p><strong>BeanFactory</strong></p>
<ul>
<li>æ„å»ºæ ¸å¿ƒå®¹å™¨æ—¶ï¼Œåˆ›å»ºå¯¹è±¡é‡‡å–çš„ç­–ç•¥æ˜¯é‡‡ç”¨å»¶è¿ŸåŠ è½½çš„æ–¹å¼ã€‚å³ï¼Œä»€ä¹ˆæ—¶å€™æ ¹æ®idè·å–å¯¹è±¡äº†ï¼Œä»€ä¹ˆæ—¶å€™æ‰çœŸæ­£çš„åˆ›å»ºå¯¹è±¡</li>
<li>å¤šä¾‹å¯¹è±¡ä½¿ç”¨</li>
</ul>
<hr>
<h1 id="beançš„ç»†èŠ‚"><a href="#beançš„ç»†èŠ‚" class="headerlink" title="beançš„ç»†èŠ‚"></a>beançš„ç»†èŠ‚</h1><h2 id="åˆ›å»ºbeanå¯¹è±¡çš„ä¸‰ç§æ–¹å¼"><a href="#åˆ›å»ºbeanå¯¹è±¡çš„ä¸‰ç§æ–¹å¼" class="headerlink" title="åˆ›å»ºbeanå¯¹è±¡çš„ä¸‰ç§æ–¹å¼"></a>åˆ›å»ºbeanå¯¹è±¡çš„ä¸‰ç§æ–¹å¼</h2><h3 id="æ–¹å¼ä¸€ï¼šä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°åˆ›å»º"><a href="#æ–¹å¼ä¸€ï¼šä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°åˆ›å»º" class="headerlink" title="æ–¹å¼ä¸€ï¼šä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°åˆ›å»º"></a>æ–¹å¼ä¸€ï¼šä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°åˆ›å»º</h3><p>åœ¨springçš„é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨beanæ ‡ç­¾ï¼Œé…ä»¥idå’Œclasså±æ€§ä¹‹åï¼Œä¸”æ²¡æœ‰å…¶ä»–å±æ€§å’Œæ ‡ç­¾æ—¶ã€‚é‡‡ç”¨çš„å°±æ˜¯é»˜è®¤æ„é€ å‡½æ•°åˆ›å»ºbeanå¯¹è±¡ï¼Œæ­¤æ—¶å¦‚æœç±»ä¸­æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°ï¼Œåˆ™å¯¹è±¡æ— æ³•åˆ›å»ºã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="æ–¹å¼äºŒï¼šä½¿ç”¨æ™®é€šå·¥å‚ä¸­çš„æ–¹æ³•åˆ›å»ºå¯¹è±¡"><a href="#æ–¹å¼äºŒï¼šä½¿ç”¨æ™®é€šå·¥å‚ä¸­çš„æ–¹æ³•åˆ›å»ºå¯¹è±¡" class="headerlink" title="æ–¹å¼äºŒï¼šä½¿ç”¨æ™®é€šå·¥å‚ä¸­çš„æ–¹æ³•åˆ›å»ºå¯¹è±¡"></a>æ–¹å¼äºŒï¼šä½¿ç”¨æ™®é€šå·¥å‚ä¸­çš„æ–¹æ³•åˆ›å»ºå¯¹è±¡</h3><p>å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½è¦ç”¨åˆ°åˆ«äººå†™å¥½çš„jaråŒ…ä¸­çš„ç±»ã€‚ï¼ˆä¸çŸ¥é“æœ‰æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°ï¼Œä¹Ÿæ— æ³•é€šè¿‡ä¿®æ”¹æºç æ¥æä¾›é»˜è®¤æ„é€ å‡½æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ¨¡æ‹Ÿä¸€ä¸ªå·¥å‚ç±»ï¼ˆè¯¥ç±»å¯èƒ½æ˜¯å­˜åœ¨äºjaråŒ…ä¸­çš„ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡ä¿®æ”¹æºç çš„æ–¹å¼æ¥æä¾›é»˜è®¤æ„é€ å‡½æ•°ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InstanceFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> IAccountService <span class="title">getAccountService</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> AccountServiceImpl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ‰è¿™ä¹ˆä¸€ä¸ªInstanceFactoryç±»ï¼Œéœ€è¦æ‹¿åˆ°AccountServiceImpl<br>å¦‚æœåƒæ–¹æ³•ä¸€é‚£æ ·åˆ›å»ºå¯¹è±¡ï¼Œå³</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"instanceFactory"</span> <span class="attr">class</span>=<span class="string">"com.itheima.factory.InstanceFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°çš„å¹¶ä¸æ˜¯AccountServiceImplå¯¹è±¡ï¼Œè€Œæ˜¯InstanceFactoryå¯¹è±¡</p>
<p>æ­¤æ—¶åº”è¯¥ä¿®æ”¹åˆ›å»ºå¯¹è±¡çš„æ–¹å¼<br><strong>ä½¿ç”¨æ™®é€šå·¥å‚ä¸­çš„æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼ˆä½¿ç”¨æŸä¸ªç±»ä¸­çš„æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œå¹¶å­˜å…¥springå®¹å™¨ï¼‰</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"instanceFactory"</span> <span class="attr">class</span>=<span class="string">"com.itheima.factory.InstanceFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">factory-bean</span>=<span class="string">"instanceFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getAccountService"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å…ˆåˆ›å»ºå·¥å‚ï¼Œå†é€šè¿‡å·¥å‚çš„æ–¹æ³•åˆ›å»ºæ‰€éœ€å¯¹è±¡</p>
<h3 id="æ–¹å¼ä¸‰ï¼šä½¿ç”¨å·¥å‚ä¸­çš„é™æ€æ–¹æ³•åˆ›å»ºå¯¹è±¡"><a href="#æ–¹å¼ä¸‰ï¼šä½¿ç”¨å·¥å‚ä¸­çš„é™æ€æ–¹æ³•åˆ›å»ºå¯¹è±¡" class="headerlink" title="æ–¹å¼ä¸‰ï¼šä½¿ç”¨å·¥å‚ä¸­çš„é™æ€æ–¹æ³•åˆ›å»ºå¯¹è±¡"></a>æ–¹å¼ä¸‰ï¼šä½¿ç”¨å·¥å‚ä¸­çš„é™æ€æ–¹æ³•åˆ›å»ºå¯¹è±¡</h3><p>æ¨¡æ‹Ÿä¸€ä¸ªå·¥å‚ç±»ï¼Œå®ƒæœ‰ä¸€ä¸ªè¿”å›å¯¹è±¡çš„é™æ€æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ¨¡æ‹Ÿä¸€ä¸ªå·¥å‚ç±»ï¼ˆè¯¥ç±»å¯èƒ½æ˜¯å­˜åœ¨äºjaråŒ…ä¸­çš„ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡ä¿®æ”¹æºç çš„æ–¹å¼æ¥æä¾›é»˜è®¤æ„é€ å‡½æ•°ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> IAccountService <span class="title">getAccountService</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> AccountServiceImpl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨å·¥å‚ä¸­çš„é™æ€æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼ˆä½¿ç”¨æŸä¸ªç±»ä¸­çš„é™æ€æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œå¹¶å­˜å…¥springå®¹å™¨)</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.factory.StaticFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getAccountService"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„factory-methodæ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•</p>
<p>Qï¼šè¿™ä¸¤ä¸ªå·¥å‚ä¸­ä¸éƒ½newå¯¹è±¡äº†å—ï¼Ÿ<br>Aï¼šæŠŠè¿™ä¸¤ä¸ªå¯¹è±¡çœ‹ä½œjaråŒ…ä¸­çš„ç±»ï¼ˆæ­¤å¤„åªæ˜¯æ¨¡æ‹Ÿå®ƒï¼‰ï¼ŒjaråŒ…ä¸­ä¸æ˜¯.javaæ–‡ä»¶è€Œæ˜¯.classï¼Œéƒ½æ˜¯æ— æ³•ä¿®æ”¹çš„ã€‚å®é™…å¼€å‘ä¸­ï¼Œæœ‰äº›å¯¹è±¡å°±å¾—ç”¨æ–¹æ³•äºŒæˆ–æ–¹æ³•ä¸‰æ¥åˆ›å»º</p>
<h2 id="æŒ‡å®šbeanå¯¹è±¡çš„ä½œç”¨èŒƒå›´ï¼šbeanæ ‡ç­¾çš„scopeå±æ€§"><a href="#æŒ‡å®šbeanå¯¹è±¡çš„ä½œç”¨èŒƒå›´ï¼šbeanæ ‡ç­¾çš„scopeå±æ€§" class="headerlink" title="æŒ‡å®šbeanå¯¹è±¡çš„ä½œç”¨èŒƒå›´ï¼šbeanæ ‡ç­¾çš„scopeå±æ€§"></a>æŒ‡å®šbeanå¯¹è±¡çš„ä½œç”¨èŒƒå›´ï¼šbeanæ ‡ç­¾çš„scopeå±æ€§</h2><p>å–å€¼ï¼š<br><strong>singleton</strong>ï¼šå•ä¾‹çš„ï¼ˆé»˜è®¤å€¼ï¼‰ï¼ˆå¸¸ç”¨ï¼‰<br><strong>prototype</strong>ï¼šå¤šä¾‹çš„ï¼ˆå¸¸ç”¨ï¼‰<br><strong>request</strong>ï¼šä½œç”¨äºwebåº”ç”¨çš„è¯·æ±‚èŒƒå›´<br><strong>session</strong>ï¼šä½œç”¨äºwebåº”ç”¨çš„ä¼šè¯èŒƒå›´<br><strong>global-session</strong>ï¼šä½œç”¨äºé›†ç¾¤ç¯å¢ƒçš„ä¼šè¯èŒƒå›´ï¼ˆå…¨å±€ä¼šè¯èŒƒå›´ï¼‰ï¼Œå½“ä¸æ˜¯é›†ç¾¤ç¯å¢ƒæ—¶ï¼Œå®ƒå°±æ˜¯session</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>global-sessionçš„å«ä¹‰<br><img src="/images/2020/20200228131045586.png" width=800></p>
<h2 id="beanå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#beanå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="beanå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ"></a>beanå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ</h2><p><strong>å•ä¾‹å¯¹è±¡</strong></p>
<ul>
<li>å‡ºç”Ÿï¼šå½“å®¹å™¨åˆ›å»ºæ—¶å¯¹è±¡å‡ºç”Ÿ</li>
<li>æ´»ç€ï¼šåªè¦å®¹å™¨è¿˜åœ¨ï¼Œå¯¹è±¡ä¸€ç›´æ´»ç€</li>
<li>æ­»äº¡ï¼šå®¹å™¨é”€æ¯ï¼Œå¯¹è±¡æ¶ˆäº¡</li>
</ul>
<p>æ€»ç»“ï¼šå•ä¾‹å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œå®¹å™¨ç›¸åŒ</p>
<p><strong>å¤šä¾‹å¯¹è±¡</strong></p>
<ul>
<li>å‡ºç”Ÿï¼šå½“æˆ‘ä»¬ä½¿ç”¨å¯¹è±¡æ—¶springæ¡†æ¶ä¸ºæˆ‘ä»¬åˆ›å»º</li>
<li>æ´»ç€ï¼šå¯¹è±¡åªè¦æ˜¯åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å°±ä¸€ç›´æ´»ç€ã€‚</li>
<li>æ­»äº¡ï¼šå½“å¯¹è±¡é•¿æ—¶é—´ä¸ç”¨ï¼Œä¸”æ²¡æœ‰åˆ«çš„å¯¹è±¡å¼•ç”¨æ—¶ï¼Œç”±Javaçš„åƒåœ¾å›æ”¶å™¨å›æ”¶</li>
</ul>
<p>å¯ä»¥é€šè¿‡beanæ ‡ç­¾æŒ‡å®šåœ¨ç‰¹å®šç”Ÿå‘½å‘¨æœŸæ‰§è¡Œçš„æ–¹æ³•</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">// beans.xml</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">scope</span>=<span class="string">"singleton"</span> <span class="attr">init-method</span>=<span class="string">"init"</span> <span class="attr">destroy-method</span>=<span class="string">"destroy"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Client.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.è·å–æ ¸å¿ƒå®¹å™¨å¯¹è±¡</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);  <span class="comment">// æ‰§è¡Œå®Œè¿™å¥ï¼Œå•ä¾‹å¯¹è±¡å°±åˆ›å»ºäº†</span></span><br><span class="line">        <span class="comment">// 2.æ ¹æ®idè·å–Beanå¯¹è±¡</span></span><br><span class="line">        IAccountService as  = (IAccountService)ac.getBean(<span class="string">"accountService"</span>);  <span class="comment">// æ‰§è¡Œå®Œè¿™å¥ï¼Œå¤šä¾‹å¯¹è±¡æ‰åˆ›å»º</span></span><br><span class="line">        as.saveAccount();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// AccountServiceImpl.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccountServiceImpl</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å¯¹è±¡åˆ›å»ºäº†..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">saveAccount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"serviceä¸­çš„saveAccountæ–¹æ³•æ‰§è¡Œäº†..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å¯¹è±¡åˆå§‹åŒ–äº†..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">destroy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å¯¹è±¡é”€æ¯äº†..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œè¾“å‡º</p>
<blockquote>
<p>å¯¹è±¡åˆ›å»ºäº†â€¦<br>å¯¹è±¡åˆå§‹åŒ–äº†â€¦<br>serviceä¸­çš„saveAccountæ–¹æ³•æ‰§è¡Œäº†â€¦</p>
</blockquote>
<p>Qï¼šä¸ºä»€ä¹ˆæ²¡æœ‰æ‰§è¡Œé”€æ¯æ–¹æ³•ï¼Ÿ<br>Aï¼šmain()ç»“æŸä¹‹åï¼Œå½“å‰è¿›ç¨‹å ç”¨çš„å†…å­˜å…¨éƒ¨é‡Šæ”¾ï¼ˆåŒ…æ‹¬å®¹å™¨ï¼‰ï¼Œæ­¤æ—¶å¹¶æ²¡æœ‰è°ƒç”¨é”€æ¯æ–¹æ³•å°±å·²ç»æŠŠå†…å­˜é‡Šæ”¾äº†ã€‚è¿™é‡Œè¦æƒ³è°ƒç”¨é”€æ¯æ–¹æ³•ï¼Œå¯ä»¥æ‰‹åŠ¨å…³é—­å®¹å™¨</p>
<p>åœ¨main()ä¸­æ‰‹åŠ¨å…³é—­å®¹å™¨<br><img src="/images/2020/20200228132514347.png" width=600><br>ä¸ºä»€ä¹ˆæ²¡æœ‰å‘¢ï¼Ÿ<br>è¿™é‡ŒApplicationContextæ˜¯ä¸ªæ¥å£ï¼Œè°ƒä¸åˆ°å­ç±»çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.è·å–æ ¸å¿ƒå®¹å™¨å¯¹è±¡</span></span><br><span class="line"><span class="comment">// ApplicationContext ac = new ClassPathXmlApplicationContext("bean.xml");</span></span><br><span class="line">ClassPathXmlApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);</span><br><span class="line"><span class="comment">// 2.æ ¹æ®idè·å–Beanå¯¹è±¡</span></span><br><span class="line">IAccountService as  = (IAccountService)ac.getBean(<span class="string">"accountService"</span>);</span><br><span class="line">as.saveAccount();</span><br><span class="line"><span class="comment">// 3.æ‰‹åŠ¨å…³é—­å®¹å™¨</span></span><br><span class="line">ac.close();</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥äº†</p>
<blockquote>
<p>å¯¹è±¡åˆ›å»ºäº†â€¦<br>å¯¹è±¡åˆå§‹åŒ–äº†â€¦<br>serviceä¸­çš„saveAccountæ–¹æ³•æ‰§è¡Œäº†â€¦<br>å¯¹è±¡é”€æ¯äº†â€¦</p>
</blockquote>
<p>ä½†æ˜¯ï¼Œæ­¤æ—¶å¦‚æœæŠŠå¯¹è±¡æ”¹ä¸ºå¤šä¾‹çš„ï¼Œå…¶å®ƒéƒ½ä¸å˜ï¼Œä¸ä¼šæ‰§è¡Œé”€æ¯æ–¹æ³•</p>
<hr>
<h1 id="Springä¸­çš„ä¾èµ–æ³¨å…¥-DI"><a href="#Springä¸­çš„ä¾èµ–æ³¨å…¥-DI" class="headerlink" title="Springä¸­çš„ä¾èµ–æ³¨å…¥(DI)"></a>Springä¸­çš„ä¾èµ–æ³¨å…¥(DI)</h1><p><strong>ä¾èµ–æ³¨å…¥ Dependency Injection, DI</strong></p>
<p><strong>èƒ½æ³¨å…¥çš„ä¸‰ç±»æ•°æ®</strong></p>
<ol>
<li>åŸºæœ¬ç±»å‹å’ŒString</li>
<li>å…¶ä»–beanç±»å‹ï¼ˆåœ¨é…ç½®æ–‡ä»¶ä¸­æˆ–è€…æ³¨è§£é…ç½®è¿‡çš„beanï¼‰</li>
<li>å¤æ‚ç±»å‹/é›†åˆç±»å‹</li>
</ol>
<p><strong>æ³¨å…¥çš„ä¸‰ç§æ–¹å¼</strong></p>
<ol>
<li>ä½¿ç”¨æ„é€ å‡½æ•°æä¾›</li>
<li>ä½¿ç”¨setæ–¹æ³•æä¾›</li>
<li>ä½¿ç”¨æ³¨è§£æä¾›</li>
</ol>
<h2 id="æ„é€ å‡½æ•°æ³¨å…¥"><a href="#æ„é€ å‡½æ•°æ³¨å…¥" class="headerlink" title="æ„é€ å‡½æ•°æ³¨å…¥"></a>æ„é€ å‡½æ•°æ³¨å…¥</h2><p><strong>ä½¿ç”¨çš„æ ‡ç­¾</strong>ï¼šconstructor-arg<br><strong>æ ‡ç­¾å‡ºç°çš„ä½ç½®</strong>ï¼šbeanæ ‡ç­¾çš„å†…éƒ¨<br><strong>æ ‡ç­¾ä¸­çš„å±æ€§ï¼ˆæŒ‡å®šå‚æ•°ï¼‰</strong>ï¼š</p>
<ul>
<li>typeï¼šæŒ‡å®šæ•°æ®ç±»å‹</li>
<li>indexï¼šæŒ‡å®šæ„é€ å‡½æ•°ä¸­çš„ç´¢å¼•ä½ç½®</li>
<li>nameï¼šæŒ‡å®šåç§°ï¼ˆå¸¸ç”¨ï¼‰</li>
</ul>
<p><strong>æ ‡ç­¾ä¸­çš„å±æ€§ï¼ˆæä¾›èµ‹å€¼ï¼‰</strong>ï¼š</p>
<ul>
<li>valueï¼šç”¨äºæä¾›åŸºæœ¬ç±»å‹å’ŒStringç±»å‹çš„æ•°æ®</li>
<li>refï¼šç”¨äºæŒ‡å®šå…¶ä»–çš„beanç±»å‹æ•°æ®ï¼ˆåœ¨springçš„Iocæ ¸å¿ƒå®¹å™¨ä¸­å‡ºç°è¿‡çš„beanå¯¹è±¡ï¼‰</li>
</ul>
<p><strong>ä¼˜åŠ¿</strong>ï¼š<br>åœ¨è·å–beanå¯¹è±¡æ—¶ï¼Œæ³¨å…¥æ•°æ®æ˜¯å¿…é¡»çš„æ“ä½œï¼Œå¦åˆ™å¯¹è±¡æ— æ³•åˆ›å»ºæˆåŠŸï¼ˆå¿…é¡»æŸäº›æ•°æ®æ—¶ï¼Œä¸ä¼šè¢«å¿½ç•¥ï¼‰<br><strong>å¼Šç«¯</strong>ï¼š<br>æ”¹å˜äº†beanå¯¹è±¡çš„å®ä¾‹åŒ–æ–¹å¼ï¼Œåˆ›å»ºå¯¹è±¡æ—¶ï¼Œå³ä½¿ä»¥åç”¨ä¸åˆ°è¿™äº›æ•°æ®ï¼Œä¹Ÿå¿…é¡»æä¾›</p>
<p>ä¾‹ï¼š</p>
<p>AccountServiceImplç±»æœ‰3ä¸ªå˜é‡ï¼Œæ²¡æœ‰æ— å‚æ„é€ å‡½æ•°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯ç»å¸¸å˜åŒ–çš„æ•°æ®ï¼Œå¹¶ä¸é€‚ç”¨äºæ³¨å…¥çš„æ–¹å¼</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccountServiceImpl</span><span class="params">(String name,Integer age,Date birthday)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>bean.xmlå¯¹åº”çš„beané…ç½®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"test"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"18"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"birthday"</span> <span class="attr">ref</span>=<span class="string">"now"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®ä¸€ä¸ªæ—¥æœŸå¯¹è±¡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"now"</span> <span class="attr">class</span>=<span class="string">"java.util.Date"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é…ç½®ä¸­çš„valueéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå¯¹äºStringã€Integerç±»å‹ï¼ŒSpringå¯ä»¥è‡ªåŠ¨è½¬æ¢<br>ä½†Dateæ— æ³•ç›´æ¥è½¬æ¢ï¼Œéœ€å¦å¤–é…ç½®</p>
<h2 id="setæ–¹æ³•æ³¨å…¥"><a href="#setæ–¹æ³•æ³¨å…¥" class="headerlink" title="setæ–¹æ³•æ³¨å…¥"></a>setæ–¹æ³•æ³¨å…¥</h2><p>æ¯”æ„é€ å‡½æ•°å¸¸ç”¨</p>
<p><strong>ä½¿ç”¨çš„æ ‡ç­¾</strong>ï¼šproperty<br><strong>å‡ºç°çš„ä½ç½®</strong>ï¼šbeanæ ‡ç­¾çš„å†…éƒ¨<br><strong>æ ‡ç­¾çš„å±æ€§</strong>ï¼š</p>
<ul>
<li>nameï¼šç”¨äºæŒ‡å®šæ³¨å…¥æ—¶æ‰€è°ƒç”¨çš„setæ–¹æ³•åç§°ï¼ˆä¸ç®¡å˜é‡åï¼‰</li>
<li>valueï¼šç”¨äºæä¾›åŸºæœ¬ç±»å‹å’ŒStringç±»å‹çš„æ•°æ®</li>
<li>refï¼šç”¨äºæŒ‡å®šå…¶ä»–çš„beanç±»å‹æ•°æ®</li>
</ul>
<p><strong>ä¼˜åŠ¿</strong>ï¼š<br>åˆ›å»ºå¯¹è±¡æ—¶æ²¡æœ‰æ˜ç¡®çš„é™åˆ¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°<br><strong>å¼Šç«¯</strong>ï¼š<br>å¦‚æœæœ‰æŸä¸ªæˆå‘˜å¿…é¡»æœ‰å€¼ï¼Œä½†æ²¡æœ‰æ³¨å…¥</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl2</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;<span class="keyword">this</span>.name = name;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;<span class="keyword">this</span>.age = age;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBirthday</span><span class="params">(Date birthday)</span> </span>&#123;<span class="keyword">this</span>.birthday = birthday;&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService2"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl2"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"TEST"</span> &gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"21"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"birthday"</span> <span class="attr">ref</span>=<span class="string">"now"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="å¤æ‚ç±»å‹æ³¨å…¥"><a href="#å¤æ‚ç±»å‹æ³¨å…¥" class="headerlink" title="å¤æ‚ç±»å‹æ³¨å…¥"></a>å¤æ‚ç±»å‹æ³¨å…¥</h2><p>ç”¨äºç»™Listç»“æ„é›†åˆæ³¨å…¥çš„æ ‡ç­¾ï¼š<br>            list array set</p>
<p>ç”¨äºä¸ªMapç»“æ„é›†åˆæ³¨å…¥çš„æ ‡ç­¾:<br>            map  props</p>
<p>! ç»“æ„ç›¸åŒï¼Œæ ‡ç­¾å¯ä»¥äº’æ¢</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl3</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// listç»“æ„</span></span><br><span class="line">    <span class="keyword">private</span> String[] myStrs;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; myList;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; mySet;</span><br><span class="line">    <span class="comment">// mapç»“æ„</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; myMap;</span><br><span class="line">    <span class="keyword">private</span> Properties myProps;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMyStrs</span><span class="params">(String[] myStrs)</span> </span>&#123; <span class="keyword">this</span>.myStrs = myStrs; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMyList</span><span class="params">(List&lt;String&gt; myList)</span> </span>&#123; <span class="keyword">this</span>.myList = myList; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMySet</span><span class="params">(Set&lt;String&gt; mySet)</span> </span>&#123; <span class="keyword">this</span>.mySet = mySet; &#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMyMap</span><span class="params">(Map&lt;String, String&gt; myMap)</span> </span>&#123; <span class="keyword">this</span>.myMap = myMap; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMyProps</span><span class="params">(Properties myProps)</span> </span>&#123; <span class="keyword">this</span>.myProps = myProps; &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService3"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl3"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--ç”¨arrayã€listã€setéƒ½è¡Œ--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"myStrs"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>AAA<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>BBB<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>CCC<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!--ç”¨mapã€propéƒ½è¡Œ--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"myMap"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"testA"</span> <span class="attr">value</span>=<span class="string">"aaa"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"testB"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>BBB<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="åŸºäºæ³¨è§£çš„IoCé…ç½®"><a href="#åŸºäºæ³¨è§£çš„IoCé…ç½®" class="headerlink" title="åŸºäºæ³¨è§£çš„IoCé…ç½®"></a>åŸºäºæ³¨è§£çš„IoCé…ç½®</h1><p>æ³¨è§£é…ç½®å’Œxmlé…ç½®è¦å®ç°çš„åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼šé™ä½ç¨‹åºè€¦åˆ</p>
<p>æ›¾ç»XMLçš„é…ç½®ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">scope</span>=<span class="string">""</span>  <span class="attr">init-method</span>=<span class="string">""</span> <span class="attr">destroy-method</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">""</span>  <span class="attr">value</span>=<span class="string">""</span> | <span class="attr">ref</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ³¨è§£æ—¶ï¼Œä¸ç”¨ä¸Šé¢çš„<bean></bean>ï¼Œä½†éœ€è¦å‘Šè¯‰Springå¼€å¯æ³¨è§£æ‰«æ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å‘ŠçŸ¥springåœ¨åˆ›å»ºå®¹å™¨æ—¶è¦æ‰«æçš„åŒ…ï¼Œé…ç½®æ‰€éœ€è¦çš„æ ‡ç­¾ä¸æ˜¯åœ¨beansçš„çº¦æŸä¸­ï¼Œè€Œæ˜¯ä¸€ä¸ªåç§°ä¸º</span></span><br><span class="line"><span class="comment">    contextåç§°ç©ºé—´å’Œçº¦æŸä¸­--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.itheima"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­contextåç§°ç©ºé—´å’Œå‰é¢ä¸€æ ·ï¼Œåœ¨æ–‡æ¡£ä¸­æœç´¢æ‰¾</p>
<h2 id="ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ³¨è§£"><a href="#ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ³¨è§£" class="headerlink" title="ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ³¨è§£"></a>ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ³¨è§£</h2><p><strong>@Component</strong><br>ä½œç”¨ï¼š<br>ç”¨äºæŠŠå½“å‰ç±»å¯¹è±¡å­˜å…¥springå®¹å™¨ä¸­</p>
<p>å±æ€§ï¼š<br>valueï¼šç”¨äºæŒ‡å®šbeançš„idï¼ˆä¸å†™æ—¶ï¼Œé»˜è®¤å€¼æ˜¯å½“å‰ç±»åï¼Œä¸”é¦–å­—æ¯å°å†™ï¼‰</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>(value = <span class="string">"accountService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»†èŠ‚ï¼š<br>å½“åªç»™ä¸€ä¸ªvalueå±æ€§èµ‹å€¼æ—¶ï¼Œvalueå¯ä»¥ä¸å†™</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>@Controller</strong>ï¼šä¸€èˆ¬ç”¨åœ¨è¡¨ç°å±‚<br><strong>@Service</strong>ï¼šä¸€èˆ¬ç”¨åœ¨ä¸šåŠ¡å±‚<br><strong>@Repository</strong>ï¼šä¸€èˆ¬ç”¨åœ¨æŒä¹…å±‚</p>
<p>ä»¥ä¸Šä¸‰ä¸ªæ³¨è§£çš„ä½œç”¨å’Œå±æ€§ä¸@Componentä¸€æ¨¡ä¸€æ ·<br>æ˜¯Springæ¡†æ¶æä¾›çš„æ˜ç¡®çš„ä¸‰å±‚ä½¿ç”¨çš„æ³¨è§£ï¼Œä½¿ä¸‰å±‚å¯¹è±¡æ›´åŠ æ¸…æ™°</p>
<h2 id="ç”¨äºæ³¨å…¥æ•°æ®çš„æ³¨è§£"><a href="#ç”¨äºæ³¨å…¥æ•°æ®çš„æ³¨è§£" class="headerlink" title="ç”¨äºæ³¨å…¥æ•°æ®çš„æ³¨è§£"></a>ç”¨äºæ³¨å…¥æ•°æ®çš„æ³¨è§£</h2><p><strong>@Autowired</strong><br>ä½œç”¨ï¼š<br>è‡ªåŠ¨æŒ‰ç…§ç±»å‹æ³¨å…¥ã€‚åªè¦å®¹å™¨ä¸­æœ‰å”¯ä¸€çš„ä¸€ä¸ªbeanå¯¹è±¡ç±»å‹å’Œè¦æ³¨å…¥çš„å˜é‡ç±»å‹åŒ¹é…ï¼Œå°±å¯ä»¥æ³¨å…¥æˆåŠŸã€‚å¦‚æœiocå®¹å™¨ä¸­æ²¡æœ‰ä»»ä½•beançš„ç±»å‹å’Œè¦æ³¨å…¥çš„å˜é‡ç±»å‹åŒ¹é…ï¼Œåˆ™æŠ¥é”™<br>ï¼ˆå½“æœ‰å¤šä¸ªbeanç±»å‹åŒ¹é…æ—¶ï¼Œç”¨å˜é‡åå’Œbeançš„idåŒ¹é…ï¼Œå¦‚æœæ°å¥½æœ‰ä¸€ä¸ªåŒ¹é…ï¼Œä¹Ÿå¯ä»¥æˆåŠŸï¼Œå¦åˆ™æŠ¥é”™ï¼‰</p>
<p>å‡ºç°ä½ç½®ï¼š<br>å¯ä»¥æ˜¯å˜é‡ä¸Šï¼Œä¹Ÿå¯ä»¥æ˜¯æ–¹æ³•ä¸Š</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> IAccountDao accountDao = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<p>ç»†èŠ‚ï¼š<br>åœ¨ä½¿ç”¨æ³¨è§£æ³¨å…¥æ—¶ï¼Œsetæ–¹æ³•å°±ä¸æ˜¯å¿…é¡»çš„äº†</p>
<p><strong>@Qualifier</strong><br> ä½œç”¨ï¼š<br> åœ¨æŒ‰ç…§ç±»ä¸­æ³¨å…¥çš„åŸºç¡€ä¹‹ä¸Šå†æŒ‰ç…§åç§°æ³¨å…¥ã€‚åœ¨ç»™ç±»æˆå‘˜æ³¨å…¥æ—¶ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»å’Œ@Autowiredä¸€èµ·ã€‚ä½†æ˜¯åœ¨ç»™æ–¹æ³•å‚æ•°æ³¨å…¥æ—¶å¯ä»¥å•ç‹¬ä½¿ç”¨</p>
<p>å±æ€§ï¼š<br>valueï¼šç”¨äºæŒ‡å®šæ³¨å…¥beançš„id</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@Qualifier</span>(<span class="string">"accountDao1"</span>)</span><br><span class="line"><span class="keyword">private</span> IAccountDao accountDao = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<p><strong>@Resource</strong><br> ä½œç”¨ï¼š<br> ç›´æ¥æŒ‰ç…§beançš„idæ³¨å…¥ï¼Œå¯ä»¥ç‹¬ç«‹ä½¿ç”¨</p>
<p>å±æ€§ï¼š<br>nameï¼šç”¨äºæŒ‡å®šbeançš„id<br>ï¼ˆæ³¨æ„ï¼šè¿™é‡Œæ˜¯nameï¼Œä¸æ˜¯valueï¼‰</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Resource</span>(name = <span class="string">"accountDao1"</span>)</span><br><span class="line"><span class="keyword">private</span> IAccountDao accountDao = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä¸‰ä¸ªæ³¨è§£éƒ½åªèƒ½æ³¨å…¥å…¶ä»–beanç±»å‹çš„æ•°æ®ï¼Œè€ŒåŸºæœ¬ç±»å‹å’ŒStringç±»å‹æ— æ³•æ³¨å…¥<br>å¦å¤–ï¼Œé›†åˆç±»å‹çš„æ³¨å…¥åªèƒ½é€šè¿‡XMLæ¥å®ç°</p>
<p><strong>@Value</strong><br>ä½œç”¨ï¼š<br>ç”¨äºæ³¨å…¥åŸºæœ¬ç±»å‹å’ŒStringç±»å‹çš„æ•°æ®</p>
<p>å±æ€§ï¼š<br>valueï¼šç”¨äºæŒ‡å®šæ•°æ®çš„å€¼<br>å¯ä»¥ä½¿ç”¨Springä¸­SpELï¼ˆå³Springçš„elè¡¨è¾¾å¼ï¼‰å†™æ³•ï¼š${è¡¨è¾¾å¼}</p>
<h2 id="ç”¨äºæ”¹å˜ä½œç”¨èŒƒå›´çš„æ³¨è§£"><a href="#ç”¨äºæ”¹å˜ä½œç”¨èŒƒå›´çš„æ³¨è§£" class="headerlink" title="ç”¨äºæ”¹å˜ä½œç”¨èŒƒå›´çš„æ³¨è§£"></a>ç”¨äºæ”¹å˜ä½œç”¨èŒƒå›´çš„æ³¨è§£</h2><p><strong>@Scope</strong><br>ä½œç”¨ï¼š<br>ç”¨äºæŒ‡å®šbeançš„ä½œç”¨èŒƒå›´</p>
<p>å±æ€§ï¼š<br>valueï¼šæŒ‡å®šèŒƒå›´çš„å–å€¼ï¼ˆå¸¸ç”¨ï¼šsingleton prototypeï¼‰</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="meta">@Scope</span>(<span class="string">"prototype"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„æ³¨è§£"><a href="#ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„æ³¨è§£" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„æ³¨è§£"></a>ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„æ³¨è§£</h2><p><strong>@PreDestroy</strong><br>ä½œç”¨ï¼šç”¨äºæŒ‡å®šé”€æ¯æ–¹æ³•</p>
<p><strong>@PostConstruct</strong><br>ä½œç”¨ï¼šç”¨äºæŒ‡å®šåˆå§‹åŒ–æ–¹æ³•</p>
<p>å’Œbeanæ ‡ç­¾ä¸­ä½¿ç”¨init-methodå’Œdestroy-methodeä¸€æ ·</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="meta">@Scope</span>(<span class="string">"singleton"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span>(name = <span class="string">"accountDao1"</span>)</span><br><span class="line">    <span class="keyword">private</span> IAccountDao accountDao = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"åˆå§‹åŒ–æ–¹æ³•æ‰§è¡Œäº†"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PreDestroy</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">destroy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"é”€æ¯æ–¹æ³•æ‰§è¡Œäº†"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">saveAccount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        accountDao.saveAccount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŒæ ·ï¼Œå¦‚æœç±»æ˜¯å¤šä¾‹çš„ï¼Œå¯èƒ½ä¸ä¼šçœ‹åˆ°é”€æ¯æ–¹æ³•æ‰§è¡Œçš„è¾“å‡ºï¼Œå› ä¸ºå®ƒçš„é”€æ¯æ˜¯JVMç®¡çš„</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç¬”è®°04 åº”ç”¨åˆ†å±‚</title>
    <url>/2020/02/24/note-spring-04/</url>
    <content><![CDATA[<h1 id="ä¸‰å±‚æ¶æ„-3-Tier-Architecture"><a href="#ä¸‰å±‚æ¶æ„-3-Tier-Architecture" class="headerlink" title="ä¸‰å±‚æ¶æ„ (3-Tier Architecture)"></a>ä¸‰å±‚æ¶æ„ (3-Tier Architecture)</h1><img src="/images/2020/20200224200654315.png" width=400>

<ul>
<li><strong>è¡¨ç¤ºå±‚ (PL, Presentation Layer æˆ– UI, User Interface Layer)</strong> â€”â€” ä¸»è¦æ˜¯ä¸ç”¨æˆ·äº¤äº’çš„ç•Œé¢ï¼Œç”¨äºæ¥æ”¶ç”¨æˆ·è¾“å…¥çš„æ•°æ®å’Œæ˜¾ç¤ºå¤„ç†åçš„æ•°æ®</li>
<li><strong>ä¸šåŠ¡é€»è¾‘å±‚ (BLL, Business Logic Layer)</strong> â€”â€” PLä¸DALä¹‹é—´çš„æ¡¥æ¢ï¼Œå®ç°ä¸šåŠ¡é€»è¾‘ï¼Œä¸»è¦åŒ…æ‹¬éªŒè¯ã€è®¡ç®—ã€è§„åˆ™ç­‰</li>
<li><strong>æ•°æ®è®¿é—®å±‚ (DAL, Data Access Layer)</strong> â€”â€” ä¸æ•°æ®åº“äº¤äº’ï¼Œå®ç°å¯¹æ•°æ®çš„CURDï¼Œå°†å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æ•°æ®æäº¤ç»™ä¸šåŠ¡å±‚ï¼ŒåŒæ—¶å°†ä¸šåŠ¡å±‚å¤„ç†çš„æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“</li>
</ul>
<h1 id="MVCæ¨¡å¼-Model-View-Controller"><a href="#MVCæ¨¡å¼-Model-View-Controller" class="headerlink" title="MVCæ¨¡å¼ (Model-View-Controller)"></a>MVCæ¨¡å¼ (Model-View-Controller)</h1><img src="/images/2020/20200224201239437.png" width=300>

<p>æè¿°1:</p>
<ul>
<li><strong>æ¨¡å‹ (Model)</strong> â€”â€” ç¨‹åºéœ€è¦æ“ä½œçš„æ•°æ®æˆ–ä¿¡æ¯</li>
<li><strong>è§†å›¾ (View)</strong> â€”â€” æä¾›ç»™ç”¨æˆ·çš„æ“ä½œç•Œé¢ï¼Œæ˜¯ç¨‹åºçš„å¤–å£³</li>
<li><strong>æ§åˆ¶å™¨ (Controller)</strong> â€”â€” è´Ÿè´£æ ¹æ®ç”¨æˆ·ä»â€è§†å›¾å±‚â€è¾“å…¥çš„æŒ‡ä»¤ï¼Œé€‰å–â€æ•°æ®å±‚â€ä¸­çš„æ•°æ®ï¼Œç„¶åå¯¹å…¶è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œäº§ç”Ÿæœ€ç»ˆç»“æœ</li>
</ul>
<p>æè¿°2:</p>
<ul>
<li><strong>æ¨¡å‹ (Model)</strong> â€”â€” è¡¨ç¤ºåº”ç”¨ç¨‹åºå’Œä»»ä½•åº”ç”±å…¶æ‰§è¡Œçš„ä¸šåŠ¡é€»è¾‘æˆ–æ“ä½œçš„çŠ¶æ€</li>
<li><strong>è§†å›¾ (View)</strong> â€”â€” è´Ÿè´£é€šè¿‡ç”¨æˆ·ç•Œé¢å±•ç¤ºå†…å®¹</li>
<li><strong>æ§åˆ¶å™¨ (Controller)</strong> â€”â€” æ˜¯å¤„ç†ç”¨æˆ·äº¤äº’ã€ä½¿ç”¨æ¨¡å‹å¹¶æœ€ç»ˆé€‰æ‹©è¦å‘ˆç°çš„è§†å›¾çš„ç»„ä»¶</li>
</ul>
<h1 id="ä¸‰å±‚æ¶æ„ä¸MVCçš„åŒºåˆ«ä¸è”ç³»"><a href="#ä¸‰å±‚æ¶æ„ä¸MVCçš„åŒºåˆ«ä¸è”ç³»" class="headerlink" title="ä¸‰å±‚æ¶æ„ä¸MVCçš„åŒºåˆ«ä¸è”ç³»"></a>ä¸‰å±‚æ¶æ„ä¸MVCçš„åŒºåˆ«ä¸è”ç³»</h1><h4 id="1-å…³æ³¨ç‚¹"><a href="#1-å…³æ³¨ç‚¹" class="headerlink" title="1. å…³æ³¨ç‚¹"></a>1. å…³æ³¨ç‚¹</h4><ul>
<li>ä¸‰å±‚æ¶æ„æ˜¯ä¸ºäº†è§£å†³æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å„ä¸ªä¸šåŠ¡æ“ä½œè¿‡ç¨‹ä¸­çš„==ä¸åŒé˜¶æ®µçš„ä»£ç å°è£…==é—®é¢˜ï¼Œä½¿ç¨‹åºå‘˜æ›´åŠ ä¸“æ³¨çš„å¤„ç†æŸé˜¶æ®µçš„ä¸šåŠ¡é€»è¾‘</li>
<li>MVCæ¶æ„æ¨¡å¼å°†åº”ç”¨ç¨‹åºåˆ†ä¸ºä¸‰ä¸ªä¸»è¦ç»„æˆéƒ¨åˆ†ï¼Œæœ‰åŠ©äºå®ç°å…³æ³¨ç‚¹åˆ†ç¦»ã€‚åˆ†ç¦»å…³æ³¨ç‚¹æ˜¯å¼€å‘æ—¶çš„æŒ‡å¯¼åŸåˆ™ï¼Œæ­¤åŸåˆ™ä¸»å¼ åº”æ ¹æ®==è½¯ä»¶æ‰§è¡Œçš„å·¥ä½œç±»å‹==å°†è½¯ä»¶åˆ†ç¦»<h4 id="2-åˆ‡åˆ†æ–¹å‘"><a href="#2-åˆ‡åˆ†æ–¹å‘" class="headerlink" title="2. åˆ‡åˆ†æ–¹å‘"></a>2. åˆ‡åˆ†æ–¹å‘</h4></li>
<li>ä¸‰å±‚æ¶æ„æ˜¯ä¸€ç§è½¯ä»¶æŠ½è±¡çš„å±‚æ¬¡ç»“æ„ï¼Œæ˜¯å¯¹å¤æ‚ç³»ç»Ÿçš„ä¸€ç§<strong>çºµå‘åˆ‡åˆ†</strong></li>
<li>MVCæ›´åƒæ˜¯<strong>æ¨ªå‘åˆ‡åˆ†</strong>ï¼Œæ¯å—éƒ½å¯ä»¥ç‹¬ç«‹æµ‹è¯•<h4 id="3-ä¾èµ–å…³ç³»"><a href="#3-ä¾èµ–å…³ç³»" class="headerlink" title="3. ä¾èµ–å…³ç³»"></a>3. ä¾èµ–å…³ç³»</h4></li>
<li>ä¸‰å±‚æ¶æ„ä¸­ï¼Œå±‚æ¬¡ä¹‹é—´ä¸€èˆ¬æ˜¯<strong>å‘ä¸‹ä¾èµ–</strong>çš„ã€‚ä¸‹å±‚åœ¨æœªç¡®å®šæ¥å£ï¼ˆå¥‘çº¦ï¼‰è§„èŒƒå‰ï¼Œä¸Šå±‚ä»£ç æ— æ³•å¼€å‘ï¼Œä¸‹å±‚ä»£ç æ¥å£çš„å˜åŒ–å°†ä½¿ä¸Šå±‚ä¸€èµ·å˜åŒ–</li>
<li>MVCä¸­ï¼Œä¸‰è€…å¹¶<strong>ä¸å­˜åœ¨æ˜æ˜¾çš„å±‚æ¬¡ç»“æ„</strong>ï¼Œæ²¡æœ‰æ˜æ˜¾çš„å‘ä¸‹ä¾èµ–çš„å…³ç³»ã€‚ç›¸åçš„æ˜¯Viewå’ŒModelå¾€å¾€æ˜¯æ¯”è¾ƒç‹¬ç«‹çš„ï¼Œè€ŒControlleråˆ™æ˜¯ä¸¤è€…çš„æ¡¥æ¢</li>
</ul>
<p><strong>éƒ½æ˜¯ä¸ºäº†è§£è€¦</strong></p>
<hr>
<h1 id="MVCã€MVPã€MVVM"><a href="#MVCã€MVPã€MVVM" class="headerlink" title="MVCã€MVPã€MVVM"></a>MVCã€MVPã€MVVM</h1><blockquote>
<p><a href="http://www.ruanyifeng.com/blog/2015/02/mvcmvp_mvvm.html" target="_blank" rel="noopener">MVCï¼ŒMVP å’Œ MVVM çš„å›¾ç¤º</a></p>
</blockquote>
<hr>
<h1 id="é˜¿é‡Œè§„èŒƒ"><a href="#é˜¿é‡Œè§„èŒƒ" class="headerlink" title="é˜¿é‡Œè§„èŒƒ"></a>é˜¿é‡Œè§„èŒƒ</h1><blockquote>
<p>ã€ŠJavaå¼€å‘æ‰‹å†Œã€‹v1.5.0 åå±±ç‰ˆ</p>
</blockquote>
<p>å›¾ä¸­é»˜è®¤ä¸Šå±‚ä¾èµ–äºä¸‹å±‚ï¼Œç®­å¤´å…³ç³»è¡¨ç¤ºå¯ç›´æ¥ä¾èµ–ï¼Œå¦‚:å¼€æ”¾æ¥å£å±‚å¯ä»¥ä¾èµ–äº Web å±‚ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¾èµ–äº Service å±‚ï¼Œä¾æ­¤ç±»æ¨:<br><img src="/images/2020/20200224193901683.png" width=400></p>
<ul>
<li><strong>å¼€æ”¾æ¥å£å±‚</strong> : å¯ç›´æ¥å°è£… Service æ–¹æ³•æš´éœ²æˆ RPC æ¥å£;é€šè¿‡ Web å°è£…æˆ http æ¥å£;è¿›è¡Œç½‘å…³å®‰å…¨æ§åˆ¶ã€æµé‡æ§åˆ¶ç­‰ã€‚</li>
<li><strong>ç»ˆç«¯æ˜¾ç¤ºå±‚</strong> : å„ä¸ªç«¯çš„æ¨¡æ¿æ¸²æŸ“å¹¶æ‰§è¡Œæ˜¾ç¤ºçš„å±‚ã€‚å½“å‰ä¸»è¦æ˜¯ velocity æ¸²æŸ“ï¼ŒJS æ¸²æŸ“ï¼ŒJSP æ¸²æŸ“ï¼Œç§»åŠ¨ç«¯å±•ç¤ºç­‰ã€‚</li>
<li><strong>Webå±‚</strong> : ä¸»è¦æ˜¯å¯¹è®¿é—®æ§åˆ¶è¿›è¡Œè½¬å‘ï¼Œå„ç±»åŸºæœ¬å‚æ•°æ ¡éªŒï¼Œæˆ–è€…ä¸å¤ç”¨çš„ä¸šåŠ¡ç®€å•å¤„ç†ç­‰ã€‚</li>
<li><strong>Serviceå±‚</strong> : ç›¸å¯¹å…·ä½“çš„ä¸šåŠ¡é€»è¾‘æœåŠ¡å±‚ã€‚</li>
<li><strong>Managerå±‚</strong> : é€šç”¨ä¸šåŠ¡å¤„ç†å±‚ï¼Œå®ƒæœ‰å¦‚ä¸‹ç‰¹å¾:</li>
</ul>
<ol>
<li>å¯¹ç¬¬ä¸‰æ–¹å¹³å°å°è£…çš„å±‚ï¼Œé¢„å¤„ç†è¿”å›ç»“æœåŠè½¬åŒ–å¼‚å¸¸ä¿¡æ¯ã€‚</li>
<li>å¯¹ Service å±‚é€šç”¨èƒ½åŠ›çš„ä¸‹æ²‰ï¼Œå¦‚ç¼“å­˜æ–¹æ¡ˆã€ä¸­é—´ä»¶é€šç”¨å¤„ç†ã€‚</li>
<li>ä¸ DAO å±‚äº¤äº’ï¼Œå¯¹å¤šä¸ª DAO çš„ç»„åˆå¤ç”¨ã€‚</li>
</ol>
<ul>
<li><strong>DAOå±‚</strong> : æ•°æ®è®¿é—®å±‚ï¼Œä¸åº•å±‚ MySQLã€Oracleã€Hbase ç­‰è¿›è¡Œæ•°æ®äº¤äº’ã€‚</li>
<li><strong>å¤–éƒ¨æ¥å£æˆ–ç¬¬ä¸‰æ–¹å¹³å°</strong> : åŒ…æ‹¬å…¶å®ƒéƒ¨é—¨ RPC å¼€æ”¾æ¥å£ï¼ŒåŸºç¡€å¹³å°ï¼Œå…¶å®ƒå…¬å¸çš„ HTTP æ¥å£ã€‚</li>
</ul>
<blockquote>
<p>ref:<br><a href="http://www.ruanyifeng.com/blog/2007/11/mvc.html" target="_blank" rel="noopener">è°ˆè°ˆMVCæ¨¡å¼</a><br><a href="https://www.jianshu.com/p/3b231e5094c5" target="_blank" rel="noopener">ASP.NET MVCä¸ä¸‰å±‚æ¶æ„</a><br><a href="https://docs.microsoft.com/zh-cn/aspnet/core/mvc/overview?view=aspnetcore-3.1" target="_blank" rel="noopener">ASP.NET Core MVC æ¦‚è¿°</a><br><a href="https://docs.microsoft.com/zh-cn/dotnet/architecture/modern-web-apps-azure/architectural-principles#separation-of-concerns" target="_blank" rel="noopener">ä½“ç³»ç»“æ„åŸåˆ™</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç¬”è®°03 å·¥å‚æ¨¡å¼</title>
    <url>/2020/02/24/note-spring-03/</url>
    <content><![CDATA[<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p9~14</p>
<hr>
<h1 id="ç¨‹åºçš„è€¦åˆä¸è§£è€¦-ä»¥jdbcæ³¨å†Œé©±åŠ¨ä¸ºä¾‹"><a href="#ç¨‹åºçš„è€¦åˆä¸è§£è€¦-ä»¥jdbcæ³¨å†Œé©±åŠ¨ä¸ºä¾‹" class="headerlink" title="ç¨‹åºçš„è€¦åˆä¸è§£è€¦ (ä»¥jdbcæ³¨å†Œé©±åŠ¨ä¸ºä¾‹)"></a>ç¨‹åºçš„è€¦åˆä¸è§£è€¦ (ä»¥jdbcæ³¨å†Œé©±åŠ¨ä¸ºä¾‹)</h1><p>jdbcæ“ä½œä¸­ï¼Œæ³¨å†Œæ•°æ®åº“é©±åŠ¨æ—¶ï¼Œæœ‰2ç§æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•1</span></span><br><span class="line">DriverManager.registerDriver(<span class="keyword">new</span> com.mysql.jdbc.Driver());</span><br><span class="line"><span class="comment">// æ–¹æ³•2</span></span><br><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br></pre></td></tr></table></figure>
<p>åœ¨pom.xmlä¸­æ·»åŠ äº†ä¾èµ–çš„æƒ…å†µä¸‹éƒ½å¯ä»¥æ­£å¸¸è¿è¡Œ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ï¼Œå¦‚æœå»æ‰è¿™æ®µä¾èµ–</p>
<p>æ–¹æ³•1æŠ¥Errorï¼Œæ— æ³•é€šè¿‡ç¼–è¯‘</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Error:(26, 56) java: ç¨‹åºåŒ…com.mysql.jdbcä¸å­˜åœ¨</span><br></pre></td></tr></table></figure>
<p>è€Œæ–¹æ³•2æŠ¥Exceptionï¼Œå¯ä»¥é€šè¿‡ç¼–è¯‘ï¼ˆæ— æ³•è¿è¡Œï¼‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: com.mysql.jdbc.Driver</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºæ–¹æ³•1ä¾èµ–ä¸€ä¸ªå…·ä½“çš„é©±åŠ¨ç±»ï¼Œè€Œæ–¹æ³•2ç”¨åå°„ï¼Œä¾èµ–çš„åªæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²<br>ä½†æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²ä»æ˜¯å†™æ­»åœ¨ä»£ç é‡Œçš„ã€‚åº”è¯¥å†™åˆ°é…ç½®æ–‡ä»¶é‡Œå»ï¼Œè¿›ä¸€æ­¥å‡å°‘è€¦åˆ</p>
<p>å®é™…å¼€å‘ä¸­åº”è¯¥åšåˆ°ï¼š</p>
<p><strong>ç¼–è¯‘æœŸä¸ä¾èµ–ï¼Œè¿è¡Œæ—¶æ‰ä¾èµ–</strong></p>
<p>è§£è€¦çš„æ€è·¯ï¼š</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨åå°„æ¥åˆ›å»ºå¯¹è±¡ï¼Œè€Œé¿å…ä½¿ç”¨newå…³é”®å­—</strong></p>
<p><strong>ç¬¬äºŒæ­¥ï¼šé€šè¿‡è¯»å–é…ç½®æ–‡ä»¶æ¥è·å–è¦åˆ›å»ºçš„å¯¹è±¡å…¨é™å®šç±»å</strong></p>
<hr>
<h1 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h1><h2 id="åŸå§‹çš„åˆ†å±‚å®ç°æ–¹æ³•"><a href="#åŸå§‹çš„åˆ†å±‚å®ç°æ–¹æ³•" class="headerlink" title="åŸå§‹çš„åˆ†å±‚å®ç°æ–¹æ³•"></a>åŸå§‹çš„åˆ†å±‚å®ç°æ–¹æ³•</h2><img src="/images/2020/202002271544168.png" width=400>

<ul>
<li>Client : æ¨¡æ‹Ÿä¸€ä¸ªè¡¨ç°å±‚ï¼Œç”¨äºè°ƒç”¨ä¸šåŠ¡å±‚</li>
<li>IAccountService : è´¦æˆ·ä¸šåŠ¡å±‚çš„æ¥å£</li>
<li>AccountServiceImpl : è´¦æˆ·çš„ä¸šåŠ¡å±‚å®ç°ç±»</li>
<li>IAccountDao : è´¦æˆ·çš„æŒä¹…å±‚æ¥å£</li>
<li>AccountDaoImpl : è´¦æˆ·çš„æŒä¹…å±‚å®ç°ç±»</li>
</ul>
<p>å…¶ä¸­ï¼Œæœ‰ä¸¤ä¸ªä¾èµ–å…³ç³»</p>
<ol>
<li>è¡¨ç°å±‚è°ƒç”¨ä¸šåŠ¡å±‚æ—¶<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        IAccountService as = <span class="keyword">new</span> AccountServiceImpl();</span><br><span class="line">        as.saveAccount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>ä¸šåŠ¡å±‚è°ƒç”¨æŒä¹…å±‚æ—¶<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> IAccountDao accountDao = <span class="keyword">new</span> AccountDaoImpl();</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">saveAccount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        accountDao.saveAccount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
éƒ½ç”¨åˆ°äº†newï¼Œè€¦åˆåº¦é«˜<br>å¦‚æœæ­¤æ—¶æŠŠAccountDaoImplçš„ä»£ç åˆ äº†ï¼ŒServiceå°±æŠ¥é”™äº†ã€‚å’Œå‰é¢jdbcä¸­ç¼–è¯‘æœŸçš„é”™è¯¯ä¸€æ ·</li>
</ol>
<p>å¦‚ä½•è§£é™¤è¿™ç§ä¾èµ–ï¼Ÿ</p>
<h2 id="Bean-amp-BeanFactory"><a href="#Bean-amp-BeanFactory" class="headerlink" title="Bean &amp; BeanFactory"></a>Bean &amp; BeanFactory</h2><p><strong>Bean</strong> â€”â€” å¯é‡ç”¨ç»„ä»¶<br>egï¼šä¸€ä¸ªDaoå¯èƒ½è¢«å¤šä¸ªServiceä½¿ç”¨ï¼Œä¸€ä¸ªServiceå¯èƒ½è¢«å¤šä¸ªServletä½¿ç”¨ï¼Œå®ƒä»¬æ˜¯å¯é‡ç”¨çš„</p>
<p><strong>JavaBean</strong> â€”â€” ç”¨javaè¯­è¨€ç¼–å†™çš„å¯é‡ç”¨ç»„ä»¶</p>
<p><strong>BeanFactory</strong> â€”â€” åˆ›å»ºBeanå¯¹è±¡çš„å·¥å‚<br>egï¼šåˆ›å»ºDaoå’ŒServiceå¯¹è±¡</p>
<p>è¦å®ç°è¿™ä¸ªå·¥å‚ï¼Œç±»ä¼¼å‰é¢jdbcï¼Œ</p>
<p>1.éœ€è¦ä¸€ä¸ª<strong>é…ç½®æ–‡ä»¶</strong>æ¥é…ç½®serviceå’Œdao<br>å†…å®¹ï¼šå”¯ä¸€æ ‡è¯†=å…¨é™å®šç±»åï¼ˆkey=value)<br>é…ç½®æ–‡ä»¶å¯ä»¥æ˜¯xmlä¹Ÿå¯ä»¥æ˜¯properties</p>
<p>2.è¯»å–é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„å†…å®¹ï¼Œé€šè¿‡==åå°„==åˆ›å»ºå¯¹è±¡</p>
<h2 id="å·¥å‚æ¨¡å¼è§£è€¦"><a href="#å·¥å‚æ¨¡å¼è§£è€¦" class="headerlink" title="å·¥å‚æ¨¡å¼è§£è€¦"></a>å·¥å‚æ¨¡å¼è§£è€¦</h2><p>åœ¨resourcesä¸­æ–°å»ºbeans.propertiesé…ç½®æ–‡ä»¶ï¼ˆæ­¤å¤„ç”¨propertieså› ä¸ºç®€å•ï¼ŒSpringä¸­ç”¨çš„æ˜¯xmlï¼‰</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">accountService</span> = <span class="string">com.itheima.service.impl.AccountServiceImpl</span></span><br><span class="line"><span class="attr">accountDao</span> = <span class="string">com.itheima.dao.impl.AccountDaoImpl</span></span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºBeanFactoryç±»è¯»å–propertiesæ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanFactory</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªPropertieså¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Properties props;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨é™æ€ä»£ç å—ä¸ºPropertieså¯¹è±¡èµ‹å€¼</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">            props = <span class="keyword">new</span> Properties();</span><br><span class="line">            <span class="comment">// è·å–propertiesæ–‡ä»¶çš„æµå¯¹è±¡</span></span><br><span class="line">            InputStream in = BeanFactory.class.getClassLoader().getResourceAsStream("bean.properties");</span><br><span class="line">            props.load(in);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="comment">// æŠ›ä¸€ä¸ªErrorï¼Œæ²¡æœ‰è·å–é…ç½®ä¿¡æ¯åé¢æƒ³éƒ½ä¸è¦æƒ³</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ExceptionInInitializerError(<span class="string">"åˆå§‹åŒ–propertieså¤±è´¥ï¼"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// æ ¹æ®Beançš„åç§°è·å–beanå¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getBean</span><span class="params">(String beanName)</span></span>&#123;</span><br><span class="line">        Object bean = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String beanPath = props.getProperty(beanName);</span><br><span class="line">            bean = Class.forName(beanPath).newInstance();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ol>
<li>è¯»é…ç½®æ–‡ä»¶æ—¶ä¸è¦ç”¨FileInputStreamï¼ŒWebå·¥ç¨‹ä¸å¥½æ‰¾è·¯å¾„ã€‚ç”¨ç±»åŠ è½½å™¨ã€‚</li>
<li>getBean()è¿”å›çš„æ˜¯Objectç±»å‹</li>
</ol>
<p>æŠŠä¸¤å¤„ä½¿ç”¨newåˆ›å»ºå¯¹è±¡çš„æ”¹ä¸ºç”¨åå°„åˆ›å»º</p>
<p>Clientä¸­</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// IAccountService as = new AccountServiceImpl();</span></span><br><span class="line">IAccountService as = (IAccountService) BeanFactory.getBean(<span class="string">"accountService"</span>);</span><br></pre></td></tr></table></figure>
<p>AccountServiceImplä¸­</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// private IAccountDao accountDao = new AccountDaoImpl();</span></span><br><span class="line"><span class="keyword">private</span> IAccountDao accountDao = (IAccountDao) BeanFactory.getBean(<span class="string">"accountDao"</span>);</span><br></pre></td></tr></table></figure>
<p>Objectç±»å¼ºè½¬ä¸ºå¯¹åº”çš„ç±»</p>
<p>æ”¹è¿›åç¨‹åºçš„UMLç±»å›¾é•¿è¿™æ ·</p>
<img src="/images/2020/20200227162837205.png" width=600>

<p>æ­¤æ—¶å¦‚æœæŠŠAccountServiceImplåˆ äº†ï¼Œç¨‹åºå¯ä»¥è¿è¡Œï¼ŒæŠ›ClassNotFoundException</p>
<h2 id="å·¥å‚æ¨¡å¼çš„é—®é¢˜ä¸æ”¹è¿›"><a href="#å·¥å‚æ¨¡å¼çš„é—®é¢˜ä¸æ”¹è¿›" class="headerlink" title="å·¥å‚æ¨¡å¼çš„é—®é¢˜ä¸æ”¹è¿›"></a>å·¥å‚æ¨¡å¼çš„é—®é¢˜ä¸æ”¹è¿›</h2><p>å¦‚æœè¦åœ¨Clientä¸­å¤šæ¬¡è°ƒç”¨Serviceï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++) &#123;</span><br><span class="line">	IAccountService as = (IAccountService) BeanFactory.getBean(<span class="string">"accountService"</span>);</span><br><span class="line">	System.out.println(as);</span><br><span class="line">	as.saveAccount();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¹¶åœ¨AccountServiceImplä¸­åŠ ä¸€ä¸ªæˆå‘˜å˜é‡i</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> IAccountDao accountDao = (IAccountDao) BeanFactory.getBean(<span class="string">"accountDao"</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">saveAccount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        accountDao.saveAccount();</span><br><span class="line">        System.out.println(i);</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œ</p>
<blockquote>
<p>com.itheima.service.impl.AccountServiceImpl@610455d6<br>ä¿å­˜äº†è´¦æˆ·<br>1<br>com.itheima.service.impl.AccountServiceImpl@511d50c0<br>ä¿å­˜äº†è´¦æˆ·<br>1<br>com.itheima.service.impl.AccountServiceImpl@60e53b93<br>ä¿å­˜äº†è´¦æˆ·<br>1<br>com.itheima.service.impl.AccountServiceImpl@5e2de80c<br>ä¿å­˜äº†è´¦æˆ·<br>1<br>com.itheima.service.impl.AccountServiceImpl@1d44bcfa<br>ä¿å­˜äº†è´¦æˆ·<br>1</p>
<p>Process finished with exit code 0</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒAccountServiceImplåˆ›å»ºäº†5æ¬¡ï¼Œæ¯æ¬¡éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡<br>æ­¤æ—¶çš„å¯¹è±¡æ˜¯å¤šä¾‹ï¼Œæ•ˆç‡æ²¡æœ‰å•ä¾‹é«˜</p>
<p>å¯ä»¥åœ¨BeanFactoryä¸­æŠŠåˆ›å»ºå‡ºçš„å¯¹è±¡éƒ½å­˜èµ·æ¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªMap,ç”¨äºå­˜æ”¾æˆ‘ä»¬è¦åˆ›å»ºçš„å¯¹è±¡ã€‚æˆ‘ä»¬æŠŠå®ƒç§°ä¹‹ä¸ºå®¹å™¨</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String,Object&gt; beans;</span><br></pre></td></tr></table></figure>
<p>åœ¨é™æ€ä»£ç å—ä¸­ï¼Œå¾—åˆ°é…ç½®æ–‡ä»¶çš„è¾“å…¥æµåï¼Œå®ä¾‹åŒ–è¿™ä¸ªå®¹å™¨ã€‚å–å‡ºé…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰çš„key-valueï¼Œåˆ›å»ºå¹¶ä¿å­˜å®ƒä»¬</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®ä¾‹åŒ–å®¹å™¨</span></span><br><span class="line">beans = <span class="keyword">new</span> HashMap&lt;String,Object&gt;();</span><br><span class="line"><span class="comment">// å–å‡ºé…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰çš„Key</span></span><br><span class="line">Enumeration keys = props.keys();</span><br><span class="line"><span class="comment">// éå†æšä¸¾</span></span><br><span class="line"><span class="keyword">while</span> (keys.hasMoreElements())&#123;</span><br><span class="line">    <span class="comment">// å–å‡ºæ¯ä¸ªKey</span></span><br><span class="line">    String key = keys.nextElement().toString();</span><br><span class="line">    <span class="comment">// æ ¹æ®keyè·å–value</span></span><br><span class="line">    String beanPath = props.getProperty(key);</span><br><span class="line">    <span class="comment">// åå°„åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">    Object value = Class.forName(beanPath).newInstance();</span><br><span class="line">    <span class="comment">// æŠŠkeyå’Œvalueå­˜å…¥å®¹å™¨ä¸­</span></span><br><span class="line">    beans.put(key,value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è·å–Beansï¼Œä¸ç”¨newInstance()ï¼Œç›´æ¥ä»å®¹å™¨ä¸­å–å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getBean</span><span class="params">(String beanName)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> beans.get(beanName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¿®æ”¹åï¼Œè°ƒç”¨5æ¬¡Serviceæ‰“å°çš„ç»“æœæ˜¯</p>
<blockquote>
<p>com.itheima.service.impl.AccountServiceImpl@610455d6<br>ä¿å­˜äº†è´¦æˆ·<br>1<br>com.itheima.service.impl.AccountServiceImpl@610455d6<br>ä¿å­˜äº†è´¦æˆ·<br>2<br>com.itheima.service.impl.AccountServiceImpl@610455d6<br>ä¿å­˜äº†è´¦æˆ·<br>3<br>com.itheima.service.impl.AccountServiceImpl@610455d6<br>ä¿å­˜äº†è´¦æˆ·<br>4<br>com.itheima.service.impl.AccountServiceImpl@610455d6<br>ä¿å­˜äº†è´¦æˆ·<br>5</p>
<p>Process finished with exit code 0</p>
</blockquote>
<p>æ­¤æ—¶çš„AccountServiceImplå°±æ˜¯å•ä¾‹çš„äº†</p>
<p>ä½†æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œè¿™ä¸ªiåœ¨å¤šçº¿ç¨‹æ—¶æ˜¯ä¸å®‰å…¨çš„<br>åº”è¯¥æŠŠå®ƒç§»åˆ°æ–¹æ³•é‡Œé¢ï¼Œå°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜äº†ï¼ˆå®é™…ä½¿ç”¨ä¸€èˆ¬ä¹Ÿæ˜¯è¿™æ ·ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//    private int i = 1;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">saveAccount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">        accountDao.saveAccount();</span><br><span class="line">        System.out.println(i);</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="å·¥å‚æ¨¡å¼ä½¿ç”¨å¥—è·¯æ€»ç»“"><a href="#å·¥å‚æ¨¡å¼ä½¿ç”¨å¥—è·¯æ€»ç»“" class="headerlink" title="å·¥å‚æ¨¡å¼ä½¿ç”¨å¥—è·¯æ€»ç»“"></a>å·¥å‚æ¨¡å¼ä½¿ç”¨å¥—è·¯æ€»ç»“</h2><p>1.åˆ›å»ºBeanFactory</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// BeanFactory.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanFactory</span> </span>&#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªPropertieså¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Properties props;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªMap,ç”¨äºå­˜æ”¾æˆ‘ä»¬è¦åˆ›å»ºçš„å¯¹è±¡ã€‚ç§°ä¹‹ä¸ºå®¹å™¨</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String,Object&gt; beans;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä½¿ç”¨é™æ€ä»£ç å—ä¸ºPropertieså¯¹è±¡èµ‹å€¼</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">            props = <span class="keyword">new</span> Properties();</span><br><span class="line">            <span class="comment">// 2.è·å–propertiesæ–‡ä»¶çš„æµå¯¹è±¡</span></span><br><span class="line">            InputStream in = BeanFactory.class.getClassLoader().getResourceAsStream("bean.properties");</span><br><span class="line">            props.load(in);</span><br><span class="line">            <span class="comment">// 3.å®ä¾‹åŒ–å®¹å™¨</span></span><br><span class="line">            beans = <span class="keyword">new</span> HashMap&lt;String,Object&gt;();</span><br><span class="line">            <span class="comment">// 4.å–å‡ºé…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰çš„Key</span></span><br><span class="line">            Enumeration keys = props.keys();</span><br><span class="line">            <span class="comment">// 5.éå†æšä¸¾</span></span><br><span class="line">            <span class="keyword">while</span> (keys.hasMoreElements())&#123;</span><br><span class="line">                <span class="comment">// å–å‡ºæ¯ä¸ªKey</span></span><br><span class="line">                String key = keys.nextElement().toString();</span><br><span class="line">                <span class="comment">// æ ¹æ®keyè·å–value</span></span><br><span class="line">                String beanPath = props.getProperty(key);</span><br><span class="line">                <span class="comment">// åå°„åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">                Object value = Class.forName(beanPath).newInstance();</span><br><span class="line">                <span class="comment">// æŠŠkeyå’Œvalueå­˜å…¥å®¹å™¨ä¸­</span></span><br><span class="line">                beans.put(key,value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ExceptionInInitializerError(<span class="string">"åˆå§‹åŒ–propertieså¤±è´¥ï¼"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®beançš„åç§°è·å–å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getBean</span><span class="params">(String beanName)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> beans.get(beanName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.é…ç½®æ–‡ä»¶</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">//</span> <span class="string">beans.properties</span></span><br><span class="line"></span><br><span class="line"><span class="attr">accountService</span>=<span class="string">com.itheima.service.impl.AccountServiceImpl</span></span><br><span class="line"><span class="attr">accountDao</span>=<span class="string">com.itheima.dao.impl.AccountDaoImpl</span></span><br></pre></td></tr></table></figure>

<p>3.è·å–Bean</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Client.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    	IAccountService as = (IAccountService) BeanFactory.getBean(<span class="string">"accountService"</span>);</span><br><span class="line">    	as.saveAccount();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç¬”è®°02 Ideaè¿è¡Œç¤ºä¾‹é¡¹ç›®çš„å‘</title>
    <url>/2020/02/24/note-spring-02/</url>
    <content><![CDATA[<p>è¡¨å»ºå¥½ä¹‹åï¼ŒIdeaé‡Œé¢ç›´æ¥æ‰“å¼€ç¤ºä¾‹å·¥ç¨‹è·‘ä¸èµ·æ¥ï¼Œmysqlçš„ä¾èµ–æœ‰é—®é¢˜</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: com.mysql.jdbc.Driver</span><br></pre></td></tr></table></figure>
<p>å¯¹æ¯”å‘ç°Mavenè·¯å¾„ä¸å¯¹</p>
<p>è¿™æ˜¯è‡ªå·±åˆ›å»ºçš„å¯ä»¥è¿è¡Œçš„Mavené¡¹ç›®é…ç½®<br><img src="/images/2020/20200224170149695.png" alt="img"></p>
<p>è¿™æ˜¯å¯¼å…¥å·¥ç¨‹çš„é…ç½®<br><img src="/images/2020/20200224170322871.png" alt="img"></p>
<p>ä¿®æ”¹è·¯å¾„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;maven&#x2F;3.6.2&#x2F;libexec</span><br><span class="line">&#x2F;Users&#x2F;coconutnut&#x2F;.m2&#x2F;settings.xml</span><br><span class="line">&#x2F;Users&#x2F;coconutnut&#x2F;.m2&#x2F;repository</span><br></pre></td></tr></table></figure>
<p>è§£å†³Driveré—®é¢˜</p>
<hr>
<p>ä¸‹ä¸€ä¸ªbug<br>Ideaä¸­ç‚¹è¿è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">MySQLNonTransientConnectionException: Client does not support authentication protocol requested by server</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://www.cnblogs.com/inconceivable/p/9186822.html" target="_blank" rel="noopener">https://www.cnblogs.com/inconceivable/p/9186822.html</a></p>
</blockquote>
<p>åœ¨MySQL Workbenchä¸­è¾“å…¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">USE mysql;</span><br><span class="line">ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;iamgroot&#39;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
<p>Ideaä¸­æç¤ºå˜æˆäº†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.sql.SQLException: Unknown initial character set index &#39;255&#39; received from server. Initial client character set can be forced via the &#39;characterEncoding&#39; property.</span><br><span class="line">	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://blog.csdn.net/qq1515312832/article/details/85614733" target="_blank" rel="noopener">https://blog.csdn.net/qq1515312832/article/details/85614733</a></p>
</blockquote>
<p>åœ¨è¿æ¥æ•°æ®åº“çš„urlååŠ ä¸Šç¼–ç æ–¹å¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Connection conn = DriverManager.getConnection(<span class="string">"jdbc:mysql://localhost:3306/groot?useUnicode=true&amp;characterEncoding=utf8"</span>,<span class="string">"root"</span>,<span class="string">"iamgroot"</span>);</span><br></pre></td></tr></table></figure>
<p>æˆåŠŸ</p>
<hr>
<p>æ€»ç»“ï¼š</p>
<ol>
<li>ä¿®æ”¹Preference-&gt;Build, Execution, Deployment-&gt;Build Tools-&gt;Mavenä¸­è·¯å¾„</li>
<li>åœ¨è¿æ¥æ•°æ®åº“çš„urlååŠ ä¸Šç¼–ç æ–¹å¼</li>
</ol>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç¬”è®°01 jdbcå¸¸ç”¨æ“ä½œ</title>
    <url>/2020/02/24/note-spring-01/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a></p>
</blockquote>
<p>ä¹‹å‰å­¦æ•°æ®åº“çš„æ—¶å€™mysqlè¸©äº†å¥½å¤šå‘ï¼Œä¸»è¦æ˜¯ç‰ˆæœ¬é—®é¢˜<br>ä¸åŒç‰ˆæœ¬è¯­æ³•æœ‰äº›ä¸å…¼å®¹<br>è®°å½•ä¸€ä¸‹Applyç”Ÿæˆçš„è¯­å¥å¤‡ç”¨</p>
<hr>
<p>ç‰ˆæœ¬:<br>mysql-8.0.19-macos10.15-x86_64<br>MySQL Workbench 8.0.16</p>
<hr>
<h1 id="MySQL-Workbenchæ“ä½œ"><a href="#MySQL-Workbenchæ“ä½œ" class="headerlink" title="MySQL Workbenchæ“ä½œ"></a>MySQL Workbenchæ“ä½œ</h1><h2 id="åˆ›å»ºschema"><a href="#åˆ›å»ºschema" class="headerlink" title="åˆ›å»ºschema"></a>åˆ›å»ºschema</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">SCHEMA</span> <span class="string">`groot`</span> ;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="åˆ›å»ºtable"><a href="#åˆ›å»ºtable" class="headerlink" title="åˆ›å»ºtable"></a>åˆ›å»ºtable</h2><p>è¿™æ˜¯bç«™æ•™ç¨‹ç»™çš„sql</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">account</span>(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">40</span>),</span><br><span class="line">	money <span class="built_in">float</span></span><br><span class="line">)<span class="built_in">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_general_ci;</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯Workbenché‡Œç”Ÿæˆçš„sql</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`groot`</span>.<span class="string">`account`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">45</span>) <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`money`</span> <span class="built_in">FLOAT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>));</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="æ’å…¥è®°å½•"><a href="#æ’å…¥è®°å½•" class="headerlink" title="æ’å…¥è®°å½•"></a>æ’å…¥è®°å½•</h2><p>bç«™æ•™ç¨‹ç»™çš„sql</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">account</span>(<span class="keyword">name</span>,money) <span class="keyword">values</span>(<span class="string">'aaa'</span>,<span class="number">1000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">account</span>(<span class="keyword">name</span>,money) <span class="keyword">values</span>(<span class="string">'bbb'</span>,<span class="number">1000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">account</span>(<span class="keyword">name</span>,money) <span class="keyword">values</span>(<span class="string">'ccc'</span>,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>
<p>Workbenché‡Œç”Ÿæˆçš„sql</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`groot`</span>.<span class="string">`account`</span> (<span class="string">`name`</span>, <span class="string">`money`</span>) <span class="keyword">VALUES</span> (<span class="string">'aaa'</span>, <span class="string">'1000'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`groot`</span>.<span class="string">`account`</span> (<span class="string">`name`</span>, <span class="string">`money`</span>) <span class="keyword">VALUES</span> (<span class="string">'bbb'</span>, <span class="string">'1000'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`groot`</span>.<span class="string">`account`</span> (<span class="string">`name`</span>, <span class="string">`money`</span>) <span class="keyword">VALUES</span> (<span class="string">'ccc'</span>, <span class="string">'1000'</span>);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="æŸ¥çœ‹è®°å½•"><a href="#æŸ¥çœ‹è®°å½•" class="headerlink" title="æŸ¥çœ‹è®°å½•"></a>æŸ¥çœ‹è®°å½•</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> groot.account;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Ideaä¸­è¿æ¥æ•°æ®åº“"><a href="#Ideaä¸­è¿æ¥æ•°æ®åº“" class="headerlink" title="Ideaä¸­è¿æ¥æ•°æ®åº“"></a>Ideaä¸­è¿æ¥æ•°æ®åº“</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1.æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.è·å–è¿æ¥</span></span><br><span class="line">Connection conn = DriverManager.getConnection(<span class="string">"jdbc:mysql://localhost:3306/groot?useUnicode=true&amp;characterEncoding=utf8"</span>,<span class="string">"root"</span>,<span class="string">"iamgroot"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.è·å–æ“ä½œæ•°æ®åº“çš„é¢„å¤„ç†å¯¹è±¡</span></span><br><span class="line">PreparedStatement pstm = conn.prepareStatement(<span class="string">"select * from account"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.æ‰§è¡ŒSQLï¼Œå¾—åˆ°ç»“æœé›†</span></span><br><span class="line">ResultSet rs = pstm.executeQuery();</span><br><span class="line"></span><br><span class="line"><span class="comment">//5.éå†ç»“æœé›†</span></span><br><span class="line"><span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">    System.out.println(rs.getString(<span class="string">"name"</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//6.é‡Šæ”¾èµ„æº</span></span><br><span class="line">rs.close();</span><br><span class="line">pstm.close();</span><br><span class="line">conn.close();</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>IntelliJ IDEA å…¥é—¨ç¬”è®°</title>
    <url>/2020/02/24/note-idea/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av71609179?from=search&amp;seid=7606544420555480673" target="_blank" rel="noopener">https://www.bilibili.com/video/av71609179?from=search&amp;seid=7606544420555480673</a></p>
</blockquote>
<hr>
<p>ç‰ˆæœ¬<br>ideaIU-2019.3.3 (å­¦ç”ŸLicense)<br>macOS Catalina 10.15.3</p>
<hr>
<h1 id="è®¾ç½®"><a href="#è®¾ç½®" class="headerlink" title="è®¾ç½®"></a>è®¾ç½®</h1><p>é¼ æ ‡æ‚¬æµ®æç¤º<br>Preferences-&gt;Editor-&gt;General-&gt;Show quick documentation on mouse move</p>
<p>è‡ªåŠ¨å¯¼åŒ…<br>Preferences-&gt;Editor-&gt;General-&gt;AutoImport-&gt;Add unambiguous imports on the fly<br>Preferences-&gt;Editor-&gt;General-&gt;AutoImport-&gt;Optimize imports on the fly (for current project)</p>
<p>æ–¹æ³•é—´åˆ†éš”ç¬¦<br>Preferences-&gt;Editor-&gt;General-&gt;Appearance-&gt;Show method separators</p>
<p>å¿½ç•¥å¤§å°å†™æç¤º<br>Preferences-&gt;Editor-&gt;General-&gt;Code Completion-&gt;Match case (ä¸å‹¾é€‰)</p>
<p>æ–‡ä»¶å¤šè¡Œæ˜¾ç¤ºæ <br>Preferences-&gt;Editor-&gt;General-&gt;Editor Tabs-&gt;Show tabs in one row (ä¸å‹¾é€‰)</p>
<p>ä¿®æ”¹æ³¨é‡Šé¢œè‰²<br>Preferences-&gt;Editor-&gt;Color Scheme-&gt;Language Defaults-&gt;Commentsä¸­</p>
<p>é¡¹ç›®å·¥ç¨‹ç¼–ç <br>Preferences-&gt;Editor-&gt;File Encodingsä¸­</p>
<p>è‡ªåŠ¨ç¼–è¯‘<br>Preferences-&gt;Build,Execution,Deployment-&gt;Compiler-&gt;Build project automatically<br>Preferences-&gt;Build,Execution,Deployment-&gt;Compiler-&gt;Compile independent modules in parallel</p>
<hr>
<h1 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h1><h2 id="å¸¸ç”¨å¿«æ·é”®"><a href="#å¸¸ç”¨å¿«æ·é”®" class="headerlink" title="å¸¸ç”¨å¿«æ·é”®"></a>å¸¸ç”¨å¿«æ·é”®</h2><p>è¡¥å…¨æç¤ºï¼š^+/<br>è‡ªåŠ¨ç”Ÿæˆï¼š^+Enter<br>å•è¡Œè¡¥å…¨ï¼šCommand+Shift+Enter<br>æ–¹æ³•å‚æ•°æç¤ºï¼šCommand+P<br>é‡æ–°æ’ç‰ˆï¼šOption+Command+L<br>Surround Withï¼šOption+Command+T<br>å¤åˆ¶è¡Œæˆ–é€‰ä¸­åŒºåŸŸï¼šCommand+D<br>åˆ é™¤è¡Œï¼šCommand+Delete</p>
<h2 id="Live-Templates-amp-Postfix-Completion"><a href="#Live-Templates-amp-Postfix-Completion" class="headerlink" title="Live Templates &amp; Postfix Completion"></a>Live Templates &amp; Postfix Completion</h2><p>æŸ¥è¯¢å®æ—¶ä»£ç æ¨¡ç‰ˆï¼šCommand+J<br>Preferences-&gt;Editor-&gt;LiveTemplateså’ŒPreferences-&gt;Editor-&gt;General-&gt;Postfix Completionä¸­ä¿®æ”¹</p>
<hr>
<h1 id="å¯¹æ™®é€šJavaé¡¹ç›®æ‰“åŒ…"><a href="#å¯¹æ™®é€šJavaé¡¹ç›®æ‰“åŒ…" class="headerlink" title="å¯¹æ™®é€šJavaé¡¹ç›®æ‰“åŒ…"></a>å¯¹æ™®é€šJavaé¡¹ç›®æ‰“åŒ…</h1><p>File-&gt;Project Structure (æˆ–å·¥å…·æ ç›´æ¥æ‰“å¼€)<br>Project Settings-&gt;Artifactsä¸­åŠ å…¥å½“å‰é¡¹ç›®</p>
<p>Build-&gt;Build Artifacts<br>åœ¨å·¥ç¨‹ç›®å½•ä¸­out-&gt;artifactsä¸­åˆ›å»ºjaråŒ…<br>æµ‹è¯•æ—¶ï¼Œè¾“å…¥java -cp åŒ…å+ç±»å</p>
<hr>
<h1 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h1><h2 id="Ideaé…ç½®Maven"><a href="#Ideaé…ç½®Maven" class="headerlink" title="Ideaé…ç½®Maven"></a>Ideaé…ç½®Maven</h2><p>Preferences-&gt;Build,Execution,Deployment-&gt;Build Tools-&gt;Maven<br>Maven home directoryä¸­å¯¼å…¥</p>
<p>Preferences-&gt;Build,Execution,Deployment-&gt;Build Tools-&gt;Maven-&gt;Importing-&gt;Import Maven projects automaticallyå‹¾ä¸Š</p>
<h2 id="åˆ›å»ºMavené¡¹ç›®"><a href="#åˆ›å»ºMavené¡¹ç›®" class="headerlink" title="åˆ›å»ºMavené¡¹ç›®"></a>åˆ›å»ºMavené¡¹ç›®</h2><p>New Project-&gt;Maven-&gt;Create from archetypeå‹¾ä¸Š<br>å¯ä»¥é€‰æ‹©maven-archetype-quickstart<br>è¿è¡Œé»˜è®¤çš„Hello Worldé¡¹ç›®</p>
<h2 id="æ‰“åŒ…Mavené¡¹ç›®"><a href="#æ‰“åŒ…Mavené¡¹ç›®" class="headerlink" title="æ‰“åŒ…Mavené¡¹ç›®"></a>æ‰“åŒ…Mavené¡¹ç›®</h2><p>Ideaçš„Terminalä¸­è¾“å…¥ (æˆ–ç³»ç»ŸTerminalåˆ‡åˆ°å·¥ç¨‹ç›®å½•ä¸‹è¾“å…¥)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mvn clean package</span><br></pre></td></tr></table></figure>
<p>æ‰“åŒ…å®Œåœ¨targetç›®å½•ä¸‹<br>è¿è¡Œè¾“å…¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java -cp target&#x2F;xxx.jar åŒ…å+ç±»å</span><br></pre></td></tr></table></figure>
<h2 id="æ’æŸ¥ä¾èµ–åŒ…å†²çª"><a href="#æ’æŸ¥ä¾èµ–åŒ…å†²çª" class="headerlink" title="æ’æŸ¥ä¾èµ–åŒ…å†²çª"></a>æ’æŸ¥ä¾èµ–åŒ…å†²çª</h2><p>pomæ–‡ä»¶ä¸­ï¼Œå³é”®Diagram-&gt;show Dependencies<br>ç»“æ„å›¾æ˜¾ç¤ºä¾èµ–å…³ç³»<br>çº¢è‰²è™šçº¿æ ‡æ˜é‡å¤<br>æœ‰æ—¶å€™é‡å¤ä¸åˆ æ‰ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œé»˜è®¤ä½¿ç”¨è·¯å¾„çŸ­çš„<br>å¦‚æœæŠ¥é”™ï¼Œæ’é™¤æ‰å³å¯ï¼Œä»£ç ä¸­è‡ªåŠ¨<exclusion>â€¦</exclusion></p>
<hr>
<h1 id="é¡¹ç›®ç›®å½•-amp-æ–‡ä»¶å¤¹ç±»å‹"><a href="#é¡¹ç›®ç›®å½•-amp-æ–‡ä»¶å¤¹ç±»å‹" class="headerlink" title="é¡¹ç›®ç›®å½•&amp;æ–‡ä»¶å¤¹ç±»å‹"></a>é¡¹ç›®ç›®å½•&amp;æ–‡ä»¶å¤¹ç±»å‹</h1><h2 id="å¯¹é¡¹ç›®ç±»å‹æ‰‹åŠ¨æ ‡æ³¨"><a href="#å¯¹é¡¹ç›®ç±»å‹æ‰‹åŠ¨æ ‡æ³¨" class="headerlink" title="å¯¹é¡¹ç›®ç±»å‹æ‰‹åŠ¨æ ‡æ³¨"></a>å¯¹é¡¹ç›®ç±»å‹æ‰‹åŠ¨æ ‡æ³¨</h2><p>åœ¨ç›®å½•ä¸Šå³é”®Mark Directory as-&gt;é€‰æ‹©ç±»å‹</p>
<p>Testï¼šå¯ç¼–è¯‘çš„å•å…ƒæµ‹è¯•ç›®å½•<br>Resourcesï¼šèµ„æºæ–‡ä»¶ç›®å½•<br>Test Resourcesï¼šå•å…ƒæµ‹è¯•èµ„æºæ–‡ä»¶ç›®å½•<br>Excludedï¼šæ’é™¤ç›®å½•ï¼ˆç›¸å½“äºè¢«åºŸå¼ƒæ‰ï¼‰<br>Generated Sourcesï¼šç±»ä¼¼srcï¼ˆåªæœ‰è¿™ç§å¯ä»¥æ–°å»ºjavaç±»å’ŒåŒ…ï¼‰</p>
<hr>
<h1 id="å¤šæ¨¡å—Mavené¡¹ç›®"><a href="#å¤šæ¨¡å—Mavené¡¹ç›®" class="headerlink" title="å¤šæ¨¡å—Mavené¡¹ç›®"></a>å¤šæ¨¡å—Mavené¡¹ç›®</h1><h2 id="æ„å»ºå¤šæ¨¡å—Mavené¡¹ç›®"><a href="#æ„å»ºå¤šæ¨¡å—Mavené¡¹ç›®" class="headerlink" title="æ„å»ºå¤šæ¨¡å—Mavené¡¹ç›®"></a>æ„å»ºå¤šæ¨¡å—Mavené¡¹ç›®</h2><p>æ–°å»ºä¸€ä¸ªMavené¡¹ç›®<br>å†æ–°å»ºModuleï¼Œå®ƒä¹Ÿä¼šæœ‰srcã€mainçš„ç›®å½•ç»“æ„</p>
<h2 id="è®¾ç½®æ¨¡å—é—´ä¾èµ–å…³ç³»"><a href="#è®¾ç½®æ¨¡å—é—´ä¾èµ–å…³ç³»" class="headerlink" title="è®¾ç½®æ¨¡å—é—´ä¾èµ–å…³ç³»"></a>è®¾ç½®æ¨¡å—é—´ä¾èµ–å…³ç³»</h2><p>Project Structure-&gt;Modules-&gt;é€‰ä¸­ä¸€ä¸ªæ¨¡å—-&gt;Dependenciesä¸­æ·»åŠ ï¼Œç„¶åå‹¾é€‰ä¸Š<br>pom.xmlä¸­ä¹Ÿè®¸æ·»åŠ </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xxx<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ·»åŠ ä¾èµ–åå¯ä»¥ç›´æ¥å¼•ç”¨è¢«ä¾èµ–æ¨¡å—ä¸­çš„ä»£ç </p>
<hr>
<h1 id="Maven-Webé¡¹ç›®"><a href="#Maven-Webé¡¹ç›®" class="headerlink" title="Maven Webé¡¹ç›®"></a>Maven Webé¡¹ç›®</h1><h2 id="åˆ›å»ºMaven-Webé¡¹ç›®"><a href="#åˆ›å»ºMaven-Webé¡¹ç›®" class="headerlink" title="åˆ›å»ºMaven Webé¡¹ç›®"></a>åˆ›å»ºMaven Webé¡¹ç›®</h2><p>New Project-&gt;Maven-&gt;Create from archetype<br>å¯ä»¥é€‰æ‹©maven-archetype-webapp</p>
<h2 id="é…ç½®Tomcat"><a href="#é…ç½®Tomcat" class="headerlink" title="é…ç½®Tomcat"></a>é…ç½®Tomcat</h2><p>å·¥å…·æ ä¸­build(ç»¿è‰²é”¤å­)æ—è¾¹ï¼ŒAdd Configuration<br>æ–°åŠ Tomcat-&gt;Local ï¼ˆéœ€å…ˆä¸‹è½½æ”¾åœ¨æœ¬åœ°ï¼Œé…ç½®è·¯å¾„ï¼‰</p>
<p>Serverä¸­å¯ä»¥ä¿®æ”¹é»˜è®¤æµè§ˆå™¨ï¼Œå¯ä»¥ä¿®æ”¹ç«¯å£å·</p>
<p>Deploymentä¸­æ·»åŠ Artifact<br>xxx:war exploded</p>
<p>å³å¯å¯åŠ¨è¿è¡Œ<br>é»˜è®¤index.jspæ˜¾ç¤ºHello World!</p>
<h2 id="æ‰“åŒ…è¿è¡Œ"><a href="#æ‰“åŒ…è¿è¡Œ" class="headerlink" title="æ‰“åŒ…è¿è¡Œ"></a>æ‰“åŒ…è¿è¡Œ</h2><p>å³ä¾§Mavenå·¥å…·æ ä¸­<br>Lifecycle-&gt;package-&gt;Run Maven Build<br>install-&gt;Run â€˜xxx [install]â€™<br>æ‰“åŒ…æˆåŠŸåï¼Œåœ¨targetæ–‡ä»¶å¤¹ä¸‹</p>
<p>waråŒ…å¯ä»¥éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Š</p>
<p>ä¹Ÿå¯ä»¥æ‹·è´åˆ°æœ¬åœ°Tomcatçš„webappç›®å½•ä¸‹<br>è¿è¡ŒTomcatçš„binç›®å½•ä¸‹çš„startupï¼Œå¯åŠ¨tomcat<br>å³å¯æµè§ˆå™¨è®¿é—®<br>ç»“æŸåshutdownå…³é—­Tomcat</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>tool</tag>
      </tags>
  </entry>
</search>
