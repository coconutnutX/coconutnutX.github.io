<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Gallery V0.1</title>
    <url>/2021/02/16/unity/</url>
    <content><![CDATA[<p>ÂÅö‰∫Ü‰∏™ÂàùÁâàËØïËØïÊ∞¥~üòÉ</p>
<h1 id="ÂäüËÉΩ"><a href="#ÂäüËÉΩ" class="headerlink" title="ÂäüËÉΩ"></a>ÂäüËÉΩ</h1><h2 id="ÁÇπÂáªÂØªË∑Ø"><a href="#ÁÇπÂáªÂØªË∑Ø" class="headerlink" title="ÁÇπÂáªÂØªË∑Ø"></a>ÁÇπÂáªÂØªË∑Ø</h2><img src="/images/2021/Feb-16-2021 18-29-31.gif">

<h2 id="Èù†ËøëÊòæÁ§∫‰ªãÁªç"><a href="#Èù†ËøëÊòæÁ§∫‰ªãÁªç" class="headerlink" title="Èù†ËøëÊòæÁ§∫‰ªãÁªç"></a>Èù†ËøëÊòæÁ§∫‰ªãÁªç</h2><img src="/images/2021/Feb-16-2021 18-29-44.gif">

<h2 id="Èº†Ê†áÊªöÂä®ÂâçÂêéÂπ≥Áßª"><a href="#Èº†Ê†áÊªöÂä®ÂâçÂêéÂπ≥Áßª" class="headerlink" title="Èº†Ê†áÊªöÂä®ÂâçÂêéÂπ≥Áßª"></a>Èº†Ê†áÊªöÂä®ÂâçÂêéÂπ≥Áßª</h2><img src="/images/2021/Feb-16-2021 18-30-18.gif">

<h2 id="ÈîÆÁõòÂâçÂêéÂ∑¶Âè≥Âπ≥Áßª"><a href="#ÈîÆÁõòÂâçÂêéÂ∑¶Âè≥Âπ≥Áßª" class="headerlink" title="ÈîÆÁõòÂâçÂêéÂ∑¶Âè≥Âπ≥Áßª"></a>ÈîÆÁõòÂâçÂêéÂ∑¶Âè≥Âπ≥Áßª</h2><img src="/images/2021/Feb-16-2021 18-30-32.gif">

<h2 id="Èº†Ê†áÊãñÊãΩÊóãËΩ¨ËßÜËßí"><a href="#Èº†Ê†áÊãñÊãΩÊóãËΩ¨ËßÜËßí" class="headerlink" title="Èº†Ê†áÊãñÊãΩÊóãËΩ¨ËßÜËßí"></a>Èº†Ê†áÊãñÊãΩÊóãËΩ¨ËßÜËßí</h2><img src="/images/2021/Feb-16-2021 18-30-55.gif">

<h1 id="È°πÁõÆÁªìÊûÑ"><a href="#È°πÁõÆÁªìÊûÑ" class="headerlink" title="È°πÁõÆÁªìÊûÑ"></a>È°πÁõÆÁªìÊûÑ</h1><img src="/images/2021/screencapture2021-02-16 PM6.27.11.jpg">

<h1 id="‰ª£Á†Å"><a href="#‰ª£Á†Å" class="headerlink" title="‰ª£Á†Å"></a>‰ª£Á†Å</h1><h2 id="PlayerController"><a href="#PlayerController" class="headerlink" title="PlayerController"></a>PlayerController</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerController : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [SerializeField, Range(0f,500f)]</span><br><span class="line">    private float mouseLookSensitivity &#x3D; 200f;</span><br><span class="line"></span><br><span class="line">    [SerializeField, Range(0f,100f)]</span><br><span class="line">    private float mouseMoveSensitivity &#x3D; 10f;</span><br><span class="line"></span><br><span class="line">    [SerializeField, Range(0f,10f)]</span><br><span class="line">    private float keyMoveSensitivity &#x3D; 5f;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Transform cameraTransform &#x3D; null;</span><br><span class="line"></span><br><span class="line">    private float cameraRotation &#x3D; 0f;</span><br><span class="line">    private int mouseDownCount &#x3D; 0;</span><br><span class="line"></span><br><span class="line">    UnityEngine.AI.NavMeshAgent agent;</span><br><span class="line"></span><br><span class="line">    GameObject clickEffect;</span><br><span class="line"></span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        agent &#x3D; GetComponent&lt;UnityEngine.AI.NavMeshAgent&gt;();</span><br><span class="line"></span><br><span class="line">        clickEffect &#x3D; Resources.Load&lt;GameObject&gt;(&quot;Prefabs&#x2F;ClickEffect&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if(Input.GetMouseButtonUp(0))&#123;</span><br><span class="line">            &#x2F;&#x2F; if is click</span><br><span class="line">            if(mouseDownCount &lt; 2)&#123;</span><br><span class="line">                &#x2F;&#x2F; click to navigate</span><br><span class="line">                RaycastHit hit;</span><br><span class="line">                Ray ray &#x3D; Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">                if(Physics.Raycast(ray, out hit, Mathf.Infinity))&#123;</span><br><span class="line">                    &#x2F;&#x2F; move when hit floor</span><br><span class="line">                    if(hit.transform.tag &#x3D;&#x3D; &quot;Floor&quot;)&#123;</span><br><span class="line">                        agent.SetDestination(hit.point);</span><br><span class="line"></span><br><span class="line">                        &#x2F;&#x2F; click effect</span><br><span class="line">                        GameObject clickEffectObject &#x3D; Instantiate(clickEffect);</span><br><span class="line">                        clickEffectObject.transform.position &#x3D; hit.point;</span><br><span class="line">                        Destroy(clickEffectObject, 1);</span><br><span class="line">                    &#125; </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            mouseDownCount &#x3D; 0;</span><br><span class="line"></span><br><span class="line">        &#125;else if(Input.GetMouseButton(0))&#123;</span><br><span class="line">            &#x2F;&#x2F; stop navigation</span><br><span class="line">            agent.ResetPath();</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; get mouse position</span><br><span class="line">            float mouseX &#x3D; Input.GetAxis(&quot;Mouse X&quot;) * mouseLookSensitivity * Time.deltaTime;</span><br><span class="line">            float mouseY &#x3D; Input.GetAxis(&quot;Mouse Y&quot;) * mouseLookSensitivity * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; rotate camera up and down</span><br><span class="line">            cameraRotation -&#x3D; mouseY;</span><br><span class="line">            cameraRotation &#x3D; Mathf.Clamp(cameraRotation, -30f, 30f);</span><br><span class="line">            cameraTransform.localRotation &#x3D; Quaternion.Euler(cameraRotation, 0f, 0f);</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; rotate player left and right</span><br><span class="line">            transform.Rotate(Vector3.up * (mouseX));</span><br><span class="line"></span><br><span class="line">            mouseDownCount++;</span><br><span class="line"></span><br><span class="line">        &#125;else if(Input.GetAxis(&quot;Mouse ScrollWheel&quot;)!&#x3D;0 || Input.GetAxis(&quot;Horizontal&quot;)!&#x3D;0 || Input.GetAxis(&quot;Vertical&quot;)!&#x3D;0)&#123;</span><br><span class="line">            &#x2F;&#x2F; stop navigation</span><br><span class="line">            agent.ResetPath();</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; mouse scroll input</span><br><span class="line">            float mouseV &#x3D; Input.GetAxis(&quot;Mouse ScrollWheel&quot;);</span><br><span class="line">            &#x2F;&#x2F; keyborad input</span><br><span class="line">            float keyV &#x3D; Input.GetAxis(&quot;Vertical&quot;);</span><br><span class="line">            float keyH &#x3D; Input.GetAxis(&quot;Horizontal&quot;);</span><br><span class="line"></span><br><span class="line">            Vector3 move &#x3D; transform.forward * (mouseV * mouseMoveSensitivity + keyV * keyMoveSensitivity)</span><br><span class="line">                        + transform.right * keyH * keyMoveSensitivity;</span><br><span class="line"></span><br><span class="line">            agent.Move(move * Time.deltaTime);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ArtTextController"><a href="#ArtTextController" class="headerlink" title="ArtTextController"></a>ArtTextController</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.UI;</span><br><span class="line"></span><br><span class="line">public class ArtTextController : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [SerializeField]</span><br><span class="line">    private string title;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private string description;</span><br><span class="line"></span><br><span class="line">    [SerializeField, Range(0f,10f)]</span><br><span class="line">    private float displayTextDistance &#x3D; 5f;</span><br><span class="line"></span><br><span class="line">    private Transform playerTransform;</span><br><span class="line"></span><br><span class="line">    private Text displayArtTitle;</span><br><span class="line">    private Text displayArtDescription;</span><br><span class="line"></span><br><span class="line">    private float dist;</span><br><span class="line"></span><br><span class="line">    private bool check;</span><br><span class="line"></span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; get player transform</span><br><span class="line">        playerTransform &#x3D; GameObject.FindWithTag(&quot;Player&quot;).GetComponent&lt;Transform&gt;();</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; get UI text</span><br><span class="line">        displayArtTitle &#x3D; GameObject.FindWithTag(&quot;ArtTitle&quot;).GetComponent&lt;Text&gt;();</span><br><span class="line">        displayArtDescription &#x3D; GameObject.FindWithTag(&quot;ArtDescription&quot;).GetComponent&lt;Text&gt;();</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; set default text</span><br><span class="line">        displayArtTitle.text &#x3D; &quot;&quot;;</span><br><span class="line">        displayArtDescription.text &#x3D; &quot;&quot;;</span><br><span class="line"></span><br><span class="line">        check &#x3D; false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if(playerTransform)</span><br><span class="line">        &#123;</span><br><span class="line">            &#x2F;&#x2F; distance between art and player</span><br><span class="line">            dist &#x3D; Vector3.Distance(transform.position, playerTransform.position);</span><br><span class="line">            if (dist &lt; displayTextDistance)</span><br><span class="line">            &#123;</span><br><span class="line">                displayArtTitle.text &#x3D; title;</span><br><span class="line">                displayArtDescription.text &#x3D; description;</span><br><span class="line">                check &#x3D; true;</span><br><span class="line">            &#125;</span><br><span class="line">            &#x2F;&#x2F; turn off display</span><br><span class="line">            if (dist &gt; displayTextDistance &amp;&amp; check &#x3D;&#x3D; true)</span><br><span class="line">            &#123;</span><br><span class="line">                Start();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>unity</tag>
      </tags>
  </entry>
  <entry>
    <title>Unity Note - Project09 Movement</title>
    <url>/2021/02/15/unity-09/</url>
    <content><![CDATA[<p>ÊúÄÁªàÊÉ≥Ë¶ÅÂÅöÁöÑÁßªÂä®ÊñπÂºèÔºö</p>
<ul>
<li>ÁÇπÂáªÂú∞Èù¢ÂØºËà™</li>
<li>ÊãñÊãΩÊóãËΩ¨</li>
<li>Áº©ÊîæÂπ≥Áßª</li>
<li>ÁÇπÂáªÁîªÂØºËà™</li>
</ul>
<p>‰∫§‰∫íÊñπÂºèÂèÇËÄÉÔºö</p>
<blockquote>
<p><a href="https://sketchfab.com/3d-models/richards-art-gallery-audio-tour-0e3e19faa6474fd5974e6a7ed1b221d8" target="_blank" rel="noopener">https://sketchfab.com/3d-models/richards-art-gallery-audio-tour-0e3e19faa6474fd5974e6a7ed1b221d8</a></p>
</blockquote>
<h1 id="Êê≠Âª∫"><a href="#Êê≠Âª∫" class="headerlink" title="Êê≠Âª∫"></a>Êê≠Âª∫</h1><h2 id="ÁÇπÂáªÁßªÂä®"><a href="#ÁÇπÂáªÁßªÂä®" class="headerlink" title="ÁÇπÂáªÁßªÂä®"></a>ÁÇπÂáªÁßªÂä®</h2><p>ÂèÇËÄÉProject02ÔºåAIÂØºËà™+NavMeshAgent</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if(Input.GetMouseButtonDown(0))&#123;</span><br><span class="line">  RaycastHit hit;</span><br><span class="line">  Ray ray &#x3D; Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">  if(Physics.Raycast(ray, out hit, Mathf.Infinity))&#123;</span><br><span class="line">    agent.SetDestination(hit.point);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Âà§Êñ≠ËêΩÁÇπÔºåÂè™ÊúâÊòØÂú∞Èù¢ÊâçÁßªÂä®ÔºàÂú∞Èù¢ÊâìTagÔºâ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if(Input.GetMouseButtonDown(0))&#123;</span><br><span class="line">	RaycastHit hit;</span><br><span class="line">	Ray ray &#x3D; Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">	if(Physics.Raycast(ray, out hit, Mathf.Infinity))&#123;</span><br><span class="line">		if(hit.transform.tag &#x3D;&#x3D; &quot;Floor&quot;)&#123;</span><br><span class="line">			agent.SetDestination(hit.point);</span><br><span class="line">		&#125; </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÁÇπÂáªÁâπÊïà</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; click to navigate</span><br><span class="line">if(Input.GetMouseButtonDown(0))&#123;</span><br><span class="line">    RaycastHit hit;</span><br><span class="line">    Ray ray &#x3D; Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">    if(Physics.Raycast(ray, out hit, Mathf.Infinity))&#123;</span><br><span class="line">        &#x2F;&#x2F; move when hit floor</span><br><span class="line">        if(hit.transform.tag &#x3D;&#x3D; &quot;Floor&quot;)&#123;</span><br><span class="line">            agent.SetDestination(hit.point);</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; click effect</span><br><span class="line">            GameObject clickEffectObject &#x3D; Instantiate(clickEffect);</span><br><span class="line">            clickEffectObject.transform.position &#x3D; hit.point;</span><br><span class="line">            Destroy(clickEffectObject, 0.5f);</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÊãñÊãΩÊóãËΩ¨ËßÜËßí"><a href="#ÊãñÊãΩÊóãËΩ¨ËßÜËßí" class="headerlink" title="ÊãñÊãΩÊóãËΩ¨ËßÜËßí"></a>ÊãñÊãΩÊóãËΩ¨ËßÜËßí</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; get mouse position</span><br><span class="line">float mouseX &#x3D; Input.GetAxis(&quot;Mouse X&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line">float mouseY &#x3D; Input.GetAxis(&quot;Mouse Y&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; rotate camera up and down</span><br><span class="line">cameraRotation -&#x3D; mouseY;</span><br><span class="line">cameraRotation &#x3D; Mathf.Clamp(cameraRotation, -30f, 30f);</span><br><span class="line">cameraTransform.localRotation &#x3D; Quaternion.Euler(cameraRotation, 0f, 0f);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; rotate player left and right</span><br><span class="line">transform.Rotate(Vector3.up * (mouseX));</span><br></pre></td></tr></table></figure>

<p>Ê≠§Êó∂ÈïøÊåâÊãñÊãΩÂíåÁÇπÂáªÂØªË∑Ø‰ºöÊ∑∑ÔºåÂä†‰∏Ä‰∏™mouseDownCountËÆ°Êï∞</p>
<h2 id="Áº©ÊîæÂâçÂêéÁßªÂä®"><a href="#Áº©ÊîæÂâçÂêéÁßªÂä®" class="headerlink" title="Áº©ÊîæÂâçÂêéÁßªÂä®"></a>Áº©ÊîæÂâçÂêéÁßªÂä®</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; stop navigation</span><br><span class="line">agent.ResetPath();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; scroll to move forward and backward</span><br><span class="line">Vector3 move &#x3D; transform.forward * Input.GetAxis(&quot;Mouse ScrollWheel&quot;) * scrollSensitivity;</span><br><span class="line">agent.Move(move * Time.deltaTime);</span><br></pre></td></tr></table></figure>

<p>ÔºÅËøôÈáå‰∏ÄÂÆöË¶ÅÂÖàÂÅúÊ≠¢ÂØªË∑ØÔºåÂê¶Âàô‰ºö‰π±Êäñ</p>
<h1 id="ÊúÄÁªà"><a href="#ÊúÄÁªà" class="headerlink" title="ÊúÄÁªà"></a>ÊúÄÁªà</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerController : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [SerializeField, Range(0f,100f)]</span><br><span class="line">    private float scrollSensitivity &#x3D; 10f;</span><br><span class="line"></span><br><span class="line">    [SerializeField, Range(0f,500f)]</span><br><span class="line">    private float mouseSensitivity &#x3D; 200f;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Transform cameraTransform &#x3D; null;</span><br><span class="line"></span><br><span class="line">    private float cameraRotation &#x3D; 0f;</span><br><span class="line">    private int mouseDownCount &#x3D; 0;</span><br><span class="line"></span><br><span class="line">    UnityEngine.AI.NavMeshAgent agent;</span><br><span class="line"></span><br><span class="line">    GameObject clickEffect;</span><br><span class="line"></span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        agent &#x3D; GetComponent&lt;UnityEngine.AI.NavMeshAgent&gt;();</span><br><span class="line"></span><br><span class="line">        clickEffect &#x3D; Resources.Load&lt;GameObject&gt;(&quot;Prefabs&#x2F;ClickEffect&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if(Input.GetMouseButtonUp(0))&#123;</span><br><span class="line">            &#x2F;&#x2F; if is click</span><br><span class="line">            if(mouseDownCount &lt; 2)&#123;</span><br><span class="line">                &#x2F;&#x2F; click to navigate</span><br><span class="line">                RaycastHit hit;</span><br><span class="line">                Ray ray &#x3D; Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">                if(Physics.Raycast(ray, out hit, Mathf.Infinity))&#123;</span><br><span class="line">                    &#x2F;&#x2F; move when hit floor</span><br><span class="line">                    if(hit.transform.tag &#x3D;&#x3D; &quot;Floor&quot;)&#123;</span><br><span class="line">                        agent.SetDestination(hit.point);</span><br><span class="line"></span><br><span class="line">                        &#x2F;&#x2F; click effect</span><br><span class="line">                        GameObject clickEffectObject &#x3D; Instantiate(clickEffect);</span><br><span class="line">                        clickEffectObject.transform.position &#x3D; hit.point;</span><br><span class="line">                        Destroy(clickEffectObject, 1);</span><br><span class="line">                    &#125; </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            mouseDownCount &#x3D; 0;</span><br><span class="line">        &#125;else if(Input.GetAxis(&quot;Mouse ScrollWheel&quot;) !&#x3D; 0)&#123;</span><br><span class="line">            &#x2F;&#x2F; stop navigation</span><br><span class="line">            agent.ResetPath();</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; scroll to move forward and backward</span><br><span class="line">            Vector3 move &#x3D; transform.forward * Input.GetAxis(&quot;Mouse ScrollWheel&quot;) * scrollSensitivity;</span><br><span class="line">            agent.Move(move * Time.deltaTime);</span><br><span class="line">        &#125;else if(Input.GetMouseButton(0))&#123;</span><br><span class="line">            &#x2F;&#x2F; stop navigation</span><br><span class="line">            agent.ResetPath();</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; get mouse position</span><br><span class="line">            float mouseX &#x3D; Input.GetAxis(&quot;Mouse X&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line">            float mouseY &#x3D; Input.GetAxis(&quot;Mouse Y&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; rotate camera up and down</span><br><span class="line">            cameraRotation -&#x3D; mouseY;</span><br><span class="line">            cameraRotation &#x3D; Mathf.Clamp(cameraRotation, -30f, 30f);</span><br><span class="line">            cameraTransform.localRotation &#x3D; Quaternion.Euler(cameraRotation, 0f, 0f);</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; rotate player left and right</span><br><span class="line">            transform.Rotate(Vector3.up * (mouseX));</span><br><span class="line"></span><br><span class="line">            mouseDownCount++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÁÇπÂáªÂØªË∑Ø</p>
<img src="/images/2021/Feb-16-2021 16-49-06.gif">

<p>ÊªöÂä®ÂâçÂêéÂπ≥Áßª</p>
<img src="/images/2021/Feb-16-2021 16-49-24.gif">

<p>ÊãñÊãΩÊóãËΩ¨ËßÜËßí</p>
<img src="/images/2021/Feb-16-2021 16-49-34.gif">

<p>‰∏îÂØªË∑ØËøáÁ®ã‰∏≠ÔºåÊªöÂä®ÊàñÊãñÊãΩÂùáÊâìÊñ≠ÂØªË∑Ø</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>unity</tag>
      </tags>
  </entry>
  <entry>
    <title>Unity Note - Project08 Gallery</title>
    <url>/2021/02/15/unity/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://learn.unity.com/project/create-a-personal-3d-gallery-project-with-unity" target="_blank" rel="noopener">Create a Personal 3D Gallery Project with Unity</a></p>
</blockquote>
<ol>
<li><p>Use the [first person controller](First Person All-in-One) in asset store</p>
</li>
<li><p>Model scale ~= Cube 40*40</p>
</li>
</ol>
<img src="/images/2021/screencapture2021-02-15 PM6.13.09.jpg">

<ol start="3">
<li><p>Add Component-&gt;Physic-&gt;Mesh Collider to models</p>
</li>
<li><p>Light: turn off shadow &amp; increase range to 20</p>
</li>
<li><p>Sound effect for different walking materials</p>
<p>Change Material in Mesh Collider, not Mesh Renderer</p>
</li>
</ol>
<img src="/images/2021/screencapture2021-02-15 PM6.26.31.jpg">

<ol start="6">
<li><p>Add UI-&gt;Text</p>
<p>When setting Rect Transform, press Alt(Option) to set position as well</p>
</li>
<li><p>Add Tag to Text</p>
</li>
<li><p>Add Image: Drag jpg onto Plane</p>
</li>
<li><p>Close to display text</p>
</li>
</ol>
<p>drag script onto image</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.UI;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class Proximity : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public string newTitle;</span><br><span class="line">    public string newAuthor;</span><br><span class="line">    public string newDesc;</span><br><span class="line">    private Transform other;</span><br><span class="line">    private Text myTitle;</span><br><span class="line">    private Text myAuthor;</span><br><span class="line">    private Text myDesc;</span><br><span class="line">    private float dist;</span><br><span class="line">    private GameObject player;</span><br><span class="line">    private GameObject message1;</span><br><span class="line">    private GameObject message2;</span><br><span class="line">    private GameObject message3;</span><br><span class="line">    private bool check;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Start is called before the first frame update</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        player &#x3D; GameObject.FindWithTag(&quot;Player&quot;);</span><br><span class="line">        other &#x3D; player.GetComponent&lt;Transform&gt;();</span><br><span class="line">        message1 &#x3D; GameObject.FindWithTag(&quot;ArtTitle&quot;);</span><br><span class="line">        message2 &#x3D; GameObject.FindWithTag(&quot;ArtAuthor&quot;);</span><br><span class="line">        message3 &#x3D; GameObject.FindWithTag(&quot;ArtDescription&quot;);</span><br><span class="line">        myTitle &#x3D; message1.GetComponent&lt;Text&gt;();</span><br><span class="line">        myTitle.text &#x3D; &quot;&quot;;</span><br><span class="line">        myAuthor &#x3D; message2.GetComponent&lt;Text&gt;();</span><br><span class="line">        myAuthor.text &#x3D; &quot;&quot;;</span><br><span class="line">        myDesc &#x3D; message3.GetComponent&lt;Text&gt;();</span><br><span class="line">        myDesc.text &#x3D; &quot;&quot;;</span><br><span class="line">        check &#x3D; false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if (other)</span><br><span class="line">        &#123;</span><br><span class="line">            dist &#x3D; Vector3.Distance(transform.position, other.position);</span><br><span class="line">            print(&quot;Distance to player: &quot; + dist);</span><br><span class="line">            if (dist &lt; 4)</span><br><span class="line">            &#123;</span><br><span class="line">                myTitle.text &#x3D; newTitle;</span><br><span class="line">                myAuthor.text &#x3D; newAuthor;</span><br><span class="line">                myDesc.text &#x3D; newDesc;</span><br><span class="line">                check &#x3D; true;</span><br><span class="line">            &#125;</span><br><span class="line">            if (dist &gt; 4 &amp;&amp; check &#x3D;&#x3D; true)</span><br><span class="line">            &#123;</span><br><span class="line">                Start();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>unity</tag>
      </tags>
  </entry>
  <entry>
    <title>Unity Note - Project07 Scroll</title>
    <url>/2021/02/14/unity/</url>
    <content><![CDATA[<h1 id="Test-open-animation"><a href="#Test-open-animation" class="headerlink" title="Test open animation"></a>Test open animation</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using DG.Tweening;</span><br><span class="line"></span><br><span class="line">public class ReelController : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [SerializeField]</span><br><span class="line">    private float radius &#x3D; 0.1f; &#x2F;&#x2F; Cylinder radius</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private float length &#x3D; 8.0f; &#x2F;&#x2F; Quad length</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private float innerHeight &#x3D; 1.0f; &#x2F;&#x2F; Quad height</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private float outerHeight &#x3D; 0.8f; &#x2F;&#x2F; Cylinder height</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private float openDuration &#x3D; 1.0f;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Ease moveEase &#x3D; Ease.Linear;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Transform leftCylinderTransform &#x3D; null;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Transform middleQuadTransform &#x3D; null;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Transform rightCylinderTransform &#x3D; null;</span><br><span class="line"></span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; set original position</span><br><span class="line">        middleQuadTransform.localScale &#x3D; new Vector3(radius*2,innerHeight,0);</span><br><span class="line">        middleQuadTransform.position &#x3D; new Vector3(0,0,radius);</span><br><span class="line"></span><br><span class="line">        leftCylinderTransform.localScale &#x3D; new Vector3(radius*2,outerHeight,radius*2);</span><br><span class="line">        leftCylinderTransform.position &#x3D; new Vector3(-radius,0,0);</span><br><span class="line"></span><br><span class="line">        rightCylinderTransform.localScale &#x3D; new Vector3(radius*2,outerHeight,radius*2);</span><br><span class="line">        rightCylinderTransform.position &#x3D; new Vector3(radius,0,0);</span><br><span class="line"></span><br><span class="line">        OpenReel();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void OpenReel()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; open canvas</span><br><span class="line">        middleQuadTransform.DOScaleX(length + radius*2, openDuration).SetEase(moveEase);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; move cylinders</span><br><span class="line">        leftCylinderTransform.DOMoveX(leftCylinderTransform.position.x - length&#x2F;2, openDuration).SetEase(moveEase);</span><br><span class="line">        rightCylinderTransform.DOMoveX(rightCylinderTransform.position.x + length&#x2F;2, openDuration).SetEase(moveEase);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2021/Feb-14-2021 20-11-48.gif">

<h1 id="Display-image"><a href="#Display-image" class="headerlink" title="Display image"></a>Display image</h1><p>Drag images to asset folder -&gt; Set type to Sprite -&gt; Apply</p>
<p>Canvas -&gt; Set Render Mode to World Space</p>
<p>Make sure all objects are positioned at (0, 0, 0)</p>
<img src="/images/2021/screencapture2021-02-14 PM9.43.21.jpg">

<p>Test size</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">RectTransform rectTransfrom &#x3D; GetComponentInChildren&lt;Image&gt;().GetComponent&lt;RectTransform&gt;();</span><br><span class="line"></span><br><span class="line">Debug.Log(&quot;rectTransfrom: &quot;+rectTransfrom);</span><br><span class="line">Debug.Log(&quot;rectTransfrom.rect: &quot;+rectTransfrom.rect);</span><br><span class="line">Debug.Log(&quot;rectTransfrom.sizeDelta: &quot;+rectTransfrom.sizeDelta);</span><br><span class="line"></span><br><span class="line">Rect rect &#x3D; rectTransfrom.rect;</span><br><span class="line">rectTransfrom.sizeDelta &#x3D; new Vector2(rect.width&#x2F;rect.height*canvasHeight,canvasHeight);</span><br><span class="line"></span><br><span class="line">Debug.Log(&quot;rectTransfrom: &quot;+rectTransfrom);</span><br><span class="line">Debug.Log(&quot;rectTransfrom.rect: &quot;+rectTransfrom.rect);</span><br><span class="line">Debug.Log(&quot;rectTransfrom.sizeDelta: &quot;+rectTransfrom.sizeDelta);</span><br></pre></td></tr></table></figure>

<img src="/images/2021/screencapture2021-02-14 PM9.45.02.jpg">

<h1 id="Set-scroll-size"><a href="#Set-scroll-size" class="headerlink" title="Set scroll size"></a>Set scroll size</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.UI;</span><br><span class="line">using DG.Tweening;</span><br><span class="line"></span><br><span class="line">public class ReelController : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [SerializeField]</span><br><span class="line">    private float canvasHeight &#x3D; 1000;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private float cylinderHeight &#x3D; 600;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private float cylinderRadius &#x3D; 30;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private float openDuration &#x3D; 1.0f;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Ease moveEase &#x3D; Ease.Linear;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Transform leftCylinderTransform &#x3D; null;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Transform rightCylinderTransform &#x3D; null;</span><br><span class="line"></span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; get image rectTransfrom</span><br><span class="line">        RectTransform rectTransfrom &#x3D; GetComponentInChildren&lt;Image&gt;().GetComponent&lt;RectTransform&gt;();</span><br><span class="line">        &#x2F;&#x2F; get original image size</span><br><span class="line">        Rect rect &#x3D; rectTransfrom.rect;</span><br><span class="line">        &#x2F;&#x2F; scale to default height</span><br><span class="line">        float canvasWidth &#x3D; rect.width &#x2F; rect.height * canvasHeight;</span><br><span class="line">        rectTransfrom.sizeDelta &#x3D; new Vector2(canvasWidth, canvasHeight);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; set original position</span><br><span class="line">        leftCylinderTransform.localScale &#x3D; new Vector3(cylinderRadius*2, cylinderHeight, cylinderRadius*2);</span><br><span class="line">        leftCylinderTransform.position &#x3D; new Vector3(-cylinderRadius - canvasWidth&#x2F;2,0,0);</span><br><span class="line"></span><br><span class="line">        rightCylinderTransform.localScale &#x3D; new Vector3(cylinderRadius*2, cylinderHeight, cylinderRadius*2);</span><br><span class="line">        rightCylinderTransform.position &#x3D; new Vector3(cylinderRadius + canvasWidth&#x2F;2,0,0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2021/screencapture2021-02-14 PM10.09.59.jpg">

<h1 id="Scroll-animation"><a href="#Scroll-animation" class="headerlink" title="Scroll animation"></a>Scroll animation</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.UI;</span><br><span class="line">using DG.Tweening;</span><br><span class="line"></span><br><span class="line">public class ScrollController : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [SerializeField]</span><br><span class="line">    private float canvasHeight &#x3D; 1000;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private float cylinderHeight &#x3D; 600;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private float cylinderRadius &#x3D; 30;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private float openDuration &#x3D; 1.0f;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Ease moveEase &#x3D; Ease.Linear;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Transform leftCylinderTransform &#x3D; null;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Transform rightCylinderTransform &#x3D; null;</span><br><span class="line"></span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; Open();</span><br><span class="line"></span><br><span class="line">        OpenAnimation();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void Open()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; get image rectTransfrom</span><br><span class="line">        RectTransform rectTransfrom &#x3D; GetComponentInChildren&lt;Image&gt;().GetComponent&lt;RectTransform&gt;();</span><br><span class="line">        &#x2F;&#x2F; get original image size</span><br><span class="line">        Rect rect &#x3D; rectTransfrom.rect;</span><br><span class="line">        &#x2F;&#x2F; scale to default height</span><br><span class="line">        float canvasWidth &#x3D; rect.width &#x2F; rect.height * canvasHeight;</span><br><span class="line">        rectTransfrom.sizeDelta &#x3D; new Vector2(canvasWidth, canvasHeight);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; set original position</span><br><span class="line">        leftCylinderTransform.localScale &#x3D; new Vector3(cylinderRadius*2, cylinderHeight, cylinderRadius*2);</span><br><span class="line">        leftCylinderTransform.position &#x3D; new Vector3(-cylinderRadius - canvasWidth&#x2F;2,0,0);</span><br><span class="line"></span><br><span class="line">        rightCylinderTransform.localScale &#x3D; new Vector3(cylinderRadius*2, cylinderHeight, cylinderRadius*2);</span><br><span class="line">        rightCylinderTransform.position &#x3D; new Vector3(cylinderRadius + canvasWidth&#x2F;2,0,0);</span><br><span class="line"></span><br><span class="line">        Debug.Log(&quot;Scroll opened: &quot; + rectTransfrom.rect);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void OpenAnimation()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; get image rectTransfrom</span><br><span class="line">        RectTransform rectTransfrom &#x3D; GetComponentInChildren&lt;Image&gt;().GetComponent&lt;RectTransform&gt;();</span><br><span class="line">        &#x2F;&#x2F; get original image size</span><br><span class="line">        Rect rect &#x3D; rectTransfrom.rect;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; set width to 0</span><br><span class="line">        rectTransfrom.DOScaleX(0, 0).SetEase(moveEase);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; scale to default height</span><br><span class="line">        float canvasWidth &#x3D; rect.width &#x2F; rect.height * canvasHeight;</span><br><span class="line">        &#x2F;&#x2F; open canvas</span><br><span class="line">        float scaleX &#x3D; canvasWidth&#x2F;rect.width;</span><br><span class="line">        float scaleY &#x3D; canvasHeight&#x2F;rect.height;</span><br><span class="line">        rectTransfrom.DOScale(new Vector2(scaleX, scaleY), openDuration).SetEase(moveEase);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; move cylinders</span><br><span class="line">        leftCylinderTransform.localScale &#x3D; new Vector3(cylinderRadius*2, cylinderHeight, cylinderRadius*2);</span><br><span class="line">        leftCylinderTransform.DOMoveX(leftCylinderTransform.position.x - canvasWidth&#x2F;2, openDuration).SetEase(moveEase);</span><br><span class="line"></span><br><span class="line">        rightCylinderTransform.localScale &#x3D; new Vector3(cylinderRadius*2, cylinderHeight, cylinderRadius*2);</span><br><span class="line">        rightCylinderTransform.DOMoveX(rightCylinderTransform.position.x + canvasWidth&#x2F;2, openDuration).SetEase(moveEase);</span><br><span class="line"></span><br><span class="line">        Debug.Log(&quot;Scroll opened with animation: &quot; + rectTransfrom.rect);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2021/Feb-14-2021 22-58-33.gif">]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>unity</tag>
      </tags>
  </entry>
  <entry>
    <title>Unity Note - Project06 DoTween</title>
    <url>/2021/02/14/unity-note/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.youtube.com/watch?v=cKwz4xlQHmo&ab_channel=DilmerValecillos" target="_blank" rel="noopener">Creating Dynamic animations with DOTween for Unity3d</a></p>
</blockquote>
<blockquote>
<p><a href="http://dotween.demigiant.com/documentation.php" target="_blank" rel="noopener">DoTween Documentation</a></p>
</blockquote>
<ol>
<li><p>Add asset <a href="https://assetstore.unity.com/packages/tools/animation/dotween-hotween-v2-27676" target="_blank" rel="noopener">DOTween (HOTween v2)</a></p>
</li>
<li><p>Add 3D Objects</p>
</li>
</ol>
<img src="/images/2021/screencapture2021-02-14 PM4.51.38.jpg">

<ol start="3">
<li>Move one way</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using DG.Tweening;</span><br><span class="line"></span><br><span class="line">public class DoTweenController : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Vector3 targetLocation &#x3D; Vector3.zero;</span><br><span class="line"></span><br><span class="line">    [SerializeField, Range(1.0f, 10.0f)]</span><br><span class="line">    private float moveDuration &#x3D; 1.0f;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Ease moveEase &#x3D; Ease.Linear;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private DoTweenType doTweenType &#x3D; DoTweenType.MovementOneWay;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Different types of animation</span><br><span class="line">    private enum DoTweenType</span><br><span class="line">    &#123;</span><br><span class="line">        MovementOneWay</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Start is called before the first frame update</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        if(doTweenType &#x3D;&#x3D; DoTweenType.MovementOneWay)&#123;</span><br><span class="line">            if(targetLocation &#x3D;&#x3D; Vector3.zero)&#123;</span><br><span class="line">                &#x2F;&#x2F; stay at original position</span><br><span class="line">                targetLocation &#x3D; transform.position;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            transform.DOMove(targetLocation, moveDuration).SetEase(moveEase);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2021/Feb-14-2021 17-43-05.gif">

<ol start="4">
<li>More types</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using DG.Tweening;</span><br><span class="line"></span><br><span class="line">public class DoTweenController : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Vector3 targetLocation &#x3D; Vector3.zero;</span><br><span class="line"></span><br><span class="line">    [SerializeField, Range(1.0f, 10.0f)]</span><br><span class="line">    private float moveDuration &#x3D; 1.0f;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Ease moveEase &#x3D; Ease.Linear;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Color targetColor;</span><br><span class="line"></span><br><span class="line">    [SerializeField, Range(1.0f, 10.0f)]</span><br><span class="line">    private float colorChangeDuration &#x3D; 1.0f;</span><br><span class="line"></span><br><span class="line">    [SerializeField, Range(0.1f, 10.0f)]</span><br><span class="line">    private float scaleMultiplier &#x3D; 3.0f;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private DoTweenType doTweenType &#x3D; DoTweenType.MovementOneWay;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Different types of animation</span><br><span class="line">    private enum DoTweenType</span><br><span class="line">    &#123;</span><br><span class="line">        MovementOneWay,</span><br><span class="line">        MovementTwoWay,</span><br><span class="line">        MovementOneWayColorChange,</span><br><span class="line">        MomementOneWayColorChangeScaleChange</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Start is called before the first frame update</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        if(targetLocation &#x3D;&#x3D; Vector3.zero)&#123;</span><br><span class="line">                &#x2F;&#x2F; stay at original position</span><br><span class="line">                targetLocation &#x3D; transform.position;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        if(doTweenType &#x3D;&#x3D; DoTweenType.MovementOneWay)&#123;</span><br><span class="line">            transform.DOMove(targetLocation, moveDuration).SetEase(moveEase);</span><br><span class="line">        &#125;</span><br><span class="line">        else if(doTweenType &#x3D;&#x3D; DoTweenType.MovementTwoWay)&#123;</span><br><span class="line">            StartCoroutine(MoveWithBothWays());</span><br><span class="line">        &#125;</span><br><span class="line">        else if(doTweenType &#x3D;&#x3D; DoTweenType.MovementOneWayColorChange)&#123;</span><br><span class="line">            &#x2F;&#x2F; another way</span><br><span class="line">            DOTween.Sequence()</span><br><span class="line">                .Append(transform.DOMove(targetLocation, moveDuration).SetEase(moveEase))</span><br><span class="line">                .Append(transform.GetComponent&lt;Renderer&gt;().material.DOColor(targetColor, colorChangeDuration).SetEase(moveEase));</span><br><span class="line">        &#125;</span><br><span class="line">        else if(doTweenType &#x3D;&#x3D; DoTweenType.MomementOneWayColorChangeScaleChange)&#123;</span><br><span class="line">            DOTween.Sequence()</span><br><span class="line">                .Append(transform.DOMove(targetLocation, moveDuration).SetEase(moveEase))</span><br><span class="line">                .Append(transform.GetComponent&lt;Renderer&gt;().material.DOColor(targetColor, colorChangeDuration).SetEase(moveEase))</span><br><span class="line">                .Append(transform.DOScale(scaleMultiplier, moveDuration).SetEase(moveEase));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private IEnumerator MoveWithBothWays()&#123;</span><br><span class="line">        &#x2F;&#x2F; save original position</span><br><span class="line">        Vector3 originalLocation &#x3D; transform.position;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; go to traget location</span><br><span class="line">        transform.DOMove(targetLocation, moveDuration).SetEase(moveEase);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; wait</span><br><span class="line">        yield return new WaitForSeconds(moveDuration);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; go to original location</span><br><span class="line">        transform.DOMove(originalLocation, moveDuration).SetEase(moveEase);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2021/Feb-14-2021 18-16-16.gif">]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>unity</tag>
      </tags>
  </entry>
  <entry>
    <title>Notion OfflineËÆ∞ÂΩï</title>
    <url>/2021/02/12/notionn/</url>
    <content><![CDATA[<p>NotionÁöÑappÁ™ÅÁÑ∂Offline‰∫Ü</p>
<p>Áõ¥Êé•ËÆøÈóÆÊòæÁ§∫DNS_PROBE_FINISHED_NXDOMAIN</p>
<p>Ê†πÊçÆ‚ÜìÂ∞ùËØï</p>
<blockquote>
<p><a href="https://linmi.cc/6133.html" target="_blank" rel="noopener">https://linmi.cc/6133.html</a></p>
</blockquote>
<p>1.Âä†host<br>cmd‰∏≠ open /etc<br>host‰∏≠Âä†‰∏ÄË°å 104.18.23.110 notion.so<br>Ê≠§Êó∂ÂèØ‰ª•pingÈÄönotion.soÔºå‰ΩÜapp‰ªçÊòØoffline</p>
<p>2.ÊîπDNS<br>Âä†119.29.29.29<br>114.114.114.114<br>Ê≤°ÊúâÁî®ÔºåÊîπÂõûÈªòËÆ§</p>
<p>ÊöÇÊó∂ËøòÊòØ‰∏çËÉΩÁî®ÔºåÁ≠â‰øÆÂ§çÂêß<br>ÂìéÔºåÂ§±Âéªnotion‰ªø‰ΩõÂ§±Âéª‰∫ÜÂçä‰∏™ËÑëÂ≠ê</p>
<p>Êõ¥Êñ∞Ôºö<br>ÁÑ∂ÂêéÂèëÁé∞github.io‰πüËÆøÈóÆ‰∏ç‰∫Ü‰∫ÜÔºåÊòØËøêËê•ÂïÜÁöÑÈóÆÈ¢ò<br>DNSÊîπÊàê114.114.114.114ÂêéËß£ÂÜ≥</p>
<p>ÂÜçÊõ¥Êñ∞Ôºö<br>notionÂ•Ω‰∫ÜÔºÅÊàëÊ¥ª‰∫ÜÔºÅ</p>
]]></content>
      <categories>
        <category>Memo</category>
      </categories>
      <tags>
        <tag>tool</tag>
      </tags>
  </entry>
  <entry>
    <title>UnityÁ¨îËÆ∞ Project05 Âú∞ÂΩ¢&amp;Asset</title>
    <url>/2020/12/02/unity-note-3/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.youtube.com/watch?v=ddy12WHqt-M&amp;ab_channel=UGuruz" target="_blank" rel="noopener">https://www.youtube.com/watch?v=ddy12WHqt-M&amp;ab_channel=UGuruz</a></p>
</blockquote>
<p>ËØï‰∫ÜËØïÂú∞ÂΩ¢</p>
<img src="/images/2020/screencapture2020-12-02 PM8.19.30.jpg">

<p>Âä†ÂÖ•‰∫∫Áâ©ÔºåÊåâProject04ÁöÑÊñπÂºèÁßªÂä®</p>
<img src="/images/2020/screencapture2020-12-02 PM8.20.05.jpg">

<p>Êâæ‰∫Ü‰∏ÄÁªÑÊ®°ÂûãÔºåËÉΩÁî®ÔºÅ</p>
<img src="/images/2020/screencapture2020-12-02 PM9.53.36.jpg">

<p>ÊÑüËßâË¶ÅËµ∑È£û‰∫Üü§©</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>unity</tag>
      </tags>
  </entry>
  <entry>
    <title>UnityÁ¨îËÆ∞ Project04 ÁÇπÂáªÁßªÂä®+ÊóãËΩ¨ÊëÑÂÉèÂ§¥</title>
    <url>/2020/12/02/unity-note-2/</url>
    <content><![CDATA[<p>ÊÉ≥ÂÅöÊàêÁÇπÂáªÁßªÂä®ÔºåÂπ∂‰∏îÊëÑÂÉèÂ§¥ÂèØ‰ª•Ê†πÊçÆÈº†Ê†á‰ΩçÁΩÆÊúâÈôêÂà∂ÁöÑÊóãËΩ¨</p>
<h1 id="Step-1-ÁÇπÂáªÁßªÂä®"><a href="#Step-1-ÁÇπÂáªÁßªÂä®" class="headerlink" title="Step 1 - ÁÇπÂáªÁßªÂä®"></a>Step 1 - ÁÇπÂáªÁßªÂä®</h1><p>ÂèÇÁÖßProject02</p>
<img src="/images/2020/screencapture2020-12-02 PM5.37.22.jpg">

<p>ÂÆåÊàê~</p>
<img src="/images/2020/Dec-02-2020 17-42-53.gif">

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.AI;</span><br><span class="line"></span><br><span class="line">public class PlayerMovement : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public NavMeshAgent agent;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Start is called before the first frame update</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        agent &#x3D; GetComponent&lt;NavMeshAgent&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; Click to Move</span><br><span class="line">        if(Input.GetMouseButtonDown(0))&#123;</span><br><span class="line">            RaycastHit hit;</span><br><span class="line">            Ray ray &#x3D; Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">            if(Physics.Raycast(ray, out hit, Mathf.Infinity))&#123;</span><br><span class="line">                agent.SetDestination(hit.point);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Step-2-ÊóãËΩ¨ÊëÑÂÉèÂ§¥"><a href="#Step-2-ÊóãËΩ¨ÊëÑÂÉèÂ§¥" class="headerlink" title="Step 2 - ÊóãËΩ¨ÊëÑÂÉèÂ§¥"></a>Step 2 - ÊóãËΩ¨ÊëÑÂÉèÂ§¥</h1><p>ÂèÇÁÖßProject03</p>
<img src="/images/2020/Dec-02-2020 18-05-13.gif">

<p>Èº†Ê†áËΩ¨Âêë‰∏çÊòØÂæàÊñπ‰æøÔºåÈ°∫‰æøÂä†‰∫ÜÊñπÂêëÈîÆÊóãËΩ¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class CameraLook : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public float mouseSensitivity &#x3D; 100f;</span><br><span class="line">    public float keySensitivity &#x3D; 100f;</span><br><span class="line">    public Transform player &#x3D; null;</span><br><span class="line">    private float xRotation &#x3D; 0f;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Start is called before the first frame update</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; Get mouse position</span><br><span class="line">        float mouseX &#x3D; Input.GetAxis(&quot;Mouse X&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line">        float mouseY &#x3D; Input.GetAxis(&quot;Mouse Y&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Get key inout</span><br><span class="line">        float keyX &#x3D; Input.GetAxis(&quot;Horizontal&quot;) * keySensitivity * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">        Debug.Log(mouseX);</span><br><span class="line">        Debug.Log(keyX);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Rotate camera up and down</span><br><span class="line">        xRotation -&#x3D; mouseY;</span><br><span class="line">        xRotation &#x3D; Mathf.Clamp(xRotation, -30f, 30f);</span><br><span class="line">        transform.localRotation &#x3D; Quaternion.Euler(xRotation, 0f, 0f);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Rotate player left and right</span><br><span class="line">        player.Rotate(Vector3.up * (mouseX + keyX));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>ËÄ∂(ÔºæÔºçÔºæ)V</p>
<p>ÁõÆÂâçËøô‰∏™ÁßªÂä®ÊñπÂºèÂæàÊª°ÊÑèÔºåÊöÇÊó∂Â∞±ËøôÊ†∑</p>
<p>‰∏ã‰∏ÄÊ≠•ÂèØ‰ª•Êê≠Âú∫ÊôØÂï¶~</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>unity</tag>
      </tags>
  </entry>
  <entry>
    <title>UnityÁ¨îËÆ∞ Project03 Á¨¨‰∏Ä‰∫∫Áß∞ÁßªÂä®</title>
    <url>/2020/12/02/unity-note-1/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.youtube.com/watch?v=_QajrabyTJc&amp;ab_channel=Brackeys" target="_blank" rel="noopener">https://www.youtube.com/watch?v=_QajrabyTJc&amp;ab_channel=Brackeys</a></p>
</blockquote>
<img src="/images/2020/screencapture2020-12-02 PM5.18.52.jpg">

<h1 id="Â±ÇÁ∫ß"><a href="#Â±ÇÁ∫ß" class="headerlink" title="Â±ÇÁ∫ß"></a>Â±ÇÁ∫ß</h1><ul>
<li>PlayerÔºàÁ©∫Áâ©‰ΩìÔºâ-&gt; Âä†Character ControllerÔºõPlayerMovementÔºàScriptÔºâ<ul>
<li>BodyÔºàÂúÜÊü±Ôºâ-&gt; Âà†Èô§Collider</li>
<li>Main Camera -&gt; ÊîæÂú®‰∫∫Áâ©Â§¥ÈÉ®ÁöÑ‰ΩçÁΩÆÔºõMouseLookÔºàScriptÔºâ</li>
</ul>
</li>
</ul>
<h1 id="ÊóãËΩ¨"><a href="#ÊóãËΩ¨" class="headerlink" title="ÊóãËΩ¨"></a>ÊóãËΩ¨</h1><p>xËΩ¥Ê®™ÂêëÊóãËΩ¨ÔºåËΩ¨Âä®PlayerÂíåCamera</p>
<p>yËΩ¥Á∫µÂêëÊóãËΩ¨ÔºåÂè™ËΩ¨Âä®Camera</p>
<h1 id="ÁßªÂä®"><a href="#ÁßªÂä®" class="headerlink" title="ÁßªÂä®"></a>ÁßªÂä®</h1><p>‰ΩøÁî®Character ControllerÁöÑÊñπÊ≥ï</p>
<h1 id="ÈáçÂäõ"><a href="#ÈáçÂäõ" class="headerlink" title="ÈáçÂäõ"></a>ÈáçÂäõ</h1><p>Character Controller‰∏çËÉΩ‰ΩøÁî®Rigidbodyü§™ÔºåÂè™ËÉΩ‰ª£Á†ÅËß£ÂÜ≥</p>
<p>ËøòÈúÄË¶ÅÈÄöËøáGroundCheckÂíåLayerÊù•Ëß£ÂÜ≥Á¢∞Âà∞Âú∞Èù¢Êó∂‰∏ãËêΩÈÄüÂ∫¶Ê∏ÖÈõ∂ÁöÑÈóÆÈ¢ò</p>
<h1 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h1><ul>
<li><p>Update()‰∏≠Time.deltaTimeËé∑Âèñ‰ªé‰∏äÊ¨°Ë∞ÉÁî®Update()Ëá≥‰ªäÁöÑÊó∂Èó¥</p>
</li>
<li><p>ÊéßÂà∂Áà¨Ê•ºÊ¢ØË∑®Â∫¶&amp;ÊñúÂù°ËßíÂ∫¶ -&gt; Character Controller‰∏≠ËÆæÁΩÆ</p>
</li>
</ul>
<img src="/images/2020/screencapture2020-12-02_PM2.00.44.jpg">

<p>ÁúãÊïôÁ®ãÈáåÁöÑÊÄªÁªìÔºåÁî®Character ControllerÂíåÁî®RigidBodyÊù•ÊéßÂà∂Á°ÆÂÆûÊå∫‰∏ç‰∏ÄÊ†∑ÁöÑÔºåÂêéÈù¢ÂæóÁúãÁúãÁî®Âì™‰∏™Êõ¥ÂêàÈÄÇ</p>
<h1 id="‰ª£Á†Å"><a href="#‰ª£Á†Å" class="headerlink" title="‰ª£Á†Å"></a>‰ª£Á†Å</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class MouseLook : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public float mouseSensitivity &#x3D; 100f;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Âú®Unity‰∏≠ÊääPlayerÊãñËøáÊù•</span><br><span class="line">    public Transform playerBody &#x3D; null;</span><br><span class="line"></span><br><span class="line">    private float xRotation &#x3D; 0f;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Start is called before the first frame update</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; Get Input</span><br><span class="line">        float mouseX &#x3D; Input.GetAxis(&quot;Mouse X&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line">        float mouseY &#x3D; Input.GetAxis(&quot;Mouse Y&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Á∫µÂêëÊóãËΩ¨Camera</span><br><span class="line">        xRotation -&#x3D; mouseY;</span><br><span class="line">        &#x2F;&#x2F; ‰∏çÁõ¥Êé•Áî®RotateÔºåÂõ†‰∏∫Ë¶ÅÂÖàÈôêÂà∂ÊóãËΩ¨ËßíÂ∫¶</span><br><span class="line">        xRotation &#x3D; Mathf.Clamp(xRotation, -30f, 30f);</span><br><span class="line">        transform.localRotation &#x3D; Quaternion.Euler(xRotation, 0f, 0f);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Ê®™ÂêëÊóãËΩ¨Player</span><br><span class="line">        playerBody.Rotate(Vector3.up * mouseX);</span><br><span class="line">        Debug.Log(mouseX);</span><br><span class="line">        Debug.Log(&quot;R:&quot;+playerBody.transform.rotation);</span><br><span class="line">        Debug.Log(&quot;LR:&quot;+playerBody.transform.localRotation);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerMovement : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public CharacterController controller;</span><br><span class="line"></span><br><span class="line">    public float speed &#x3D; 12f;</span><br><span class="line">    public float gravity &#x3D; -9.81f;</span><br><span class="line">    public float jumpHeight &#x3D; 3f;</span><br><span class="line"></span><br><span class="line">    public Transform groundCheck;</span><br><span class="line">    public float groundDistance &#x3D; 0.4f;</span><br><span class="line">    public LayerMask groundMask;</span><br><span class="line"></span><br><span class="line">    Vector3 velocity;</span><br><span class="line">    bool isGrounded;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; Èò≤Ê≠¢Âêë‰∏ãÁöÑÈÄüÂ∫¶Êó†ÈôêÂ¢ûÂ§ß</span><br><span class="line">        isGrounded &#x3D; Physics.CheckSphere(groundCheck.position, groundDistance, groundMask);</span><br><span class="line"></span><br><span class="line">        if(isGrounded &amp;&amp; velocity.y &lt; 0)&#123;</span><br><span class="line">            velocity.y &#x3D; -2f;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; ÁßªÂä®</span><br><span class="line">        float x &#x3D; Input.GetAxis(&quot;Horizontal&quot;);</span><br><span class="line">        float z &#x3D; Input.GetAxis(&quot;Vertical&quot;);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; ËøôÊ†∑ÂÜôÊòØÂÖ®Â±ÄÂùêÊ†áÔºå‰∏çÁÆ°PlayerÈù¢ÂØπ‰ªÄ‰πàÊñπÂêë</span><br><span class="line">        &#x2F;&#x2F; Vector3 move &#x3D; new Vector3(x, 0f, z);</span><br><span class="line"></span><br><span class="line">        Vector3 move &#x3D; transform.right * x + transform.forward * z;</span><br><span class="line">        controller.Move(move * speed * Time.deltaTime);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Ë∑≥Ë∑É</span><br><span class="line">        if(Input.GetButtonDown(&quot;Jump&quot;) &amp;&amp; isGrounded)&#123;</span><br><span class="line">            velocity.y &#x3D; Mathf.Sqrt(jumpHeight * -2f * gravity);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Ê®°ÊãüÈáçÂäõ</span><br><span class="line">        velocity.y +&#x3D; gravity * Time.deltaTime;</span><br><span class="line">        controller.Move(velocity * Time.deltaTime);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>unity</tag>
      </tags>
  </entry>
  <entry>
    <title>UnityÁ¨îËÆ∞ Project02 ÁÇπÂáªÁßªÂä®</title>
    <url>/2020/12/02/unity-note/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.youtube.com/watch?v=y_zdW5LIX5o&ab_channel=PekkeDev" target="_blank" rel="noopener">Click To Move with NavMesh - Unity 3D</a></p>
</blockquote>
<p>ÈÄâ‰∏≠Âú∞Èù¢</p>
<p>Á™óÂè£ ‚Üí AI ‚Üí ÂØºËà™: Static &amp; Walkable</p>
<img src="/images/2020/screencapture2020-12-02_PM1.26.36.jpg">

<p>ÁÉòÁÑô ‚Üí Bake</p>
<img src="/images/2020/screencapture2020-12-02_PM1.27.18.jpg">

<p>PlayerÂä†ÁªÑ‰ª∂Nav Mesh Agent</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.AI;</span><br><span class="line"></span><br><span class="line">public class Player : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    NavMeshAgent agent;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Start is called before the first frame update</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        agent &#x3D; GetComponent&lt;NavMeshAgent&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if(Input.GetMouseButtonDown(0))&#123;</span><br><span class="line">            RaycastHit hit;</span><br><span class="line">            Ray ray &#x3D; Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">            if(Physics.Raycast(ray, out hit, Mathf.Infinity))&#123;</span><br><span class="line">                agent.SetDestination(hit.point);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>unity</tag>
      </tags>
  </entry>
  <entry>
    <title>UnityÁ¨îËÆ∞ Project01 Basic</title>
    <url>/2020/11/30/note-unity/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.youtube.com/watch?v=pwZpJzpE2lQ&amp;t=4178s&amp;ab_channel=Imphenzia" target="_blank" rel="noopener">https://www.youtube.com/watch?v=pwZpJzpE2lQ&amp;t=4178s&amp;ab_channel=Imphenzia</a></p>
</blockquote>
<img src="/images/2020/screencapture2020-11-30 PM9.13.29.jpg">

<h1 id="ÂÆûÁé∞"><a href="#ÂÆûÁé∞" class="headerlink" title="ÂÆûÁé∞"></a>ÂÆûÁé∞</h1><ol>
<li><p>‰∫∫Áâ©Ë∑≥Ë∑ÉÔºåÂ∑¶Âè≥ÁßªÂä®</p>
<ul>
<li><p>Ë∑≥Ë∑ÉÈÄüÂ∫¶‰∏éÈáçÈáèÊó†ÂÖ≥ -&gt; ForceMode.VelocityChange</p>
</li>
<li><p>Ë∑≥Ë∑ÉÊó∂‰øùÊåÅÂ∑¶Âè≥ÈÄüÂ∫¶ -&gt; rigidbodyComponent.velocity</p>
</li>
<li><p>‰∏çÂèØÂú®Á©∫‰∏≠Ë∑≥Ë∑É -&gt; Ê£ÄÊü•Physics.OverlapSphere()</p>
</li>
<li><p>Â∑¶Âè≥ÁßªÂä®ÂêåÊó∂Ê£ÄÊü•‚Üê‚ÜíAD -&gt; Input.GetAxis(‚ÄúHorizontal‚Äù)</p>
</li>
<li><p>Á¢∞Âà∞Â¢ôÂ£Å‰∏ç‰ºöÂõ†‰∏∫ÈïøÊåâDË¥¥Âú®Â¢ô‰∏ä -&gt; Ê∑ªÂä†Áâ©ÁêÜÊùêË¥®ÔºåÊë©Êì¶Âäõ‰∏∫0</p>
</li>
</ul>
</li>
<li><p>ÊëÑÂÉèÂ§¥Ë∑üÈöèËßíËâ≤ -&gt; Â±ÇÁ∫ßÊîæÂú®ËßíËâ≤‰∏ãÂç≥ÂèØ</p>
</li>
<li><p>Êî∂ÈõÜÁ°¨Â∏Å</p>
<ul>
<li>‰∏çÂèëÁîüÁ¢∞Êíû -&gt; ÂãæÈÄâÊòØËß¶ÂèëÂô®</li>
<li>Ê£ÄÊµãÁ¢∞Êíû -&gt; OnTriggerEnter()</li>
<li>Á¢∞Âà∞ÂêéÊ∂àÈô§ -&gt; Destroy(other.gameObject);</li>
</ul>
</li>
</ol>
<h1 id="Ê≥®ÊÑè"><a href="#Ê≥®ÊÑè" class="headerlink" title="Ê≥®ÊÑè"></a>Ê≥®ÊÑè</h1><ol>
<li>Âú®Update()‰∏≠Ëé∑ÂèñËæìÂÖ•ÔºåÂú®FixedUpdate()‰∏≠apply physics</li>
<li>Áî®[SerializeField] privateÔºå‰∏çË¶ÅÁî®public</li>
<li>ÂáèÂ∞ë‰∏çÂøÖË¶ÅÁöÑColliderÔºåÊèêÈ´òÊïàÁéá</li>
<li>Â§öÁî®PrefabÔºåÂñÑÁî®Layer</li>
</ol>
<h1 id="‰ª£Á†Å"><a href="#‰ª£Á†Å" class="headerlink" title="‰ª£Á†Å"></a>‰ª£Á†Å</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class Player : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [SerializeField] private Transform groundCheckTransform &#x3D; null;</span><br><span class="line">    [SerializeField] private LayerMask playerMask;</span><br><span class="line">    private bool jumpKeyPressed;</span><br><span class="line">    private float horizontalInput;</span><br><span class="line">    private Rigidbody rigidbodyComponent;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Start is called before the first frame update</span><br><span class="line">    void Start() &#123;</span><br><span class="line">        rigidbodyComponent &#x3D; GetComponent&lt;Rigidbody&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Update is called once per frame</span><br><span class="line">    void Update() &#123;</span><br><span class="line">        horizontalInput &#x3D; Input.GetAxis(&quot;Horizontal&quot;);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Avoid jumping in the air (always colliding with the capsule collider)</span><br><span class="line">        if(Physics.OverlapSphere(groundCheckTransform.position, 0.1f, playerMask).Length &#x3D;&#x3D; 0)&#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if(Input.GetKeyDown(KeyCode.Space))&#123;</span><br><span class="line">            jumpKeyPressed &#x3D; true;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F; FixedUpdate is called once every physic update (Default 100&#x2F;s)</span><br><span class="line">    private void FixedUpdate() &#123;</span><br><span class="line">        if(jumpKeyPressed)&#123;</span><br><span class="line">            rigidbodyComponent.AddForce(Vector3.up * 5,ForceMode.VelocityChange);</span><br><span class="line">            jumpKeyPressed &#x3D; false;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        rigidbodyComponent.velocity &#x3D; new Vector3(horizontalInput * 2, rigidbodyComponent.velocity.y, 0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void OnTriggerEnter(Collider other) &#123;</span><br><span class="line">        &#x2F;&#x2F; Collide with 9.Coin layer</span><br><span class="line">        if(other.gameObject.layer &#x3D;&#x3D; 9)&#123;</span><br><span class="line">            Destroy(other.gameObject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>unity</tag>
      </tags>
  </entry>
  <entry>
    <title>ÁúãÊ∫êÁ†ÅÁ¨îËÆ∞ DeephageTP</title>
    <url>/2020/11/19/code-note/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://github.com/chuym726/DeephageTP" target="_blank" rel="noopener">https://github.com/chuym726/DeephageTP</a></p>
</blockquote>
<h1 id="ÁéØÂ¢ÉÊê≠Âª∫-amp-Êï∞ÊçÆÂáÜÂ§á"><a href="#ÁéØÂ¢ÉÊê≠Âª∫-amp-Êï∞ÊçÆÂáÜÂ§á" class="headerlink" title="ÁéØÂ¢ÉÊê≠Âª∫&amp;Êï∞ÊçÆÂáÜÂ§á"></a>ÁéØÂ¢ÉÊê≠Âª∫&amp;Êï∞ÊçÆÂáÜÂ§á</h1><p>ÔºàÂ∑≤ÊúâÔºöconda 4.9.2Ôºâ</p>
<ol>
<li><p>‰∏ãËΩΩ<a href="https://github.com/chuym726/DeephageTP" target="_blank" rel="noopener">https://github.com/chuym726/DeephageTP</a></p>
</li>
<li><p>ÂàõÂª∫Êñ∞ÁöÑËôöÊãüÁéØÂ¢ÉdeephageTP</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">conda create --name deephageTP python&#x3D;3.6 numpy theano keras scikit-learn</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>Êñ∞Âª∫Â∑•Á®ãÊñá‰ª∂Â§πDeephageTP-testÔºàÈúÄË¶ÅÁöÑÊñá‰ª∂‰ªé‰∏ãËΩΩÁöÑDeephageTP-masterÊã∑Ôºâ</p>
</li>
<li><p>PyCharmÊâìÂºÄDeephageTP-testÔºåÊøÄÊ¥ªÁéØÂ¢É</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">conda activate deephageTP</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-11-19 PM5.23.40.jpg">

<p>Python Interpreter‰πüÊîπÊàêdeephageTP</p>
<img src="/images/2020/screencapture2020-11-19 PM5.25.35.jpg">

<img src="/images/2020/screencapture2020-11-19 PM5.26.51.jpg">

<h1 id="ÊµãËØïexample-data-fa"><a href="#ÊµãËØïexample-data-fa" class="headerlink" title="ÊµãËØïexample_data.fa"></a>ÊµãËØïexample_data.fa</h1><p>‰ª£Á†ÅÈáåÈù¢Áõ¥Êé•ËØªÁöÑtraining_data.faaÔºåXÂíåYÂ∫îËØ•Âú®Âêå‰∏Ä‰∏™Êñá‰ª∂ÈáåÔºå</p>
<p>‰ΩÜÊòØÁªôÁöÑtraining_data.faa.X.npy.tar.gz„ÄÅtraining_data.faa.Y.npy.tar.gzÊòØÂú®‰∏çÂêåÊñá‰ª∂</p>
<p>‰∫éÊòØÂÖàÁî®example_data.faËØï‰∏Ä‰∏ãÔºàÈÅáÂà∞bug #1ÔºåËß£ÂÜ≥ËßÅDebugÔºâ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(deephageTP) coconutnut@x86_64-apple-darwin13 DeephageTP-test % python DeephageTP_model_training.py</span><br><span class="line">Using TensorFlow backend.</span><br><span class="line">only amino acid code.</span><br><span class="line">ok! there is the same number (193) of labels and sequences. </span><br><span class="line">193</span><br><span class="line">193</span><br><span class="line">193</span><br><span class="line">ok! windows is 900.</span><br><span class="line">ok! raw data has been saved as a npy file example_data.fa.X&#x2F;Y</span><br><span class="line">now runing is DL_Train.</span><br><span class="line">nb_filters:  50</span><br><span class="line">kernel_s:  3</span><br><span class="line">n_batch:  10</span><br><span class="line">n_echos:  20</span><br><span class="line">dropout1:  0.1</span><br><span class="line">dropout2:  0.1</span><br><span class="line">ok! the npy file example_data.fa.X&#x2F;Y.npy are loaded!</span><br><span class="line">ok! all labels are in 4 kinds.</span><br><span class="line">193</span><br><span class="line">now training for all, Be noted here no test part !!!</span><br><span class="line">[[1. 0. 0. 0.]</span><br><span class="line"> [1. 0. 0. 0.]</span><br><span class="line"> [1. 0. 0. 0.]</span><br><span class="line">......</span><br><span class="line"> [0. 0. 0. 1.]</span><br><span class="line"> [0. 0. 0. 1.]</span><br><span class="line"> [0. 0. 0. 1.]</span><br><span class="line"> [0. 0. 0. 1.]]</span><br><span class="line">2020-11-19 17:30:03.895070: I tensorflow&#x2F;core&#x2F;platform&#x2F;cpu_feature_guard.cc:145] This TensorFlow binary is optimized with Intel(R) MKL-DNN to use the following CPU instructions in performance critical operations:  SSE4.1 SSE4.2 AVX AVX2 FMA</span><br><span class="line">To enable them in non-MKL-DNN operations, rebuild TensorFlow with the appropriate compiler flags.</span><br><span class="line">2020-11-19 17:30:03.895316: I tensorflow&#x2F;core&#x2F;common_runtime&#x2F;process_util.cc:115] Creating new thread pool with default inter op setting: 8. Tune using inter_op_parallelism_threads for best performance.</span><br><span class="line">Epoch 1&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 12s 64ms&#x2F;step - loss: 1.1962 - accuracy: 0.4767</span><br><span class="line">Epoch 2&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 11s 55ms&#x2F;step - loss: 0.4503 - accuracy: 0.8446</span><br><span class="line">Epoch 3&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 53ms&#x2F;step - loss: 0.1844 - accuracy: 0.9534</span><br><span class="line">Epoch 4&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 52ms&#x2F;step - loss: 0.1079 - accuracy: 0.9845</span><br><span class="line">Epoch 5&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 11s 55ms&#x2F;step - loss: 0.0383 - accuracy: 1.0000</span><br><span class="line">Epoch 6&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 50ms&#x2F;step - loss: 0.0203 - accuracy: 1.0000</span><br><span class="line">Epoch 7&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 12s 61ms&#x2F;step - loss: 0.0105 - accuracy: 1.0000</span><br><span class="line">Epoch 8&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 51ms&#x2F;step - loss: 0.0063 - accuracy: 1.0000</span><br><span class="line">Epoch 9&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 51ms&#x2F;step - loss: 0.0058 - accuracy: 1.0000</span><br><span class="line">Epoch 10&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 50ms&#x2F;step - loss: 0.0104 - accuracy: 0.9948</span><br><span class="line">Epoch 11&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 51ms&#x2F;step - loss: 0.0066 - accuracy: 1.0000</span><br><span class="line">Epoch 12&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 51ms&#x2F;step - loss: 0.0041 - accuracy: 1.0000</span><br><span class="line">Epoch 13&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 52ms&#x2F;step - loss: 0.0017 - accuracy: 1.0000</span><br><span class="line">Epoch 14&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 50ms&#x2F;step - loss: 0.0026 - accuracy: 1.0000</span><br><span class="line">Epoch 15&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 51ms&#x2F;step - loss: 0.0017 - accuracy: 1.0000</span><br><span class="line">Epoch 16&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 50ms&#x2F;step - loss: 0.0013 - accuracy: 1.0000</span><br><span class="line">Epoch 17&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 52ms&#x2F;step - loss: 0.0011 - accuracy: 1.0000</span><br><span class="line">Epoch 18&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 9s 48ms&#x2F;step - loss: 8.4943e-04 - accuracy: 1.0000</span><br><span class="line">Epoch 19&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 9s 49ms&#x2F;step - loss: 8.9927e-04 - accuracy: 1.0000</span><br><span class="line">Epoch 20&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 9s 49ms&#x2F;step - loss: 0.0011 - accuracy: 1.0000</span><br><span class="line">the model (example_data.fa.all.h5) has saved!</span><br></pre></td></tr></table></figure>

<p>‰∫ßÁîü‰∫Ü3‰∏™Êñá‰ª∂</p>
<p>example_data.fa.all.h5</p>
<p>example_data.fa.X.npy</p>
<p>example_data.fa.Y.npy</p>
<p>ÊâÄ‰ª•ÁªôÁöÑtraining_data.faa.X.npy.tar.gz„ÄÅtraining_data.faa.Y.npy.tar.gz‰πüÊòØÁîüÊàêÁöÑÂêóÔºüdataÊñá‰ª∂Â§πÈáåÂ∞±‰∏Ä‰∏™Âè´aÁöÑÁ©∫Êñá‰ª∂ÔºåÈöæÈÅìÊòØÊ≤°‰º†training_data.faaÔºüüòß</p>
<p>Áúã‰∫Ü‰∏ã‰ª£Á†ÅÔºåËøòÁúüÊòØüôÑ</p>
<p>aa_ref2npy()Áî®Êù•ËΩ¨Ê†ºÂºèÔºåÂ≠òÊàêone-hotÁºñÁ†ÅÂêéÔºåXÂíåYÂàÜÂºÄÁöÑÂΩ¢Âºè</p>
<p>DL_Train()Áî®Êù•ËÆ≠ÁªÉ</p>
<p>Êó¢ÁÑ∂Â¶ÇÊ≠§ÔºåÁõ¥Êé•Áî®training_data.faa.X.npy.tar.gz„ÄÅtraining_data.faa.Y.npy.tar.gzËß£ÂéãÔºå‰∏çË∑ëaa_ref2npy()ÔºåÂ∞±ÂèØ‰ª•Áõ¥Êé•ËÆ≠ÁªÉ‰∫Ü</p>
<h1 id="ÊµãËØïtraining-data-faa"><a href="#ÊµãËØïtraining-data-faa" class="headerlink" title="ÊµãËØïtraining_data.faa"></a>ÊµãËØïtraining_data.faa</h1><p>Ëß£Âéãtraining_data.faa.X.npy.tar.gz„ÄÅtraining_data.faa.Y.npy.tar.gz</p>
<p>Ôºà25.3MBËß£ÂéãÂêé3.97‚ÄÜGBÔºåÊòØÂæóÊúâÂ§öÂ∞ë0ÂïäÔºå‰∏çÊÑßÊòØone-hotÔºâ</p>
<p>‰ª£Á†ÅÊîπ‰∫Ü2Â§ÑÔºö</p>
<p>Á¨¨8Ë°å</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from sklearn.cross_validation import train_test_split</span><br></pre></td></tr></table></figure>

<p>ÊîπÊàê</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from sklearn.model_selection import train_test_split</span><br></pre></td></tr></table></figure>

<p>ÊúÄÂêéÁöÑ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if 1:</span><br><span class="line">	aa_ref2npy(ref_Data&#x3D;ref_Data,len_w&#x3D;len_w)</span><br></pre></td></tr></table></figure>

<p>Ê≥®ÈáäÊéâ</p>
<p>ËøêË°å</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(deephageTP) coconutnut@x86_64-apple-darwin13 DeephageTP-test % python DeephageTP_model_training.py</span><br><span class="line">Using TensorFlow backend.</span><br><span class="line">only amino acid code.</span><br><span class="line">now runing is DL_Train.</span><br><span class="line">nb_filters:  50</span><br><span class="line">kernel_s:  3</span><br><span class="line">n_batch:  10</span><br><span class="line">n_echos:  20</span><br><span class="line">dropout1:  0.1</span><br><span class="line">dropout2:  0.1</span><br><span class="line">ok! the npy file training_data.faa.X&#x2F;Y.npy are loaded!</span><br><span class="line">ok! all labels are in 4 kinds.</span><br><span class="line">27585</span><br><span class="line">now training for all, Be noted here no test part !!!</span><br><span class="line">[[1. 0. 0. 0.]</span><br><span class="line"> [1. 0. 0. 0.]</span><br><span class="line"> [1. 0. 0. 0.]</span><br><span class="line"> ...</span><br><span class="line"> [0. 0. 0. 1.]</span><br><span class="line"> [0. 0. 0. 1.]</span><br><span class="line"> [0. 0. 0. 1.]]</span><br><span class="line">2020-11-19 17:52:30.350217: I tensorflow&#x2F;core&#x2F;platform&#x2F;cpu_feature_guard.cc:145] This TensorFlow binary is optimized with Intel(R) MKL-DNN to use the following CPU instructions in performance critical operations:  SSE4.1 SSE4.2 AVX AVX2 FMA</span><br><span class="line">To enable them in non-MKL-DNN operations, rebuild TensorFlow with the appropriate compiler flags.</span><br><span class="line">2020-11-19 17:52:30.350529: I tensorflow&#x2F;core&#x2F;common_runtime&#x2F;process_util.cc:115] Creating new thread pool with default inter op setting: 8. Tune using inter_op_parallelism_threads for best performance.</span><br><span class="line">Epoch 1&#x2F;20</span><br><span class="line"> 1250&#x2F;27585 [&gt;.............................] - ETA: 22:33 - loss: 0.5788 - accuracy: 0.8016</span><br></pre></td></tr></table></figure>

<p>Â§™Â§ß‰∫ÜÔºå‰∏çË∑ë‰∫Ü</p>
<h1 id="‰ª£Á†ÅÂàÜÊûê"><a href="#‰ª£Á†ÅÂàÜÊûê" class="headerlink" title="‰ª£Á†ÅÂàÜÊûê"></a>‰ª£Á†ÅÂàÜÊûê</h1><p>ËÆ≠ÁªÉÈÉ®ÂàÜ DeephageTP_model_training.py</p>
<h2 id="aa-ref2npy"><a href="#aa-ref2npy" class="headerlink" title="aa_ref2npy()"></a>aa_ref2npy()</h2><p>ÂÅöone-hotÁºñÁ†ÅÁî®ÁöÑ</p>
<p>ÊääËõãÁôΩË¥®Â∫èÂàó‚Üì</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;UniRef100_A0A017QK57 PBSX family phage terminase large subunit n&#x3D;1 Tax&#x3D;Glaesserella parasuis str. Nagasaki TaxID&#x3D;1117322 RepID&#x3D;A0A017QK57_HAEPR 1</span><br><span class="line">MKIQLNLPPKLIPVFTQQNVRYRGAYGGRGSAKTRTFAKMTAVVAYQRAMQGESGVILCGREFMNSLEDSSLEEIKQAIQSEPWLTDFFEVGEKYVRTKCGRISYIFTGLRHNLDSIKSKARILLAWIDEAESVSEMAWRKLLPTVRENGSEIWLTWNPEKKGSATDLRFRQHQDESMAIVEMNYSDNPWFPDVLEQERLRDKARLDDATYRWIWEGAYLEQSEAQIFRDKFQELEFKPNGDFSGPYFGLDFGFAQDPTAAVKCWVFKDELYIEYEAGKVGLELDDTATFLQKGIVGIEQYVIRADSARPESISYLKRHGLPRIDGVSKWKGSVEDGIAHIKSYKKIYIHPRCQQTLNEFRLYSYKTDRLSGDILPVVLDENNHYIDALRYALEPLMKGRQSWFG</span><br></pre></td></tr></table></figure>

<p>one-hotÁºñÁ†ÅÔºånp.arrayÊ†ºÂºèÔºå‰øùÂ≠òÔºàÂàÜÂà´Â≠òXÂíåYÔºâ</p>
<p>ÊääXÊâìÂá∫Êù•Áúã‰∏ã</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[[0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  ÂØπÂ∫îM</span><br><span class="line"> [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0],  ÂØπÂ∫îK</span><br><span class="line"> [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0],  ÂØπÂ∫îI</span><br><span class="line"> [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0],</span><br><span class="line"> [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0],</span><br><span class="line"> [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],</span><br><span class="line"> [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0],</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure>

<p>Â∞±ÊòØÂíåËõãÁôΩË¥®Â∫èÂàóMKI‚Ä¶‰∏Ä‰∏ÄÂØπÂ∫îÁöÑone-hotÁºñÁ†ÅÔºàËøòÊòØÊâãÂä®ÂÜôÊ≠ªÁöÑÔºâ</p>
<p>Â§ßÂ∞èÊòØ(900, 20)ÔºåÂíåÊñá‰∏≠ÊèèËø∞‰∏ÄÊ†∑</p>
<p>ËøôÈáåYÊòØ0ÔºåÊ†πÊçÆÊØè‰∏™ËõãÁôΩË¥®Á¨¨‰∏ÄË°å</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;UniRef100_A0A017QK57 PBSX family phage terminase large subunit n&#x3D;1 Tax&#x3D;Glaesserella parasuis str. Nagasaki TaxID&#x3D;1117322 RepID&#x3D;A0A017QK57_HAEPR 1</span><br></pre></td></tr></table></figure>

<p>ÊúÄÂêéËøô‰∏™Êï∞Â≠ó-1Ë°®Á§∫Á±ªÂà´</p>
<p>Â¶Ç‰∏ãÈù¢Ëøô‰∏™ËõãÁôΩÁöÑÁ±ªÂà´ÊòØ2</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;UniRef100_A0A072NPV4 Phage terminase, small subunit n&#x3D;1 Tax&#x3D;Bacillus azotoformans MEV2011 TaxID&#x3D;1348973 RepID&#x3D;A0A072NPV4_BACAZ 3</span><br><span class="line">MAKDGTNRGGARVGAGAKKKPLTDKIAEGNPGGRKLTVMEFKDTADLKGLEMPEPNKMLEAIQKDGKALVAGEIYRNTWAWLNERGCAALVSPQLLERYAMSVARWIQCEEAVTEYGFLAKHPTTGNAIQSPYVAMGQNYMNQTNRLWMEIFQIVKENCTGEYSGINPQDDVMERLLTARRGK</span><br></pre></td></tr></table></figure>

<h2 id="DL-Train"><a href="#DL-Train" class="headerlink" title="DL_Train()"></a>DL_Train()</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">DL_Train</span><span class="params">(ref_Data, len_w)</span>:</span></span><br><span class="line">	<span class="comment"># ÂèÇÊï∞ËÆæÁΩÆ</span></span><br><span class="line">	nb_filters = <span class="number">50</span></span><br><span class="line">	kernel_s = <span class="number">3</span></span><br><span class="line">	n_batch = <span class="number">10</span></span><br><span class="line">	n_echos = <span class="number">20</span></span><br><span class="line">	dropout1 = <span class="number">0.10</span></span><br><span class="line">	dropout2 = <span class="number">0.10</span></span><br><span class="line">	<span class="keyword">print</span> (<span class="string">"now runing is DL_Train."</span>)</span><br><span class="line">		<span class="comment"># end_lossrint("all is ended.")</span></span><br><span class="line">	<span class="keyword">print</span> (<span class="string">"nb_filters: "</span>, nb_filters)</span><br><span class="line">	<span class="keyword">print</span> (<span class="string">"kernel_s: "</span>, kernel_s)</span><br><span class="line">	<span class="keyword">print</span> (<span class="string">"n_batch: "</span>, n_batch)</span><br><span class="line">	<span class="keyword">print</span> (<span class="string">"n_echos: "</span>, n_echos)</span><br><span class="line">	<span class="keyword">print</span> (<span class="string">"dropout1: "</span>, dropout1)</span><br><span class="line">	<span class="keyword">print</span> (<span class="string">"dropout2: "</span>, dropout2)</span><br><span class="line">	</span><br><span class="line">	<span class="comment"># Â§ÑÁêÜÊï∞ÊçÆ</span></span><br><span class="line">	X2 = np.load(ref_Data + <span class="string">".X.npy"</span>)</span><br><span class="line">	Y2 = np.load(ref_Data + <span class="string">".Y.npy"</span>)</span><br><span class="line">	<span class="keyword">print</span> (<span class="string">"ok! the npy file "</span> + ref_Data + <span class="string">".X/Y.npy are loaded!"</span> )</span><br><span class="line">	n_classes = <span class="number">4</span>    <span class="comment">#len(np.unique(Y))</span></span><br><span class="line">	<span class="keyword">print</span> (<span class="string">"ok! all labels are in "</span> + str(n_classes) + <span class="string">" kinds."</span> )</span><br><span class="line">	YY_t = []</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> Y2:</span><br><span class="line">		ll = np.zeros(n_classes)</span><br><span class="line">		ll[i] = <span class="number">1</span></span><br><span class="line">		YY_t.append(ll)</span><br><span class="line">	YY_t = np.array(YY_t)</span><br><span class="line">	print(len(YY_t))</span><br><span class="line">	print(<span class="string">"now training for all, Be noted here no test part !!!"</span>)</span><br><span class="line">	X_train = X2.reshape(<span class="number">-1</span>,<span class="number">1</span>,len_w,matrix_size)</span><br><span class="line">	Y_train = YY_t</span><br><span class="line">	print(Y_train)</span><br><span class="line">	</span><br><span class="line">	<span class="comment"># ÊûÑÂª∫Ê®°Âûã</span></span><br><span class="line">	model = Sequential()</span><br><span class="line">	model.add(Conv2D(filters=nb_filters,kernel_size=(<span class="number">7</span>,<span class="number">1</span>),padding=<span class="string">'same'</span>,input_shape=(<span class="number">1</span>,len_w,matrix_size),data_format=<span class="string">'channels_first'</span>))</span><br><span class="line">	model.add(Activation(<span class="string">'relu'</span>))</span><br><span class="line">	model.add(MaxPooling2D(pool_size=(<span class="number">3</span>,<span class="number">3</span>)))</span><br><span class="line">	model.add(Dropout(dropout1))</span><br><span class="line">	model.add(Flatten())</span><br><span class="line">	model.add(Dense(<span class="number">100</span>,activation=<span class="string">'relu'</span>))</span><br><span class="line">	model.add(Dropout(dropout2))</span><br><span class="line">	model.add(Dense(n_classes,activation=<span class="string">'softmax'</span>))</span><br><span class="line">	model.compile(loss=<span class="string">'categorical_crossentropy'</span>,optimizer=Adam(),metrics=[<span class="string">'accuracy'</span>])   </span><br><span class="line">	</span><br><span class="line">	<span class="comment"># ËÆ≠ÁªÉÊ®°Âûã</span></span><br><span class="line">	model.fit(X_train,Y_train,batch_size=n_batch,epochs=n_echos,verbose=<span class="number">1</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment"># ‰øùÂ≠òÊ®°Âûã</span></span><br><span class="line">	model.save(ref_Data + <span class="string">'.all.h5'</span>)</span><br><span class="line">	print(<span class="string">"the model ("</span> + ref_Data + <span class="string">".all.h5) has saved!"</span>)</span><br></pre></td></tr></table></figure>

<h1 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h1><h3 id="1"><a href="#1" class="headerlink" title="#1"></a>#1</h3><p>Á¨¨‰∏ÄÊ¨°Ë∑ëDeephageTP_model_training.pyÊó∂ÈÅáÂà∞ÁöÑbug</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ModuleNotFoundError: No module named &#39;sklearn.cross_validation&#39;</span><br></pre></td></tr></table></figure>

<p>Ëß£ÂÜ≥Ôºö</p>
<p><a href="https://blog.csdn.net/qq_35962520/article/details/85295228" target="_blank" rel="noopener">https://blog.csdn.net/qq_35962520/article/details/85295228</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># from sklearn.cross_validation import train_test_split # cross_validation‰∏çÂÜç‰ΩøÁî®ÔºåÁßªËá≥model_selection</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>bioinformatics</tag>
      </tags>
  </entry>
  <entry>
    <title>ËØªËÆ∫ÊñáÁ¨îËÆ∞ DeephageTP</title>
    <url>/2020/11/19/paper-note/</url>
    <content><![CDATA[<p><strong>DeephageTP: A Convolutional Neural Network Framework for Identifying Phage-specific Proteins from metagenomic sequencing data<br> Running title: an alignment-free deep learning framework for identifying phage- specific proteins</strong></p>
<p>ÂèÇËÄÉÔºöÂéüÊñá &amp; Github <a href="https://github.com/chuym726/DeephageTP" target="_blank" rel="noopener">https://github.com/chuym726/DeephageTP</a></p>
<hr>
<h1 id="ÁõÆÊ†á"><a href="#ÁõÆÊ†á" class="headerlink" title="ÁõÆÊ†á"></a>ÁõÆÊ†á</h1><p>3 specific proteins of the tailed phage:</p>
<ol>
<li>Portal (portal protein)</li>
<li>TerL (large terminase subunit protein) </li>
<li>TerS (small terminase subunit protein)</li>
</ol>
<p>Develop a <strong>CNN-based framework</strong> to identify these 3 proteins from <strong>metagenome data</strong></p>
<h1 id="Êï∞ÊçÆÈõÜ"><a href="#Êï∞ÊçÆÈõÜ" class="headerlink" title="Êï∞ÊçÆÈõÜ"></a>Êï∞ÊçÆÈõÜ</h1><h2 id="train-test-set"><a href="#train-test-set" class="headerlink" title="train/test set"></a>train/test set</h2><p>(ÂéüÊñá‰ΩçÁΩÆÔºö106-127Ë°å)</p>
<p>Êù•Ê∫êÔºöUniport(<a href="http://www.uniprot.org" target="_blank" rel="noopener">www.uniprot.org</a>)</p>
<p>È¢ÑÂ§ÑÁêÜËøáÁ®ãÔºö</p>
<ol>
<li><p>‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Ëé∑ÂèñÂêÑÁ±ªËõãÁôΩË¥®Â∫èÂàó</p>
<blockquote>
<p>according to the taxonomy in the UniProt database, all proteins in archaea, bacteria and viruses were obtained from the database;</p>
</blockquote>
<p>Áúãexample_data.faÊñá‰ª∂ÔºåÈïøËøôÊ†∑Ôºö</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;UniRef100_A0A017QK57 PBSX family phage terminase large subunit n&#x3D;1 Tax&#x3D;Glaesserella parasuis str. Nagasaki TaxID&#x3D;1117322 RepID&#x3D;A0A017QK57_HAEPR 1</span><br><span class="line">MKIQLNLPPKLIPVFTQQNVRYRGAYGGRGSAKTRTFAKMTAVVAYQRAMQGESGVILCGREFMNSLEDSSLEEIKQAIQSEPWLTDFFEVGEKYVRTKCGRISYIFTGLRHNLDSIKSKARILLAWIDEAESVSEMAWRKLLPTVRENGSEIWLTWNPEKKGSATDLRFRQHQDESMAIVEMNYSDNPWFPDVLEQERLRDKARLDDATYRWIWEGAYLEQSEAQIFRDKFQELEFKPNGDFSGPYFGLDFGFAQDPTAAVKCWVFKDELYIEYEAGKVGLELDDTATFLQKGIVGIEQYVIRADSARPESISYLKRHGLPRIDGVSKWKGSVEDGIAHIKSYKKIYIHPRCQQTLNEFRLYSYKTDRLSGDILPVVLDENNHYIDALRYALEPLMKGRQSWFG</span><br><span class="line">&gt;UniRef100_A0A017QKX8 PBSX family phage terminase large subunit n&#x3D;1 Tax&#x3D;Glaesserella parasuis str. Nagasaki TaxID&#x3D;1117322 RepID&#x3D;A0A017QKX8_HAEPR 1</span><br><span class="line">MKIQLNLPPKLIPVFTQQNVRYRGAYGGRGSAKTRTFAKMTAVVAYQRAMQGESGVILCGREFMNSLEDSSLEEIKQAIQSEPWLANFFDVGEKYVHTKCGRISYIFTGLRHNLDSIKSKARILLAWIDEAESVSEMAWRKLLPTVRESGSEIWLTWNPEKKGSATDLRFRQYQDESMAIVEMNYNDNPWFPDVLKQERLRDKARLDDATYRWIWEGDYLEESEAQVFRGKYQELEFKPLPDFEGPYHGLDFGFAQDPTAAIKCWVFKDELYIEYEAGKVGLELDDTATFLQKGIVGIEQYVIRADSARPESISYLKRHGLPRIDGVSKWKGSVEDGIAHIKSYKKIYIHPRCQQTLNEFRLYSYKTDRLSGDVLPTLVDAHNHYIDALRYALNPRIQRKGDFSQNPLKLY</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
</li>
<li><p>ÂéªÈô§Êó†ÂÖ≥Êï∞ÊçÆ</p>
<blockquote>
<p>the protein sequences were searched by the keywords (i.e., portal, large terminase subunit, and small terminase subunit), and the noise sequences with the uncertain keywords (e.g., hypothetical, possible, like, predicted) were removed to ensure that the selected protein sequences in the three categories are veracious;</p>
</blockquote>
</li>
<li><p>ÂÖ∂ÂÆÉÁ±ªËøáÂ§öÔºåÈöèÊú∫Áïô‰∏ÄÈÉ®ÂàÜ</p>
<blockquote>
<p>the remaining sequences without the keywords of interest (portal, large terminase subunit and, small terminase subunit) were labeled as the ‚Äòothers‚Äô category. However, the size of the ‚Äòothers‚Äô category is more than 75 times larger than that of the three categories. To relieve the class-imbalance problem brought by this situation, we randomly selected 20000 protein sequences  from the remaining sequences and labeled as the ‚Äòothers‚Äô category;</p>
</blockquote>
</li>
<li><p>ÂéªÈô§‰∏çÊ≠£Â∏∏ÈïøÂ∫¶ÁöÑÂ∫èÂàó</p>
<blockquote>
<p>to further guarantee that the sequences from the database with the three categories are veracious, we calculated length distribution of these sequences (see Fig. S1), then manually checked the sequences with the abnormal length (&lt;5% and &gt; 95%) using Blastp (<a href="https://blast.ncbi.nlm.nih.gov/Blast.cgi" target="_blank" rel="noopener">https://blast.ncbi.nlm.nih.gov/Blast.cgi</a>) against NCBI nr database, and the sequences without hitting to the targeted references were filtered out (almost all the sequences with abnormal length) and labeled as the ‚Äòothers‚Äô category.</p>
</blockquote>
</li>
</ol>
<p>ÊúÄÁªàÁªìÊûúÔºö</p>
<img src="/images/2020/screencapture2020-11-19 PM4.09.05.jpg">

<h2 id="mimic-metagenomic-dataset"><a href="#mimic-metagenomic-dataset" class="headerlink" title="mimic metagenomic dataset"></a>mimic metagenomic dataset</h2><p>(ÂéüÊñá‰ΩçÁΩÆÔºö128-140Ë°å)</p>
<p>Êù•Ê∫êÔºöUniRef100 (<a href="https://www.uniprot.org/uniref/" target="_blank" rel="noopener">https://www.uniprot.org/uniref/</a>)</p>
<p>Â§ÑÁêÜËøáÁ®ãÂíå‰∏äÈù¢Á±ª‰ºº</p>
<p>‰∏îÔºö2‰∏™Êï∞ÊçÆÂ∫ìÊúâÈáçÂêàÔºåÊâãÂä®Âà†Èô§ÈáçÂêàÈÉ®ÂàÜ</p>
<p>Áî®ËøôÁªÑÊï∞ÊçÆÊµãËØï‰∫ÜÊ®°ÂûãÂú®‰∏çÂêåÊï∞ÊçÆÈõÜÂ§ßÂ∞è‰∏äÁöÑË°®Áé∞ÊïàÊûú</p>
<h2 id="virome-dataset"><a href="#virome-dataset" class="headerlink" title="virome dataset"></a>virome dataset</h2><p>(ÂéüÊñá‰ΩçÁΩÆÔºö141-147Ë°å)</p>
<p>Áî®‰∫éÊµãËØïÊ®°ÂûãÂú®ÁúüÂÆûÊï∞ÊçÆÈõÜ‰∏äÁöÑÁªìÊûú</p>
<p>ËøôÁªÑÊòØÂéüÂßãÊï∞ÊçÆÔºåËá™Ë°åËé∑ÂèñËõãÁôΩË¥®Â∫èÂàó</p>
<h2 id="3‰∏™Êï∞ÊçÆÈõÜÁöÑÁî®ÈÄî"><a href="#3‰∏™Êï∞ÊçÆÈõÜÁöÑÁî®ÈÄî" class="headerlink" title="3‰∏™Êï∞ÊçÆÈõÜÁöÑÁî®ÈÄî"></a>3‰∏™Êï∞ÊçÆÈõÜÁöÑÁî®ÈÄî</h2><p>(ÂéüÊñá‰ΩçÁΩÆÔºö193-197Ë°å + Fig.1A)</p>
<ol>
<li>Áî®train/test setËÆ≠ÁªÉÊ®°ÂûãÔºåÂàÜÊûêÂèØË°åÊÄß</li>
<li>Áî®mimic datasetÊµãËØïcutoff value</li>
<li>Áî®virome datasetÊµãËØïÁúüÂÆûÊïàÊûú</li>
</ol>
<blockquote>
<p>In summary, as shown in Fig. 1A, in this study, the proposed DeephageTP framework was firstly implemented on the training dataset for feasibility analysis, and then the trained model was applied on the mimic dataset for test and the cutoff value of each category of interest was determined according to the responding loss values distributions; finally, we applied the trained model on the real metagenomic datasets for examining the performance of our framework.</p>
</blockquote>
<img src="/images/2020/screencapture2020-11-19 PM3.47.08.jpg">

<h1 id="ËõãÁôΩË¥®Â∫èÂàóÁºñÁ†Å"><a href="#ËõãÁôΩË¥®Â∫èÂàóÁºñÁ†Å" class="headerlink" title="ËõãÁôΩË¥®Â∫èÂàóÁºñÁ†Å"></a>ËõãÁôΩË¥®Â∫èÂàóÁºñÁ†Å</h1><p>(ÂéüÊñá‰ΩçÁΩÆÔºö148-161Ë°å)</p>
<p>ÊñπÊ≥ïÔºöone-hot</p>
<p>ÂØπ20‰∏™Ê∞®Âü∫ÈÖ∏ËøõË°åone-hotÁºñÁ†ÅÔºå1‰∏™Ê∞®Âü∫ÈÖ∏Âç†20‰Ωç</p>
<img src="/images/2020/screencapture2020-11-19 PM4.20.48.jpg" width="300px">

<p>L‰∏™Ê∞®Âü∫ÈÖ∏ÁöÑËõãÁôΩË¥®Â∫èÂàóÂ∞ÜË¢´ÁºñÁ†ÅÊàê L * 20 ÁöÑÁü©Èòµ</p>
<p>ËæìÂÖ•ÈúÄË¶ÅÂõ∫ÂÆöÔºåÊïÖËÆæÁΩÆÊúÄÂ§ßÈïøÂ∫¶‰∏∫900ÔºåÂ§ö‰∫ÜÁ†çÊéâÔºåÂ∞ë‰∫ÜÂ°´0</p>
<p>ÊúÄÁªàÊØè‰∏™ËõãÁôΩË¥®Â∫èÂàóÈÉΩË¢´ÁºñÁ†ÅÊàê 900 * 20 ÁöÑÁü©ÈòµÔºå‰Ωú‰∏∫ËæìÂÖ•</p>
<h1 id="Ê®°Âûã"><a href="#Ê®°Âûã" class="headerlink" title="Ê®°Âûã"></a>Ê®°Âûã</h1><h2 id="ÁªìÊûÑ"><a href="#ÁªìÊûÑ" class="headerlink" title="ÁªìÊûÑ"></a>ÁªìÊûÑ</h2><p>(ÂéüÊñá‰ΩçÁΩÆÔºö163-170Ë°å)</p>
<ol>
<li><p>ËæìÂÖ•Â±Ç (ReLu)</p>
</li>
<li><p>Âç∑ÁßØÂ±Ç</p>
</li>
<li><p>ÊúÄÂ§ßÊ±†ÂåñÂ±Ç (dropout)</p>
</li>
<li><p>ÂÖ®ËøûÊé•Â±Ç1 (ReLu) (dropout)</p>
</li>
<li><p>ÂÖ®ËøûÊé•Â±Ç2</p>
</li>
<li><p>ËæìÂá∫Â±Ç (SoftMax)</p>
</li>
</ol>
<img src="/images/2020/screencapture2020-11-19 PM4.20.481.jpg">

<h2 id="Ë∂ÖÂèÇÊï∞ÈÄâÊã©"><a href="#Ë∂ÖÂèÇÊï∞ÈÄâÊã©" class="headerlink" title="Ë∂ÖÂèÇÊï∞ÈÄâÊã©"></a>Ë∂ÖÂèÇÊï∞ÈÄâÊã©</h2><p>(ÂéüÊñá‰ΩçÁΩÆÔºö171-189Ë°å)</p>
<p>ÂÖ®ËøûÊé•ÂçïÂÖÉÊï∞Èáè„ÄÅdropout rate„ÄÅlearning rateÁ≠âÁöÑÂèñÂÄºÔºåÂ§ßÈÉ®ÂàÜÊòØÂ∏∏Áî®ÁöÑÈªòËÆ§ÂÄºÔºõ‰∏Ä‰∫õÁî®5-fold cross-validationÁ°ÆÂÆö</p>
<p>20‰∏™Ê∞®Âü∫ÈÖ∏ÂàÜÊàê7ÁªÑÔºàÊ†πÊçÆdipole moments &amp; side-chainÔºâÔºö {A,G,V}, {I,L,F,P}, {Y,M,T,S}, {H,N,Q,W}, {R,K}, {D,E} and {C} -&gt; Âç∑ÁßØÂ±ÇfilterÂ§ßÂ∞èËÆæÁΩÆ‰∏∫ 7 * 1</p>
<h2 id="Ê®°ÂûãËØÑ‰º∞ÊåáÊ†á"><a href="#Ê®°ÂûãËØÑ‰º∞ÊåáÊ†á" class="headerlink" title="Ê®°ÂûãËØÑ‰º∞ÊåáÊ†á"></a>Ê®°ÂûãËØÑ‰º∞ÊåáÊ†á</h2><p>(ÂéüÊñá‰ΩçÁΩÆÔºö198-213Ë°å)</p>
<ul>
<li>Accuracy</li>
<li>Precision</li>
<li>Recall</li>
<li>F1-score</li>
</ul>
<h2 id="LossËÆ°ÁÆó"><a href="#LossËÆ°ÁÆó" class="headerlink" title="LossËÆ°ÁÆó"></a>LossËÆ°ÁÆó</h2><p>(ÂéüÊñá‰ΩçÁΩÆÔºö214-234Ë°å)</p>
<img src="/images/2020/screencapture2020-11-19 PM4.50.00.jpg">

<p>yk Á¨¨kÁª¥ÁöÑÂ∫èÂàóÁöÑÁúüÂÆûÊ†áÁ≠æ</p>
<p>pk Á¨¨kÁª¥ÁöÑÂ∫èÂàóÁöÑÈ¢ÑÊµãÊ†áÁ≠æ</p>
<h2 id="ÂÆûÁé∞"><a href="#ÂÆûÁé∞" class="headerlink" title="ÂÆûÁé∞"></a>ÂÆûÁé∞</h2><p>(ÂéüÊñá‰ΩçÁΩÆÔºö190-192Ë°å)</p>
<p>Python 3.6</p>
<p>Keras</p>
<p><a href="https://github.com/chuym726/DeephageTP" target="_blank" rel="noopener">https://github.com/chuym726/DeephageTP</a></p>
<h1 id="Ê≤°ÁúãÊáÇÁöÑ"><a href="#Ê≤°ÁúãÊáÇÁöÑ" class="headerlink" title="Ê≤°ÁúãÊáÇÁöÑ"></a>Ê≤°ÁúãÊáÇÁöÑ</h1><ol>
<li>cutoff valueÊòØÂÅö‰ªÄ‰πàÁöÑÔºüÊÄé‰πàÁÆóÁöÑÔºü</li>
<li>lossÊÄé‰πàÁÆóÁöÑÔºü</li>
</ol>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>bioinformatics</tag>
      </tags>
  </entry>
  <entry>
    <title>ËØªËÆ∫ÊñáÁ¨îËÆ∞ ANN to Detect Structural Proteins</title>
    <url>/2020/11/13/reading-note/</url>
    <content><![CDATA[<p><strong>Artificial Neural Networks Trained to Detect Viral and Phage Structural Proteins</strong></p>
<h1 id="Êï∞ÊçÆ"><a href="#Êï∞ÊçÆ" class="headerlink" title="Êï∞ÊçÆ"></a>Êï∞ÊçÆ</h1><p>Êù•Ê∫êÔºöGenBank‚Äôs non-redun- dant database</p>
<p>ÂéüÂßãÊï∞ÊçÆÔºö</p>
<ul>
<li><p>Ê≠£Ê†∑Êú¨Ôºö6000+Âô¨Ëèå‰ΩìÁªìÊûÑËõãÁôΩÂ∫èÂàó</p>
</li>
<li><p>Ë¥üÊ†∑Êú¨Ôºö6000+Âô¨Ëèå‰ΩìÂíåÂéüÊ†∏Âü∫Âõ†ÁªÑÈùûÁªìÊûÑËõãÁôΩÂ∫èÂàó</p>
</li>
</ul>
<p>Â§ÑÁêÜÂêéÁöÑÁΩëÁªúËæìÂÖ•ÔºöÊ∞®Âü∫ÈÖ∏ÁôæÂàÜÊØîÁªÑÊàêÔºà‰∫∫Â∑•Ê†áËÆ∞ÊØè‰∏™Ê†∑Êú¨ÊòØ/‰∏çÊòØÁªìÊûÑËõãÁôΩÔºâ</p>
<p>ÁõÆÁöÑÔºöÊúâ‰∏ÄÊÆµÊñ∞ÁöÑÂ∫èÂàóÔºåËÆ°ÁÆóÊ∞®Âü∫ÈÖ∏ÁôæÂàÜÊØîÁªÑÊàêÔºåËæìÂÖ•ÁΩëÁªúÔºåÈ¢ÑÊµãÊòØÂê¶‰∏∫ÁªìÊûÑËõãÁôΩ</p>
<h1 id="ÁΩëÁªú"><a href="#ÁΩëÁªú" class="headerlink" title="ÁΩëÁªú"></a>ÁΩëÁªú</h1><h2 id="ËÆ≠ÁªÉ"><a href="#ËÆ≠ÁªÉ" class="headerlink" title="ËÆ≠ÁªÉ"></a>ËÆ≠ÁªÉ</h2><p>ÁõÆÊ†áÔºöÊâæÊúÄ‰Ω≥ÁöÑÁΩëÁªúÁªìÊûÑ&amp;Êï∞ÊçÆÈõÜÂàíÂàÜ</p>
<p>Â§áÈÄâÁΩëÁªúÁªìÊûÑÔºö</p>
<ul>
<li>ÈöêËóèÂ±Ç1Ôºå1~100‰∏™Á•ûÁªèÂÖÉ</li>
<li>ÈöêËóèÂ±Ç2Ôºå1~30‰∏™Á•ûÁªèÂÖÉ</li>
</ul>
<p>Â§áÈÄâtrain/validation setÂàíÂàÜÔºö</p>
<ul>
<li>50:50, 60:40, 70:30, 80:20, 95:5</li>
</ul>
<p>È™åËØÅÊñπÊ≥ïÔºö160-fold‰∫§ÂèâÈ™åËØÅÔºàÂõæ3AÁîªÁöÑÊòØ10-fold‰∫§ÂèâÈ™åËØÅÁöÑÁªìÊûúÔºâ</p>
<p>È™åËØÅÁªìÊûúÔºö</p>
<ol>
<li><p>ËæìÂÖ•Â±ÇÔºà20‰∏™ËæìÂÖ•ÂçïÂÖÉÔºâ+ 1‰∏™ÈöêËóèÂ±ÇÔºà90‰∏™Á•ûÁªèÂÖÉÔºâ+ ËæìÂá∫Â±ÇÔºà1‰∏™ËæìÂá∫ÂçïÂÖÉÔºâË°®Áé∞ÊúÄÂ•ΩÔºåÂáÜÁ°ÆÁéá85.6%</p>
</li>
<li><p>train/validation setÂàíÂàÜ80:20Ë°®Áé∞ÊúÄÂ•ΩÔºåÂáÜÁ°ÆÁéá86.2%</p>
</li>
<li><p>Áî±‰∫éÊ≤°ÊúâÂæàÂ§ßÂ∑ÆÂà´ÔºåÊúÄÁªàÈÄâ‰∫Ü160‰∏™ÁΩëÁªúÔºåÊäïÁ•®ÂÜ≥ÂÆö</p>
</li>
</ol>
<h2 id="Êõ¥Â§öÂ∑•‰Ωú"><a href="#Êõ¥Â§öÂ∑•‰Ωú" class="headerlink" title="Êõ¥Â§öÂ∑•‰Ωú"></a>Êõ¥Â§öÂ∑•‰Ωú</h2><p>ÂÖ≥Ê≥®ÂØπÁªìÊûÑËõãÁôΩ‰∫öÁ±ªÁöÑÂàÜÁ±ªÁªìÊûúÔºåÂ¶ÇÔºöÊòØÂê¶ÊòØË°£Â£≥ÁªìÊûÑËõãÁôΩ</p>
<p>Âç≥ËæìÂÖ•Êï∞ÊçÆÁöÑÊ†áËÆ∞ÔºåÂéüÊù•Ê†áËÆ∞ÊòØÂê¶‰∏∫ÁªìÊûÑËõãÁôΩÔºåÁé∞Âú®Ê†áËÆ∞ÊòØÂê¶‰∏∫Ë°£Â£≥ÁªìÊûÑËõãÁôΩÔºåÈáçÊñ∞ËÆ≠ÁªÉÁΩëÁªúÔºåËØÑ‰º∞ÂàÜÁ±ªÂáÜÁ°ÆÂ∫¶</p>
<p>ËøòÂÅö‰∫ÜÈíàÂØπÂè§ÁªÜËèåÂíåÁúüÊ†∏ÁîüÁâ©Ë°£Â£≥ËõãÁôΩÁöÑ</p>
<p>Isoelectric pointÔºüÊ≤°ÁúãÊáÇ</p>
<h1 id="Â∑•ÂÖ∑"><a href="#Â∑•ÂÖ∑" class="headerlink" title="Â∑•ÂÖ∑"></a>Â∑•ÂÖ∑</h1><p>Neural Network Toolbox 7.0 in Matlab version 7.6.0.324</p>
<p>computations and data manipulations were done with Java, UNIX shell utilities, and Perl and Bash scripts</p>
<h1 id="web-interface"><a href="#web-interface" class="headerlink" title="web interface"></a>web interface</h1><p><a href="https://vdm.sdsu.edu/ivireons/" target="_blank" rel="noopener">https://vdm.sdsu.edu/ivireons/</a></p>
<h2 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><p>Èöè‰æø‰∏äGenbankÊâæ‰∫Ü‰∏Ä‰∏™Â∫èÂàó<a href="https://www.ncbi.nlm.nih.gov/protein/SYW18879.1" target="_blank" rel="noopener">https://www.ncbi.nlm.nih.gov/protein/SYW18879.1</a></p>
<p>‰∏ãËΩΩFASTAÊ†ºÂºè</p>
<p>sequence.fasta:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;SYW18879.1 putative transcriptional regulator (Immunity repressor; phage) [Oenococcus oeni]</span><br><span class="line">MENKPNIAKNIREIRIKEDLTQEKLAELSGLSINFVSRLERSNNQNVSINKLEAIASALKVDIWRLLKSN</span><br><span class="line">DSEINKKEFPLHTKILFDKLSEFDPERSDRISKTILSLLEELELKQK</span><br></pre></td></tr></table></figure>

<p>Êèê‰∫§ÊµãËØï</p>
<img src="/images/2020/screencapture2020-11-14 AM11.19.45.jpg">

<p><strong>Structural, MCP, &amp; Tail Protein Network Predictions</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Annotation	Structural	</span><br><span class="line">MCP 1:1	</span><br><span class="line">MCP 2:1	</span><br><span class="line">MCP 3:1	</span><br><span class="line">MCP 4:1	</span><br><span class="line">MCP 7:1	</span><br><span class="line">MCP Lambda:1	</span><br><span class="line">MCP Lambda2:1	</span><br><span class="line">Tail 1:1	</span><br><span class="line">Tail 2:1	</span><br><span class="line">Tail 3:1	</span><br><span class="line">Tail 4:1	</span><br><span class="line">Tail 7:1	</span><br><span class="line">Tail Lambda:1	</span><br><span class="line">Tail Lambda2:1	</span><br><span class="line">SDS	SD MCP 1:1	</span><br><span class="line">SD MCP 2:1	</span><br><span class="line">SD MCP 3:1	</span><br><span class="line">SD MCP 4:1	</span><br><span class="line">SD MCP 7:1	</span><br><span class="line">SD MCP Lambda:1	</span><br><span class="line">SD MCP Lambda2:1	</span><br><span class="line">SD Tail 1:1	</span><br><span class="line">SD Tail 2:1	</span><br><span class="line">SD Tail,3:1	</span><br><span class="line">SD Tail 4:1	</span><br><span class="line">SD Tail 7:1	</span><br><span class="line">SD Tail Lambda:1	</span><br><span class="line">SD Tail Lambda2:1</span><br></pre></td></tr></table></figure>

<p><strong>Percent Compositions and Isoelectric Point Estimates (last column)</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0.0427 0.0000 0.0513 0.1197 0.0342 0.0085 0.0085 0.1026 0.1197 0.1453 0.0085 0.0855 0.0256 0.0256 0.0598 0.1026 0.0256 0.0256 0.0085 0.0000 9.07</span><br></pre></td></tr></table></figure>

<p>Ê†πÊçÆ<a href="http://vdm.sdsu.edu/ivireons/interpret.html" target="_blank" rel="noopener">interpret your results</a>ÁöÑÊèêÁ§∫‚Ä¶Ê≤°ÁúãÊáÇ</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>bioinformatics</tag>
      </tags>
  </entry>
  <entry>
    <title>AR FoundationÁ¨îËÆ∞05 Gaze Interaction</title>
    <url>/2020/09/28/note-arfoundation-05/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.youtube.com/watch?v=OE66gtiF8QQ&amp;ab_channel=ThirdAurora" target="_blank" rel="noopener">https://www.youtube.com/watch?v=OE66gtiF8QQ&amp;ab_channel=ThirdAurora</a></p>
</blockquote>
<hr>
<h1 id="First-Try-Failed"><a href="#First-Try-Failed" class="headerlink" title="First Try (Failed)"></a>First Try (Failed)</h1><h2 id="ÂàõÂª∫È°πÁõÆ"><a href="#ÂàõÂª∫È°πÁõÆ" class="headerlink" title="ÂàõÂª∫È°πÁõÆ"></a>ÂàõÂª∫È°πÁõÆ</h2><p>start from : <a href="https://github.com/Third-Aurora/ARFoundationExample" target="_blank" rel="noopener">https://github.com/Third-Aurora/ARFoundationExample</a> </p>
<p>Êñ∞Âª∫‰∏Ä‰∏™Project03ÔºåÊääAssetsÊã∑ËøõÂéª</p>
<p>ËµÑÊ∫êÁÆ°ÁêÜÂô®Èáå+ARFoundation &amp; AR Core</p>
<p>ÂàáÊç¢Âπ≥Âè∞Âà∞AndroidÔºå‰∏ÄÁ≥ªÂàóËÆæÁΩÆÂêåÁ¨îËÆ∞01</p>
<h2 id="Content-Parent"><a href="#Content-Parent" class="headerlink" title="Content Parent"></a>Content Parent</h2><p>Â∑≤ÂØºÂÖ•ËµÑÊ∫êÔºö</p>
<img src="/images/2020/screencapture2020-09-28 PM9.39.17.jpg" width=300>

<p>Content Parent -&gt; Cube xyzÈÉΩÊîπÊàê0.5</p>
<p>ÂàõÂª∫Á©∫ÂØπË±°Âè´SectionInfo</p>
<p>ÂàõÂª∫3D Object QuadÂè´InfoParent</p>
<p>ÊääSectionInfoÊãñÈ´ò‰∏ÄÁÇπ Y-&gt;1.5</p>
<p>ÊóãËΩ¨InfoParent Y-&gt;180 Áº©Êîæ X-&gt;2</p>
<h2 id="Materials"><a href="#Materials" class="headerlink" title="Materials"></a>Materials</h2><p>Assets‰∏≠Êñ∞Âª∫Êñá‰ª∂Â§πMaterials</p>
<p>ÂàõÂª∫ÊùêË¥®transÔºåÊãñÂà∞InfoParent‰∏ä</p>
<p>È¢úËâ≤ÔºöBlack 0.7Opacity</p>
<p>Rendering ModeÔºöTransparent</p>
<p>Âè¶Â§ñÂàõÂª∫‰∏Ä‰∏™blueÊùêË¥®ÔºåÊãñÂà∞cube‰∏ä</p>
<h2 id="InfoParent"><a href="#InfoParent" class="headerlink" title="InfoParent"></a>InfoParent</h2><p>InfoParent‰∏ãÂàõÂª∫CubeÔºåË∞ÉÊï¥‰∏Ä‰∏ã‰ΩçÁΩÆ</p>
<img src="/images/2020/screencapture2020-09-28 PM9.50.14.jpg">

<p>‰πüÁî®transÊùêË¥®</p>
<p>ÂàõÂª∫Text - TextMeshProÔºåimport TMP essentials</p>
<p>Ë∞ÉÊï¥Â§ßÂ∞èÔºåÊñáÂ≠óÂ±Ö‰∏≠ÔºåAuto SizeÔºàmin 0Ôºåmax 1000Ôºâ</p>
<img src="/images/2020/screencapture2020-09-28 PM10.11.12.jpg">

<p>InfoParentÊãñÊàêÂíåSectionInfoÂêåÁ∫ß</p>
<p>ÊãñÂä®SectionInfoÁöÑÈîöÁÇπÈ´òÂ∫¶ÂíåCube‰∏äÊñπÂØπÈΩê</p>
<p>ÂÜçÊääInfoParentÊãñËøõÂéª</p>
<p>Ê≠§Êó∂Ë∞ÉÊï¥SetcionInfo ScaleÁöÑyÔºåÁâåÂ≠êÂÉè‰ªéBoxÈáåÂá∫Êù•</p>
<p>(Text -&gt; Extra Setting -&gt; Order in LayerÊîπÊàê1 )</p>
<h2 id="Script"><a href="#Script" class="headerlink" title="Script"></a>Script</h2><ol>
<li>ËÆ©SectionInfoÂá∫Áé∞</li>
</ol>
<p>Êñ∞Âª∫ScriptÂè´InfoBehaviorÔºåÊãñÂà∞Cube‰∏ä</p>
<p>Âπ∂ÊääSetionInfoÊãñÂà∞ÂèòÈáè‰∏ä</p>
<img src="/images/2020/screencapture2020-09-28 PM10.42.07.jpg">

<ol start="2">
<li>SectionInfoÊóãËΩ¨ÂØπÂáÜÊëÑÂÉèÂ§¥</li>
</ol>
<p>Êñ∞Âª∫scriptÂè´FaceCamera</p>
<p>AR CameraÊ†áÁ≠æ‰∏∫MainCamera</p>
<p>scriptÊãñÂà∞SectionInfo‰∏ä</p>
<p>Ê≠§Êó∂ÊãñÂä®cameraÔºåÁâåÂ≠êÂ∞±‰ºöË∑üÁùÄÂä®‰∫ÜÔºà‰∏çË°åÂ∞±Âà†‰∫ÜscriptÁÑ∂ÂêéÈáçÊñ∞ÊãñËøõÂéªÔºâ</p>
<img src="/images/2020/screencapture2020-09-28 PM11.18.36.jpg" width=400>

<ol start="3">
<li>Gaze</li>
</ol>
<p>CubeÂä†Ê†áÁ≠æhasInfo</p>
<img src="/images/2020/screencapture2020-09-28 PM11.26.14.jpg" width=400>

<p>Êñ∞Âª∫scriptÂè´GazeÔºåÊãñÂà∞MainCamera‰∏ä</p>
<hr>
<p>ÊµãËØïÂπ∂Ê≤°ÊúâÈ¢ÑÊúüÊïàÊûúÔºü</p>
<p>ËÄå‰∏î‰πãÂâçÂØºÂÖ•ÁöÑ‰∏ÄÂ†ÜAssetsÂπ∂Ê≤°ÊúâÁî®Âà∞Ôºü</p>
<p>ÈáçÊñ∞ÂàõÂª∫Á©∫ÁôΩÈ°πÁõÆËØïËØï</p>
<hr>
<h1 id="Second-Try"><a href="#Second-Try" class="headerlink" title="Second Try"></a>Second Try</h1>]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>ar</tag>
      </tags>
  </entry>
  <entry>
    <title>AR FoundationÁ¨îËÆ∞04 Tap to Place Objects in AR</title>
    <url>/2020/09/28/note-arfoundation-04/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.youtube.com/watch?v=xguiSueY1Lw&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=5&amp;ab_channel=DineshPunni" target="_blank" rel="noopener">https://www.youtube.com/watch?v=xguiSueY1Lw&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=5&amp;ab_channel=DineshPunni</a></p>
</blockquote>
<hr>
<p>(Êé•Á¨îËÆ∞03)</p>
<p>Create New Folder (Scripts)</p>
<p>Create C# Script</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.XR.ARFoundation;</span><br><span class="line">using UnityEngine.XR.ARSubsystems;</span><br><span class="line"></span><br><span class="line">[RequireComponent(typeof(ARRaycastManager))]</span><br><span class="line">public class ARTapToPlaceObject : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public GameObject gameObjectToInstantiate;</span><br><span class="line">    </span><br><span class="line">    private GameObject spawnedObject;</span><br><span class="line">    private ARRaycastManager arRaycastManager;</span><br><span class="line">    private Vector2 touchPosition;</span><br><span class="line">    </span><br><span class="line">    static List&lt;ARRaycastHit&gt; hits &#x3D; new List&lt;ARRaycastHit&gt;();</span><br><span class="line">    </span><br><span class="line">    private void Awake()</span><br><span class="line">    &#123;</span><br><span class="line">        arRaycastManager &#x3D; GetComponent&lt;ARRaycastManager&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    bool TryGetTouchPosition(out Vector2 touchPosition)</span><br><span class="line">    &#123;</span><br><span class="line">        if(Input.touchCount &gt; 0)</span><br><span class="line">        &#123;</span><br><span class="line">            touchPosition &#x3D; Input.GetTouch(0).position;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        touchPosition &#x3D; default;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if(!TryGetTouchPosition(out Vector2 touchPosition))</span><br><span class="line">        &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        if(arRaycastManager.Raycast(touchPosition,hits,TrackableType.PlaneWithinPolygon))</span><br><span class="line">        &#123;</span><br><span class="line">            var hitPose &#x3D; hits[0].pose;</span><br><span class="line">            </span><br><span class="line">            if(spawnedObject &#x3D;&#x3D; null)</span><br><span class="line">            &#123;</span><br><span class="line">                spawnedObject &#x3D; Instantiate(gameObjectToInstantiate, hitPose.position, hitPose.rotation);</span><br><span class="line">            &#125;</span><br><span class="line">            else</span><br><span class="line">            &#123;</span><br><span class="line">                spawnedObject.transform.position &#x3D; hitPose.position;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊääScriptÊãñËøõAR Session Origin</p>
<p>Create CubeÊãñËøõPrefabsÔºåÊãñËøõGameObjectToInstantiate</p>
<img src="/images/2020/screencapture2020-09-28 PM9.20.08.jpg">

<p>Build</p>
<img src="/images/2020/Screenshot_2020-09-28-21-25-16-503_com.coconutnut.jpg" width=400>

<p>Yeah~</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>ar</tag>
      </tags>
  </entry>
  <entry>
    <title>AR FoundationÁ¨îËÆ∞03 Plane Detection</title>
    <url>/2020/09/28/note-arfoundation-03/</url>
    <content><![CDATA[<blockquote>
<p> <a href="https://www.youtube.com/watch?v=uWWiYfPTUtU&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=4&amp;ab_channel=DineshPunni" target="_blank" rel="noopener">https://www.youtube.com/watch?v=uWWiYfPTUtU&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=4&amp;ab_channel=DineshPunni</a></p>
</blockquote>
<hr>
<ol>
<li>add AR Plane Manager</li>
</ol>
<p>AR Session Origin-&gt; add component -&gt; AR Plane Manager</p>
<ol start="2">
<li>Build your own plane object (or use prebuilt prefab)</li>
</ol>
<p>Create Empty Object</p>
<p>Add Components</p>
<img src="/images/2020/screencapture2020-09-28 PM8.44.02.jpg" width=400>

<p>Line Renderer</p>
<img src="/images/2020/screencapture2020-09-28 PM8.46.59.jpg" width=400>

<ol start="3">
<li>Add material to Mesh Renderer</li>
</ol>
<p>Create a folder in Assets</p>
<p>Create Material</p>
<img src="/images/2020/screencapture2020-09-28 PM8.49.54.jpg">

<p>Assign to Mesh Renderer</p>
<ol start="4">
<li>Create prefab of this plane</li>
</ol>
<p>Create a folder (Prefabs)</p>
<p>Drag ARPlane to folder</p>
<p>Assign to AR Plane Manager</p>
<img src="/images/2020/screencapture2020-09-28 PM8.52.28.jpg">

<ol start="5">
<li>Build</li>
</ol>
<img src="/images/2020/Screenshot_2020-09-28-20-59-24-106_com.coconutnut.jpg" width=400>

<p>üßêÂæàÊòØËø∑ÊÉë</p>
<img src="/images/2020/Screenshot_2020-09-28-21-03-08-471_com.coconutnut.jpg" width=400>

<p>Êîπ‰∫Ü‰∏Ä‰∏ãÈ°∫ÁúºÂ§ö‰∫Ü</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>ar</tag>
      </tags>
  </entry>
  <entry>
    <title>AR FoundationÁ¨îËÆ∞02 Image Tracking</title>
    <url>/2020/09/26/note-arfoundation-02/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.youtube.com/watch?v=o_z_Eb8Yh2g&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=3&amp;ab_channel=DineshPunni" target="_blank" rel="noopener">https://www.youtube.com/watch?v=o_z_Eb8Yh2g&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=3&amp;ab_channel=DineshPunni</a></p>
</blockquote>
<hr>
<p>AR Session Origin -&gt; Add AR Tracked Image Manager</p>
<p>Assets -&gt; Create -&gt; XR -&gt; Reference Image Library</p>
<p>Êãñ‰∏ÄÂº†ÂõæÂà∞AssetsÈáå</p>
<p>Reference Library -&gt; Add Image ÊääÂõæÊãñËøõÂéªÔºåÂ°´Physical Size</p>
<img src="/images/2020/screencapture2020-09-26 PM6.30.20.jpg">

<p>AR Session Origin -&gt; ÊääReference LibraryÊãñÂà∞AR Tracked Image Manager‰∏≠</p>
<p>Assets -&gt; Create -&gt; C# Script -&gt; ÈáçÂëΩÂêçImageRecognitionExample</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.XR.ARFoundation;</span><br><span class="line"></span><br><span class="line">public class NewBehaviourScript : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    private ARTrackedImageManager _arTrackedImageManager;</span><br><span class="line">    </span><br><span class="line">    private void Awake()</span><br><span class="line">    &#123;</span><br><span class="line">        _arTrackedImageManager &#x3D; FindObjectOfType&lt;ARTrackedImageManager&gt;();    </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void OnEnable()</span><br><span class="line">    &#123;</span><br><span class="line">        _arTrackedImageManager.trackedImagesChanged +&#x3D; OnImageChanged;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void onDisable()</span><br><span class="line">    &#123;</span><br><span class="line">        _arTrackedImageManager.trackedImagesChanged -&#x3D; OnImageChanged;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void OnImageChanged(ARTrackedImagesChangedEventArgs args)</span><br><span class="line">    &#123;</span><br><span class="line">        foreach (var trackedImage in args.added)</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(trackedImage.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Create 3D Object CubeÔºåË∞ÉÊï¥‰ΩçÁΩÆ„ÄÅÂ§ßÂ∞è</p>
<img src="/images/2020/screencapture2020-09-26 PM6.44.08.jpg">

<p>ÊãñËøõAssetsÔºàÂèòÊàêprefabÔºâÔºåÂú®SampleScene‰∏≠Âà†Èô§</p>
<p>ÊääprefabÊãñËøõAR Tracked Image Manager</p>
<p>Build</p>
<img src="/images/2020/Screenshot_2020-09-26-18-48-02-522_com.coconutnut.jpg" width=400>

<p>ÊàêÂäü~</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>ar</tag>
      </tags>
  </entry>
  <entry>
    <title>AR FoundationÁ¨îËÆ∞01 ÂÆâÂçìSetup</title>
    <url>/2020/09/26/note-arfoundation-01/</url>
    <content><![CDATA[<blockquote>
<p> <a href="https://www.youtube.com/watch?v=0mpsiO2lCx0&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=1&amp;ab_channel=DineshPunni" target="_blank" rel="noopener">https://www.youtube.com/watch?v=0mpsiO2lCx0&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=1&amp;ab_channel=DineshPunni</a></p>
</blockquote>
<hr>
<h1 id="ÁéØÂ¢É"><a href="#ÁéØÂ¢É" class="headerlink" title="ÁéØÂ¢É"></a>ÁéØÂ¢É</h1><p>macOS Catalina 10.15.6</p>
<p>Unity Hub 2.3.10</p>
<p>Unity 2020.1.6f1c1</p>
<h1 id="ÈÖçÁΩÆ"><a href="#ÈÖçÁΩÆ" class="headerlink" title="ÈÖçÁΩÆ"></a>ÈÖçÁΩÆ</h1><p>File -&gt; Build Settings</p>
<p>ÂàáÊç¢Âπ≥Âè∞Âà∞Android</p>
<p>-&gt; Player Settings</p>
<ol>
<li><p>Other Settings -&gt; ÊîπPackage Name</p>
</li>
<li><p>Disable Multithread Rendering (Android doesn‚Äôt support yet)</p>
</li>
<li><p>Graphics APIs -&gt; disable Vulkan</p>
</li>
<li><p>Minimun API level -&gt; 26</p>
</li>
</ol>
<h1 id="Package"><a href="#Package" class="headerlink" title="Package"></a>Package</h1><p>Window -&gt; Package Manager -&gt; Packages : Unity Registry</p>
<img src="/images/2020/screencapture2020-09-26 PM5.51.57.jpg" width=400>

<h1 id="Sample-Scene"><a href="#Sample-Scene" class="headerlink" title="Sample Scene"></a>Sample Scene</h1><ol>
<li><p>Âà†Èô§Main Camera</p>
</li>
<li><p>Right Click -&gt; XR -&gt; AR Session Origin</p>
<p>AR Camera Ê†áÁ≠æ MainCamera</p>
</li>
<li><p>Right Click -&gt; XR -&gt; AR Session</p>
</li>
<li><p>Right Click -&gt; 3D Object -&gt; Cube<br>‰ΩçÁΩÆÊîπÊàê0Ôºå0Ôºå0<br>Áº©ÊîæÊîπÊàê0.2Ôºå0.2Ôºå0.2<br>Èöè‰æøËΩ¨ËΩ¨</p>
</li>
</ol>
<h1 id="Build"><a href="#Build" class="headerlink" title="Build"></a>Build</h1><p>ÊâãÊú∫ -&gt; ÂºÄÂèëËÄÖÊ®°Âºè</p>
<p>Ëøû‰∏ä</p>
<p>File -&gt; Build Settings -&gt; Run Device -&gt; ÈÄâ‰∏≠ÊâãÊú∫</p>
<p> Add Open Scene</p>
<p>Build and Run</p>
<img src="/images/2020/Screenshot_2020-09-26-18-10-31-833_com.coconutnut.jpg" width=400>

<p>ÊàêÂäü<del>~</del></p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>ar</tag>
      </tags>
  </entry>
  <entry>
    <title>ÂÆâË£ÖsplinterËÆ∞ÂΩï</title>
    <url>/2020/09/09/note-splinter/</url>
    <content><![CDATA[<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip install splinter</span><br></pre></td></tr></table></figure>

<p>Âùë</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">brew cask install chromedriver</span><br></pre></td></tr></table></figure>

<p>ÁâπÂà´ÊÖ¢ÔºåË£ÖÂÆå‰∏ÄË∑ëÂèëÁé∞ÁâàÊú¨ÊòØ81</p>
<p>‰ΩÜÊòØchrome://versionÊü•ÁúãÊòØ85ÔºåÁî®‰∏ç‰∫Ü</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">brew cask uninstall chromedriver</span><br></pre></td></tr></table></figure>

<p>Âç∏‰∫Ü</p>
<p>Áõ¥Êé•Âú®<a href="https://sites.google.com/a/chromium.org/chromedriver/downloads" target="_blank" rel="noopener">https://sites.google.com/a/chromium.org/chromedriver/downloads</a> ‰∏ãËΩΩ‰∫ÜÂØπÂ∫îÁâàÊú¨ÔºåÊãñÂà∞/usr/local/bin/ Èáå</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">% chromedriver -v</span><br><span class="line">ChromeDriver 85.0.4183.87 (cd6713ebf92fa1cacc0f1a598df280093af0c5d7-refs&#x2F;branch-heads&#x2F;4183@&#123;#1689&#125;)</span><br></pre></td></tr></table></figure>

<p>ÊàêÂäü</p>
]]></content>
      <categories>
        <category>Debug</category>
      </categories>
  </entry>
  <entry>
    <title>ËÆ∞ÂΩïÈÉ®ÁΩ≤ÈùôÊÄÅÈ°µÈù¢</title>
    <url>/2020/08/10/webpage/</url>
    <content><![CDATA[<p>Êääindex.htmlÂíåassetsÂáÜÂ§áÂ•Ω</p>
<p>sshËøû‰∏äÊúçÂä°Âô®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt-get install apache2</span><br></pre></td></tr></table></figure>

<p>ÊääÊñá‰ª∂‰º†Âà∞/var/www/html</p>
<p>Ôºà‰∏ÄÂºÄÂßã‰º†Êàê‰∫Ü/root/var/www/htmlÔºåindex.html‰∏ÄÁõ¥ÊòæÁ§∫‰∏çÂØπÔºâ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;apache2&#x2F;apache2.conf</span><br></pre></td></tr></table></figure>

<p>ÊúÄÂêéÂä†‰∏ÄÂè•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ServerName ***.**.**.89</span><br></pre></td></tr></table></figure>

<p>ÁÑ∂Âêé</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;apache2&#x2F;mods-available&#x2F;dir.conf</span><br></pre></td></tr></table></figure>

<p>ÊîπÊàê</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;IfModule mod_dir.c&gt;</span><br><span class="line">DirectoryIndex  index.html</span><br><span class="line">&lt;&#x2F;IfModule&gt;</span><br></pre></td></tr></table></figure>

<p>ÈáçÂêØ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apache2ctl -k restart</span><br></pre></td></tr></table></figure>

<p>ÊµèËßàÂô®ËÆøÈóÆ</p>
<p><a href="http://xxx/index.html" target="_blank" rel="noopener">http://xxx/index.html</a></p>
<p>ok</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
  </entry>
  <entry>
    <title>ËØª‰π¶Á¨îËÆ∞ Â§ßËÑë‰øÆÂ§çÊúØ</title>
    <url>/2020/07/25/brain/</url>
    <content><![CDATA[<img src="/images/2020/brain1.png">

<img src="/images/2020/brain2.png">

<img src="/images/2020/brain3.png">

<img src="/images/2020/brain4.png">]]></content>
      <categories>
        <category>Memo</category>
      </categories>
      <tags>
        <tag>mindmap</tag>
      </tags>
  </entry>
  <entry>
    <title>ËÆ∞ÂΩïÊúçÂä°Âô®ÂÆâË£ÖAnaconda</title>
    <url>/2020/06/24/memo-python/</url>
    <content><![CDATA[<p>pyenvÊØèÊ¨°ÈÉΩË¶Åsource ~/.bash_profileÊâçËÉΩÁîüÊïàÔºåÊâéÂøÉÔºåÂç∏‰∫Ü</p>
<p>Áé∞Âú®Á¨îËÆ∞Êú¨‰∏äÂ∫îËØ•Âè™ÊúâÁ≥ªÁªüËá™Â∏¶ÁöÑ2.7ÔºàÂíåÊ≤°Âç∏Âπ≤ÂáÄÁöÑÈÅóÁïôÊñá‰ª∂Ôºâ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">coconutnut@Ss-MacBook-Pro ~ % python -V</span><br><span class="line">Python 2.7.17</span><br><span class="line">coconutnut@Ss-MacBook-Pro ~ % pip -V</span><br><span class="line">pip 19.3.1 from &#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;site-packages&#x2F;pip (python 2.7)</span><br></pre></td></tr></table></figure>

<p>ÊÉ≥‰∫Ü‰∏ãÂπ≤ËÑÜË£ÖÊúçÂä°Âô®‰∏äÂ•Ω‰∫Ü</p>
<hr>
<h1 id="ÂÆâË£ÖAnaconda"><a href="#ÂÆâË£ÖAnaconda" class="headerlink" title="ÂÆâË£ÖAnaconda"></a>ÂÆâË£ÖAnaconda</h1><blockquote>
<p><a href="https://blog.csdn.net/qq_41813258/article/details/102400325" target="_blank" rel="noopener">https://blog.csdn.net/qq_41813258/article/details/102400325</a></p>
</blockquote>
<blockquote>
<p><a href="https://repo.anaconda.com/archive/" target="_blank" rel="noopener">https://repo.anaconda.com/archive/</a></p>
</blockquote>
<p>ÂÆòÁΩë‰∏ã‰∫Ü‰∏™ÊúÄÊñ∞Áâàanaconda3-2020.02-linux-x86_64.sh/</p>
<p>bashÂÆâË£ÖÔºåÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># conda -V</span><br><span class="line">conda 4.8.2</span><br></pre></td></tr></table></figure>

<p>ÂÆåÊàê</p>
<p>ÂàõÂª∫‰∏Ä‰∏™3.7.6ÁöÑÁéØÂ¢É</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># conda create -n env3.7 python&#x3D;3.7.6</span><br><span class="line">...</span><br><span class="line">#</span><br><span class="line"># To activate this environment, use</span><br><span class="line">#</span><br><span class="line">#     $ conda activate env3.7</span><br><span class="line">#</span><br><span class="line"># To deactivate an active environment, use</span><br><span class="line">#</span><br><span class="line">#     $ conda deactivate</span><br></pre></td></tr></table></figure>

<h1 id="ÈÖçÁΩÆJupyter-notebook"><a href="#ÈÖçÁΩÆJupyter-notebook" class="headerlink" title="ÈÖçÁΩÆJupyter notebook"></a>ÈÖçÁΩÆJupyter notebook</h1><blockquote>
<p><a href="https://blog.csdn.net/qq_43058685/article/details/103804238" target="_blank" rel="noopener">https://blog.csdn.net/qq_43058685/article/details/103804238</a></p>
</blockquote>
<p>Á´ØÂè£ÈÖçÁöÑ2020</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">jupyter notebook --ip&#x3D;0.0.0.0 --no-browser --allow-root</span><br></pre></td></tr></table></figure>

<p>ÊµèËßàÂô®ËØï‰∫Ü‰∏Ä‰∏ãÔºåok</p>
<h1 id="Â∏∏Áî®ÂëΩ‰ª§"><a href="#Â∏∏Áî®ÂëΩ‰ª§" class="headerlink" title="Â∏∏Áî®ÂëΩ‰ª§"></a>Â∏∏Áî®ÂëΩ‰ª§</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ÊâìÂºÄjupyter notebook</span><br><span class="line">jupyter notebook --allow-root</span><br><span class="line"></span><br><span class="line"># ÂêéÂè∞ËøêË°å</span><br><span class="line">nohup jupyter notebook --allow-root &amp;</span><br><span class="line"></span><br><span class="line"># ÊâæÂà∞jupyterËøõÁ®ã</span><br><span class="line">ps aux | grep jupyter</span><br><span class="line"></span><br><span class="line"># ÂÖ≥Èó≠ÂÆÉ</span><br><span class="line">kill XXX(pid)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Memo</category>
      </categories>
  </entry>
  <entry>
    <title>ËØª‰π¶Á¨îËÆ∞ Êé®ËçêÁ≥ªÁªüÂÆûË∑µ</title>
    <url>/2020/06/24/recommender-system/</url>
    <content><![CDATA[<img src="/images/2020/recommendation_system.png">

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mindmap</tag>
      </tags>
  </entry>
  <entry>
    <title>Á¨îËÆ∞ Êé®ËçêÁ≥ªÁªü</title>
    <url>/2020/06/23/recommendation/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av30578499/" target="_blank" rel="noopener">https://www.bilibili.com/video/av30578499/</a></p>
</blockquote>
<h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><img src="/images/2020/screencapture2020-06-23 AM9.48.46.jpg">

<h1 id="‰º†ÁªüÊé®ËçêÁ≥ªÁªü"><a href="#‰º†ÁªüÊé®ËçêÁ≥ªÁªü" class="headerlink" title="‰º†ÁªüÊé®ËçêÁ≥ªÁªü"></a>‰º†ÁªüÊé®ËçêÁ≥ªÁªü</h1><p>Content-basedÔºöunstructuredÔºåÊñáÂ≠ó„ÄÅÂõæÂÉèÁ≠âÔºåÈúÄÁêÜËß£ËØ≠‰πâ„ÄÅÊèêÂèñÂ§ßÈáèÁâπÂæÅÔºåÁÆóÊ≥ïÂ§çÊùÇÂª∂ËøüÈ´ò</p>
<p>Collaborative filteringÂçèÂêåËøáÊª§ÔºöÂü∫‰∫éUser„ÄÅItemÂéÜÂè≤ÔºåÂ¶ÇÁÇπÂáªÊòØ1„ÄÅ‰∏çÁÇπÂáªÊòØ0</p>
<p>DemographicÔºöÂú∞Âüü‰ø°ÊÅØ</p>
<p>Knowledge-basedÔºöÊ†πÊçÆ‰∏ì‰∏öÁü•ËØÜ</p>
<p>Community-basedÔºöÁ±ª‰ººContent-basedÔºåÂ¶ÇÁ§æ‰∫§ÁΩëÁªú„ÄÅ‰∫∫Áæ§ÂÖ¥Ë∂£</p>
<p>HybridÔºöÁªºÂêà</p>
<h2 id="ÂçèÂêåËøáÊª§"><a href="#ÂçèÂêåËøáÊª§" class="headerlink" title="ÂçèÂêåËøáÊª§"></a>ÂçèÂêåËøáÊª§</h2><img src="/images/2020/screencapture2020-06-23 AM9.52.31.jpg">

<p>Âü∫‰∫éÁõ∏‰ººUserÂà§Êñ≠</p>
<p>ËÆ°ÁÆóÁõ∏‰ººÊÄß </p>
<ul>
<li>Memery-based<ul>
<li>Item-based Â¶ÇÔºåÊääItemËΩ¨ÊàêÁü©ÈòµËÆ°ÁÆóÁõ∏‰ººÊÄß</li>
<li>User-based</li>
</ul>
</li>
<li>Model-based Âª∫Á´ãUserÂíåItemÁöÑÊñπÁ®ãÔºåÁªôÂÆö‰∏Ä‰∏™UserÂíåItemËøîÂõû‰∏Ä‰∏™ÂàÜÊï∞</li>
</ul>
<img src="/images/2020/screencapture2020-06-23 AM9.55.53.jpg">

<p>ÊÄùÊÉ≥ÔºöÊ†πÊçÆUser-Item RatingÁü©ÈòµÔºåÂ≠¶Âà∞UserÂíåItem‰ΩéÁª¥ÁöÑÁâπÂæÅË°®Á§∫ÔºåÁî®ÂÆÉËÆ°ÁÆóÁõ∏‰ººÊÄß</p>
<p>Ë¥≠‰π∞‰∏∫1ÔºåÁÇπÂáªÊú™Ë¥≠‰π∞‰∏∫0ÔºåÂâ©‰∏ãË°•0</p>
<p>Áü©ÈòµÂàÜËß£ÔºöÈôçÁª¥ Êâæ‰∏Ä‰∏™Áü©Èòµ‰ª£Ë°®UserÔºå‰∏Ä‰∏™‰ª£Ë°®ItemÔºåÁõ∏‰πòÂæóÂà∞</p>
<p>ÂèØÂÅöRegularization</p>
<h3 id="‰ºòÁÇπ"><a href="#‰ºòÁÇπ" class="headerlink" title="‰ºòÁÇπ"></a>‰ºòÁÇπ</h3><ul>
<li>Easy to implementÔºåÁ≥ªÁªüÁÆÄÂçïÔºåÂìçÂ∫îÂø´</li>
<li>Content-independentÔºå‰∏éÁî®Êà∑ÂÖ∂ÂÆÉÁâπÂæÅÊó†ÂÖ≥Ôºå‰∏çÈúÄË¶ÅËé∑ÂèñËøô‰∫õ‰ø°ÊÅØÂç≥ÂèØÂÆûÁé∞</li>
</ul>
<h3 id="Áº∫ÁÇπ"><a href="#Áº∫ÁÇπ" class="headerlink" title="Áº∫ÁÇπ"></a>Áº∫ÁÇπ</h3><ul>
<li>Êï∞ÊçÆÁ®ÄÁñè</li>
<li>Cold-start problem Â¶ÇÊñ∞Áî®Êà∑ÁâπÂæÅÂêëÈáèÂÖ®0ÔºåÊó†Ê≥ïËÆ°ÁÆó</li>
<li>Do not consider content</li>
</ul>
<h1 id="Ê∑±Â∫¶Â≠¶‰π†"><a href="#Ê∑±Â∫¶Â≠¶‰π†" class="headerlink" title="Ê∑±Â∫¶Â≠¶‰π†"></a>Ê∑±Â∫¶Â≠¶‰π†</h1><p>‰ºòÂäøÔºöË°®ÂæÅËÉΩÂäõÂº∫„ÄÅ‰∏çÈúÄË¶ÅÂÅöÁâπÂæÅÂ∑•Á®ã„ÄÅ</p>
<p>ÂÖàÂàõÂª∫Ê∑±Â∫¶Â≠¶‰π†ÁöÑÁΩëÁªúÁªìÊûÑÂÆûÁé∞ÂçèÂêåËøáÊª§ÔºåÂÜçÂä†ÂÖ•Content-based</p>
<h2 id="Neural-Collaborative-filtering"><a href="#Neural-Collaborative-filtering" class="headerlink" title="Neural Collaborative filtering"></a>Neural Collaborative filtering</h2><img src="/images/2020/screencapture2020-06-23 AM11.29.37.jpg">

<ul>
<li><p>Embedding Layers</p>
<ul>
<li>Êää‰ªª‰Ωï‰∏Ä‰∏™User„ÄÅItemÂèòÊàê‰∏Ä‰∏™‰ΩéÁª¥ÂêëÈáè</li>
<li>One-Hot Encoding</li>
</ul>
</li>
<li><p>Neural CF Layers</p>
<ul>
<li>ÂÅöÁü©ÈòµÂàÜËß£</li>
<li>ÂèØ‰ª•Âä†ÈöêËóèÂ±ÇÔºåÂ≠¶‰π†ÈùûÁ∫øÊÄßË°®ÂæÅ</li>
</ul>
</li>
</ul>
<h2 id="Neural-Matrix-Factorization-Model"><a href="#Neural-Matrix-Factorization-Model" class="headerlink" title="Neural Matrix Factorization Model"></a>Neural Matrix Factorization Model</h2><img src="/images/2020/screencapture2020-06-23 AM11.36.27.jpg">

<p>Á∫øÊÄßÁöÑÂíåÈùûÁ∫øÊÄßÁöÑÁªìÂêàÂà∞‰∏ÄËµ∑</p>
<p>ÈóÆÈ¢òÔºöÊ≤°ÊúâContent-basedÔºåÂ∏åÊúõÂä†ÂÖ•ÊâãÂ∑•ÊèêÂèñÁöÑÁâπÂæÅ</p>
<h2 id="Wide-Deep-Neural-Network"><a href="#Wide-Deep-Neural-Network" class="headerlink" title="Wide Deep Neural Network"></a>Wide Deep Neural Network</h2><p>WideÈÉ®ÂàÜËæìÂÖ•ÊâãÂ∑•ÁâπÂæÅÂ∑•Á®ãÁöÑÁªìÊûúÔºåÂ¶ÇÔºöÂπ¥ÈæÑ„ÄÅÂéÜÂè≤ËÆ∞ÂΩï</p>
<p>DeepÈÉ®ÂàÜÊòØUser„ÄÅItem</p>
<p>ÊúÄÂêéÁªìÂêàÂà∞‰∏ÄËµ∑ÂÅöÂá∫È¢ÑÊµã</p>
<p>Eg: Google Play</p>
<img src="/images/2020/screencapture2020-06-23 AM11.41.51.jpg">

<h2 id="‰º†ÁªüÁöÑ-Factorization-Machines"><a href="#‰º†ÁªüÁöÑ-Factorization-Machines" class="headerlink" title="‰º†ÁªüÁöÑ Factorization Machines"></a>‰º†ÁªüÁöÑ Factorization Machines</h2><p>Áõ¥Êé•ÂØπ‰∫ßÂìÅÁöÑÁ±ªÂûã‰ø°ÊÅØÂÅöOne-Hot Encoding</p>
<img src="/images/2020/screencapture2020-06-23 AM11.48.13.jpg">

<p>ÁâπÂæÅ‰∫§Âèâ Â¶ÇÊÄßÂà´=Áî∑ÔºåÂπ¥ÈæÑ=20 ÊääÂØπÂ∫îÁöÑÁª¥Áõ∏‰πòÔºåÊï∞ÊçÆËøáÂ§ßÊòØÈöæÂ§ÑÁêÜ</p>
<p>Áî®Áü©ÈòµÂàÜËß£ÁöÑÊÄùÊÉ≥ÔºåwijÂèòÊàê&lt;vi,vj&gt;ÔºåÂÖ∂‰∏≠vi,vjÈÉΩÊòØ‰ΩéÁª¥ÂêëÈáè</p>
<p>ÂèòÂΩ¢ÁâàÊú¨Ôºö</p>
<h3 id="Field-aware-Factorization-Machines"><a href="#Field-aware-Factorization-Machines" class="headerlink" title="Field-aware Factorization Machines"></a>Field-aware Factorization Machines</h3><img src="/images/2020/screencapture2020-06-23 AM11.53.47.jpg">

<p>ËÄÉËôëÁâπÂæÅÊòØÊù•Ëá™Âì™ÈáåÁöÑ</p>
<p>ÊØè‰∏Ä‰∏™ÁâπÂæÅÔºå‰∏éÂÖ∂‰ªñÁ±ªÂà´‰∫§ÂèâÊó∂ÔºåÊúâ‰∏Ä‰∏™‰∏ç‰∏ÄÊ†∑ÁöÑ‰æùËµñÂêëÈáè</p>
<h2 id="Deep-Factorization-Machines"><a href="#Deep-Factorization-Machines" class="headerlink" title="Deep Factorization Machines"></a>Deep Factorization Machines</h2><img src="/images/2020/screencapture2020-06-23 AM11.56.26.jpg">

<p>Â∑¶‰æßÔºö‰º†ÁªüÈÉ®ÂàÜ</p>
<p>ÊØè‰∏™ÁßçÁ±ªÂÅöEmbedding</p>
<p>‰∏∫‰∫ÜÂÆûÁé∞‰∫§ÂèâÔºå‰∏§‰∏§ÂÅöÁâπÂæÅ‰∫§Âèâ</p>
<p>Á∫øÊÄßÈÉ®ÂàÜÔºåÊ±ÇÂíåÔºàÊúÄÂ∑¶ÁöÑ+Ôºâ</p>
<p>Âè≥‰æßÔºöÊ∑±Â∫¶ÈÉ®ÂàÜ</p>
<p>ÁæéÂõ¢ÁöÑÊµãËØïÁªìÊûúÔºö</p>
<img src="/images/2020/screencapture2020-06-23 AM11.58.58.jpg">

<p>Wide &amp; Deep Ë¶ÅÂÅöÁâπÂæÅÂ∑•Á®ãÔºåDeepFM ÂÅö‰∫Ü‰∏ÄÈò∂„ÄÅ‰∫åÈò∂ÁöÑÁâπÂæÅ‰∫§ÂèâÔºåÂêåÊó∂Áî®DeepÁ•ûÁªèÁΩëÁªúÂÅöÁâπÂæÅÂ∑•Á®ã</p>
<h2 id="Deep-Cooperative-Neural-Network"><a href="#Deep-Cooperative-Neural-Network" class="headerlink" title="Deep Cooperative Neural Network"></a>Deep Cooperative Neural Network</h2><p>Âç∑ÁßØÁ•ûÁªèÁΩëÁªú</p>
<p>Ê∂âÂèäÂõæÁâá„ÄÅÊñáÂ≠óÊó∂ÂèØÂèÇËÄÉ</p>
<img src="/images/2020/screencapture2020-06-23 PM12.09.24.jpg">

<p>Word-Embedding ÊääÊØè‰∏™ÂçïËØçÊò†Â∞ÑÊàêÂêëÈáèÔºàGoogle : word2vecÔºâ</p>
<p>ÊúÄÂêéÂæóÂà∞UserËÆ∞ÂΩïÁöÑ‰ΩéÁª¥Ë°®Á§∫ÔºåItemÊèèËø∞ÁöÑ‰ΩéÁª¥Ë°®Á§∫</p>
<h2 id="Recurrent-Neural-Network"><a href="#Recurrent-Neural-Network" class="headerlink" title="Recurrent Neural Network"></a>Recurrent Neural Network</h2><img src="/images/2020/screencapture2020-06-23 PM1.22.14.jpg">

<p>Áªô‰∏Ä‰∏™inputÔºåÊò†Â∞ÑÊàê‰ΩéÁª¥ÂêëÈáèÔºåËæìÂá∫output</p>
<p>ÂêåÊó∂ÂèçÂ§çËá™Â∑±Ëø≠‰ª£</p>
<p>ÂèØÂ≠¶‰π†‰∏éÊó∂Èó¥ÊúâÂÖ≥ÁöÑ‰ø°ÊÅØÔºåÂ¶Ç‰∏çÈúÄË¶ÅloginÁöÑÁΩëÁ´ô‰∏äÁî®Êà∑ÁÇπÂáªÁöÑË°å‰∏∫</p>
<h3 id="Session-based-Recommendation-with-RNN"><a href="#Session-based-Recommendation-with-RNN" class="headerlink" title="Session-based Recommendation with RNN"></a>Session-based Recommendation with RNN</h3><img src="/images/2020/screencapture2020-06-23 PM1.25.03.jpg">

<p>È¢ÑÊµãÁî®Êà∑‰∏ã‰∏ÄÊ≠•Ë°å‰∏∫</p>
<h1 id="Âº∫ÂåñÂ≠¶‰π†"><a href="#Âº∫ÂåñÂ≠¶‰π†" class="headerlink" title="Âº∫ÂåñÂ≠¶‰π†"></a>Âº∫ÂåñÂ≠¶‰π†</h1><p>Âõ†‰∏∫Áî®Êà∑Ë°å‰∏∫ÈöèÊó∂Âú®ÂèòÂåñÔºå‰º†ÁªüÊé®ËçêÁ≥ªÁªüÊó†Ê≥ïÂÆûÊó∂ÂÅöÂá∫Ë∞ÉÊï¥</p>
<img src="/images/2020/screencapture2020-06-23 PM1.27.37.jpg">

<p>StateÂèØ‰ª•ÊòØÁî®Êà∑ÁöÑÁÇπÂáªË°å‰∏∫</p>
<p>RewardÂèØ‰ª•ÊòØÁÇπÂáª‰∫ÜÊé®ËçêÁöÑ‰∫ßÂìÅ</p>
<p>Ê†πÊçÆÂΩìÂâçÁöÑStateÂíåRewardËøîÂõû‰∏ã‰∏ÄÊ≠•Action</p>
<p>Áî®Êà∑ÂØπActionÂÅöÂá∫ÂèçÂ∫îÔºåÂæóÂà∞Êñ∞ÁöÑStateÂíåReward</p>
<p>ÈòøÈáåÁöÑ‰æãÂ≠êÔºö</p>
<img src="/images/2020/screencapture2020-06-23 PM1.30.26.jpg">

]]></content>
      <categories>
        <category>Note</category>
      </categories>
  </entry>
  <entry>
    <title>È°πÁõÆDebugËÆ∞ÂΩï</title>
    <url>/2020/06/16/debug/</url>
    <content><![CDATA[<h1 id="Êâæ‰∏çÂà∞‚ÄôxmlModelPlugin‚Äô"><a href="#Êâæ‰∏çÂà∞‚ÄôxmlModelPlugin‚Äô" class="headerlink" title="Êâæ‰∏çÂà∞‚ÄôxmlModelPlugin‚Äô"></a>Êâæ‰∏çÂà∞‚ÄôxmlModelPlugin‚Äô</h1><p>05.30</p>
<p>cloneÁöÑÂ∑•Á®ãÂêØÂä®Â§±Ë¥•ÔºåÊéßÂà∂Âè∞Êä•ÈîôÔºö</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.</span><br><span class="line">2020-05-30 10:57:39.476 ERROR 1335 --- [           main] o.s.boot.SpringApplication               : Application run failed</span><br><span class="line"></span><br><span class="line">org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;xmlModelPlugin&#39;: Lookup method resolution failed; nested exception is java.lang.IllegalStateException: Failed to introspect Class [springfox.documentation.schema.XmlModelPlugin] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@3d4eac69]</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:289) ~[spring-beans-5.2.5.RELEASE.jar:5.2.5.RELEASE]</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1286) ~[spring-beans-5.2.5.RELEASE.jar:5.2.5.RELEASE]</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1201) ~[spring-beans-5.2.5.RELEASE.jar:5.2.5.RELEASE]</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557) ~[spring-beans-5.2.5.RELEASE.jar:5.2.5.RELEASE]</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-5.2.5.RELEASE.jar:5.2.5.RELEASE]</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>Ëß£ÂÜ≥</p>
<p>Ê∑ªÂä†‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.xml.bind<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jaxb-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Âä†ËΩΩymlÊñá‰ª∂ÈîôËØØ"><a href="#Âä†ËΩΩymlÊñá‰ª∂ÈîôËØØ" class="headerlink" title="Âä†ËΩΩymlÊñá‰ª∂ÈîôËØØ"></a>Âä†ËΩΩymlÊñá‰ª∂ÈîôËØØ</h1><p>06.12</p>
<p>‰ªäÂ§©Êñ∞pullÁöÑÂ∑•Á®ãÊâì‰∏çÂºÄ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java.lang.IllegalStateException: Failed to load property source from location &#39;classpath:&#x2F;bootstrap.yml&#39;</span><br></pre></td></tr></table></figure>

<p>Êü•Áúãtarget -&gt; classes -&gt; bootstrap.yml</p>
<p>ÂèëÁé∞‰∏Ä‰∏™mainË¢´Áîª‰∫ÜÊ≥¢Êµ™Á∫øÔºåËØ¥ÈáçÂ§çÂÆö‰πâ</p>
<p>ÂèëÁé∞</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">main:</span><br><span class="line">  allow-bean-definition-overriding: true</span><br></pre></td></tr></table></figure>

<p>ÂÜô‰∫Ü2Ê¨°</p>
<p>Ê≥®ÈáäÊéâ‰∏Ä‰∏™Â∞±Â•Ω‰∫Ü</p>
<h1 id="Êâæ‰∏çÂà∞‚ÄôspringSecurityFilterChain‚Äô"><a href="#Êâæ‰∏çÂà∞‚ÄôspringSecurityFilterChain‚Äô" class="headerlink" title="Êâæ‰∏çÂà∞‚ÄôspringSecurityFilterChain‚Äô"></a>Êâæ‰∏çÂà∞‚ÄôspringSecurityFilterChain‚Äô</h1><p>06.16</p>
<p>Êñ∞pullÁöÑÂèàÊâì‰∏çÂºÄ‰∫Ü</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;springSecurityFilterChain&#39;</span><br></pre></td></tr></table></figure>

<p>Ê†πÊçÆËøôÈáåÁöÑ‰∏Ä‰∏™ÂõûÁ≠î</p>
<blockquote>
<p><a href="https://github.com/spring-guides/tut-spring-boot-oauth2/issues/68" target="_blank" rel="noopener">https://github.com/spring-guides/tut-spring-boot-oauth2/issues/68</a></p>
</blockquote>
<p>Âä†‰∏ä‰∫Ü</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.glassfish.jaxb&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;jaxb-runtime&lt;&#x2F;artifactId&gt;</span><br><span class="line">  &lt;version&gt;2.3.0&lt;&#x2F;version&gt; &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;!-- JAXB needs javax.activation module (jdk9) --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;javax.activation&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;javax.activation-api&lt;&#x2F;artifactId&gt;</span><br><span class="line">  &lt;version&gt;1.2.0&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<p>ÊàêÂäüÂêØÂä®</p>
]]></content>
      <categories>
        <category>Debug</category>
      </categories>
  </entry>
  <entry>
    <title>‰∫îÊúàÊØèÊó•‰∏ÄÈ¢òÊâìÂç°ÂÆåÂ∑•Á∫™Âøµ</title>
    <url>/2020/05/31/memo/</url>
    <content><![CDATA[<img src="/images/2020/screencapture2020-05-31 AM10.18.55.jpg" width=300>

<p>Â±ÖÁÑ∂Âá∫ÂæΩÁ´†‰∫ÜÔºåÂ§™Êà≥Êàë‰∫Ü</p>
<img src="/images/2020/screencapture2020-05-31 AM10.19.04.jpg" width=300>]]></content>
      <categories>
        <category>Memo</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>Anki‰πüÂ§™‰ºòÁßÄ‰∫ÜÂêßÔºÅ</title>
    <url>/2020/05/12/memo/</url>
    <content><![CDATA[<p>‰ª•ÂâçÁúãÂâßÁöÑÊó∂ÂÄôÂñúÊ¨¢Êà™Â±èÔºåÊää‰∏çËÆ§ËØÜÁöÑËØçËÆ∞ÂΩï‰∏ãÊù•ÔºåÈõ∂Èõ∂Êï£Êï£Â±Ø‰∫ÜÂ•ΩÂ§öËØç</p>
<img src="/images/2020/screencapture2020-05-12 PM11.34.40.jpg">

<p>‰ΩÜÊòØÂπ∂‰∏çÂ•ΩÂ§ç‰π†ÔºåËÉåÂçïËØçÁöÑÊó∂ÂÄôËøòÊòØ‰∏çËÆ§ËØÜ</p>
<p>ËÄåAnkiÔºÅÂä†‰∏äImage Occlusion EnhancedÊèí‰ª∂ÔºÅÂÆåÁæéËß£ÂÜ≥ÔºÅ</p>
<img src="/images/2020/screencapture2020-05-12 PM11.37.57.jpg">

<p>Êãñ‰∏™Ê°ÜÈÅÆ‰ΩèÂçïËØçÂ∞±Â•Ω‰∫ÜÔºåÂÜçÂú®headerÈáåÈù¢Â°´‰∏äÂçïËØç</p>
<p>‰ª•ÂêéÁöÑÂ§ç‰π†ÂÆâÊéíÂ∞±‰∏çÁî®Ëá™Â∑±ÁÆ°‰∫Ü~</p>
<img src="/images/2020/screencapture2020-05-12 PM11.38.57.jpg">

<p>‰∏Ä‰∏™ÈóÆÈ¢òÊòØheaderÈáåÂ°´ÁöÑÂçïËØç‰ºöÂú®Â§ç‰π†Êó∂ÊòæÁ§∫</p>
<p>‰ΩÜÊòØÔºÅ</p>
<p>ËøòËÉΩÁºñËæëÂç°ÁâáÊ®°ÊùøÊòØ‰ªÄ‰πàÁ•û‰ªôÂäüËÉΩÂïäÔºÅÊ≥®ÈáäÊéâheaderÂ∞±Ë°å‰∫ÜÂó∑~</p>
<img src="/images/2020/screencapture2020-05-12 PM11.41.31.jpg">

<p>Â§™ÁæéÂ¶ô‰∫ÜÂø´‰πêÂæóÂéüÂú∞ËΩ¨Âúà~</p>
<p>‰ªø‰ΩõËÉΩÁúãËßÅÊó•ÂêéËπ≠Ëπ≠Â¢ûÈïøÁöÑËØçÊ±áÈáè</p>
<p>ÊàëÁà±Ankiüòçüòçüòç</p>
<hr>
<p>ÂèëÁé∞Áé∞Âú®ÁúüÁöÑÊòØÁî®‰∫ÜÂ•ΩÂ§öÊïàÁéáËΩØ‰ª∂ÔºåÁÆÄÁõ¥ÊòØÂº∫Ëø´ÁóáÔºå‰∏∫‰∫ÜÊâæ‰∏™Êª°ÊÑèÁöÑËÉΩ‰ªéÂÆâÂçìÂ∫îÁî®ÂïÜÂ∫óÂà∞App StoreÂà∞Google PlayÁøª‰∏™ÈÅçÔºåÂ∞§ÂÖ∂ÊòØËÉåÂçïËØçÂíå‰ªªÂä°ÁÆ°ÁêÜÔºåÊâáË¥ù‰∏çËÉåÁôæËØçÊñ©„ÄÅÊª¥Á≠îToDoÊ∞¥Êª¥‚Ä¶ÊúÄÂêéÂâ©‰∏ãÁöÑÈÉΩÊòØÁé∞Âú®ÊúÄÂñúÊ¨¢ÁöÑÔºå‰∏çÁü•ÈÅì‰ª•ÂêéËøòËÉΩ‰∏çËÉΩÂèëÁé∞Êõ¥Â•ΩÁöÑ~</p>
<ul>
<li>Êó•Á®ãÁÆ°ÁêÜÔºöAppleËá™Â∏¶ÁöÑÊó•ÂéÜüìÖ</li>
<li>‰ªªÂä°ÁÆ°ÁêÜÔºöTrello</li>
<li>ËÉåÂçïËØçÔºöÂ¢®Â¢®</li>
<li>ËÉåËØóÔºöÂπ¥ËΩÆÔºà‰º∞ËÆ°Ë¶ÅËΩ¨ÁßªÂà∞Anki‰∫ÜÂìàÂìàÔºâ</li>
<li>‰π†ÊÉØÊâìÂç°ÔºöDot HabitÔºàËøòÊ≤°Áî®Âà∞‰∏Ä‰∏™ÊúàÔºåÂæÖÂÆöÔºâ</li>
</ul>
]]></content>
      <categories>
        <category>Memo</category>
      </categories>
  </entry>
  <entry>
    <title>pyenvÈÖçÁΩÆ‰∏çÁîüÊïà</title>
    <url>/2020/05/07/debug/</url>
    <content><![CDATA[<h1 id="ÈóÆÈ¢òÊèèËø∞"><a href="#ÈóÆÈ¢òÊèèËø∞" class="headerlink" title="ÈóÆÈ¢òÊèèËø∞"></a>ÈóÆÈ¢òÊèèËø∞</h1><p>‰ª•ÂâçË£ÖËøápyenvÔºåÂèØ‰ª•Ê≠£Â∏∏‰ΩøÁî®</p>
<p>‰ªäÂ§©Áî®ÁöÑÊó∂ÂÄôÂèëÁé∞ÈÖçÁΩÆÁöÑÁâàÊú¨Ê≤°ÊúâÁîüÊïà</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">coconutnut@Ss-MacBook-Pro ~ % pyenv versions</span><br><span class="line">* system (set by &#x2F;Users&#x2F;coconutnut&#x2F;.pyenv&#x2F;version)</span><br><span class="line">  3.7.4</span><br><span class="line">coconutnut@Ss-MacBook-Pro ~ % pyenv global 3.7.4</span><br><span class="line">coconutnut@Ss-MacBook-Pro ~ % python -V</span><br><span class="line">Python 2.7.17</span><br></pre></td></tr></table></figure>

<h1 id="Ëß£ÂÜ≥"><a href="#Ëß£ÂÜ≥" class="headerlink" title="Ëß£ÂÜ≥"></a>Ëß£ÂÜ≥</h1><blockquote>
<p><a href="https://blog.csdn.net/vencent7/article/details/76849849" target="_blank" rel="noopener">https://blog.csdn.net/vencent7/article/details/76849849</a></p>
</blockquote>
<p>‰πüËÆ∏ÊòØ‰ª•ÂâçË£ÖJupiterÊàñËÄÖÁî®TensorflowÁöÑÊó∂ÂÄôÊääÁéØÂ¢ÉÊêûÂùè‰∫ÜÔºü</p>
<p>ËØïËØïÊääpyenvÁöÑÈÖçÁΩÆÊîæÂú®.bash_profileÁöÑÊúÄÂêé</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># pyenv</span><br><span class="line">export PYENV_ROOT&#x3D;&quot;$HOME&#x2F;.pyenv&quot;</span><br><span class="line">export PATH&#x3D;&quot;$PYENV_ROOT&#x2F;bin:$PATH&quot;</span><br><span class="line">eval &quot;$(pyenv init -)&quot;</span><br><span class="line"># eval &quot;$(pyenv virtualenv-init -)&quot;</span><br></pre></td></tr></table></figure>

<p>ÂÜçËØïËØï</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">coconutnut@Ss-MacBook-Pro ~ % source ~&#x2F;.bash_profile</span><br><span class="line">coconutnut@Ss-MacBook-Pro ~ % python -V            </span><br><span class="line">Python 3.7.4</span><br></pre></td></tr></table></figure>

<p>ÊàêÂäü</p>
<p>PSÔºö</p>
<p>ÂÆâË£ÖpyenvÁöÑÊïôÁ®ãÊúâÁöÑÊîπ.bash_profileÊúâÁöÑÊîπ.bashrc</p>
<blockquote>
<p><a href="https://www.bbsmax.com/A/lk5aj7Eld1/" target="_blank" rel="noopener">https://www.bbsmax.com/A/lk5aj7Eld1/</a></p>
<p>Âú®ÂÆâË£ÖÊàêÂäü‰πãÂêéÈúÄË¶ÅÂú®<code>.bashrc</code>ÊàñËÄÖ<code>.bash_profile</code>‰∏≠Ê∑ªÂä†‰∏âË°åÊù•ÂºÄÂêØËá™Âä®Ë°•ÂÖ®</p>
</blockquote>
<p>Â∫îËØ•ÈÉΩÊòØÂèØ‰ª•ÁöÑ</p>
]]></content>
      <categories>
        <category>Debug</category>
      </categories>
  </entry>
  <entry>
    <title>ËÆ∞ÂΩïÊúçÂä°Âô®ÈÉ®ÁΩ≤</title>
    <url>/2020/05/07/memo-server/</url>
    <content><![CDATA[<p>‰ª•ÂâçÁöÑÊúçÂä°Âô®ËøáÊúü‰∫ÜÔºåÈáçÊñ∞‰π∞‰∫ÜÈÉ®ÁΩ≤ÔºåÂ∏åÊúõËøôÊ¨°Â∞ëË∏©ÁÇπÂùë</p>
<p>ÊúçÂä°Âô®ÁéØÂ¢ÉÔºöUbuntu 16.04 64‰Ωç</p>
<h1 id="ÊúçÂä°Âô®ÈÖçÁΩÆ"><a href="#ÊúçÂä°Âô®ÈÖçÁΩÆ" class="headerlink" title="ÊúçÂä°Âô®ÈÖçÁΩÆ"></a>ÊúçÂä°Âô®ÈÖçÁΩÆ</h1><ol>
<li><p>ÈáçÁΩÆÂØÜÁ†Å&amp;ÈáçÂêØÂÆû‰æã</p>
</li>
<li><p>Ê∑ªÂä†ÂÆâÂÖ®ÁªÑËßÑÂàô</p>
<blockquote>
<p><a href="https://help.aliyun.com/document_detail/151694.html?spm=a2c4g.11186623.6.582.56d15bbbDfXG8X" target="_blank" rel="noopener">https://help.aliyun.com/document_detail/151694.html?spm=a2c4g.11186623.6.582.56d15bbbDfXG8X</a></p>
</blockquote>
<p>È°∫‰æøÊää8000~9000ÈÉΩÂºÄ‰∫Ü</p>
</li>
</ol>
<h1 id="ÁªàÁ´ØËÆøÈóÆ"><a href="#ÁªàÁ´ØËÆøÈóÆ" class="headerlink" title="ÁªàÁ´ØËÆøÈóÆ"></a>ÁªàÁ´ØËÆøÈóÆ</h1><ol>
<li><p>sshËøûÊé•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ssh root@&lt;ÂÆû‰æãÂÖ¨ÁΩëIPÂú∞ÂùÄ&gt;</span><br></pre></td></tr></table></figure>

<p>‚úåÔ∏è</p>
</li>
</ol>
<h1 id="ÂÆâË£ÖjdkÂíåTomcat"><a href="#ÂÆâË£ÖjdkÂíåTomcat" class="headerlink" title="ÂÆâË£ÖjdkÂíåTomcat"></a>ÂÆâË£ÖjdkÂíåTomcat</h1><ol>
<li><p>‰∏ãËΩΩjdk-14.0.1_linux-x64_bin.tar.gzÂíåapache-tomcat-9.0.34.tar.gz</p>
<blockquote>
<p><a href="https://www.oracle.com/java/technologies/javase-jdk14-downloads.html" target="_blank" rel="noopener">https://www.oracle.com/java/technologies/javase-jdk14-downloads.html</a></p>
<p><a href="https://tomcat.apache.org/download-90.cgi" target="_blank" rel="noopener">https://tomcat.apache.org/download-90.cgi</a></p>
</blockquote>
<p>Ôºà‰πãÂâçË£ÖÁöÑÊòØjdk12Ôºå‰∏çÁü•ÈÅìËøôÊ†∑‰ºö‰∏ç‰ºöÊúâÊØõÁóÖÔºâ</p>
</li>
<li><p>FileZillaËøûÊé•ÊúçÂä°Âô®Ôºå‰∏äÈù¢‰∏§‰∏™ÂåÖ‰º†Âà∞rootÊñá‰ª∂Â§π‰∏ã</p>
</li>
<li><p>ÂõûÂà∞ÁªàÁ´ØÔºåÊñ∞Âª∫javaeeÊñá‰ª∂Â§πÔºåËß£Âéã</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">~# ls</span><br><span class="line">apache-tomcat-9.0.34.tar.gz jdk-14.0.1_linux-x64_bin.tar.gz</span><br><span class="line">~# mkdir javaee</span><br><span class="line">~# tar zxvf jdk-14.0.1_linux-x64_bin.tar.gz -C javaee</span><br></pre></td></tr></table></figure>
</li>
<li><p>ÈÖçÁΩÆjavaÁéØÂ¢ÉÂèòÈáè</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">~# vim &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>

<p>ÊúÄÂêéÂä†‰∏ä</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># set java environment</span><br><span class="line">export JAVA_HOME&#x3D;&#x2F;root&#x2F;javaee&#x2F;jdk-14.0.1</span><br><span class="line">export PATH&#x3D;$JAVA_HOME&#x2F;bin:$PATH</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">~# source &#x2F;etc&#x2F;profile</span><br><span class="line">~# java -version</span><br><span class="line">java version &quot;14.0.1&quot; 2020-04-14</span><br><span class="line">Java(TM) SE Runtime Environment (build 14.0.1+7)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 14.0.1+7, mixed mode, sharing)</span><br></pre></td></tr></table></figure>

<p>‚úåÔ∏è</p>
</li>
<li><p>ÂÆâË£Ötomcat</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">~# tar zxvf apache-tomcat-9.0.34.tar.gz -C javaee</span><br></pre></td></tr></table></figure>

<p>ÈÖçÁΩÆcatalina.sh</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">~&#x2F;javaee&#x2F;apache-tomcat-9.0.34&#x2F;bin# vim &#x2F;catalina.sh</span><br></pre></td></tr></table></figure>

<p>Âä†‰∏ÄÂè•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export JAVA_HOME&#x3D;&#x2F;root&#x2F;javaee&#x2F;jdk-14.0.1</span><br></pre></td></tr></table></figure>

<p>ÊµãËØï</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">~&#x2F;javaee&#x2F;apache-tomcat-9.0.34&#x2F;bin# .&#x2F;startup.sh </span><br><span class="line">Using CATALINA_BASE:   &#x2F;root&#x2F;javaee&#x2F;apache-tomcat-9.0.34</span><br><span class="line">Using CATALINA_HOME:   &#x2F;root&#x2F;javaee&#x2F;apache-tomcat-9.0.34</span><br><span class="line">Using CATALINA_TMPDIR: &#x2F;root&#x2F;javaee&#x2F;apache-tomcat-9.0.34&#x2F;temp</span><br><span class="line">Using JRE_HOME:        &#x2F;root&#x2F;javaee&#x2F;jdk-14.0.1</span><br><span class="line">Using CLASSPATH:       &#x2F;root&#x2F;javaee&#x2F;apache-tomcat-9.0.34&#x2F;bin&#x2F;bootstrap.jar:&#x2F;root&#x2F;javaee&#x2F;apache-tomcat-9.0.34&#x2F;bin&#x2F;tomcat-juli.jar</span><br><span class="line">Tomcat started.</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-05-07 PM12.21.05.jpg">

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">~&#x2F;javaee&#x2F;apache-tomcat-9.0.34&#x2F;bin# .&#x2F;shutdown.sh </span><br><span class="line">Using CATALINA_BASE:   &#x2F;root&#x2F;javaee&#x2F;apache-tomcat-9.0.34</span><br><span class="line">Using CATALINA_HOME:   &#x2F;root&#x2F;javaee&#x2F;apache-tomcat-9.0.34</span><br><span class="line">Using CATALINA_TMPDIR: &#x2F;root&#x2F;javaee&#x2F;apache-tomcat-9.0.34&#x2F;temp</span><br><span class="line">Using JRE_HOME:        &#x2F;root&#x2F;javaee&#x2F;jdk-14.0.1</span><br><span class="line">Using CLASSPATH:       &#x2F;root&#x2F;javaee&#x2F;apache-tomcat-9.0.34&#x2F;bin&#x2F;bootstrap.jar:&#x2F;root&#x2F;javaee&#x2F;apache-tomcat-9.0.34&#x2F;bin&#x2F;tomcat-juli.jar</span><br><span class="line">NOTE: Picked up JDK_JAVA_OPTIONS:  --add-opens&#x3D;java.base&#x2F;java.lang&#x3D;ALL-UNNAMED --add-opens&#x3D;java.base&#x2F;java.io&#x3D;ALL-UNNAMED --add-opens&#x3D;java.rmi&#x2F;sun.rmi.transport&#x3D;ALL-UNNAMED</span><br></pre></td></tr></table></figure>

<p>‚úåÔ∏è</p>
</li>
</ol>
<hr>
<p>ÂÆåÂ∑•ÔºÅ</p>
<p>‰∏ÄÈÅçËøáÂ§™Âø´‰πê‰∫Ü</p>
]]></content>
      <categories>
        <category>Memo</category>
      </categories>
  </entry>
  <entry>
    <title>Android 10 Èó™ÈÄÄÈóÆÈ¢ò</title>
    <url>/2020/05/04/debug/</url>
    <content><![CDATA[<p>ÔºàÊú™Ëß£ÂÜ≥Ôºâ</p>
<h1 id="bugÊèèËø∞"><a href="#bugÊèèËø∞" class="headerlink" title="bugÊèèËø∞"></a>bugÊèèËø∞</h1><p>ÊâìÂºÄÂ∑•Á®ãÂèØ‰ª•ÂÆâË£ÖÔºå‰ΩÜÊòØÈó™ÈÄÄ</p>
<p>Build‰∏≠Êä•Èîô</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Ê≥®: Êüê‰∫õËæìÂÖ•Êñá‰ª∂‰ΩøÁî®ÊàñË¶ÜÁõñ‰∫ÜÂ∑≤ËøáÊó∂ÁöÑ API„ÄÇ</span><br><span class="line">Ê≥®: ÊúâÂÖ≥ËØ¶ÁªÜ‰ø°ÊÅØ, ËØ∑‰ΩøÁî® -Xlint:deprecation ÈáçÊñ∞ÁºñËØë„ÄÇ</span><br></pre></td></tr></table></figure>

<h1 id="Â∞ùËØïËß£ÂÜ≥"><a href="#Â∞ùËØïËß£ÂÜ≥" class="headerlink" title="Â∞ùËØïËß£ÂÜ≥"></a>Â∞ùËØïËß£ÂÜ≥</h1><h2 id="Â∞ùËØï1"><a href="#Â∞ùËØï1" class="headerlink" title="Â∞ùËØï1"></a>Â∞ùËØï1</h2><blockquote>
<p><a href="https://blog.csdn.net/caidi1988314/article/details/52460922?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-3&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-3" target="_blank" rel="noopener">https://blog.csdn.net/caidi1988314/article/details/52460922?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-3&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-3</a></p>
</blockquote>
<p>build.gradle android {}ÈáåÂä†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">  gradle.projectsEvaluated &#123;</span><br><span class="line">    tasks.withType(JavaCompile) &#123;</span><br><span class="line">    	options.compilerArgs &lt;&lt; &quot;-Xlint:unchecked&quot; &lt;&lt; &quot;-Xlint:deprecation&quot;                       		&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> Âá∫Áé∞</p>
<img src="/images/2020/screencapture2020-05-04 PM9.09.01.jpg">

<p>Âú®Êä•ÈîôÁöÑÂáΩÊï∞‰∏äÂä†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@SuppressWarnings(&quot;deprecation&quot;)</span><br></pre></td></tr></table></figure>

<p>BuildÊàêÂäüÔºå‰ΩÜËøòÊòØÈó™ÈÄÄ</p>
<h2 id="Â∞ùËØï2"><a href="#Â∞ùËØï2" class="headerlink" title="Â∞ùËØï2"></a>Â∞ùËØï2</h2><p>ÁúãÂà∞activity_main.xmlÈáåÊúâ</p>
<img src="/images/2020/screencapture2020-05-04 PM9.28.55.jpg">

<p>ÊåâÊèêÁ§∫‰øÆÊîπ</p>
<p>ËøòÊòØÈó™ÈÄÄ</p>
<blockquote>
<p><a href="https://blog.csdn.net/yogima/article/details/89416885?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1" target="_blank" rel="noopener">https://blog.csdn.net/yogima/article/details/89416885?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1</a></p>
</blockquote>
<p>ÊääMainActivityÊâÄÊúâÂáΩÊï∞ÈÉΩÊ≥®ÈáäÊéâÔºåÂèØ‰ª•ÊâìÂºÄ</p>
<p>‰∏ÄÁÇπ‰∏ÄÁÇπÊîæÂºÄ</p>
<p>ÂèëÁé∞ÈóÆÈ¢òÂú®</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">File path = <span class="keyword">new</span> File(dir);</span><br><span class="line">String[] list = path.list();</span><br><span class="line">len = list.length;</span><br><span class="line"><span class="keyword">if</span> (len == <span class="number">0</span>) &#123; <span class="keyword">return</span> <span class="number">0</span>; &#125;</span><br></pre></td></tr></table></figure>

<p>listÁ©∫ÁöÑÊó∂ÂÄôÔºålist.length‰ºöÂºÇÂ∏∏</p>
<p>Âä†‰∫Ü‰∏™‰∏∫Á©∫ËøîÂõû0</p>
<p>‰ΩÜÊòØËøô‰∏™ÂºÇÂ∏∏ÊÄé‰πà‰∏çÊèêÁ§∫Âë¢ÔºüÔºüÔºü</p>
<p>ËøôÈáå‰ºö‰∏∫Á©∫Â∫îËØ•ËØªÊñá‰ª∂ÊùÉÈôêÊ≤°ÊúâËé∑ÂèñÂà∞</p>
<h2 id="Â∞ùËØï3"><a href="#Â∞ùËØï3" class="headerlink" title="Â∞ùËØï3"></a>Â∞ùËØï3</h2><p>ÂÉè‰∏äÊ¨°ÈÇ£Ê†∑Âä†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">android:requestLegacyExternalStorage&#x3D;&quot;true&quot;</span><br></pre></td></tr></table></figure>

<p>Êä•Èîô</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">AAPT: error: attribute android:requestLegacyExternalStorage not found.</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a href="https://blog.csdn.net/DeMonliuhui/article/details/99718553" target="_blank" rel="noopener">https://blog.csdn.net/DeMonliuhui/article/details/99718553</a></p>
</blockquote>
<p>Áé∞Âú®Ëøô‰∏™Â∑•Á®ãÁöÑÁâàÊú¨ÊòØ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">compileSdkVersion 28</span><br><span class="line">buildToolsVersion &#39;28.0.3&#39;</span><br><span class="line">defaultConfig &#123;</span><br><span class="line">  applicationId &quot;com.example.mydoppler&quot;</span><br><span class="line">  minSdkVersion 15</span><br><span class="line">  targetSdkVersion 28</span><br><span class="line">  versionCode 1</span><br><span class="line">  versionName &quot;1.0&quot;</span><br><span class="line">  testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊîπÊàê</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">compileSdkVersion 29</span><br><span class="line">buildToolsVersion &quot;29.0.2&quot;</span><br><span class="line">defaultConfig &#123;</span><br><span class="line">  applicationId&quot;com.example.mydoppler&quot;</span><br><span class="line">  minSdkVersion 26</span><br><span class="line">  targetSdkVersion 29</span><br><span class="line">  versionCode 1</span><br><span class="line">  versionName &quot;1.0&quot;</span><br><span class="line">  testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>requestLegacyExternalStorageÂ±ûÊÄßÂèØ‰ª•Âä†‰∫Ü</p>
<p>ËæìÂá∫ÈÇ£‰∏™Ëé∑ÂèñÁöÑÊñá‰ª∂Ë∑ØÂæÑÔºåËøòÊòØnull</p>
<h2 id="Â∞ùËØï4"><a href="#Â∞ùËØï4" class="headerlink" title="Â∞ùËØï4"></a>Â∞ùËØï4</h2><p>Âú®RunÈáåÈù¢ÂèàÂèëÁé∞‰∏ÄÂè•Á∫¢ÁöÑ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">E&#x2F;libc: Access denied finding property &quot;ro.vendor.df.effect.conflict&quot;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Debug</category>
      </categories>
  </entry>
  <entry>
    <title>ËØª‰π¶Á¨îËÆ∞ Ê∑±Â∫¶Â∑•‰Ωú</title>
    <url>/2020/05/02/deepwork/</url>
    <content><![CDATA[<blockquote>
<p>„ÄäÊ∑±Â∫¶Â∑•‰Ωú„Äã [Áæé] Âç°Â∞î¬∑Á∫ΩÊ≥¢Áâπ</p>
</blockquote>
<img src="/images/2020/deepwork.png">]]></content>
      <categories>
        <category>Memo</category>
      </categories>
      <tags>
        <tag>mindmap</tag>
      </tags>
  </entry>
  <entry>
    <title>gitÁ¨îËÆ∞</title>
    <url>/2020/05/02/note-git/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://github.com/pcottle/learnGitBranching" target="_blank" rel="noopener">https://github.com/pcottle/learnGitBranching</a></p>
</blockquote>
<img src="/images/2020/git.png">

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>tool</tag>
        <tag>mindmap</tag>
      </tags>
  </entry>
  <entry>
    <title>ÂõõÊúàÊØèÊó•‰∏ÄÈ¢òÊâìÂç°ÂÆåÂ∑•Á∫™Âøµ</title>
    <url>/2020/04/30/memo/</url>
    <content><![CDATA[<img src="/images/2020/screencapture2020-04-30 PM4.03.43.jpg" width=300>

<p>‰∏âÊúàÂ∑Æ‰∏ÄÁÇπÁÇπÔºåÂõõÊúàÊàêÂäüÂíØ~</p>
<img src="/images/2020/screencapture2020-04-30 PM4.04.55.jpg" width=300>

]]></content>
      <categories>
        <category>Memo</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloudÁ¨îËÆ∞07 ÊÄªÁªì</title>
    <url>/2020/04/25/note-springcloud-07/</url>
    <content><![CDATA[<img src="/images/2020/SpringCloud.png">

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mindmap</tag>
        <tag>springcloud</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloudÁ¨îËÆ∞06 GatewayÊúçÂä°ÁΩëÂÖ≥</title>
    <url>/2020/04/25/note-springcloud-06/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://blog.csdn.net/ThinkWon/article/details/103757927" target="_blank" rel="noopener">https://blog.csdn.net/ThinkWon/article/details/103757927</a></p>
</blockquote>
<p>GatewayÊòØÂú®SpringÁîüÊÄÅÁ≥ªÁªü‰πã‰∏äÊûÑÂª∫ÁöÑAPIÁΩëÂÖ≥ÊúçÂä°ÔºåÊó®Âú®Êèê‰æõ‰∏ÄÁßçÁÆÄÂçïËÄåÊúâÊïàÁöÑÊñπÂºèÊù•ÂØπAPIËøõË°åË∑ØÁî±Ôºå‰ª•ÂèäÊèê‰æõ‰∏Ä‰∫õÂº∫Â§ßÁöÑËøáÊª§Âô®ÂäüËÉΩÔºå ‰æãÂ¶ÇÔºöÁÜîÊñ≠„ÄÅÈôêÊµÅ„ÄÅÈáçËØïÁ≠â</p>
<p>ÈõÜÊàêHystrixÁöÑÊñ≠Ë∑ØÂô®ÂäüËÉΩÂíåSpring CloudÊúçÂä°ÂèëÁé∞ÂäüËÉΩ</p>
<h1 id="ÂàõÂª∫api-gatewayÊ®°Âùó"><a href="#ÂàõÂª∫api-gatewayÊ®°Âùó" class="headerlink" title="ÂàõÂª∫api-gatewayÊ®°Âùó"></a>ÂàõÂª∫api-gatewayÊ®°Âùó</h1><h2 id="Ê∑ªÂä†‰æùËµñ"><a href="#Ê∑ªÂä†‰æùËµñ" class="headerlink" title="Ê∑ªÂä†‰æùËµñ"></a>Ê∑ªÂä†‰æùËµñ</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰∏çÈúÄË¶ÅÊ≥®ÂÜåÔºü</p>
<h2 id="ÈÖçÁΩÆ"><a href="#ÈÖçÁΩÆ" class="headerlink" title="ÈÖçÁΩÆ"></a>ÈÖçÁΩÆ</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9201</span></span><br><span class="line"></span><br><span class="line"><span class="attr">service-url:</span></span><br><span class="line">  <span class="attr">user-service:</span> <span class="string">http://localhost:8201</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">          <span class="comment"># Ë∑ØÁî±ÁöÑID</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">path_route</span></span><br><span class="line">          <span class="comment"># ÂåπÈÖçÂêéË∑ØÁî±Âú∞ÂùÄ</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">$&#123;service-url.user-service&#125;/user/&#123;id&#125;</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">              <span class="comment"># Êñ≠Ë®ÄÔºåË∑ØÂæÑÁõ∏ÂåπÈÖçÁöÑËøõË°åË∑ØÁî±</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/user/&#123;id&#125;</span></span><br></pre></td></tr></table></figure>

<p>ÂêØÂä®consul-server„ÄÅuser-serviceÂíåapi-gateway</p>
<p>ÊµãËØï <a href="http://localhost:9201/user/1" target="_blank" rel="noopener">http://localhost:9201/user/1</a></p>
<img src="/images/2020/screencapture2020-04-25 AM9.58.55.jpg">

<h1 id="Route-Predicate-ÁöÑ‰ΩøÁî®"><a href="#Route-Predicate-ÁöÑ‰ΩøÁî®" class="headerlink" title="Route Predicate ÁöÑ‰ΩøÁî®"></a>Route Predicate ÁöÑ‰ΩøÁî®</h1><ul>
<li><p>After Route Predicate : Âú®ÊåáÂÆöÊó∂Èó¥‰πãÂêéÁöÑËØ∑Ê±Ç‰ºöÂåπÈÖçËØ•Ë∑ØÁî±</p>
</li>
<li><p>Before Route Predicate : Âú®ÊåáÂÆöÊó∂Èó¥‰πãÂâçÁöÑËØ∑Ê±Ç‰ºöÂåπÈÖçËØ•Ë∑ØÁî±</p>
</li>
<li><p>Between Route Predicate : Âú®ÊåáÂÆöÊó∂Èó¥Âå∫Èó¥ÂÜÖÁöÑËØ∑Ê±Ç‰ºöÂåπÈÖçËØ•Ë∑ØÁî±</p>
</li>
<li><p>Cookie Route Predicate : Â∏¶ÊúâÊåáÂÆöCookieÁöÑËØ∑Ê±Ç‰ºöÂåπÈÖçËØ•Ë∑ØÁî±</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">username&#x3D;jourwon</span><br></pre></td></tr></table></figure>
</li>
<li><p>Header Route Predicate : Â∏¶ÊúâÊåáÂÆöËØ∑Ê±ÇÂ§¥ÁöÑËØ∑Ê±Ç‰ºöÂåπÈÖçËØ•Ë∑ØÁî±</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">X-Request-Id:123</span><br></pre></td></tr></table></figure>
</li>
<li><p>Host Route Predicate : Â∏¶ÊúâÊåáÂÆöHostÁöÑËØ∑Ê±Ç‰ºöÂåπÈÖçËØ•Ë∑ØÁî±</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Host:www.jourwon.com</span><br></pre></td></tr></table></figure>
</li>
<li><p>Method Route Predicate : ÂèëÈÄÅÊåáÂÆöÊñπÊ≥ïÁöÑËØ∑Ê±Ç‰ºöÂåπÈÖçËØ•Ë∑ØÁî±</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET</span><br></pre></td></tr></table></figure>
</li>
<li><p>Path Route Predicate : ÂèëÈÄÅÊåáÂÆöË∑ØÂæÑÁöÑËØ∑Ê±Ç‰ºöÂåπÈÖçËØ•Ë∑ØÁî±</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;user&#x2F;1</span><br></pre></td></tr></table></figure>
</li>
<li><p>Query Route Predicate : Â∏¶ÊåáÂÆöÊü•ËØ¢ÂèÇÊï∞ÁöÑËØ∑Ê±ÇÂèØ‰ª•ÂåπÈÖçËØ•Ë∑ØÁî±</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">username&#x3D;jourwon</span><br></pre></td></tr></table></figure>
</li>
<li><p>RemoteAddr Route Predicate : ‰ªéÊåáÂÆöËøúÁ®ãÂú∞ÂùÄÂèëËµ∑ÁöÑËØ∑Ê±ÇÂèØ‰ª•ÂåπÈÖçËØ•Ë∑ØÁî±</p>
</li>
<li><p>Weight Route Predicate : ‰ΩøÁî®ÊùÉÈáçÊù•Ë∑ØÁî±Áõ∏Â∫îËØ∑Ê±Ç</p>
<p>Â¶Ç80%ÁöÑËØ∑Ê±ÇË∑ØÁî±Âà∞localhost:8201Ôºå20%Ë∑ØÁî±Âà∞localhost:8202</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">weight_high</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">http://localhost:8201</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">Weight=group1,</span> <span class="number">8</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">weight_low</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">http://localhost:8202</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">Weight=group1,</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="Route-FilterÁöÑ‰ΩøÁî®"><a href="#Route-FilterÁöÑ‰ΩøÁî®" class="headerlink" title="Route FilterÁöÑ‰ΩøÁî®"></a>Route FilterÁöÑ‰ΩøÁî®</h1><p>ÂèØÁî®‰∫é‰øÆÊîπËøõÂÖ•ÁöÑHTTPËØ∑Ê±ÇÂíåËøîÂõûÁöÑHTTPÂìçÂ∫îÔºåÂè™ËÉΩÊåáÂÆöË∑ØÁî±ËøõË°å‰ΩøÁî®</p>
<ul>
<li>AddRequestParameter GatewayFilter : ÁªôËØ∑Ê±ÇÊ∑ªÂä†ÂèÇÊï∞ÁöÑËøáÊª§Âô®</li>
<li>StripPrefix GatewayFilter : ÂØπÊåáÂÆöÊï∞ÈáèÁöÑË∑ØÂæÑÂâçÁºÄËøõË°åÂéªÈô§ÁöÑËøáÊª§Âô®</li>
<li>PrefixPath GatewayFilter : ‰∏éStripPrefixËøáÊª§Âô®Áõ∏ÂèçÔºå‰ºöÂØπÂéüÊúâË∑ØÂæÑËøõË°åÂ¢ûÂä†Êìç‰ΩúÁöÑËøáÊª§Âô®</li>
<li>Retry GatewayFilter : ÂØπË∑ØÁî±ËØ∑Ê±ÇËøõË°åÈáçËØïÁöÑËøáÊª§Âô®ÔºåÊ†πÊçÆË∑ØÁî±ËØ∑Ê±ÇËøîÂõûÁöÑHTTPÁä∂ÊÄÅÁ†ÅÊù•Á°ÆÂÆöÊòØÂê¶ËøõË°åÈáçËØï</li>
</ul>
<h2 id="Hystrix-GatewayFilter"><a href="#Hystrix-GatewayFilter" class="headerlink" title="Hystrix GatewayFilter"></a>Hystrix GatewayFilter</h2><p>Â∞ÜÊñ≠Ë∑ØÂô®ÂäüËÉΩÊ∑ªÂä†Âà∞ÁΩëÂÖ≥Ë∑ØÁî±‰∏≠</p>
<p>ÈúÄÊ∑ªÂä†HystrixÁöÑÁõ∏ÂÖ≥‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Ê∑ªÂä†Áõ∏ÂÖ≥ÊúçÂä°ÈôçÁ∫ßÁöÑÂ§ÑÁêÜÁ±ªFallbackController</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FallbackController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/fallback"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">fallback</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Map&lt;String,Object&gt; result = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        result.put(<span class="string">"data"</span>,<span class="keyword">null</span>);</span><br><span class="line">        result.put(<span class="string">"message"</span>,<span class="string">"Get request fallback!"</span>);</span><br><span class="line">        result.put(<span class="string">"code"</span>,<span class="number">500</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÈÖçÁΩÆÊúçÂä°ÈôçÁ∫ß</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">filters:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Hystrix</span></span><br><span class="line">    <span class="attr">args:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">fallbackcmd</span></span><br><span class="line">      <span class="attr">fallback-uri:</span> <span class="string">forward:/fallback</span></span><br></pre></td></tr></table></figure>

<p>ÊµãËØïÔºàÂÖàÈáçÂêØapi-gatewayÔºâ</p>
<p>ÂÖ≥Èó≠user-serviceÔºåË∞ÉÁî®<a href="http://localhost:9201/user/1" target="_blank" rel="noopener">http://localhost:9201/user/1</a> </p>
<img src="/images/2020/screencapture2020-04-25 AM10.13.57.jpg">

<p>ÂèëÁîü‰∫ÜÈôçÁ∫ß</p>
<h2 id="RequestRateLimiter-GatewayFilter"><a href="#RequestRateLimiter-GatewayFilter" class="headerlink" title="RequestRateLimiter GatewayFilter"></a>RequestRateLimiter GatewayFilter</h2><p>ÂèØ‰ª•Áî®‰∫éÈôêÊµÅ</p>
<p>Ê∑ªÂä†‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis-reactive<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Ê∑ªÂä†ÈôêÊµÅÁ≠ñÁï•ÁöÑÈÖçÁΩÆÁ±ª</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisRateLimiterConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> KeyResolver <span class="title">userKeyResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Ê†πÊçÆËØ∑Ê±ÇÂèÇÊï∞‰∏≠ÁöÑusernameËøõË°åÈôêÊµÅ</span></span><br><span class="line">        <span class="keyword">return</span> exchange -&gt; Mono.just(exchange.getRequest().getQueryParams().getFirst(<span class="string">"username"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> KeyResolver <span class="title">ipKeyResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Ê†πÊçÆËÆøÈóÆIPËøõË°åÈôêÊµÅ</span></span><br><span class="line">        <span class="keyword">return</span> exchange -&gt; Mono.just(exchange.getRequest().getRemoteAddress().getHostName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ê∑ªÂä†RedisÂíåRequestRateLimiterÁöÑÈÖçÁΩÆ</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">RequestRateLimiter</span></span><br><span class="line">  <span class="attr">args:</span></span><br><span class="line">    <span class="comment"># ÊØèÁßíÂÖÅËÆ∏Â§ÑÁêÜÁöÑËØ∑Ê±ÇÊï∞Èáè</span></span><br><span class="line">    <span class="attr">redis-rate-limiter.replenishRate:</span> <span class="number">1</span></span><br><span class="line">    <span class="comment"># ÊØèÁßíÊúÄÂ§ßÂ§ÑÁêÜÁöÑËØ∑Ê±ÇÊï∞Èáè</span></span><br><span class="line">    <span class="attr">redis-rate-limiter.burstCapacity:</span> <span class="number">2</span></span><br><span class="line">    <span class="comment"># ÈôêÊµÅÁ≠ñÁï•ÔºåÂØπÂ∫îÁ≠ñÁï•ÁöÑBean</span></span><br><span class="line">    <span class="attr">key-resolver:</span> <span class="string">"#&#123;@ipKeyResolver&#125;"</span></span><br></pre></td></tr></table></figure>

<p>ÊµãËØï</p>
<p>ÂêØÂä®ÊúçÂä°ÔºåÂ§öÊ¨°ËØ∑Ê±Ç <a href="http://localhost:9201/user/1" target="_blank" rel="noopener">http://localhost:9201/user/1</a></p>
<img src="/images/2020/screencapture2020-04-25 AM10.35.06.jpg">

<p>Êä•Èîô429</p>
<h2 id="DEBUGÔºöÂêØÂä®Â§±Ë¥•"><a href="#DEBUGÔºöÂêØÂä®Â§±Ë¥•" class="headerlink" title="DEBUGÔºöÂêØÂä®Â§±Ë¥•"></a>DEBUGÔºöÂêØÂä®Â§±Ë¥•</h2><p>Êä•Èîô</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">***************************</span><br><span class="line">APPLICATION FAILED TO START</span><br><span class="line">***************************</span><br><span class="line"></span><br><span class="line">Description:</span><br><span class="line"></span><br><span class="line">Parameter 1 of method requestRateLimiterGatewayFilterFactory in org.springframework.cloud.gateway.config.GatewayAutoConfiguration required a single bean, but 2 were found:</span><br><span class="line">	- userKeyResolver: defined by method &#39;userKeyResolver&#39; in class path resource [com&#x2F;coconutnut&#x2F;apigateway&#x2F;config&#x2F;RedisRateLimiterConfig.class]</span><br><span class="line">	- ipKeyResolver: defined by method &#39;ipKeyResolver&#39; in class path resource [com&#x2F;coconutnut&#x2F;apigateway&#x2F;config&#x2F;RedisRateLimiterConfig.class]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Action:</span><br><span class="line"></span><br><span class="line">Consider marking one of the beans as @Primary, updating the consumer to accept multiple beans, or using @Qualifier to identify the bean that should be consumed</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Process finished with exit code 1</span><br></pre></td></tr></table></figure>

<p>Ê†πÊçÆÊèêÁ§∫Âä†‰∏ä@PrimaryÔºåËß£ÂÜ≥</p>
<h2 id="DEBUGÔºöRedisËøûÊé•Â§±Ë¥•"><a href="#DEBUGÔºöRedisËøûÊé•Â§±Ë¥•" class="headerlink" title="DEBUGÔºöRedisËøûÊé•Â§±Ë¥•"></a>DEBUGÔºöRedisËøûÊé•Â§±Ë¥•</h2><p>ËÆøÈóÆ<a href="http://localhost:9201/user/1Êó∂Êï∞ÊçÆÊ≠£Â∏∏Ôºå‰ΩÜÊéßÂà∂Âè∞Êä•Èîô" target="_blank" rel="noopener">http://localhost:9201/user/1Êó∂Êï∞ÊçÆÊ≠£Â∏∏Ôºå‰ΩÜÊéßÂà∂Âè∞Êä•Èîô</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379</span><br><span class="line">	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1199) ~[spring-data-redis-2.2.3.RELEASE.jar:2.2.3.RELEASE]</span><br><span class="line">	at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1178) ~[spring-data-redis-2.2.3.RELEASE.jar:2.2.3.RELEASE]</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>

<p>‰∏ãËΩΩÂÆâË£Ö</p>
<blockquote>
<p><a href="http://www.redis.cn/download.html" target="_blank" rel="noopener">http://www.redis.cn/download.html</a></p>
</blockquote>
<p>ÂêØÂä®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">redis-5.0.5 % src&#x2F;redis-server</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-04-25 AM10.37.45.jpg">

<p>Â•ΩÂèØÁà±üôÄ</p>
<h1 id="ÁªìÂêàÊ≥®ÂÜå‰∏≠ÂøÉ‰ΩøÁî®"><a href="#ÁªìÂêàÊ≥®ÂÜå‰∏≠ÂøÉ‰ΩøÁî®" class="headerlink" title="ÁªìÂêàÊ≥®ÂÜå‰∏≠ÂøÉ‰ΩøÁî®"></a>ÁªìÂêàÊ≥®ÂÜå‰∏≠ÂøÉ‰ΩøÁî®</h1><p>ÔºàÂºÉÔºâ</p>
<p>ÊïôÁ®ãÁªôÁöÑÊòØeurekaÔºåËøôÈáåÂ∞ùËØïÊîπÊàêconsul</p>
<p>Âä†‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-consul-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÊîπÈÖçÁΩÆ</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">application:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">api-gateway</span></span><br><span class="line">    <span class="attr">consul:</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">8500</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">service-name:</span> <span class="string">$&#123;spring.application.name&#125;</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">locator:</span></span><br><span class="line">          <span class="comment">#ÂºÄÂêØ‰ªéÊ≥®ÂÜå‰∏≠ÂøÉÂä®ÊÄÅÂàõÂª∫Ë∑ØÁî±ÁöÑÂäüËÉΩ</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">          <span class="comment">#‰ΩøÁî®Â∞èÂÜôÊúçÂä°ÂêçÔºåÈªòËÆ§ÊòØÂ§ßÂÜô</span></span><br><span class="line">          <span class="attr">lower-case-service-id:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="DEBUGÔºöÂêØÂä®Â§±Ë¥•-1"><a href="#DEBUGÔºöÂêØÂä®Â§±Ë¥•-1" class="headerlink" title="DEBUGÔºöÂêØÂä®Â§±Ë¥•"></a>DEBUGÔºöÂêØÂä®Â§±Ë¥•</h2><p>Êä•Èîô</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;webHandler&#39; defined in class path resource [org&#x2F;springframework&#x2F;boot&#x2F;autoconfigure&#x2F;web&#x2F;reactive&#x2F;WebFluxAutoConfiguration$EnableWebFluxConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;webEndpointReactiveHandlerMapping&#39; defined in class path resource [org&#x2F;springframework&#x2F;boot&#x2F;actuate&#x2F;autoconfigure&#x2F;endpoint&#x2F;web&#x2F;reactive&#x2F;WebFluxEndpointManagementContextConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.endpoint.web.reactive.WebFluxEndpointHandlerMapping]: Factory method &#39;webEndpointReactiveHandlerMapping&#39; threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.cloud.client.serviceregistry.ServiceRegistryAutoConfiguration$ServiceRegistryEndpointConfiguration&#39;: Unsatisfied dependency expressed through field &#39;registration&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;consulRegistration&#39; defined in class path resource [org&#x2F;springframework&#x2F;cloud&#x2F;consul&#x2F;serviceregistry&#x2F;ConsulAutoServiceRegistrationAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.consul.serviceregistry.ConsulAutoRegistration]: Factory method &#39;consulRegistration&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Consul service ids must not be empty, must start with a letter, end with a letter or digit, and have as interior characters only letters, digits, and hyphen: 9201</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:603) ~[spring-beans-5.2.2.RELEASE.jar:5.2.2.RELEASE]</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-5.2.2.RELEASE.jar:5.2.2.RELEASE]</span><br></pre></td></tr></table></figure>

<p>ÂèëÁé∞ÂêØÂä®Á±ªÂøòÂä†Ê≥®Èáä‰∫ÜÔºåÂä†‰∏äÂÖà</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br></pre></td></tr></table></figure>

<p>Áúã‰∏ã‰æùËµñÔºåÊ≤°ÊúâÂÜ≤Á™Å</p>
<img src="/images/2020/screencapture2020-04-25 AM10.49.46.jpg">

<p>‰ΩÜÊòØÁ°ÆÂÆûÊòØÂä†‰∫ÜconsulÁöÑ‰æùËµñ‰πãÂêéÊâçÊä•ÈîôÁöÑ</p>
<p>ÂéªÊéâÂÆÉÁöÑ‰æùËµñÂ∞±ÂèØ‰ª•Ê≠£Â∏∏ÂêØÂä®</p>
<blockquote>
<p><a href="https://blog.csdn.net/jiazhiyuan0/article/details/84033595" target="_blank" rel="noopener">https://blog.csdn.net/jiazhiyuan0/article/details/84033595</a></p>
<p><a href="https://blog.csdn.net/maduo_duo/article/details/84866137" target="_blank" rel="noopener">https://blog.csdn.net/maduo_duo/article/details/84866137</a></p>
</blockquote>
<p>Á°ÆÂÆûÂèØËÉΩÊòØÊúâÂÜ≤Á™Å</p>
<p>Áé∞Âú®ÁöÑSpring BootÁâàÊú¨ÊòØ2.2.2.RELEASEÔºåSpring CloudÁâàÊú¨ÊòØ2.2.0.RELEASE</p>
<p><strong>Â∞ùËØï1</strong></p>
<p>ÊääSpring BootÈôçÂà∞2.2.0</p>
<p>Âπ∂‰∏çË°å</p>
<p><strong>Â∞ùËØï2</strong></p>
<blockquote>
<p><a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/319" target="_blank" rel="noopener">https://github.com/spring-cloud/spring-cloud-gateway/issues/319</a></p>
<p>Finchley is not compatible with boot 2.1.0. Either downgrade to boot 2.0.6 or use Greenwich.M3</p>
</blockquote>
<p>ËøôÈáåÁî®ÁöÑÊòØHoxtonÁâàÊú¨</p>
<p>Êâæ‰∏ãÊñáÊ°£</p>
<blockquote>
<p><a href="https://spring.io/blog/2019/11/28/spring-cloud-hoxton-released" target="_blank" rel="noopener">https://spring.io/blog/2019/11/28/spring-cloud-hoxton-released</a></p>
</blockquote>
<p>ConsulÂíåGatewayÁöÑÁâàÊú¨‰πüÊòØ2.2.0.RELEASE</p>
<blockquote>
<p><a href="https://spring.io/projects/spring-cloud#overview" target="_blank" rel="noopener">https://spring.io/projects/spring-cloud#overview</a></p>
</blockquote>
<p>HoxtonÂØπÂ∫îÁöÑBoot VersionÊòØ2.2.x</p>
<p>Â∫îËØ•Ê≤°Èîô</p>
<p>Â•ΩÂá†‰∏™Âú∞ÊñπÁúãÂà∞ËØ¥ÊòØspring-boot-starter-webÁöÑÈóÆÈ¢ò</p>
<img src="/images/2020/screencapture2020-04-25 AM11.49.26.jpg">

<p>Êêú‰∏Ä‰∏ãÔºåÁ°ÆÂÆûÂºïÁî®‰∫Ü</p>
<p>ÊääÂÆÉÊéíÈô§</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-webflux<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-04-25 AM11.55.17.jpg">

<p>Âπ∂‰∏çË°å</p>
<p><strong>Â∞ùËØï3</strong></p>
<p>ÊâæÊâæSpring Cloud Hoxton + Gatway + ConsulÁöÑÊïôÁ®ã</p>
<blockquote>
<p><a href="https://piotrminkowski.com/2019/11/06/microservices-with-spring-boot-spring-cloud-gateway-and-consul-cluster/" target="_blank" rel="noopener">https://piotrminkowski.com/2019/11/06/microservices-with-spring-boot-spring-cloud-gateway-and-consul-cluster/</a></p>
</blockquote>
<p>Ëøô‰∏™ÊïôÁ®ãÁöÑ‰æùËµñÊòØ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-consul-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Â∑≤Êúâ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-consul-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>Êää‰πãÂâçspring-boot-starterÁöÑ‰æùËµñÊîπÊàêspring-boot-starter-web</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ËøòÊòØÊ≤°ÂêØÂä®ÊàêÂäüÔºå‰ΩÜÊòØÊä•ÈîôÂèòÊàê‰∫Ü</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2020-04-25 12:09:53.083 ERROR 4989 --- [           main] o.s.boot.SpringApplication               : Application run failed</span><br><span class="line"></span><br><span class="line">org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat</span><br><span class="line">	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:156) ~[spring-boot-2.2.2.RELEASE.jar:2.2.2.RELEASE]</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a href="https://blog.csdn.net/fly_west/article/details/101229871?depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1&amp;utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1" target="_blank" rel="noopener">https://blog.csdn.net/fly_west/article/details/101229871?depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1&amp;utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1</a></p>
</blockquote>
<p>ËøòÊòØspring-boot-starter-webÂÜ≤Á™ÅÁöÑÈóÆÈ¢ò</p>
<p>Áé∞Âú®ÂÜçÊäägatewayÈáåÁöÑwebfluxÊéíÈô§ËØïËØï</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2020-04-25 12:12:38.331 ERROR 5002 --- [           main] o.s.boot.SpringApplication               : Application run failed</span><br><span class="line"></span><br><span class="line">org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat</span><br><span class="line">	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:156) ~[spring-boot-2.2.2.RELEASE.jar:2.2.2.RELEASE]</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>

<p><strong>Â∞ùËØï4</strong></p>
<p>‰æùËµñÂÖ®ÊîπÂæóÂíåÂàöÈÇ£‰∏™ÊïôÁ®ã‰∏ÄÊ†∑ËØïËØï</p>
<p>hystrixÂíåredisÁõ∏ÂÖ≥ÁöÑÈÉΩÊ≥®ÈáäÊéâ</p>
<p>ÁâàÊú¨</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>Hoxton.RC1<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-consul-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ËøòÊòØÂ¥©‰∫Ü</p>
<p>ÂèëÁé∞‰∏Ä‰∏™ÈóÆÈ¢òÔºå‰æùËµñÁöÑÊúÄ‰∏ãÈù¢ÊÄé‰πàËøòÊúâ‰∏™</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-commons<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰º∞ËÆ°ÊòØÂàõÂª∫ÁöÑÊó∂ÂÄôÂØºÂÖ•ÁöÑÔºåÂà†Êéâ</p>
<p>ÈáçÂêØ</p>
<p>Â¥©</p>
<p><strong>Â∞ùËØï5</strong></p>
<p>ËøòÊòØÊääÁâàÊú¨ÊîπÂõûSpring Boot 2.2.0ÂíåSpring Cloud Hoxton</p>
<p>Áé∞Âú®ÁöÑ‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--            &lt;exclusions&gt;--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--                &lt;exclusion&gt;--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--                    &lt;artifactId&gt;spring-cloud-starter-webflux&lt;/artifactId&gt;--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--                &lt;/exclusion&gt;--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--            &lt;/exclusions&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-consul-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Áé∞Âú®ÁöÑÊä•Èîô</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">2020-04-25 12:32:36.436 ERROR 5170 --- [           main] o.s.boot.SpringApplication               : Application run failed</span><br><span class="line"></span><br><span class="line">org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat</span><br><span class="line">	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:156) ~[spring-boot-2.2.2.RELEASE.jar:2.2.2.RELEASE]</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>

<p>ÂàöÊâçÁúã‰æùËµñÂõæÂèëÁé∞gateway‰æùËµñÁöÑÊòØwebflux</p>
<p>ËøôÈáå‰æùËµñÁöÑÊòØweb</p>
<p>Â¶ÇÊûúÊîπÊàêwebfluxÔºü</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-webflux<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Êä•Èîô</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2020-04-25 12:33:57.502 ERROR 5182 --- [           main] o.s.boot.SpringApplication               : Application run failed</span><br><span class="line"></span><br><span class="line">org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;webHandler&#39; defined in class path resource [org&#x2F;springframework&#x2F;boot&#x2F;autoconfigure&#x2F;web&#x2F;reactive&#x2F;WebFluxAutoConfiguration$EnableWebFluxConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;webEndpointReactiveHandlerMapping&#39; defined in class path resource [org&#x2F;springframework&#x2F;boot&#x2F;actuate&#x2F;autoconfigure&#x2F;endpoint&#x2F;web&#x2F;reactive&#x2F;WebFluxEndpointManagementContextConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.endpoint.web.reactive.WebFluxEndpointHandlerMapping]: Factory method &#39;webEndpointReactiveHandlerMapping&#39; threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.cloud.client.serviceregistry.ServiceRegistryAutoConfiguration$ServiceRegistryEndpointConfiguration&#39;: Unsatisfied dependency expressed through field &#39;registration&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;consulRegistration&#39; defined in class path resource [org&#x2F;springframework&#x2F;cloud&#x2F;consul&#x2F;serviceregistry&#x2F;ConsulAutoServiceRegistrationAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.consul.serviceregistry.ConsulAutoRegistration]: Factory method &#39;consulRegistration&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Consul service ids must not be empty, must start with a letter, end with a letter or digit, and have as interior characters only letters, digits, and hyphen: 9201</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:603) ~[spring-beans-5.2.2.RELEASE.jar:5.2.2.RELEASE]</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>

<p>ÊâÄ‰ª•Â∫îËØ•ÊòØÔºåÂêØÂä®ÈúÄË¶ÅwebÔºåÂê¶ÂàôÊä•BeanCreationException</p>
<p>ËÄågateway‰æùËµñ‰∫ÜwebfluxÔºåÂíåwebÂÜ≤Á™ÅÔºåÊä•ApplicationContextException</p>
<p>ÂÜçÊääexclusionÂä†‰∏ä</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-webflux<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2020-04-25 12:35:30.492 ERROR 5188 --- [           main] o.s.boot.SpringApplication               : Application run failed</span><br><span class="line"></span><br><span class="line">org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;webHandler&#39; defined in class path resource [org&#x2F;springframework&#x2F;boot&#x2F;autoconfigure&#x2F;web&#x2F;reactive&#x2F;WebFluxAutoConfiguration$EnableWebFluxConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;webEndpointReactiveHandlerMapping&#39; defined in class path resource [org&#x2F;springframework&#x2F;boot&#x2F;actuate&#x2F;autoconfigure&#x2F;endpoint&#x2F;web&#x2F;reactive&#x2F;WebFluxEndpointManagementContextConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.endpoint.web.reactive.WebFluxEndpointHandlerMapping]: Factory method &#39;webEndpointReactiveHandlerMapping&#39; threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.cloud.client.serviceregistry.ServiceRegistryAutoConfiguration$ServiceRegistryEndpointConfiguration&#39;: Unsatisfied dependency expressed through field &#39;registration&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;consulRegistration&#39; defined in class path resource [org&#x2F;springframework&#x2F;cloud&#x2F;consul&#x2F;serviceregistry&#x2F;ConsulAutoServiceRegistrationAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.consul.serviceregistry.ConsulAutoRegistration]: Factory method &#39;consulRegistration&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Consul service ids must not be empty, must start with a letter, end with a letter or digit, and have as interior characters only letters, digits, and hyphen: 9201</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:603) ~[spring-beans-5.2.2.RELEASE.jar:5.2.2.RELEASE]</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>

<p>ÊääexclusionÂéªÊéâÔºåwebfluxÂà†‰∫Ü</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2020-04-25 12:37:30.419 ERROR 5199 --- [           main] o.s.boot.SpringApplication               : Application run failed</span><br><span class="line"></span><br><span class="line">org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;webHandler&#39; defined in class path resource [org&#x2F;springframework&#x2F;boot&#x2F;autoconfigure&#x2F;web&#x2F;reactive&#x2F;WebFluxAutoConfiguration$EnableWebFluxConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;webEndpointReactiveHandlerMapping&#39; defined in class path resource [org&#x2F;springframework&#x2F;boot&#x2F;actuate&#x2F;autoconfigure&#x2F;endpoint&#x2F;web&#x2F;reactive&#x2F;WebFluxEndpointManagementContextConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.endpoint.web.reactive.WebFluxEndpointHandlerMapping]: Factory method &#39;webEndpointReactiveHandlerMapping&#39; threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.cloud.client.serviceregistry.ServiceRegistryAutoConfiguration$ServiceRegistryEndpointConfiguration&#39;: Unsatisfied dependency expressed through field &#39;registration&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;consulRegistration&#39; defined in class path resource [org&#x2F;springframework&#x2F;cloud&#x2F;consul&#x2F;serviceregistry&#x2F;ConsulAutoServiceRegistrationAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.consul.serviceregistry.ConsulAutoRegistration]: Factory method &#39;consulRegistration&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Consul service ids must not be empty, must start with a letter, end with a letter or digit, and have as interior characters only letters, digits, and hyphen: 9201</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:603) ~[spring-beans-5.2.2.RELEASE.jar:5.2.2.RELEASE]</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>

<img src="/images/2020/a.gif" width=200>

<p><strong>Â∞ùËØï6</strong></p>
<blockquote>
<p><a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/319" target="_blank" rel="noopener">https://github.com/spring-cloud/spring-cloud-gateway/issues/319</a></p>
</blockquote>
<p>‰πãÂâçËøô‰∏™issueÈáåÈù¢Êúâ‰∫∫ËØ¥</p>
<blockquote>
<p>spring cloud gateway is not compatible with spring mvc and servlet containers, what you get when you depend on <code>spring-boot-starter-web</code>.</p>
</blockquote>
<p>ËØïËØïÊääspring-boot-starter-webÈáåÁöÑspring mvcÂíåservletÊéíÈô§‰∫ÜÔºü</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰∏çË°å</p>
<blockquote>
<p><a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/1004" target="_blank" rel="noopener">https://github.com/spring-cloud/spring-cloud-gateway/issues/1004</a></p>
<p><code>spring-cloud-gateway-mvc</code> is not compatible with gateway core. You need to use <code>spring-cloud-gateway-webflux</code>.</p>
</blockquote>
<blockquote>
<p><a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/1473" target="_blank" rel="noopener">https://github.com/spring-cloud/spring-cloud-gateway/issues/1473</a></p>
<p>Spring MVC found on classpath, which is incompatible with Spring Cloud Gateway at this time. Please remove spring-boot-starter-web dependency.</p>
</blockquote>
<p>Áé∞Âú®Â∞±Âè™ÊúâËøôÂá†‰∏™‰æùËµñÔºå‰∏∫‰ªÄ‰πàËøòÊòØÂêØÂä®‰∏ç‰∫ÜÂë¢</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spring-cloud-starter-gateway&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spring-boot-starter-actuator&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<p>ÈöæÈÅìactuatorÈáåÈù¢‰πüÊúâwebÔºü</p>
<p>ÊääÂÆÉÊ≥®ÈáäÊéâ</p>
<p>Êä•ÈîôÂèòÊàê</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2020-04-25 13:17:36.860 ERROR 5310 --- [           main] o.s.boot.SpringApplication               : Application run failed</span><br><span class="line"></span><br><span class="line">org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.cloud.client.serviceregistry.AutoServiceRegistrationAutoConfiguration&#39;: Unsatisfied dependency expressed through field &#39;autoServiceRegistration&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;consulAutoServiceRegistration&#39; defined in class path resource [org&#x2F;springframework&#x2F;cloud&#x2F;consul&#x2F;serviceregistry&#x2F;ConsulAutoServiceRegistrationAutoConfiguration.class]: Unsatisfied dependency expressed through method &#39;consulAutoServiceRegistration&#39; parameter 3; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;consulRegistration&#39; defined in class path resource [org&#x2F;springframework&#x2F;cloud&#x2F;consul&#x2F;serviceregistry&#x2F;ConsulAutoServiceRegistrationAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.consul.serviceregistry.ConsulAutoRegistration]: Factory method &#39;consulRegistration&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Consul service ids must not be empty, must start with a letter, end with a letter or digit, and have as interior characters only letters, digits, and hyphen: 9201</span><br><span class="line">	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:643) ~[spring-beans-5.2.2.RELEASE.jar:5.2.2.RELEASE]</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/802" target="_blank" rel="noopener">https://github.com/spring-cloud/spring-cloud-gateway/issues/802</a></p>
<p>Gateway is thought to be used as a separate technical component in your architecture. It usually does not make sense to add a gateway dependency directly to your business code.</p>
</blockquote>
<p>ÈÄÇÂêàÂçïÁã¨‰ΩøÁî®‚Ä¶</p>
<p>ÂçïÁã¨‰ΩøÁî®‚Ä¶</p>
<p>ÂçïÁã¨‚Ä¶</p>
<p>fine</p>
<p>ÊöÇÊó∂Â∞±‰∏çÁªìÂêàÊ≥®ÂÜå‰∏≠ÂøÉ‰∫Ü</p>
<p>‰ª•ÂêéÊúâÈúÄË¶ÅÂÜçËØ¥</p>
<p>ÂÜçËßÅ</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>springcloud</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisPlusÁ¨îËÆ∞06 Ëá™Âä®Â°´ÂÖÖ„ÄÅÈÄªËæëÂà†Èô§„ÄÅÈÄöÁî®Êûö‰∏æÁ≠â</title>
    <url>/2020/04/24/note-mybatisplus-06/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1rE41197jR" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1rE41197jR</a></p>
<p>P55~62</p>
</blockquote>
<h1 id="sqlÊ≥®ÂÖ•Âô®"><a href="#sqlÊ≥®ÂÖ•Âô®" class="headerlink" title="sqlÊ≥®ÂÖ•Âô®"></a>sqlÊ≥®ÂÖ•Âô®</h1><p>ÈªòËÆ§ÁöÑMapper‰∏≠ÊñπÊ≥ï‰∏çÂ§üÁî®Êó∂ÔºåËá™Â∑±Êâ©ÂÖÖBaseMapper‰∏≠ÁöÑÊñπÊ≥ï</p>
<blockquote>
<p><a href="https://www.bilibili.com/video/BV1rE41197jR?p=55" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1rE41197jR?p=55</a></p>
</blockquote>
<h1 id="Ëá™Âä®Â°´ÂÖÖ"><a href="#Ëá™Âä®Â°´ÂÖÖ" class="headerlink" title="Ëá™Âä®Â°´ÂÖÖ"></a>Ëá™Âä®Â°´ÂÖÖ</h1><p>ÊèíÂÖ•ÊàñËÄÖÊõ¥Êñ∞Êï∞ÊçÆÊó∂ÔºåÂ∏åÊúõÊúâ‰∫õÂ≠óÊÆµÂèØ‰ª•Ëá™Âä®Â°´ÂÖÖÊï∞ÊçÆÔºåÊØîÂ¶ÇÂØÜÁ†Å„ÄÅversion Á≠â</p>
<h2 id="Ê∑ªÂä†-TableFieldÊ≥®Ëß£"><a href="#Ê∑ªÂä†-TableFieldÊ≥®Ëß£" class="headerlink" title="Ê∑ªÂä†@TableFieldÊ≥®Ëß£"></a>Ê∑ªÂä†@TableFieldÊ≥®Ëß£</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Version</span></span><br><span class="line"><span class="meta">@TableField</span>(fill = FieldFill.INSERT)</span><br><span class="line"><span class="keyword">private</span> Integer version;</span><br></pre></td></tr></table></figure>

<p>FieldFillÂèØÈÄâÔºö</p>
<ul>
<li>DEFAULT ÈªòËÆ§‰∏çÂ§ÑÁêÜ</li>
<li>INSERT ÊèíÂÖ•ËØïÂ°´ÂÖÖÂ≠óÊÆµ</li>
<li>UPDATE Êõ¥Êñ∞Êó∂Â°´ÂÖÖÂ≠óÊÆµ</li>
<li>INSERT_UPDATE ÊèíÂÖ•ÂíåÊõ¥Êñ∞Êó∂Â°´ÂÖÖÂ≠óÊÆµ</li>
</ul>
<h2 id="ÁºñÂÜôMyMetaObjectHandler"><a href="#ÁºñÂÜôMyMetaObjectHandler" class="headerlink" title="ÁºñÂÜôMyMetaObjectHandler"></a>ÁºñÂÜôMyMetaObjectHandler</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title">MetaObjectHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        Object version = getFieldValByName(<span class="string">"version"</span>, metaObject);</span><br><span class="line">        <span class="keyword">if</span>(version == <span class="keyword">null</span>)&#123;</span><br><span class="line">            setFieldValByName(<span class="string">"version"</span>, <span class="number">1</span>, metaObject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInsertFill</span><span class="params">()</span></span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setName(<span class="string">"Âº†Âõõ"</span>);</span><br><span class="line">  user.setUserName(<span class="string">"zhangsi"</span>);</span><br><span class="line">  user.setPassword(<span class="string">"123123"</span>);</span><br><span class="line">  user.setAge(<span class="number">30</span>);</span><br><span class="line">  user.setEmail(<span class="string">"zhangsi@itast.cn"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> result = <span class="keyword">this</span>.userMapper.insert(user);</span><br><span class="line">  System.out.println(<span class="string">"result = "</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËæìÂá∫</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> TimeÔºö9 ms - IDÔºöcom.coconutnut.demo.mapper.UserMapper.insert</span><br><span class="line">Execute SQLÔºö</span><br><span class="line">    INSERT </span><br><span class="line">    INTO</span><br><span class="line">        tb_user</span><br><span class="line">        ( user_name, password, name, age, email, version ) </span><br><span class="line">    VALUES</span><br><span class="line">        ( &#39;zhangsi&#39;, &#39;123123&#39;, &#39;Âº†Âõõ&#39;, 30, &#39;zhangsi@itast.cn&#39;, 1 )</span><br><span class="line"></span><br><span class="line">result &#x3D; 1</span><br></pre></td></tr></table></figure>

<h1 id="ÈÄªËæëÂà†Èô§"><a href="#ÈÄªËæëÂà†Èô§" class="headerlink" title="ÈÄªËæëÂà†Èô§"></a>ÈÄªËæëÂà†Èô§</h1><p>Â∞ÜÊï∞ÊçÆÊ†áËÆ∞‰∏∫Âà†Èô§ÔºåËÄåÂπ∂ÈùûÁúüÊ≠£Âà†Èô§</p>
<p>Êü•ËØ¢Êó∂ÈúÄË¶ÅÊê∫Â∏¶Áä∂ÊÄÅÊù°‰ª∂ÔºåÁ°Æ‰øùË¢´Ê†áËÆ∞ÁöÑÊï∞ÊçÆ‰∏çË¢´Êü•ËØ¢Âà∞</p>
<h2 id="‰øÆÊîπË°®ÁªìÊûÑ"><a href="#‰øÆÊîπË°®ÁªìÊûÑ" class="headerlink" title="‰øÆÊîπË°®ÁªìÊûÑ"></a>‰øÆÊîπË°®ÁªìÊûÑ</h2><p>‰∏∫tb_userË°®Â¢ûÂä†deletedÂ≠óÊÆµÔºåÁî®‰∫éË°®Á§∫Êï∞ÊçÆÊòØÂê¶Ë¢´Âà†Èô§Ôºå1‰ª£Ë°®Âà†Èô§Ôºå0‰ª£Ë°®Êú™Âà†Èô§</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`tb_user`</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">COLUMN</span> <span class="string">`deleted`</span> <span class="built_in">int</span>(<span class="number">1</span>) <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="keyword">COMMENT</span> <span class="string">'1‰ª£Ë°®Âà†Èô§Ôºå0‰ª£Ë°®Êú™Âà†Èô§'</span> <span class="keyword">AFTER</span> <span class="string">`version`</span>;</span><br></pre></td></tr></table></figure>

<p>‰øÆÊîπUserÂÆû‰ΩìÔºåÂ¢ûÂä†deletedÂ±ûÊÄßÂπ∂‰∏îÊ∑ªÂä†@TableLogicÊ≥®Ëß£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@TableLogic</span></span><br><span class="line"><span class="keyword">private</span> Integer deleted;</span><br></pre></td></tr></table></figure>

<h2 id="ÈÖçÁΩÆ"><a href="#ÈÖçÁΩÆ" class="headerlink" title="ÈÖçÁΩÆ"></a>ÈÖçÁΩÆ</h2><p>application.properties‰∏≠</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ÈÄªËæëÂ∑≤Âà†Èô§ÂÄº(ÈªòËÆ§‰∏∫ 1) mybatis-plus.global-config.db-config.logic-delete-value=1</span></span><br><span class="line"><span class="comment"># ÈÄªËæëÊú™Âà†Èô§ÂÄº(ÈªòËÆ§‰∏∫ 0) mybatis-plus.global-config.db-config.logic-not-delete-value=0</span></span><br></pre></td></tr></table></figure>

<p>Áõ¥Êé•Áî®ÈªòËÆ§ÂÄºÂèØ‰ª•ÁúÅÁï•</p>
<h2 id="ÊµãËØï-1"><a href="#ÊµãËØï-1" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User(); user.setId(<span class="number">2L</span>);</span><br><span class="line">  <span class="keyword">boolean</span> delete = user.deleteById();</span><br><span class="line">  System.out.println(delete);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËæìÂá∫</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> TimeÔºö2 ms - IDÔºöcom.coconutnut.demo.mapper.UserMapper.deleteById</span><br><span class="line">Execute SQLÔºö</span><br><span class="line">    UPDATE</span><br><span class="line">        tb_user </span><br><span class="line">    SET</span><br><span class="line">        deleted&#x3D;1 </span><br><span class="line">    WHERE</span><br><span class="line">        id&#x3D;2 </span><br><span class="line">        AND deleted&#x3D;0</span><br><span class="line"></span><br><span class="line">true</span><br></pre></td></tr></table></figure>

<p>ÂÆûÈôÖ‰∏äÂèòÊàê‰∫ÜUPDATE</p>
<img src="/images/2020/screencapture2020-04-24 PM7.42.26.jpg">

<p>ÁÑ∂ÂêéÊü•ËØ¢</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectById</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setId(<span class="number">2L</span>);</span><br><span class="line">  User user2 = user.selectById();</span><br><span class="line">  System.out.println(user2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËæìÂá∫</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> TimeÔºö5 ms - IDÔºöcom.coconutnut.demo.mapper.UserMapper.selectById</span><br><span class="line">Execute SQLÔºö</span><br><span class="line">    SELECT</span><br><span class="line">        id,</span><br><span class="line">        user_name,</span><br><span class="line">        password,</span><br><span class="line">        name,</span><br><span class="line">        age,</span><br><span class="line">        email,</span><br><span class="line">        version,</span><br><span class="line">        deleted </span><br><span class="line">    FROM</span><br><span class="line">        tb_user </span><br><span class="line">    WHERE</span><br><span class="line">        id&#x3D;2 </span><br><span class="line">        AND deleted&#x3D;0</span><br><span class="line"></span><br><span class="line">null</span><br></pre></td></tr></table></figure>

<p>SQL‰∏≠Ê∑ªÂä†‰∫Üdeleted=0ÁöÑÊù°‰ª∂ÔºåÊ≤°ÊúâÊü•Âà∞Êï∞ÊçÆ</p>
<h1 id="ÈÄöÁî®Êûö‰∏æ"><a href="#ÈÄöÁî®Êûö‰∏æ" class="headerlink" title="ÈÄöÁî®Êûö‰∏æ"></a>ÈÄöÁî®Êûö‰∏æ</h1><h2 id="‰øÆÊîπË°®ÁªìÊûÑ-1"><a href="#‰øÆÊîπË°®ÁªìÊûÑ-1" class="headerlink" title="‰øÆÊîπË°®ÁªìÊûÑ"></a>‰øÆÊîπË°®ÁªìÊûÑ</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`tb_user`</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">COLUMN</span> <span class="string">`sex`</span> <span class="built_in">int</span>(<span class="number">1</span>) <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">1</span> <span class="keyword">COMMENT</span> <span class="string">'1-Áî∑Ôºå2-Â•≥'</span> <span class="keyword">AFTER</span> <span class="string">`deleted`</span>;</span><br></pre></td></tr></table></figure>

<p>‰øÆÊîπUserÂÆû‰ΩìÁ±ª</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> SexEnum sex;</span><br></pre></td></tr></table></figure>

<h2 id="ÂÆö‰πâÊûö‰∏æ"><a href="#ÂÆö‰πâÊûö‰∏æ" class="headerlink" title="ÂÆö‰πâÊûö‰∏æ"></a>ÂÆö‰πâÊûö‰∏æ</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coconutnut.demo.enums;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.enums.IEnum;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> SexEnum implements IEnum&lt;Integer&gt; &#123;</span><br><span class="line"></span><br><span class="line">    MAN(<span class="number">1</span>,<span class="string">"Áî∑"</span>),</span><br><span class="line">    WOMAN(<span class="number">2</span>,<span class="string">"Â•≥"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">    SexEnum(<span class="keyword">int</span> value, String desc) &#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="keyword">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÈÖçÁΩÆ-1"><a href="#ÈÖçÁΩÆ-1" class="headerlink" title="ÈÖçÁΩÆ"></a>ÈÖçÁΩÆ</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Êûö‰∏æÂåÖÊâ´Êèè</span><br><span class="line">mybatis-plus.type-enums-package&#x3D;com.coconutnut.demo.enums</span><br></pre></td></tr></table></figure>

<h2 id="ÊµãËØï-2"><a href="#ÊµãËØï-2" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInsert</span><span class="params">()</span></span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setName(<span class="string">"Âº†‰∫î"</span>);</span><br><span class="line">  user.setAge(<span class="number">30</span>);</span><br><span class="line">  user.setPassword(<span class="string">"123456"</span>);</span><br><span class="line">  user.setUserName(<span class="string">"zhangwu"</span>);</span><br><span class="line">  user.setEmail(<span class="string">"zhangwu@itcast.cn"</span>);</span><br><span class="line">  user.setSex(SexEnum.WOMAN);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">boolean</span> insert = user.insert();</span><br><span class="line">  System.out.println(insert);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËæìÂá∫</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> TimeÔºö6 ms - IDÔºöcom.coconutnut.demo.mapper.UserMapper.insert</span><br><span class="line">Execute SQLÔºö</span><br><span class="line">    INSERT </span><br><span class="line">    INTO</span><br><span class="line">        tb_user</span><br><span class="line">        ( user_name, password, name, age, email, sex, version ) </span><br><span class="line">    VALUES</span><br><span class="line">        ( &#39;zhangwu&#39;, &#39;123456&#39;, &#39;Âº†‰∫î&#39;, 30, &#39;zhangwu@itcast.cn&#39;, 2, 1 )</span><br><span class="line"></span><br><span class="line">true</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-04-24 PM7.51.09.jpg">

<h1 id="‰ª£Á†ÅÁîüÊàêÂô®"><a href="#‰ª£Á†ÅÁîüÊàêÂô®" class="headerlink" title="‰ª£Á†ÅÁîüÊàêÂô®"></a>‰ª£Á†ÅÁîüÊàêÂô®</h1><p>AutoGenerator ÊòØ MyBatis-Plus ÁöÑ‰ª£Á†ÅÁîüÊàêÂô®ÔºåÈÄöËøá AutoGenerator ÂèØ‰ª•Âø´ÈÄüÁîüÊàê Entity„ÄÅMapper„ÄÅMapperXML„ÄÅService„ÄÅController Á≠âÂêÑ‰∏™Ê®°ÂùóÁöÑ‰ª£Á†ÅÔºåÊèêÂçáÂºÄÂèëÊïàÁéá</p>
<blockquote>
<p><a href="https://www.bilibili.com/video/BV1rE41197jR?p=60" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1rE41197jR?p=60</a></p>
</blockquote>
<h1 id="MyBatisXÂø´ÈÄüÂºÄÂèëÊèí‰ª∂"><a href="#MyBatisXÂø´ÈÄüÂºÄÂèëÊèí‰ª∂" class="headerlink" title="MyBatisXÂø´ÈÄüÂºÄÂèëÊèí‰ª∂"></a>MyBatisXÂø´ÈÄüÂºÄÂèëÊèí‰ª∂</h1><p>Âü∫‰∫é IDEA ÁöÑÂø´ÈÄüÂºÄÂèëÊèí‰ª∂</p>
<p>ÂÆâË£ÖÔºöFile -&gt; Settings -&gt; PluginsÔºåÊêúÁ¥¢Âπ∂ÂÆâË£Ö</p>
<p>ÂäüËÉΩÔºöJavaÂíåÂØπÂ∫îXMLË∑≥ËΩ¨ÔºõMapperÊñπÊ≥ïËá™Âä®ÁîüÊàê XML</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mybatis_plus</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisPlusÁ¨îËÆ∞05 Êèí‰ª∂</title>
    <url>/2020/04/24/note-mybatisplus-05/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1rE41197jR" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1rE41197jR</a></p>
<p>P49~54</p>
</blockquote>
<h1 id="mybatisÁöÑÊèí‰ª∂Êú∫Âà∂"><a href="#mybatisÁöÑÊèí‰ª∂Êú∫Âà∂" class="headerlink" title="mybatisÁöÑÊèí‰ª∂Êú∫Âà∂"></a>mybatisÁöÑÊèí‰ª∂Êú∫Âà∂</h1><p>MyBatis ÂÖÅËÆ∏Âú®Â∑≤Êò†Â∞ÑËØ≠Âè•ÊâßË°åËøáÁ®ã‰∏≠ÁöÑÊüê‰∏ÄÁÇπËøõË°åÊã¶Êà™</p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåMyBatis ÂÖÅËÆ∏‰ΩøÁî®Êèí‰ª∂Êù•Êã¶Êà™ÁöÑÊñπÊ≥ïË∞ÉÁî®ÂåÖÊã¨:</p>
<ul>
<li><p>Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed) </p>
</li>
<li><p>ParameterHandler (getParameterObject, setParameters)</p>
</li>
<li><p>ResultSetHandler (handleResultSets, handleOutputParameters)</p>
</li>
<li><p>StatementHandler (prepare, parameterize, batch, update, query)</p>
</li>
</ul>
<p>ÂèØ‰ª•Êã¶Êà™Ôºö</p>
<ul>
<li>ÊâßË°åÂô®ÁöÑÊñπÊ≥ï</li>
<li>ÂèÇÊï∞ÁöÑÂ§ÑÁêÜ</li>
<li>ÁªìÊûúÈõÜÁöÑÂ§ÑÁêÜ</li>
<li>SqlËØ≠Ê≥ïÊûÑÂª∫ÁöÑÂ§ÑÁêÜ</li>
</ul>
<p>Ëá™ÂÆö‰πâÊã¶Êà™Âô®ÂèØ‰ª•ÂÆûÁé∞InterceptorÊé•Âè£ÔºåÊ≥®ÂÖ•Âà∞SpringÂÆπÂô®</p>
<h1 id="ÊâßË°åÂàÜÊûêÊèí‰ª∂"><a href="#ÊâßË°åÂàÜÊûêÊèí‰ª∂" class="headerlink" title="ÊâßË°åÂàÜÊûêÊèí‰ª∂"></a>ÊâßË°åÂàÜÊûêÊèí‰ª∂</h1><p>ÂèØÁî®‰ΩúÈòªÊñ≠ÂÖ®Ë°®Êõ¥Êñ∞„ÄÅÂà†Èô§ÁöÑÊìç‰Ωú</p>
<p>Ê≥®ÊÑè:ËØ•Êèí‰ª∂‰ªÖÈÄÇÁî®‰∫éÂºÄÂèëÁéØÂ¢ÉÔºå‰∏çÈÄÇÁî®‰∫éÁîü‰∫ßÁéØÂ¢ÉÔºàÊÄßËÉΩÈóÆÈ¢òÔºâ</p>
<h2 id="ÈÖçÁΩÆ"><a href="#ÈÖçÁΩÆ" class="headerlink" title="ÈÖçÁΩÆ"></a>ÈÖçÁΩÆ</h2><p>MybatisPlusConfig‰∏≠ÈÖçÁΩÆ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> SqlExplainInterceptor <span class="title">sqlExplainInterceptor</span><span class="params">()</span></span>&#123;</span><br><span class="line">  SqlExplainInterceptor sqlExplainInterceptor = <span class="keyword">new</span> SqlExplainInterceptor();</span><br><span class="line">  List&lt;ISqlParser&gt; sqlParserList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  sqlParserList.add(<span class="keyword">new</span> BlockAttackSqlParser());</span><br><span class="line">  sqlExplainInterceptor.setSqlParserList(sqlParserList);</span><br><span class="line">  <span class="keyword">return</span> sqlExplainInterceptor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdateAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setAge(<span class="number">20</span>);</span><br><span class="line">  <span class="keyword">int</span> result = <span class="keyword">this</span>.userMapper.update(user, <span class="keyword">null</span>);</span><br><span class="line">  System.out.println(<span class="string">"result = "</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÁªìÊûúÔºöÂÖ®Ë°®Êõ¥Êñ∞Ë¢´ÈòªÊñ≠</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Prohibition of table update operation</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-04-24 PM6.51.47.jpg">

<h1 id="ÊÄßËÉΩÂàÜÊûêÊèí‰ª∂"><a href="#ÊÄßËÉΩÂàÜÊûêÊèí‰ª∂" class="headerlink" title="ÊÄßËÉΩÂàÜÊûêÊèí‰ª∂"></a>ÊÄßËÉΩÂàÜÊûêÊèí‰ª∂</h1><p>Áî®‰∫éËæìÂá∫ÊØèÊù° SQL ËØ≠Âè•ÂèäÂÖ∂ÊâßË°åÊó∂Èó¥ÔºåÂèØ‰ª•ËÆæÁΩÆÊúÄÂ§ßÊâßË°åÊó∂Èó¥ÔºåË∂ÖËøáÊó∂Èó¥‰ºöÊäõÂá∫ÂºÇÂ∏∏</p>
<h2 id="ÈÖçÁΩÆ-1"><a href="#ÈÖçÁΩÆ-1" class="headerlink" title="ÈÖçÁΩÆ"></a>ÈÖçÁΩÆ</h2><p>‰∏§ÁßçÊñπÂºèÔºåÂèØ‰ª•ÂÉè‰∏äÈù¢‰∏ÄÊ†∑Âú®Config‰∏≠ÈÖçÁΩÆÔºå‰πüÂèØ‰ª•Âú®xml‰∏≠ÈÖçÁΩÆ</p>
<p>ËøôÈáåÁî®xmlÊñπÂºè</p>
<p>mybatis-config.xml‰∏≠</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span> <span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- SQL ÊâßË°åÊÄßËÉΩÂàÜÊûêÔºåÂºÄÂèëÁéØÂ¢É‰ΩøÁî®ÔºåÁ∫ø‰∏ä‰∏çÊé®Ëçê„ÄÇ maxTime ÊåáÁöÑÊòØ sql ÊúÄÂ§ßÊâßË°åÊó∂Èïø --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">"com.baomidou.mybatisplus.extension.plugins.PerformanceInterceptor"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxTime"</span> <span class="attr">value</span>=<span class="string">"100"</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--SQLÊòØÂê¶Ê†ºÂºèÂåñ ÈªòËÆ§false--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"format"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ÊµãËØï-1"><a href="#ÊµãËØï-1" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><p>ÊâßË°åtestSelectById()</p>
<p>ËæìÂá∫</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">TimeÔºö10 ms - IDÔºöcom.coconutnut.demo.mapper.UserMapper.selectById</span><br><span class="line">Execute SQLÔºö</span><br><span class="line">    SELECT</span><br><span class="line">        id,</span><br><span class="line">        user_name,</span><br><span class="line">        password,</span><br><span class="line">        name,</span><br><span class="line">        age,</span><br><span class="line">        email </span><br><span class="line">    FROM</span><br><span class="line">        tb_user </span><br><span class="line">    WHERE</span><br><span class="line">        id&#x3D;2 </span><br><span class="line"></span><br><span class="line">User(id&#x3D;2, userName&#x3D;lisi, password&#x3D;123456, name&#x3D;ÊùéÂõõ, age&#x3D;20, email&#x3D;test2@itcast.cn)</span><br></pre></td></tr></table></figure>

<h1 id="‰πêËßÇÈîÅÊèí‰ª∂"><a href="#‰πêËßÇÈîÅÊèí‰ª∂" class="headerlink" title="‰πêËßÇÈîÅÊèí‰ª∂"></a>‰πêËßÇÈîÅÊèí‰ª∂</h1><p>ÂΩìË¶ÅÊõ¥Êñ∞‰∏ÄÊù°ËÆ∞ÂΩïÁöÑÊó∂ÂÄôÔºåÂ∏åÊúõËøôÊù°ËÆ∞ÂΩïÊ≤°ÊúâË¢´Âà´‰∫∫Êõ¥Êñ∞</p>
<p>ÂÆûÁé∞ÊñπÂºè:</p>
<ul>
<li>ÂèñÂá∫ËÆ∞ÂΩïÊó∂ÔºåËé∑ÂèñÂΩìÂâçversion</li>
<li>Êõ¥Êñ∞Êó∂ÔºåÂ∏¶‰∏äËøô‰∏™version</li>
<li>ÊâßË°åÊõ¥Êñ∞Êó∂Ôºå set version = newVersion where version = oldVersion</li>
<li>Â¶ÇÊûúversion‰∏çÂØπÔºåÂ∞±Êõ¥Êñ∞Â§±Ë¥•</li>
</ul>
<h2 id="ÈÖçÁΩÆ-2"><a href="#ÈÖçÁΩÆ-2" class="headerlink" title="ÈÖçÁΩÆ"></a>ÈÖçÁΩÆ</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> OptimisticLockerInterceptor <span class="title">optimisticLockerInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> OptimisticLockerInterceptor();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="VersionÂ≠óÊÆµ"><a href="#VersionÂ≠óÊÆµ" class="headerlink" title="VersionÂ≠óÊÆµ"></a>VersionÂ≠óÊÆµ</h2><p>‰∏∫Ë°®Ê∑ªÂä†versionÂ≠óÊÆµÔºåÂπ∂‰∏îËÆæÁΩÆÂàùÂßãÂÄº‰∏∫1</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`tb_user`</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">COLUMN</span> <span class="string">`version`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="literal">NULL</span> <span class="keyword">AFTER</span> <span class="string">`email`</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> <span class="string">`tb_user`</span> <span class="keyword">SET</span> <span class="string">`version`</span>=<span class="string">'1'</span>;</span><br></pre></td></tr></table></figure>

<p>‰∏∫UserÂÆû‰ΩìÁ±ªÊ∑ªÂä†versionÂ≠óÊÆµÂíåÊ≥®Ëß£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Version</span></span><br><span class="line"><span class="keyword">private</span> Integer version;</span><br></pre></td></tr></table></figure>

<h2 id="ÊµãËØï-2"><a href="#ÊµãËØï-2" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdateVersion</span><span class="params">()</span></span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setAge(<span class="number">30</span>);</span><br><span class="line">  user.setId(<span class="number">2L</span>);</span><br><span class="line">  user.setVersion(<span class="number">1</span>); <span class="comment">// ÂΩìÂâçversion‰∏∫1</span></span><br><span class="line">  <span class="keyword">int</span> result = <span class="keyword">this</span>.userMapper.updateById(user);</span><br><span class="line">  System.out.println(<span class="string">"result = "</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËæìÂá∫</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> TimeÔºö2 ms - IDÔºöcom.coconutnut.demo.mapper.UserMapper.updateById</span><br><span class="line">Execute SQLÔºö</span><br><span class="line">    UPDATE</span><br><span class="line">        tb_user </span><br><span class="line">    SET</span><br><span class="line">        age&#x3D;30,</span><br><span class="line">        version&#x3D;2 </span><br><span class="line">    WHERE</span><br><span class="line">        id&#x3D;2 </span><br><span class="line">        AND version&#x3D;1</span><br><span class="line"></span><br><span class="line">result &#x3D; 1</span><br></pre></td></tr></table></figure>

<p>‰πêËßÇÈîÅÊèí‰ª∂Ê∑ªÂä†‰∫ÜversionÊù°‰ª∂ÔºåÂπ∂ËÆæÁΩÆÊñ∞ÁöÑversion‰∏∫2</p>
<img src="/images/2020/screencapture2020-04-24 PM7.07.07.jpg">

<p>Â¶ÇÊûúÂÜçÊâßË°å‰∏ÄÊ¨°</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> TimeÔºö1 ms - IDÔºöcom.coconutnut.demo.mapper.UserMapper.updateById</span><br><span class="line">Execute SQLÔºö</span><br><span class="line">    UPDATE</span><br><span class="line">        tb_user </span><br><span class="line">    SET</span><br><span class="line">        age&#x3D;30,</span><br><span class="line">        version&#x3D;2 </span><br><span class="line">    WHERE</span><br><span class="line">        id&#x3D;2 </span><br><span class="line">        AND version&#x3D;1</span><br><span class="line"></span><br><span class="line">result &#x3D; 0</span><br></pre></td></tr></table></figure>

<p>Ê≠§Êó∂versionÂ∑≤ÁªèÊòØ2Ôºå‰∏çËÉΩÊâßË°å‰∫Ü</p>
<p>Ê≠£Â∏∏ÁöÑ‰ΩøÁî®ÊñπÂºè</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdateVersion</span><span class="params">()</span></span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setId(<span class="number">2L</span>); <span class="comment">// Êü•ËØ¢Êù°‰ª∂</span></span><br><span class="line"></span><br><span class="line">  User userVersion = user.selectById(); <span class="comment">// ÂΩìÂâçÁâàÊú¨</span></span><br><span class="line">  user.setAge(<span class="number">30</span>);  <span class="comment">// Êõ¥Êñ∞ÁöÑÊï∞ÊçÆ</span></span><br><span class="line">  user.setVersion(userVersion.getVersion()); <span class="comment">// ÁâàÊú¨‰ø°ÊÅØ</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> result = <span class="keyword">this</span>.userMapper.updateById(user);</span><br><span class="line">  System.out.println(<span class="string">"result = "</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÁâπÂà´ËØ¥Êòé"><a href="#ÁâπÂà´ËØ¥Êòé" class="headerlink" title="ÁâπÂà´ËØ¥Êòé"></a>ÁâπÂà´ËØ¥Êòé</h2><ul>
<li>ÊîØÊåÅÁöÑÊï∞ÊçÆÁ±ªÂûãÂè™Êúâ:int,Integer,long,Long,Date,Timestamp,LocalDateTime</li>
<li>Êï¥Êï∞Á±ªÂûã‰∏ã newVersion = oldVersion + 1</li>
<li>newVersion ‰ºöÂõûÂÜôÂà∞ entity ‰∏≠</li>
<li>‰ªÖÊîØÊåÅ updateById(id) ‰∏é update(entity, wrapper) ÊñπÊ≥ï</li>
<li>Âú® update(entity, wrapper) ÊñπÊ≥ï‰∏ã, wrapper ‰∏çËÉΩÂ§çÁî®</li>
</ul>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mybatis_plus</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisPlusÁ¨îËÆ∞04 ActiveRecord</title>
    <url>/2020/04/24/note-mybatisplus-04/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1rE41197jR" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1rE41197jR</a></p>
<p>P40~45</p>
</blockquote>
<p>Â±û‰∫éORM(ÂØπË±°ÂÖ≥Á≥ªÊò†Â∞Ñ)Â±Ç</p>
<p>‰∏ªË¶ÅÊÄùÊÉ≥:</p>
<ul>
<li>ÊØè‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìË°®ÂØπÂ∫îÂàõÂª∫‰∏Ä‰∏™Á±ªÔºåÁ±ªÁöÑÊØè‰∏Ä‰∏™ÂØπË±°ÂÆû‰æãÂØπÂ∫î‰∫éÊï∞ÊçÆÂ∫ì‰∏≠Ë°®ÁöÑ‰∏ÄË°åËÆ∞ÂΩï;ÈÄöÂ∏∏Ë°®ÁöÑÊØè‰∏™Â≠óÊÆµÂú®Á±ª‰∏≠ÈÉΩÊúâÁõ∏Â∫îÁöÑField;</li>
<li>ActiveRecordÂêåÊó∂Ë¥üË¥£ÊääËá™Â∑±ÊåÅ‰πÖÂåñÔºåÂú®ActiveRecord‰∏≠Â∞ÅË£Ö‰∫ÜÂØπÊï∞ÊçÆÂ∫ìÁöÑËÆøÈóÆÔºåÂç≥CURD;</li>
<li>ActiveRecordÊòØ‰∏ÄÁßçÈ¢ÜÂüüÊ®°Âûã(Domain Model)ÔºåÂ∞ÅË£Ö‰∫ÜÈÉ®ÂàÜ‰∏öÂä°ÈÄªËæë;</li>
</ul>
<h1 id="ÂºÄÂêØAR"><a href="#ÂºÄÂêØAR" class="headerlink" title="ÂºÄÂêØAR"></a>ÂºÄÂêØAR</h1><p>ÂÆû‰ΩìÂØπË±°ÁªßÊâøModelÂç≥ÂèØ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@TableName</span>(<span class="string">"tb_user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Model</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TableId</span>(type = IdType.AUTO)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h1><p>‰∏çÈúÄË¶ÅUserMapper‰∫ÜÔºåÁõ¥Êé•Êü•ËØ¢</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectById</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setId(<span class="number">2L</span>);</span><br><span class="line">  User user2 = user.selectById();</span><br><span class="line">  System.out.println(user2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËøêË°åËæìÂá∫</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">User(id&#x3D;2, userName&#x3D;lisi, password&#x3D;123456, name&#x3D;ÊùéÂõõ, age&#x3D;20, email&#x3D;test2@itcast.cn)</span><br></pre></td></tr></table></figure>

<p>ÂØπÊØî‰ª•ÂâçÁöÑÊü•ËØ¢ÊñπÂºè</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectById</span><span class="params">()</span> </span>&#123; </span><br><span class="line">  User user = <span class="keyword">this</span>.userMapper.selectById(<span class="number">2L</span>);</span><br><span class="line">  System.out.println(<span class="string">"result = "</span> + user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>‰ΩøÁî®ARÂêéÔºå‰∏çÈúÄË¶ÅÊòæÁ§∫ÁöÑÊ≥®ÂÖ•UserMapperÔºå‰ΩÜÊòØËøô‰∏™Á±ªËøòÊòØÈúÄË¶ÅÁöÑ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Â¶ÇÊûúÊääËøô‰∏™Âà†‰∫ÜÂ∞±ËøêË°å‰∏ç‰∫Ü‰∫Ü</p>
<h1 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h1><h2 id="Êü•ËØ¢"><a href="#Êü•ËØ¢" class="headerlink" title="Êü•ËØ¢"></a>Êü•ËØ¢</h2><p>ÊñπÊ≥ï‰∏ÄÔºöÂêå‰∏ä</p>
<p>ÊñπÊ≥ï‰∫åÔºöÊù°‰ª∂Êü•ËØ¢</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelect</span><span class="params">()</span></span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  QueryWrapper&lt;User&gt; userQueryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">  userQueryWrapper.le(<span class="string">"age"</span>,<span class="string">"20"</span>);</span><br><span class="line">  List&lt;User&gt; users = user.selectList(userQueryWrapper);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (User user1 : users) &#123;</span><br><span class="line">    System.out.println(user1);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Êñ∞Â¢û"><a href="#Êñ∞Â¢û" class="headerlink" title="Êñ∞Â¢û"></a>Êñ∞Â¢û</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInsert</span><span class="params">()</span></span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setName(<span class="string">"ÂàòÂ§á"</span>);</span><br><span class="line">  user.setAge(<span class="number">30</span>);</span><br><span class="line">  user.setPassword(<span class="string">"123456"</span>);</span><br><span class="line">  user.setUserName(<span class="string">"liubei"</span>);</span><br><span class="line">  user.setEmail(<span class="string">"liubei@itcast.cn"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">boolean</span> insert = user.insert();</span><br><span class="line"></span><br><span class="line">  System.out.println(insert);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËøîÂõûÊèíÂÖ•ÊòØÂê¶ÊàêÂäü</p>
<img src="/images/2020/screencapture2020-04-24 PM6.15.09.jpg" width=500>

<h2 id="Êõ¥Êñ∞"><a href="#Êõ¥Êñ∞" class="headerlink" title="Êõ¥Êñ∞"></a>Êõ¥Êñ∞</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span></span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setId(<span class="number">5L</span>);</span><br><span class="line">  user.setAge(<span class="number">35</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">boolean</span> update = user.updateById();</span><br><span class="line">  System.out.println(update);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-04-24 PM6.16.55.jpg" width=500>

<p>‰πüÂèØ‰ª•Ê†πÊçÆÊù°‰ª∂ÔºàÁî®WrapperÔºâÊõ¥Êñ∞</p>
<h2 id="Âà†Èô§"><a href="#Âà†Èô§" class="headerlink" title="Âà†Èô§"></a>Âà†Èô§</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User(); user.setId(<span class="number">7L</span>);</span><br><span class="line">  <span class="keyword">boolean</span> delete = user.deleteById();</span><br><span class="line">  System.out.println(delete);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-04-24 PM6.18.54.jpg" width=500>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mybatis_plus</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisPlusÁ¨îËÆ∞03 Êù°‰ª∂ÊûÑÈÄ†Âô®</title>
    <url>/2020/04/22/note-mybatisplus-03/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1rE41197jR" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1rE41197jR</a></p>
<p>p33~39</p>
</blockquote>
<p>WrapperÊé•Âè£ÂÆûÁé∞Á±ªÈáçÁÇπÊúâAbstractWrapperÂíåAbstractChainWrapper</p>
<p>Âå∫Âà´Âú®‰∫éAbstractChainWrapperÈááÁî®lambdaË°®ËææÂºèÁºñÂÜô</p>
<h1 id="‰ΩøÁî®"><a href="#‰ΩøÁî®" class="headerlink" title="‰ΩøÁî®"></a>‰ΩøÁî®</h1><p>‰ª•allEq‰∏∫‰æã</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ËÆæÁΩÆÊù°‰ª∂</span></span><br><span class="line">Map&lt;String,Object&gt; params = <span class="keyword">new</span> HashMap&lt;&gt;(); </span><br><span class="line">params.put(<span class="string">"name"</span>, <span class="string">"Âº†‰∏â"</span>);</span><br><span class="line">params.put(<span class="string">"age"</span>, <span class="string">"20"</span>); </span><br><span class="line">params.put(<span class="string">"password"</span>, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">wrapper.allEq(params);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Êü•ËØ¢</span></span><br><span class="line">List&lt;User&gt; users = <span class="keyword">this</span>.userMapper.selectList(wrapper);</span><br><span class="line"><span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">	System.out.println(user); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËøôÊ†∑ÁîüÊàêÁöÑsqlËØ≠Âè•‰∏∫</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tb_user <span class="keyword">WHERE</span> <span class="keyword">password</span> <span class="keyword">IS</span> <span class="literal">NULL</span> <span class="keyword">AND</span> <span class="keyword">name</span> = ? <span class="keyword">AND</span> age = ?</span><br></pre></td></tr></table></figure>

<p>Á¨¨‰∫å‰∏™ÂèÇÊï∞‰∏∫falseÊó∂ÂøΩÁï•ÂÄº‰∏∫nullÁöÑ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">wrapper.allEq(params,<span class="keyword">false</span>);</span><br></pre></td></tr></table></figure>

<p>ÁîüÊàêÁöÑsqlËØ≠Âè•‰∏∫</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tb_user <span class="keyword">WHERE</span> <span class="keyword">name</span> = ? <span class="keyword">AND</span> age = ?</span><br></pre></td></tr></table></figure>

<p>ËøòÂèØ‰ª•ËÆæÁΩÆËøáÊª§Âô®</p>
<h1 id="Âü∫Êú¨ÊØîËæÉÊìç‰Ωú"><a href="#Âü∫Êú¨ÊØîËæÉÊìç‰Ωú" class="headerlink" title="Âü∫Êú¨ÊØîËæÉÊìç‰Ωú"></a>Âü∫Êú¨ÊØîËæÉÊìç‰Ωú</h1><p><a href="https://mybatis.plus/guide/wrapper.html#abstractwrapper" target="_blank" rel="noopener">ÂÆòÊñπÊñáÊ°£</a></p>
<h1 id="Ê®°Á≥äÊü•ËØ¢"><a href="#Ê®°Á≥äÊü•ËØ¢" class="headerlink" title="Ê®°Á≥äÊü•ËØ¢"></a>Ê®°Á≥äÊü•ËØ¢</h1><p>like„ÄÅnotLike„ÄÅlikeLeft„ÄÅlikeRight</p>
<p>‰æãÂ¶Ç</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line">wrapper.like(<span class="string">"name"</span>, <span class="string">"Êõπ"</span>); <span class="comment">// %Êõπ%</span></span><br><span class="line"></span><br><span class="line">List&lt;User&gt; users = <span class="keyword">this</span>.userMapper.selectList(wrapper);</span><br><span class="line"><span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">	System.out.println(user); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ÊéíÂ∫è"><a href="#ÊéíÂ∫è" class="headerlink" title="ÊéíÂ∫è"></a>ÊéíÂ∫è</h1><p>orderByÔºàÈªòËÆ§AscÔºâ„ÄÅorderByAsc„ÄÅorderByDesc</p>
<p>‰æãÂ¶Ç</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// SELECT id,user_name,password,name,age,email FROM tb_user ORDER BY age DESC</span></span><br><span class="line">wrapper.orderByDesc(<span class="string">"age"</span>);</span><br><span class="line"></span><br><span class="line">List&lt;User&gt; users = <span class="keyword">this</span>.userMapper.selectList(wrapper);</span><br><span class="line"><span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">	System.out.println(user); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ÈÄªËæëÊü•ËØ¢"><a href="#ÈÄªËæëÊü•ËØ¢" class="headerlink" title="ÈÄªËæëÊü•ËØ¢"></a>ÈÄªËæëÊü•ËØ¢</h1><p>or„ÄÅand</p>
<p>‰æãÂ¶Ç</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// SELECT id,user_name,password,name,age,email FROM tb_user WHERE name = ? OR age = ?</span></span><br><span class="line">wrapper.eq(<span class="string">"name"</span>,<span class="string">"ÊùéÂõõ"</span>).or().eq(<span class="string">"age"</span>, <span class="number">24</span>);</span><br><span class="line"></span><br><span class="line">List&lt;User&gt; users = <span class="keyword">this</span>.userMapper.selectList(wrapper);</span><br><span class="line"><span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">	System.out.println(user); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ÊåáÂÆöÊü•ËØ¢Â≠óÊÆµ"><a href="#ÊåáÂÆöÊü•ËØ¢Â≠óÊÆµ" class="headerlink" title="ÊåáÂÆöÊü•ËØ¢Â≠óÊÆµ"></a>ÊåáÂÆöÊü•ËØ¢Â≠óÊÆµ</h1><p>select</p>
<p>‰æãÂ¶Ç</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// SELECT id,name,age FROM tb_user WHERE name = ? OR age = ?</span></span><br><span class="line">wrapper.eq(<span class="string">"name"</span>, <span class="string">"ÊùéÂõõ"</span>)</span><br><span class="line">.or()</span><br><span class="line">.eq(<span class="string">"age"</span>, <span class="number">24</span>)</span><br><span class="line">.select(<span class="string">"id"</span>, <span class="string">"name"</span>, <span class="string">"age"</span>);</span><br><span class="line"></span><br><span class="line">List&lt;User&gt; users = <span class="keyword">this</span>.userMapper.selectList(wrapper);</span><br><span class="line"><span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">	System.out.println(user); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mybatis_plus</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisPlusÁ¨îËÆ∞02 ÈÖçÁΩÆ</title>
    <url>/2020/04/22/note-mybatisplus-02/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1rE41197jR" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1rE41197jR</a></p>
<p>p27~32</p>
</blockquote>
<p><a href="https://mybatis.plus/config/#Âü∫Êú¨ÈÖçÁΩÆ" target="_blank" rel="noopener">ÂÆòÊñπÊñáÊ°£</a></p>
<h1 id="Âü∫Êú¨ÈÖçÁΩÆ"><a href="#Âü∫Êú¨ÈÖçÁΩÆ" class="headerlink" title="Âü∫Êú¨ÈÖçÁΩÆ"></a>Âü∫Êú¨ÈÖçÁΩÆ</h1><h2 id="configLocation"><a href="#configLocation" class="headerlink" title="configLocation"></a>configLocation</h2><p>MyBatis ÈÖçÁΩÆÊñá‰ª∂‰ΩçÁΩÆ</p>
<p>egÔºöresourcesÊñá‰ª∂Â§π‰∏ãÊúâmybatis-config.xmlÔºåË¶ÅÂ∞ÜÂÖ∂‰Ωú‰∏∫MyBatisÈÖçÁΩÆÊñá‰ª∂</p>
<p>ÂàôÈúÄÂú®applications.properties‰∏≠ÈÖçÁΩÆ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ÊåáÂÆöÂÖ®Â±ÄÁöÑÈÖçÁΩÆÊñá‰ª∂</span><br><span class="line">mybatis-plus.config-location &#x3D; classpath:mybatis-config.xml</span><br></pre></td></tr></table></figure>

<h2 id="mapperLocations"><a href="#mapperLocations" class="headerlink" title="mapperLocations"></a>mapperLocations</h2><p>ÊåáÂÆömapperÊñá‰ª∂‰ΩçÁΩÆ</p>
<p>ÂΩìÈªòËÆ§ÁöÑMapper‰∏çÂ§üÁî®ÔºàÂ¶ÇÈúÄË¶ÅÂ§öË°®Êü•ËØ¢Êó∂ÔºâÔºåÂèØ‰ª•ÊåáÂÆöËá™ÂÆö‰πâÁöÑmapperÔºåÂú®ÈáåÈù¢ÂÜôsqlËØ≠Âè•</p>
<p>‰æãÂ¶Çresources‰∏≠Êñ∞Âª∫mybatisÊñá‰ª∂Â§πÔºåÊñ∞Âª∫‰∏Ä‰∏™UserMapper.xml</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mybatis-plus.mapper-locations &#x3D; classpath*:mybatis&#x2F;*.xml</span><br></pre></td></tr></table></figure>

<p>MavenÂ§öÊ®°ÂùóÈ°πÁõÆÁöÑÊâ´ÊèèË∑ØÂæÑÈúÄ‰ª•classpath*ÂºÄÂ§¥ÔºàÂç≥Âä†Âú®Â§ö‰∏™jarÂåÖ‰∏ãÁöÑxmlÊñá‰ª∂Ôºâ</p>
<h2 id="typeAliasesPackage"><a href="#typeAliasesPackage" class="headerlink" title="typeAliasesPackage"></a>typeAliasesPackage</h2><p>ÁªôÂåÖ‰∏≠ÁöÑÁ±ªÊ≥®ÂÜåÂà´ÂêçÔºåÊ≥®ÂÜåÂêéÂú® Mapper ÂØπÂ∫îÁöÑ XML Êñá‰ª∂‰∏≠ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®Á±ªÂêçÔºåËÄå‰∏çÁî®‰ΩøÁî®ÂÖ®ÈôêÂÆöÁöÑÁ±ªÂêç</p>
<p>‰æãÂ¶Ç</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mybatis-plus.type-aliases-package &#x3D; cn.itcast.mp.pojo</span><br></pre></td></tr></table></figure>

<h1 id="ËøõÈò∂ÈÖçÁΩÆ"><a href="#ËøõÈò∂ÈÖçÁΩÆ" class="headerlink" title="ËøõÈò∂ÈÖçÁΩÆ"></a>ËøõÈò∂ÈÖçÁΩÆ</h1><p>Â§ßÈÉΩ‰∏∫ MyBatis ÂéüÁîüÊîØÊåÅÁöÑÈÖçÁΩÆ</p>
<p>Ê≥®ÊÑèÔºöÂ¶ÇÊûúÂà∂ÂÆö‰∫ÜÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂ÔºåÈúÄË¶ÅÂú®ÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÖçÁΩÆÔºåÂíåapplication.properties‰∏çËÉΩÂÖ±Â≠ò</p>
<h2 id="mapUnderscoreToCamelCase"><a href="#mapUnderscoreToCamelCase" class="headerlink" title="mapUnderscoreToCamelCase"></a>mapUnderscoreToCamelCase</h2><p>ÊòØÂê¶ÂºÄÂêØËá™Âä®È©ºÂ≥∞ÂëΩÂêçËßÑÂàôÊò†Â∞Ñ</p>
<h2 id="cacheEnabled"><a href="#cacheEnabled" class="headerlink" title="cacheEnabled"></a>cacheEnabled</h2><p>ÂºÄÂêØMybatis‰∫åÁ∫ßÁºìÂ≠òÔºåÈªòËÆ§‰∏∫ true</p>
<h1 id="DB-Á≠ñÁï•ÈÖçÁΩÆ"><a href="#DB-Á≠ñÁï•ÈÖçÁΩÆ" class="headerlink" title="DB Á≠ñÁï•ÈÖçÁΩÆ"></a>DB Á≠ñÁï•ÈÖçÁΩÆ</h1><h2 id="idType"><a href="#idType" class="headerlink" title="idType"></a>idType</h2><p>ÂÖ®Â±ÄÈªòËÆ§‰∏ªÈîÆÁ±ªÂûãÔºåËÆæÁΩÆÂêéÔºåÂç≥ÂèØÁúÅÁï•ÂÆû‰ΩìÂØπË±°‰∏≠ÁöÑ@TableId(type = IdType.AUTO)ÈÖçÁΩÆ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mybatis-plus.global-config.db-config.id-type &#x3D; auto</span><br></pre></td></tr></table></figure>

<h2 id="tablePrefix"><a href="#tablePrefix" class="headerlink" title="tablePrefix"></a>tablePrefix</h2><p>ÊåáÂÆöË°®ÂêçÂâçÁºÄÔºåÂÖ®Â±ÄÈÖçÁΩÆÂêéÂèØÁúÅÁï•@TableName()ÈÖçÁΩÆ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mybatis-plus.global-config.db-config.table-prefix &#x3D; tb_</span><br></pre></td></tr></table></figure>

<p>Â¶ÇÔºåUserÁ±ªÈªòËÆ§‰ºöÂéªÊâæuserË°®ÔºåÂ¶ÇÊûúË¶ÅÊâætb_userË°®ÔºåÈúÄË¶Å‰ΩøÁî®Ê≥®Ëß£ÔºåÊàñËÄÖÂÖ®Â±ÄÈÖçÁΩÆÂâçÁºÄ</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mybatis_plus</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisPlusÁ¨îËÆ∞01 CRUD</title>
    <url>/2020/04/21/note-mybatisplus-01/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1rE41197jR" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1rE41197jR</a></p>
<p>p1~25</p>
</blockquote>
<h1 id="Êï∞ÊçÆÂ∫ìÂáÜÂ§á"><a href="#Êï∞ÊçÆÂ∫ìÂáÜÂ§á" class="headerlink" title="Êï∞ÊçÆÂ∫ìÂáÜÂ§á"></a>Êï∞ÊçÆÂ∫ìÂáÜÂ§á</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ÂàõÂª∫ÊµãËØïË°®</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`tb_user`</span> (</span><br><span class="line"><span class="string">`id`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'‰∏ªÈîÆID'</span>, <span class="string">`user_name`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'Áî®Êà∑Âêç'</span>, <span class="string">`password`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'ÂØÜÁ†Å'</span>,</span><br><span class="line"><span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'ÂßìÂêç'</span>,</span><br><span class="line"><span class="string">`age`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'Âπ¥ÈæÑ'</span>, <span class="string">`email`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'ÈÇÆÁÆ±'</span>, PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">1</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ÊèíÂÖ•ÊµãËØïÊï∞ÊçÆ</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`tb_user`</span> (<span class="string">`id`</span>, <span class="string">`user_name`</span>, <span class="string">`password`</span>, <span class="string">`name`</span>, <span class="string">`age`</span>, <span class="string">`email`</span>) <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'zhangsan'</span>, <span class="string">'123456'</span>, <span class="string">'Âº†‰∏â'</span>, <span class="string">'18'</span>, <span class="string">'test1@itcast.cn'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`tb_user`</span> (<span class="string">`id`</span>, <span class="string">`user_name`</span>, <span class="string">`password`</span>, <span class="string">`name`</span>, <span class="string">`age`</span>, <span class="string">`email`</span>) <span class="keyword">VALUES</span> (<span class="string">'2'</span>, <span class="string">'lisi'</span>, <span class="string">'123456'</span>, <span class="string">'ÊùéÂõõ'</span>, <span class="string">'20'</span>, <span class="string">'test2@itcast.cn'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`tb_user`</span> (<span class="string">`id`</span>, <span class="string">`user_name`</span>, <span class="string">`password`</span>, <span class="string">`name`</span>, <span class="string">`age`</span>, <span class="string">`email`</span>) <span class="keyword">VALUES</span> (<span class="string">'3'</span>, <span class="string">'wangwu'</span>, <span class="string">'123456'</span>, <span class="string">'Áéã‰∫î'</span>, <span class="string">'28'</span>, <span class="string">'test3@itcast.cn'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`tb_user`</span> (<span class="string">`id`</span>, <span class="string">`user_name`</span>, <span class="string">`password`</span>, <span class="string">`name`</span>, <span class="string">`age`</span>, <span class="string">`email`</span>) <span class="keyword">VALUES</span> (<span class="string">'4'</span>, <span class="string">'zhaoliu'</span>, <span class="string">'123456'</span>, <span class="string">'ËµµÂÖ≠'</span>, <span class="string">'21'</span>, <span class="string">'test4@itcast.cn'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`tb_user`</span> (<span class="string">`id`</span>, <span class="string">`user_name`</span>, <span class="string">`password`</span>, <span class="string">`name`</span>, <span class="string">`age`</span>, <span class="string">`email`</span>) <span class="keyword">VALUES</span> (<span class="string">'5'</span>, <span class="string">'sunqi'</span>, <span class="string">'123456'</span>, <span class="string">'Â≠ô‰∏É'</span>, <span class="string">'24'</span>, <span class="string">'test5@itcast.cn'</span>);</span><br></pre></td></tr></table></figure>

<h1 id="ÂàõÂª∫Â∑•Á®ã"><a href="#ÂàõÂª∫Â∑•Á®ã" class="headerlink" title="ÂàõÂª∫Â∑•Á®ã"></a>ÂàõÂª∫Â∑•Á®ã</h1><h2 id="ÂØºÂÖ•‰æùËµñ"><a href="#ÂØºÂÖ•‰æùËµñ" class="headerlink" title="ÂØºÂÖ•‰æùËµñ"></a>ÂØºÂÖ•‰æùËµñ</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--mybatis-plusÁöÑspringbootÊîØÊåÅ--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--mysqlÈ©±Âä®--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--ÁÆÄÂåñbean‰ª£Á†ÅÁöÑÂ∑•ÂÖ∑ÂåÖ--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ÈÖçÁΩÆÊñá‰ª∂"><a href="#ÈÖçÁΩÆÊñá‰ª∂" class="headerlink" title="ÈÖçÁΩÆÊñá‰ª∂"></a>ÈÖçÁΩÆÊñá‰ª∂</h2><h3 id="log4j-properties"><a href="#log4j-properties" class="headerlink" title="log4j.properties"></a>log4j.properties</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">log4j.rootLogger</span>=<span class="string">DEBUG,A1</span></span><br><span class="line"><span class="meta">log4j.appender.A1</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.A1.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.A1.layout.ConversionPattern</span>=<span class="string">[%t] [%c]-[%p] %m%n</span></span><br></pre></td></tr></table></figure>

<h3 id="application-properties"><a href="#application-properties" class="headerlink" title="application.properties"></a>application.properties</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">spring.application.name</span> = <span class="string">itcast-mp-springboot</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/groot? useUnicode=true&amp;characterEncoding=utf8&amp;autoReconnect=true&amp;allowMultiQueries=true&amp;useSSL=false</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">iamgroot</span></span><br></pre></td></tr></table></figure>

<h2 id="ÂÆû‰ΩìÁ±ª"><a href="#ÂÆû‰ΩìÁ±ª" class="headerlink" title="ÂÆû‰ΩìÁ±ª"></a>ÂÆû‰ΩìÁ±ª</h2><p>‰ΩøÁî®lombokÊ≥®Ëß£ÁîüÊàêget„ÄÅsetÊñπÊ≥ï</p>
<p>‰ΩøÁî®MybatisPlusÊ≥®Ëß£ÊåáÂÆöË°®Âêç</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coconutnut.demo.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@TableName</span>(<span class="string">"tb_user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  	<span class="meta">@TableId</span>(type = IdType.AUTO)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Áî®@TableIdÊåáÂÆöidÁöÑÂ¢ûÈïøÁ≠ñÁï•</p>
<h3 id="TableField"><a href="#TableField" class="headerlink" title="@TableField"></a>@TableField</h3><p>ÂèØËß£ÂÜ≥ÁöÑÈóÆÈ¢òÔºö</p>
<ol>
<li><p>ÂØπË±°‰∏≠ÁöÑÂ±ûÊÄßÂêçÂíåÂ≠óÊÆµÂêç‰∏ç‰∏ÄËá¥ÁöÑÈóÆÈ¢ò(ÈùûÈ©ºÂ≥∞)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@TableField</span>(value = <span class="string">"email"</span>)</span><br><span class="line"><span class="keyword">private</span> String mail;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ÂØπË±°‰∏≠ÁöÑÂ±ûÊÄßÂ≠óÊÆµÂú®Ë°®‰∏≠‰∏çÂ≠òÂú®ÁöÑÈóÆÈ¢ò</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@TableField</span>(exist = <span class="keyword">false</span>)</span><br><span class="line"><span class="keyword">private</span> String address;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Êü•ËØ¢Êó∂‰∏çËøîÂõûËØ•Â≠óÊÆµÁöÑÂÄº</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@TableField</span>(select = <span class="keyword">false</span>)</span><br><span class="line"><span class="keyword">private</span> String password;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="MapperÊé•Âè£"><a href="#MapperÊé•Âè£" class="headerlink" title="MapperÊé•Âè£"></a>MapperÊé•Âè£</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coconutnut.demo.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.coconutnut.demo.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="SpringBootÂêØÂä®Á±ª"><a href="#SpringBootÂêØÂä®Á±ª" class="headerlink" title="SpringBootÂêØÂä®Á±ª"></a>SpringBootÂêØÂä®Á±ª</h2><p>‰ΩøÁî®@MapperScanËÆæÁΩÆmapperÊé•Âè£ÁöÑÊâ´ÊèèÂåÖ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coconutnut.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@MapperScan</span>(<span class="string">"com.coconutnut.demo.mapper"</span>) </span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(DemoApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="È°πÁõÆÁªìÊûÑ"><a href="#È°πÁõÆÁªìÊûÑ" class="headerlink" title="È°πÁõÆÁªìÊûÑ"></a>È°πÁõÆÁªìÊûÑ</h2><img src="/images/2020/screencapture2020-04-21 PM12.22.59.jpg" width=300>

<h2 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coconutnut.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.coconutnut.demo.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.coconutnut.demo.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">SpringBootTest</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">DemoApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;User&gt; userList = userMapper.selectList(<span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËæìÂá∫</p>
<img src="/images/2020/screencapture2020-04-21 PM12.19.07.jpg">

<h2 id="DEBUG-‰æùËµñÈáçÂ§ç"><a href="#DEBUG-‰æùËµñÈáçÂ§ç" class="headerlink" title="DEBUG ‰æùËµñÈáçÂ§ç"></a>DEBUG ‰æùËµñÈáçÂ§ç</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SLF4J: Class path contains multiple SLF4J bindings.</span><br></pre></td></tr></table></figure>

<p>Âà†Èô§‰æùËµñ‰∏≠ÁöÑ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.slf4j&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;slf4j-log4j12&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<h1 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h1><p>Êü•ÁúãUserMapperÁªßÊâøÁöÑBaseMapperÊ∫êÁ†Å</p>
<img src="/images/2020/screencapture2020-04-21 PM12.28.46.jpg">

<p>CRUDÊñπÊ≥ïÈÉΩÊúâ‰∫Ü</p>
<p>ÂÆòÁΩëÊñáÊ°£</p>
<blockquote>
<p><a href="https://mybatis.plus/guide/crud-interface.html#mapper-crud-Êé•Âè£" target="_blank" rel="noopener">https://mybatis.plus/guide/crud-interface.html#mapper-crud-%E6%8E%A5%E5%8F%A3</a></p>
</blockquote>
<p>Áõ¥Êé•ÊµãËØï</p>
<h2 id="ÊèíÂÖ•"><a href="#ÊèíÂÖ•" class="headerlink" title="ÊèíÂÖ•"></a>ÊèíÂÖ•</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ÊèíÂÖ•‰∏ÄÊù°ËÆ∞ÂΩï</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">insert</span><span class="params">(T entity)</span></span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coconutnut.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.coconutnut.demo.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.coconutnut.demo.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">SpringBootTest</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">TestUserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInsert</span><span class="params">()</span></span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setAge(<span class="number">20</span>);</span><br><span class="line">        user.setUserName(<span class="string">"zhangsi"</span>);</span><br><span class="line">        user.setName(<span class="string">"Âº†Âõõ"</span>);</span><br><span class="line">        user.setEmail(<span class="string">"zhangsi@163.com"</span>);</span><br><span class="line">        user.setPassword(<span class="string">"123456"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> result = <span class="keyword">this</span>.userMapper.insert(user); <span class="comment">// ËøîÂõûÁöÑresultÊòØÂèóÂΩ±ÂìçÁöÑË°åÊï∞ÔºåÂπ∂‰∏çÊòØËá™Â¢ûÂêéÁöÑid</span></span><br><span class="line">        System.out.println(<span class="string">"result = "</span> + result);</span><br><span class="line">        System.out.println(user.getId()); <span class="comment">// Ëá™Â¢ûÂêéÁöÑid‰ºöÂõûÂ°´Âà∞ÂØπË±°‰∏≠</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËøêË°åÂêéÔºåÊï∞ÊçÆÂ∫ìÂèòÂåñ</p>
<img src="/images/2020/screencapture2020-04-21 PM12.57.42.jpg">

<p>ËæìÂá∫</p>
<img src="/images/2020/screencapture2020-04-21 PM12.57.29.jpg">

<h2 id="Êõ¥Êñ∞"><a href="#Êõ¥Êñ∞" class="headerlink" title="Êõ¥Êñ∞"></a>Êõ¥Êñ∞</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Ê†πÊçÆ whereEntity Êù°‰ª∂ÔºåÊõ¥Êñ∞ËÆ∞ÂΩï</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">update</span><span class="params">(@Param(Constants.ENTITY)</span> T entity, @<span class="title">Param</span><span class="params">(Constants.WRAPPER)</span> Wrapper&lt;T&gt; updateWrapper)</span>;</span><br><span class="line"><span class="comment">// Ê†πÊçÆ ID ‰øÆÊîπ</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">updateById</span><span class="params">(@Param(Constants.ENTITY)</span> T entity)</span>;</span><br></pre></td></tr></table></figure>

<h3 id="Ê†πÊçÆidÊõ¥Êñ∞"><a href="#Ê†πÊçÆidÊõ¥Êñ∞" class="headerlink" title="Ê†πÊçÆidÊõ¥Êñ∞"></a>Ê†πÊçÆidÊõ¥Êñ∞</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdateById</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setId(<span class="number">1L</span>);</span><br><span class="line">  user.setAge(<span class="number">21</span>);</span><br><span class="line">  <span class="comment">//Ê†πÊçÆidÊõ¥Êñ∞ÔºåÊõ¥Êñ∞‰∏ç‰∏∫nullÁöÑÂ≠óÊÆµ</span></span><br><span class="line">  <span class="keyword">this</span>.userMapper.updateById(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÂêé</p>
<img src="/images/2020/screencapture2020-04-21 PM2.29.48.jpg">

<h3 id="Ê†πÊçÆÊù°‰ª∂Êõ¥Êñ∞"><a href="#Ê†πÊçÆÊù°‰ª∂Êõ¥Êñ∞" class="headerlink" title="Ê†πÊçÆÊù°‰ª∂Êõ¥Êñ∞"></a>Ê†πÊçÆÊù°‰ª∂Êõ¥Êñ∞</h3><h4 id="QueryWrapper"><a href="#QueryWrapper" class="headerlink" title="QueryWrapper"></a>QueryWrapper</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setAge(<span class="number">22</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Êõ¥Êñ∞ÁöÑÊù°‰ª∂</span></span><br><span class="line">  QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">  <span class="comment">// wrapper.eq("id", 6);</span></span><br><span class="line">  wrapper.eq(<span class="string">"user_name"</span>,<span class="string">"zhangsan"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ÊâßË°åÊõ¥Êñ∞Êìç‰Ωú</span></span><br><span class="line">  <span class="keyword">int</span> result = <span class="keyword">this</span>.userMapper.update(user, wrapper);</span><br><span class="line">  System.out.println(<span class="string">"result = "</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>wrapper‰∏≠ËÆæÁΩÆÂ±ûÊÄßÁî®ÁöÑÊòØmysqlË°®‰∏≠ÁöÑÂêçÁß∞</p>
<p>ÊâßË°åÂêé</p>
<img src="/images/2020/screencapture2020-04-21 PM2.35.03.jpg">

<h4 id="UpdateWrapper"><a href="#UpdateWrapper" class="headerlink" title="UpdateWrapper"></a>UpdateWrapper</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">//Êõ¥Êñ∞ÁöÑÊù°‰ª∂‰ª•ÂèäÂ≠óÊÆµ</span></span><br><span class="line">  UpdateWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> UpdateWrapper&lt;&gt;();</span><br><span class="line">  wrapper.eq(<span class="string">"id"</span>, <span class="number">6</span>).set(<span class="string">"age"</span>, <span class="number">23</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ÊâßË°åÊõ¥Êñ∞Êìç‰Ωú</span></span><br><span class="line">  <span class="keyword">int</span> result = <span class="keyword">this</span>.userMapper.update(<span class="keyword">null</span>, wrapper);</span><br><span class="line">  System.out.println(<span class="string">"result = "</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÂêé</p>
<img src="/images/2020/screencapture2020-04-21 PM2.37.47.jpg">

<h2 id="Âà†Èô§"><a href="#Âà†Èô§" class="headerlink" title="Âà†Èô§"></a>Âà†Èô§</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Ê†πÊçÆ entity Êù°‰ª∂ÔºåÂà†Èô§ËÆ∞ÂΩï</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">delete</span><span class="params">(@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; wrapper)</span>;</span><br><span class="line"><span class="comment">// Âà†Èô§ÔºàÊ†πÊçÆID ÊâπÈáèÂà†Èô§Ôºâ</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">deleteBatchIds</span><span class="params">(@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class="line"><span class="comment">// Ê†πÊçÆ ID Âà†Èô§</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">deleteById</span><span class="params">(Serializable id)</span></span>;</span><br><span class="line"><span class="comment">// Ê†πÊçÆ columnMap Êù°‰ª∂ÔºåÂà†Èô§ËÆ∞ÂΩï</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">deleteByMap</span><span class="params">(@Param(Constants.COLUMN_MAP)</span> Map&lt;String, Object&gt; columnMap)</span>;</span><br></pre></td></tr></table></figure>

<h3 id="deleteById"><a href="#deleteById" class="headerlink" title="deleteById"></a>deleteById</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeleteById</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> result = <span class="keyword">this</span>.userMapper.deleteById(<span class="number">6L</span>);</span><br><span class="line">  System.out.println(<span class="string">"result = "</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÂêé</p>
<img src="/images/2020/screencapture2020-04-21 PM2.41.34.jpg">

<h3 id="deleteByMap"><a href="#deleteByMap" class="headerlink" title="deleteByMap"></a>deleteByMap</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeleteByMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Â∞ÜcolumnMap‰∏≠ÁöÑÂÖÉÁ¥†ËÆæÁΩÆ‰∏∫Âà†Èô§ÁöÑÊù°‰ª∂ÔºåÂ§ö‰∏™‰πãÈó¥‰∏∫andÂÖ≥Á≥ª</span></span><br><span class="line">  Map&lt;String, Object&gt; columnMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">  columnMap.put(<span class="string">"age"</span>,<span class="number">20</span>);</span><br><span class="line">  columnMap.put(<span class="string">"name"</span>,<span class="string">"Âº†‰∏â"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> result = <span class="keyword">this</span>.userMapper.deleteByMap(columnMap);</span><br><span class="line">  System.out.println(<span class="string">"result = "</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÂêé</p>
<img src="/images/2020/screencapture2020-04-21 PM2.43.36.jpg">

<p>Ê≤°ÊúâÁ¨¶ÂêàÊù°‰ª∂ÁöÑ</p>
<h3 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// Áî®Ê≥ï1</span></span><br><span class="line"><span class="comment">//        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();</span></span><br><span class="line"><span class="comment">//        wrapper.eq("user_name","zhangsan");</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Áî®Ê≥ï2</span></span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setAge(<span class="number">20</span>);</span><br><span class="line">  user.setName(<span class="string">"Âº†‰∏â"</span>);</span><br><span class="line">  <span class="comment">// Â∞ÜÂÆû‰ΩìÂØπË±°ËøõË°åÂåÖË£ÖÔºåÂåÖË£Ö‰∏∫Êìç‰ΩúÊù°‰ª∂</span></span><br><span class="line">  QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;(user);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> result = <span class="keyword">this</span>.userMapper.delete(wrapper);</span><br><span class="line">  System.out.println(<span class="string">"result = "</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Êé®Ëçê‰ΩøÁî®Áî®Ê≥ï2</p>
<h3 id="deleteByIds"><a href="#deleteByIds" class="headerlink" title="deleteByIds"></a>deleteByIds</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeleteByIds</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> result = <span class="keyword">this</span>.userMapper.deleteBatchIds(Arrays.asList(<span class="number">1L</span>,<span class="number">10L</span>,<span class="number">20L</span>)); </span><br><span class="line">  System.out.println(<span class="string">"result = "</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Êü•ËØ¢"><a href="#Êü•ËØ¢" class="headerlink" title="Êü•ËØ¢"></a>Êü•ËØ¢</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Ê†πÊçÆ ID Êü•ËØ¢</span></span><br><span class="line"><span class="function">T <span class="title">selectById</span><span class="params">(Serializable id)</span></span>;</span><br><span class="line"><span class="comment">// Ê†πÊçÆ entity Êù°‰ª∂ÔºåÊü•ËØ¢‰∏ÄÊù°ËÆ∞ÂΩï</span></span><br><span class="line"><span class="function">T <span class="title">selectOne</span><span class="params">(@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Êü•ËØ¢ÔºàÊ†πÊçÆID ÊâπÈáèÊü•ËØ¢Ôºâ</span></span><br><span class="line"><span class="function">List&lt;T&gt; <span class="title">selectBatchIds</span><span class="params">(@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class="line"><span class="comment">// Ê†πÊçÆ entity Êù°‰ª∂ÔºåÊü•ËØ¢ÂÖ®ÈÉ®ËÆ∞ÂΩï</span></span><br><span class="line"><span class="function">List&lt;T&gt; <span class="title">selectList</span><span class="params">(@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// Êü•ËØ¢ÔºàÊ†πÊçÆ columnMap Êù°‰ª∂Ôºâ</span></span><br><span class="line"><span class="function">List&lt;T&gt; <span class="title">selectByMap</span><span class="params">(@Param(Constants.COLUMN_MAP)</span> Map&lt;String, Object&gt; columnMap)</span>;</span><br><span class="line"><span class="comment">// Ê†πÊçÆ Wrapper Êù°‰ª∂ÔºåÊü•ËØ¢ÂÖ®ÈÉ®ËÆ∞ÂΩï</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; selectMaps(<span class="meta">@Param</span>(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper);</span><br><span class="line"><span class="comment">// Ê†πÊçÆ Wrapper Êù°‰ª∂ÔºåÊü•ËØ¢ÂÖ®ÈÉ®ËÆ∞ÂΩï„ÄÇÊ≥®ÊÑèÔºö Âè™ËøîÂõûÁ¨¨‰∏Ä‰∏™Â≠óÊÆµÁöÑÂÄº</span></span><br><span class="line"><span class="function">List&lt;Object&gt; <span class="title">selectObjs</span><span class="params">(@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Ê†πÊçÆ entity Êù°‰ª∂ÔºåÊü•ËØ¢ÂÖ®ÈÉ®ËÆ∞ÂΩïÔºàÂπ∂ÁøªÈ°µÔºâ</span></span><br><span class="line"><span class="function">IPage&lt;T&gt; <span class="title">selectPage</span><span class="params">(IPage&lt;T&gt; page, @Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// Ê†πÊçÆ Wrapper Êù°‰ª∂ÔºåÊü•ËØ¢ÂÖ®ÈÉ®ËÆ∞ÂΩïÔºàÂπ∂ÁøªÈ°µÔºâ</span></span><br><span class="line">IPage&lt;Map&lt;String, Object&gt;&gt; selectMapsPage(IPage&lt;T&gt; page, <span class="meta">@Param</span>(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper);</span><br><span class="line"><span class="comment">// Ê†πÊçÆ Wrapper Êù°‰ª∂ÔºåÊü•ËØ¢ÊÄªËÆ∞ÂΩïÊï∞</span></span><br><span class="line"><span class="function">Integer <span class="title">selectCount</span><span class="params">(@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br></pre></td></tr></table></figure>

<h3 id="selectById"><a href="#selectById" class="headerlink" title="selectById"></a>selectById</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectById</span><span class="params">()</span> </span>&#123; </span><br><span class="line">  User user = <span class="keyword">this</span>.userMapper.selectById(<span class="number">2L</span>);</span><br><span class="line">  System.out.println(<span class="string">"result = "</span> + user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÂêé</p>
<img src="/images/2020/screencapture2020-04-21 PM2.52.44.jpg">

<p>Ê≤°Êü•Âà∞‰∏∫null</p>
<h3 id="selectOne"><a href="#selectOne" class="headerlink" title="selectOne"></a>selectOne</h3><p>‰∏çÂ≠òÂú®ËøîÂõûnull</p>
<p>Êü•Âà∞Â§öÊù°Êä•Èîô</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectOne</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;User&gt;();</span><br><span class="line">  wrapper.eq(<span class="string">"name"</span>, <span class="string">"ÊùéÂõõ"</span>);</span><br><span class="line">  User user = <span class="keyword">this</span>.userMapper.selectOne(wrapper);</span><br><span class="line">  System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËæìÂá∫</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">User(id&#x3D;2, userName&#x3D;lisi, password&#x3D;123456, name&#x3D;ÊùéÂõõ, age&#x3D;20, email&#x3D;test2@itcast.cn)</span><br></pre></td></tr></table></figure>

<h3 id="selectBatchIds"><a href="#selectBatchIds" class="headerlink" title="selectBatchIds"></a>selectBatchIds</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectBatchIds</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  List&lt;User&gt; users = <span class="keyword">this</span>.userMapper.selectBatchIds(Arrays.asList(<span class="number">2L</span>, <span class="number">3L</span>, <span class="number">100L</span>));</span><br><span class="line">  <span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÂêé</p>
<img src="/images/2020/screencapture2020-04-21 PM2.54.08.jpg">

<h3 id="selectCount"><a href="#selectCount" class="headerlink" title="selectCount"></a>selectCount</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;User&gt;();</span><br><span class="line">  wrapper.gt(<span class="string">"age"</span>, <span class="number">23</span>); <span class="comment">// Âπ¥ÈæÑÂ§ß‰∫é23Â≤Å</span></span><br><span class="line">  Integer count = <span class="keyword">this</span>.userMapper.selectCount(wrapper);</span><br><span class="line">  System.out.println(<span class="string">"count = "</span> + count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËæìÂá∫</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">count &#x3D; 2</span><br></pre></td></tr></table></figure>

<h3 id="selectList"><a href="#selectList" class="headerlink" title="selectList"></a>selectList</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;User&gt;();</span><br><span class="line">  wrapper.gt(<span class="string">"age"</span>, <span class="number">23</span>); <span class="comment">// Âπ¥ÈæÑÂ§ß‰∫é23Â≤Å</span></span><br><span class="line">  <span class="comment">//Ê†πÊçÆÊù°‰ª∂Êü•ËØ¢Êï∞ÊçÆ</span></span><br><span class="line">  List&lt;User&gt; users = <span class="keyword">this</span>.userMapper.selectList(wrapper);</span><br><span class="line">  <span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">    System.out.println(<span class="string">"user = "</span> + user);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÂêé</p>
<img src="/images/2020/screencapture2020-04-21 PM3.03.34.jpg">

<h3 id="selectPage"><a href="#selectPage" class="headerlink" title="selectPage"></a>selectPage</h3><p>ÈÖçÁΩÆÂàÜÈ°µÊèí‰ª∂</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan</span>(<span class="string">"com.coconutnut.demo.mapper"</span>) <span class="comment">// ËÆæÁΩÆmapperÊé•Âè£ÁöÑÊâ´ÊèèÂåÖ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PaginationInterceptor <span class="title">paginationInterceptor</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PaginationInterceptor();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Êúâ‰∫ÜËøô‰∏™ÈÖçÁΩÆÁ±ª‰πãÂêéÔºåDemoApplication‰∏≠ÁöÑ@MapperScanÂèØ‰ª•ÂéªÊéâ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectPage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;User&gt;();</span><br><span class="line">  wrapper.gt(<span class="string">"age"</span>, <span class="number">20</span>); <span class="comment">// Âπ¥ÈæÑÂ§ß‰∫é20Â≤Å</span></span><br><span class="line">  Page&lt;User&gt; page = <span class="keyword">new</span> Page&lt;&gt;(<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">  IPage&lt;User&gt; iPage = <span class="keyword">this</span>.userMapper.selectPage(page, wrapper);</span><br><span class="line"></span><br><span class="line">  System.out.println(<span class="string">"Êï∞ÊçÆÊÄªÊù°Êï∞:"</span> + iPage.getTotal());</span><br><span class="line">  System.out.println(<span class="string">"ÊÄªÈ°µÊï∞:"</span> + iPage.getPages());</span><br><span class="line">  List&lt;User&gt; users = iPage.getRecords();</span><br><span class="line">  <span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">    System.out.println(<span class="string">"user = "</span> + user);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÂêé</p>
<img src="/images/2020/screencapture2020-04-21 PM3.11.25.jpg">

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mybatis_plus</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloudÁ¨îËÆ∞05 OpenFeignÊúçÂä°Ê∂àË¥πËÄÖ</title>
    <url>/2020/04/21/note-springcloud-05/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://blog.csdn.net/ThinkWon/article/details/103735751" target="_blank" rel="noopener">https://blog.csdn.net/ThinkWon/article/details/103735751</a></p>
</blockquote>
<p>Spring Cloud OpenFeign ÊòØÂ£∞ÊòéÂºèÁöÑÊúçÂä°Ë∞ÉÁî®Â∑•ÂÖ∑ÔºåÂÆÉÊï¥Âêà‰∫ÜRibbonÂíåHystrixÔºåÊã•ÊúâË¥üËΩΩÂùáË°°ÂíåÊúçÂä°ÂÆπÈîôÂäüËÉΩ</p>
<h1 id="ÂàõÂª∫feign-serviceÊ®°Âùó"><a href="#ÂàõÂª∫feign-serviceÊ®°Âùó" class="headerlink" title="ÂàõÂª∫feign-serviceÊ®°Âùó"></a>ÂàõÂª∫feign-serviceÊ®°Âùó</h1><h2 id="‰æùËµñ"><a href="#‰æùËµñ" class="headerlink" title="‰æùËµñ"></a>‰æùËµñ</h2><p>ÊïôÁ®ãÁªôÁöÑ‰æùËµñÊòØ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Êç¢ÊàêconsulÊ≥®ÂÜå‰∏≠ÂøÉÔºåÊîπÊàê</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-consul-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÂèëÁé∞Ê≤°Êúâspring cloudÁâàÊú¨Âíå‰æùËµñÁÆ°ÁêÜÔºåÂä†‰∏ä</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>Hoxton.RELEASE<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Êü•ÁúãÂè≥‰æßMavenÊ†è‰∏≠Ê≤°ÊúâÁ∫¢Á∫ø</p>
<p>‰∏ã‰∏ÄÊ≠•</p>
<h2 id="ÈÖçÁΩÆ"><a href="#ÈÖçÁΩÆ" class="headerlink" title="ÈÖçÁΩÆ"></a>ÈÖçÁΩÆ</h2><p>ÊïôÁ®ãÁªôÁöÑÈÖçÁΩÆ</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8701</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">feign-service</span></span><br><span class="line"></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8001/eureka/</span></span><br></pre></td></tr></table></figure>

<p>Êç¢Êàêconsul</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#eureka:</span></span><br><span class="line"><span class="comment">#  client:</span></span><br><span class="line"><span class="comment">#    register-with-eureka: true</span></span><br><span class="line"><span class="comment">#    fetch-registry: true</span></span><br><span class="line"><span class="comment">#    service-url:</span></span><br><span class="line"><span class="comment">#      defaultZone: http://localhost:8001/eureka/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">cloud:</span></span><br><span class="line">  <span class="attr">consul:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">8500</span></span><br><span class="line">    <span class="attr">discovery:</span></span><br><span class="line">      <span class="attr">service-name:</span> <span class="string">$&#123;spring.application.name&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="EnableFeignClientsÂêØÂä®ÂäüËÉΩ"><a href="#EnableFeignClientsÂêØÂä®ÂäüËÉΩ" class="headerlink" title="@EnableFeignClientsÂêØÂä®ÂäüËÉΩ"></a>@EnableFeignClientsÂêØÂä®ÂäüËÉΩ</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@EnableFeignClients</span><br><span class="line">@EnableDiscoveryClient</span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class FeignServiceApplication &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(FeignServiceApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Êé•Âè£ÂíåÊéßÂà∂Âô®"><a href="#Êé•Âè£ÂíåÊéßÂà∂Âô®" class="headerlink" title="Êé•Âè£ÂíåÊéßÂà∂Âô®"></a>Êé•Âè£ÂíåÊéßÂà∂Âô®</h2><p>Ê†πÊçÆÊ∫êÁ†ÅË°•ÈΩêÂÖ∂ÂÆÉ‰ª£Á†Å</p>
<img src="/images/2020/screencapture2020-04-21 AM9.49.59.jpg" width=300>

<h1 id="Ë¥üËΩΩÂùáË°°"><a href="#Ë¥üËΩΩÂùáË°°" class="headerlink" title="Ë¥üËΩΩÂùáË°°"></a>Ë¥üËΩΩÂùáË°°</h1><p>ÂêØÂä®consulÊúçÂä°Âô®Ôºå‰∏§‰∏™user-serviceÔºåfeign-serviceÊúçÂä°</p>
<img src="/images/2020/screencapture2020-04-21 AM9.52.28.jpg">

<p>Ë∞ÉÁî®<a href="http://localhost:8701/user/1ÂõõÊ¨°" target="_blank" rel="noopener">http://localhost:8701/user/1ÂõõÊ¨°</a></p>
<img src="/images/2020screencapture2020-04-21 AM9.53.09.jpg">

<p>‰∫§ÊõøÊâìÂç∞</p>
<img src="/images/2020/screencapture2020-04-21 AM9.53.16.jpg">

<h1 id="ÊúçÂä°ÈôçÁ∫ß"><a href="#ÊúçÂä°ÈôçÁ∫ß" class="headerlink" title="ÊúçÂä°ÈôçÁ∫ß"></a>ÊúçÂä°ÈôçÁ∫ß</h1><p>ÂâçÈù¢UserFallbackService‰πüÊã∑ËøáÊù•‰∫Ü</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@FeignClient</span>(value = <span class="string">"user-service"</span>, fallback = UserFallbackService<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ê≥®Èáä‰πüÂä†‰∫Ü</p>
<p>‰øÆÊîπapplication.ymlÔºåÂºÄÂêØHystrixÂäüËÉΩ</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Âú®Feign‰∏≠ÂºÄÂêØHystrix</span></span><br><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">hystrix:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>ÂÖ≥Èó≠‰∏§‰∏™user-serviceÊúçÂä°ÔºåÈáçÊñ∞ÂêØÂä®feign-service</p>
<p>Ë∞ÉÁî®<a href="http://localhost:8701/user/1ËøõË°åÊµãËØï" target="_blank" rel="noopener">http://localhost:8701/user/1ËøõË°åÊµãËØï</a></p>
<p>ÂèëÁé∞Ë¢´ÈôçÁ∫ß</p>
<img src="/images/2020/screencapture2020-04-21 AM9.57.28.jpg">

<h1 id="Êó•ÂøóÊâìÂç∞ÂäüËÉΩ"><a href="#Êó•ÂøóÊâìÂç∞ÂäüËÉΩ" class="headerlink" title="Êó•ÂøóÊâìÂç∞ÂäüËÉΩ"></a>Êó•ÂøóÊâìÂç∞ÂäüËÉΩ</h1><p>Áî®FeignConfigÈÖçÁΩÆÁ±ª</p>
<p>Âú®application.yml‰∏≠ÈÖçÁΩÆÈúÄË¶ÅÂºÄÂêØÊó•ÂøóÁöÑFeignÂÆ¢Êà∑Á´Ø</p>
<p>ÂèØËÆæÁΩÆÊó•ÂøóÁ∫ßÂà´</p>
<h1 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h1><img src="/images/2020/screencapture2020-04-21 AM10.11.43.jpg">

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>springcloud</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloudÁ¨îËÆ∞04 ConsulÊúçÂä°Ê≤ªÁêÜ</title>
    <url>/2020/04/20/note-springcloud-04/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.consul.io/" target="_blank" rel="noopener">https://www.consul.io/</a></p>
</blockquote>
<h1 id="ÂÆâË£Ö"><a href="#ÂÆâË£Ö" class="headerlink" title="ÂÆâË£Ö"></a>ÂÆâË£Ö</h1><blockquote>
<p><a href="https://learn.hashicorp.com/consul/getting-started/install.html" target="_blank" rel="noopener">https://learn.hashicorp.com/consul/getting-started/install.html</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">% brew install consul</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">% consul version</span><br><span class="line">Consul v1.6.3</span><br><span class="line">Protocol 2 spoken by default, understands 2 to 3 (agent will automatically use protocol &gt;2 when speaking to compatible agents)</span><br></pre></td></tr></table></figure>

<h1 id="ÂÆòÊñπÊïôÁ®ã"><a href="#ÂÆòÊñπÊïôÁ®ã" class="headerlink" title="ÂÆòÊñπÊïôÁ®ã"></a>ÂÆòÊñπÊïôÁ®ã</h1><blockquote>
<p><a href="https://learn.hashicorp.com/consul/getting-started/agent" target="_blank" rel="noopener">https://learn.hashicorp.com/consul/getting-started/agent</a></p>
</blockquote>
<h2 id="ÂêØÂä®ÊúçÂä°Âô®"><a href="#ÂêØÂä®ÊúçÂä°Âô®" class="headerlink" title="ÂêØÂä®ÊúçÂä°Âô®"></a>ÂêØÂä®ÊúçÂä°Âô®</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ consul agent -dev</span><br></pre></td></tr></table></figure>

<h2 id="Êü•ÁúãËäÇÁÇπ"><a href="#Êü•ÁúãËäÇÁÇπ" class="headerlink" title="Êü•ÁúãËäÇÁÇπ"></a>Êü•ÁúãËäÇÁÇπ</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ consul members</span><br></pre></td></tr></table></figure>

<p><strong>Â∞ùËØï</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">% consul members</span><br><span class="line">Node                  Address         Status  Type    Build  Protocol  DC   Segment</span><br><span class="line">Ss-MacBook-Pro.local  127.0.0.1:8301  alive   server  1.6.3  2         dc1  &lt;all&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">coconutnut@Ss-MacBook-Pro ~ % consul members -detailed</span><br><span class="line">Node                  Address         Status  Tags</span><br><span class="line">Ss-MacBook-Pro.local  127.0.0.1:8301  alive   acls&#x3D;0,build&#x3D;1.6.3:7f3b5f3+,dc&#x3D;dc1,id&#x3D;d9c5a17b-cc6b-1ca6-7c72-07304fbcccdc,port&#x3D;8300,raft_vsn&#x3D;3,role&#x3D;consul,segment&#x3D;&lt;all&gt;,vsn&#x3D;2,vsn_max&#x3D;3,vsn_min&#x3D;2,wan_join_port&#x3D;8302</span><br></pre></td></tr></table></figure>

<p>‰ΩÜÊòØmemberÂëΩ‰ª§Ëé∑ÂèñÁöÑ‰ø°ÊÅØÂè™ÊòØeventually consistentÁöÑ</p>
<p>‰∏ÄËá¥ÊÄßÊõ¥Âº∫ÁöÑÊñπÂºèÊòØ‰ΩøÁî®http api</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl localhost:8500&#x2F;v1&#x2F;catalog&#x2F;nodes</span><br></pre></td></tr></table></figure>

<p><strong>Â∞ùËØï</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">% curl localhost:8500&#x2F;v1&#x2F;catalog&#x2F;nodes</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;ID&quot;: &quot;d9c5a17b-cc6b-1ca6-7c72-07304fbcccdc&quot;,</span><br><span class="line">        &quot;Node&quot;: &quot;Ss-MacBook-Pro.local&quot;,</span><br><span class="line">        &quot;Address&quot;: &quot;127.0.0.1&quot;,</span><br><span class="line">        &quot;Datacenter&quot;: &quot;dc1&quot;,</span><br><span class="line">        &quot;TaggedAddresses&quot;: &#123;</span><br><span class="line">            &quot;lan&quot;: &quot;127.0.0.1&quot;,</span><br><span class="line">            &quot;wan&quot;: &quot;127.0.0.1&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Meta&quot;: &#123;</span><br><span class="line">            &quot;consul-network-segment&quot;: &quot;&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;CreateIndex&quot;: 10,</span><br><span class="line">        &quot;ModifyIndex&quot;: 11</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>‰πüÂèØ‰ª•Áî®dns</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">% dig @127.0.0.1 -p 8600 Judiths-MBP.node.consul</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; @127.0.0.1 -p 8600 Judiths-MBP.node.consul</span><br><span class="line">; (1 server found)</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NXDOMAIN, id: 33684</span><br><span class="line">;; flags: qr aa rd; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 1</span><br><span class="line">;; WARNING: recursion requested but not available</span><br><span class="line"></span><br><span class="line">;; OPT PSEUDOSECTION:</span><br><span class="line">; EDNS: version: 0, flags:; udp: 4096</span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;Judiths-MBP.node.consul.	IN	A</span><br><span class="line"></span><br><span class="line">;; AUTHORITY SECTION:</span><br><span class="line">consul.			0	IN	SOA	ns.consul. hostmaster.consul. 1587353730 3600 600 86400 0</span><br><span class="line"></span><br><span class="line">;; Query time: 0 msec</span><br><span class="line">;; SERVER: 127.0.0.1#8600(127.0.0.1)</span><br><span class="line">;; WHEN: Mon Apr 20 11:35:30 CST 2020</span><br><span class="line">;; MSG SIZE  rcvd: 102</span><br></pre></td></tr></table></figure>

<h2 id="‰ºòÈõÖÁöÑÂÖ≥Èó≠ËäÇÁÇπ"><a href="#‰ºòÈõÖÁöÑÂÖ≥Èó≠ËäÇÁÇπ" class="headerlink" title="‰ºòÈõÖÁöÑÂÖ≥Èó≠ËäÇÁÇπ"></a>‰ºòÈõÖÁöÑÂÖ≥Èó≠ËäÇÁÇπ</h2><p>ctrl+C ÊöÇÂÅúÊúçÂä°Âô®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ consul leave</span><br></pre></td></tr></table></figure>

<h1 id="Ê≥®ÂÜåÂà∞consul"><a href="#Ê≥®ÂÜåÂà∞consul" class="headerlink" title="Ê≥®ÂÜåÂà∞consul"></a>Ê≥®ÂÜåÂà∞consul</h1><blockquote>
<p><a href="https://juejin.im/post/5db05582f265da4d4c20180f" target="_blank" rel="noopener">https://juejin.im/post/5db05582f265da4d4c20180f</a></p>
</blockquote>
<p>Â∞Ü‰ª•ÂâçÊ≥®ÂÜåÂà∞eurekaÁöÑÊúçÂä°ÊîπÂà∞consul</p>
<p>user-serviceÊ®°Âùó</p>
<p>‰øÆÊîπ‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-consul-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰øÆÊîπÈÖçÁΩÆ</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#eureka:</span></span><br><span class="line"><span class="comment">#  client:</span></span><br><span class="line"><span class="comment">#    register-with-eureka: true</span></span><br><span class="line"><span class="comment">#    fetch-registry: true</span></span><br><span class="line"><span class="comment">#    service-url:</span></span><br><span class="line"><span class="comment">#      defaultZone: http://localhost:8001/eureka/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">cloud:</span></span><br><span class="line">  <span class="attr">consul:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">8500</span></span><br><span class="line">    <span class="attr">discovery:</span></span><br><span class="line">      <span class="attr">service-name:</span> <span class="string">$&#123;spring.application.name&#125;</span></span><br></pre></td></tr></table></figure>

<p>ribbon-serviceÊ®°Âùó‰πüÊòØ</p>
<img src="/images/2020/screencapture2020-04-20 AM11.50.55.jpg">

<p> Service ChecksÊòØXÔºå‰ΩÜÊòØÂèØ‰ª•ËÆøÈóÆÔºü</p>
<img src="/images/2020/screencapture2020-04-20 AM11.51.51.jpg">

<p>‰ΩÜÊòØ<a href="http://localhost:8301/user/1Ëé∑Âèñ‰∏ç‰∫Ü" target="_blank" rel="noopener">http://localhost:8301/user/1Ëé∑Âèñ‰∏ç‰∫Ü</a></p>
<p>Êä•Èîô‰ø°ÊÅØ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java.lang.IllegalStateException: No instances available for user-service</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a href="https://blog.csdn.net/kxj19980524/article/details/86935415" target="_blank" rel="noopener">https://blog.csdn.net/kxj19980524/article/details/86935415</a></p>
</blockquote>
<p>ËøòÈúÄË¶ÅÂä†‰∏Ä‰∏™ÁõëÊéß‰∏≠ÂøÉÁöÑ‰æùËµñ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spring-boot-starter-actuator&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<p>ÈáçÂêØ</p>
<img src="/images/2020/screencapture2020-04-20 AM11.58.30.jpg">

<p>ËÆøÈóÆ<a href="http://localhost:8301/user/1ÂõõÊ¨°" target="_blank" rel="noopener">http://localhost:8301/user/1ÂõõÊ¨°</a></p>
<p>ÊéßÂà∂Âè∞ËæìÂá∫</p>
<img src="/images/2020/screencapture2020-04-20 AM11.58.49.jpg">

<p>‰∫§ÊõøË∞ÉÁî®</p>
<img src="/images/2020/screencapture2020-04-20 AM11.58.58.jpg">

<p>ÊàêÂäü</p>
<h1 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h1><p>ÁªàÁ´ØÂêØÂä®consulÊúçÂä°Âô®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ consul agent -dev</span><br></pre></td></tr></table></figure>

<p>IdeaÊ®°Âùó consulÂÆ¢Êà∑Á´Ø</p>
<p>‰æùËµñ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spring-boot-starter-actuator&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<p>ÈÖçÁΩÆ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cloud:</span><br><span class="line">  consul:</span><br><span class="line">    host: localhost</span><br><span class="line">    port: 8500</span><br><span class="line">    discovery:</span><br><span class="line">      service-name: $&#123;spring.application.name&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>springcloud</tag>
      </tags>
  </entry>
  <entry>
    <title>axiosËØ∑Ê±ÇË∑®ÂüüÈóÆÈ¢ò</title>
    <url>/2020/04/18/debug/</url>
    <content><![CDATA[<img src="/images/2020/screencapture2020-04-18 PM12.01.36.jpg">

<p>ÂèëÁé∞ÊúâË∑®ÂüüÈóÆÈ¢ò</p>
<p>Êü•Âà∞</p>
<blockquote>
<p><a href="https://www.cnblogs.com/l-y-h/p/11815452.html" target="_blank" rel="noopener">https://www.cnblogs.com/l-y-h/p/11815452.html</a></p>
</blockquote>
<p>ÁÖßÁùÄÊîπ‰∫Ü‰∏Ä‰∏ã</p>
<p>‰ΩÜÊòØÂèàÂá∫Áé∞‰∫Ü</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Cannot set property $http of #&lt;Vue&gt; which has only a getter at eval axios</span><br></pre></td></tr></table></figure>

<p>ÊúÄÂêéËß£ÂÜ≥ÊñπÊ≥ï</p>
<p>vue.config.js</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        proxy: &#123;</span><br><span class="line">            &#39;&#x2F;api&#39;: &#123;</span><br><span class="line">                target: &#39;http:&#x2F;&#x2F;***:3000&#x2F;&#39;,</span><br><span class="line">                &#x2F;&#x2F; ÂÖÅËÆ∏Ë∑®Âüü</span><br><span class="line">                changeOrigin: true,</span><br><span class="line">                ws: true,</span><br><span class="line">                pathRewrite: &#123;</span><br><span class="line">                    &#39;^&#x2F;api&#39;: &#39;&#39;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ë∞ÉÁî®</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">this</span>.$axios.get(<span class="string">'/api/findall'</span>).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(response.data)</span><br><span class="line">            &#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">                alert(error);</span><br><span class="line">            &#125;);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Debug</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>AxureÁ¨îËÆ∞</title>
    <url>/2020/04/16/note-axure/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1Yx411f7d6" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Yx411f7d6</a></p>
</blockquote>
<h1 id="Ê†áÂ∞∫"><a href="#Ê†áÂ∞∫" class="headerlink" title="Ê†áÂ∞∫"></a>Ê†áÂ∞∫</h1><p>Êåâ‰ΩèÂ∞∫Â≠êÊãñ‰∏ãÊù•</p>
<img src="/images/2020/screencapture2020-04-16 AM11.19.53.jpg">

<p>Â∑¶‰æß‰πüÊòØ</p>
<h1 id="ÂúÜËßí"><a href="#ÂúÜËßí" class="headerlink" title="ÂúÜËßí"></a>ÂúÜËßí</h1><p>Êåâ‰ΩèÈªÑËâ≤‰∏âËßíÊãñÂä®</p>
<img src="/images/2020/screencapture2020-04-16 AM11.34.03.jpg">

<h1 id="Âπ≥ÂùáÊéíÂ∏É"><a href="#Âπ≥ÂùáÊéíÂ∏É" class="headerlink" title="Âπ≥ÂùáÊéíÂ∏É"></a>Âπ≥ÂùáÊéíÂ∏É</h1><p>ÈÄâ‰∏≠Âá†‰∏™ÂÖÉÁ¥†ÔºåÁÇπÊ∞¥Âπ≥</p>
<img src="/images/2020/screencapture2020-04-16 AM11.37.11.jpg">

<h1 id="ÂàáÂâ≤È°∂Ê†è"><a href="#ÂàáÂâ≤È°∂Ê†è" class="headerlink" title="ÂàáÂâ≤È°∂Ê†è"></a>ÂàáÂâ≤È°∂Ê†è</h1><p>Âè≥ÈîÆ-&gt;ÂàÜÂâ≤ÂõæÁâá</p>
<img src="/images/2020/screencapture2020-04-16 PM12.08.32.jpg">

<h1 id="Âä®‰Ωú"><a href="#Âä®‰Ωú" class="headerlink" title="Âä®‰Ωú"></a>Âä®‰Ωú</h1><p>ÂÖàÂª∫‰∏Ä‰∏™Êñá‰ª∂Â§πÔºå‰∏Ä‰∏™È°µÈù¢ÂØπÂ∫î‰∏ÄÈ°µÔºåÂ§ßÂ∞è„ÄÅ‰ΩçÁΩÆÁõ∏Âêå</p>
<p>Áî®ÁÉ≠Âå∫ÁΩ©Âú®ÁÇπÂáªÂå∫Âüü‰∏ä</p>
<p>Ê∑ªÂä†‰∫§‰∫í</p>
<img src="/images/2020/screencapture2020-04-16 PM12.27.48.jpg">

<p>Ë∑≥ËΩ¨È°µÈù¢ ÂèØÈÄâÊã©ÊâìÂºÄÈìæÊé•</p>
<hr>
<p>‰∏äÊâãÂÆåÊàê</p>
<img src="/images/2020/screencapture2020-04-16 PM12.31.48.jpg">

<img src="/images/2020/screencapture2020-04-16 PM12.31.52.jpg">

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>tool</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloudÁ¨îËÆ∞03 HystrixÊñ≠Ë∑ØÂô®</title>
    <url>/2020/04/12/note-springcloud-03/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://blog.csdn.net/ThinkWon/article/details/103732497" target="_blank" rel="noopener">https://blog.csdn.net/ThinkWon/article/details/103732497</a></p>
</blockquote>
<p>HystrixÂäüËÉΩÔºöÊúçÂä°ÈôçÁ∫ß„ÄÅÊúçÂä°ÁÜîÊñ≠„ÄÅÁ∫øÁ®ãÈöîÁ¶ª„ÄÅËØ∑Ê±ÇÁºìÂ≠ò„ÄÅËØ∑Ê±ÇÂêàÂπ∂„ÄÅÊúçÂä°ÁõëÊéßÁ≠â</p>
<h1 id="ÂàõÂª∫‰∏Ä‰∏™hystrix-serviceÊ®°Âùó"><a href="#ÂàõÂª∫‰∏Ä‰∏™hystrix-serviceÊ®°Âùó" class="headerlink" title="ÂàõÂª∫‰∏Ä‰∏™hystrix-serviceÊ®°Âùó"></a>ÂàõÂª∫‰∏Ä‰∏™hystrix-serviceÊ®°Âùó</h1><p>ÁªèËøáÂâçÈù¢‰∏ÄÁ≥ªÂàóÊâéÂøÉÊìç‰ΩúÔºåËøôÊ¨°ÂàõÂª∫ÁöÑÊó∂ÂÄôÊ≤°ÊúâÁî®Spring InitializerÂä†‰æùËµñÔºåÁõ¥Êé•ÊîπÁöÑpom.xmlÂπ∂‰øÆÊîπÁâàÊú¨</p>
<p>@EnableCircuitBreakerÂºÄÂêØÊñ≠Ë∑ØÂô®ÂäüËÉΩ</p>
<p>pom‰∏≠ËøòË¶ÅÂä†‰∏Ä‰∏™‰æùËµñ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;cn.hutool&lt;&#x2F;groupId&gt;</span><br><span class="line">&lt;artifactId&gt;hutool-all&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;version&gt;5.1.0&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<p>Ëøô‰∏™Ê®°Âùó‰πüÊ∑ªÂä†‰∫ÜRibbonÁöÑË¥üËΩΩÂùáË°°ÂäüËÉΩ</p>
<p>‰ΩÜÊòØpom‰∏≠Âπ∂Ê≤°ÊúâÈÖçÁΩÆËøô‰∏™‰æùËµñ</p>
<p>Áúã‰∫Ü‰∏ã‰æùËµñÂõæÂèëÁé∞ÊòØeureka-client‰æùËµñÁöÑ</p>
<img src="/images/2020/screencapture2020-04-12 PM4.24.37.jpg">

<h2 id="ÊúçÂä°ÈôçÁ∫ß"><a href="#ÊúçÂä°ÈôçÁ∫ß" class="headerlink" title="ÊúçÂä°ÈôçÁ∫ß"></a>ÊúçÂä°ÈôçÁ∫ß</h2><p>Âú®UserHystrixController‰∏≠Ê∑ªÂä†Áî®‰∫éÊµãËØïÊúçÂä°ÈôçÁ∫ßÁöÑÊé•Âè£</p>
<p>Âú®UserService‰∏≠Ê∑ªÂä†Ë∞ÉÁî®ÊñπÊ≥ï‰∏éÊúçÂä°ÈôçÁ∫ßÊñπÊ≥ïÔºåÂπ∂Ê∑ªÂä†@HystrixCommandÊ≥®Ëß£</p>
<p>ÂêØÂä®eureka-server„ÄÅuser-service„ÄÅhystrix-serviceÊúçÂä°</p>
<img src="/images/2020/screencapture2020-04-12 PM5.16.10.jpg">

<p>ÂÖ≥Èó≠user-serviceÊúçÂä°ÈáçÊñ∞ÊµãËØïËØ•Êé•Âè£</p>
<img src="/images/2020/screencapture2020-04-12 PM5.16.42.jpg">

<p>ÂêéÈù¢ÊµãËØïÂøΩÁï•Êüê‰∫õÂºÇÂ∏∏ÈôçÁ∫ß„ÄÅÁºìÂ≠ò„ÄÅËØ∑Ê±ÇÂêàÂπ∂Ë°®Áé∞ÂùáÂíåÊïôÁ®ã‰∏ÄÊ†∑</p>
<img src="/images/2020/screencapture2020-04-12 PM5.35.06.jpg">

<h2 id="DEBUGÔºöË∞ÉÁî®ÊúçÂä°Â§±Ë¥•"><a href="#DEBUGÔºöË∞ÉÁî®ÊúçÂä°Â§±Ë¥•" class="headerlink" title="DEBUGÔºöË∞ÉÁî®ÊúçÂä°Â§±Ë¥•"></a>DEBUGÔºöË∞ÉÁî®ÊúçÂä°Â§±Ë¥•</h2><p>ÂêØÂä®ÂêéÊ≥®ÂÜå‰∏≠ÂøÉ</p>
<img src="/images/2020/screencapture2020-04-12 PM4.31.04.jpg">

<p>Ë∞ÉÁî®ÊµãËØïÊñπÊ≥ïÂêé</p>
<img src="/images/2020/screencapture2020-04-12 PM4.31.10.jpg">

<p>Áõ¥Êé•Â§±Ë¥•‰∫ÜÔºü</p>
<p>ËØïËØïÂéüÊúçÂä°Âú∞ÂùÄ</p>
<img src="/images/2020/screencapture2020-04-12 PM4.32.40.jpg">

<p>Ê≤°ÈóÆÈ¢ò</p>
<p>Ëøô‰∏™bug‰ººÊõæÁõ∏ËØÜ</p>
<p>‰∏äÊ¨°Âú®ribbon-service‰∏≠Ê∑ªÂä†‰∫Ü‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.netflix.ribbon<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ribbon-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>hystrix-service‰∏≠‰πüÂä†‰∏Ä‰∏™ËØïËØï</p>
<p>Ê≥®ÂÜå‰∏≠ÂøÉÂ§ö‰∫ÜË≠¶Âëä</p>
<img src="/images/2020/screencapture2020-04-12 PM4.35.28.jpg">

<p>ËøêË°å*2</p>
<p>ËøòÊòØÂ§±Ë¥•‰∫Ü</p>
<p>Áúã‰∏ãMaven</p>
<img src="/images/2020/screencapture2020-04-12 PM4.43.25.jpg">

<p>Âä†‰∏™ÁâàÊú¨</p>
<p>ribbonÊ®°ÂùóÁî®ÁöÑÊòØ2.3.0</p>
<p>ËøêË°å*3</p>
<p>ËøòÊòØÊåÇ‰∫Ü</p>
<p>ÊãøÊ∫êÁ†ÅÁöÑËøô‰∏â‰∏™Ê®°ÂùóËØïËØï</p>
<img src="/images/2020/screencapture2020-04-12 PM4.47.14.jpg">

<p>ÊòØÂèØ‰ª•ÁöÑ</p>
<p>ÂØπÊØîÁâàÊú¨</p>
<img src="/images/2020/screencapture2020-04-12 PM4.49.02.jpg">

<p>ÂÖ®ÈÉ®ÊîπÊàê‰∏ÄÊ†∑ÁöÑ</p>
<p>ÂèëÁé∞Ê∫êÁ†Åpom‰∏≠ËøòÂ§ö‰∫Ü‰∏Ä‰∏™</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰ª•Âèä</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÈöæÊÄ™ÂâçÈù¢springframework-cloudÁöÑÊ®°ÂùóÊÄªÊòØÊ≤°ÊúâÁâàÊú¨Âè∑ÔºåÂéüÊù•ÊòØÊ≤°Âä†Ëøô‰∏™</p>
<p>ÔºàËß£ÂÜ≥‰∫ÜÂâçÈù¢Á¨îËÆ∞02‰∏≠‰∏Ä‰∏™MARKÔºâ</p>
<p>ËøêË°å*4</p>
<p>Ëøòü•∂ÊòØü•∂ÊåÇü•∂‰∫Ü</p>
<p>ÂÜçÊù•‰∏Ä‰∏™‰∏™ÊØî‰ª£Á†Å</p>
<p>Ê≤°Â∑ÆÂïäÔºü</p>
<p>ÈöæÈÅìÊòØÂÖ∂ÂÆÉÊ®°ÂùóÁöÑ‰æùËµñ‰πüË¶ÅÊîπÔºüÊîπÂêß</p>
<p>ÂèëÁé∞ÂâçÈù¢Â§ßÈÉ®ÂàÜÈÉΩÊòØÊúâdependencyManagementÁöÑÔºåÊâÄ‰ª•ÂÖ∂ÂÆû‰πüÊ≤°‰ªÄ‰πàÂèòÂä®</p>
<p>ËøêË°å*5</p>
<p>ÊåÇ</p>
<p>ÂàöÊâçÊääspring-boot-starter-actuatorÂà†‰∫ÜÔºåÈáçÊñ∞Âä†‰∏ä</p>
<p>ËøêË°å*6</p>
<p>ÔºÅÊàêÂäü‰∫Ü</p>
<p>ÂèØÊòØËøô‰∏™Êó∂ÂÄôÂÖ∂ÂÆÉÁâàÊú¨ÈÉΩÂíåÊ∫êÁ†Å‰∏ÄÊ†∑‰∫ÜÔºå‰ΩÜÊòØÊ∫êÁ†ÅÊ≤°ÊúâÁî®Ëøô‰∏™ÂïäÔºü-MARK-</p>
<h2 id="ÈóÆÈ¢òÊÄªÁªì"><a href="#ÈóÆÈ¢òÊÄªÁªì" class="headerlink" title="ÈóÆÈ¢òÊÄªÁªì"></a>ÈóÆÈ¢òÊÄªÁªì</h2><ol>
<li><p>ÁâàÊú¨ ÁâàÊú¨ ÁâàÊú¨</p>
</li>
<li><p>Ê≥®ÂÜå‰∏≠ÂøÉÊúâÔºå‰ΩÜÊâæ‰∏çÂà∞ÊúçÂä°ÔºåËØïËØïÂä†‰∏ä</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h1><img src="/images/2020/screencapture2020-04-12 PM5.36.45.jpg">

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>springcloud</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloudÁ¨îËÆ∞02 RibbonË¥üËΩΩÂùáË°°</title>
    <url>/2020/04/09/note-springcloud-02/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://blog.csdn.net/ThinkWon/article/details/103729080" target="_blank" rel="noopener">https://blog.csdn.net/ThinkWon/article/details/103729080</a></p>
</blockquote>
<h1 id="user-serviceÊ®°Âùó"><a href="#user-serviceÊ®°Âùó" class="headerlink" title="user-serviceÊ®°Âùó"></a>user-serviceÊ®°Âùó</h1><ol>
<li>ÂàõÂª∫user-serviceÊ®°Âùó</li>
<li>pom.xmlÊ∑ªÂä†‰æùËµñ</li>
<li>ÈÖçÁΩÆapplication.yml</li>
<li>ÂÆû‰ΩìÁ±ªÂíåÂìçÂ∫îÁ±ª</li>
<li>ÊéßÂà∂Âô®</li>
<li>ServiceÊé•Âè£ÂíåÂÆûÁé∞Á±ª</li>
</ol>
<h1 id="ribbon-serviceÊ®°Âùó"><a href="#ribbon-serviceÊ®°Âùó" class="headerlink" title="ribbon-serviceÊ®°Âùó"></a>ribbon-serviceÊ®°Âùó</h1><ol>
<li>ÂàõÂª∫ribbon-serviceÊ®°Âùó</li>
<li>pom.xmlÊ∑ªÂä†‰æùËµñ</li>
<li>ÈÖçÁΩÆapplication.yml</li>
<li>@LoadBalancedÊ≥®Ëß£Ëµã‰∫àRestTemplateË¥üËΩΩÂùáË°°ÁöÑËÉΩÂäõ</li>
<li>ÂÆû‰ΩìÁ±ªÂíåÂìçÂ∫îÁ±ª</li>
<li>ÊéßÂà∂Âô®</li>
</ol>
<h1 id="Ë¥üËΩΩÂùáË°°ÂäüËÉΩÊºîÁ§∫"><a href="#Ë¥üËΩΩÂùáË°°ÂäüËÉΩÊºîÁ§∫" class="headerlink" title="Ë¥üËΩΩÂùáË°°ÂäüËÉΩÊºîÁ§∫"></a>Ë¥üËΩΩÂùáË°°ÂäüËÉΩÊºîÁ§∫</h1><ol>
<li>ÂºÄÂêØÊúçÂä°</li>
</ol>
<p>8001ÂºÄ‰∏Ä‰∏™ServerÔºà‰∏äÊ¨°ÁöÑÊ®°ÂùóÔºâ</p>
<p>8201„ÄÅ8202ÂêÑÂºÄ‰∏Ä‰∏™Service</p>
<img src="/images/2020/screencapture2020-04-09 PM7.55.27.jpg">

<p>ËøôÊ¨°ÊòØÂêåÊ†∑ÁöÑÈÖçÁΩÆÊñá‰ª∂Ôºå2‰∏™Á´ØÂè£ÂêÑÂºÄ‰∏Ä‰∏™ÔºåÊîπActive profiles</p>
<p>‰∏äÊ¨°ÊòØ‰∏çÂêåÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºåÂºÄÂú®‰∏çÂêåÁöÑÁ´ØÂè£ÔºåÁî®Override parameters</p>
<p>8301ÂºÄRibbon Service</p>
<img src="/images/2020/screencapture2020-04-09 PM9.36.41.jpg">

<ol start="2">
<li>Ë∞ÉÁî®Êé•Âè£ËøõË°åÊµãËØï</li>
</ol>
<img src="/images/2020/screencapture2020-04-10 AM10.28.54.jpg">

<p>8201</p>
<img src="/images/2020/screencapture2020-04-10 AM10.32.24.jpg">

<p>8202</p>
<img src="/images/2020/screencapture2020-04-10 AM10.32.33.jpg">

<h2 id="DEBUGÔºöËøêË°åÂêéÊ≤°ÊúâÊ≥®ÂÜå"><a href="#DEBUGÔºöËøêË°åÂêéÊ≤°ÊúâÊ≥®ÂÜå" class="headerlink" title="DEBUGÔºöËøêË°åÂêéÊ≤°ÊúâÊ≥®ÂÜå"></a>DEBUGÔºöËøêË°åÂêéÊ≤°ÊúâÊ≥®ÂÜå</h2><p>ÂêØÂä®Âá†‰∏™ÊúçÂä°Âêé</p>
<img src="/images/2020/screencapture2020-04-09 PM7.59.13.jpg">

<p>‰ΩÜÊòØÊµèËßàÂô®‰∏≠Êü•Áúã</p>
<img src="/images/2020/screencapture2020-04-09 PM7.59.23.jpg">

<p>ÂèëÁé∞ÂèàÂøòËÆ∞Âä†@EnableDiscoveryClient‰∫Ü</p>
<p>ÈáçÂêØ</p>
<p>ËøòÊòØÊ≤°ÊúâÊ≥®ÂÜå‰∏ä</p>
<p><strong>Â∞ùËØï1</strong></p>
<blockquote>
<p><a href="https://blog.csdn.net/yangyongming_888/article/details/83859092" target="_blank" rel="noopener">https://blog.csdn.net/yangyongming_888/article/details/83859092</a></p>
</blockquote>
<p>ËØ¥ÊòØ‰æùËµñÂ∏¶starterÂíå‰∏çÂ∏¶starter</p>
<p>‰ΩÜÊòØÁúã‰∫Ü‰∏ã‰∏â‰∏™pom.xml‰∏≠ÈÉΩÊòØÂ∏¶starterÁöÑ</p>
<p>ÂÜçÊØîËæÉ‰∏Ä‰∏ã‰æùËµñ</p>
<p>Ê∫êÁ†Å-eureka-server</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>È°πÁõÆ-eureka-server</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Ê∫êÁ†Å-ribbon-service</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>È°πÁõÆ-ribbon-service</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Ê∫êÁ†Å-user-service</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>È°πÁõÆ-user-service</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰∏ÄÊ†∑ÔºåÁúãÊù•‰∏çÊòØËøô‰∏™ÈóÆÈ¢ò</p>
<p><strong>Â∞ùËØï2</strong></p>
<p>ÂÖ≥Èó≠serverÔºåÁõ¥Êé•ÂêØÂä®serviceÔºåÂèëÁé∞‰πüÂêØÂä®‰∫ÜÔºåÂπ∂Ê≤°ÊúâÊä•Èîô</p>
<p>‰ΩÜÊòØ‰∏äÊ¨°ÁöÑclientÂ¶ÇÊûúÂú®Ê≤°ÂºÄserviceÁöÑÊó∂ÂÄôÂêØÂä®‰ºöÊä•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)</span><br></pre></td></tr></table></figure>

<p>ÊâÄ‰ª•‰πüËÆ∏Ê†πÊú¨Â∞±Ê≤°ÊúâËøû‰∏äÊúçÂä°Âô®Ôºü</p>
<p>ÈöæÈÅìÊòØymlÊ≤°ÊúâÁîüÊïàÔºü</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mvn -X clean install</span><br></pre></td></tr></table></figure>

<p>Ê≤°Áî®</p>
<blockquote>
<p><a href="https://segmentfault.com/q/1010000012008825" target="_blank" rel="noopener">https://segmentfault.com/q/1010000012008825</a></p>
</blockquote>
<p>ÊúâËØ¥ÊòØymlÁöÑÁº©ËøõÈóÆÈ¢ò</p>
<p>Áúã‰∫Ü‰∏Ä‰∏ã‰∏äÊ¨°ÂèØ‰ª•Ê≥®ÂÜåÁöÑÊúçÂä°ÁöÑyml</p>
<img src="/images/2020/screencapture2020-04-09 PM8.49.31.jpg">

<p>ËøôÊ¨°ÁöÑ</p>
<img src="/images/2020/screencapture2020-04-09 PM8.49.35.jpg">

<p>ÂèëÁé∞Ê≥®ÂÜåÁöÑtrueÊòØÁôΩËâ≤ÁöÑ</p>
<p>ÊèêÁ§∫</p>
<img src="/images/2020/screencapture2020-04-09 PM8.53.23.jpg">

<p>Á°ÆÂÆûÊúâÈóÆÈ¢ò</p>
<p>Êääpom.xml‰∏≠spring-cloud-starter-netflix-eureka-clientÁöÑ‰æùËµñÊ≥®ÈáäÁöÑÔºå‰æùÁÑ∂ËÉΩÂêØÂä®</p>
<blockquote>
<p><a href="https://ask.csdn.net/questions/719186" target="_blank" rel="noopener">https://ask.csdn.net/questions/719186</a></p>
</blockquote>
<p>ÊúâËØ¥Âä†ÁâàÊú¨Âè∑ÁöÑ</p>
<p>Ê≤°Áî®</p>
<p>ÊÉ≥ÊÉ≥Âíå‰∏äÊ¨°ÂàõÂª∫ÁöÑÂå∫Âà´Ôºå‰∏äÊ¨°ÊòØÂú®ÂàõÂª∫Ê®°ÂùóÁöÑÊó∂ÂÄôÈÄöËøáSpring InitializerÈÄâÊã©‰∫ÜEureka Discovery ClientÁöÑ‰æùËµñ</p>
<p>ËØïËØïÂàõÂª∫‰∏Ä‰∏™user-service2ÔºåÂàõÂª∫ÁöÑÊó∂ÂÄôÈÄâ‰∏äEureka Discovery Client</p>
<p>Êääapplication.ymlÁöÑÂÜÖÂÆπÂ§çÂà∂ËøáÂéªÔºåÂèØ‰ª•Ëß£Êûê</p>
<p>ÂÆÉÁöÑ‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>user-serviceÁöÑ‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Ê≤°Â∑ÆÂïä</p>
<p>ÈÇ£ÈöæÈÅìÊòØ‰æùËµñÊ≤°ÊúâÂØºÂÖ•</p>
<p>Áúã‰∏ãMaven</p>
<img src="/images/2020/screencapture2020-04-09 PM9.14.59.jpg">

<p>???</p>
<p>ÈöæÈÅìÁúüÊòØÊ≤°ÊúâÁâàÊú¨Âè∑</p>
<p>ËÄå‰∏î‰∏∫‰ªÄ‰πàÂâçÈù¢ÁöÑÊ®°Âùó‰πüÈÉΩÊòØÁ∫¢ÁöÑÔºåÈÇ£ÊòØÊÄé‰πàËøêË°åÊàêÂäüÁöÑ Ëø∑ÊÉë</p>
<p>ÁÇπËøõÂéªÁúã‰∏Ä‰∏ã</p>
<img src="/images/2020/screencapture2020-04-09 PM9.15.46.jpg">

<p>‰πüËÆ∏Âè™ÊòØÈÉ®ÂàÜÂÜ≤Á™ÅÊâÄ‰ª•ËøòËÉΩËøêË°åÔºü</p>
<p>ÊÄª‰πãÂÖàÂä†‰∏™ÁâàÊú¨Âè∑</p>
<img src="/images/2020/screencapture2020-04-09 PM9.23.48.jpg">

<p>Âä†‰∫Ü‰πãÂêéËøòÊòØunknown</p>
<p>ÈáçÂêØ‰πüÊòØ</p>
<p>ÂèëÁé∞Âè≥‰∏ãËßíÂú®‰∏ãËΩΩ</p>
<p>‰∏ãÂÆå‰πãÂêéÂèòÊàê‰∫ÜMaven‰∏≠ÂèòÊàê‰∫Ü2.2.2.RELEASE</p>
<p>ÊøÄÂä®Âú∞ÊêìÊêìÊâã</p>
<img src="/images/2020/screencapture2020-04-09 PM9.27.27.jpg">

<p>ÊàêÂäüÔºÅ</p>
<img src="/images/2020/screencapture2020-04-09 PM9.29.40.jpg">

<p>Ê≥®ÂÜå‰∏ä‰∫Ü</p>
<p>Áªôribbon-service‰πüÂä†‰∏™ÁâàÊú¨</p>
<p>Âä†Âú®propertiesÈáå‰ºº‰πé‰∏çÁÆ°Áî®ÔºåÊöÇÊó∂ÈÉΩÂä†Âú®dependencyÈáåÂ•Ω‰∫Ü</p>
<img src="/images/2020/screencapture2020-04-09 PM9.31.51.jpg">

<h2 id="DEBUGÔºöË∞ÉÁî®Êé•Âè£Ë∞ÉËØïÁöÑÈóÆÈ¢ò"><a href="#DEBUGÔºöË∞ÉÁî®Êé•Âè£Ë∞ÉËØïÁöÑÈóÆÈ¢ò" class="headerlink" title="DEBUGÔºöË∞ÉÁî®Êé•Âè£Ë∞ÉËØïÁöÑÈóÆÈ¢ò"></a>DEBUGÔºöË∞ÉÁî®Êé•Âè£Ë∞ÉËØïÁöÑÈóÆÈ¢ò</h2><p>Âá∫Áé∞Whitelabel Error Page</p>
<p>Êä•ÈîôÊòØ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2020-04-09 21:37:37.483 ERROR 3503 --- [nio-8301-exec-1] o.a.c.c.C.[.[.[&#x2F;].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Failed to process import candidates for configuration class [org.springframework.cloud.netflix.ribbon.RibbonClientConfiguration]; nested exception is java.lang.IllegalStateException: Failed to introspect annotated methods on class org.springframework.cloud.netflix.ribbon.RestClientRibbonConfiguration] with root cause</span><br><span class="line"></span><br><span class="line">java.lang.ClassNotFoundException: com.netflix.niws.client.http.RestClient</span><br><span class="line">	at java.net.URLClassLoader.findClass(URLClassLoader.java:382) ~[na:1.8.0_241]</span><br><span class="line">	at java.lang.ClassLoader.loadClass(ClassLoader.java:418) ~[na:1.8.0_241]</span><br></pre></td></tr></table></figure>

<p>Êâæ‰∏çÂà∞com.netflix.niws.client.http.RestClient</p>
<p>Áúã‰∏Ä‰∏ã‰æùËµñ</p>
<img src="/images/2020/screencapture2020-04-09 PM9.46.14.jpg">

<p>‰ºº‰πéÊúâÂæàÂ§öÂÜ≤Á™Å</p>
<blockquote>
<p><a href="https://stackoverflow.com/questions/50675895/java-lang-classnotfoundexception-com-netflix-discovery-eurekaclientconfig" target="_blank" rel="noopener">https://stackoverflow.com/questions/50675895/java-lang-classnotfoundexception-com-netflix-discovery-eurekaclientconfig</a></p>
<p>You should select only <em>Eureka Server</em> using <em>spring Initializr</em> while creating eureka server project.</p>
</blockquote>
<p>‚Ä¶</p>
<p>ËØï‰∏Ä‰∏ãÈáçÊñ∞ÂàõÂª∫</p>
<img src="/images/2020/screencapture2020-04-09 PM10.00.26.jpg" width=400>

<p>Â∞±Ê≤°ÊúâÂÜ≤Á™Å‰∫Ü</p>
<p>ËøêË°å</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java.lang.ClassNotFoundException: com.netflix.niws.client.http.RestClient</span><br></pre></td></tr></table></figure>

<p>ÊÄé‰πàËøòÊòØÊâæ‰∏çÂà∞ÔºüÔºüÔºü</p>
<p>ÊääribbonÁöÑ‰æùËµñÊå™Âà∞ÂâçÈù¢Êù•‰ºòÂÖàÊâæÂë¢Ôºü</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ËøòÊòØ‰∏çË°å</p>
<p>ÂÜçÁøª‰∏Ä‰∏ãÊä•ÈîôÂèëÁé∞ÊòØgetUserÂáΩÊï∞ÁöÑÈóÆÈ¢ò</p>
<img src="/images/2020/screencapture2020-04-09 PM10.19.03.jpg">

<p>Âú®ÈáåÈù¢ÊâìÂç∞‰∏Ä‰∏ãË∑ØÂæÑ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">getUser</span><span class="params">(@PathVariable Long id)</span> </span>&#123;</span><br><span class="line">  System.out.println(<span class="string">"„ÄêgetUser‰∏≠„ÄëuserServiceUrlÔºö"</span>+userServiceUrl);</span><br><span class="line">  <span class="keyword">return</span> restTemplate.getForObject(userServiceUrl + <span class="string">"/user/&#123;1&#125;"</span>, Result<span class="class">.<span class="keyword">class</span>, <span class="title">id</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËæìÂá∫Â¶Ç‰∏ã</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">„ÄêgetUser‰∏≠„ÄëuserServiceUrlÔºöhttp:&#x2F;&#x2F;user-service</span><br></pre></td></tr></table></figure>

<p>Ê≤°Êúâlocalhost?</p>
<p>ÊµèËßàÂô®ËÆøÈóÆ‰∏Ä‰∏ã</p>
<p>Êâæ‰∏çÂà∞ <strong>user-service</strong> ÁöÑÊúçÂä°Âô® IP Âú∞ÂùÄ</p>
<p>‰∏äÊ¨°Â•ΩÂÉèÊ≥®ÂÜåËøáipÊù•ÁùÄ</p>
<p>‰ΩÜÊòØÊ≥®ÂÜåÊòØhostname</p>
<p>ËøôÈáåÂ∫îËØ•ÊòØË¶ÅÈÄöËøáÊúçÂä°ÂêçÁß∞ËÆøÈóÆ2‰∏™ServiceÔºå‰ºº‰πé‰∏ç‰∏ÄÊ†∑</p>
<p>ËØïËØïÁõ¥Êé•Áî®localhostÂä†Á´ØÂè£ËÆøÈóÆ</p>
<img src="/images/2020/screencapture2020-04-09 PM10.33.08.jpg">

<p>Âçï‰∏™ËäÇÁÇπÁöÑÊúçÂä°Ê≤°ÊúâÈóÆÈ¢ò</p>
<p>ÈÇ£Â∫îËØ•Â∞±ÊòØÂú®Ê≥®ÂÜåÊúçÂä°ÂêçÁß∞Âà∞ipÁöÑËΩ¨Êç¢‰∏äÂá∫‰∫ÜÈóÆÈ¢ò</p>
<blockquote>
<p><a href="https://bbs.csdn.net/topics/392414113" target="_blank" rel="noopener">https://bbs.csdn.net/topics/392414113</a></p>
</blockquote>
<p>Êää</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> RestTemplate restTemplate;</span><br></pre></td></tr></table></figure>

<p>ÊîπÊàê</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> RestOperations restTemplate;</span><br></pre></td></tr></table></figure>

<p>‰∏çË°å</p>
<blockquote>
<p><a href="https://www.liangzl.com/get-article-detail-174951.html" target="_blank" rel="noopener">https://www.liangzl.com/get-article-detail-174951.html</a></p>
</blockquote>
<p>ÂØπÊØî‰∫Ü‰∏Ä‰∏ãËøô‰∏™ÊïôÁ®ãÔºå‰πüÊ≤°ÊâæÂà∞ÈóÆÈ¢ò</p>
<p>ÁΩëÈ°µ‰∏äÁöÑÈîôËØØ‰ø°ÊÅØÊòØ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">There was an unexpected error (type&#x3D;Internal Server Error, status&#x3D;500).</span><br><span class="line">Failed to process import candidates for configuration class [org.springframework.cloud.netflix.ribbon.RibbonClientConfiguration]; nested exception is java.lang.IllegalStateException: Failed to introspect annotated methods on class org.springframework.cloud.netflix.ribbon.RestClientRibbonConfiguration</span><br></pre></td></tr></table></figure>

<p>‰ºº‰πéÊòØÊ≥®ÈáäÁöÑÈóÆÈ¢ò</p>
<p>‚Ä¶</p>
<p>Âæà‰πÖÂæà‰πÖ‰ª•Âêé</p>
<p>‚Ä¶</p>
<p>ËØïËØïÊ∫êÁ†ÅËÉΩ‰∏çËÉΩË∑ë</p>
<p>Êº´ÈïøÁöÑ‰∏ãËΩΩ‰æùËµñ</p>
<p><strong>Á¨¨‰∫åÂ§©</strong></p>
<p>ËøêË°åÊ∫êÁ†Å</p>
<img src="/images/2020/screencapture2020-04-10 AM10.05.19.jpg">

<img src="/images/2020/screencapture2020-04-10 AM10.05.28.jpg">

<p>Ê≤°ÊúâÈóÆÈ¢ò</p>
<p>ËÄå‰∏îMaven‰∏Ä‰∏™ÈÉΩÊ≤°Á∫¢</p>
<img src="/images/2020/screencapture2020-04-10 AM10.06.09.jpg" width=300>

<p>ÂØπÊØî‰∏Ä‰∏ã‰æùËµñÁâàÊú¨</p>
<p>Ê∫êÁ†Åeureka-server</p>
<img src="/images/2020/screencapture2020-04-10 AM10.08.50.jpg">

<p>È°πÁõÆeureka-server</p>
<img src="/images/2020/screencapture2020-04-10 AM10.08.58.jpg">

<p>spring-cloud-starter-netflix-eureka-serverÁâàÊú¨‰∏ç‰∏ÄÊ†∑</p>
<p>diff‰∏Ä‰∏ãpomÊñá‰ª∂</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">8c8</span><br><span class="line">&lt;         &lt;version&gt;2.2.2.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">---</span><br><span class="line">&gt;         &lt;version&gt;2.2.6.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">11c11</span><br><span class="line">&lt;     &lt;groupId&gt;com.jourwon.springcloud&lt;&#x2F;groupId&gt;</span><br><span class="line">---</span><br><span class="line">&gt;     &lt;groupId&gt;com.coconutnut&lt;&#x2F;groupId&gt;</span><br><span class="line">19c19</span><br><span class="line">&lt;         &lt;spring-cloud.version&gt;Hoxton.RELEASE&lt;&#x2F;spring-cloud.version&gt;</span><br><span class="line">---</span><br><span class="line">&gt;         &lt;spring-cloud.version&gt;Hoxton.SR3&lt;&#x2F;spring-cloud.version&gt;</span><br></pre></td></tr></table></figure>

<p>‰∏Ä‰∏™ÊòØspring-boot-starter-parentÁöÑÁâàÊú¨‰∏ç‰∏ÄÊ†∑</p>
<p>‰∏Ä‰∏™ÊòØspring-cloudÁöÑÁâàÊú¨‰∏ç‰∏ÄÊ†∑</p>
<p>‰øÆÊîπspring-cloudÁöÑÁâàÊú¨ÔºåMavenÁöÑÂÜ≤Á™ÅÂ∞±Ê≤°Êúâ‰∫Ü</p>
<p>‰∫éÊòØÊääÂÖ∂ÂÆÉpomÁöÑÁâàÊú¨‰πüÊîπ‰∫Ü</p>
<p>spring-boot-starter-parentÁöÑÁâàÊú¨ÊöÇÊó∂Ê≤°ÊîπÔºå‰øùÊåÅÊúÄÊñ∞</p>
<img src="/images/2020/screencapture2020-04-10 AM10.22.11.jpg">

<p>ÂêØÂä®</p>
<img src="/images/2020/screencapture2020-04-10 AM10.22.23.jpg">

<p>Ê≥®ÂÜå‰∏ä‰∫Ü</p>
<img src="/images/2020/screencapture2020-04-10 AM10.22.18.jpg">

<p>ÂèàÂ¥©‰∫Ü</p>
<p>‰ΩÜÊòØËøôÊ¨°ÊéßÂà∂Âè∞Ê≤°ÊúâError‰∫Ü</p>
<p>ÈîôËØØ‰ø°ÊÅØÂèòÊàê‰∫Ü</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">There was an unexpected error (type&#x3D;Internal Server Error, status&#x3D;500).</span><br><span class="line">No instances available for user-service</span><br></pre></td></tr></table></figure>

<p>ÂçïÁã¨ËÆøÈóÆ<a href="http://localhost:8201/user/1ÊàñËÄÖhttp://localhost:8202/user/1ÈÉΩÊòØÂèØ‰ª•ÁöÑ" target="_blank" rel="noopener">http://localhost:8201/user/1ÊàñËÄÖhttp://localhost:8202/user/1ÈÉΩÊòØÂèØ‰ª•ÁöÑ</a></p>
<blockquote>
<p><a href="https://blog.csdn.net/choice_of_door/article/details/85467105" target="_blank" rel="noopener">https://blog.csdn.net/choice_of_door/article/details/85467105</a></p>
</blockquote>
<p>ÊåâÁÖßËøô‰∏™Âä†‰∫Ü‰∏™‰æùËµñ</p>
<p>ÔºàÊ∫êÁ†ÅÈáåÂπ∂Ê≤°Êúâ ‰ΩÜÊòØÂèØ‰ª•Ê≠£Â∏∏ËøêË°åÔºå‰∏∫‰ªÄ‰πàÂë¢Ôºü<del>MARK</del> (Á¨îËÆ∞03‰∏≠Ëß£ÂÜ≥)Ôºâ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.netflix.ribbon<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ribbon-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÊàêÂäü‰∫ÜÔºÅ</p>
<p>Âó∑ÔºÅ</p>
<h2 id="ÈóÆÈ¢òÊÄªÁªì"><a href="#ÈóÆÈ¢òÊÄªÁªì" class="headerlink" title="ÈóÆÈ¢òÊÄªÁªì"></a>ÈóÆÈ¢òÊÄªÁªì</h2><p>ÈÉΩÊòØÁâàÊú¨ÁöÑÂùë</p>
<p>ÂàõÂª∫Êó∂Áî®Spring InitializerÂä†ËøòÊòØÂêéÊúüÂú®pom.xml‰∏≠Âä†‰∏çÈáçË¶Å</p>
<p>‰ΩÜÊúÄÂ•ΩÂíåÊïôÁ®ã‰øùÊåÅ‰∏ÄËá¥</p>
<p>Ëá≥Â∞ëÊ£ÄÊü•Âè≥ËæπMavenÊ†è‰∏≠Ê≤°ÊúâÁ∫¢Á∫ø</p>
<h1 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h1><img src="/images/2020/screencapture2020-04-10 AM10.51.52.jpg">

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>springcloud</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloudÁ¨îËÆ∞01 EurekaÊ≥®ÂÜå‰∏≠ÂøÉ</title>
    <url>/2020/04/08/note-springcloud-01/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://blog.csdn.net/ThinkWon/article/details/103726655" target="_blank" rel="noopener">https://blog.csdn.net/ThinkWon/article/details/103726655</a></p>
</blockquote>
<hr>
<blockquote>
<p>Spring Cloud Netflix EurekaÊòØSpring Cloud NetflixÂ≠êÈ°πÁõÆÁöÑÊ†∏ÂøÉÁªÑ‰ª∂‰πã‰∏ÄÔºå‰∏ªË¶ÅÁî®‰∫éÂæÆÊúçÂä°Êû∂ÊûÑ‰∏≠ÁöÑÊúçÂä°Ê≤ªÁêÜ</p>
</blockquote>
<p>ÂÖàÁñëÊÉë‰∫Ü‰∏Ä‰∏ãÊ≠§NetflixÊòØ‰∏çÊòØÂΩºNetflix</p>
<p>Êü•‰∫Ü‰∏Ä‰∏ã <a href="https://www.cnblogs.com/EasonJim/p/7795816.html" target="_blank" rel="noopener">NetflixÊòØ‰ªÄ‰πàÔºå‰∏éSpring CloudÊúâ‰ªÄ‰πàÂÖ≥Á≥ª</a> ËøòÁúüÊòØ</p>
<p>Áà±‰∫ÜÁà±‰∫Ü</p>
<hr>
<h1 id="Êê≠Âª∫EurekaÊ≥®ÂÜå‰∏≠ÂøÉ"><a href="#Êê≠Âª∫EurekaÊ≥®ÂÜå‰∏≠ÂøÉ" class="headerlink" title="Êê≠Âª∫EurekaÊ≥®ÂÜå‰∏≠ÂøÉ"></a>Êê≠Âª∫EurekaÊ≥®ÂÜå‰∏≠ÂøÉ</h1><ol>
<li><p>ÂàõÂª∫eureka-serverÊ®°Âùó</p>
</li>
<li><p>@EnableEurekaServerÂêØÁî®EuerkaÊ≥®ÂÜå‰∏≠ÂøÉÂäüËÉΩ</p>
</li>
<li><p>application.ymlÊ∑ªÂä†ÈÖçÁΩÆ</p>
<p>È°πÁõÆÈªòËÆ§ÊòØapplication.propertiesÔºå‰∏∫‰∫ÜÂíåÊïôÁ®ã‰øùÊåÅ‰∏ÄËá¥</p>
<p>Âà†Èô§application.propertiesÔºåÊâßË°å mvn -X clean install</p>
</li>
<li><p>Run DashboardËøêË°åÂ∫îÁî®</p>
</li>
<li><p>ÊµèËßàÂô®ÊâìÂºÄÊ≥®ÂÜå‰∏≠ÂøÉ</p>
</li>
</ol>
<img src="/images/2020/screencapture2020-04-09 AM10.00.53.jpg">

<p>ÊàêÂäü</p>
<hr>
<p>‰æùËµñ‰∏ã‰∫ÜÊå∫‰πÖÔºåÁúãÁúºÈÉΩÊúâ‰∫õ‰ªÄ‰πà</p>
<img src="/images/2020/screencapture2020-04-09 AM9.33.00.jpg" width=400>

<p>üò±üò±üò±</p>
<p>‰∏äÈù¢ÊòØspring-cloud-starter-netflix-eureka-server</p>
<img src="/images/2020/screencapture2020-04-09 AM9.34.40.jpg">

<p>‰∏ãÈù¢ÊòØspring-boot-starter-test</p>
<img src="/images/2020/screencapture2020-04-09 AM9.35.06.jpg">

<h2 id="DEBUGÔºöÊ≤°ÊúâRun-Dashboard"><a href="#DEBUGÔºöÊ≤°ÊúâRun-Dashboard" class="headerlink" title="DEBUGÔºöÊ≤°ÊúâRun Dashboard"></a>DEBUGÔºöÊ≤°ÊúâRun Dashboard</h2><p><strong>Â∞ùËØï1</strong></p>
<blockquote>
<p><a href="https://blog.csdn.net/chinoukin/article/details/80577890" target="_blank" rel="noopener">https://blog.csdn.net/chinoukin/article/details/80577890</a></p>
</blockquote>
<p>Êîπ.idea/workspace.xmlÁöÑ</p>
<p>ÂéüÊú¨ÊòØËøôÊ†∑</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">name</span>=<span class="string">"RunDashboard"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">name</span>=<span class="string">"configurationTypes"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"SpringBootApplicationConfigurationType"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰ΩÜÊòØËøô‰∏™Êñá‰ª∂ÊØèÊ¨°Êîπ‰∫Ücommand+sÂ∞±ÂèàÂõûÂéª‰∫Ü</p>
<p><strong>Â∞ùËØï2</strong></p>
<blockquote>
<p><a href="https://blog.csdn.net/feixiangsmile/article/details/96908744" target="_blank" rel="noopener">https://blog.csdn.net/feixiangsmile/article/details/96908744</a></p>
</blockquote>
<p>Edit Configurations‰∏≠</p>
<p>Templates‰∏≠</p>
<p>ÁÇπÂáªÂä†Âè∑Ê∑ªÂä†ApplicationÂíåSpring Boot</p>
<p>workspace.xmlÂèòÊàê‰∫Ü</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">name</span>=<span class="string">"RunDashboard"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">name</span>=<span class="string">"configurationTypes"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"Application"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"SpringBootApplicationConfigurationType"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰ΩÜËøòÊòØÊ≤°Êúâ</p>
<p><strong>Â∞ùËØï3</strong></p>
<blockquote>
<p><a href="https://www.cnblogs.com/JealousGirl/p/openorcloserundash.html" target="_blank" rel="noopener">https://www.cnblogs.com/JealousGirl/p/openorcloserundash.html</a></p>
<p><a href="https://blog.csdn.net/icebox126/article/details/78861943" target="_blank" rel="noopener">https://blog.csdn.net/icebox126/article/details/78861943</a></p>
</blockquote>
<p>Âú®workspace.xml‰∏≠Ê∑ªÂä†ÔºàËøôÊ¨°ÂèØ‰ª•Âä†‰∫ÜÔºâ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"show.run.dashboard.notification"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰ΩÜÊòØÈáçÂêØËøòÊòØ‰∏ç‰ºöÂºπÂá∫ÊèêÁ§∫</p>
<p><strong>Â∞ùËØï4</strong></p>
<blockquote>
<p><a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000428264-New-Spring-Boot-Run-dashboard-not-showing-up" target="_blank" rel="noopener">https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000428264-New-Spring-Boot-Run-dashboard-not-showing-up</a></p>
<p><a href="https://blog.csdn.net/jianxia801/article/details/99576764" target="_blank" rel="noopener">https://blog.csdn.net/jianxia801/article/details/99576764</a></p>
</blockquote>
<img src="/images/2020/screencapture2020-04-09 AM10.30.31.jpg">

<p>‚Ä¶</p>
<p>fine</p>
<p>ÂéüÊù•‰∏ÄÁõ¥ÈÉΩÂú®Âïä</p>
<img src="/images/2020/screencapture2020-04-09 AM10.31.24.jpg">

<h1 id="Êê≠Âª∫EurekaÂÆ¢Êà∑Á´Ø"><a href="#Êê≠Âª∫EurekaÂÆ¢Êà∑Á´Ø" class="headerlink" title="Êê≠Âª∫EurekaÂÆ¢Êà∑Á´Ø"></a>Êê≠Âª∫EurekaÂÆ¢Êà∑Á´Ø</h1><ol>
<li><p>ÂàõÂª∫eureka-clientÊ®°Âùó</p>
</li>
<li><p>Ê∑ªÂä†‰æùËµñ</p>
</li>
<li><p>Âä†@EnableDiscoveryClientË°®ÊòéÊòØ‰∏Ä‰∏™EurekaÂÆ¢Êà∑Á´Ø</p>
</li>
<li><p>ÈÖçÁΩÆ</p>
</li>
</ol>
<h2 id="DEBUGÔºöÊ≥®ÂÜå‰∏≠ÂøÉ‰∏≠Ê≤°ÊúâÊòæÁ§∫eureka-client"><a href="#DEBUGÔºöÊ≥®ÂÜå‰∏≠ÂøÉ‰∏≠Ê≤°ÊúâÊòæÁ§∫eureka-client" class="headerlink" title="DEBUGÔºöÊ≥®ÂÜå‰∏≠ÂøÉ‰∏≠Ê≤°ÊúâÊòæÁ§∫eureka-client"></a>DEBUGÔºöÊ≥®ÂÜå‰∏≠ÂøÉ‰∏≠Ê≤°ÊúâÊòæÁ§∫eureka-client</h2><p><strong>Â∞ùËØï1</strong></p>
<p>ÂéüÊù•ÁöÑpom.xml‰∏≠ÁöÑ‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÊïôÁ®ã‰∏≠ËØ¥Ë¶ÅÊ∑ªÂä†ÁöÑ‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰∏ÄÂºÄÂßãÁî±‰∫éspring-cloud-starter-netflix-eureka-clientÂ∑≤ÁªèÊúâ‰∫Ü</p>
<p>Áõ¥Êé•Ê∑ªÂä†‰∫Ü‰∏äÈù¢Ëøô‰∏™spring-boot-starter-web</p>
<p>‰ΩÜÊòØËßâÂæóÂ•ΩÂÉèÊúâÁÇπÈóÆÈ¢òÔºü</p>
<p>spring-boot-starter-testÂíåspring-boot-starter-web‰ºö‰∏ç‰ºöÂÜ≤Á™ÅÂë¢?</p>
<img src="/images/2020/screencapture2020-04-09 AM10.39.19.jpg">

<p>Ê≤°ÂÜ≤Á™Å</p>
<p>‰ΩÜÊòØspring-boot-starter-test‰ºº‰πéÂ§ö‰∫ÜÂæàÂ§ö‰∏úË•øÔºàËØï‰∫Ü‰∏Ä‰∏ãÂπ∂‰∏çËÉΩÂà†Ôºâ</p>
<p><strong>Â∞ùËØï2</strong></p>
<p>Áúã‰∏ãÊä•Èîô</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2020-04-09 10:43:38.777 ERROR 1243 --- [           main] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint&#x3D;DefaultEndpoint&#123; serviceUrl&#x3D;&#39;http:&#x2F;&#x2F;localhost:8001&#x2F;eureka&#x2F;&#125;</span><br><span class="line"></span><br><span class="line">com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)</span><br></pre></td></tr></table></figure>

<p>Â•ΩÂÉèÂπ≤‰∫Ü‰∏™Ë†¢‰∫ã</p>
<img src="/images/2020/screencapture2020-04-09 AM10.44.58.jpg">

<p>ÊûúÁÑ∂ ÊúçÂä°Âô®Ê≤°ÂºÄ</p>
<p>ÈáçÊù• ÂÖàÂºÄeureka-server ÂÜçÂºÄeureka-client</p>
<img src="/images/2020/screencapture2020-04-09 AM10.46.19.jpg">

<img src="/images/2020/screencapture2020-04-09 AM10.46.31.jpg">

<p>Ê≥®ÂÜåÊàêÂäü</p>
<h1 id="Êê≠Âª∫EurekaÊ≥®ÂÜå‰∏≠ÂøÉÈõÜÁæ§"><a href="#Êê≠Âª∫EurekaÊ≥®ÂÜå‰∏≠ÂøÉÈõÜÁæ§" class="headerlink" title="Êê≠Âª∫EurekaÊ≥®ÂÜå‰∏≠ÂøÉÈõÜÁæ§"></a>Êê≠Âª∫EurekaÊ≥®ÂÜå‰∏≠ÂøÉÈõÜÁæ§</h1><p>ÁõÆÁöÑÔºöÈò≤Ê≠¢Ê≥®ÂÜå‰∏≠ÂøÉÊåÇ‰∫ÜÊï¥‰∏™ÂûÆÊéâ Êê≠Âª∫ÂèåËäÇÁÇπÁöÑÊ≥®ÂÜå‰∏≠ÂøÉÈõÜÁæ§</p>
<ol>
<li><p>2‰∏™ÈÖçÁΩÆÊñá‰ª∂</p>
<p>Ôºà‰∏çÁü•ÈÅìÂéüÊú¨ÁöÑapplication.ymlË¶Å‰∏çË¶ÅÂà†ÔºüÁúã‰∫Ü‰∏ãÊ∫êÁ†ÅÊ≤°ÊúâÂà†Ôºâ</p>
</li>
<li><p>Êú¨Êú∫ÈÖçÁΩÆÂüüÂêç</p>
<p>macOSÂú®/etc/hosts</p>
<p>Êîπ‰πãÂâçÁöÑÂ≠ò‰∏™Ê°£</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">##</span><br><span class="line"># Host Database</span><br><span class="line">#</span><br><span class="line"># localhost is used to configure the loopback interface</span><br><span class="line"># when the system is booting.  Do not change this entry.</span><br><span class="line">##</span><br><span class="line">127.0.0.1	localhost</span><br><span class="line">255.255.255.255	broadcasthost</span><br><span class="line">::1             localhost</span><br><span class="line">127.0.0.1 xmind.net</span><br><span class="line">127.0.0.1 www.xmind.net</span><br></pre></td></tr></table></figure>

<p>Âä†‰∏§Ë°å</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">127.0.0.1 replica1</span><br><span class="line">127.0.0.1 replica2</span><br></pre></td></tr></table></figure>
</li>
<li><p>ÂêØÂä®</p>
</li>
<li><p>‰øÆÊîπÈÖçÁΩÆÔºåËÆ©eureka-clientËøûÊé•Âà∞ÈõÜÁæ§</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ÈÖçÁΩÆÊ≥®ÂÜå‰∏≠ÂøÉÂú∞ÂùÄ</span><br><span class="line"># defaultZone: http:&#x2F;&#x2F;localhost:8001&#x2F;eureka</span><br><span class="line"># ÂêåÊó∂Ê≥®ÂÜåÂà∞‰∏§‰∏™Ê≥®ÂÜå‰∏≠ÂøÉ</span><br><span class="line">defaultZone: http:&#x2F;&#x2F;replica1:8002&#x2F;eureka&#x2F;,http:&#x2F;&#x2F;replica2:8003&#x2F;eureka&#x2F;</span><br></pre></td></tr></table></figure>

<h2 id="DEBUGÔºöÊúçÂä°Âô®Ê≤°ÊúâÊ≥®ÂÜå"><a href="#DEBUGÔºöÊúçÂä°Âô®Ê≤°ÊúâÊ≥®ÂÜå" class="headerlink" title="DEBUGÔºöÊúçÂä°Âô®Ê≤°ÊúâÊ≥®ÂÜå"></a>DEBUGÔºöÊúçÂä°Âô®Ê≤°ÊúâÊ≥®ÂÜå</h2><p>Â§çÂà∂‰∏Ä‰ªΩÂéüÂêØÂä®ÈÖçÁΩÆÔºå‰øÆÊîπ‰∏∫‰ªéreplica1ÂêØÂä®</p>
<img src="/images/2020/screencapture2020-04-09 AM10.57.57.jpg">

<p>Run</p>
<img src="/images/2020/screencapture2020-04-09 AM10.59.41.jpg">

<p>ÂèëÁé∞ÊúâÂ§á‰ªΩÔºå‰ΩÜÊòØÊ≤°ÊúâÊ≥®ÂÜåÔºü</p>
<img src="/images/2020/screencapture2020-04-09 AM10.59.52.jpg">

<p>‰ºº‰πéÊòØÂè™Â§çÂà∂‰∫Ü‰∏Ä‰ªΩÈÖçÁΩÆÔºåreplica2Ê≤°ÊúâÂêØÂä®</p>
<p>Âä†‰∏ä</p>
<img src="/images/2020/screencapture2020-04-09 AM11.10.28.jpg">

<p>Â•Ω‰∫Ü</p>
<img src="/images/2020/screencapture2020-04-09 AM11.11.58.jpg">

<h1 id="ÁªôEurekaÊ≥®ÂÜå‰∏≠ÂøÉÊ∑ªÂä†ËÆ§ËØÅ"><a href="#ÁªôEurekaÊ≥®ÂÜå‰∏≠ÂøÉÊ∑ªÂä†ËÆ§ËØÅ" class="headerlink" title="ÁªôEurekaÊ≥®ÂÜå‰∏≠ÂøÉÊ∑ªÂä†ËÆ§ËØÅ"></a>ÁªôEurekaÊ≥®ÂÜå‰∏≠ÂøÉÊ∑ªÂä†ËÆ§ËØÅ</h1><ol>
<li>ÂàõÂª∫eureka-security-serverÊ®°Âùó</li>
<li>Ê∑ªÂä†‰æùËµñ</li>
<li>ÈÖçÁΩÆpom.xml</li>
<li>Ê∑ªÂä†WebSecurityConfig</li>
<li>eureka-clientÊ≥®ÂÜåÂà∞ÊúâÁôªÂΩïËÆ§ËØÅÁöÑÊ≥®ÂÜå‰∏≠ÂøÉ</li>
<li>‰ª•application-security.ymlÈÖçÁΩÆËøêË°åeureka-client</li>
</ol>
<h2 id="DEBUGÔºöSpringSecurityÊ®°Âùó"><a href="#DEBUGÔºöSpringSecurityÊ®°Âùó" class="headerlink" title="DEBUGÔºöSpringSecurityÊ®°Âùó"></a>DEBUGÔºöSpringSecurityÊ®°Âùó</h2><p>Ë¶ÅÊ∑ªÂä†SpringSecurityÊ®°ÂùóÔºå‰πüËÆ∏ÊòØSpring Cloud Security‰∏ãÁöÑCloud SecurityÔºüÂÖàËØïËØï</p>
<p>ÂàõÂª∫Âá∫ÁöÑpom.xml‰∏≠‰æùËµñÊòØ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÊïôÁ®ã‰∏≠Ë¶ÅÂä†ÁöÑ‰æùËµñÊòØ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Â•ΩÂÉè‰∏çÊòØËøô‰∏™</p>
<p>ÈáçÊñ∞ÂàõÂª∫</p>
<p>ËøôÊ¨°Áõ¥Êé•ÊêúÁ¥¢Spring Security ÂèëÁé∞ÊúâËøô‰∏™Ê®°Âùó</p>
<img src="/images/2020/screencapture2020-04-09 AM11.18.28.jpg">

<p>ÔºàÊúÄÂêéÂèëÁé∞ÈÉΩË°åÔºå‰∏îÊ≤°ÂøÖË¶ÅÂàõÂª∫Êó∂Ê∑ªÂä†ÔºåÈöèÊó∂Âú®pom.xml‰∏≠‰øÆÊîπÈÉΩÂèØÔºâ</p>
<h2 id="DEBUGÔºöÊñ∞ÁöÑÊ®°ÂùóÊ≤°ÊúâË¢´ËØÜÂà´‰∏∫MavenÈ°πÁõÆ"><a href="#DEBUGÔºöÊñ∞ÁöÑÊ®°ÂùóÊ≤°ÊúâË¢´ËØÜÂà´‰∏∫MavenÈ°πÁõÆ" class="headerlink" title="DEBUGÔºöÊñ∞ÁöÑÊ®°ÂùóÊ≤°ÊúâË¢´ËØÜÂà´‰∏∫MavenÈ°πÁõÆ"></a>DEBUGÔºöÊñ∞ÁöÑÊ®°ÂùóÊ≤°ÊúâË¢´ËØÜÂà´‰∏∫MavenÈ°πÁõÆ</h2><blockquote>
<p><a href="https://www.jianshu.com/p/909eb8a48d49" target="_blank" rel="noopener">https://www.jianshu.com/p/909eb8a48d49</a></p>
</blockquote>
<p>Âè≥ËæπMavenÊ†èÔºãÂØπÂ∫îÁöÑpom.xml</p>
<h2 id="DEBUGÔºöÂêØÂä®Êä•Èîô-amp-Whitelabel-Error-Page"><a href="#DEBUGÔºöÂêØÂä®Êä•Èîô-amp-Whitelabel-Error-Page" class="headerlink" title="DEBUGÔºöÂêØÂä®Êä•Èîô&amp;Whitelabel Error Page"></a>DEBUGÔºöÂêØÂä®Êä•Èîô&amp;Whitelabel Error Page</h2><img src="/images/2020/screencapture2020-04-09 AM11.27.19.jpg">

<blockquote>
<p><a href="https://blog.csdn.net/qq_28379809/article/details/102789716" target="_blank" rel="noopener">https://blog.csdn.net/qq_28379809/article/details/102789716</a></p>
</blockquote>
<p>Ê∑ªÂä†‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÂêØÂä®</p>
<img src="/images/2020/screencapture2020-04-09 AM11.32.17.jpg">

<p>ËæìÂÖ•Ë¥¶Âè∑ÂØÜÁ†Å</p>
<img src="/images/2020/screencapture2020-04-09 AM11.32.27.jpg">

<p>ÂèëÁé∞EurekaSecurityServerApplicationÊ≤°ÊúâÂä†@EnableEurekaServer</p>
<img src="/images/2020/screencapture2020-04-09 AM11.45.35.jpg">

<p>pom.xml‰∏≠Êúâspring-cloud-starter-netflix-eureka-serverÔºå‰∏∫‰ªÄ‰πàÂØº‰∏çËøõÊù•Âë¢</p>
<p>Âíåeureka-serverÁöÑÈÖçÁΩÆÊØîËæÉÔºåÂèëÁé∞Â∞ë‰∏ÄÂè•</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>Hoxton.SR3<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Âä†‰∏ä</p>
<p>ËøòÊòØ‰∏çË°å</p>
<p>Ê∫êÁ†Å‰∏≠ÊòØ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>Hoxton.RELEASE<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Áé∞Âú®ÁöÑ‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.security<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-security-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Ê∫êÁ†Å‰∏≠ÁöÑ‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Â§çÂà∂ËøáÂéª</p>
<p>Reimport Maven Projects</p>
<p>ÂèëÁé∞Ê≠£Âú®‰∏ãËΩΩÁöÑËøõÂ∫¶Êù°</p>
<p>ÊâÄ‰ª•ÈöæÈÅìÂàöÊâçÊòØÂõ†‰∏∫‰æùËµñËøòÊ≤°‰∏ãËΩΩÂÆåÂêó</p>
<p>‰∏ãËΩΩÂÆåÊàê</p>
<p>ÂÖ®Á∫¢‰∫Ü‚Ä¶</p>
<img src="/images/2020/screencapture2020-04-09 AM11.58.06.jpg">

<p>ÊîπÂõûÂéüÊú¨ÁöÑ‰æùËµñ Âà†Êéâspring-boot-starter-web ‰∏çÁ∫¢‰∫Ü</p>
<p>ÂêØÂä®</p>
<img src="/images/2020/screencapture2020-04-09 AM11.59.54.jpg">

<p>üôÉ</p>
<p>‰ªîÁªÜÁúã‰∏ãÊ∫êÁ†ÅÁöÑÈÖçÁΩÆÊòØ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ËÄå‰∏çÊòØ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÊâÄ‰ª•ÈöæÈÅìËøòÊòØÂ∫îËØ•ÂºïÂÖ•Spring Cloud SecurityÊ®°ÂùóÔºü</p>
<p>ÈáçÊñ∞ÂàõÂª∫ËØïËØï</p>
<p>ÊàêÂäüÔºÅ</p>
<h2 id="DEBUGÔºö‰ª•application-security-ymlÈÖçÁΩÆËøêË°åeureka-client"><a href="#DEBUGÔºö‰ª•application-security-ymlÈÖçÁΩÆËøêË°åeureka-client" class="headerlink" title="DEBUGÔºö‰ª•application-security.ymlÈÖçÁΩÆËøêË°åeureka-client"></a>DEBUGÔºö‰ª•application-security.ymlÈÖçÁΩÆËøêË°åeureka-client</h2><p>Áé∞Âú®eureka-clientÊúâ2‰∏™yml</p>
<img src="/images/2020/screencapture2020-04-09 PM3.55.10.jpg">

<p>Áõ¥Êé•ËøêË°åËøòÊòØapplication.ymlÁöÑ8101Á´ØÂè£</p>
<p>Ê†πÊçÆÂàöÊâçeureka-serverÁöÑÂ§ö‰∏™yml</p>
<p>ÊòØ‰øÆÊîπ‰∫ÜÊåáÂÆö‰∏ªÊú∫Âú∞ÂùÄ</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># application.yml</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">localhost</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># application-replica1.yml</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">replica1</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># application-replica2.yml</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">replica2</span></span><br></pre></td></tr></table></figure>

<p>ÁÑ∂ÂêéÂú®Edit Configurations‰∏≠Â§çÂà∂ConfigurationÔºåÁÑ∂Âêé‰øÆÊîπ‰∏ªÊú∫Âêç</p>
<p>‰∫éÊòØËøôÈáå‰πüÂä†‰∏äÊåáÂÆö‰∏ªÊú∫Âêç</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">instance:</span></span><br><span class="line">  <span class="attr">hostname:</span> <span class="string">eureka-client-security</span></span><br></pre></td></tr></table></figure>

<p>Â§çÂà∂‰∏Ä‰∏™EurekaClientApplicationÁöÑÈÖçÁΩÆÔºåActive profilesÂ§ÑÊîπ‰∏∫‰∏ªÊú∫Âêç</p>
<img src="/images/2020/screencapture2020-04-09 PM4.01.03.jpg">

<p>‰ΩÜËøòÊòØ8101Ôºü</p>
<img src="/images/2020/screencapture2020-04-09 PM4.04.44.jpg">

<p>ËßÇÂØüÂèëÁé∞</p>
<p>ServerÁöÑÈÖçÁΩÆÊñá‰ª∂1Âè´application-replica1.ymlÔºåhostnameÊòØreplica1ÔºåActive profilesÂ°´ÁöÑreplica1</p>
<p>ÈÖçÁΩÆÊñá‰ª∂2Âè´application-replica2.ymlÔºåhostnameÊòØreplica2ÔºåActive profilesÂ°´ÁöÑreplica2</p>
<p>ÈöæÈÅì‚Ä¶</p>
<p>ÊääClientÁöÑapplication-security.yml‰∏≠ÊîπÊàê</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">instance:</span></span><br><span class="line">  <span class="attr">hostname:</span> <span class="string">security</span></span><br></pre></td></tr></table></figure>

<p>Active profilesÊîπÊàêsecurity</p>
<p>Run</p>
<img src="/images/2020/screencapture2020-04-09 PM4.10.10.jpg">

<p>ÊâìÂºÄ‰∫ÜÔºÅ</p>
<img src="/images/2020/screencapture2020-04-09 PM4.11.03.jpg">

<p>Êúâ‰∏™<strong>EMERGENCY!</strong> </p>
<p>‰øùÊä§Êú∫Âà∂ÂêéÈù¢ÂÜçÁúã</p>
<p>ÂÖàËØïËØïËøô‰∏™ÊåáÂÆöymlÂà∞Â∫ïÊòØÊÄé‰πàÊåáÂÆöÁöÑ</p>
<table>
<thead>
<tr>
<th>Êñá‰ª∂Âêç</th>
<th>hostname</th>
<th>Active profiles</th>
<th>ËÉΩÂê¶ÂêØÂä®</th>
</tr>
</thead>
<tbody><tr>
<td>application-security.yml</td>
<td>eureka-client-security</td>
<td>eureka-client-security</td>
<td>Âê¶</td>
</tr>
<tr>
<td>application-security.yml</td>
<td>security</td>
<td>security</td>
<td>ÂèØ</td>
</tr>
<tr>
<td>application-security.yml</td>
<td>securityX</td>
<td>security</td>
<td>ÂèØ</td>
</tr>
<tr>
<td>application-securityX.yml</td>
<td>security</td>
<td>security</td>
<td>Âê¶</td>
</tr>
</tbody></table>
<p>ÁúãÊù•Active profilesË¶ÅÂ°´Êñá‰ª∂ÂêçÂêéÈù¢ÁöÑÈÉ®ÂàÜ</p>
<p>ÊïôÁ®ãÊúÄ‰∏ãÈù¢ÁöÑÂ∏∏Áî®ÈÖçÁΩÆ</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span> <span class="comment">#eurekaÂÆ¢Êà∑Á´ØÈÖçÁΩÆ</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">true</span> <span class="comment">#ÊòØÂê¶Â∞ÜËá™Â∑±Ê≥®ÂÜåÂà∞eurekaÊúçÂä°Á´Ø‰∏äÂéª</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">true</span> <span class="comment">#ÊòØÂê¶Ëé∑ÂèñeurekaÊúçÂä°Á´Ø‰∏äÊ≥®ÂÜåÁöÑÊúçÂä°ÂàóË°®</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8001/eureka/</span> <span class="comment"># ÊåáÂÆöÊ≥®ÂÜå‰∏≠ÂøÉÂú∞ÂùÄ</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># ÂêØÁî®eurekaÂÆ¢Êà∑Á´Ø</span></span><br><span class="line">    <span class="attr">registry-fetch-interval-seconds:</span> <span class="number">30</span> <span class="comment">#ÂÆö‰πâÂéªeurekaÊúçÂä°Á´ØËé∑ÂèñÊúçÂä°ÂàóË°®ÁöÑÊó∂Èó¥Èó¥Èöî</span></span><br><span class="line">  <span class="attr">instance:</span> <span class="comment">#eurekaÂÆ¢Êà∑Á´ØÂÆû‰æãÈÖçÁΩÆ</span></span><br><span class="line">    <span class="attr">lease-renewal-interval-in-seconds:</span> <span class="number">30</span> <span class="comment">#ÂÆö‰πâÊúçÂä°Â§ö‰πÖÂéªÊ≥®ÂÜå‰∏≠ÂøÉÁª≠Á∫¶</span></span><br><span class="line">    <span class="attr">lease-expiration-duration-in-seconds:</span> <span class="number">90</span> <span class="comment">#ÂÆö‰πâÊúçÂä°Â§ö‰πÖ‰∏çÂéªÁª≠Á∫¶ËÆ§‰∏∫ÊúçÂä°Â§±Êïà</span></span><br><span class="line">    <span class="attr">metadata-map:</span></span><br><span class="line">      <span class="attr">zone:</span> <span class="string">guangdong</span> <span class="comment">#ÊâÄÂú®Âå∫Âüü</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">localhost</span> <span class="comment">#ÊúçÂä°‰∏ªÊú∫ÂêçÁß∞</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">false</span> <span class="comment">#ÊòØÂê¶‰ºòÂÖà‰ΩøÁî®ipÊù•‰Ωú‰∏∫‰∏ªÊú∫Âêç</span></span><br><span class="line">  <span class="attr">server:</span> <span class="comment">#eurekaÊúçÂä°Á´ØÈÖçÁΩÆ</span></span><br><span class="line">    <span class="attr">enable-self-preservation:</span> <span class="literal">false</span> <span class="comment">#ÂÖ≥Èó≠eurekaÊúçÂä°Á´ØÁöÑ‰øùÊä§Êú∫Âà∂</span></span><br></pre></td></tr></table></figure>

<p>‰∫éÊòØÂú®eureka-serverÁöÑyml‰∏≠Âä†‰∏ä</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span> <span class="comment">#eurekaÊúçÂä°Á´ØÈÖçÁΩÆ</span></span><br><span class="line">    <span class="attr">enable-self-preservation:</span> <span class="literal">true</span> <span class="comment">#ÂÖ≥Èó≠eurekaÊúçÂä°Á´ØÁöÑ‰øùÊä§Êú∫Âà∂</span></span><br></pre></td></tr></table></figure>

<p>Â∞±Ê≤°Êúâ<strong>EMERGENCY!</strong> ‰∫Ü</p>
<h2 id="ÂÖ≥‰∫éeureka-security-serverÁöÑ‰æùËµñ"><a href="#ÂÖ≥‰∫éeureka-security-serverÁöÑ‰æùËµñ" class="headerlink" title="ÂÖ≥‰∫éeureka-security-serverÁöÑ‰æùËµñ"></a>ÂÖ≥‰∫éeureka-security-serverÁöÑ‰æùËµñ</h2><p>ÂèëÁé∞ÊïôÁ®ãÈáåÂÜôÁöÑ‰æùËµñÊòØ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Ê∫êÁ†ÅÈáåÁî®ÁöÑ‰æùËµñÊòØ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Ëá™Â∑±ÂàöÊâçÂêØÂä®ÊàêÂäüÁöÑÊòØspring-cloud-starter-security</p>
<p>ÊîπÊàêspring-boot-starter-securityËØï‰∫Ü‰∏Ä‰∏ã‰πüÊàêÂäü‰∫Ü</p>
<h2 id="ÈóÆÈ¢òËß£ÂÜ≥ÊÄªÁªì"><a href="#ÈóÆÈ¢òËß£ÂÜ≥ÊÄªÁªì" class="headerlink" title="ÈóÆÈ¢òËß£ÂÜ≥ÊÄªÁªì"></a>ÈóÆÈ¢òËß£ÂÜ≥ÊÄªÁªì</h2><ol>
<li>Áî®Spring Cloud SecurityÊ®°ÂùóÔºå‰∏çÊòØSpring SecurityÊ®°Âùó</li>
<li>EurekaSecurityServerApplicationË¶ÅËÆ∞ÂæóÂä†@EnableEurekaServer</li>
<li>Áî®ÊåáÂÆöÁöÑymlÔºàapplication-XXX.ymlÔºâÂêØÂä®Spring BootÔºåÂú®Edit Configurations‰∏≠Â§çÂà∂‰∏Ä‰∏™ÂéüConfigurationÔºåActive profilesÂ°´ÊåáÂÆöymlÊñá‰ª∂ÂêéÂçäÈÉ®ÂàÜÔºàXXXÔºâÔºåËøêË°åËøô‰∏™Configuration</li>
</ol>
<h1 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h1><img src="/images/2020/screencapture2020-04-09 PM4.44.05.jpg">]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>springcloud</tag>
      </tags>
  </entry>
  <entry>
    <title>Âà∑È¢òÈò∂ÊÆµ‰∏ÄÂÆåÂ∑•Á∫™ÂøµÔºÅ</title>
    <url>/2020/04/08/memo/</url>
    <content><![CDATA[<p>Ëøô‰∏™<a href="https://github.com/CyC2018/CS-Notes/blob/master/notes/Leetcode%20%E9%A2%98%E8%A7%A3%20-%20%E7%9B%AE%E5%BD%95.md" title="" target="">ÁõÆÂΩï</a>Áªà‰∫éÂÆåÂ∑•‰∫Ü</p>
<p>LeetCode‰ªéÂéªÂπ¥ÂáÜÂ§áÁÆóÊ≥ïËÄÉËØïÂºÄÂßãÂà∑</p>
<p>Âà∞Áé∞Âú®ÂàöÂ•Ω2222‰∏™Á°¨Â∏ÅüòÉ</p>
<p>Ê£íÁêÉÂ∏ΩÔºÅÂÜ≤È∏≠ÔºÅ</p>
<img src="/images/2020/screencapture2020-04-08 PM7.47.28.jpg" width=300>

<p>3ÊúàÊØèÊó•1È¢òÂøò‰∫Ü1Â§© Â∞±ÈÇ£‰πà Âπ≤Âπ≤ÂáÄÂáÄ Êó†ÂøßÊó†ËôëÁöÑ Âøò‰∫Üüò≠</p>
<p>4ÊúàÊêû‰∫ÜÂº†Êó•ÂéÜË¥¥Âú®Â∫äÂØπÈù¢ÁöÑÁôΩÊùø‰∏ä ‰ΩÜÊÑø‚Ä¶</p>
<hr>
<p>ÊúÄËøëÂë®ËµõËøò‰∏çÂ¶ÇÂàöÂºÄÂßãÂÅöÂæóÂ•Ω</p>
<p>Êúâ‰∏Ä‰∏ù‰∏ùÂáÑÂáâ</p>
<p>Â∏åÊúõÁÉßÊéâÁöÑËÑëÁªÜËÉûÁªôÊñ∞ÁöÑÁ•ûÁªèÂõûË∑ØÊèê‰æõÂÖªÊñô‰∫ÜÂêß</p>
<img src="/images/2020/img-91ef518e959886326719c5d07a824772.jpg" width=400>

<p>ÊúÄËøëÁúãÂà∞ËøôÂº†ÂõæËßâÂæóË≤å‰ººÂæàÊúâÈÅìÁêÜ</p>
<p>ÊîæÂú®ËøôÈáå</p>
<p>‰∏çÁü•ÈÅì‰ª•Âêé‰ºö‰∏ç‰ºöÊúâ‰ªÄ‰πàÊÑüÂèó</p>
<hr>
<p>ÊúÄÂêéÊòØ‰∏ÄÂ§ßÊù°ÁúãÊùøÁöÑÂÆåÂ∑•ËÆ∞ÂΩï</p>
<img src="/images/2020/Apr-09-2020 15-35-04.gif">

<p>Âø´‰πê</p>
<p>ÂÆÖÂÆ∂ËøêÂä®ËÆ°ÂàíËøõË°å‰∏≠</p>
<p>‰∏§‰∏™ÊúàÊ≤°Âá∫Èó®ËøòËΩª‰∫Ü‰πüÊòØÂæàÈúáÊÉä</p>
<p>ÁªßÁª≠ÊâìÂç°ÔºÅÂòøÂíªÔºÅ</p>
<p>‰πüËÆ∏Âì™Â§©Â∞±ËÉΩÂäàÂèâ‰∫ÜÂë¢</p>
]]></content>
      <categories>
        <category>Memo</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVCÁ¨îËÆ∞07 SSMÊï¥Âêà</title>
    <url>/2020/04/07/note-springmvc-07/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1Sb411s7qa" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Sb411s7qa</a></p>
<p>P46~54</p>
</blockquote>
<p><strong>‰∏âÂ±ÇÊû∂ÊûÑ</strong></p>
<img src="/images/2020/screencapture2020-04-07 AM10.29.11.jpg">

<p>ÂÖà‰øùËØÅÊØè‰∏™Ê°ÜÊû∂ËÉΩÂçïÁã¨ËøêË°å</p>
<p>ÁÑ∂ÂêéÁî®SpringÊï¥ÂêàÂè¶Â§ñ2‰∏™</p>
<h1 id="ÂáÜÂ§áÊï∞ÊçÆÂ∫ì"><a href="#ÂáÜÂ§áÊï∞ÊçÆÂ∫ì" class="headerlink" title="ÂáÜÂ§áÊï∞ÊçÆÂ∫ì"></a>ÂáÜÂ§áÊï∞ÊçÆÂ∫ì</h1><p>accountË°®Ôºå‰ª•ÂâçÂª∫Ëøá‰∫ÜÔºåÁªßÁª≠Áî®</p>
<img src="/images/2020/screencapture2020-04-07 AM10.34.27.jpg" width=300>

<h1 id="Êê≠Âª∫ÁéØÂ¢É"><a href="#Êê≠Âª∫ÁéØÂ¢É" class="headerlink" title="Êê≠Âª∫ÁéØÂ¢É"></a>Êê≠Âª∫ÁéØÂ¢É</h1><p>ÂàõÂª∫MavenÂ∑•Á®ãÔºåÈÄâwebapp</p>
<p>Ëß£ÂÜ≥ÂàõÂª∫È°πÁõÆËøáÊÖ¢ÔºåÂä†‰∏ÄÂØπarchetypeCatalogÔºöinternal</p>
<h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><p>ÁâàÊú¨ÈîÅÂÆö</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slf4j.version</span>&gt;</span>1.6.6<span class="tag">&lt;/<span class="name">slf4j.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">log4j.version</span>&gt;</span>1.2.12<span class="tag">&lt;/<span class="name">log4j.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mybatis.version</span>&gt;</span>3.4.5<span class="tag">&lt;/<span class="name">mybatis.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Âä†‰æùËµñ</p>
<img src="/images/2020/screencapture2020-04-07 AM10.54.56.jpg" width=400>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- spring IOC --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- spring AOP --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- JdbcTemplate --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- ‰∫ãÂä° --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- ÊµãËØï --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- mysqlÈ©±Âä® --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- ËøûÊé•Ê±† --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- spring MVC --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- servlet --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- jspÊ†áÁ≠æ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- log --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- mybatis --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ÂàõÂª∫ÁõÆÂΩï"><a href="#ÂàõÂª∫ÁõÆÂΩï" class="headerlink" title="ÂàõÂª∫ÁõÆÂΩï"></a>ÂàõÂª∫ÁõÆÂΩï</h2><p>javaÂíåresourcesÊñá‰ª∂Â§π</p>
<img src="/images/2020/screencapture2020-04-07 AM10.57.25.jpg" width=300>

<p>Áî®Âà∞ÁöÑÁ±ª</p>
<img src="/images/2020/screencapture2020-04-07 AM11.07.04.jpg" width=300>

<p>Account‰∏â‰∏™Â±ûÊÄß</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> Double money;</span><br></pre></td></tr></table></figure>

<p>ÂÅö2‰∏™ÊñπÊ≥ï</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">(Account account)</span></span>;</span><br></pre></td></tr></table></figure>

<h1 id="SpringÊ°ÜÊû∂"><a href="#SpringÊ°ÜÊû∂" class="headerlink" title="SpringÊ°ÜÊû∂"></a>SpringÊ°ÜÊû∂</h1><h2 id="ÈÖçÁΩÆ-applicationContext-xml"><a href="#ÈÖçÁΩÆ-applicationContext-xml" class="headerlink" title="ÈÖçÁΩÆ applicationContext.xml"></a>ÈÖçÁΩÆ applicationContext.xml</h2><p>resources‰∏ãÊñ∞Âª∫applicationContext.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/tx/spring-tx.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ÂºÄÂêØÊ≥®Ëß£ÁöÑÊâ´ÊèèÔºåÂ∏åÊúõÂ§ÑÁêÜserviceÂíådaoÔºåcontroller‰∏çÈúÄË¶ÅSpringÊ°ÜÊû∂ÂéªÂ§ÑÁêÜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.coconutnut"</span> &gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ÈÖçÁΩÆÂì™‰∫õÊ≥®Ëß£‰∏çÊâ´Êèè --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>controllerÊòØË°®Áé∞Â±ÇÁöÑÔºåSpringÊ°ÜÊû∂‰∏çÁÆ°</p>
<h2 id="Âä†Ê≥®Ëß£"><a href="#Âä†Ê≥®Ëß£" class="headerlink" title="Âä†Ê≥®Ëß£"></a>Âä†Ê≥®Ëß£</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"‰∏öÂä°Â±ÇÔºöÊü•ËØ¢ÊâÄÊúâ"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"‰∏öÂä°Â±ÇÔºö‰øùÂ≠òË¥¶Êà∑"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><p>Áî®junitÂçïÂÖÉÊµãËØï</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSpring</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"classpath:applicationContext.xml"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Ëé∑ÂèñÂØπË±°</span></span><br><span class="line">        IAccountService as = (IAccountService) ac.getBean(<span class="string">"accountService"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Ë∞ÉÁî®ÊñπÊ≥ï</span></span><br><span class="line">        as.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-04-07 AM11.21.45.jpg">

<p>WARNINGËØ¥Ê≤°Êúâlog4jÁöÑÈÖçÁΩÆÊñá‰ª∂</p>
<p>Â§çÂà∂‰∏Ä‰∏™log4j.propertiesÂà∞resourcesÁõÆÂΩï‰∏ãÂç≥ÂèØ</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Set root category priority to INFO and its only appender to CONSOLE.</span></span><br><span class="line"><span class="comment">#log4j.rootCategory=INFO, CONSOLE            debug   info   warn error fatal</span></span><br><span class="line"><span class="meta">log4j.rootCategory</span>=<span class="string">info, CONSOLE, LOGFILE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the enterprise logger category to FATAL and its only appender to CONSOLE.</span></span><br><span class="line"><span class="meta">log4j.logger.org.apache.axis.enterprise</span>=<span class="string">FATAL, CONSOLE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CONSOLE is set to be a ConsoleAppender using a PatternLayout.</span></span><br><span class="line"><span class="meta">log4j.appender.CONSOLE</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.CONSOLE.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.CONSOLE.layout.ConversionPattern</span>=<span class="string">%d&#123;ISO8601&#125; %-6r [%15.15t] %-5p %30.30c %x - %m\n</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># LOGFILE is set to be a File appender using a PatternLayout.</span></span><br><span class="line"><span class="meta">log4j.appender.LOGFILE</span>=<span class="string">org.apache.log4j.FileAppender</span></span><br><span class="line"><span class="meta">log4j.appender.LOGFILE.File</span>=<span class="string">/Users/coconutnut/TREE/Midgard/Idea/SSM/axis.log</span></span><br><span class="line"><span class="meta">log4j.appender.LOGFILE.Append</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">log4j.appender.LOGFILE.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.LOGFILE.layout.ConversionPattern</span>=<span class="string">%d&#123;ISO8601&#125; %-6r [%15.15t] %-5p %30.30c %x - %m\n</span></span><br></pre></td></tr></table></figure>

<p>Ë¶ÅÊîπ‰∏Ä‰∏ãË∑ØÂæÑ</p>
<h1 id="SpringMVCÊ°ÜÊû∂"><a href="#SpringMVCÊ°ÜÊû∂" class="headerlink" title="SpringMVCÊ°ÜÊû∂"></a>SpringMVCÊ°ÜÊû∂</h1><h2 id="ÈÖçÁΩÆ-web-xml"><a href="#ÈÖçÁΩÆ-web-xml" class="headerlink" title="ÈÖçÁΩÆ web.xml"></a>ÈÖçÁΩÆ web.xml</h2><p>WEB-INFÊñá‰ª∂Â§π‰∏ãÁöÑweb.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- ÈÖçÁΩÆÂâçÁ´ØÊéßÂà∂Âô® --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Âä†ËΩΩspringmvc.xmlÈÖçÁΩÆÊñá‰ª∂ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ÂêØÂä®ÊúçÂä°Âô®ÔºåÂàõÂª∫ËØ•servlet --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Ëß£ÂÜ≥‰∏≠Êñá‰π±Á†ÅÁöÑËøáÊª§Âô® --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ÈÖçÁΩÆ-springmvc-xml"><a href="#ÈÖçÁΩÆ-springmvc-xml" class="headerlink" title="ÈÖçÁΩÆ springmvc.xml"></a>ÈÖçÁΩÆ springmvc.xml</h2><p>resourcesÊñá‰ª∂Â§π‰∏ãÊñ∞Âª∫springmvc.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span> <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ÂºÄÂêØÊ≥®Ëß£Êâ´ÊèèÔºåÂè™Êâ´ÊèèControllerÊ≥®Ëß£ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.coconutnut"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ÈÖçÁΩÆÁöÑËßÜÂõæËß£ÊûêÂô®ÂØπË±°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"internalResourceViewResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/pages/"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ËøáÊª§ÈùôÊÄÅËµÑÊ∫ê--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/css/"</span> <span class="attr">mapping</span>=<span class="string">"/css/**"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/images/"</span> <span class="attr">mapping</span>=<span class="string">"/images/**"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/js/"</span> <span class="attr">mapping</span>=<span class="string">"/js/**"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ÂºÄÂêØSpringMVCÊ≥®Ëß£ÁöÑÊîØÊåÅ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="È°µÈù¢"><a href="#È°µÈù¢" class="headerlink" title="È°µÈù¢"></a>È°µÈù¢</h2><p>index.jsp‰∏≠Âä†‰∏Ä‰∏™Ë∂ÖÈìæÊé•</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;a href="account/findAll"&gt;ÊµãËØï&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>WEB-INF‰∏≠Êñ∞Âª∫pagesÊñá‰ª∂Â§πÔºåÊñ∞Âª∫list.jsp</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;Êü•ËØ¢ÊâÄÊúâÁöÑË¥¶Êà∑‰ø°ÊÅØ&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ÊéßÂà∂Âô®"><a href="#ÊéßÂà∂Âô®" class="headerlink" title="ÊéßÂà∂Âô®"></a>ÊéßÂà∂Âô®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/account"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Ë°®Áé∞Â±ÇÔºöÊü•ËØ¢ÊâÄÊúâ"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"TODO"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÈÉ®ÁΩ≤"><a href="#ÈÉ®ÁΩ≤" class="headerlink" title="ÈÉ®ÁΩ≤"></a>ÈÉ®ÁΩ≤</h2><img src="/images/2020/screencapture2020-04-07 AM11.40.21.jpg">

<h2 id="ÊµãËØï-1"><a href="#ÊµãËØï-1" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><img src="/images/2020/screencapture2020-04-07 AM11.41.33.jpg">

<img src="/images/2020/screencapture2020-04-07 AM11.41.38.jpg">

<h1 id="SpringÊï¥ÂêàSpringMVC"><a href="#SpringÊï¥ÂêàSpringMVC" class="headerlink" title="SpringÊï¥ÂêàSpringMVC"></a>SpringÊï¥ÂêàSpringMVC</h1><p>ÁõÆÊ†áÔºöController‰∏≠Ë∞ÉÁî®‰∏öÂä°Â±ÇÊñπÊ≥ï</p>
<p>ÊñπÊ≥ïÔºöË¶ÅÊääServiceÊ≥®ÂÖ•Âà∞Controller‰∏≠</p>
<p>ÈóÆÈ¢òÔºöweb.xml‰∏≠ÈÖçÁΩÆ‰∫Üspringmvc.xmlÔºåspringmvc.xml‰∏≠ÈÖçÁΩÆ‰∫ÜÂØπControllerÁöÑÊâ´ÊèèÔºåÂÖ∂ÂÆÉÊâ´ÊèèÁöÑÈÖçÁΩÆÂú®applicationContext.xml‰∏≠ÔºåËÄåËøô‰∏™Êñá‰ª∂ÂßãÁªàÊ≤°ÊúâË¢´Âä†ËΩΩËøá</p>
<p>Ëß£ÂÜ≥ÔºöÂêØÂä®tomcatÊúçÂä°Âô®Êó∂ÔºåÂä†ËΩΩSpringÁöÑÈÖçÁΩÆÊñá‰ª∂applicationContext.xml</p>
<p>ServletContextÂØπË±°ÁîüÂëΩÂë®ÊúüÂíåÊúçÂä°Âô®Áõ∏ÂêåÔºåÂèØ‰ª•Áî®ÁõëÂê¨Âô®ÁõëÂê¨ÂÖ∂ÂàõÂª∫ÂíåÈîÄÊØÅ</p>
<p>‰∫éÊòØÔºåÂèØ‰ª•Âú®web.xml‰∏≠Áî®ÁõëÂê¨Âô®Âä†ËΩΩSpringÁöÑÈÖçÁΩÆÊñá‰ª∂</p>
<p>ÁõëÂê¨Âô®ÊòØspring-webÊèê‰æõÁöÑ</p>
<p>ÂÆÉÈªòËÆ§Âè™Âä†ËΩΩWEB-INFÁõÆÂΩï‰∏ãÁöÑapplicationContext.xmlÈÖçÁΩÆÊñá‰ª∂</p>
<p>ÂèØ‰ª•Â§çÂà∂‰∏Ä‰ªΩ‰∏¢Âà∞WEB-INFÁõÆÂΩïÔºåÊàñËÄÖÊâãÂä®ËÆæÁΩÆË∑ØÂæÑ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆSpringÁöÑÁõëÂê¨Âô®ÔºåÈªòËÆ§Âè™Âä†ËΩΩWEB-INFÁõÆÂΩï‰∏ãÁöÑapplicationContext.xmlÈÖçÁΩÆÊñá‰ª∂ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ËÆæÁΩÆÈÖçÁΩÆÊñá‰ª∂ÁöÑË∑ØÂæÑ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ËøôÊ†∑ÂêØÂä®ÊúçÂä°Âô®Êó∂ÔºåSpringÁöÑÈÖçÁΩÆÊñá‰ª∂‰πüÂä†ËΩΩ‰∫Ü</p>
<p>ServiceÂíåControllerÈÉΩÊîæÂà∞ÂÆπÂô®‰∏≠‰∫Ü</p>
<p>‰∫éÊòØÂèØ‰ª•Âú®AccountController‰∏≠ËøõË°å‰æùËµñÊ≥®ÂÖ•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/account"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountService accountService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Ë°®Áé∞Â±ÇÔºöÊü•ËØ¢ÊâÄÊúâ"</span>);</span><br><span class="line">        accountService.findAll();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"list"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÊµãËØï-2"><a href="#ÊµãËØï-2" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><p>ÁÇπÂáªÊµèËßàÂô®‰∏≠ÊµãËØïÊåâÈíÆ</p>
<img src="/images/2020/screencapture2020-04-07 PM12.00.15.jpg">

<p>ÊàêÂäü</p>
<h1 id="MyBatisÊ°ÜÊû∂"><a href="#MyBatisÊ°ÜÊû∂" class="headerlink" title="MyBatisÊ°ÜÊû∂"></a>MyBatisÊ°ÜÊû∂</h1><h2 id="Âä†Ê≥®Ëß£-1"><a href="#Âä†Ê≥®Ëß£-1" class="headerlink" title="Âä†Ê≥®Ëß£"></a>Âä†Ê≥®Ëß£</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from account"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert</span>(<span class="string">"insert into account (name,money) values (#&#123;name&#125;,#&#123;money&#125;)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÈÖçÁΩÆ-sqlMapConfig-xml"><a href="#ÈÖçÁΩÆ-sqlMapConfig-xml" class="headerlink" title="ÈÖçÁΩÆ sqlMapConfig.xml"></a>ÈÖçÁΩÆ sqlMapConfig.xml</h2><p>Âú®resources‰∏≠Êñ∞Âª∫sqlMapConfig.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ÈÖçÁΩÆÁéØÂ¢É --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/groot?characterEncoding=utf8"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"iamgroot"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ÂºïÂÖ•Êò†Â∞ÑÈÖçÁΩÆÊñá‰ª∂ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.coconutnut.dao"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ÊµãËØï-3"><a href="#ÊµãËØï-3" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMyBatis</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂</span></span><br><span class="line">        InputStream in = Resources.getResourceAsStream(<span class="string">"sqlMapConfig.xml"</span>);</span><br><span class="line">        <span class="comment">// ÂàõÂª∫SqlSessionFactoryÂØπË±°</span></span><br><span class="line">        SqlSessionFactory factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);</span><br><span class="line">        <span class="comment">// ÂàõÂª∫SqlSessionÂØπË±°</span></span><br><span class="line">        SqlSession session = factory.openSession();</span><br><span class="line">        <span class="comment">// Ëé∑ÂèñÂà∞‰ª£ÁêÜÂØπË±°</span></span><br><span class="line">        IAccountDao dao = session.getMapper(IAccountDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// Êü•ËØ¢ÊâÄÊúâÊï∞ÊçÆ</span></span><br><span class="line">        List&lt;Account&gt; list = dao.findAll();</span><br><span class="line">        <span class="keyword">for</span>(Account account : list)&#123;</span><br><span class="line">            System.out.println(account);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ÂÖ≥Èó≠ËµÑÊ∫ê</span></span><br><span class="line">        session.close();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setName(<span class="string">"ÁÜäÂ§ß"</span>);</span><br><span class="line">        account.setMoney(<span class="number">400</span>d);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂</span></span><br><span class="line">        InputStream in = Resources.getResourceAsStream(<span class="string">"sqlMapConfig.xml"</span>);</span><br><span class="line">        <span class="comment">// ÂàõÂª∫SqlSessionFactoryÂØπË±°</span></span><br><span class="line">        SqlSessionFactory factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);</span><br><span class="line">        <span class="comment">// ÂàõÂª∫SqlSessionÂØπË±°</span></span><br><span class="line">        SqlSession session = factory.openSession();</span><br><span class="line">        <span class="comment">// Ëé∑ÂèñÂà∞‰ª£ÁêÜÂØπË±°</span></span><br><span class="line">        IAccountDao dao = session.getMapper(IAccountDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ‰øùÂ≠ò</span></span><br><span class="line">        dao.saveAccount(account);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Êèê‰∫§‰∫ãÂä°</span></span><br><span class="line">        session.commit();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ÂÖ≥Èó≠ËµÑÊ∫ê</span></span><br><span class="line">        session.close();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊµãËØïÊü•ËØ¢</p>
<img src="/images/2020/screencapture2020-04-07 PM12.12.50.jpg">

<p>ÊµãËØï‰øùÂ≠ò</p>
<img src="/images/2020/screencapture2020-04-07 PM12.14.12.jpg">

<h1 id="SpringÊï¥ÂêàMyBatis"><a href="#SpringÊï¥ÂêàMyBatis" class="headerlink" title="SpringÊï¥ÂêàMyBatis"></a>SpringÊï¥ÂêàMyBatis</h1><p>ÁõÆÊ†áÔºöServiceËÉΩË∞ÉÁî®Dao</p>
<p>Ê≠§Êó∂ServiceÂ∑≤ÁªèÂú®ÂÆπÂô®‰∏≠‰∫ÜÔºåÈúÄË¶ÅÊääÁîüÊàêÁöÑDaoÁöÑ‰ª£ÁêÜÂØπË±°‰πüÂ≠òÂà∞ÂÆπÂô®‰∏≠</p>
<h2 id="ÈÖçÁΩÆ"><a href="#ÈÖçÁΩÆ" class="headerlink" title="ÈÖçÁΩÆ"></a>ÈÖçÁΩÆ</h2><p>Âú®SpringÁöÑÈÖçÁΩÆÊñá‰ª∂applicationContext.xml‰∏≠</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- SpringÊï¥ÂêàMyBatisÊ°ÜÊû∂ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆËøûÊé•Ê±† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/groot?characterEncoding=utf8"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"iamgroot"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆSqlSessionFactoryÂ∑•ÂéÇ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆAccountDaoÊé•Âè£ÊâÄÂú®ÂåÖ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"mapperScanner"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.coconutnut.dao"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Êúâ‰∫ÜËøôÊÆµÈÖçÁΩÆÔºåsqlMapConfig.xmlÂÖ∂ÂÆûÂ∞±‰∏çÈúÄË¶Å‰∫ÜÔºåÂèØ‰ª•Âà†Èô§</p>
<h2 id="Âä†Ê≥®Ëß£-2"><a href="#Âä†Ê≥®Ëß£-2" class="headerlink" title="Âä†Ê≥®Ëß£"></a>Âä†Ê≥®Ëß£</h2><p>Âú®AccountDao‰∏äÂä†@RepositoryÊ≥®Ëß£</p>
<p>Âú®AccountServiceImpl‰∏≠Ê≥®ÂÖ•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"‰∏öÂä°Â±ÇÔºöÊü•ËØ¢ÊâÄÊúâ"</span>);</span><br><span class="line">        <span class="keyword">return</span> accountDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"‰∏öÂä°Â±ÇÔºö‰øùÂ≠òË¥¶Êà∑"</span>);</span><br><span class="line">        accountDao.saveAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Âú®AccountController‰∏≠ÊääÊü•Âá∫ÁöÑÊï∞ÊçÆÂ≠òÂÖ•Model</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/account"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountService accountService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findAll</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Ë°®Áé∞Â±ÇÔºöÊü•ËØ¢ÊâÄÊúâ"</span>);</span><br><span class="line">        List&lt;Account&gt; list = accountService.findAll();</span><br><span class="line">        model.addAttribute(<span class="string">"list"</span>,list);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"list"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="È°µÈù¢-1"><a href="#È°µÈù¢-1" class="headerlink" title="È°µÈù¢"></a>È°µÈù¢</h2><p>Âú®list.jsp‰∏≠ÊâìÂç∞Âá∫Êù•</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h3&gt;Êü•ËØ¢ÊâÄÊúâÁöÑÂ∏êÊà∑&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">&lt;c:forEach items=<span class="string">"$&#123;list&#125;"</span> <span class="keyword">var</span>=<span class="string">"account"</span>&gt;</span><br><span class="line">    $&#123;account.name&#125;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ÊµãËØïÊü•ËØ¢"><a href="#ÊµãËØïÊü•ËØ¢" class="headerlink" title="ÊµãËØïÊü•ËØ¢"></a>ÊµãËØïÊü•ËØ¢</h2><p>Âá∫‰∫Ü‰∏Ä‰∏™ÂºÇÂ∏∏</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2020-04-07 12:31:59,102 36291  [r$PoolThread-#0] WARN  resourcepool.BasicResourcePool  - com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@64fe7a60 -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception: </span><br><span class="line">java.sql.SQLException: Unknown system variable &#39;tx_isolation&#39;</span><br><span class="line">	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)</span><br><span class="line">	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>

<p>Êü•ËØ¢ÂèëÁé∞ÊòØmysql-connector-javaÁâàÊú¨Â§™‰ΩéÂØºËá¥</p>
<p>Âú®pom.xml‰∏≠Â∞Ü</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Êîπ‰∏∫</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.48<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÂÜçËØï</p>
<img src="/images/2020/screencapture2020-04-07 PM12.46.36.jpg">

<p>ÊàêÂäü</p>
<h2 id="‰∫ãÂä°"><a href="#‰∫ãÂä°" class="headerlink" title="‰∫ãÂä°"></a>‰∫ãÂä°</h2><p>‰øùÂ≠òÊñπÊ≥ïËøòÈúÄÁÆ°ÁêÜ‰∫ãÂä°</p>
<p>Spring‰∏≠ËøõË°åÂ£∞ÊòéÂºè‰∫ãÂä°ÁÆ°ÁêÜÔºåÂú®applicationContext.xml‰∏≠Â¢ûÂä†</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ÈÖçÁΩÆSpringÊ°ÜÊû∂Â£∞ÊòéÂºè‰∫ãÂä°ÁÆ°ÁêÜ--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ÈÖçÁΩÆ‰∫ãÂä°ÁÆ°ÁêÜÂô®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--ÈÖçÁΩÆ‰∫ãÂä°ÈÄöÁü•--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"find*"</span> <span class="attr">read-only</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span> <span class="attr">isolation</span>=<span class="string">"DEFAULT"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--ÈÖçÁΩÆAOPÂ¢ûÂº∫--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut</span>=<span class="string">"execution(* com.coconutnut.service.impl.*ServiceImpl.*(..))"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="È°µÈù¢-2"><a href="#È°µÈù¢-2" class="headerlink" title="È°µÈù¢"></a>È°µÈù¢</h2><p>Âú®index.jsp‰∏≠Êñ∞Â¢ûË°®Âçï</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;a href="account/findAll"&gt;ÊµãËØïÊü•ËØ¢&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;ÊµãËØï‰øùÂ≠ò&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">    &lt;form action=<span class="string">"account/save"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">        ÂßìÂêçÔºö&lt;input type=<span class="string">"text"</span> name=<span class="string">"name"</span> /&gt;&lt;br/&gt;</span><br><span class="line">        ÈáëÈ¢ùÔºö&lt;input type=<span class="string">"text"</span> name=<span class="string">"money"</span> /&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"‰øùÂ≠ò"</span>/&gt;&lt;br/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ÊéßÂà∂Âô®-1"><a href="#ÊéßÂà∂Âô®-1" class="headerlink" title="ÊéßÂà∂Âô®"></a>ÊéßÂà∂Âô®</h2><p>Â¢ûÂä†saveÊñπÊ≥ï</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/save"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(Account account, HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">  accountService.saveAccount(account);</span><br><span class="line">  response.sendRedirect(request.getContextPath()+<span class="string">"/account/findAll"</span>);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Â≠òÂÆåÈáçÂÆöÂêëÂà∞listÈ°µÈù¢</p>
<h2 id="ÊµãËØï‰øùÂ≠ò"><a href="#ÊµãËØï‰øùÂ≠ò" class="headerlink" title="ÊµãËØï‰øùÂ≠ò"></a>ÊµãËØï‰øùÂ≠ò</h2><img src="/images/2020/screencapture2020-04-07 PM12.54.47.jpg">

<p>ÁÇπÂáª‰øùÂ≠ò</p>
<img src="/images/2020/screencapture2020-04-07 PM12.54.54.jpg">

<p>ÊàêÂäü</p>
<h1 id="È°πÁõÆÁªìÊûÑ"><a href="#È°πÁõÆÁªìÊûÑ" class="headerlink" title="È°πÁõÆÁªìÊûÑ"></a>È°πÁõÆÁªìÊûÑ</h1><img src="/images/2020/screencapture2020-04-07 PM12.56.33.jpg" width=300>]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>springmvc</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVCÁ¨îËÆ∞06 ÂºÇÂ∏∏Â§ÑÁêÜ‰∏éÊã¶Êà™Âô®</title>
    <url>/2020/04/07/note-springmvc-06/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1Sb411s7qa" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Sb411s7qa</a></p>
<p>P39~45</p>
</blockquote>
<h1 id="ÂºÇÂ∏∏Â§ÑÁêÜ"><a href="#ÂºÇÂ∏∏Â§ÑÁêÜ" class="headerlink" title="ÂºÇÂ∏∏Â§ÑÁêÜ"></a>ÂºÇÂ∏∏Â§ÑÁêÜ</h1><img src="/images/2020/screencapture2020-04-07 AM9.52.33.jpg">

<p>Â¶ÇÊûú‰ªÄ‰πàÈÉΩ‰∏çÂÅöÔºå‰∫ßÁîüÂºÇÂ∏∏Êó∂ÔºàÊ®°ÊãüÂèØ‰ª•Èô§0ÔºâÔºå‰ºöÂá∫Áé∞500 Internal Server Error</p>
<p>ÊïôÂä°Á≥ªÁªüÂ∞±ÊòØËøôÊ†∑üôÉ</p>
<p><strong>Ëß£ÂÜ≥Ê≠•È™§</strong></p>
<ol>
<li>ÁºñÂÜôËá™ÂÆö‰πâÂºÇÂ∏∏Á±ªÔºàÁî®‰ΩúÊèêÁ§∫‰ø°ÊÅØÔºâ</li>
<li>ÁºñÂÜôÂºÇÂ∏∏Â§ÑÁêÜÂô®</li>
<li>ÈÖçÁΩÆÂºÇÂ∏∏Â§ÑÁêÜÂô®ÔºàË∑≥ËΩ¨Âà∞ÊèêÁ§∫È°µÈù¢Ôºâ</li>
</ol>
<h2 id="Ëá™ÂÆö‰πâÂºÇÂ∏∏Á±ª"><a href="#Ëá™ÂÆö‰πâÂºÇÂ∏∏Á±ª" class="headerlink" title="Ëá™ÂÆö‰πâÂºÇÂ∏∏Á±ª"></a>Ëá™ÂÆö‰πâÂºÇÂ∏∏Á±ª</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Â≠òÂÇ®ÊèêÁ§∫‰ø°ÊÅØ</span></span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get set constructor ...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÊéßÂà∂Âô®"><a href="#ÊéßÂà∂Âô®" class="headerlink" title="ÊéßÂà∂Âô®"></a>ÊéßÂà∂Âô®</h2><p>ÊçïËé∑ÂºÇÂ∏∏ÔºåÊäõËá™ÂÆö‰πâÂºÇÂ∏∏</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testException"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testException</span><span class="params">()</span> <span class="keyword">throws</span> SysException</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Ê®°ÊãüÂºÇÂ∏∏</span></span><br><span class="line">            <span class="keyword">int</span> a = <span class="number">10</span>/<span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="comment">// ÊäõÂá∫Ëá™ÂÆö‰πâÂºÇÂ∏∏‰ø°ÊÅØ</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> SysException(<span class="string">"Êü•ËØ¢ÊâÄÊúâÁî®Êà∑Âá∫Áé∞ÈîôËØØ‰∫Ü..."</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÂºÇÂ∏∏Â§ÑÁêÜÂô®"><a href="#ÂºÇÂ∏∏Â§ÑÁêÜÂô®" class="headerlink" title="ÂºÇÂ∏∏Â§ÑÁêÜÂô®"></a>ÂºÇÂ∏∏Â§ÑÁêÜÂô®</h2><p>ÂÆûÁé∞HandlerExceptionResolverÊé•Âè£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysExceptionResolver</span> <span class="keyword">implements</span> <span class="title">HandlerExceptionResolver</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// Â§ÑÁêÜÂºÇÂ∏∏ÁöÑÈÄªËæë</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveException</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Ëé∑ÂèñÂà∞ÂºÇÂ∏∏ÂØπË±°</span></span><br><span class="line">        SysException e = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(ex <span class="keyword">instanceof</span> SysException)&#123;</span><br><span class="line">            e = (SysException)ex;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            e = <span class="keyword">new</span> SysException(<span class="string">"Á≥ªÁªüÊ≠£Âú®Áª¥Êä§...."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ÂàõÂª∫ModelAndViewÂØπË±°</span></span><br><span class="line">        ModelAndView mv = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        mv.addObject(<span class="string">"errorMsg"</span>,e.getMessage());</span><br><span class="line">        mv.setViewName(<span class="string">"error"</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÈÖçÁΩÆÂºÇÂ∏∏Â§ÑÁêÜÂô®"><a href="#ÈÖçÁΩÆÂºÇÂ∏∏Â§ÑÁêÜÂô®" class="headerlink" title="ÈÖçÁΩÆÂºÇÂ∏∏Â§ÑÁêÜÂô®"></a>ÈÖçÁΩÆÂºÇÂ∏∏Â§ÑÁêÜÂô®</h2><p>Âú®springmvc.xml‰∏≠</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ÈÖçÁΩÆÂºÇÂ∏∏Â§ÑÁêÜÂô®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sysExceptionResolver"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.exception.SysExceptionResolver"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ÈîôËØØÊèêÁ§∫È°µÈù¢"><a href="#ÈîôËØØÊèêÁ§∫È°µÈù¢" class="headerlink" title="ÈîôËØØÊèêÁ§∫È°µÈù¢"></a>ÈîôËØØÊèêÁ§∫È°µÈù¢</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    $&#123;errorMsg&#125;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h1 id="Êã¶Êà™Âô®"><a href="#Êã¶Êà™Âô®" class="headerlink" title="Êã¶Êà™Âô®"></a>Êã¶Êà™Âô®</h1><p>SpringMVCÁöÑÊã¶Êà™Âô®Áî®‰∫éÂØπÂ§ÑÁêÜÂô®ËøõË°åÈ¢ÑÂ§ÑÁêÜÂíåÂêéÂ§ÑÁêÜÔºåÁ±ª‰ººServletÁöÑËøáÊª§Âô® Filter</p>
<p>ÊòØAOPÁöÑ‰ΩìÁé∞</p>
<p><strong>Êã¶Êà™Âô®Èìæ</strong></p>
<p>Â∞ÜÊã¶Êà™Âô®Êåâ‰∏ÄÂÆöÁöÑÈ°∫Â∫èËÅîÁªìÊàê‰∏ÄÊù°ÈìæÔºåÊåâÈ°∫Â∫èË∞ÉÁî®</p>
<p><strong>‰∏éËøáÊª§Âô®ÁöÑÂå∫Âà´</strong></p>
<p>ËøáÊª§Âô®ÊòØServletËßÑËåÉ‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰ªª‰Ωïjava webÂ∑•Á®ãÈÉΩÂèØ‰ª•Áî®ÔºõÊã¶Êà™Âô®ÊòØSpring MVCÊ°ÜÊû∂ÁöÑ</p>
<p>ËøáÊª§Âô®Âú®url-pattern‰∏≠ÈÖçÁΩÆ‰∫Ü‚Äù/*‚ÄùÂêéÔºåÂèØ‰ª•ÂØπÊâÄÊúâË¶ÅËÆøÈóÆÁöÑËµÑÊ∫êÊã¶Êà™ÔºõÊã¶Êà™Âô®Âè™‰ºöÊã¶Êà™ËÆøÈóÆÁöÑÊéßÂà∂Âô®ÊñπÊ≥ïÔºå‰∏ç‰ºöÊã¶Êà™jsp„ÄÅhtmlÁ≠â</p>
<p><strong>‰ΩøÁî®Ê≠•È™§</strong></p>
<ol>
<li>ÁºñÂÜôÊã¶Êà™Âô®ÔºåÂÆûÁé∞HandlerInterceptorÊé•Âè£</li>
<li>ÈÖçÁΩÆÊã¶Êà™Âô®</li>
</ol>
<h2 id="ÊéßÂà∂Âô®-1"><a href="#ÊéßÂà∂Âô®-1" class="headerlink" title="ÊéßÂà∂Âô®"></a>ÊéßÂà∂Âô®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/testInterceptor"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testInterceptor</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"testInterceptorÊâßË°å‰∫Ü..."</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Ëá™ÂÆö‰πâÊã¶Êà™Âô®"><a href="#Ëá™ÂÆö‰πâÊã¶Êà™Âô®" class="headerlink" title="Ëá™ÂÆö‰πâÊã¶Êà™Âô®"></a>Ëá™ÂÆö‰πâÊã¶Êà™Âô®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor1</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// È¢ÑÂ§ÑÁêÜÔºåcontrollerÊñπÊ≥ïÊâßË°åÂâç</span></span><br><span class="line">  	<span class="comment">// return true ÊîæË°åÔºåÊâßË°å‰∏ã‰∏Ä‰∏™Êã¶Êà™Âô®ÔºåÂ¶ÇÊûúÊ≤°ÊúâÔºåÊâßË°åcontroller‰∏≠ÁöÑÊñπÊ≥ï</span></span><br><span class="line">    <span class="comment">// return false ‰∏çÊîæË°å</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"MyInterceptor1ÊâßË°å‰∫Ü...Ââç"</span>);</span><br><span class="line">      	<span class="comment">// ‰πüÂèØ‰ª•ËØ∑Ê±ÇËΩ¨Âèë</span></span><br><span class="line">        <span class="comment">// request.getRequestDispatcher("/WEB-INF/pages/error.jsp").forward(request,response);</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ÂêéÂ§ÑÁêÜÊñπÊ≥ïÔºåcontrollerÊñπÊ≥ïÊâßË°åÂêéÔºåsuccess.jspÊâßË°å‰πãÂâç</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"MyInterceptor1ÊâßË°å‰∫Ü...Âêé"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// success.jspÈ°µÈù¢ÊâßË°åÂêéÔºåËØ•ÊñπÊ≥ï‰ºöÊâßË°å</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"MyInterceptor1ÊâßË°å‰∫Ü...ÊúÄÂêé"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÈÖçÁΩÆ"><a href="#ÈÖçÁΩÆ" class="headerlink" title="ÈÖçÁΩÆ"></a>ÈÖçÁΩÆ</h2><p>springmvc.xml‰∏≠</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ÈÖçÁΩÆÊã¶Êà™Âô®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Ë¶ÅÊã¶Êà™ÁöÑÂÖ∑‰ΩìÁöÑÊñπÊ≥ï--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/user/*"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--‰∏çË¶ÅÊã¶Êà™ÁöÑÊñπÊ≥ï</span></span><br><span class="line"><span class="comment">            &lt;mvc:exclude-mapping path=""/&gt; --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ÈÖçÁΩÆÊã¶Êà™Âô®ÂØπË±°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"cn.itcast.controller.cn.itcast.interceptor.MyInterceptor1"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Ë¶ÅÊã¶Êà™ÁöÑÊñπÊ≥ïÂíå‰∏çË¶ÅÊã¶Êà™ÁöÑÊñπÊ≥ïÈÖçÁΩÆ‰∏Ä‰∏™Â∞±ÂèØ‰ª•‰∫Ü</p>
<p>ËøôÊ†∑ÈÖçÁΩÆÊã¶Êà™Âô®ÂêéÔºåÊµãËØïËæìÂá∫‰∏∫</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">MyInterceptor1ÊâßË°å‰∫Ü...Ââç</span><br><span class="line">testInterceptorÊâßË°å‰∫Ü</span><br><span class="line">MyInterceptor1ÊâßË°å‰∫Ü...Âêé</span><br><span class="line">success.jspÊâßË°å‰∫Ü</span><br><span class="line">MyInterceptor1ÊâßË°å‰∫Ü...ÊúÄÂêé</span><br></pre></td></tr></table></figure>

<h2 id="2‰∏™Êã¶Êà™Âô®"><a href="#2‰∏™Êã¶Êà™Âô®" class="headerlink" title="2‰∏™Êã¶Êà™Âô®"></a>2‰∏™Êã¶Êà™Âô®</h2><img src="/images/2020/screencapture2020-04-07 AM10.26.39.jpg">

<p>Êã¶Êà™Âô®‰ª£Á†ÅÂíåÁ¨¨‰∏Ä‰∏™‰∏ÄÊ†∑</p>
<p><strong>ÈÖçÁΩÆ</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--ÈÖçÁΩÆÊã¶Êà™Âô®--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/user/*"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ÈÖçÁΩÆÊã¶Êà™Âô®ÂØπË±°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"cn.itcast.controller.cn.itcast.interceptor.MyInterceptor1"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--ÈÖçÁΩÆÁ¨¨‰∫å‰∏™Êã¶Êà™Âô®--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Êã¶Êà™ÊâÄÊúâÊñπÊ≥ï--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ÈÖçÁΩÆÊã¶Êà™Âô®ÂØπË±°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"cn.itcast.controller.cn.itcast.interceptor.MyInterceptor2"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>ËæìÂá∫</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">MyInterceptor1ÊâßË°å‰∫Ü...Ââç1</span><br><span class="line">MyInterceptor1ÊâßË°å‰∫Ü...Ââç2</span><br><span class="line">testInterceptorÊâßË°å‰∫Ü</span><br><span class="line">MyInterceptor1ÊâßË°å‰∫Ü...Âêé2</span><br><span class="line">MyInterceptor1ÊâßË°å‰∫Ü...Âêé1</span><br><span class="line">success.jspÊâßË°å‰∫Ü</span><br><span class="line">MyInterceptor1ÊâßË°å‰∫Ü...ÊúÄÂêé2</span><br><span class="line">MyInterceptor1ÊâßË°å‰∫Ü...ÊúÄÂêé1</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>springmvc</tag>
      </tags>
  </entry>
  <entry>
    <title>Underwelming</title>
    <url>/2020/04/06/excerpt/</url>
    <content><![CDATA[<blockquote>
<p>ËΩØ‰ª∂ÊúÄÂ§ßÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØËÆ©‰∏ÄÂàáÂèòÂæóÁÆÄÂçï„ÄÇ‰ΩÜÊòØÔºåÂÅöÂà∞Ëøô‰∏ÄÁÇπÁöÑÊñπÊ≥ïÊòØÊ≠£Á°ÆËÆæÁΩÆÈªòËÆ§ÂÄºÔºåËÄå‰∏çÊòØÈôêÂà∂Áî®Êà∑ÁöÑÈÄâÊã©„ÄÇ</p>
<p>‚Äî‚Äî Paul Graham„ÄäÈªëÂÆ¢‰∏éÁîªÂÆ∂„Äã</p>
</blockquote>
<p>‰∏äÊ¨°ÁúãËøôÊú¨‰π¶ÁöÑÊó∂ÂÄôÈÉΩÊ≤°ÊúâÊ≥®ÊÑèÂà∞ËøôÂè•ËØù</p>
<p>ËøôÊ¨°ËßÅÂà∞ËßÜÁ∫øÈÉΩÊå™‰∏çËµ∞‰∫Ü</p>
<p>ÂèØËÉΩÊòØSpringÂêéÈÅóÁóá</p>
<p>ÊÉ≥Ëµ∑ÊõæÁªèÊüêÊ¨°Âê¨Âà∞ÁöÑ‰ªãÁªçApple Design Award Winning App</p>
<p>ÂÖ∂‰∏≠Pixelmator PhotoÁöÑÈ≠îÊ≥ïÊ£íÂèØ‰ª•Áî®‚ÄùUnderwelming‚ÄùÊù•ÂΩ¢ÂÆπ</p>
<p>‰∏ç‰ªÖÊòØÊ≠£Á°ÆËÆæÁΩÆÈªòËÆ§ÂÄºÔºåÂêåÊó∂Âä®ÊÄÅÂ±ïÁ§∫ËØ∏Â§öÂèÇÊï∞ÁöÑÂèòÂåñÔºåËÆ©Áî®Êà∑ÁúãÂà∞ÂèòÂåñÁöÑËµ∑Âõ†ÂíåÁªìÊûú</p>
<blockquote>
<ul>
<li><p>Reaveal what‚Äôs behind the App‚Äôs intelligence</p>
</li>
<li><p>Allow adjustments</p>
</li>
</ul>
</blockquote>
<p>ËøôÊù°ËßÑÂæã‰ºº‰πéÈÄÇÁî®ÂæàÂπøÂë¢</p>
<p>Âîâ Ëøô‰πàÁúãÁöÑËØù‰πãÂâçËá™Â∑±ÁöÑApp‰∏∫‰∫ÜÁÆÄÂåñÊìç‰ΩúËÄåÁñØÁãÇÁº©ÂáèÂèØË∞ÉËäÇÁöÑÂèÇÊï∞ÂÆûÂú®‰∏çÂ¶•</p>
]]></content>
      <categories>
        <category>Memo</category>
      </categories>
  </entry>
  <entry>
    <title>SpringMVCÁ¨îËÆ∞05 Êñá‰ª∂‰∏ä‰º†</title>
    <url>/2020/04/06/note-springmvc-05/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1Sb411s7qa" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Sb411s7qa</a></p>
<p>P33~38</p>
</blockquote>
<h1 id="‰º†ÁªüÊñπÂºè"><a href="#‰º†ÁªüÊñπÂºè" class="headerlink" title="‰º†ÁªüÊñπÂºè"></a>‰º†ÁªüÊñπÂºè</h1><p>‰∏ä‰º†ÁöÑÊñá‰ª∂ÂíåËÆøÈóÆÁöÑÂ∫îÁî®Âú®Âêå‰∏ÄÂè∞ÊúçÂä°Âô®‰∏ä</p>
<h2 id="‰æùËµñ"><a href="#‰æùËµñ" class="headerlink" title="‰æùËµñ"></a>‰æùËµñ</h2><p>‰ΩøÁî® Commons-fileupload ÁªÑ‰ª∂</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="jspÈ°µÈù¢"><a href="#jspÈ°µÈù¢" class="headerlink" title="jspÈ°µÈù¢"></a>jspÈ°µÈù¢</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;form action=<span class="string">"/user/fileupload1"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">  ÈÄâÊã©Êñá‰ª∂Ôºö&lt;input type=<span class="string">"file"</span> name=<span class="string">"upload"</span> /&gt;&lt;br/&gt;</span><br><span class="line">  &lt;input type=<span class="string">"submit"</span> value=<span class="string">"‰∏ä‰º†"</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ÊéßÂà∂Âô®"><a href="#ÊéßÂà∂Âô®" class="headerlink" title="ÊéßÂà∂Âô®"></a>ÊéßÂà∂Âô®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ‰ΩøÁî®fileuploadÁªÑ‰ª∂ÂÆåÊàêÊñá‰ª∂‰∏ä‰º†</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/fileupload1"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">fileuoload1</span><span class="params">(HttpServletRequest request)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ‰∏ä‰º†ÁöÑ‰ΩçÁΩÆ</span></span><br><span class="line">  String path = request.getSession().getServletContext().getRealPath(<span class="string">"/uploads/"</span>);</span><br><span class="line">  <span class="comment">// Âà§Êñ≠Ë∑ØÂæÑÊòØÂê¶Â≠òÂú®</span></span><br><span class="line">  File file = <span class="keyword">new</span> File(path);</span><br><span class="line">  <span class="keyword">if</span>(!file.exists())&#123;</span><br><span class="line">    <span class="comment">// ÂàõÂª∫ËØ•Êñá‰ª∂Â§π</span></span><br><span class="line">    file.mkdirs();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Ëß£ÊûêrequestÂØπË±°ÔºåËé∑Âèñ‰∏ä‰º†Êñá‰ª∂È°π</span></span><br><span class="line">  DiskFileItemFactory factory = <span class="keyword">new</span> DiskFileItemFactory();</span><br><span class="line">  ServletFileUpload upload = <span class="keyword">new</span> ServletFileUpload(factory);</span><br><span class="line">  <span class="comment">// Ëß£Êûêrequest</span></span><br><span class="line">  List&lt;FileItem&gt; items = upload.parseRequest(request);</span><br><span class="line">  <span class="comment">// ÈÅçÂéÜ</span></span><br><span class="line">  <span class="keyword">for</span>(FileItem item:items)&#123;</span><br><span class="line">    <span class="comment">// Âà§Êñ≠ÂΩìÂâçitemÂØπË±°ÊòØÂê¶ÊòØ‰∏ä‰º†Êñá‰ª∂È°π</span></span><br><span class="line">    <span class="keyword">if</span>(item.isFormField())&#123;</span><br><span class="line">      <span class="comment">// ÊôÆÈÄöË°®ÂçïÂêë</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="comment">// Ëé∑Âèñ‰∏ä‰º†Êñá‰ª∂ÁöÑÂêçÁß∞</span></span><br><span class="line">      String filename = item.getName();</span><br><span class="line">      <span class="comment">// ÊääÊñá‰ª∂ÁöÑÂêçÁß∞ËÆæÁΩÆÂîØ‰∏ÄÂÄºÔºåuuid</span></span><br><span class="line">      String uuid = UUID.randomUUID().toString().replace(<span class="string">"-"</span>, <span class="string">""</span>);</span><br><span class="line">      filename = uuid+<span class="string">"_"</span>+filename;</span><br><span class="line">      <span class="comment">// ÂÆåÊàêÊñá‰ª∂‰∏ä‰º†</span></span><br><span class="line">      item.write(<span class="keyword">new</span> File(path,filename));</span><br><span class="line">      <span class="comment">// Âà†Èô§‰∏¥Êó∂Êñá‰ª∂</span></span><br><span class="line">      item.delete();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊµãËØï‰∏ä‰º†Âêé</p>
<p>Âú®target/uploads‰∏≠ÊâæÂà∞‰∏ä‰º†ÁöÑÊñá‰ª∂</p>
<h1 id="SpringMVC‰º†ÁªüÊñπÂºè‰∏ä‰º†"><a href="#SpringMVC‰º†ÁªüÊñπÂºè‰∏ä‰º†" class="headerlink" title="SpringMVC‰º†ÁªüÊñπÂºè‰∏ä‰º†"></a>SpringMVC‰º†ÁªüÊñπÂºè‰∏ä‰º†</h1><h2 id="ÂéüÁêÜÂàÜÊûê"><a href="#ÂéüÁêÜÂàÜÊûê" class="headerlink" title="ÂéüÁêÜÂàÜÊûê"></a>ÂéüÁêÜÂàÜÊûê</h2><img src="/images/2020/screencapture2020-04-06 AM11.14.41.jpg">

<h2 id="jspÈ°µÈù¢-1"><a href="#jspÈ°µÈù¢-1" class="headerlink" title="jspÈ°µÈù¢"></a>jspÈ°µÈù¢</h2><p>Âíå‰º†ÁªüÊñπÂºè‰∏ÄÊ†∑</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;form action=<span class="string">"/user/fileupload2"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">  ÈÄâÊã©Êñá‰ª∂Ôºö&lt;input type=<span class="string">"file"</span> name=<span class="string">"upload"</span> /&gt;&lt;br/&gt;</span><br><span class="line">  &lt;input type=<span class="string">"submit"</span> value=<span class="string">"‰∏ä‰º†"</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ÈÖçÁΩÆÊñá‰ª∂Ëß£ÊûêÂô®"><a href="#ÈÖçÁΩÆÊñá‰ª∂Ëß£ÊûêÂô®" class="headerlink" title="ÈÖçÁΩÆÊñá‰ª∂Ëß£ÊûêÂô®"></a>ÈÖçÁΩÆÊñá‰ª∂Ëß£ÊûêÂô®</h2><p>spingmvc.xml‰∏≠</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ÈÖçÁΩÆÊñá‰ª∂Ëß£ÊûêÂô®ÂØπË±°--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"multipartResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxUploadSize"</span> <span class="attr">value</span>=<span class="string">"10*1024*1024"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÈáåÈù¢ÂèØ‰ª•ËÆæÁΩÆ‰∏Ä‰∫õÂ±ûÊÄßÔºåÂ¶ÇÊñá‰ª∂Â§ßÂ∞è</p>
<h2 id="ÊéßÂà∂Âô®-1"><a href="#ÊéßÂà∂Âô®-1" class="headerlink" title="ÊéßÂà∂Âô®"></a>ÊéßÂà∂Âô®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/fileupload2"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">fileuoload2</span><span class="params">(HttpServletRequest request, MultipartFile upload)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ‰∏ä‰º†ÁöÑ‰ΩçÁΩÆ</span></span><br><span class="line">  String path = request.getSession().getServletContext().getRealPath(<span class="string">"/uploads/"</span>);</span><br><span class="line">  <span class="comment">// Âà§Êñ≠ËØ•Ë∑ØÂæÑÊòØÂê¶Â≠òÂú®</span></span><br><span class="line">  File file = <span class="keyword">new</span> File(path);</span><br><span class="line">  <span class="keyword">if</span>(!file.exists())&#123;</span><br><span class="line">    <span class="comment">// ÂàõÂª∫ËØ•Êñá‰ª∂Â§π</span></span><br><span class="line">    file.mkdirs();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Ëé∑Âèñ‰∏ä‰º†Êñá‰ª∂ÁöÑÂêçÁß∞</span></span><br><span class="line">  String filename = upload.getOriginalFilename();</span><br><span class="line">  <span class="comment">// ÊääÊñá‰ª∂ÁöÑÂêçÁß∞ËÆæÁΩÆÂîØ‰∏ÄÂÄºÔºåuuid</span></span><br><span class="line">  String uuid = UUID.randomUUID().toString().replace(<span class="string">"-"</span>, <span class="string">""</span>);</span><br><span class="line">  filename = uuid+<span class="string">"_"</span>+filename;</span><br><span class="line">  <span class="comment">// ÂÆåÊàêÊñá‰ª∂‰∏ä‰º†</span></span><br><span class="line">  upload.transferTo(<span class="keyword">new</span> File(path,filename));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Áõ∏ËæÉ‰º†ÁªüÊñπÂºèÔºåÁúÅ‰∫ÜËß£ÊûêÊìç‰ΩúÔºåÁÆÄÂåñ‰∏ä‰º†Ê≠•È™§</p>
<h1 id="SpringMVCË∑®ÊúçÂä°Âô®‰∏ä‰º†"><a href="#SpringMVCË∑®ÊúçÂä°Âô®‰∏ä‰º†" class="headerlink" title="SpringMVCË∑®ÊúçÂä°Âô®‰∏ä‰º†"></a>SpringMVCË∑®ÊúçÂä°Âô®‰∏ä‰º†</h1><img src="/images/2020/screencapture2020-04-06 AM11.25.56.jpg">

<p>Áî®2‰∏™tomcatÊúçÂä°Âô®ÔºåÊñá‰ª∂ÊúçÂä°Âô®Á´ØÂè£Âè∑Ê≠§Â§ÑÁî®ÁöÑ9090</p>
<h2 id="Êñá‰ª∂ÊúçÂä°Âô®"><a href="#Êñá‰ª∂ÊúçÂä°Âô®" class="headerlink" title="Êñá‰ª∂ÊúçÂä°Âô®"></a>Êñá‰ª∂ÊúçÂä°Âô®</h2><p>Êñ∞Âª∫‰∏Ä‰∏™Â∑•Á®ã</p>
<p>Âú®webapp‰∏ãÊñ∞Âª∫uploadsÊñá‰ª∂Â§πÁî®Êù•Â≠òÊñá‰ª∂</p>
<p>ÂêØÂä®</p>
<h2 id="‰æùËµñ-1"><a href="#‰æùËµñ-1" class="headerlink" title="‰æùËµñ"></a>‰æùËµñ</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.jersey<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jersey-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.jersey<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jersey-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="jspÈ°µÈù¢-2"><a href="#jspÈ°µÈù¢-2" class="headerlink" title="jspÈ°µÈù¢"></a>jspÈ°µÈù¢</h2><p>‰ªçÊ≤°‰ªÄ‰πàÂå∫Âà´</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;form action=<span class="string">"/user/fileupload3"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">  ÈÄâÊã©Êñá‰ª∂Ôºö&lt;input type=<span class="string">"file"</span> name=<span class="string">"upload"</span> /&gt;&lt;br/&gt;</span><br><span class="line">  &lt;input type=<span class="string">"submit"</span> value=<span class="string">"‰∏ä‰º†"</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ÊéßÂà∂Âô®-2"><a href="#ÊéßÂà∂Âô®-2" class="headerlink" title="ÊéßÂà∂Âô®"></a>ÊéßÂà∂Âô®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/fileupload3"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">fileuoload3</span><span class="params">(MultipartFile upload)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ÂÆö‰πâ‰∏ä‰º†Êñá‰ª∂ÊúçÂä°Âô®Ë∑ØÂæÑ</span></span><br><span class="line">  String path = <span class="string">"http://localhost:9090/uploads/"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Ëé∑Âèñ‰∏ä‰º†Êñá‰ª∂ÁöÑÂêçÁß∞</span></span><br><span class="line">  String filename = upload.getOriginalFilename();</span><br><span class="line">  <span class="comment">// ÊääÊñá‰ª∂ÁöÑÂêçÁß∞ËÆæÁΩÆÂîØ‰∏ÄÂÄºÔºåuuid</span></span><br><span class="line">  String uuid = UUID.randomUUID().toString().replace(<span class="string">"-"</span>, <span class="string">""</span>);</span><br><span class="line">  filename = uuid+<span class="string">"_"</span>+filename;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ÂàõÂª∫ÂÆ¢Êà∑Á´ØÁöÑÂØπË±°</span></span><br><span class="line">  Client client = Client.create();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ÂíåÂõæÁâáÊúçÂä°Âô®ËøõË°åËøûÊé•</span></span><br><span class="line">  WebResource webResource = client.resource(path + filename);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ‰∏ä‰º†Êñá‰ª∂</span></span><br><span class="line">  webResource.put(upload.getBytes());</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Âá∫Áé∞409ÂºÇÂ∏∏ÂèØ‰ª•ÊâãÂä®ÂàõÂª∫‰∏Ä‰∏ãuploadsÊñá‰ª∂Â§π</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>springmvc</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVCÁ¨îËÆ∞04 ÂìçÂ∫îÊï∞ÊçÆÂíåÁªìÊûúËßÜÂõæ</title>
    <url>/2020/04/06/note-springmvc-04/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1Sb411s7qa" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Sb411s7qa</a></p>
<p>P25~32</p>
</blockquote>
<h1 id="ËøîÂõûÂÄºÁ±ªÂûã"><a href="#ËøîÂõûÂÄºÁ±ªÂûã" class="headerlink" title="ËøîÂõûÂÄºÁ±ªÂûã"></a>ËøîÂõûÂÄºÁ±ªÂûã</h1><h2 id="Â≠óÁ¨¶‰∏≤"><a href="#Â≠óÁ¨¶‰∏≤" class="headerlink" title="Â≠óÁ¨¶‰∏≤"></a>Â≠óÁ¨¶‰∏≤</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testReturnString"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testReturnString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËøîÂõûÂ≠óÁ¨¶‰∏≤ÂèØ‰ª•ÊåáÂÆöÈÄªËæëËßÜÂõæÂêçÔºåÈÄöËøáËßÜÂõæËß£ÊûêÂô®Ëß£Êûê‰∏∫Áâ©ÁêÜËßÜÂõæÂú∞ÂùÄ</p>
<p>Ê≠§Â§ÑËøîÂõû‚Äùsuccess‚ÄùÂ∞ÜË∑≥ËΩ¨Âà∞success.jsp</p>
<p><strong>Â∫îÁî®</strong></p>
<p>‰ªéÊï∞ÊçÆÂ∫ì‰∏≠ÂèñUserÂπ∂Â≠òÂÖ•Model</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testReturnString"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testReturnString</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Ê®°Êãü‰ªéÊï∞ÊçÆÂ∫ìÊü•ËØ¢Âá∫UserÂØπË±°</span></span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setUsername(<span class="string">"ha"</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Â≠òÂÖ•Model</span></span><br><span class="line">  model.addAttribute(<span class="string">"user"</span>,user);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Ë∑≥ËΩ¨Âà∞success.jsp</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Âú®success.jsp‰∏≠ÂèñÂá∫User</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;ÊâßË°åÊàêÂäü&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">    $&#123;user.username&#125;</span><br><span class="line">    $&#123;user.password&#125;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="void"><a href="#void" class="headerlink" title="void"></a>void</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testVoid"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testReturnString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Â¶ÇÊûúÊ≤°ÊúâËøîÂõûÂÄºÔºåÈªòËÆ§Ê†πÊçÆËØ∑Ê±ÇË∑ØÂæÑË∑≥ËΩ¨ÔºåÂ¶ÇÊ≠§Â§Ñ‰ºöÊâætestVoid.jsp</p>
<p>‰øÆÊîπÈúÄË¶ÅÁî®Âà∞Request„ÄÅResponseÂØπË±°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testVoid"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testReturnString</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">  <span class="comment">// ËØ∑Ê±ÇËΩ¨Âèë</span></span><br><span class="line">  request.getRequestDispatcher(<span class="string">"/WEB-INF/pages/success.jsp"</span>).forward(request, response);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>‰πüÂèØ‰ª•Áî®responseÈáçÂÆöÂêë</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ‰æã1</span></span><br><span class="line">response.sendRedirect(request.getContextPath()+<span class="string">"index.jsp"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ‰æã2</span></span><br><span class="line">response.sendRedirect(<span class="string">"testRetrunString"</span>);</span><br></pre></td></tr></table></figure>

<p>ÊàñËÄÖÊåáÂÆöÂìçÂ∫îÁªìÊûúÔºå‰æãÂ¶ÇÂìçÂ∫îjsonÊï∞ÊçÆ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">response.setCharacterEncoding(<span class="string">"utf-8"</span>); response.setContentType(<span class="string">"application/json;charset=utf-8"</span>); response.getWriter().write(<span class="string">"HELLO"</span>);</span><br></pre></td></tr></table></figure>

<h2 id="ModelAndView"><a href="#ModelAndView" class="headerlink" title="ModelAndView"></a>ModelAndView</h2><p>ModelAndView ÊòØ SpringMVC Êèê‰æõÁöÑ‰∏Ä‰∏™ÂØπË±°</p>
<p>ÂÜÖÈÉ®Êúâ‰∏Ä‰∏™ModelÔºåÂèØ‰ª•Â≠òÊï∞ÊçÆ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testReturnModelAndView"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">testReturnModelAndView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ÂàõÂª∫ModelAndViewÂØπË±°</span></span><br><span class="line">	ModelAndView mv = <span class="keyword">new</span> ModelAndView(); </span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Ê®°Êãü‰ªéÊï∞ÊçÆÂ∫ìÊü•ËØ¢Âá∫UserÂØπË±°</span></span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setUsername(<span class="string">"ha"</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ÂèØ‰ª•Â≠òÂØπË±°</span></span><br><span class="line">  mv.addObject(<span class="string">"user"</span>,user);</span><br><span class="line">  <span class="comment">// ‰πüÂèØ‰ª•Áõ¥Êé•Â≠òÈîÆÂÄºÂØπ</span></span><br><span class="line">  mv.addObject(<span class="string">"username"</span>, <span class="string">"Âº†‰∏â"</span>); </span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ÊåáÂÆöË∑≥ËΩ¨Âà∞Âì™‰∏™È°µÈù¢</span></span><br><span class="line">  mv.setViewName(<span class="string">"success"</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> mv;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ËΩ¨ÂèëÂíåÈáçÂÆöÂêë"><a href="#ËΩ¨ÂèëÂíåÈáçÂÆöÂêë" class="headerlink" title="ËΩ¨ÂèëÂíåÈáçÂÆöÂêë"></a>ËΩ¨ÂèëÂíåÈáçÂÆöÂêë</h1><p>‰ΩøÁî®ÂÖ≥ÈîÆÂ≠óËøõË°åËΩ¨ÂèëÂíåÈáçÂÆöÂêëÊó∂ÔºåÊó†Ê≥ï‰ΩøÁî®ËßÜÂõæËß£ÊûêÂô®ÔºåÈúÄË¶ÅËá™Â∑±ÂÜôË∑ØÂæÑÔºåÁî®Âæó‰∏çÂ§ö</p>
<h2 id="forward"><a href="#forward" class="headerlink" title="forward"></a>forward</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testForward"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testForward</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"forward:/WEB-INF/pages/success.jsp"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ë∑ØÂæÑÂøÖÈ°ªÂÜôÂÆûÈôÖËßÜÂõæurlÔºå‰∏çËÉΩÂÜôÈÄªËæëËßÜÂõæ</p>
<p>Êó¢ÂèØ‰ª•ËΩ¨ÂèëÂà∞jspÔºå‰πüÂèØ‰ª•ËΩ¨ÂèëÂà∞ÂÖ∂‰ªñÁöÑÊéßÂà∂Âô®ÊñπÊ≥ï</p>
<h2 id="redirect"><a href="#redirect" class="headerlink" title="redirect"></a>redirect</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testRedirect"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRedirect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// return "redirect:/index.jsp"</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"redirect:testReturnModelAndView"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Â¶ÇÊûúÈáçÂÆöÂêëÂà∞jspÈ°µÈù¢ÔºåÈ°µÈù¢‰∏çËÉΩÂÜçWEB-INF‰∏≠Ôºå‰ºöÊâæ‰∏çÂà∞</p>
<h1 id="ÂìçÂ∫îjson"><a href="#ÂìçÂ∫îjson" class="headerlink" title="ÂìçÂ∫îjson"></a>ÂìçÂ∫îjson</h1><p>‰ΩøÁî®@ResponseBody Ê≥®Ëß£ÂÆûÁé∞Â∞Ü controller ÊñπÊ≥ïËøîÂõûÂØπË±°ËΩ¨Êç¢‰∏∫ json ÂìçÂ∫îÁªôÂÆ¢Êà∑Á´Ø</p>
<p>Âú®webappÁõÆÂΩï‰∏ãÊñ∞Âª∫jsÊñá‰ª∂Â§πÔºåÊääjquery.main.jsÂ§çÂà∂ËøõÂéªÔºåË¶ÅÁî®ÁöÑjsp‰∏≠ÂºïÂÖ•</p>
<p><strong>response.jsp</strong></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script src="js/jquery.min.js"&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="comment">// È°µÈù¢Âä†ËΩΩÔºåÁªëÂÆöÂçïÂáª‰∫ã‰ª∂</span></span><br><span class="line">        $(function()&#123;</span><br><span class="line">            $(<span class="string">"#btn"</span>).click(function()&#123;</span><br><span class="line">                 alert(<span class="string">"hello btn"</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;button id="btn"&gt;ÂèëÈÄÅajaxÁöÑËØ∑Ê±Ç&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>ÁÑ∂ËÄåÊ≠§Êó∂Âú®È°µÈù¢‰∏≠ÁÇπÂáªÊåâÈíÆÔºå‰∏ç‰ºöÊúâÂìçÂ∫î</p>
<p>Âõ†‰∏∫ËôΩÁÑ∂ÂºïÂÖ•‰∫Üjquery.min.js</p>
<p>‰ΩÜÊòØÂú®web.xml‰∏≠ÈÖçÁΩÆÁöÑDispatcherServletÊã¶Êà™Ë∑ØÂæÑ‚Äù/‚ÄúÔºå‰πü‰ºöÊã¶Êà™ÈùôÊÄÅÁöÑËµÑÊ∫êÊñá‰ª∂</p>
<h2 id="ËøáÊª§ÈùôÊÄÅËµÑÊ∫ê"><a href="#ËøáÊª§ÈùôÊÄÅËµÑÊ∫ê" class="headerlink" title="ËøáÊª§ÈùôÊÄÅËµÑÊ∫ê"></a>ËøáÊª§ÈùôÊÄÅËµÑÊ∫ê</h2><p>Âú®springmvc.xml‰∏≠ÈÖçÁΩÆ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ÂâçÁ´ØÊéßÂà∂Âô®ÔºåÂì™‰∫õÈùôÊÄÅËµÑÊ∫ê‰∏çÊã¶Êà™--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/css/"</span> <span class="attr">mapping</span>=<span class="string">"/css/**"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/images/"</span> <span class="attr">mapping</span>=<span class="string">"/images/**"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/js/"</span> <span class="attr">mapping</span>=<span class="string">"/js/**"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÈÖçÁΩÆ‰πãÂêéÂÜçÁÇπÂáªÊåâÈíÆÔºåÂ∞±‰ºöÊúâÂºπÊ°Ü‰∫Ü</p>
<h2 id="ÂèëÈÄÅajaxËØ∑Ê±Ç"><a href="#ÂèëÈÄÅajaxËØ∑Ê±Ç" class="headerlink" title="ÂèëÈÄÅajaxËØ∑Ê±Ç"></a>ÂèëÈÄÅajaxËØ∑Ê±Ç</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">// È°µÈù¢Âä†ËΩΩÔºåÁªëÂÆöÂçïÂáª‰∫ã‰ª∂</span></span><br><span class="line">  $(function()&#123;</span><br><span class="line">    $(<span class="string">"#btn"</span>).click(function()&#123;</span><br><span class="line">      <span class="comment">// ÂèëÈÄÅajaxËØ∑Ê±Ç</span></span><br><span class="line">      $.ajax(&#123;</span><br><span class="line">        <span class="comment">// ÁºñÂÜôjsonÊ†ºÂºèÔºåËÆæÁΩÆÂ±ûÊÄßÂíåÂÄº</span></span><br><span class="line">        url:<span class="string">"user/testAjax"</span>,</span><br><span class="line">        contentType:<span class="string">"application/json;charset=UTF-8"</span>,</span><br><span class="line">        data:<span class="string">'&#123;"username":"hehe","password":"123","age":30&#125;'</span>,</span><br><span class="line">        dataType:<span class="string">"json"</span>,</span><br><span class="line">        type:<span class="string">"post"</span>,</span><br><span class="line">        success:function(data)&#123;</span><br><span class="line">          <span class="comment">// dataÊòØÊúçÂä°Âô®Á´ØÂìçÂ∫îÁöÑjsonÊï∞ÊçÆ</span></span><br><span class="line">          alert(data);</span><br><span class="line">          alert(data.username);</span><br><span class="line">          alert(data.password);</span><br><span class="line">          alert(data.age);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ÂìçÂ∫îjsonÊ†ºÂºèÊï∞ÊçÆ"><a href="#ÂìçÂ∫îjsonÊ†ºÂºèÊï∞ÊçÆ" class="headerlink" title="ÂìçÂ∫îjsonÊ†ºÂºèÊï∞ÊçÆ"></a>ÂìçÂ∫îjsonÊ†ºÂºèÊï∞ÊçÆ</h2><p>Springmvc ÈªòËÆ§Áî® MappingJacksonHttpMessageConverter ÂØπ json Êï∞ÊçÆËøõË°åËΩ¨Êç¢ÔºåÈúÄË¶ÅÂä†ÂÖ• jackson ÁöÑÂåÖ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑajaxËØ∑Ê±ÇÔºå‰º†ÁöÑÊòØjsonÂ≠óÁ¨¶‰∏≤ÔºåÂêéÁ´ØÂ∞ÜÂÖ∂Â∞ÅË£ÖÂà∞userÂØπË±°‰∏≠</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Ê®°ÊãüÂºÇÊ≠•ËØ∑Ê±ÇÂìçÂ∫î</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testAjax"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@ResponseBody</span> <span class="function">User <span class="title">testAjax</span><span class="params">(@RequestBody User user)</span></span>&#123;</span><br><span class="line">  <span class="comment">// ÂìçÂ∫îÔºåÊ®°ÊãüÊü•ËØ¢Êï∞ÊçÆÂ∫ì</span></span><br><span class="line">  user.setUsername(<span class="string">"haha"</span>);</span><br><span class="line">  user.setAge(<span class="number">40</span>);</span><br><span class="line">  <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Âä†@ResponseBodyÔºåÊääuserËΩ¨Êàêjson</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>springmvc</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVCÁ¨îËÆ∞03 Â∏∏Áî®Ê≥®Ëß£</title>
    <url>/2020/04/04/note-springmvc-03/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1Sb411s7qa" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Sb411s7qa</a></p>
<p>P17~24</p>
</blockquote>
<h1 id="RequestParam"><a href="#RequestParam" class="headerlink" title="RequestParam"></a>RequestParam</h1><p>‰ΩúÁî®ÔºöÊääËØ∑Ê±Ç‰∏≠ÁöÑÊåáÂÆöÂêçÁß∞ÁöÑÂèÇÊï∞‰º†ÈÄíÁªôÊéßÂà∂Âô®‰∏≠ÁöÑÂΩ¢ÂèÇËµãÂÄº</p>
<p>Â±ûÊÄßÔºö</p>
<ul>
<li>valueÔºöËØ∑Ê±ÇÂèÇÊï∞‰∏≠ÁöÑÂêçÁß∞</li>
<li>requiredÔºöËØ∑Ê±ÇÂèÇÊï∞‰∏≠ÊòØÂê¶ÂøÖÈ°ªÊèê‰æõÊ≠§ÂèÇÊï∞ÔºåÈªòËÆ§ÂÄºÊòØtrueÔºåÂøÖÈ°ªÊèê‰æõ</li>
</ul>
<p>Â¶ÇÔºåÊñπÊ≥ï‰∏≠ÈúÄË¶ÅnameÂ±ûÊÄßÔºå‰ΩÜÊòØurl‰∏≠‰º†ÁöÑÊòØusernameÂ±ûÊÄßÔºåÂ∞±‰ºöÂ∞ÅË£Ö‰∏ç‰∏ä</p>
<p>ÂèØ‰ª•Áî®@RequestParam‰øÆÈ•∞ÂèÇÊï∞</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(path=<span class="string">"/hello"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(@RequestParam(value=<span class="string">"username"</span>,required=<span class="keyword">false</span>)</span>String name) </span>&#123;</span><br><span class="line">  System.out.println(name); </span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="RequestBody"><a href="#RequestBody" class="headerlink" title="RequestBody"></a>RequestBody</h1><p>‰ΩúÁî®ÔºöÁî®‰∫éËé∑ÂèñËØ∑Ê±Ç‰ΩìÁöÑÂÜÖÂÆπÔºàgetÊñπÊ≥ï‰∏çÈÄÇÁî®Ôºâ</p>
<p>Áõ¥Êé•‰ΩøÁî®ÂæóÂà∞ÁöÑÊòØkey=value&amp;key=valueÁªìÊûÑÁöÑÊï∞ÊçÆ</p>
<p>Â±ûÊÄßÔºö</p>
<ul>
<li>requiredÔºöÊòØÂê¶ÂøÖÈ°ªÊúâËØ∑Ê±Ç‰ΩìÔºåÈªòËÆ§ÂÄºÊòØtrue</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"anno/testRequestBody"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">  Áî®Êà∑ÂßìÂêçÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  Áî®Êà∑Âπ¥ÈæÑÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"age"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Êèê‰∫§"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(path=<span class="string">"/testRequestBody"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(@RequestBody String body)</span> </span>&#123;</span><br><span class="line">	System.out.println(body);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÂêéÈù¢‰º†jsonÊï∞ÊçÆÊó∂‰ºöÁî®Âà∞</p>
<h1 id="PathVariable"><a href="#PathVariable" class="headerlink" title="PathVariable"></a>PathVariable</h1><p>‰ΩúÁî®ÔºöÁî®‰∫éÁªëÂÆö url ‰∏≠ÁöÑÂç†‰ΩçÁ¨¶ÔºàÂ¶Ç:ËØ∑Ê±Ç /delete/{id}‰∏≠ÁöÑ{id}Ôºâ</p>
<p>Áî®‰∫éÊîØÊåÅRESTfulÈ£éÊ†º</p>
<p>Â±ûÊÄßÔºö</p>
<ul>
<li>valueÔºöÁî®‰∫éÊåáÂÆö url ‰∏≠Âç†‰ΩçÁ¨¶ÂêçÁß∞</li>
<li>requiredÔºöÊòØÂê¶ÂøÖÈ°ªÊèê‰æõÂç†‰ΩçÁ¨¶</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"springmvc/usePathVariable/100"</span>&gt;</span>pathVariable Ê≥®Ëß£<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/usePathVariable/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">usePathVariable</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id)</span>&#123;</span><br><span class="line">	System.out.println(id);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Áî®RESTfulÈ£éÊ†ºÊó∂</p>
<p>Áî±‰∫éÊµèËßàÂô®formË°®ÂçïÂè™ÊîØÊåÅGET‰∏éPOSTËØ∑Ê±ÇÔºåËÄå‰∏çÊîØÊåÅDELETE„ÄÅPUT</p>
<p>Spring3.0Êèê‰æõ‰∫Ü‰∏Ä‰∏™ËøáÊª§Âô®HiddentHttpMethodFilterÔºåÂèØ‰ª•Â∞ÜÊµèËßàÂô®ËØ∑Ê±Ç‰øÆÊîπ‰∏∫ÊåáÂÆöÊñπÂºèÔºå‰ΩÜÊØîËæÉÈ∫ªÁÉ¶</p>
<p>ËøòÊúâWebClientÁ±ªÂèØ‰ª•‰ΩøÁî®ÈùôÊÄÅÊñπÊ≥ïÊ®°ÊãüÂêÑÁßçËØ∑Ê±ÇÊñπÂºè</p>
<p>ÊàñËÄÖÂèØ‰ª•ÁªôÊµèËßàÂô®Ë£ÖÊèí‰ª∂</p>
<h1 id="RequestHeader"><a href="#RequestHeader" class="headerlink" title="RequestHeader"></a>RequestHeader</h1><p>‰ΩúÁî®ÔºöËé∑ÂèñËØ∑Ê±ÇÊ∂àÊÅØÂ§¥</p>
<p>Â±ûÊÄßÔºö</p>
<ul>
<li>valueÔºöÊèê‰æõÊ∂àÊÅØÂ§¥ÂêçÁß∞</li>
<li>requiredÔºöÊòØÂê¶ÂøÖÈ°ªÊúâÊ≠§Ê∂àÊÅØÂ§¥</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/useRequestHeader"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">useRequestHeader</span><span class="params">(@RequestHeader(value=<span class="string">"Accept-Language"</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">required=<span class="keyword">false</span>)</span>String requestHeader)</span>&#123; </span><br><span class="line">  System.out.println(requestHeader);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="CookieValue"><a href="#CookieValue" class="headerlink" title="CookieValue"></a>CookieValue</h1><p>‰ΩúÁî®ÔºöËé∑ÂèñCookieÁöÑÂÄº</p>
<p>Â±ûÊÄßÔºö</p>
<ul>
<li>valueÔºöÊåáÂÆö cookie ÁöÑÂêçÁß∞</li>
<li>requiredÔºöÊòØÂê¶ÂøÖÈ°ª</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/useCookieValue"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">useCookieValue</span><span class="params">(@CookieValue(value=<span class="string">"JSESSIONID"</span>,required=<span class="keyword">false</span>)</span> String cookieValue)</span>&#123;</span><br><span class="line">	System.out.println(cookieValue);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ModelAttribute"><a href="#ModelAttribute" class="headerlink" title="ModelAttribute"></a>ModelAttribute</h1><p>‰ΩúÁî®ÔºöÂä†Âú®ÊñπÊ≥ï‰∏äÔºåËØ•ÊñπÊ≥ïÂú®ÊéßÂà∂Âô®ÁöÑÊñπÊ≥ïÊâßË°åÂâçÂÖàÊâßË°åÔºõÂä†Âú®ÂèÇÊï∞‰∏äÔºåËé∑ÂèñÊåáÂÆöÁöÑÊï∞ÊçÆÁªôÂèÇÊï∞ËµãÂÄº</p>
<p>Â±ûÊÄßÔºö</p>
<ul>
<li>valueÔºöÁî®‰∫éËé∑ÂèñÊï∞ÊçÆÁöÑ keyÔºàkey ÂèØ‰ª•ÊòØ POJO ÁöÑÂ±ûÊÄßÂêçÁß∞Ôºå‰πüÂèØ‰ª•ÊòØ map ÁªìÊûÑÁöÑ keyÔºâ</li>
</ul>
<p>Â∫îÁî®Âú∫ÊôØÔºö</p>
<p>Ë°®ÂçïÊèê‰∫§Êï∞ÊçÆ‰∏çÂÆåÊï¥Êó∂ÔºåÂÖà‰ªéÊï∞ÊçÆÂ∫ìÊü•Áî®Êà∑‰ø°ÊÅØÔºåÊ≤°ÊúâÊèê‰∫§Êï∞ÊçÆÁöÑÂ≠óÊÆµÁî®ÂéüÂÄº</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ‰øÆÊîπÁî®Êà∑‰ø°ÊÅØ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"springmvc/updateUser"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span> </span><br><span class="line">  Áî®Êà∑ÂêçÁß∞:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> &gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">	Áî®Êà∑Âπ¥ÈæÑ:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"age"</span> &gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"‰øùÂ≠ò"</span>&gt;</span> <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ModelAttribute-‰øÆÈ•∞ÊñπÊ≥ïÂ∏¶ËøîÂõûÂÄº"><a href="#ModelAttribute-‰øÆÈ•∞ÊñπÊ≥ïÂ∏¶ËøîÂõûÂÄº" class="headerlink" title="ModelAttribute ‰øÆÈ•∞ÊñπÊ≥ïÂ∏¶ËøîÂõûÂÄº"></a>ModelAttribute ‰øÆÈ•∞ÊñπÊ≥ïÂ∏¶ËøîÂõûÂÄº</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ModelAttribute</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">showModel</span><span class="params">(String username)</span> </span>&#123; </span><br><span class="line">  <span class="comment">//Ê®°ÊãüÂéªÊï∞ÊçÆÂ∫ìÊü•ËØ¢</span></span><br><span class="line">	User abc = findUserByName(username); </span><br><span class="line">  System.out.println(<span class="string">"ÊâßË°å‰∫Ü showModel ÊñπÊ≥ï"</span>+abc);</span><br><span class="line">	<span class="keyword">return</span> abc; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/updateUser"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testModelAttribute</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">"ÊéßÂà∂Âô®‰∏≠Â§ÑÁêÜËØ∑Ê±ÇÁöÑÊñπÊ≥ï:‰øÆÊîπÁî®Êà∑:"</span>+user);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ModelAttribute-‰øÆÈ•∞ÊñπÊ≥ï‰∏çÂ∏¶ËøîÂõûÂÄº"><a href="#ModelAttribute-‰øÆÈ•∞ÊñπÊ≥ï‰∏çÂ∏¶ËøîÂõûÂÄº" class="headerlink" title="ModelAttribute ‰øÆÈ•∞ÊñπÊ≥ï‰∏çÂ∏¶ËøîÂõûÂÄº"></a>ModelAttribute ‰øÆÈ•∞ÊñπÊ≥ï‰∏çÂ∏¶ËøîÂõûÂÄº</h2><p>ÊîæÂà∞map‰∏≠</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ModelAttribute</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showModel</span><span class="params">(String username,Map&lt;String,User&gt; map)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//Ê®°ÊãüÂéªÊï∞ÊçÆÂ∫ìÊü•ËØ¢</span></span><br><span class="line">	User user = findUserByName(username); </span><br><span class="line">  System.out.println(<span class="string">"ÊâßË°å‰∫Ü showModel ÊñπÊ≥ï"</span>+user); </span><br><span class="line">  map.put(<span class="string">"abc"</span>,user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/updateUser"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testModelAttribute</span><span class="params">(@ModelAttribute(<span class="string">"abc"</span>)</span>User user) </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">"ÊéßÂà∂Âô®‰∏≠Â§ÑÁêÜËØ∑Ê±ÇÁöÑÊñπÊ≥ï:‰øÆÊîπÁî®Êà∑:"</span>+user);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="SessionAttribute"><a href="#SessionAttribute" class="headerlink" title="SessionAttribute"></a>SessionAttribute</h1><p>‰ΩúÁî®ÔºöÂ§öÊ¨°ÊâßË°åÊéßÂà∂Âô®ÊñπÊ≥ïÈó¥ÁöÑÂèÇÊï∞ÂÖ±‰∫´</p>
<p>Â±ûÊÄßÔºö</p>
<ul>
<li>valueÔºöÊåáÂÆöÂ≠òÂÖ•ÁöÑÂ±ûÊÄßÂêçÁß∞</li>
<li>typeÔºöÊåáÂÆöÂ≠òÂÖ•ÁöÑÊï∞ÊçÆÁ±ªÂûã</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- SessionAttribute Ê≥®Ëß£ÁöÑ‰ΩøÁî® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"springmvc/testPut"</span>&gt;</span>Â≠òÂÖ•SessionAttribute<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"springmvc/testGet"</span>&gt;</span>ÂèñÂá∫SessionAttribute<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"springmvc/testClean"</span>&gt;</span>Ê∏ÖÈô§SessionAttribute<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span>(<span class="string">"sessionAttributeController"</span>)</span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/springmvc"</span>)</span><br><span class="line"><span class="meta">@SessionAttributes</span>(value =&#123;<span class="string">"username"</span>,<span class="string">"password"</span>&#125;,types=&#123;Integer<span class="class">.<span class="keyword">class</span>&#125;) <span class="title">public</span> <span class="title">class</span> <span class="title">SessionAttributeController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@RequestMapping</span>(<span class="string">"/testPut"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">testPut</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">"username"</span>, <span class="string">"Ê≥∞ÊñØÁâπ"</span>);</span><br><span class="line">    model.addAttribute(<span class="string">"password"</span>,<span class="string">"123456"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@RequestMapping</span>(<span class="string">"/testGet"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">testGet</span><span class="params">(ModelMap model)</span></span>&#123;</span><br><span class="line">    System.out.println(model.get(<span class="string">"username"</span>)+<span class="string">";"</span>+model.get(<span class="string">"password"</span>));</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@RequestMapping</span>(<span class="string">"/testClean"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">complete</span><span class="params">(SessionStatus sessionStatus)</span></span>&#123;</span><br><span class="line">		sessionStatus.setComplete();</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>springmvc</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVCÁ¨îËÆ∞02 ËØ∑Ê±ÇÂèÇÊï∞ÁöÑÁªëÂÆö</title>
    <url>/2020/04/04/note-springmvc-02/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1Sb411s7qa" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Sb411s7qa</a></p>
<p>P11~16</p>
</blockquote>
<h1 id="ÁÆÄÂçïÂèÇÊï∞"><a href="#ÁÆÄÂçïÂèÇÊï∞" class="headerlink" title="ÁÆÄÂçïÂèÇÊï∞"></a>ÁÆÄÂçïÂèÇÊï∞</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"param/testParam?username=hehe&amp;password=123"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testParam"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testParam</span><span class="params">(String username,String password)</span></span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ÁªëÂÆöÂÆû‰ΩìÁ±ªÂûã"><a href="#ÁªëÂÆöÂÆû‰ΩìÁ±ªÂûã" class="headerlink" title="ÁªëÂÆöÂÆû‰ΩìÁ±ªÂûã"></a>ÁªëÂÆöÂÆû‰ΩìÁ±ªÂûã</h1><p>ÂÆû‰ΩìÁ±ª</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// get set ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ë°®Âçï</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"param/saveAccount"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">  ÂßìÂêçÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  ÂØÜÁ†ÅÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"password"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  ÈáëÈ¢ùÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"money"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Êèê‰∫§"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÁªëÂÆö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ËØ∑Ê±ÇÂèÇÊï∞ÁªëÂÆöÊääÊï∞ÊçÆÂ∞ÅË£ÖÂà∞JavaBeanÁöÑÁ±ª‰∏≠</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/saveAccount"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">saveAccount</span><span class="params">(Account account)</span></span>&#123;</span><br><span class="line">  System.out.println(<span class="string">"ÊâßË°å‰∫Ü..."</span>);</span><br><span class="line">  System.out.println(account);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÂºïÁî®Á±ªÂûã"><a href="#ÂºïÁî®Á±ªÂûã" class="headerlink" title="ÂºïÁî®Á±ªÂûã"></a>ÂºïÁî®Á±ªÂûã</h2><p>ÂÆû‰ΩìÁ±ª</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String uname;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// get set ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line"></span><br><span class="line">   	<span class="keyword">private</span> User user;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ë°®Âçï</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"param/saveAccount"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">  ÂßìÂêçÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  ÂØÜÁ†ÅÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"password"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  ÈáëÈ¢ùÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"money"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  Áî®Êà∑ÂßìÂêçÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"user.uname"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  Áî®Êà∑Âπ¥ÈæÑÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"user.age"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Êèê‰∫§"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ÈõÜÂêàÁ±ªÂûã"><a href="#ÈõÜÂêàÁ±ªÂûã" class="headerlink" title="ÈõÜÂêàÁ±ªÂûã"></a>ÈõÜÂêàÁ±ªÂûã</h2><p>ÂÆû‰ΩìÁ±ª</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;User&gt; list;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,User&gt; map;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ë°®Âçï</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"param/saveAccount"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">  ÂßìÂêçÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  ÂØÜÁ†ÅÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"password"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  ÈáëÈ¢ùÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"money"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  Áî®Êà∑ÂßìÂêçÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"list[0].uname"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  Áî®Êà∑Âπ¥ÈæÑÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"list[0].age"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  Áî®Êà∑ÂßìÂêçÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"map['one'].uname"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  Áî®Êà∑Âπ¥ÈæÑÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"map['one'].age"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Êèê‰∫§"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>map‰∏≠ÊîækeyÂÄºÔºåËøôÈáåÊòØ‚Äôone‚Äô</p>
<h1 id="Ëá™ÂÆö‰πâÁ±ªÂûãËΩ¨Êç¢Âô®"><a href="#Ëá™ÂÆö‰πâÁ±ªÂûãËΩ¨Êç¢Âô®" class="headerlink" title="Ëá™ÂÆö‰πâÁ±ªÂûãËΩ¨Êç¢Âô®"></a>Ëá™ÂÆö‰πâÁ±ªÂûãËΩ¨Êç¢Âô®</h1><p>È°µÈù¢Êèê‰∫§ÁöÑÊï∞ÊçÆÈÉΩÊòØÂ≠óÁ¨¶‰∏≤Á±ªÂûã</p>
<p>Âü∫Êú¨Á±ªÂûãÂèØ‰ª•Ëá™Âä®ËΩ¨ÔºåÂ¶ÇInteger</p>
<p>‰ΩÜÊó•ÊúüÁ±ªÂûãÂèØËÉΩ‰∏çÊîØÊåÅÊüê‰∫õÊ†ºÂºèÔºåÈúÄË¶ÅËá™ÂÆö‰πâÁ±ªÂûãËΩ¨Êç¢Âô®</p>
<p>‰æãÂ¶ÇÔºåÁªôUserÂä†‰∏Ä‰∏™DateÂ±ûÊÄß</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String uname;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date date;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"param/saveUser"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">  Áî®Êà∑ÂßìÂêçÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"uname"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  Áî®Êà∑Âπ¥ÈæÑÔºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"age"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  Áî®Êà∑ÁîüÊó•Ôºö<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"date"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Êèê‰∫§"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/saveUser"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">saveUser</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">  System.out.println(<span class="string">"ÊâßË°å‰∫Ü..."</span>);</span><br><span class="line">  System.out.println(user);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Âú®ÁîüÊó•Ê°Ü‰∏≠ËæìÂÖ•‚Äù2000/11/11‚ÄùÂèëÁé∞ÂèØ‰ª•Ê≠£Â∏∏Â∞ÅË£Ö</p>
<p>‰ΩÜÊòØ‚Äù2000-11-11‚ÄùÂá∫Áé∞Bad Request</p>
<p>ÈúÄË¶ÅÂÜô‰∏Ä‰∏™Á±ªÂûãËΩ¨Êç¢Á±ªÂπ∂Ê≥®ÂÜå</p>
<p>ÈúÄË¶ÅÂÆûÁé∞ConverterÊé•Âè£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringToDateConverter</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>,<span class="title">Date</span>&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">convert</span><span class="params">(String source)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(source == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"ËØ∑ÊÇ®‰º†ÂÖ•Êï∞ÊçÆ"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        DateFormat df = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> df.parse(source);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Êï∞ÊçÆÁ±ªÂûãËΩ¨Êç¢Âá∫Áé∞ÈîôËØØ"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÁÑ∂ÂêéÂú®springmvc.xml‰∏≠ÈÖçÁΩÆ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ÈÖçÁΩÆËá™ÂÆö‰πâÁ±ªÂûãËΩ¨Êç¢Âô®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"conversionService"</span> <span class="attr">class</span>=<span class="string">"org.springframework.context.support.ConversionServiceFactoryBean"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"converters"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"cn.itcast.utils.StringToDateConverter"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ÂºÄÂêØSpringMVCÊ°ÜÊû∂Ê≥®Ëß£ÁöÑÊîØÊåÅ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">"conversionService"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Ëß£ÂÜ≥‰∏≠Êñá‰π±Á†Å"><a href="#Ëß£ÂÜ≥‰∏≠Êñá‰π±Á†Å" class="headerlink" title="Ëß£ÂÜ≥‰∏≠Êñá‰π±Á†Å"></a>Ëß£ÂÜ≥‰∏≠Êñá‰π±Á†Å</h1><p>Âú®web.xml‰∏≠</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ÈÖçÁΩÆËß£ÂÜ≥‰∏≠Êñá‰π±Á†ÅÁöÑËøáÊª§Âô®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Ëé∑ÂèñServletÂéüÁîüÁöÑAPI"><a href="#Ëé∑ÂèñServletÂéüÁîüÁöÑAPI" class="headerlink" title="Ëé∑ÂèñServletÂéüÁîüÁöÑAPI"></a>Ëé∑ÂèñServletÂéüÁîüÁöÑAPI</h1><p>Áõ¥Êé•Âú®ÊñπÊ≥ï‰∏äÂä†ÂèÇÊï∞Âç≥ÂèØ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testServlet"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testServlet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span>&#123;</span><br><span class="line">  System.out.println(<span class="string">"ÊâßË°å‰∫Ü..."</span>);</span><br><span class="line">  System.out.println(request);</span><br><span class="line"></span><br><span class="line">  HttpSession session = request.getSession();</span><br><span class="line">  System.out.println(session);</span><br><span class="line"></span><br><span class="line">  ServletContext servletContext = session.getServletContext();</span><br><span class="line">  System.out.println(servletContext);</span><br><span class="line"></span><br><span class="line">  System.out.println(response);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>springmvc</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVCÁ¨îËÆ∞01 ÂÖ•Èó®</title>
    <url>/2020/04/03/note-springmvc-01/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1Sb411s7qa" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Sb411s7qa</a></p>
<p>p1~9</p>
</blockquote>
<p>SpringMVCÊòØ‰∏Ä‰∏™Âü∫‰∫éJavaÁöÑ„ÄÅÂÆûÁé∞MVCËÆæËÆ°Ê®°ÂûãÁöÑ„ÄÅËØ∑Ê±ÇÈ©±Âä®Á±ªÂûãÁöÑËΩªÈáèÁ∫ßWebÊ°ÜÊû∂</p>
<p>‰ΩøÁî®SpringËøõË°åwebÂºÄÂèëÊó∂ÔºåÂèØ‰ª•ÈÄâÊã©SpringMVCÔºå‰πüÂèØ‰ª•ÈõÜÊàêÂÖ∂ÂÆÉÊ°ÜÊû∂Â¶ÇStruts2</p>
<p>ÂÆÉÈÄöËøá‰∏ÄÂ•óÊ≥®Ëß£ÔºåËÆ©‰∏Ä‰∏™ÁÆÄÂçïÁöÑJavaÁ±ªÊàê‰∏∫Â§ÑÁêÜËØ∑Ê±ÇÁöÑÊéßÂà∂Âô®ÔºåËÄåÊó†ÈúÄÂÆûÁé∞‰ªª‰ΩïÊé•Âè£</p>
<p>ÊîØÊåÅRESTfulÈ£éÊ†ºÁöÑËØ∑Ê±Ç</p>
<img src="/images/2020/screencapture2020-03-26PM10.20.30.jpg">

<h1 id="ÂÖ•Èó®Ê°à‰æã"><a href="#ÂÖ•Èó®Ê°à‰æã" class="headerlink" title="ÂÖ•Èó®Ê°à‰æã"></a>ÂÖ•Èó®Ê°à‰æã</h1><p>ÈúÄÊ±ÇÔºö</p>
<img src="/images/2020/screencapture2020-04-03 AM10.39.54.jpg">

<h1 id="ÁéØÂ¢ÉÊê≠Âª∫"><a href="#ÁéØÂ¢ÉÊê≠Âª∫" class="headerlink" title="ÁéØÂ¢ÉÊê≠Âª∫"></a>ÁéØÂ¢ÉÊê≠Âª∫</h1><p>IdeaÂàõÂª∫MavenÂ∑•Á®ãÔºåÈÄâÊã©webapp</p>
<p>mavenÈ°πÁõÆÂàõÂª∫Êó∂ÔºåÂèØ‰ª•Âä†‰∏ÄÁªÑÈîÆÂÄºÂØπarchetypeCatalog : internalÔºåËß£ÂÜ≥Âä†ËΩΩÊÖ¢ÁöÑÈóÆÈ¢ò</p>
<p>Âª∫Á´ãÁöÑÂ∑•Á®ãÁõÆÂΩïÊòØ‰∏çÂÖ®ÁöÑÔºåÂú®src/main‰∏ãÊâãÂä®Âä†‰∏äjava„ÄÅresourceÊñá‰ª∂Â§πÔºåÂπ∂Âè≥ÈîÆMark Directory asËÆæÁΩÆ‰∏∫Ê∫êÁ†Å„ÄÅËµÑÊ∫êÊñá‰ª∂Â§π</p>
<h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ÁºñËØëÁâàÊú¨ÊîπÊàê1.8 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- springÁâàÊú¨ÈîÅÂÆöÔºå‰∏ãÈù¢Áõ¥Êé•ÂºïÁî® --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="web-xml"><a href="#web-xml" class="headerlink" title="web.xml"></a>web.xml</h2><p>ÈÖçÁΩÆÂâçÁ´ØÊéßÂà∂Âô®ÔºàservletÔºâ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Âä†ËΩΩspringmvcÁöÑÈÖçÁΩÆÊñá‰ª∂ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ÂêØÂä®ÊúçÂä°Âô®Êó∂Âä†ËΩΩ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="springmvcÁöÑÈÖçÁΩÆÊñá‰ª∂"><a href="#springmvcÁöÑÈÖçÁΩÆÊñá‰ª∂" class="headerlink" title="springmvcÁöÑÈÖçÁΩÆÊñá‰ª∂"></a>springmvcÁöÑÈÖçÁΩÆÊñá‰ª∂</h2><p>Âú®resources‰∏≠New-&gt;XML Configuration File-&gt;Spring Config</p>
<p>ÂêçÁß∞Ê≤°ÊúâË¶ÅÊ±ÇÔºåËøôÈáåÂè´springmvc</p>
<p>ÂØºÂÖ•ÂêçÁß∞Á©∫Èó¥ÔºåÂºÄÂêØÊ≥®Ëß£Êâ´Êèè</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ÂºÄÂêØÊ≥®Ëß£Êâ´Êèè --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.test"</span>/&gt;</span></span><br><span class="line">  </span><br><span class="line">  	<span class="comment">&lt;!-- ËßÜÂõæËß£ÊûêÂô® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"internalResourceViewResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩï --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/pages"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ÈÖçÁΩÆÂêéÁºÄÂêç --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  	<span class="comment">&lt;!-- ÂºÄÂêØSpringMVCÊ°ÜÊû∂Ê≥®Ëß£ÊîØÊåÅ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ÈÉ®ÁΩ≤ÊúçÂä°Âô®"><a href="#ÈÉ®ÁΩ≤ÊúçÂä°Âô®" class="headerlink" title="ÈÉ®ÁΩ≤ÊúçÂä°Âô®"></a>ÈÉ®ÁΩ≤ÊúçÂä°Âô®</h2><p>Add Configuration</p>
<p>Âä†‰∏Ä‰∏™Êú¨Âú∞ÁöÑTomcat</p>
<p>Âú®Deployment‰∏≠Ê∑ªÂä†</p>
<img src="/images/2020/screencapture2020-04-03 AM11.15.26.jpg">

<h1 id="‰ª£Á†ÅÁºñÂÜô"><a href="#‰ª£Á†ÅÁºñÂÜô" class="headerlink" title="‰ª£Á†ÅÁºñÂÜô"></a>‰ª£Á†ÅÁºñÂÜô</h1><h2 id="index-jsp"><a href="#index-jsp" class="headerlink" title="index.jsp"></a>index.jsp</h2><p>ÈªòËÆ§Ëá™Â∏¶ÁöÑindex.jspÊ≤°ÊúâÂ§¥Êñá‰ª∂‰ø°ÊÅØÔºå‰∏≠ÊñáÂèØËÉΩ‰ºöÊúâ‰π±Á†ÅÈóÆÈ¢ò</p>
<p>ÂèØ‰ª•Âà†‰∫ÜÈáçÊñ∞ÂàõÂª∫‰∏Ä‰∏™</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;ÂÖ•Èó®Á®ãÂ∫è&lt;/h1&gt;</span><br><span class="line">    &lt;a href="hello"&gt;ÁÇπËøôÈáå&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="HelloController-java"><a href="#HelloController-java" class="headerlink" title="HelloController.java"></a>HelloController.java</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.test.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(path=<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello Spring"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËøôÈáåËøîÂõû‚Äùsuccess‚ÄùÔºåËßÑÂàôÈªòËÆ§ËøîÂõûËøô‰∏™ÂêçÂ≠óÁöÑjsp</p>
<h2 id="success-jsp"><a href="#success-jsp" class="headerlink" title="success.jsp"></a>success.jsp</h2><p>ÂèØ‰ª•Âú®WEB-INF‰∏≠Êñ∞Âª∫pagesÊñá‰ª∂Â§πÔºåÂú®ÈáåÈù¢Êñ∞Âª∫success.jsp</p>
<p>Âä†‰∏Ä‰∏™‰∏ÄÁ∫ßÊ†áÈ¢ò</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;h1&gt;ÊàêÂäü&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<h1 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h1><img src="/images/2020/screencapture2020-04-03 AM11.39.30.jpg">

<p>ÁÇπÂáª</p>
<img src="/images/2020/screencapture2020-04-03 AM11.40.09.jpg">

<p>ÊéßÂà∂Âè∞ËæìÂá∫</p>
<img src="/images/2020/screencapture2020-04-03 AM11.40.58.jpg">

<p>ÊàêÂäü</p>
<h1 id="ÂÖ•Èó®Ê°à‰æãÊµÅÁ®ãÊÄªÁªì"><a href="#ÂÖ•Èó®Ê°à‰æãÊµÅÁ®ãÊÄªÁªì" class="headerlink" title="ÂÖ•Èó®Ê°à‰æãÊµÅÁ®ãÊÄªÁªì"></a>ÂÖ•Èó®Ê°à‰æãÊµÅÁ®ãÊÄªÁªì</h1> <img src="/images/2020/screencapture2020-04-04 PM5.05.25.jpg">

 <img src="/images/2020/screencapture2020-04-04 PM5.06.01.jpg">

<h1 id="RequestMappingÊ≥®Ëß£"><a href="#RequestMappingÊ≥®Ëß£" class="headerlink" title="RequestMappingÊ≥®Ëß£"></a>RequestMappingÊ≥®Ëß£</h1><p><strong>‰ΩúÁî®</strong></p>
<p>Âª∫Á´ãËØ∑Ê±ÇurlÂíåÂ§ÑÁêÜËØ∑Ê±ÇÊñπÊ≥ï‰πãÈó¥ÁöÑÂØπÂ∫îÂÖ≥Á≥ª</p>
<p>ÂèØ‰ª•Âä†Âú®ÊñπÊ≥ï‰∏äÔºå‰πüÂèØ‰ª•Âä†Âú®Á±ª‰∏äÔºàÁõ∏ÂΩì‰∫é‰∏ÄÁ∫ßÁõÆÂΩïÔºâ</p>
<p>Â¶ÇÁ±ª‰∏äÂä†‚Äù/user‚ÄùÔºåÊñπÊ≥ï‰∏äÂä†‚Äù/hello‚ÄùÔºåË∑≥ËΩ¨Êó∂ËØ∑Ê±ÇË∑ØÂæÑ‰∏∫‚Äùuser/hello‚Äù</p>
<p><strong>Â±ûÊÄß</strong></p>
<p>pathÂíåvalueÔºö‰ΩúÁî®Áõ∏ÂêåÔºåÊåáÊò†Â∞ÑË∑ØÂæÑÔºåÂΩìÂè™Êúâvalue‰∏Ä‰∏™Â±ûÊÄßÊó∂Ôºå‚Äùvalue=‚ÄùÂèØ‰ª•ÁúÅÁï•‰∏çÂÜô</p>
<p>methodÔºöÊåáÂΩìÂâçÊñπÊ≥ïÂèØ‰ª•Êé•ÂèóÁöÑËØ∑Ê±ÇÊñπÂºèÔºåÂèÇÊï∞ÂèØ‰ª•ÊòØÊï∞ÁªÑÔºåÈáåÈù¢ÊòØÊûö‰∏æÁ±ªÂûãÔºàÂ¶ÇRequestMathod.POSTÔºâ</p>
<p>paramsÔºöÁî®‰∫éÊåáÂÆöÈôêÂà∂ËØ∑Ê±ÇÂèÇÊï∞ÁöÑÊù°‰ª∂ÔºåÊîØÊåÅÁÆÄÂçïÁöÑË°®ËææÂºèÔºàÂ¶Çparams={‚Äúusername=he‚Äù}ÔºåË°®Á§∫ËØ∑Ê±ÇÂèÇÊï∞‰∏≠ÂøÖÈ°ªÊúâusernameÔºå‰∏îÂÄºÂøÖÈ°ª‰∏∫heÔºâ</p>
<p>headersÔºöÂèëÈÄÅÁöÑËØ∑Ê±ÇÂøÖÈ°ªÂåÖÂê´ËØ∑Ê±ÇÂ§¥</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>springmvc</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisÁ¨îËÆ∞09 Ê≥®Ëß£ÂºÄÂèë</title>
    <url>/2020/04/02/note-mybatis-09/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1Db411s7F5" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Db411s7F5</a></p>
<p>P68~75</p>
</blockquote>
<h1 id="ÁéØÂ¢ÉÊê≠Âª∫"><a href="#ÁéØÂ¢ÉÊê≠Âª∫" class="headerlink" title="ÁéØÂ¢ÉÊê≠Âª∫"></a>ÁéØÂ¢ÉÊê≠Âª∫</h1><h2 id="ÂØºÂùêÊ†á"><a href="#ÂØºÂùêÊ†á" class="headerlink" title="ÂØºÂùêÊ†á"></a>ÂØºÂùêÊ†á</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ÂáÜÂ§áÂÆû‰ΩìÁ±ªÂíåÊé•Âè£"><a href="#ÂáÜÂ§áÂÆû‰ΩìÁ±ªÂíåÊé•Âè£" class="headerlink" title="ÂáÜÂ§áÂÆû‰ΩìÁ±ªÂíåÊé•Âè£"></a>ÂáÜÂ§áÂÆû‰ΩìÁ±ªÂíåÊé•Âè£</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// get set ...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÈÖçÁΩÆÊñá‰ª∂"><a href="#ÈÖçÁΩÆÊñá‰ª∂" class="headerlink" title="ÈÖçÁΩÆÊñá‰ª∂"></a>ÈÖçÁΩÆÊñá‰ª∂</h2><p>Êò†Â∞ÑÈÖçÁΩÆÊñá‰ª∂ÂèØ‰ª•‰∏çË¶Å‰∫ÜÔºå‰ΩÜ‰∏ªÈÖçÁΩÆÊñá‰ª∂‰∏çËÉΩÁúÅÁï•</p>
<p>ÔºàÂ¶ÇÊûú‰ΩøÁî®Ê≥®Ëß£ÂºÄÂèëÔºå‰ΩÜÁõ∏Â∫îË∑ØÂæÑ‰∏ãÂ≠òÂú®ÂØπÂ∫îÁöÑxmlÔºå‰∏çÁÆ°Áî®‰∏çÁî®ÈÉΩ‰ºöÊä•ÈîôÔºâ</p>
<p>SqlMapConfig.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ÂºïÂÖ•Â§ñÈÉ®ÈÖçÁΩÆÊñá‰ª∂--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"jdbcConfig.properties"</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ÈÖçÁΩÆÂà´Âêç--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.itheima.domain"</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ÈÖçÁΩÆÁéØÂ¢É--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ÊåáÂÆöÂ∏¶ÊúâÊ≥®Ëß£ÁöÑdaoÊé•Âè£ÊâÄÂú®‰ΩçÁΩÆ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.itheima.dao"</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>jdbcConfig.properties‰∏≠ÈÖçÁΩÆÊï∞ÊçÆÂ∫ìËøûÊé•‰ø°ÊÅØ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">jdbc.driver&#x3D;com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;eesy_mybatis</span><br><span class="line">jdbc.username&#x3D;root</span><br><span class="line">jdbc.password&#x3D;1234</span><br></pre></td></tr></table></figure>

<h1 id="ÂçïË°®CRUD"><a href="#ÂçïË°®CRUD" class="headerlink" title="ÂçïË°®CRUD"></a>ÂçïË°®CRUD</h1><p>Âú®mybatis‰∏≠ÈíàÂØπCRUDÂÖ±ÊúâÂõõ‰∏™Ê≥®Ëß£Ôºö@Select @Insert @Update @Delete</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// Â¢û</span></span><br><span class="line">  	<span class="meta">@Insert</span>(<span class="string">"insert into user(username,address,sex,birthday)values(#&#123;username&#125;,#&#123;address&#125;,#&#123;sex&#125;,#&#123;birthday&#125;)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">saveUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// Âà†</span></span><br><span class="line">  	<span class="meta">@Delete</span>(<span class="string">"delete from user where id=#&#123;id&#125; "</span>)</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">(Integer userId)</span></span>;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// Êîπ</span></span><br><span class="line">  	<span class="meta">@Update</span>(<span class="string">"update user set username=#&#123;username&#125;,sex=#&#123;sex&#125;,birthday=#&#123;birthday&#125;,address=#&#123;address&#125; where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// Êü•</span></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user"</span>)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">  	<span class="meta">@Select</span>(<span class="string">"select * from user  where id=#&#123;id&#125; "</span>)</span><br><span class="line">    <span class="function">User <span class="title">findById</span><span class="params">(Integer userId)</span></span>;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// ÊñπÊ≥ï‰∏ÄÔºöËøôÈáå#&#123;username&#125;Ê≤°Êúâ%ÔºåÊü•ËØ¢Êó∂Ë¶Å‰º†ÂÖ•Â¶Ç‚Äú%Áéã%‚Äù</span></span><br><span class="line">  	<span class="meta">@Select</span>(<span class="string">"select * from user where username like #&#123;username&#125; "</span>)</span><br><span class="line">  	<span class="comment">// ÊñπÊ≥ï‰∫åÔºö$&#123;&#125;‰∏≠Âõ∫ÂÆöÂÜôvalueÔºå‰º†ÂèÇÊó∂‰∏çÁî®ÂÜô%</span></span><br><span class="line">  	<span class="meta">@Select</span>(<span class="string">"select * from user where username like '%$&#123;value&#125;%' "</span>)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findUserByName</span><span class="params">(String username)</span></span>;</span><br><span class="line">  	<span class="comment">// Âå∫Âà´Âíå‰πãÂâç‰∏ÄÊ†∑Ôºå‰∏Ä‰∏™ÊòØÂ≠óÁ¨¶‰∏≤ÊãºÊé•Ôºå‰∏Ä‰∏™ÊòØÂèÇÊï∞Âç†‰ΩçÁ¨¶</span></span><br><span class="line">  </span><br><span class="line">  	<span class="meta">@Select</span>(<span class="string">"select count(*) from user "</span>)</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findTotalUser</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationCRUDTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> InputStream in;</span><br><span class="line">    <span class="keyword">private</span> SqlSessionFactory factory;</span><br><span class="line">    <span class="keyword">private</span> SqlSession session;</span><br><span class="line">    <span class="keyword">private</span> IUserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span><span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">// 1.Ëé∑ÂèñÂ≠óËäÇËæìÂÖ•ÊµÅ</span></span><br><span class="line">        in = Resources.getResourceAsStream(<span class="string">"SqlMapConfig.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.Ê†πÊçÆÂ≠óËäÇËæìÂÖ•ÊµÅÊûÑÂª∫SqlSessionFactory</span></span><br><span class="line">        factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);</span><br><span class="line">        <span class="comment">// 3.Ê†πÊçÆSqlSessionFactoryÁîü‰∫ß‰∏Ä‰∏™SqlSession</span></span><br><span class="line">        session = factory.openSession();</span><br><span class="line">        <span class="comment">// 4.‰ΩøÁî®SqlSessionËé∑ÂèñDaoÁöÑ‰ª£ÁêÜÂØπË±°</span></span><br><span class="line">        userDao = session.getMapper(IUserDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span><span class="keyword">throws</span>  Exception</span>&#123;</span><br><span class="line">        <span class="comment">// Êèê‰∫§</span></span><br><span class="line">        session.commit();</span><br><span class="line">        <span class="comment">// ÈáäÊîæËµÑÊ∫ê</span></span><br><span class="line">        session.close();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSave</span><span class="params">()</span></span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setUsername(<span class="string">"mybatis annotation"</span>);</span><br><span class="line">        user.setAddress(<span class="string">"Âåó‰∫¨Â∏ÇÊòåÂπ≥Âå∫"</span>);</span><br><span class="line"></span><br><span class="line">        userDao.saveUser(user);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÂÆû‰ΩìÁ±ªÂ±ûÊÄßÂíåÊï∞ÊçÆÂ∫ì‰∏çÂØπÂ∫îÈóÆÈ¢ò"><a href="#ÂÆû‰ΩìÁ±ªÂ±ûÊÄßÂíåÊï∞ÊçÆÂ∫ì‰∏çÂØπÂ∫îÈóÆÈ¢ò" class="headerlink" title="ÂÆû‰ΩìÁ±ªÂ±ûÊÄßÂíåÊï∞ÊçÆÂ∫ì‰∏çÂØπÂ∫îÈóÆÈ¢ò"></a>ÂÆû‰ΩìÁ±ªÂ±ûÊÄßÂíåÊï∞ÊçÆÂ∫ì‰∏çÂØπÂ∫îÈóÆÈ¢ò</h2><p>ÂÆû‰ΩìÁ±ª‰∏≠ÂêçÁß∞ÂíåË°®‰∏≠ÂØπ‰∏ç‰∏äÊó∂ÔºàuserName &amp; usernameÔºâ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer userId;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String userAddress;</span><br><span class="line">    <span class="keyword">private</span> String userSex;</span><br><span class="line">    <span class="keyword">private</span> Date userBirthday;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÂèØ‰ª•‰ΩøÁî®Âà´ÂêçÔºå‰ΩÜÊòØÊâÄÊúâ‰ΩçÁΩÆÈÉΩË¶Å‰ΩøÁî®Âà´ÂêçÔºåÊØîËæÉÈ∫ªÁÉ¶</p>
<p>ÂèØ‰ª•‰ΩøÁî®@ResultsÊ≥®Ëß£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user"</span>)</span><br><span class="line">    <span class="meta">@Results</span>(id=<span class="string">"userMap"</span>,value=&#123;</span><br><span class="line">            <span class="meta">@Result</span>(id=<span class="keyword">true</span>,column = <span class="string">"id"</span>,property = <span class="string">"userId"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(column = <span class="string">"username"</span>,property = <span class="string">"userName"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(column = <span class="string">"address"</span>,property = <span class="string">"userAddress"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(column = <span class="string">"sex"</span>,property = <span class="string">"userSex"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(column = <span class="string">"birthday"</span>,property = <span class="string">"userBirthday"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">  	<span class="meta">@Select</span>(<span class="string">"select * from user  where id=#&#123;id&#125; "</span>)</span><br><span class="line">    <span class="meta">@ResultMap</span>(<span class="string">"userMap"</span>)</span><br><span class="line">    <span class="function">User <span class="title">findById</span><span class="params">(Integer userId)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>‰∏ªÈîÆÔºöid=true</p>
<p>ÂÖ∂ÂÆÉ‰ΩçÁΩÆÁî®@ResultMapÂºïÁî®</p>
<p>Ê†áÂáÜÂÜôÊ≥ï@ResultMap(value={‚ÄúuserMap‚Äù})</p>
<p>Áî±‰∫éÂè™Êúâ‰∏Ä‰∏™Â±ûÊÄßÔºåvalueÂèØ‰ª•ÁúÅÁï•ÔºõÊï∞ÁªÑ‰∏≠Âè™Êúâ‰∏Ä‰∏™ÂÖÉÁ¥†Ôºå{}ÂèØ‰ª•ÁúÅÁï•</p>
<p>‰∫éÊòØÂèØ‰ª•Áõ¥Êé•ÂÜô@ResultMap(‚ÄúuserMap‚Äù)</p>
<h1 id="Â§öË°®Êü•ËØ¢"><a href="#Â§öË°®Êü•ËØ¢" class="headerlink" title="Â§öË°®Êü•ËØ¢"></a>Â§öË°®Êü•ËØ¢</h1><h2 id="ÂÆû‰ΩìÁ±ªÂíåÊé•Âè£"><a href="#ÂÆû‰ΩìÁ±ªÂíåÊé•Âè£" class="headerlink" title="ÂÆû‰ΩìÁ±ªÂíåÊé•Âè£"></a>ÂÆû‰ΩìÁ±ªÂíåÊé•Âè£</h2><p>ÂÜçÂª∫‰∏Ä‰∏™Ë¥¶Êà∑</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">//Â§öÂØπ‰∏ÄÔºàmybatis‰∏≠Áß∞‰∏∫‰∏ÄÂØπ‰∏ÄÔºâÁöÑÊò†Â∞ÑÔºö‰∏Ä‰∏™Ë¥¶Êà∑Âè™ËÉΩÂ±û‰∫é‰∏Ä‰∏™Áî®Êà∑</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// get set ...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>‰øÆÊîπÁî®Êà∑ÂÆû‰ΩìÁ±ª</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer userId;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String userAddress;</span><br><span class="line">    <span class="keyword">private</span> String userSex;</span><br><span class="line">    <span class="keyword">private</span> Date userBirthday;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//‰∏ÄÂØπÂ§öÂÖ≥Á≥ªÊò†Â∞ÑÔºö‰∏Ä‰∏™Áî®Êà∑ÂØπÂ∫îÂ§ö‰∏™Ë¥¶Êà∑</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Account&gt; accounts;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// get set ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="‰∏ÄÂØπ‰∏ÄÊü•ËØ¢"><a href="#‰∏ÄÂØπ‰∏ÄÊü•ËØ¢" class="headerlink" title="‰∏ÄÂØπ‰∏ÄÊü•ËØ¢"></a>‰∏ÄÂØπ‰∏ÄÊü•ËØ¢</h2><p>Êü•Ë¥¶Êà∑‰ª•ÂèäÊâÄÂ±ûÁöÑÁî®Êà∑</p>
<p>IAccountDao‰∏≠</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> 	<span class="meta">@Select</span>(<span class="string">"select * from account"</span>)</span><br><span class="line">	<span class="meta">@Results</span>(id=<span class="string">"accountMap"</span>,value = &#123;</span><br><span class="line">  <span class="meta">@Result</span>(id=<span class="keyword">true</span>,column = <span class="string">"id"</span>,property = <span class="string">"id"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(column = <span class="string">"uid"</span>,property = <span class="string">"uid"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(column = <span class="string">"money"</span>,property = <span class="string">"money"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(property = <span class="string">"user"</span>,column = <span class="string">"uid"</span>,one=<span class="meta">@One</span>(select=<span class="string">"com.itheima.dao.IUserDao.findById"</span>,fetchType= FetchType.EAGER))</span><br><span class="line">&#125;)</span><br><span class="line"><span class="function">List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>ËøôÈáå‰∏ç‰ΩøÁî®left outer joinÔºå‰ΩøÁî®@One</p>
<p>selectË¶ÅÊâæÂà∞ËÉΩÂÆûÁé∞ÂäüËÉΩÁöÑÊñπÊ≥ïÔºåÂç≥IUserDao‰∏≠findByIdÔºåÊù•Êü•ËØ¢Ë¥¶Êà∑ÊâÄÂ±ûÁöÑÁî®Êà∑</p>
<p>FetchTypeÂèØ‰ª•ÈÖçÁΩÆÂª∂ËøüÂä†ËΩΩÔºàLAZYÔºâÔºåÊàñÁ´ãÂç≥Âä†ËΩΩÔºàEAGERÔºâ</p>
<p>ÂÆûÈôÖÂºÄÂèëÊó∂ÂØπ‰∏Ä‰∏ÄËà¨ÈÄâÊã©Á´ãÂç≥Âä†ËΩΩÔºåÂØπÂ§ö‰∏ÄËà¨ÈÄâÊã©Âª∂ËøüÂä†ËΩΩ</p>
<h2 id="‰∏ÄÂØπÂ§öÊü•ËØ¢"><a href="#‰∏ÄÂØπÂ§öÊü•ËØ¢" class="headerlink" title="‰∏ÄÂØπÂ§öÊü•ËØ¢"></a>‰∏ÄÂØπÂ§öÊü•ËØ¢</h2><p>Êü•‰∏Ä‰∏™Áî®Êà∑ÔºåÂíåËØ•Áî®Êà∑ÂØπÂ∫îÁöÑÂ§ö‰∏™Ë¥¶Êà∑</p>
<p>IUserDao‰∏≠</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"select * from user"</span>)</span><br><span class="line"><span class="meta">@Results</span>(id=<span class="string">"userMap"</span>,value=&#123;</span><br><span class="line">  <span class="meta">@Result</span>(id=<span class="keyword">true</span>,column = <span class="string">"id"</span>,property = <span class="string">"userId"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(column = <span class="string">"username"</span>,property = <span class="string">"userName"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(column = <span class="string">"address"</span>,property = <span class="string">"userAddress"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(column = <span class="string">"sex"</span>,property = <span class="string">"userSex"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(column = <span class="string">"birthday"</span>,property = <span class="string">"userBirthday"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(property = <span class="string">"accounts"</span>,column = <span class="string">"id"</span>,</span><br><span class="line">          many = <span class="meta">@Many</span>(select = <span class="string">"com.itheima.dao.IAccountDao.findAccountByUid"</span>,</span><br><span class="line">                       fetchType = FetchType.LAZY))</span><br><span class="line">&#125;)</span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>Áî®@Many</p>
<p>IAccountDao‰∏≠Âä†‰∏Ä‰∏™ÊñπÊ≥ï</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"select * from account where uid = #&#123;userId&#125;"</span>)</span><br><span class="line"><span class="function">List&lt;Account&gt; <span class="title">findAccountByUid</span><span class="params">(Integer userId)</span></span>;</span><br></pre></td></tr></table></figure>

<h1 id="ÁºìÂ≠òÈÖçÁΩÆ"><a href="#ÁºìÂ≠òÈÖçÁΩÆ" class="headerlink" title="ÁºìÂ≠òÈÖçÁΩÆ"></a>ÁºìÂ≠òÈÖçÁΩÆ</h1><p>‰∏çÁÆ°Áî®xmlËøòÊòØÊ≥®Ëß£Ôºå‰∏ÄÁ∫ßÁºìÂ≠òÈªòËÆ§ÈÉΩÊòØÂºÄÁöÑ</p>
<p>ÊâìÂºÄ‰∫åÁ∫ßÊ≥®Ëß£ÔºåÂÖ®Â±ÄÈÖçÁΩÆÈªòËÆ§‰πüÊòØÊâìÂºÄ</p>
<p>ÂØπ‰∫éÂçï‰∏™Á±ªÔºå‰ΩøÁî®@CacheNamespaceÔºàÈªòËÆ§ÊòØfalseÔºâ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@CacheNamespace</span>(blocking = <span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Âç≥ÂèØÂºÄÂêØ‰∫åÁ∫ßÁºìÂ≠ò</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisÁ¨îËÆ∞08 Âª∂ËøüÂä†ËΩΩ‰∏éÁºìÂ≠ò</title>
    <url>/2020/04/02/note-mybatis-08/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/BV1Db411s7F5" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Db411s7F5</a></p>
<p>P60~67</p>
</blockquote>
<h1 id="Âª∂ËøüÂä†ËΩΩ"><a href="#Âª∂ËøüÂä†ËΩΩ" class="headerlink" title="Âª∂ËøüÂä†ËΩΩ"></a>Âª∂ËøüÂä†ËΩΩ</h1><p>Âª∂ËøüÂä†ËΩΩÔºöÂú®ÁúüÊ≠£‰ΩøÁî®Êï∞ÊçÆÊó∂ÊâçÂèëËµ∑Êü•ËØ¢Ôºå‰∏çÁî®ÁöÑÊó∂ÂÄô‰∏çÊü•ËØ¢ÔºåÊåâÈúÄÂä†ËΩΩÔºàÊáíÂä†ËΩΩÔºâ</p>
<p>Á´ãÂç≥Âä†ËΩΩÔºö‰∏çÁÆ°Áî®‰∏çÁî®ÔºåÂè™Ë¶Å‰∏ÄË∞ÉÁî®ÊñπÊ≥ïÔºåÈ©¨‰∏äÂèëËµ∑Êü•ËØ¢</p>
<p>‰∏ÄËà¨‰∏ÄÂØπÂ§ö„ÄÅÂ§öÂØπÂ§öÈááÁî®Âª∂ËøüÂä†ËΩΩÔºõÂ§öÂØπ‰∏Ä„ÄÅ‰∏ÄÂØπ‰∏ÄÈááÁî®Á´ãÂç≥Âä†ËΩΩ</p>
<p>Êü•ÂÆòÁΩëÊñáÊ°£</p>
<p>ÊâæÂà∞Âª∂ËøüÂä†ËΩΩÁöÑÂÖ®Â±ÄÂºÄÂÖ≥</p>
<p>Âú®ÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂‰∏≠</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ÈÖçÁΩÆÂèÇÊï∞--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--ÂºÄÂêØMybatisÊîØÊåÅÂª∂ËøüÂä†ËΩΩ--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"lazyLoadingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"aggressiveLazyLoading"</span> <span class="attr">value</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="‰∏ÄÂØπ‰∏ÄÂÆûÁé∞Âª∂ËøüÂä†ËΩΩ"><a href="#‰∏ÄÂØπ‰∏ÄÂÆûÁé∞Âª∂ËøüÂä†ËΩΩ" class="headerlink" title="‰∏ÄÂØπ‰∏ÄÂÆûÁé∞Âª∂ËøüÂä†ËΩΩ"></a>‰∏ÄÂØπ‰∏ÄÂÆûÁé∞Âª∂ËøüÂä†ËΩΩ</h2><p>‰ªçÁÑ∂ÊòØIAccountDaoÁöÑfindAllÊñπÊ≥ï</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ÂÆö‰πâÂ∞ÅË£ÖaccountÂíåuserÁöÑresultMap --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"accountUserMap"</span> <span class="attr">type</span>=<span class="string">"account"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"uid"</span> <span class="attr">column</span>=<span class="string">"uid"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"money"</span> <span class="attr">column</span>=<span class="string">"money"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ‰∏ÄÂØπ‰∏ÄÁöÑÂÖ≥Á≥ªÊò†Â∞ÑÔºöÈÖçÁΩÆÂ∞ÅË£ÖuserÁöÑÂÜÖÂÆπ</span></span><br><span class="line"><span class="comment">        selectÂ±ûÊÄßÊåáÂÆöÁöÑÂÜÖÂÆπÔºöÊü•ËØ¢Áî®Êà∑ÁöÑÂîØ‰∏ÄÊ†áËØÜÔºö</span></span><br><span class="line"><span class="comment">        columnÂ±ûÊÄßÊåáÂÆöÁöÑÂÜÖÂÆπÔºöÁî®Êà∑Ê†πÊçÆidÊü•ËØ¢Êó∂ÔºåÊâÄÈúÄË¶ÅÁöÑÂèÇÊï∞ÁöÑÂÄº</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"user"</span> <span class="attr">column</span>=<span class="string">"uid"</span> <span class="attr">javaType</span>=<span class="string">"user"</span> <span class="attr">select</span>=<span class="string">"com.itheima.dao.IUserDao.findById"</span>&gt;</span><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Êü•ËØ¢ÊâÄÊúâ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"accountUserMap"</span>&gt;</span></span><br><span class="line">  select * from account</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>IUserDao.xml‰∏≠ÈúÄË¶ÅÈÖç</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">parameterType</span>=<span class="string">"INT"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  select * from user where id = #&#123;uid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÊµãËØïÊó∂</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">  List&lt;Account&gt; accounts = accountDao.findAll();</span><br><span class="line">  <span class="comment">//        for(Account account : accounts)&#123;</span></span><br><span class="line">  <span class="comment">//            System.out.println("--------ÊØè‰∏™accountÁöÑ‰ø°ÊÅØ------------");</span></span><br><span class="line">  <span class="comment">//            System.out.println(account);</span></span><br><span class="line">  <span class="comment">//            System.out.println(account.getUser());</span></span><br><span class="line">  <span class="comment">//        &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÂΩìÊääÊâìÂç∞Áî®Êà∑‰ø°ÊÅØÊ≥®ÈáäÊéâÔºåË∞ÉÁî®Âè™findAll()Êó∂‰∏ç‰ºöÂä†ËΩΩÊØè‰∏™Áî®Êà∑‰ø°ÊÅØ</p>
<p>Âè™ÊúâÂÆûÈôÖÁî®Âà∞UserÁöÑÊó∂ÂÄôÊâç‰ºöÊâßË°åÊü•ËØ¢Áî®Êà∑ÁöÑÊìç‰Ωú</p>
<h2 id="‰∏ÄÂØπÂ§öÂÆûÁé∞Âª∂ËøüÂä†ËΩΩ"><a href="#‰∏ÄÂØπÂ§öÂÆûÁé∞Âª∂ËøüÂä†ËΩΩ" class="headerlink" title="‰∏ÄÂØπÂ§öÂÆûÁé∞Âª∂ËøüÂä†ËΩΩ"></a>‰∏ÄÂØπÂ§öÂÆûÁé∞Âª∂ËøüÂä†ËΩΩ</h2><p>IUserDao.xml‰∏≠</p>
<p>‰∏çÂÜç‰ΩøÁî®left outer join</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ÂÆö‰πâUserÁöÑresultMap--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"userAccountMap"</span> <span class="attr">type</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"username"</span> <span class="attr">column</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"address"</span> <span class="attr">column</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"sex"</span> <span class="attr">column</span>=<span class="string">"sex"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"birthday"</span> <span class="attr">column</span>=<span class="string">"birthday"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ÈÖçÁΩÆuserÂØπË±°‰∏≠accountsÈõÜÂêàÁöÑÊò†Â∞Ñ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"accounts"</span> <span class="attr">ofType</span>=<span class="string">"account"</span> <span class="attr">select</span>=<span class="string">"com.itheima.dao.IAccountDao.findAccountByUid"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Êü•ËØ¢ÊâÄÊúâ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"userAccountMap"</span>&gt;</span></span><br><span class="line">  select * from user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>IAccountDao.xml‰∏≠ÈúÄË¶Å</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Ê†πÊçÆÁî®Êà∑idÊü•ËØ¢Ë¥¶Êà∑ÂàóË°® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAccountByUid"</span> <span class="attr">resultType</span>=<span class="string">"account"</span>&gt;</span></span><br><span class="line">  select * from account where uid = #&#123;uid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÂÆûÈôÖ‰∏äÈÉΩÊòØÂú®Ë¶ÅÁî®ÁöÑÊó∂ÂÄôÊâçÂéªË∞ÉÂè¶‰∏Ä‰∏™Á±ª‰∏≠ÂÖ∑‰ΩìÁöÑÊü•ËØ¢ÊñπÊ≥ï</p>
<h1 id="ÁºìÂ≠ò"><a href="#ÁºìÂ≠ò" class="headerlink" title="ÁºìÂ≠ò"></a>ÁºìÂ≠ò</h1><p>ÈÄÇÁî®‰∫éÁºìÂ≠òÁöÑÊï∞ÊçÆÔºöÁªèÂ∏∏Êü•ËØ¢‰∏î‰∏çÂ∏∏‰øÆÊîπ„ÄÅÊï∞ÊçÆÁöÑÊ≠£Á°Æ‰∏éÂê¶ÂØπÊúÄÁªàÁªìÊûúÂΩ±Âìç‰∏çÂ§ß</p>
<h2 id="MyBatis‰∏≠ÁöÑ‰∏ÄÁ∫ßÁºìÂ≠ò"><a href="#MyBatis‰∏≠ÁöÑ‰∏ÄÁ∫ßÁºìÂ≠ò" class="headerlink" title="MyBatis‰∏≠ÁöÑ‰∏ÄÁ∫ßÁºìÂ≠ò"></a>MyBatis‰∏≠ÁöÑ‰∏ÄÁ∫ßÁºìÂ≠ò</h2><p>ÊåáÁöÑÊòØMyBatis‰∏≠ÁöÑSqlSessionÂØπË±°ÁöÑÁºìÂ≠ò</p>
<p>ÊâßË°åÊü•ËØ¢ÂêéÔºåÊü•ËØ¢ÁªìÊûú‰ºöÂêåÊó∂Â≠òÂÖ•SqlSessionÊèê‰æõÁöÑ‰∏ÄÂùóÂå∫Âüü‰∏≠ÔºåÊîπÂå∫ÂüüÁöÑÁªìÊûÑÊòØ‰∏Ä‰∏™Map</p>
<p>ÂÜçÊ¨°Êü•ËØ¢ÂêåÊ†∑ÁöÑÊï∞ÊçÆÊó∂ÔºåMyBatis‰ºöÂÖàÂéªSqlSession‰∏≠Êü•ËØ¢ÊòØÂê¶ÊúâÁªìÊûúÔºåÊúâÁöÑËØùÁõ¥Êé•ÊãøÂá∫Êù•Áî®</p>
<p>ÂΩìSqlSessionÂØπË±°Ê∂àÂ§±Êó∂Ôºå‰∏ÄÁ∫ßÁºìÂ≠ò‰πüÊ∂àÂ§±</p>
<h3 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFirstLevelCache</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="comment">// Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑</span></span><br><span class="line">  User user1 = userDao.findById(<span class="number">41</span>);</span><br><span class="line">  System.out.println(user1);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ÂÜçÊ¨°Êü•ËØ¢Âêå‰∏ÄÁî®Êà∑</span></span><br><span class="line">  User user2 = userDao.findById(<span class="number">41</span>);</span><br><span class="line">  System.out.println(user2);</span><br><span class="line"></span><br><span class="line">  System.out.println(user1 == user2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊâìÂç∞ÂèëÁé∞user1Âíåuser2ÊòØÂêå‰∏Ä‰∏™Ôºå‰∏îÊó•Âøó‰ø°ÊÅØ‰∏≠Âè™ËÆ∞ÂΩï‰∫Ü‰∏ÄÊ¨°Êü•ËØ¢</p>
<p>ËØ¥Êòéuser2ÊòØÁõ¥Êé•‰ªéÁºìÂ≠ò‰∏≠ÂèñÁöÑ</p>
<p>Â¶ÇÊûúÂú®‰∏§Ê¨°Êü•ËØ¢‰∏≠ÂÖ≥Èó≠SqlSession</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFirstLevelCache</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="comment">// Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑</span></span><br><span class="line">  User user1 = userDao.findById(<span class="number">41</span>);</span><br><span class="line">  System.out.println(user1);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ÂÖ≥Èó≠Âπ∂ÈáçÊñ∞Ëé∑ÂèñSession</span></span><br><span class="line">  sqlSession.close();</span><br><span class="line">  sqlSession = factory.openSession();</span><br><span class="line">  userDao = sqlSession.getMapper(IUserDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ÂÜçÊ¨°Êü•ËØ¢Âêå‰∏ÄÁî®Êà∑</span></span><br><span class="line">  User user2 = userDao.findById(<span class="number">41</span>);</span><br><span class="line">  System.out.println(user2);</span><br><span class="line"></span><br><span class="line">  System.out.println(user1 == user2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËøôÊ¨°‰∏§‰∏™ÂØπË±°‰∏çÂêå‰∫Ü</p>
<p>sqlSession.clearCache() ÂèØ‰ª•Ê∏ÖÁºìÂ≠òÔºå‰∏§‰∏™ÂØπË±°‰πü‰∏çÂêå</p>
<h2 id="Ëß¶ÂèëÊ∏ÖÁ©∫‰∏ÄÁ∫ßÁºìÂ≠òÁöÑÊÉÖÂÜµ"><a href="#Ëß¶ÂèëÊ∏ÖÁ©∫‰∏ÄÁ∫ßÁºìÂ≠òÁöÑÊÉÖÂÜµ" class="headerlink" title="Ëß¶ÂèëÊ∏ÖÁ©∫‰∏ÄÁ∫ßÁºìÂ≠òÁöÑÊÉÖÂÜµ"></a>Ëß¶ÂèëÊ∏ÖÁ©∫‰∏ÄÁ∫ßÁºìÂ≠òÁöÑÊÉÖÂÜµ</h2><p>Ë∞ÉÁî®SqlSessionÁöÑ‰øÆÊîπ„ÄÅÊ∑ªÂä†„ÄÅÂà†Èô§„ÄÅÊèê‰∫§„ÄÅÂÖ≥Èó≠Á≠âÊñπÊ≥ïÊó∂Ôºå‰ºöÊ∏ÖÁ©∫‰∏ÄÁ∫ßÁºìÂ≠ò</p>
<p>Â¶ÇÂú®‰∏§Ê¨°Êü•ËØ¢‰∏≠Êõ¥Êñ∞Áî®Êà∑</p>
<p>ÈÖçÁΩÆÊñá‰ª∂‰∏≠Âä†Êõ¥Êñ∞ÊñπÊ≥ï</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Êõ¥Êñ∞Áî®Êà∑‰ø°ÊÅØ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateUser"</span> <span class="attr">parameterType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  update user set username=#&#123;username&#125;,address=#&#123;address&#125; where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÊµãËØïÊó∂</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testClearlCache</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="comment">// 1.Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑</span></span><br><span class="line">  User user1 = userDao.findById(<span class="number">41</span>);</span><br><span class="line">  System.out.println(user1);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.Êõ¥Êñ∞Áî®Êà∑‰ø°ÊÅØ</span></span><br><span class="line">  user1.setUsername(<span class="string">"update user clear cache"</span>);</span><br><span class="line">  user1.setAddress(<span class="string">"Âåó‰∫¨Â∏ÇÊµ∑Ê∑ÄÂå∫"</span>);</span><br><span class="line">  userDao.updateUser(user1);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3.ÂÜçÊ¨°Êü•ËØ¢id‰∏∫41ÁöÑÁî®Êà∑</span></span><br><span class="line">  User user2 = userDao.findById(<span class="number">41</span>);</span><br><span class="line">  System.out.println(user2);</span><br><span class="line"></span><br><span class="line">  System.out.println(user1 == user2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Êõ¥Êñ∞‰πãÂêéÂÜçÊü•ËØ¢Ôºå‰ºöÂèëËµ∑‰∏ÄÊ¨°Êñ∞ÁöÑÊü•ËØ¢</p>
<h2 id="MyBatis‰∏≠ÁöÑ‰∫åÁ∫ßÁºìÂ≠ò"><a href="#MyBatis‰∏≠ÁöÑ‰∫åÁ∫ßÁºìÂ≠ò" class="headerlink" title="MyBatis‰∏≠ÁöÑ‰∫åÁ∫ßÁºìÂ≠ò"></a>MyBatis‰∏≠ÁöÑ‰∫åÁ∫ßÁºìÂ≠ò</h2><p>ÊåáÁöÑÊòØMyBatis‰∏≠SqlSessionFactoryÂØπË±°ÁöÑÁºìÂ≠òÔºåÁî±Âêå‰∏Ä‰∏™SqlSessionFactoryÂØπË±°ÂàõÂª∫ÁöÑSqlSessionÂÖ±‰∫´ÂÖ∂ÁºìÂ≠ò</p>
<img src="/images/2020/screencapture2020-04-02PM5.34.35.jpg">

<p>‰ΩøÁî®Ê≠•È™§Ôºö</p>
<ol>
<li><p>ËÆ©MyBatisÊ°ÜÊû∂ÊîØÊåÅ‰∫åÁ∫ßÁºìÂ≠òÔºàÂú®SqlMapConfig.xml‰∏≠ÈÖçÁΩÆÔºâ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"cacheEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Ôºà‰∏çÈÖç‰πüË°åÔºåÈªòËÆ§ÊòØtrueÔºâ</p>
</li>
<li><p>ËÆ©ÂΩìÂâçÁöÑÊò†Â∞ÑÊñá‰ª∂ÊîØÊåÅ‰∫åÁ∫ßÁºìÂ≠òÔºàÂú®IUserDao.xml‰∏≠ÈÖçÁΩÆÔºâ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ÂºÄÂêØuserÊîØÊåÅ‰∫åÁ∫ßÁºìÂ≠ò--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ËÆ©ÂΩìÂâçÁöÑÊìç‰ΩúÊîØÊåÅ‰∫åÁ∫ßÁºìÂ≠òÔºàÂú®selectÊ†áÁ≠æ‰∏≠ÈÖçÁΩÆÔºâ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">parameterType</span>=<span class="string">"INT"</span> <span class="attr">resultType</span>=<span class="string">"user"</span> <span class="attr">useCache</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">  select * from user where id = #&#123;uid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>ÊµãËØï</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">SqlSession sqlSession1 = factory.openSession();</span><br><span class="line">IUserDao dao1 = sqlSession1.getMapper(IUserDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">User user1 = dao1.findById(<span class="number">41</span>);</span><br><span class="line">System.out.println(user1);</span><br><span class="line">sqlSession1.close();</span><br><span class="line"></span><br><span class="line">SqlSession sqlSession2 = factory.openSession();</span><br><span class="line">IUserDao dao2 = sqlSession2.getMapper(IUserDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">User user2 = dao2.findById(<span class="number">41</span>);</span><br><span class="line">System.out.println(user2);</span><br><span class="line">sqlSession2.close();</span><br><span class="line"></span><br><span class="line">System.out.println(user1 == user2);</span><br></pre></td></tr></table></figure>

<p>ÂèëÁé∞Á¨¨‰∫åÊ¨°Âπ∂Ê≤°ÊúâÊü•ËØ¢ÔºåÁõ¥Êé•‰ªéÁºìÂ≠ò‰∏≠Ëé∑Âèñ</p>
<p>‰ΩÜÊòØÊâìÂç∞ÁªìÊûú‰∏∫false</p>
<p>Âõ†‰∏∫‰∫åÁ∫ßÁºìÂ≠ò‰∏≠Â≠òÊîæÁöÑÊòØÊï∞ÊçÆÔºåËÄå‰∏çÊòØÂØπË±°</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisÁ¨îËÆ∞07 Â§öË°®Êü•ËØ¢</title>
    <url>/2020/03/31/note-mybatis-07/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952553" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952553</a><br>p48~56</p>
</blockquote>
<p>Ë°®‰πãÈó¥ÁöÑÂá†ÁßçÂÖ≥Á≥ªÔºö‰∏ÄÂØπ‰∏Ä„ÄÅ‰∏ÄÂØπÂ§ö„ÄÅÂ§öÂØπ‰∏Ä„ÄÅÂ§öÂØπÂ§ö</p>
<p>MyBatisÊääÂ§öÂØπ‰∏ÄÁúãÊàê‰∏ÄÂØπ‰∏Ä</p>
<h1 id="Á§∫‰æãÔºöÁî®Êà∑ÂíåË¥¶Êà∑"><a href="#Á§∫‰æãÔºöÁî®Êà∑ÂíåË¥¶Êà∑" class="headerlink" title="Á§∫‰æãÔºöÁî®Êà∑ÂíåË¥¶Êà∑"></a>Á§∫‰æãÔºöÁî®Êà∑ÂíåË¥¶Êà∑</h1><p>‰∏Ä‰∏™Áî®Êà∑ÂèØ‰ª•ÊúâÂ§ö‰∏™Ë¥¶Êà∑</p>
<p>‰∏Ä‰∏™Ë¥¶Êà∑Âè™ËÉΩÂ±û‰∫é‰∏Ä‰∏™Áî®Êà∑</p>
<p>Ê≠•È™§Ôºö</p>
<ol>
<li><p>‰∏§Âº†Ë°®ÔºàË¥¶Êà∑Ë°® Â§ñÈîÆÔºâ</p>
</li>
<li><p>‰∏§‰∏™ÂÆû‰ΩìÁ±ªÔºà‰ΩìÁé∞‰∏ÄÂØπÂ§öÁöÑÂÖ≥Á≥ªÔºâ</p>
</li>
<li><p>‰∏§‰∏™ÈÖçÁΩÆÊñá‰ª∂</p>
</li>
<li><p>ÂÆûÁé∞ÈÖçÁΩÆ</p>
<p>Êü•Áî®Êà∑ÁöÑÊâÄÊúâË¥¶Êà∑</p>
<p>Êü•Ë¥¶Êà∑ÁöÑÁî®Êà∑‰ø°ÊÅØ</p>
</li>
</ol>
<h1 id="‰∏§Âº†Ë°®"><a href="#‰∏§Âº†Ë°®" class="headerlink" title="‰∏§Âº†Ë°®"></a>‰∏§Âº†Ë°®</h1><p>userË°®</p>
<table>
<thead>
<tr>
<th>id</th>
<th>username</th>
<th>address</th>
<th>sex</th>
<th>birthday</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>accountË°®</p>
<table>
<thead>
<tr>
<th>id</th>
<th>uid</th>
<th>money</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>46</td>
<td>1000</td>
</tr>
<tr>
<td>2</td>
<td>45</td>
<td>1000</td>
</tr>
<tr>
<td>3</td>
<td>46</td>
<td>2000</td>
</tr>
</tbody></table>
<p>Â§ñÈîÆuidÔºåÂºïÁî®userË°®ÁöÑid</p>
<h1 id="‰∏§‰∏™ÂÆû‰ΩìÁ±ª"><a href="#‰∏§‰∏™ÂÆû‰ΩìÁ±ª" class="headerlink" title="‰∏§‰∏™ÂÆû‰ΩìÁ±ª"></a>‰∏§‰∏™ÂÆû‰ΩìÁ±ª</h1><h2 id="User"><a href="#User" class="headerlink" title="User"></a>User</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ‰∏ÄÂØπÂ§öÂÖ≥Á≥ªÊò†Â∞ÑÔºö‰∏ªË°®ÂÆû‰ΩìÂ∫îËØ•ÂåÖÂê´‰ªéË°®ÂÆû‰ΩìÁöÑÈõÜÂêàÂºïÁî®</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Account&gt; accounts;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// get set ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// Êü•ËØ¢ÊâÄÊúâÁî®Êà∑ÔºåÂêåÊó∂Ëé∑ÂèñÂà∞Áî®Êà∑‰∏ãÊâÄÊúâË¥¶Êà∑ÁöÑ‰ø°ÊÅØ</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑‰ø°ÊÅØ</span></span><br><span class="line">    <span class="function">User <span class="title">findById</span><span class="params">(Integer userId)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Account"><a href="#Account" class="headerlink" title="Account"></a>Account</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ‰ªéË°®ÂÆû‰ΩìÂ∫îËØ•ÂåÖÂê´‰∏Ä‰∏™‰∏ªË°®ÂÆû‰ΩìÁöÑÂØπË±°ÂºïÁî®</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">		</span><br><span class="line">  	<span class="comment">// get set ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// Êü•ËØ¢ÊâÄÊúâË¥¶Êà∑ÔºåÂêåÊó∂ËøòË¶ÅËé∑ÂèñÂà∞ÂΩìÂâçË¥¶Êà∑ÁöÑÊâÄÂ±ûÁî®Êà∑‰ø°ÊÅØ</span></span><br><span class="line">    <span class="function">List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// Êü•ËØ¢ÊâÄÊúâË¥¶Êà∑ÔºåÂπ∂‰∏îÂ∏¶ÊúâÁî®Êà∑ÂêçÁß∞ÂíåÂú∞ÂùÄ‰ø°ÊÅØ</span></span><br><span class="line">    <span class="function">List&lt;AccountUser&gt; <span class="title">findAllAccount</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="‰∏ÄÂØπ‰∏ÄÊü•ËØ¢"><a href="#‰∏ÄÂØπ‰∏ÄÊü•ËØ¢" class="headerlink" title="‰∏ÄÂØπ‰∏ÄÊü•ËØ¢"></a>‰∏ÄÂØπ‰∏ÄÊü•ËØ¢</h1><p>Êü•ËØ¢ÊâÄÊúâË¥¶Êà∑ÔºåÂíåË¥¶Êà∑ÂØπÂ∫îÁöÑÁî®Êà∑‰ø°ÊÅØ</p>
<h2 id="ÊñπÊ≥ï‰∏Ä"><a href="#ÊñπÊ≥ï‰∏Ä" class="headerlink" title="ÊñπÊ≥ï‰∏Ä"></a>ÊñπÊ≥ï‰∏Ä</h2><p>Êñ∞Âª∫‰∏Ä‰∏™AccountUserÁ±ªÔºå‰øùÂ≠òÁî®Êà∑‰ø°ÊÅØ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountUser</span> <span class="keyword">extends</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// get set ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>IAccountDao.xml‰∏≠</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllAccount"</span> <span class="attr">resultType</span>=<span class="string">"accountuser"</span>&gt;</span></span><br><span class="line">  select a.*,u.username,u.address from account a , user u where u.id = a.uid;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ËøôÁßçÂÜô‰∏Ä‰∏™Â≠êÁ±ªÁöÑÊñπÂºèÂÆûÈôÖÁî®Âæó‰∏çÂ§ö</p>
<h2 id="ÊñπÊ≥ï‰∫å"><a href="#ÊñπÊ≥ï‰∫å" class="headerlink" title="ÊñπÊ≥ï‰∫å"></a>ÊñπÊ≥ï‰∫å</h2><p>Êõ¥Â∏∏Áî® -&gt; Account‰∏≠UserÂØπË±°ÂºïÁî®</p>
<p>ÈÖçÁΩÆIAccountDao.xmlÊó∂‰ΩøÁî®associationÊ†áÁ≠æ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ÂÆö‰πâÂ∞ÅË£ÖaccountÂíåuserÁöÑresultMap --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"accountUserMap"</span> <span class="attr">type</span>=<span class="string">"account"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"aid"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"uid"</span> <span class="attr">column</span>=<span class="string">"uid"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"money"</span> <span class="attr">column</span>=<span class="string">"money"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ‰∏ÄÂØπ‰∏ÄÁöÑÂÖ≥Á≥ªÊò†Â∞ÑÔºöÈÖçÁΩÆÂ∞ÅË£ÖuserÁöÑÂÜÖÂÆπ--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"user"</span> <span class="attr">column</span>=<span class="string">"uid"</span> <span class="attr">javaType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"username"</span> <span class="attr">property</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"address"</span> <span class="attr">property</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sex"</span> <span class="attr">property</span>=<span class="string">"sex"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"birthday"</span> <span class="attr">property</span>=<span class="string">"birthday"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Êü•ËØ¢ÊâÄÊúâ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"accountUserMap"</span>&gt;</span></span><br><span class="line">  select u.*,a.id as aid,a.uid,a.money from account a , user u where u.id = a.uid;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="‰∏ÄÂØπÂ§öÊü•ËØ¢"><a href="#‰∏ÄÂØπÂ§öÊü•ËØ¢" class="headerlink" title="‰∏ÄÂØπÂ§öÊü•ËØ¢"></a>‰∏ÄÂØπÂ§öÊü•ËØ¢</h1><p>Êü•ËØ¢ÊâÄÊúâÁî®Êà∑ÔºåÂíåÁî®Êà∑‰∏ãÊâÄÊúâË¥¶Êà∑ÁöÑ‰ø°ÊÅØ</p>
<p>IUserDao.xml‰∏≠</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ÂÆö‰πâUserÁöÑresultMap--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"userAccountMap"</span> <span class="attr">type</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"username"</span> <span class="attr">column</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"address"</span> <span class="attr">column</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"sex"</span> <span class="attr">column</span>=<span class="string">"sex"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"birthday"</span> <span class="attr">column</span>=<span class="string">"birthday"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ÈÖçÁΩÆuserÂØπË±°‰∏≠accountsÈõÜÂêàÁöÑÊò†Â∞Ñ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"accounts"</span> <span class="attr">ofType</span>=<span class="string">"account"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"aid"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"uid"</span> <span class="attr">property</span>=<span class="string">"uid"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"money"</span> <span class="attr">property</span>=<span class="string">"money"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Êü•ËØ¢ÊâÄÊúâ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"userAccountMap"</span>&gt;</span></span><br><span class="line">  select * from user u left outer join account a on u.id = a.uid</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰∏çËÉΩÂÜçÁî®inner joinÔºà,ÔºâÔºåÊîπÊàêleft outer join</p>
<h1 id="Â§öÂØπÂ§öÊü•ËØ¢ÔºàÁî®Êà∑-ËßíËâ≤Ôºâ"><a href="#Â§öÂØπÂ§öÊü•ËØ¢ÔºàÁî®Êà∑-ËßíËâ≤Ôºâ" class="headerlink" title="Â§öÂØπÂ§öÊü•ËØ¢ÔºàÁî®Êà∑-ËßíËâ≤Ôºâ"></a>Â§öÂØπÂ§öÊü•ËØ¢ÔºàÁî®Êà∑-ËßíËâ≤Ôºâ</h1><p>Ê≠•È™§Ôºö</p>
<ol>
<li><p>‰∏âÂº†Ë°®ÔºàÁî®Êà∑Ë°® ËßíËâ≤Ë°® ËøòÈúÄ‰ΩøÁî®‰∏≠Èó¥Ë°®Ôºâ</p>
</li>
<li><p>‰∏§‰∏™ÂÆû‰ΩìÁ±ªÔºà‰ΩìÁé∞Â§öÂØπÂ§öÁöÑÂÖ≥Á≥ªÔºâ</p>
</li>
<li><p>‰∏§‰∏™ÈÖçÁΩÆÊñá‰ª∂</p>
</li>
<li><p>ÂÆûÁé∞ÈÖçÁΩÆ</p>
<p>Êü•ËØ¢Áî®Êà∑&amp;Áî®Êà∑ÁöÑËßíËâ≤‰ø°ÊÅØ</p>
<p>Êü•ËØ¢ËßíËâ≤&amp;ËßíËâ≤ÁöÑÁî®Êà∑‰ø°ÊÅØ</p>
</li>
</ol>
<h1 id="‰∏âÂº†Ë°®"><a href="#‰∏âÂº†Ë°®" class="headerlink" title="‰∏âÂº†Ë°®"></a>‰∏âÂº†Ë°®</h1><p>Áî®Êà∑Ë°®</p>
<table>
<thead>
<tr>
<th>id</th>
<th>username</th>
<th>address</th>
<th>sex</th>
<th>birthday</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>ËßíËâ≤Ë°®</p>
<table>
<thead>
<tr>
<th>id</th>
<th>role_name</th>
<th>role_desc</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>Èô¢Èïø</td>
<td>ÁÆ°ÁêÜÊï¥‰∏™Â≠¶Èô¢</td>
</tr>
<tr>
<td>2</td>
<td>ÊÄªË£Å</td>
<td>ÁÆ°ÁêÜÊï¥‰∏™ÂÖ¨Âè∏</td>
</tr>
<tr>
<td>3</td>
<td>Ê†°Èïø</td>
<td>ÁÆ°ÁêÜÊï¥‰∏™Â≠¶Ê†°</td>
</tr>
</tbody></table>
<p>‰∏≠Èó¥Ë°®</p>
<table>
<thead>
<tr>
<th>uid</th>
<th>rid</th>
</tr>
</thead>
<tbody><tr>
<td>41</td>
<td>1</td>
</tr>
<tr>
<td>45</td>
<td>1</td>
</tr>
<tr>
<td>41</td>
<td>2</td>
</tr>
</tbody></table>
<h1 id="‰∏§‰∏™ÂÆû‰ΩìÁ±ª-1"><a href="#‰∏§‰∏™ÂÆû‰ΩìÁ±ª-1" class="headerlink" title="‰∏§‰∏™ÂÆû‰ΩìÁ±ª"></a>‰∏§‰∏™ÂÆû‰ΩìÁ±ª</h1><h2 id="User-1"><a href="#User-1" class="headerlink" title="User"></a>User</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Â§öÂØπÂ§öÁöÑÂÖ≥Á≥ªÊò†Â∞ÑÔºö‰∏Ä‰∏™Áî®Êà∑ÂèØ‰ª•ÂÖ∑Â§áÂ§ö‰∏™ËßíËâ≤</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Role&gt; roles;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// get set ...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Êü•ËØ¢ÊâÄÊúâÁî®Êà∑ÔºåÂêåÊó∂Ëé∑ÂèñÂà∞Áî®Êà∑‰∏ãÊâÄÊúâË¥¶Êà∑ÁöÑ‰ø°ÊÅØ</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">		<span class="comment">// Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑‰ø°ÊÅØ</span></span><br><span class="line">    <span class="function">User <span class="title">findById</span><span class="params">(Integer userId)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Role"><a href="#Role" class="headerlink" title="Role"></a>Role</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Role</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer roleId;</span><br><span class="line">    <span class="keyword">private</span> String roleName;</span><br><span class="line">    <span class="keyword">private</span> String roleDesc;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Â§öÂØπÂ§öÁöÑÂÖ≥Á≥ªÊò†Â∞ÑÔºö‰∏Ä‰∏™ËßíËâ≤ÂèØ‰ª•Ëµã‰∫àÂ§ö‰∏™Áî®Êà∑</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;User&gt; users;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// get set ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IRoleDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Êü•ËØ¢ÊâÄÊúâËßíËâ≤</span></span><br><span class="line">    <span class="function">List&lt;Role&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="‰∏§‰∏™ÈÖçÁΩÆÊñá‰ª∂"><a href="#‰∏§‰∏™ÈÖçÁΩÆÊñá‰ª∂" class="headerlink" title="‰∏§‰∏™ÈÖçÁΩÆÊñá‰ª∂"></a>‰∏§‰∏™ÈÖçÁΩÆÊñá‰ª∂</h2><h2 id="User-2"><a href="#User-2" class="headerlink" title="User"></a>User</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ÂÆö‰πâUserÁöÑresultMap--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"userMap"</span> <span class="attr">type</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"username"</span> <span class="attr">column</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"address"</span> <span class="attr">column</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"sex"</span> <span class="attr">column</span>=<span class="string">"sex"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"birthday"</span> <span class="attr">column</span>=<span class="string">"birthday"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ÈÖçÁΩÆËßíËâ≤ÈõÜÂêàÁöÑÊò†Â∞Ñ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"roles"</span> <span class="attr">ofType</span>=<span class="string">"role"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"roleId"</span> <span class="attr">column</span>=<span class="string">"rid"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"roleName"</span> <span class="attr">column</span>=<span class="string">"role_name"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"roleDesc"</span> <span class="attr">column</span>=<span class="string">"role_desc"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Êü•ËØ¢ÊâÄÊúâ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">  select u.*,r.id as rid,r.role_name,r.role_desc from user u</span><br><span class="line">  left outer join user_role ur  on u.id = ur.uid</span><br><span class="line">  left outer join role r on r.id = ur.rid</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">parameterType</span>=<span class="string">"INT"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  select * from user where id = #&#123;uid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Role-1"><a href="#Role-1" class="headerlink" title="Role"></a>Role</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ÂÆö‰πâroleË°®ÁöÑResultMap--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"roleMap"</span> <span class="attr">type</span>=<span class="string">"role"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"roleId"</span> <span class="attr">column</span>=<span class="string">"rid"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"roleName"</span> <span class="attr">column</span>=<span class="string">"role_name"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"roleDesc"</span> <span class="attr">column</span>=<span class="string">"role_desc"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"users"</span> <span class="attr">ofType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"username"</span> <span class="attr">property</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"address"</span> <span class="attr">property</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sex"</span> <span class="attr">property</span>=<span class="string">"sex"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"birthday"</span> <span class="attr">property</span>=<span class="string">"birthday"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--Êü•ËØ¢ÊâÄÊúâ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"roleMap"</span>&gt;</span></span><br><span class="line">  select u.*,r.id as rid,r.role_name,r.role_desc from role r</span><br><span class="line">  left outer join user_role ur  on r.id = ur.rid</span><br><span class="line">  left outer join user u on u.id = ur.uid</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÈïøËØ≠Âè•Êç¢Ë°åÁöÑÊó∂ÂÄôÊ≥®ÊÑèÂä†Á©∫Ê†ºÔºåÈò≤Ê≠¢r leftÂèòÊàêrleft</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisÁ¨îËÆ∞06 Âä®ÊÄÅsqlËØ≠Âè•</title>
    <url>/2020/03/30/note-mybatis-06/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952553" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952553</a><br>p45~47</p>
</blockquote>
<h1 id="ifÊ†áÁ≠æ"><a href="#ifÊ†áÁ≠æ" class="headerlink" title="ifÊ†áÁ≠æ"></a>ifÊ†áÁ≠æ</h1><p>Ê†πÊçÆ‰º†ÂÖ•ÂèÇÊï∞Êù°‰ª∂Êü•ËØ¢</p>
<p>Êù°‰ª∂ÂèØËÉΩÊòØÁî®Êà∑Âêç„ÄÅÊÄßÂà´„ÄÅÂú∞ÂùÄÔºåÊàñËÄÖÈÉΩÊúâ„ÄÅÈÉΩÊ≤°Êúâ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// IUserDao.java</span></span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">findUserByCondition</span><span class="params">(User user)</span></span>;</span><br></pre></td></tr></table></figure>

<p>‰∏éË¶ÅÁî®andÔºå‰∏çËÉΩÁî®&amp;&amp;</p>
<p>sqlËØ≠Âè•‰∏äÁöÑÂÜÖÂÆπÊó†ÂÖ≥Â§ßÂ∞èÂÜô</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserByCondition"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span> <span class="attr">parameterType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  select * from user where 1=1</span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"userName != null"</span>&gt;</span></span><br><span class="line">    and username = #&#123;userName&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"userSex != null"</span>&gt;</span></span><br><span class="line">    and sex = #&#123;userSex&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÊµãËØï</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindByCondition</span><span class="params">()</span></span>&#123;</span><br><span class="line">  User u = <span class="keyword">new</span> User();</span><br><span class="line">  u.setUserName(<span class="string">"ËÄÅÁéã"</span>);</span><br><span class="line">  u.setUserSex(<span class="string">"Â•≥"</span>);</span><br><span class="line"></span><br><span class="line">  List&lt;User&gt; users = userDao.findUserByCondition(u);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>‰∏çÂÜô where 1=1 Ôºü</p>
<p>ÊîπËøõ -&gt; whereÊ†áÁ≠æ</p>
<h1 id="whereÊ†áÁ≠æ"><a href="#whereÊ†áÁ≠æ" class="headerlink" title="whereÊ†áÁ≠æ"></a>whereÊ†áÁ≠æ</h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserByCondition"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span> <span class="attr">parameterType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  select * from user</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"userName != null"</span>&gt;</span></span><br><span class="line">      and username = #&#123;userName&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"userSex != null"</span>&gt;</span></span><br><span class="line">      and sex = #&#123;userSex&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="foreachÊ†áÁ≠æ"><a href="#foreachÊ†áÁ≠æ" class="headerlink" title="foreachÊ†áÁ≠æ"></a>foreachÊ†áÁ≠æ</h1><p>Ê†πÊçÆqueryvo‰∏≠ÁöÑIdÈõÜÂêàÂÆûÁé∞Êü•ËØ¢Áî®Êà∑ÂàóË°®</p>
<p><strong>QueryVo.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueryVo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Integer&gt; ids;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get set ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>IUserDao.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">List&lt;User&gt; <span class="title">findUserInIds</span><span class="params">(QueryVo vo)</span></span>;</span><br></pre></td></tr></table></figure>

<p><strong>IUserDao.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserInIds"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span> <span class="attr">parameterType</span>=<span class="string">"queryvo"</span>&gt;</span></span><br><span class="line">  select * from user</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"ids != null and ids.size()&gt;0"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"ids"</span> <span class="attr">open</span>=<span class="string">"and id in ("</span> <span class="attr">close</span>=<span class="string">")"</span> <span class="attr">item</span>=<span class="string">"uid"</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">        #&#123;uid&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>#{uid}ÊòØÁî±‰∏äÈù¢item=‚Äùuid‚ÄùÂÜ≥ÂÆöÁöÑ</p>
<p><strong>ÊµãËØï</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindInIds</span><span class="params">()</span></span>&#123;</span><br><span class="line">  QueryVo vo = <span class="keyword">new</span> QueryVo();</span><br><span class="line">  List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">  list.add(<span class="number">41</span>);</span><br><span class="line">  list.add(<span class="number">42</span>);</span><br><span class="line">  list.add(<span class="number">46</span>);</span><br><span class="line">  vo.setIds(list);</span><br><span class="line"></span><br><span class="line">  List&lt;User&gt; users = userDao.findUserInIds(vo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="sqlÊ†áÁ≠æ"><a href="#sqlÊ†áÁ≠æ" class="headerlink" title="sqlÊ†áÁ≠æ"></a>sqlÊ†áÁ≠æ</h1><p>ÊäΩÂèñÈáçÂ§çÁöÑsqlËØ≠Âè•</p>
<p>ÔºàÊú¨Êù•ÂÜô‰∏çÂÜô;ÈÉΩÂèØ‰ª•Ôºå‰ΩÜÊòØÊäΩÂèñsqlËØ≠Âè•Êó∂Ôºå‰∏∫‰∫ÜÈò≤Ê≠¢ÂêéÁª≠ÁöÑÊãºÊé•Âá∫ÈóÆÈ¢òÔºåÊúÄÂ•Ω‰∏çË¶ÅÂÜô;Ôºâ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"defaultUser"</span>&gt;</span></span><br><span class="line">  select * from user</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Â∞±ÂèØ‰ª•Êää</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">  select * from user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÊîπÊàê</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"defaultUser"</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisÁ¨îËÆ∞05 ËøûÊé•Ê±†</title>
    <url>/2020/03/30/note-mybatis-05/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952553" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952553</a><br>p39~43</p>
</blockquote>
<h1 id="ËøûÊé•Ê±†"><a href="#ËøûÊé•Ê±†" class="headerlink" title="ËøûÊé•Ê±†"></a>ËøûÊé•Ê±†</h1><p>ÊòØ‰∏Ä‰∏™Â≠òÂÇ®ËøûÊé•ÁöÑÂÆπÂô®</p>
<p>Áî®‰∫éÈôç‰ΩéËé∑ÂèñËøûÊé•ÁöÑÂºÄÈîÄ</p>
<p>ÂøÖÈ°ªÁ∫øÁ®ãÂÆâÂÖ®</p>
<p>ÂÖàËøõÂÖàÂá∫</p>
<h1 id="MyBatis‰∏≠ÁöÑËøûÊé•Ê±†"><a href="#MyBatis‰∏≠ÁöÑËøûÊé•Ê±†" class="headerlink" title="MyBatis‰∏≠ÁöÑËøûÊé•Ê±†"></a>MyBatis‰∏≠ÁöÑËøûÊé•Ê±†</h1><p>MyBatisËøûÊé•Ê±†Êèê‰æõ3ÁßçÊñπÂºèÁöÑÈÖçÁΩÆ</p>
<p>ÈÖçÁΩÆÁöÑ‰ΩçÁΩÆÔºö‰∏ªÈÖçÁΩÆÊñá‰ª∂SqlMapConfig.xml‰∏≠dataSourceÊ†áÁ≠æÔºåtypeÂ±ûÊÄßË°®Á§∫ÈááÁî®‰ΩïÁßçËøûÊé•Ê±†</p>
<p>typeÂ±ûÊÄßÁöÑÂèñÂÄºÔºö</p>
<ul>
<li><p>POOLED - ÈááÁî®‰º†ÁªüÁöÑjavax.sql.DataSourceËßÑËåÉ‰∏≠ÁöÑËøûÊé•Ê±†</p>
</li>
<li><p>UNPOOLED - ÈááÁî®‰º†ÁªüÁöÑËé∑ÂèñËøûÊé•ÁöÑÊñπÂºèÔºåËôΩÁÑ∂‰πüÂÆûÁé∞‰∫Üjavax.sql.DataSourceÊé•Âè£Ôºå‰ΩÜÊ≤°Êúâ‰ΩøÁî®Ê±†ÁöÑÊÄùÊÉ≥ÔºàÊ≤°ÊúâÂÆπÂô®ÔºåÊØèÊ¨°Áî®ÈÉΩÈáçÊñ∞Ëé∑Âèñ‰∏Ä‰∏™ËøûÊé•Ôºâ</p>
</li>
<li><p>JNDI - ÈááÁî®ÊúçÂä°Âô®Êèê‰æõÁöÑJNDIÊäÄÊúØÂÆûÁé∞ÔºåÊù•Ëé∑ÂèñDataSourceÂØπË±°Ôºå‰∏çÂêåÁöÑÊúçÂä°Âô®ËÉΩÊãøÂà∞ÁöÑDataSource‰∏çÂêåÔºàÂ¶ÇÊûú‰∏çÊòØwebÊàñmavenÁöÑwarÂ∑•Á®ãÔºå‰∏çËÉΩ‰ΩøÁî®Ôºâ</p>
<p>tomcatÊúçÂä°Âô®ÈááÁî®dbcpËøûÊé•Ê±†</p>
</li>
</ul>
<h2 id="POOLEDÂíåUNPOOLEDÂØπÊØî"><a href="#POOLEDÂíåUNPOOLEDÂØπÊØî" class="headerlink" title="POOLEDÂíåUNPOOLEDÂØπÊØî"></a>POOLEDÂíåUNPOOLEDÂØπÊØî</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ÈÖçÁΩÆËøûÊé•Ê±†--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-03-30AM10.00.05.jpg">

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ÈÖçÁΩÆËøûÊé•Ê±†--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"UNPOOLED"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-03-30AM10.00.10.jpg">

<h2 id="UNPOOLEDÊ∫êÁ†ÅÂàÜÊûê"><a href="#UNPOOLEDÊ∫êÁ†ÅÂàÜÊûê" class="headerlink" title="UNPOOLEDÊ∫êÁ†ÅÂàÜÊûê"></a>UNPOOLEDÊ∫êÁ†ÅÂàÜÊûê</h2><p>Command + O ÊêúÁ¥¢ PooledDataSource Âíå UnpooledDataSourceÔºåÂèØ‰ª•ÂèëÁé∞ÈÉΩÂÆûÁé∞‰∫ÜDataSourceÊé•Âè£</p>
<img src="/images/2020/screencapture2020-03-30AM10.11.24.jpg">

<p>ËÄåËøô‰∏™DataSourceÂÆûÁé∞javax.sqlÔºåÂç≥‰∏∫jdbcËßÑËåÉ‰∏≠ÁöÑËøûÊé•Ê±†ÂÆö‰πâ</p>
<p>ÂÖ∂‰∏≠‰∏ÄÂÆö‰ºöÊúâgetConnection()</p>
<img src="/images/2020/screencapture2020-03-30AM10.14.24.jpg">

<p>Êâæ‰∏Ä‰∏ãUnpooledDataSource‰∏≠ÁöÑgetConnection()</p>
<img src="/images/2020/screencapture2020-03-30AM10.17.28.jpg">

<p>Ë∞É‰∫ÜdoGetConnection()</p>
<img src="/images/2020/screencapture2020-03-30AM10.18.42.jpg">

<p>ÊúÄÂêéËé∑ÂèñËøûÊé•ÁöÑËØ≠Âè•Â∞±ÊòØ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Connection connection = DriverManager.getConnection(url, properties);</span><br></pre></td></tr></table></figure>

<p>ËÄåinitializeDriver()‰∏≠Â∞±ÊòØÂèçÂ∞ÑÊ≥®ÂÜåÈ©±Âä®</p>
<img src="/images/2020/screencapture2020-03-30AM10.20.30.jpg">

<p>ÊâÄ‰ª•ÔºåUNPOOLED‰ΩøÁî®Êó∂Ôºå‰ºöÊ≥®ÂÜåÈ©±Âä®„ÄÅËé∑ÂèñËøûÊé•„ÄÅËøîÂõûËøûÊé•</p>
<h2 id="POOLEDÊ∫êÁ†ÅÂàÜÊûê"><a href="#POOLEDÊ∫êÁ†ÅÂàÜÊûê" class="headerlink" title="POOLEDÊ∫êÁ†ÅÂàÜÊûê"></a>POOLEDÊ∫êÁ†ÅÂàÜÊûê</h2><p>‰πüÊâæÂà∞getConnection()</p>
<img src="/images/2020/screencapture2020-03-30AM10.22.59.jpg">

<p>Ë∞É‰∫ÜpopConnection()</p>
<img src="/images/2020/screencapture2020-03-30AM10.26.37.jpg">

<p>Â¶ÇÊûúÊ≤°ÊúâËøûÊé•ÔºåÂú®synchronizedÂùó‰∏≠ËøõË°åÂêéÁª≠Êìç‰Ωú</p>
<p>ÈîÅÁöÑÊòØËøô‰∏™state</p>
<img src="/images/2020/screencapture2020-03-30AM10.27.15.jpg">

<p>ÁªßÁª≠ÔºåÂ¶ÇÊûúidleConnectionsÈùûÁ©∫</p>
<img src="/images/2020/screencapture2020-03-30AM10.30.59.jpg">

<p>ËÄåidleConnectionsÂ∞±ÊòØ‰∏Ä‰∏™ArrayList</p>
<img src="/images/2020/screencapture2020-03-30AM10.32.21.jpg">

<p>Âç≥ÔºåÂΩìÂÆÉÈùûÁ©∫ÔºåÂèñÂá∫Á¨¨‰∏Ä‰∏™</p>
<p>Â¶ÇÊûú‰∏∫Á©∫ÔºåËøûÊé•Êï∞ÈáèÂ∞è‰∫éÊúÄÂ§ßÂÄºÔºåÂàõÂª∫ËøûÊé•</p>
<img src="/images/2020/screencapture2020-03-30AM10.34.52.jpg">

<p>Â¶ÇÊûúÂ∑≤ÁªèÂà∞ÊúÄÂ§ßÂÄº‰∫ÜÔºåÂèñÂá∫‰∏Ä‰∏™ÊúÄËÄÅÁöÑËøûÊé•ÔºåÂ∞ùËØïÂ§ÑÁêÜ‰πãÂêéÁªßÁª≠Áî®</p>
<p>ÊÄªÁöÑÊµÅÁ®ãÔºö</p>
<img src="/images/2020/screencapture2020-03-30AM10.40.26.jpg">

<p>POOLEDÊòØMyBatisËá™Â∑±ÂÆûÁé∞ÁöÑ‰∏ÄÂ•óËøûÊé•Ê±†ÔºåÊ†πÊçÆjavax.sql.DataSourceËßÑËåÉ</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisÁ¨îËÆ∞04 ÈÖçÁΩÆÊñá‰ª∂</title>
    <url>/2020/03/27/note-mybatis-04/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952553" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952553</a><br>p37~38</p>
</blockquote>
<h1 id="properties"><a href="#properties" class="headerlink" title="properties"></a>properties</h1><p>ÂèØ‰ª•Âú®Ê†áÁ≠æÂÜÖÈÉ®ÈÖçÁΩÆËøûÊé•Êï∞ÊçÆÂ∫ìÁöÑ‰ø°ÊÅØÔºå‰πüÂèØ‰ª•ÈÄöËøáÂ±ûÊÄßÂºïÁî®Â§ñÈÉ®ÈÖçÁΩÆÊñá‰ª∂‰ø°ÊÅØ</p>
<h2 id="ÂÜÖÈÉ®ÈÖçÁΩÆ"><a href="#ÂÜÖÈÉ®ÈÖçÁΩÆ" class="headerlink" title="ÂÜÖÈÉ®ÈÖçÁΩÆ"></a>ÂÜÖÈÉ®ÈÖçÁΩÆ</h2><p>Áõ¥Êé•ÂÜôÂú®‰∏ªÈÖçÁΩÆÊñá‰ª∂‰∏≠</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/eesy_mybatis"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"1234"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰ΩøÁî®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;driver&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Â§ñÈÉ®Êñá‰ª∂"><a href="#Â§ñÈÉ®Êñá‰ª∂" class="headerlink" title="Â§ñÈÉ®Êñá‰ª∂"></a>Â§ñÈÉ®Êñá‰ª∂</h2><p>ÂºïÁî®Â§ñÈÉ®Êñá‰ª∂</p>
<p>classpath ‰∏ãÂÆö‰πâ db.properties Êñá‰ª∂</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">jdbc.driver&#x3D;com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;eesy</span><br><span class="line">jdbc.username&#x3D;root</span><br><span class="line">jdbc.password&#x3D;1234</span><br></pre></td></tr></table></figure>

<p>Ë¶ÅÊ±ÇÊåâurlÁöÑÂÜôÊ≥ïÂÜôÂú∞ÂùÄ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">url</span>=<span class="string">"file:///D:/IdeaProjects/day02_eesy_01mybatisCRUD/src/main/resources/jdbcConfig.properties"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰ΩøÁî®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="‰ΩøÁî®typeAliasesÈÖçÁΩÆÁ±ªÂûãÂà´Âêç"><a href="#‰ΩøÁî®typeAliasesÈÖçÁΩÆÁ±ªÂûãÂà´Âêç" class="headerlink" title="‰ΩøÁî®typeAliasesÈÖçÁΩÆÁ±ªÂûãÂà´Âêç"></a>‰ΩøÁî®typeAliasesÈÖçÁΩÆÁ±ªÂûãÂà´Âêç</h1><p>Âè™ËÉΩÈÖçÁΩÆdomain‰∏≠Á±ªÁöÑÂà´Âêç</p>
<p>typeÔºöÊåáÂÆöÁöÑÊòØÂÆû‰ΩìÁ±ªÂÖ®ÈôêÂÆöÁ±ªÂêç</p>
<p>aliasÔºöÂ±ûÊÄßÊåáÂÆöÂà´Âêç</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Âçï‰∏™Âà´ÂêçÂÆö‰πâ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">"com.itheima.domain.User"</span> <span class="attr">alias</span>=<span class="string">"user"</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAlias</span>&gt;</span>--&gt;</span><br><span class="line">  <span class="comment">&lt;!-- Áî®‰∫éÊåáÂÆöË¶ÅÈÖçÁΩÆÂà´ÂêçÁöÑÂåÖÔºåÂΩìÊåáÂÆö‰πãÂêéÔºåËØ•ÂåÖ‰∏ãÁöÑÂÆû‰ΩìÁ±ªÈÉΩ‰ºöÊ≥®ÂÜåÂà´ÂêçÔºåÂπ∂‰∏îÁ±ªÂêçÂ∞±ÊòØÂà´ÂêçÔºå‰∏çÂÜçÂå∫ÂàÜÂ§ßÂ∞èÂÜô--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.itheima.domain"</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÊåáÂÆö‰∫ÜÂà´ÂêçÂ∞±‰∏çÂÜçÂå∫ÂàÜÂ§ßÂ∞èÂÜôÔºåuser„ÄÅUSER„ÄÅuSeRÈÉΩÂèØ‰ª•</p>
<h1 id="mappers"><a href="#mappers" class="headerlink" title="mappers"></a>mappers</h1><p>resourceÁî®‰∫éÊåáÂÆöÁõ∏ÂØπ‰∫éÁ±ªË∑ØÂæÑÁöÑËµÑÊ∫ê‰ΩçÁΩÆ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/itheima/dao/IUserDao.xml"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>classÊåáÂÆöÊé•Âè£Á±ªË∑ØÂæÑ</p>
<p>Ë¶ÅÊ±Ç mapper Êé•Âè£ÂêçÁß∞Âíå mapper Êò†Â∞ÑÊñá‰ª∂ÂêçÁß∞Áõ∏ÂêåÔºå‰∏îÊîæÂú®Âêå‰∏Ä‰∏™ÁõÆÂΩï‰∏≠</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">"com.itheima.dao.UserDao"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>Êõ¥ÁÆÄÂçïÁöÑÊñπÂºèÊòØ‰ΩøÁî®package</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--&lt;mapper resource="com/itheima/dao/IUserDao.xml"&gt;&lt;/mapper&gt;--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- packageÊ†áÁ≠æÊòØÁî®‰∫éÊåáÂÆödaoÊé•Âè£ÊâÄÂú®ÁöÑÂåÖ,ÂΩìÊåáÂÆö‰∫Ü‰πãÂêéÂ∞±‰∏çÈúÄË¶ÅÂÜçÂÜômapper‰ª•ÂèäresourceÊàñËÄÖclass‰∫Ü --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.itheima.dao"</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisÁ¨îËÆ∞03 ÂèÇÊï∞‰∏éÁªìÊûúÂ∞ÅË£Ö</title>
    <url>/2020/03/27/note-mybatis-03/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952553" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952553</a><br>p28ÔΩû29</p>
</blockquote>
<h1 id="ÂèÇÊï∞"><a href="#ÂèÇÊï∞" class="headerlink" title="ÂèÇÊï∞"></a>ÂèÇÊï∞</h1><p>ËæìÂÖ•Á±ªÂûãÂèØ‰ª•ÊòØÔºö</p>
<ul>
<li><p>ÁÆÄÂçïÁ±ªÂûã</p>
</li>
<li><p>pojoÂØπË±°</p>
<p>‰ΩøÁî®OGNLË°®ËææÂºèËß£ÊûêÂØπË±°Â≠óÊÆµÁöÑÂÄºÔºå#{}Êàñ${}Êã¨Âè∑‰∏≠ÁöÑÂÄº‰∏∫pojoÂ±ûÊÄßÂêçÁß∞</p>
</li>
<li><p>pojoÂåÖË£ÖÂØπË±°</p>
<p>ÊääÂÆû‰ΩìÁ±ªÂåÖË£ÖËµ∑Êù•ÔºåËøõË°åÊù°‰ª∂Êü•ËØ¢</p>
</li>
</ul>
<h2 id="OGNLË°®ËææÂºè"><a href="#OGNLË°®ËææÂºè" class="headerlink" title="OGNLË°®ËææÂºè"></a>OGNLË°®ËææÂºè</h2><p>Object Graphic Navigation Language</p>
<p>ÈÄöËøáÂØπË±°ÁöÑÂèñÂÄºÊñπÊ≥ïÊù•Ëé∑ÂèñÊï∞ÊçÆÔºåÁúÅÁï•get</p>
<p>Â¶ÇËé∑ÂèñÁî®Êà∑ÂêçÔºåÁ±ª‰∏≠ÁöÑÂÜôÊ≥ïÔºöuser.getUsername()</p>
<p>OGNLË°®ËææÂºèÂÜôÊ≥ïÔºöuser.username</p>
<p>MyBatis‰∏≠ÔºåÁî±‰∫éparameterType‰∏≠Â∑≤ÁªèÊèê‰æõ‰∫ÜÂ±ûÊÄßÊâÄÂ±ûÁöÑÁ±ªÔºåÂèØ‰ª•Áõ¥Êé•ÂÜôusernameÔºå‰∏çÈúÄË¶ÅÂÜôÂØπË±°Âêç</p>
<h2 id="Êù°‰ª∂Êü•ËØ¢‰æã"><a href="#Êù°‰ª∂Êü•ËØ¢‰æã" class="headerlink" title="Êù°‰ª∂Êü•ËØ¢‰æã"></a>Êù°‰ª∂Êü•ËØ¢‰æã</h2><p>ÈÄöËøáQueryVoËÆæÁΩÆÊü•ËØ¢Êù°‰ª∂</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueryVo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ê≠§Êó∂Áî®usernameÂ∞±ÈúÄË¶ÅÂä†ÂØπË±°Âêç</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Ê†πÊçÆqueryVoÁöÑÊù°‰ª∂Êü•ËØ¢Áî®Êà∑ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserByVo"</span> <span class="attr">parameterType</span>=<span class="string">"com.itheima.domain.QueryVo"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">  select * from user where username like #&#123;user.username&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindByVo</span><span class="params">()</span></span>&#123;</span><br><span class="line">  QueryVo vo = <span class="keyword">new</span> QueryVo();</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setUserName(<span class="string">"%Áéã%"</span>);</span><br><span class="line">  vo.setUser(user);</span><br><span class="line">  List&lt;User&gt; users = userDao.findUserByVo(vo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ÁªìÊûúÂ∞ÅË£Ö"><a href="#ÁªìÊûúÂ∞ÅË£Ö" class="headerlink" title="ÁªìÊûúÂ∞ÅË£Ö"></a>ÁªìÊûúÂ∞ÅË£Ö</h1><p>resultTypeÂèØ‰ª•ÊòØÔºö</p>
<ul>
<li>ÁÆÄÂçïÁ±ªÂûã</li>
<li>pojoÂØπË±°</li>
<li>pojoÂàóË°®</li>
</ul>
<h1 id="ÂêçÁß∞ÂØπÂ∫î"><a href="#ÂêçÁß∞ÂØπÂ∫î" class="headerlink" title="ÂêçÁß∞ÂØπÂ∫î"></a>ÂêçÁß∞ÂØπÂ∫î</h1><p>Â¶ÇÊûúÊú¨Êù•Â±ûÊÄßÂêçÂÖ®ÊòØÂ∞èÂÜôÔºåÊï∞ÊçÆÂ∫ì‰∏≠‰πüÂÖ®ÊòØÂ∞èÂÜôÔºåÂèØ‰ª•Ê≠£Â∏∏ÊâßË°å</p>
<p>ÊääÂ±ûÊÄßÂêç‰ªéÂÖ®Â∞èÂÜôÊîπÊàêÂ±±Â≥∞ÔºåÂ¶ÇuseridÊîπÊàêuserIdÔºåusernameÊîπÊàêuserNameÔºåËøêË°åÊü•ÊâÄÊúâ</p>
<p>ÂèØËÉΩÂè™ÊúâuserNameÁöÑÂÄºÊü•Âá∫Êù•‰∫Ü</p>
<p>Âõ†‰∏∫windowsÁ≥ªÁªü‰∏ãmysql‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜô</p>
<p>‰ΩÜÊòØlinuxÁ≥ªÁªü‰∏ãÂå∫ÂàÜ</p>
<p><strong>Ëß£ÂÜ≥ÊñπÊ≥ï</strong></p>
<ol>
<li>ÂèñÂà´Âêç</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">select id as userId,username as userName,address as userAddress,sex as userSex,birthday as userBirthday from user</span><br></pre></td></tr></table></figure>

<p>Âú®sqlËØ≠Âè•Â±ÇÈù¢Ëß£ÂÜ≥ÈóÆÈ¢òÔºåÊâßË°åÊïàÁéáÈ´ò</p>
<ol start="2">
<li>MyBatisÈÖçÁΩÆ</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆ Êü•ËØ¢ÁªìÊûúÁöÑÂàóÂêçÂíåÂÆû‰ΩìÁ±ªÁöÑÂ±ûÊÄßÂêçÁöÑÂØπÂ∫îÂÖ≥Á≥ª --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"userMap"</span> <span class="attr">type</span>=<span class="string">"uSeR"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ‰∏ªÈîÆÂ≠óÊÆµÁöÑÂØπÂ∫î --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"userId"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--Èùû‰∏ªÈîÆÂ≠óÊÆµÁöÑÂØπÂ∫î--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"userName"</span> <span class="attr">column</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"userAddress"</span> <span class="attr">column</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"userSex"</span> <span class="attr">column</span>=<span class="string">"sex"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"userBirthday"</span> <span class="attr">column</span>=<span class="string">"birthday"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Ê≠§Êó∂resultTypeË¶ÅÊîπÊàêresultMapÔºåËØ¥Êòé‰ΩøÁî®userMapËß£ÊûêÁªìÊûúÂ∞ÅË£Ö</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--select id as userId,username as userName,address as userAddress,sex as userSex,birthday as userBirthday from user;--&gt;</span></span><br><span class="line">  select * from user;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÂºÄÂèëÊïàÁéáÈ´ò‰∫õ</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisÁ¨îËÆ∞02 ÂÆûÁé∞CRUD</title>
    <url>/2020/03/27/note-mybatis-02/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952553" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952553</a><br>p21ÔΩû27, 44</p>
</blockquote>
<h1 id="Áî®Êà∑ÁöÑÊåÅ‰πÖÂ±ÇÊé•Âè£"><a href="#Áî®Êà∑ÁöÑÊåÅ‰πÖÂ±ÇÊé•Âè£" class="headerlink" title="Áî®Êà∑ÁöÑÊåÅ‰πÖÂ±ÇÊé•Âè£"></a>Áî®Êà∑ÁöÑÊåÅ‰πÖÂ±ÇÊé•Âè£</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Â¢û</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">saveUser</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Âà†</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">(Integer userId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Êîπ</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Êü•</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">User <span class="title">findById</span><span class="params">(Integer userId)</span></span>;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findByName</span><span class="params">(String username)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findTotal</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ÈÖçÁΩÆ‰∏éÊµãËØïÔºà‰ª•Êü•ÊâÄÊúâ‰∏∫‰æãÔºâ"><a href="#ÈÖçÁΩÆ‰∏éÊµãËØïÔºà‰ª•Êü•ÊâÄÊúâ‰∏∫‰æãÔºâ" class="headerlink" title="ÈÖçÁΩÆ‰∏éÊµãËØïÔºà‰ª•Êü•ÊâÄÊúâ‰∏∫‰æãÔºâ"></a>ÈÖçÁΩÆ‰∏éÊµãËØïÔºà‰ª•Êü•ÊâÄÊúâ‰∏∫‰æãÔºâ</h1><h2 id="Êü•ËØ¢Êìç‰ΩúÁöÑÊò†Â∞Ñ"><a href="#Êü•ËØ¢Êìç‰ΩúÁöÑÊò†Â∞Ñ" class="headerlink" title="Êü•ËØ¢Êìç‰ΩúÁöÑÊò†Â∞Ñ"></a>Êü•ËØ¢Êìç‰ΩúÁöÑÊò†Â∞Ñ</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Êü•ËØ¢ÊâÄÊúâ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultType</span>=<span class="string">"com.itheima.domain.User"</span>&gt;</span></span><br><span class="line">  select * from user;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> InputStream in;</span><br><span class="line">    <span class="keyword">private</span> SqlSession sqlSession;</span><br><span class="line">    <span class="keyword">private</span> IUserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span> <span class="comment">// Áî®‰∫éÂú®ÊµãËØïÊñπÊ≥ïÊâßË°å‰πãÂâçÊâßË°å</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">// 1.ËØªÂèñÈÖçÁΩÆÊñá‰ª∂ÔºåÁîüÊàêÂ≠óËäÇËæìÂÖ•ÊµÅ</span></span><br><span class="line">        in = Resources.getResourceAsStream(<span class="string">"SqlMapConfig.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.Ëé∑ÂèñSqlSessionFactory</span></span><br><span class="line">        SqlSessionFactory factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);</span><br><span class="line">        <span class="comment">// 3.Ëé∑ÂèñSqlSessionÂØπË±°</span></span><br><span class="line">        sqlSession = factory.openSession();</span><br><span class="line">        <span class="comment">// 4.Ëé∑ÂèñdaoÁöÑ‰ª£ÁêÜÂØπË±°</span></span><br><span class="line">        userDao = sqlSession.getMapper(IUserDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span> <span class="comment">// Áî®‰∫éÂú®ÊµãËØïÊñπÊ≥ïÊâßË°å‰πãÂêéÊâßË°å</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">// 5.Êèê‰∫§‰∫ãÂä°</span></span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        <span class="comment">// 6.ÈáäÊîæËµÑÊ∫ê</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ÊµãËØïÊü•ËØ¢ÊâÄÊúâ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;User&gt; users = userDao.findAll();</span><br><span class="line">        <span class="keyword">for</span>(User user : users)&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h1><h3 id="Â¢û"><a href="#Â¢û" class="headerlink" title="Â¢û"></a>Â¢û</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ‰øùÂ≠òÁî®Êà∑ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"saveUser"</span> <span class="attr">parameterType</span>=<span class="string">"com.itheima.domain.User"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ÈÖçÁΩÆÊèíÂÖ•Êìç‰ΩúÂêéÔºåËé∑ÂèñÊèíÂÖ•Êï∞ÊçÆÁöÑid --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">"userId"</span> <span class="attr">keyColumn</span>=<span class="string">"id"</span> <span class="attr">resultType</span>=<span class="string">"int"</span> <span class="attr">order</span>=<span class="string">"AFTER"</span>&gt;</span></span><br><span class="line">    select last_insert_id();</span><br><span class="line">  <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">  insert into user(username,address,sex,birthday)values(#&#123;userName&#125;,#&#123;userAddress&#125;,#&#123;userSex&#125;,#&#123;userBirthday&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line">user.setUserName(<span class="string">"AAA"</span>);</span><br><span class="line">user.setUserAddress(<span class="string">"Âåó‰∫¨Â∏ÇÈ°∫‰πâÂå∫"</span>);</span><br><span class="line">user.setUserSex(<span class="string">"Áî∑"</span>);</span><br><span class="line">user.setUserBirthday(<span class="keyword">new</span> Date());</span><br><span class="line">userDao.saveUser(user);</span><br></pre></td></tr></table></figure>

<p>ÂèØ‰ª•Âú®Êñ∞Â¢ûÁî®Êà∑ÂêéËé∑Âèñid</p>
<p>Âú®saveUserÂâçÂêéÊâìÂç∞userÔºåÂèØ‰ª•ÂèëÁé∞id‰ªénullÂèò‰∏∫ÂÄº</p>
<h3 id="Âà†"><a href="#Âà†" class="headerlink" title="Âà†"></a>Âà†</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Âà†Èô§Áî®Êà∑--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteUser"</span> <span class="attr">parameterType</span>=<span class="string">"java.lang.Integer"</span>&gt;</span></span><br><span class="line">  delete from user where id = #&#123;uid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ËøôÈáåuidÔºå‰º†Âü∫Êú¨Á±ªÂûãÊàñÂü∫Êú¨Á±ªÂûãÂåÖË£ÖÁ±ªÊó∂ÔºåÂç†‰ΩçÁ¨¶ÂèØ‰ª•Èöè‰æøÂÜô</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">userDao.deleteUser(<span class="number">48</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Êîπ"><a href="#Êîπ" class="headerlink" title="Êîπ"></a>Êîπ</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Êõ¥Êñ∞Áî®Êà∑ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateUser"</span> <span class="attr">parameterType</span>=<span class="string">"com.itheima.domain.User"</span>&gt;</span></span><br><span class="line">  update user set username=#&#123;userName&#125;,address=#&#123;userAddress&#125;,sex=#&#123;userAex&#125;,birthday=#&#123;userBirthday&#125; where id=#&#123;userId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line">user.setUserId(<span class="number">50</span>);</span><br><span class="line">user.setUserName(<span class="string">"BBB"</span>);</span><br><span class="line">user.setUserAddress(<span class="string">"Âåó‰∫¨Â∏ÇÈ°∫‰πâÂå∫"</span>);</span><br><span class="line">user.setUserSex(<span class="string">"Â•≥"</span>);</span><br><span class="line">user.setUserBirthday(<span class="keyword">new</span> Date());</span><br><span class="line">userDao.updateUser(user);</span><br></pre></td></tr></table></figure>

<h3 id="Êü•"><a href="#Êü•" class="headerlink" title="Êü•"></a>Êü•</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"com.itheima.domain.User"</span>&gt;</span></span><br><span class="line">  select * from user where id = #&#123;uid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Ê†πÊçÆÂêçÁß∞Ê®°Á≥äÊü•ËØ¢ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByName"</span> <span class="attr">parameterType</span>=<span class="string">"string"</span> <span class="attr">resultType</span>=<span class="string">"com.itheima.domain.User"</span>&gt;</span></span><br><span class="line">  select * from user where username like #&#123;name&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Ëé∑ÂèñÁî®Êà∑ÁöÑÊÄªËÆ∞ÂΩïÊù°Êï∞ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findTotal"</span> <span class="attr">resultType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">  select count(id) from user;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindOne</span><span class="params">()</span></span>&#123;</span><br><span class="line">  User  user = userDao.findById(<span class="number">50</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindByName</span><span class="params">()</span></span>&#123;</span><br><span class="line">  List&lt;User&gt; users = userDao.findByName(<span class="string">"%Áéã%"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindTotal</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> count = userDao.findTotal();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ê†πÊçÆÂêçÁß∞Êü•ËØ¢Êó∂ÔºåÂèØ‰ª•Êúâ‰∏§ÁßçÊñπÂºè</p>
<ol>
<li><p>select * from user where username like #{name}</p>
</li>
<li><p>select * from user where username like ‚Äò%${value}%‚Äô</p>
</li>
</ol>
<p>ÂâçËÄÖÁî®ÁöÑÊòØPrepareStatementÁöÑÂèÇÊï∞Âç†‰ΩçÁ¨¶ÔºàÊõ¥Â•ΩÔºâÔºåËÄåÂêéËÄÖÁî®ÁöÑÊòØÂ≠óÁ¨¶‰∏≤ÊãºÊé•</p>
<h1 id="‰∫ãÂä°"><a href="#‰∫ãÂä°" class="headerlink" title="‰∫ãÂä°"></a>‰∫ãÂä°</h1><p>MyBatisÈÄöËøásqlsessionÂØπË±°ÁöÑcommitÂíårollbackÊñπÊ≥ïÂÆûÁé∞‰∫ãÂä°ÁöÑÊèê‰∫§ÂíåÂõûÊªö</p>
<p>ÊúÄÁªàÁî®Âà∞ÁöÑÈÉΩÊòØconnection.commit()Âíåconnection.rollback()</p>
<p><strong>Ëá™Âä®Êèê‰∫§</strong></p>
<p>ÂàõÂª∫SqlSessionÊó∂ÂèØ‰ª•ËÆæÁΩÆËá™Âä®Êèê‰∫§</p>
<img src="/images/2020/screencapture2020-03-30AM10.53.57.jpg">

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">sqlSession = factory.openSession(<span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>

<p>ËøôÊ†∑ÂêéÈù¢Â∞±‰∏çÁî®ÊâãÂä®Êèê‰∫§‰∫Ü</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// sqlSession.commit();</span></span><br></pre></td></tr></table></figure>

<p>‰ΩÜÊòØÂÆûÈôÖ‰∏äËÉΩËøôÊ†∑Áî®‰∏çÂ§ö</p>
<p>Â¶ÇËΩ¨Ë¥¶Êìç‰ΩúÔºåËøòÊòØÈúÄË¶ÅÊâãÂä®ÊéßÂà∂Êèê‰∫§Êó∂Èó¥</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisÁ¨îËÆ∞01 ÂÖ•Èó®</title>
    <url>/2020/03/26/note-mybatis-01/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952553" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952553</a><br>p1~10</p>
</blockquote>
<h1 id="Ê°ÜÊû∂Ê¶ÇËø∞"><a href="#Ê°ÜÊû∂Ê¶ÇËø∞" class="headerlink" title="Ê°ÜÊû∂Ê¶ÇËø∞"></a>Ê°ÜÊû∂Ê¶ÇËø∞</h1><p>‰ªÄ‰πàÊòØÊ°ÜÊû∂ÔºöÊï¥‰∏™ÊàñÈÉ®ÂàÜÁ≥ªÁªüÁöÑÂèØÈáçÁî®ËÆæËÆ°ÔºåË°®Áé∞‰∏∫‰∏ÄÁªÑÊäΩË±°ÊûÑ‰ª∂ÂèäÊûÑ‰ª∂ÂÆû‰æãÈó¥‰∫§‰∫íÁöÑÊñπÊ≥ï</p>
<p>ÁõÆÁöÑÔºöÂ∞ÅË£ÖÁªÜËäÇÔºåÊèêÈ´òÂºÄÂèëÊïàÁéá -&gt; ÂÖ≥Ê≥®ÂäüËÉΩÂÆûÁé∞</p>
<p>‰∏çÂêåÁöÑÊ°ÜÊû∂ÂêÑÂè∏ÂÖ∂ËÅåÔºåËß£ÂÜ≥Êüê‰∏ÄÂ±ÇÊàñÊüê‰∏ÄÁ±ªÈóÆÈ¢ò</p>
<img src="/images/2020/screencapture2020-03-26PM10.20.30.jpg">

<p>ÊåÅ‰πÖÂ±ÇÊäÄÊúØÊúâjdbc„ÄÅSpringÁöÑJdbcTemplate„ÄÅApacheÁöÑDBUtils</p>
<p>‰ΩÜÊòØÂÆÉ‰ª¨ÈÉΩ‰∏çÊòØÊ°ÜÊû∂ÔºåjdbcÊòØËßÑËåÉÔºåJdbcTemplateÂíåDButilsÊòØÂ∑•ÂÖ∑Á±ªÔºàÂè™ÊúâÁÆÄÂçïÁöÑÂ∞ÅË£ÖËÄåÊ≤°ÊúâÂÆåÊï¥ÁöÑËß£ÂÜ≥ÊñπÊ°àÔºâ</p>
<h2 id="MyBatisÊ°ÜÊû∂Ê¶ÇËø∞"><a href="#MyBatisÊ°ÜÊû∂Ê¶ÇËø∞" class="headerlink" title="MyBatisÊ°ÜÊû∂Ê¶ÇËø∞"></a>MyBatisÊ°ÜÊû∂Ê¶ÇËø∞</h2><p>Âü∫‰∫é java ÁöÑÊåÅ‰πÖÂ±ÇÊ°ÜÊû∂</p>
<p>ÂÜÖÈÉ®Â∞ÅË£Ö‰∫Ü jdbcÊìç‰ΩúÁöÑÁªÜËäÇÔºå‰ΩøÂºÄÂèëËÄÖÂè™ÈúÄË¶ÅÂÖ≥Ê≥® sql ËØ≠Âè•Êú¨Ë∫´ÔºåËÄåÊó†ÈúÄÂÖ≥Ê≥®Ê≥®ÂÜåÈ©±Âä®„ÄÅÂàõÂª∫ËøûÊé•Á≠âÁπÅÊùÇËøáÁ®ã</p>
<p>‰ΩøÁî®ORMÔºàObject Relational MappingÔºâÊÄùÊÉ≥ÂÆûÁé∞ÁªìÊûúÈõÜÁöÑÂ∞ÅË£Ö</p>
<p>ÈÄöËøáxmlÊàñÊ≥®Ëß£ÁöÑÊñπÂºèÈÖçÁΩÆstatement</p>
<h1 id="ÁéØÂ¢ÉÊê≠Âª∫-amp-ÂÖ•Èó®Ê°à‰æã"><a href="#ÁéØÂ¢ÉÊê≠Âª∫-amp-ÂÖ•Èó®Ê°à‰æã" class="headerlink" title="ÁéØÂ¢ÉÊê≠Âª∫&amp;ÂÖ•Èó®Ê°à‰æã"></a>ÁéØÂ¢ÉÊê≠Âª∫&amp;ÂÖ•Èó®Ê°à‰æã</h1><h2 id="È°πÁõÆÁªìÊûÑ"><a href="#È°πÁõÆÁªìÊûÑ" class="headerlink" title="È°πÁõÆÁªìÊûÑ"></a>È°πÁõÆÁªìÊûÑ</h2><img src="/images/2020/screencapture2020-03-26PM10.44.35.jpg" width=400>

<p>Idea‰∏≠ÂàõÂª∫ÁõÆÂΩïÂíåÂåÖÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑ</p>
<p>ÂàõÂª∫ÂåÖÊó∂com.itheima.daoÊòØ‰∏âÁ∫ßÁªìÊûÑ</p>
<p>ÂàõÂª∫ÁõÆÂΩïÊó∂com.itheima.daoÊòØ‰∏ÄÁ∫ßÁõÆÂΩï</p>
<p>resource‰∏≠ÂàõÂª∫directoryË¶Å‰∏ÄÁ∫ß‰∏ÄÁ∫ßÁöÑÂàõÂª∫ÔºåÂõ†‰∏∫MyBatisÁöÑÊò†Â∞ÑÈÖçÁΩÆÊñá‰ª∂‰ΩçÁΩÆÂøÖÈ°ªÂíådaoÊé•Âè£ÁöÑÂåÖÁªìÊûÑÁõ∏Âêå</p>
<p>ÂÜçËøõË°åÁõ∏Â∫îÁöÑÈÖçÁΩÆÔºåÂ∞±Êó†È°ªÂÜçÂÜôdaoÁöÑÂÆûÁé∞Á±ª‰∫ÜÔºåÂâ©‰∏ãÁöÑÁî±MyBatisÂÆûÁé∞</p>
<p>ÔºàMyBatisÊîØÊåÅËá™Â∑±ÂÜôÂÆûÁé∞Á±ªÔºå‰ΩÜÊòØÊ≤°‰ªÄ‰πàÊÑè‰πâÔºâ</p>
<h2 id="1-ÂáÜÂ§áÊï∞ÊçÆÂ∫ì"><a href="#1-ÂáÜÂ§áÊï∞ÊçÆÂ∫ì" class="headerlink" title="1.ÂáÜÂ§áÊï∞ÊçÆÂ∫ì"></a>1.ÂáÜÂ§áÊï∞ÊçÆÂ∫ì</h2><p>UserË°®</p>
<h2 id="2-IdeaÂàõÂª∫MavenÂ∑•Á®ãÔºåÂØºÂùêÊ†á"><a href="#2-IdeaÂàõÂª∫MavenÂ∑•Á®ãÔºåÂØºÂùêÊ†á" class="headerlink" title="2.IdeaÂàõÂª∫MavenÂ∑•Á®ãÔºåÂØºÂùêÊ†á"></a>2.IdeaÂàõÂª∫MavenÂ∑•Á®ãÔºåÂØºÂùêÊ†á</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-ÂÆû‰ΩìÁ±ªÂíåDaoÊé•Âè£"><a href="#3-ÂÆû‰ΩìÁ±ªÂíåDaoÊé•Âè£" class="headerlink" title="3. ÂÆû‰ΩìÁ±ªÂíåDaoÊé•Âè£"></a>3. ÂÆû‰ΩìÁ±ªÂíåDaoÊé•Âè£</h2><p>ÂÆû‰ΩìÁ±ªUserÔºåÂ±ûÊÄßÂíåÊï∞ÊçÆÂ∫ìË°®‰∏≠Â≠óÊÆµ‰∏Ä‰∏ÄÂØπÂ∫îÔºåÂÆûÁé∞SerializableÔºåÁîüÊàêget„ÄÅsetÊñπÊ≥ï</p>
<p>Áî®Êà∑ÁöÑÊåÅ‰πÖÂ±ÇÊé•Âè£IUserDaoÔºå‰∏Ä‰∏™ÊñπÊ≥ïÔºöList<User> findAll();</p>
<h2 id="4-ÈÖçÁΩÆÊñá‰ª∂"><a href="#4-ÈÖçÁΩÆÊñá‰ª∂" class="headerlink" title="4. ÈÖçÁΩÆÊñá‰ª∂"></a>4. ÈÖçÁΩÆÊñá‰ª∂</h2><h3 id="‰∏ªÈÖçÁΩÆÊñá‰ª∂-SqlMapConfig-xml"><a href="#‰∏ªÈÖçÁΩÆÊñá‰ª∂-SqlMapConfig-xml" class="headerlink" title="‰∏ªÈÖçÁΩÆÊñá‰ª∂ SqlMapConfig.xml"></a>‰∏ªÈÖçÁΩÆÊñá‰ª∂ SqlMapConfig.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mybatisÁöÑ‰∏ªÈÖçÁΩÆÊñá‰ª∂ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ÈÖçÁΩÆÁéØÂ¢É --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ÈÖçÁΩÆmysqlÁöÑÁéØÂ¢É--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ÈÖçÁΩÆ‰∫ãÂä°ÁöÑÁ±ªÂûã--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ÈÖçÁΩÆÊï∞ÊçÆÊ∫êÔºàËøûÊé•Ê±†Ôºâ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- ÈÖçÁΩÆËøûÊé•Êï∞ÊçÆÂ∫ìÁöÑ4‰∏™Âü∫Êú¨‰ø°ÊÅØ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/eesy_mybatis"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"1234"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ÊåáÂÆöÊò†Â∞ÑÈÖçÁΩÆÊñá‰ª∂ÁöÑ‰ΩçÁΩÆÔºåÊò†Â∞ÑÈÖçÁΩÆÊñá‰ª∂ÊåáÁöÑÊòØÊØè‰∏™daoÁã¨Á´ãÁöÑÈÖçÁΩÆÊñá‰ª∂ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/itheima/dao/IUserDao.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span></span></span><br></pre></td></tr></table></figure>

<h3 id="Êò†Â∞ÑÈÖçÁΩÆÊñá‰ª∂-IUserDao-xml"><a href="#Êò†Â∞ÑÈÖçÁΩÆÊñá‰ª∂-IUserDao-xml" class="headerlink" title="Êò†Â∞ÑÈÖçÁΩÆÊñá‰ª∂ IUserDao.xml"></a>Êò†Â∞ÑÈÖçÁΩÆÊñá‰ª∂ IUserDao.xml</h3><p>MyBatis‰∏≠ÊåÅ‰πÖÂ±ÇÁöÑÊìç‰ΩúÊé•Âè£ÂêçÂíåÊò†Â∞ÑÊñá‰ª∂‰πüÂè´Mapper</p>
<p>ÂëΩÂêçIUserDaoÊàñËÄÖIUserMapperÈÉΩÂèØ‰ª•</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.dao.IUserDao"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ÈÖçÁΩÆÊü•ËØ¢ÊâÄÊúâ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultType</span>=<span class="string">"com.itheima.domain.User"</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>namespaceÂøÖÈ°ªÊòØdaoÊé•Âè£ÁöÑÊùÉÈôêÂÆöÁ±ªÂêç</p>
<p>idË¶ÅÂÜôdaoÊé•Âè£ÁöÑÊñπÊ≥ïÂêç</p>
<p>resultTypeÂÜôËøîÂõûÁ±ªÂûãÔºàÂ∞ÅË£ÖÊàê‰ªÄ‰πàÂØπË±°Ôºâ</p>
<p>sqlËØ≠Âè•ÂÜô‰∏çÂÜôÂàÜÂè∑ÂùáÂèØ</p>
<h2 id="5-ÊµãËØï"><a href="#5-ÊµãËØï" class="headerlink" title="5.ÊµãËØï"></a>5.ÊµãËØï</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.ËØªÂèñÈÖçÁΩÆÊñá‰ª∂</span></span><br><span class="line">InputStream in = Resources.getResourceAsStream(<span class="string">"SqlMapConfig.xml"</span>);</span><br><span class="line"><span class="comment">// 2.ÂàõÂª∫SqlSessionFactoryÂ∑•ÂéÇ</span></span><br><span class="line">SqlSessionFactoryBuilder builder = <span class="keyword">new</span> SqlSessionFactoryBuilder();</span><br><span class="line">SqlSessionFactory factory = builder.build(in);</span><br><span class="line"><span class="comment">// 3.‰ΩøÁî®Â∑•ÂéÇÁîü‰∫ßSqlSessionÂØπË±°</span></span><br><span class="line">SqlSession session = factory.openSession();</span><br><span class="line"><span class="comment">// 4.‰ΩøÁî®SqlSessionÂàõÂª∫DaoÊé•Âè£ÁöÑ‰ª£ÁêÜÂØπË±°</span></span><br><span class="line">IUserDao userDao = session.getMapper(IUserDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="comment">// 5.‰ΩøÁî®‰ª£ÁêÜÂØπË±°ÊâßË°åÊñπÊ≥ï</span></span><br><span class="line">List&lt;User&gt; users = userDao.findAll();</span><br><span class="line"><span class="keyword">for</span>(User user : users)&#123;</span><br><span class="line">  System.out.println(user);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 6.ÈáäÊîæËµÑÊ∫ê</span></span><br><span class="line">session.close();</span><br><span class="line">in.close();</span><br></pre></td></tr></table></figure>

<p>Ê∂âÂèäÊûÑÂª∫ËÄÖÊ®°Âºè&amp;Â∑•ÂéÇÊ®°Âºè&amp;Âä®ÊÄÅ‰ª£ÁêÜ</p>
<img src="/images/2020/screencapture2020-03-26PM11.27.06.jpg">

<h1 id="Ê≥®Ëß£ÊñπÂºè"><a href="#Ê≥®Ëß£ÊñπÂºè" class="headerlink" title="Ê≥®Ëß£ÊñπÂºè"></a>Ê≥®Ëß£ÊñπÂºè</h1><p>‰∏ªÈÖçÁΩÆÊñá‰ª∂ËøòË¶ÅÊúâÔºå‰øÆÊîπ‰∏Ä‰∏ãmapperÂç≥ÂèØÔºåÊò†Â∞ÑÈÖçÁΩÆÊñá‰ª∂ÂèØ‰ª•‰∏çË¶Å‰∫Ü</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ÊåáÂÆöÊò†Â∞ÑÈÖçÁΩÆÊñá‰ª∂ÁöÑ‰ΩçÁΩÆÔºåÊò†Â∞ÑÈÖçÁΩÆÊñá‰ª∂ÊåáÁöÑÊòØÊØè‰∏™daoÁã¨Á´ãÁöÑÈÖçÁΩÆÊñá‰ª∂</span></span><br><span class="line"><span class="comment">        Â¶ÇÊûúÊòØÁî®Ê≥®Ëß£Êù•ÈÖçÁΩÆÁöÑËØùÔºåÊ≠§Â§ÑÂ∫îËØ•‰ΩøÁî®classÂ±ûÊÄßÊåáÂÆöË¢´Ê≥®Ëß£ÁöÑdaoÂÖ®ÈôêÂÆöÁ±ªÂêç</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">"com.itheima.dao.IUserDao"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>IUserDaoÂä†@Select</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user"</span>)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringÁ¨îËÆ∞15 ÊÄªÁªì</title>
    <url>/2020/03/20/note-spring-15/</url>
    <content><![CDATA[<img src="/images/2020/spring.png">]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>mindmap</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringÁ¨îËÆ∞14 Spring5ÁöÑÊñ∞ÁâπÊÄß</title>
    <url>/2020/03/20/note-spring-14/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931?p=82" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931?p=82</a></p>
</blockquote>
<p>Âü∫‰∫éjdk1.8ÔºåtomcatÁâàÊú¨Ë¶ÅÊ±Ç8.5‰ª•‰∏ä</p>
<h1 id="Âà©Áî®jdk8ÁâàÊú¨Êõ¥Êñ∞ÁöÑÂÜÖÂÆπ"><a href="#Âà©Áî®jdk8ÁâàÊú¨Êõ¥Êñ∞ÁöÑÂÜÖÂÆπ" class="headerlink" title="Âà©Áî®jdk8ÁâàÊú¨Êõ¥Êñ∞ÁöÑÂÜÖÂÆπ"></a>Âà©Áî®jdk8ÁâàÊú¨Êõ¥Êñ∞ÁöÑÂÜÖÂÆπ</h1><h2 id="Âü∫‰∫éjdk8ÁöÑÂèçÂ∞ÑÂ¢ûÂº∫"><a href="#Âü∫‰∫éjdk8ÁöÑÂèçÂ∞ÑÂ¢ûÂº∫" class="headerlink" title="Âü∫‰∫éjdk8ÁöÑÂèçÂ∞ÑÂ¢ûÂº∫"></a>Âü∫‰∫éjdk8ÁöÑÂèçÂ∞ÑÂ¢ûÂº∫</h2><p> <strong>‰∏Ä‰∏™ÊµãËØï</strong></p>
<p>‰∏âÁßçÊìç‰ΩúÔºö</p>
<p>1.ÂàõÂª∫Êñ∞ÂØπË±°Âπ∂ËµãÂÄº</p>
<p>2.ÂàõÂª∫‰∏Ä‰∏™ÂØπË±°ËµãÂÄºÂ§öÊ¨°</p>
<p>3.ÈÄöËøáÂèçÂ∞ÑÂàõÂª∫ÂØπË±°Âπ∂ËµãÂÄº</p>
<p>ÂàÜÂà´ÊâßË°å10‰∫øÊ¨°ÔºåÊØîËæÉÁî®Êó∂(ms)</p>
<p>jdk8Ôºö8„ÄÅ31„ÄÅ2417</p>
<p>jdk7Ôºö6212„ÄÅ3025„ÄÅ290400</p>
<h2 id="NonNull-Âíå-Nullable-ÁöÑ‰ΩøÁî®"><a href="#NonNull-Âíå-Nullable-ÁöÑ‰ΩøÁî®" class="headerlink" title="@NonNull Âíå@Nullable ÁöÑ‰ΩøÁî®"></a>@NonNull Âíå@Nullable ÁöÑ‰ΩøÁî®</h2><p>Áî® @Nullable Âíå @NotNull Ê≥®Ëß£Êù•Ë°®ÊòéÂèØ‰∏∫Á©∫ÁöÑÂèÇÊï∞Âíå‰ª•ÂèäËøîÂõûÂÄº</p>
<p>ËøôÊ†∑Â∞±Â§üÂú®ÁºñËØëÁöÑÊó∂ÂÄôÂ§ÑÁêÜÁ©∫ÂÄºËÄå‰∏çÊòØÂú®ËøêË°åÊó∂ÊäõÂá∫ NullPointerExceptions</p>
<h2 id="Êó•ÂøóËÆ∞ÂΩïÊñπÈù¢"><a href="#Êó•ÂøóËÆ∞ÂΩïÊñπÈù¢" class="headerlink" title="Êó•ÂøóËÆ∞ÂΩïÊñπÈù¢"></a>Êó•ÂøóËÆ∞ÂΩïÊñπÈù¢</h2><p>Â∞ÅË£Ö Commons Logging Ê°•Êé•Ê®°ÂùóÔºàÂè´ÂÅö spring-jclÔºâ</p>
<h1 id="Ê†∏ÂøÉÂÆπÂô®ÁöÑÊõ¥Êñ∞"><a href="#Ê†∏ÂøÉÂÆπÂô®ÁöÑÊõ¥Êñ∞" class="headerlink" title="Ê†∏ÂøÉÂÆπÂô®ÁöÑÊõ¥Êñ∞"></a>Ê†∏ÂøÉÂÆπÂô®ÁöÑÊõ¥Êñ∞</h1><p>ÊîØÊåÅÂÄôÈÄâÁªÑ‰ª∂Á¥¢Âºï‰Ωú‰∏∫Á±ªË∑ØÂæÑÊâ´ÊèèÁöÑÊõø‰ª£ÊñπÊ°à</p>
<p>‰ªéÁ¥¢ÂºïËØªÂèñÂÆû‰ΩìËÄå‰∏çÊòØÊâ´ÊèèÁ±ªË∑ØÂæÑÂØπ‰∫éÂ∞è‰∫é 200 ‰∏™Á±ªÁöÑÂ∞èÂûãÈ°πÁõÆÊ≤°ÊúâÊòéÊòæÂ∑ÆÂºÇ</p>
<p>ÂØπ‰∫éÂ§ßÂûãÈ°πÁõÆÔºåÂ∫îÁî®Á®ãÂ∫èÁöÑÂêØÂä®Êó∂Èó¥Â∞ÜË¢´Â§ßÂ§ßÁº©Âáè</p>
<h1 id="JetBrains-Kotlin-ËØ≠Ë®ÄÊîØÊåÅ"><a href="#JetBrains-Kotlin-ËØ≠Ë®ÄÊîØÊåÅ" class="headerlink" title="JetBrains Kotlin ËØ≠Ë®ÄÊîØÊåÅ"></a>JetBrains Kotlin ËØ≠Ë®ÄÊîØÊåÅ</h1><h1 id="ÂìçÂ∫îÂºèÁºñÁ®ãÈ£éÊ†º"><a href="#ÂìçÂ∫îÂºèÁºñÁ®ãÈ£éÊ†º" class="headerlink" title="ÂìçÂ∫îÂºèÁºñÁ®ãÈ£éÊ†º"></a>ÂìçÂ∫îÂºèÁºñÁ®ãÈ£éÊ†º</h1><p>ÂìçÂ∫îÂºèÂ†ÜÊ†à WEB Ê°ÜÊû∂</p>
<p>Ëøô‰∏™Â†ÜÊ†àÂÆåÂÖ®ÁöÑÂìçÂ∫îÂºè‰∏îÈùûÈòªÂ°ûÔºåÈÄÇÂêà‰∫é‰∫ã‰ª∂Âæ™ÁéØÈ£éÊ†ºÁöÑÂ§ÑÁêÜÔºåÂèØ‰ª•ËøõË°åÂ∞ëÈáèÁ∫øÁ®ãÁöÑÊâ©Â±ï</p>
<p>ÔºàÊúâ‰∏Ä‰∏™ÂìçÂ∫îÂºèÁºñÁ®ãÂÆûÊàòÁ§∫‰æãÔºåÂª∫ËÆÆÂ≠¶ÂÆåSpring Boot‰πãÂêéÊê≠Âª∫  -MARK- Ôºâ</p>
<h1 id="Junit5-ÊîØÊåÅ"><a href="#Junit5-ÊîØÊåÅ" class="headerlink" title="Junit5 ÊîØÊåÅ"></a>Junit5 ÊîØÊåÅ</h1>]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringÁ¨îËÆ∞13 Spring‰∏≠ÁöÑ‰∫ãÂä°ÊéßÂà∂</title>
    <url>/2020/03/19/note-spring-13/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p75-78</p>
</blockquote>
<p>Âá†‰∏™ÁÇπÔºö</p>
<ul>
<li>JavaEE‰ΩìÁ≥ªËøõË°åÂàÜÂ±ÇÂºÄÂèëÔºå‰∫ãÂä°Â§ÑÁêÜ‰Ωç‰∫é‰∏öÂä°Â±Ç</li>
<li>SpringÊèê‰æõ‰∫ãÂä°ÊéßÂà∂ÁöÑÊé•Âè£ÔºåÂú®spring-tx-5.0.2.RELEASE.jar‰∏≠</li>
<li>SpringÁöÑ‰∫ãÂä°ÊéßÂà∂Âü∫‰∫éAOP„ÄÇÂÆÉÊó¢ÂèØ‰ª•Áî®ÈÖçÁΩÆÊñπÂºèÂÆûÁé∞Ôºå‰πüÂèØ‰ª•Áî®ÁºñÁ®ãÊñπÂºèÂÆûÁé∞ÔºàÈáçÁÇπÊòØÈÖçÁΩÆÂÆûÁé∞Ôºâ</li>
</ul>
<h1 id="Spring‰∏≠‰∫ãÂä°ÊéßÂà∂ÁöÑAPI"><a href="#Spring‰∏≠‰∫ãÂä°ÊéßÂà∂ÁöÑAPI" class="headerlink" title="Spring‰∏≠‰∫ãÂä°ÊéßÂà∂ÁöÑAPI"></a>Spring‰∏≠‰∫ãÂä°ÊéßÂà∂ÁöÑAPI</h1><h2 id="PlatformTransactionManager"><a href="#PlatformTransactionManager" class="headerlink" title="PlatformTransactionManager"></a>PlatformTransactionManager</h2><p>ËØ•Êé•Âè£Êèê‰æõ‰∫ãÂä°Êìç‰ΩúÁöÑÊñπÊ≥ïÔºö</p>
<ul>
<li>Ëé∑ÂèñÁä∂ÊÄÅ getTransaction()</li>
<li>Êèê‰∫§ commit()</li>
<li>ÂõûÊªö rollback()</li>
</ul>
<p>Â∏∏Áî®ÂÆûÁé∞Á±ªÔºö</p>
<ul>
<li>org.springframework.jdbc.datasource.DataSourceTransactionManager </li>
<li>org.springframework.orm.hibernate5.HibernateTransactionManager </li>
</ul>
<h2 id="TransactionDefinition"><a href="#TransactionDefinition" class="headerlink" title="TransactionDefinition"></a>TransactionDefinition</h2><p>ËØ•Êé•Âè£ÊòØ‰∫ãÂä°ÁöÑÂÆö‰πâ‰ø°ÊÅØÂØπË±°ÔºåÂèØ‰ª•Ëé∑Âèñ‰∫ãÂä°ÂØπË±°ÂêçÁß∞„ÄÅÈöîÁ¶ªÁ∫ßÂà´„ÄÅ‰º†Êí≠Ë°å‰∏∫„ÄÅË∂ÖÊó∂Êó∂Èó¥„ÄÅÊòØÂê¶Âè™ËØª</p>
<p>SpringÈªòËÆ§‰ΩøÁî®Êï∞ÊçÆÂ∫ìÁöÑÈöîÁ¶ªÁ∫ßÂà´</p>
<p>‰º†Êí≠Ë°å‰∏∫Êåá‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÂøÖÈ°ªÊúâ‰∫ãÂä°„ÄÅ‰ªÄ‰πàÊÉÖÂÜµÂèØÊúâÂèØÊó†</p>
<h2 id="TransactionStatus"><a href="#TransactionStatus" class="headerlink" title="TransactionStatus"></a>TransactionStatus</h2><p>ËØ•Êé•Âè£Êèê‰æõ‰∫ãÂä°ÁöÑËøêË°åÁä∂ÊÄÅÔºåÂèØ‰ª•Âà∑Êñ∞‰∫ãÂä°„ÄÅËé∑ÂèñÊòØÂê¶Â≠òÂú®Â≠òÂÇ®ÁÇπÔºàÂèØ‰ª•ÁêÜËß£‰∏∫ÊåâÊ≠•Êèê‰∫§ÔºåÂõûÊªöÂèØ‰ª•ÂõûÊªöÂà∞ÂΩìÂâçÁÇπÔºå‰∏çÁî®ÂÖ®ÈÉ®ÂõûÊªöÔºâ„ÄÅÊòØÂê¶ÂÆåÊàê„ÄÅÊòØÂê¶‰∏∫Êñ∞ÁöÑ‰∫ãÂä°„ÄÅÊòØÂê¶ÂõûÊªö„ÄÅËÆæÁΩÆÂõûÊªö</p>
<h1 id="SpringÁöÑ‰∫ãÂä°ÊéßÂà∂"><a href="#SpringÁöÑ‰∫ãÂä°ÊéßÂà∂" class="headerlink" title="SpringÁöÑ‰∫ãÂä°ÊéßÂà∂"></a>SpringÁöÑ‰∫ãÂä°ÊéßÂà∂</h1><h2 id="‰ª£Á†ÅÂáÜÂ§á"><a href="#‰ª£Á†ÅÂáÜÂ§á" class="headerlink" title="‰ª£Á†ÅÂáÜÂ§á"></a>‰ª£Á†ÅÂáÜÂ§á</h2><p>pom.xml‰∏≠ÈúÄË¶ÅÂØºÂÖ•aspectjÁöÑ‰æùËµñÔºåÂõ†‰∏∫‰∫ãÂä°ÊéßÂà∂Âü∫‰∫éAOP</p>
<p>ÂáÜÂ§áÊï∞ÊçÆÂ∫ìË°®ÂíåÂÆû‰ΩìÁ±ªÔºàËøòÊòØË¥¶Êà∑Ôºâ</p>
<p>ÂÆûÁé∞‰∏â‰∏™ÊñπÊ≥ïÔºöÊ†πÊçÆIdÊü•ËØ¢Ë¥¶Êà∑„ÄÅÊ†πÊçÆÂêçÁß∞Êü•ËØ¢Ë¥¶Êà∑„ÄÅËΩ¨Ë¥¶</p>
<p>ÁºñÂÜôDaoÂ±ÇÂíå‰∏öÂä°Â±ÇÊé•Âè£ÂíåÂÆûÁé∞Á±ª</p>
<h2 id="Âü∫‰∫éXMLÁöÑÂ£∞ÊòéÂºè‰∫ãÂä°ÊéßÂà∂"><a href="#Âü∫‰∫éXMLÁöÑÂ£∞ÊòéÂºè‰∫ãÂä°ÊéßÂà∂" class="headerlink" title="Âü∫‰∫éXMLÁöÑÂ£∞ÊòéÂºè‰∫ãÂä°ÊéßÂà∂"></a>Âü∫‰∫éXMLÁöÑÂ£∞ÊòéÂºè‰∫ãÂä°ÊéßÂà∂</h2><p>ÈÖçÁΩÆÊ≠•È™§</p>
<p>1„ÄÅÈÖçÁΩÆ‰∫ãÂä°ÁÆ°ÁêÜÂô®</p>
<p>2„ÄÅÈÖçÁΩÆ‰∫ãÂä°ÁöÑÈÄöÁü•</p>
<p>Ê≠§Êó∂ÈúÄË¶ÅÂØºÂÖ•‰∫ãÂä°ÁöÑÁ∫¶ÊùüÔºàÊñáÊ°£È¶ñÈ°µÁÇπData AccessÔºåÊêúxmlns:txÔºåÂêåÊó∂‰πü‰ºöÂØºÂÖ•AOPÁöÑÁ∫¶ÊùüÔºâ</p>
<p>‰ΩøÁî®tx:adviceÊ†áÁ≠æÈÖçÁΩÆ‰∫ãÂä°ÈÄöÁü•<br>Â±ûÊÄßÔºöidÔºö‰∫ãÂä°ÈÄöÁü•ÁöÑÂîØ‰∏ÄÊ†áËØÜ   transaction-managerÔºöÁªô‰∫ãÂä°ÈÄöÁü•Êèê‰æõ‰∏Ä‰∏™‰∫ãÂä°ÁÆ°ÁêÜÂô®ÂºïÁî®</p>
<p>3„ÄÅÈÖçÁΩÆAOP‰∏≠ÁöÑÈÄöÁî®ÂàáÂÖ•ÁÇπË°®ËææÂºè</p>
<p>4„ÄÅÂª∫Á´ã‰∫ãÂä°ÈÄöÁü•ÂíåÂàáÂÖ•ÁÇπË°®ËææÂºèÁöÑÂØπÂ∫îÂÖ≥Á≥ª</p>
<p>5„ÄÅÈÖçÁΩÆ‰∫ãÂä°ÁöÑÂ±ûÊÄßÔºàÂú®‰∫ãÂä°ÁöÑÈÄöÁü•tx:adviceÊ†áÁ≠æÁöÑÂÜÖÈÉ®Ôºâ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆ‰∫ãÂä°ÁÆ°ÁêÜÂô® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆ‰∫ãÂä°ÁöÑÈÄöÁü•--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ÈÖçÁΩÆ‰∫ãÂä°ÁöÑÂ±ûÊÄß</span></span><br><span class="line"><span class="comment">                isolationÔºöÁî®‰∫éÊåáÂÆö‰∫ãÂä°ÁöÑÈöîÁ¶ªÁ∫ßÂà´„ÄÇÈªòËÆ§ÂÄºÊòØDEFAULTÔºåË°®Á§∫‰ΩøÁî®Êï∞ÊçÆÂ∫ìÁöÑÈªòËÆ§ÈöîÁ¶ªÁ∫ßÂà´„ÄÇ</span></span><br><span class="line"><span class="comment">                propagationÔºöÁî®‰∫éÊåáÂÆö‰∫ãÂä°ÁöÑ‰º†Êí≠Ë°å‰∏∫„ÄÇÈªòËÆ§ÂÄºÊòØREQUIREDÔºåË°®Á§∫‰∏ÄÂÆö‰ºöÊúâ‰∫ãÂä°ÔºåÂ¢ûÂà†ÊîπÁöÑÈÄâÊã©„ÄÇÊü•ËØ¢ÊñπÊ≥ïÂèØ‰ª•ÈÄâÊã©SUPPORTS„ÄÇ</span></span><br><span class="line"><span class="comment">                read-onlyÔºöÁî®‰∫éÊåáÂÆö‰∫ãÂä°ÊòØÂê¶Âè™ËØª„ÄÇÂè™ÊúâÊü•ËØ¢ÊñπÊ≥ïÊâçËÉΩËÆæÁΩÆ‰∏∫true„ÄÇÈªòËÆ§ÂÄºÊòØfalseÔºåË°®Á§∫ËØªÂÜô„ÄÇ</span></span><br><span class="line"><span class="comment">                timeoutÔºöÁî®‰∫éÊåáÂÆö‰∫ãÂä°ÁöÑË∂ÖÊó∂Êó∂Èó¥ÔºåÈªòËÆ§ÂÄºÊòØ-1ÔºåË°®Á§∫Ê∞∏‰∏çË∂ÖÊó∂„ÄÇÂ¶ÇÊûúÊåáÂÆö‰∫ÜÊï∞ÂÄºÔºå‰ª•Áßí‰∏∫Âçï‰Ωç„ÄÇ</span></span><br><span class="line"><span class="comment">                rollback-forÔºöÁî®‰∫éÊåáÂÆö‰∏Ä‰∏™ÂºÇÂ∏∏ÔºåÂΩì‰∫ßÁîüËØ•ÂºÇÂ∏∏Êó∂Ôºå‰∫ãÂä°ÂõûÊªöÔºå‰∫ßÁîüÂÖ∂‰ªñÂºÇÂ∏∏Êó∂Ôºå‰∫ãÂä°‰∏çÂõûÊªö„ÄÇÊ≤°ÊúâÈªòËÆ§ÂÄº„ÄÇË°®Á§∫‰ªª‰ΩïÂºÇÂ∏∏ÈÉΩÂõûÊªö„ÄÇ</span></span><br><span class="line"><span class="comment">                no-rollback-forÔºöÁî®‰∫éÊåáÂÆö‰∏Ä‰∏™ÂºÇÂ∏∏ÔºåÂΩì‰∫ßÁîüËØ•ÂºÇÂ∏∏Êó∂Ôºå‰∫ãÂä°‰∏çÂõûÊªöÔºå‰∫ßÁîüÂÖ∂‰ªñÂºÇÂ∏∏Êó∂‰∫ãÂä°ÂõûÊªö„ÄÇÊ≤°ÊúâÈªòËÆ§ÂÄº„ÄÇË°®Á§∫‰ªª‰ΩïÂºÇÂ∏∏ÈÉΩÂõûÊªö„ÄÇ</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ÂêéÈù¢ÂÜôÊü•ËØ¢ÊñπÊ≥ïÈÉΩ‰ª•findÂºÄÂ§¥ ËøôÊ†∑‰∏§Ë°åÈÖçÁΩÆÂ∞±Â§ü‰∫Ü--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"find*"</span> <span class="attr">propagation</span>=<span class="string">"SUPPORTS"</span> <span class="attr">read-only</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:method</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆaop--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ÈÖçÁΩÆÂàáÂÖ•ÁÇπË°®ËææÂºè--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"pt1"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:pointcut</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--Âª∫Á´ãÂàáÂÖ•ÁÇπË°®ËææÂºèÂíå‰∫ãÂä°ÈÄöÁü•ÁöÑÂØπÂ∫îÂÖ≥Á≥ª --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:advisor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ËøôÊ†∑service.impl‰∏ãÁöÑÂÆûÁé∞Á±ªÂ∞±ÈÉΩÈÖçÁΩÆÂ•Ω‰∫ãÂä°ÊéßÂà∂‰∫Ü</p>
<h2 id="Âü∫‰∫éÊ≥®Ëß£ÁöÑÂ£∞ÊòéÂºè‰∫ãÂä°ÊéßÂà∂"><a href="#Âü∫‰∫éÊ≥®Ëß£ÁöÑÂ£∞ÊòéÂºè‰∫ãÂä°ÊéßÂà∂" class="headerlink" title="Âü∫‰∫éÊ≥®Ëß£ÁöÑÂ£∞ÊòéÂºè‰∫ãÂä°ÊéßÂà∂"></a>Âü∫‰∫éÊ≥®Ëß£ÁöÑÂ£∞ÊòéÂºè‰∫ãÂä°ÊéßÂà∂</h2><p>ÂØºÂêçÁß∞Á©∫Èó¥Êó∂Ë¶ÅÂ§ö‰∏Ä‰∏™contextÔºå‰ª•ÂèäÂØπÂ∫îÁöÑÁ∫¶Êùü</p>
<p>‰∏öÂä°Â±Ç</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="meta">@Transactional</span>(propagation= Propagation.SUPPORTS,readOnly=<span class="keyword">true</span>) <span class="comment">// Âè™ËØªÂûã‰∫ãÂä°ÁöÑÈÖçÁΩÆ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">findAccountById</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findAccountById(accountId);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ÈúÄË¶ÅÁöÑÊòØËØªÂÜôÂûã‰∫ãÂä°ÈÖçÁΩÆ</span></span><br><span class="line">    <span class="meta">@Transactional</span>(propagation= Propagation.REQUIRED,readOnly=<span class="keyword">false</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(String sourceName, String targetName, Float money)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// 2.1Ê†πÊçÆÂêçÁß∞Êü•ËØ¢ËΩ¨Âá∫Ë¥¶Êà∑</span></span><br><span class="line">            Account source = accountDao.findAccountByName(sourceName);</span><br><span class="line">            <span class="comment">// 2.2Ê†πÊçÆÂêçÁß∞Êü•ËØ¢ËΩ¨ÂÖ•Ë¥¶Êà∑</span></span><br><span class="line">            Account target = accountDao.findAccountByName(targetName);</span><br><span class="line">            <span class="comment">// 2.3ËΩ¨Âá∫Ë¥¶Êà∑ÂáèÈí±</span></span><br><span class="line">            source.setMoney(source.getMoney()-money);</span><br><span class="line">            <span class="comment">// 2.4ËΩ¨ÂÖ•Ë¥¶Êà∑Âä†Èí±</span></span><br><span class="line">            target.setMoney(target.getMoney()+money);</span><br><span class="line">            <span class="comment">// 2.5Êõ¥Êñ∞ËΩ¨Âá∫Ë¥¶Êà∑</span></span><br><span class="line">            accountDao.updateAccount(source);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> i=<span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2.6Êõ¥Êñ∞ËΩ¨ÂÖ•Ë¥¶Êà∑</span></span><br><span class="line">            accountDao.updateAccount(target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>DaoÂ±Ç</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span>(<span class="string">"accountDao"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountDaoImpl</span> <span class="keyword">implements</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ê≠§Êó∂‰∏çËÉΩÂÜçÁªßÊâøJdbcDaoSupport‰∫ÜÔºàÂõ†‰∏∫Ê≤°Ê≥ïÁªôjdbcTemplateÂä†Ê≥®Ëß£ÔºâÔºåÂøÖÈ°ªËá™Â∑±ÂÆö‰πâ‰∏Ä‰∏™jdbcTemplateÔºåÂπ∂Âú®xml‰∏≠ÈÖçÁΩÆÔºàÂπ∂Ê≥®ÂÖ•dataSourceÔºåËøòË¶ÅÈÖçÁΩÆSpringÂú®ÂàõÂª∫ÂÆπÂô®Êó∂ÈúÄË¶ÅÊâ´ÊèèÁöÑÂåÖÔºâ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆspringÂàõÂª∫ÂÆπÂô®Êó∂Ë¶ÅÊâ´ÊèèÁöÑÂåÖ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.itheima"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆJdbcTemplate--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆÊï∞ÊçÆÊ∫ê--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/eesy"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"1234"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- spring‰∏≠Âü∫‰∫éÊ≥®Ëß£ ÁöÑÂ£∞ÊòéÂºè‰∫ãÂä°ÊéßÂà∂ÈÖçÁΩÆÊ≠•È™§</span></span><br><span class="line"><span class="comment">            1„ÄÅÈÖçÁΩÆ‰∫ãÂä°ÁÆ°ÁêÜÂô®</span></span><br><span class="line"><span class="comment">            2„ÄÅÂºÄÂêØspringÂØπÊ≥®Ëß£‰∫ãÂä°ÁöÑÊîØÊåÅ</span></span><br><span class="line"><span class="comment">            3„ÄÅÂú®ÈúÄË¶Å‰∫ãÂä°ÊîØÊåÅÁöÑÂú∞Êñπ‰ΩøÁî®@TransactionalÊ≥®Ëß£</span></span><br><span class="line"><span class="comment">         --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆ‰∫ãÂä°ÁÆ°ÁêÜÂô® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ÂºÄÂêØspringÂØπÊ≥®Ëß£‰∫ãÂä°ÁöÑÊîØÊåÅ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Â±ûÊÄßÂú®@Transactional‰∏≠ÈÖçÁΩÆ</p>
<p>‰∏Ä‰∏™ÈóÆÈ¢òÊòØÔºåÂ¶ÇÊûúÊúâÂçÅ‰∏™‰∫ãÂä°Ôºå‰∏ÄÂçäÂè™ËØª‰∏ÄÂçäËØªÂÜôÔºåÂ∞±ÈÉΩÂæóÂçïÁã¨ÈÖçÁΩÆÂ±ûÊÄß</p>
<p>ËÄåÁî®xmlÈÖçÁΩÆÊó∂‰∏ÄÊ¨°Â∞±Ëß£ÂÜ≥‰∫Ü</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringÁ¨îËÆ∞12 Âü∫‰∫éXMLÂíåÊ≥®Ëß£ÁöÑ‰∫ãÂä°ÊéßÂà∂</title>
    <url>/2020/03/19/note-spring-12/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p72-74</p>
</blockquote>
<h1 id="Âü∫‰∫éXMLÁöÑ‰∫ãÂä°ÊéßÂà∂"><a href="#Âü∫‰∫éXMLÁöÑ‰∫ãÂä°ÊéßÂà∂" class="headerlink" title="Âü∫‰∫éXMLÁöÑ‰∫ãÂä°ÊéßÂà∂"></a>Âü∫‰∫éXMLÁöÑ‰∫ãÂä°ÊéßÂà∂</h1><p>2‰∏™Â∑•ÂÖ∑Á±ªÔºöConnectionUtils Âíå TransactionManager</p>
<p>ËßÅ <a href="/2020/03/09/note-spring-09/">SpringÁ¨îËÆ∞09 ‰∫ãÂä°ÊéßÂà∂ÁöÑÈóÆÈ¢ò&amp;Âä®ÊÄÅ‰ª£ÁêÜ</a></p>
<p>‰∏ªË¶ÅÈÖçÁΩÆ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆConnectionÁöÑÂ∑•ÂÖ∑Á±ª ConnectionUtils --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"connectionUtils"</span> <span class="attr">class</span>=<span class="string">"com.itheima.utils.ConnectionUtils"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Ê≥®ÂÖ•Êï∞ÊçÆÊ∫ê--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆ‰∫ãÂä°ÁÆ°ÁêÜÂô®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"com.itheima.utils.TransactionManager"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Ê≥®ÂÖ•ConnectionUtils --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connectionUtils"</span> <span class="attr">ref</span>=<span class="string">"connectionUtils"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--ÈÖçÁΩÆaop--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--ÈÖçÁΩÆÈÄöÁî®ÂàáÂÖ•ÁÇπË°®ËææÂºè--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"pt1"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:pointcut</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">ref</span>=<span class="string">"txManager"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ÈÖçÁΩÆÂâçÁΩÆÈÄöÁü•ÔºöÂºÄÂêØ‰∫ãÂä°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">"beginTransaction"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ÈÖçÁΩÆÂêéÁΩÆÈÄöÁü•ÔºöÊèê‰∫§‰∫ãÂä°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">"commit"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after-returning</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ÈÖçÁΩÆÂºÇÂ∏∏ÈÄöÁü•ÔºöÂõûÊªö‰∫ãÂä°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">"rollback"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after-throwing</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ÈÖçÁΩÆÊúÄÁªàÈÄöÁü•ÔºöÈáäÊîæËøûÊé•--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">"release"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Âü∫‰∫éÊ≥®Ëß£ÁöÑAOPÈÖçÁΩÆ"><a href="#Âü∫‰∫éÊ≥®Ëß£ÁöÑAOPÈÖçÁΩÆ" class="headerlink" title="Âü∫‰∫éÊ≥®Ëß£ÁöÑAOPÈÖçÁΩÆ"></a>Âü∫‰∫éÊ≥®Ëß£ÁöÑAOPÈÖçÁΩÆ</h1><p>xml‰∏≠Ë¶ÅÂºÄÂêØÂØπÊ≥®Ëß£ÁöÑÊîØÊåÅ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountDao accountDao;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span>(<span class="string">"accountDao"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountDaoImpl</span> <span class="keyword">implements</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> QueryRunner runner;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ConnectionUtils connectionUtils;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"connectionUtils"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectionUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"txManager"</span>)</span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TransactionManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ConnectionUtils connectionUtils;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">pt1</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="meta">@Around</span>(<span class="string">"pt1()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">aroundAdvice</span><span class="params">(ProceedingJoinPoint pjp)</span></span>&#123;</span><br><span class="line">        Object rtValue = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.Ëé∑ÂèñÂèÇÊï∞</span></span><br><span class="line">            Object[] args = pjp.getArgs();</span><br><span class="line">            <span class="comment">// 2.ÂºÄÂêØ‰∫ãÂä°</span></span><br><span class="line">            <span class="keyword">this</span>.beginTransaction();</span><br><span class="line">            <span class="comment">// 3.ÊâßË°åÊñπÊ≥ï</span></span><br><span class="line">            rtValue = pjp.proceed(args);</span><br><span class="line">            <span class="comment">// 4.Êèê‰∫§‰∫ãÂä°</span></span><br><span class="line">            <span class="keyword">this</span>.commit();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ËøîÂõûÁªìÊûú</span></span><br><span class="line">            <span class="keyword">return</span>  rtValue;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Throwable e)&#123;</span><br><span class="line">            <span class="comment">// 5.ÂõûÊªö‰∫ãÂä°</span></span><br><span class="line">            <span class="keyword">this</span>.rollback();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6.ÈáäÊîæËµÑÊ∫ê</span></span><br><span class="line">            <span class="keyword">this</span>.release();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Â¶ÇÊûúÂàÜÂà´Âú®ÂºÄÂêØ‰∫ãÂä°„ÄÅÊèê‰∫§‰∫ãÂä°„ÄÅÂõûÊªö‰∫ãÂä°„ÄÅÈáäÊîæËøûÊé•ÁöÑÂáΩÊï∞‰∏äÂàÜÂà´Âä†@Before(‚Äúpt1()‚Äù)„ÄÅ@AfterReturning(‚Äúpt1()‚Äù)„ÄÅ@AfterThrowing(‚Äúpt1()‚Äù)„ÄÅ@After(‚Äúpt1()‚Äù)</p>
<p>ÁêÜËÆ∫‰∏äÊ≤°ÊØõÁóÖ„ÄÇ‰ΩÜÊòØÔºÅSpringÂÆûÈôÖÁöÑÊâßË°åÈ°∫Â∫èÊòØÊúâÈóÆÈ¢òÁöÑÔºàÂêå ËßÅÁ¨îËÆ∞9Ôºâ</p>
<p>ÊúÄÁªàÈÄöÁü•Âú®ÂêéÁΩÆÈÄöÁü•‰πãÂâçÊâßË°å‰∫ÜÔºå‰∫éÊòØÊ†πÊú¨Ê≤°ÊúâÊèê‰∫§Â∞±ÈáäÊîæ‰∫ÜÔºåËøûÊé•Â∑≤ÁªèÂèòÊàê‰∫ÜÊñ∞ÁöÑËøûÊé•</p>
<p>ÊâÄ‰ª•‰∏çË¶ÅÂàÜÂà´Áî®„ÄÇÁî®‰∏Ä‰∏™ÁéØÁªïÈÄöÁü•ÔºåÈáåÈù¢try-catchÔºåËá™Â∑±ÊéßÂà∂È°∫Â∫è</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Â≠¶‰π†SpringÁöÑ‰∏ÄÁÇπÊÑüÊÉ≥</title>
    <url>/2020/03/19/note-spring/</url>
    <content><![CDATA[<p>SpringÂ≠¶Âà∞ËøôÈáåÔºåËÆ∞ÂΩï‰∏ÄÁÇπÁÇπÊÑüÊÉ≥</p>
<hr>
<p>Ëøô‰∏™ÊïôÁ®ã‰∏Ä‰∏™ÁªèÂ∏∏ÁöÑÊìç‰ΩúÂ∞±ÊòØ</p>
<p>ÂôºÈáåÂï™Âï¶ÂôºÈáåÂï™Âï¶ÂÜô‰∫Ü‰∏ÄÂ§ßÂ†ÜÔºåÁÑ∂ÂêéÁÅµÈ≠ÇË¥®ÈóÆÔºö<strong>‰Ω†ÈÉΩËÉΩÂÜôÂá∫Êù•ÁöÑ‰∏úË•øSpring‰ºöÊ≤°ÊúâÂêóÔºü</strong></p>
<p>ü•∂ü•∂ü•∂</p>
<p>fine</p>
<p>‰∏çËøáËøôÁßçËøáÁ®ãËß£Èáä‰∫ÜËøô‰∫õËÆæËÆ°ÁöÑÁî®ÊÑèÔºå‰πüÈöæÊÄ™ËØÑËÆ∫ÂæàÂ§öÈÉΩËØ¥Ëøô‰∏™ÊïôÁ®ãÊòØÁúãËøáÊúÄÂ•ΩÁöÑ</p>
<p>ÁÑ∂ÈπÖÔºåÁî®Spring BootÁöÑÊó∂ÂÄôÁé∞Âú®ÁöÑËøô‰∏ÄÂ†Ü‰πü‰∏çÁî®ÂÜôÂïäÔºÅ</p>
<p>ÊúÄÂàùÊé•Ëß¶java webËøô‰∏ÄÂ§ßË∂¥ÁöÑÊó∂ÂÄôÁâπÂà´Ëø∑ÊÉëÔºåTomcat„ÄÅSpring„ÄÅSpring MVC„ÄÅSpring Boot‚Ä¶‰∏Äüò≥ËÑ∏üò≥Êáµüò≥ÈÄº</p>
<p>ÁúãÂà∞Â§ßÂ§öÁöÑÂª∫ËÆÆÊòØ‰ªéSpringÂºÄÂßãÔºå‰∏çÁÑ∂Spring BootËÉΩÁî®‰ΩÜÊòØ‰∏çÊáÇ‰∏∫‰ªÄ‰πà</p>
<p>‰∫éÊòØÂ≠¶‰∫Ü‰∏Ä‰∫õSpringÔºà‰º∞ËÆ°ÊòØ‰∏Ä‰∏™ÂõõÂ∞èÊó∂ÁâàÊú¨ÔºâÔºåÁî®ÁöÑÊó∂ÂÄô‰∏∫‰∫ÜÊñπ‰æøËøòÊòØÁõ¥Êé•‰∏ä‰∫ÜSpring Boot</p>
<p>Áé∞Âú®ÈáçÊñ∞Â≠¶‰∏ÄÈÅçÔºåÊ≤°‰πãÂâçÈÇ£‰πàüò≥üò≥üò≥‰∫ÜÔºåÊïôÁ®ãÈáåËØ¥Âà∞SpringÂèØ‰ª•ÁÆÄÂåñÊâãÊíï‰ª£Á†ÅÁöÑÊó∂ÂÄôÔºå‰πüÁü•ÈÅìSpring BootËøòËÉΩÂÜçÁÆÄÂåñ‰∏Ä‰∫õ</p>
<p>ÂØπÂÆÉ‰ª¨ÁöÑÁêÜËß£‰πüÊÖ¢ÊÖ¢Ê∏ÖÊô∞‰∫Ü‰∏ÄÁÇπÁÇπÔºåÊÑüËßâÂ∞±ÊòØ‰∏Ä‰∏™‰∏çÊñ≠Â∞ÅË£Ö„ÄÅÁ∫¶ÂÆö&gt;ÈÖçÁΩÆÁöÑÁÆÄÂåñËøáÁ®ãÔºåÂíåËÆ°ÁÆóÊú∫‰∏≠ËÆ∏ËÆ∏Â§öÂ§öÁöÑËøõÂåñËøáÁ®ã‰∏ÄÊ†∑ÔºåÈÉΩÊòØ‰∏ÄÂ±Ç‰∏ÄÂ±ÇÁöÑÊäΩ(tou)Ë±°(lan)</p>
<hr>
<img src="/images/2020/1949370-200.png" width=100>


<p>ËØ¥Ëµ∑Êù•ÔºåÊò•Â§©Âà∞‰∫ÜÂë¢</p>
<p>‰ªäÂ§©ÊπñÂåóÂ∑≤Áªè0Êñ∞Â¢û‰∫ÜÔºåÂ∏åÊúõËÉΩËµ∂Âø´ÂºÄÈó®‚Ä¶</p>
<p>ü¶¢</p>
]]></content>
      <categories>
        <category>Memo</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringÁ¨îËÆ∞11 Spring‰∏≠ÁöÑJdbcTemplate</title>
    <url>/2020/03/19/note-spring-11/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a></p>
<p>p67~71</p>
</blockquote>
<p>ÊåÅ‰πÖÂ±ÇÊÄªÂõæ</p>
<img src="/images/2020/20200319.jpg">

<p>Spring‰∏≠ÁöÑJdbcTemplate</p>
<p>‰ΩúÁî®ÔºöÂíåÊï∞ÊçÆÂ∫ì‰∫§‰∫íÔºåÂÆûÁé∞ÂØπË°®ÁöÑCRUDÊìç‰Ωú</p>
<h1 id="JdbcTemplate‰∏éDbUtils"><a href="#JdbcTemplate‰∏éDbUtils" class="headerlink" title="JdbcTemplate‰∏éDbUtils"></a>JdbcTemplate‰∏éDbUtils</h1><p>DbUtilsÊòØApacheÊèê‰æõÁöÑ‰∏Ä‰∏™ÂØπJDBCËøõË°åÁÆÄÂçïÂ∞ÅË£ÖÁöÑÂºÄÊ∫êÂ∑•ÂÖ∑Á±ªÂ∫ìÔºå‰∏ªË¶ÅÊúâ</p>
<ul>
<li>org.apache.commons.dbutils.QueryRunner ‚Äî Ê†∏ÂøÉÁ±ªÔºåÊâßË°åSQLÊü•ËØ¢‰ª•Â§ÑÁêÜÁªìÊûúÈõÜÔºàÁ∫øÁ®ãÂÆâÂÖ®Ôºâ</li>
<li>org.apache.commons.dbutils.ResultSetHandler ‚Äî ÁªìÊûúÈõÜÂ∞ÅË£ÖÂô®</li>
<li>org.apache.commons.dbutils.DbUtils ‚Äî Êèê‰æõÂ¶ÇÂä†ËΩΩÈ©±Âä®„ÄÅÂÖ≥Èó≠ËøûÊé•„ÄÅ‰∫ãÂä°Êèê‰∫§„ÄÅÂõûÊªöÁ≠âÂ∏∏ËßÑÂ∑•‰ΩúÁöÑÂ∑•ÂÖ∑Á±ª</li>
</ul>
<p>JdbcTemplateÊòØSpringÊèê‰æõÁöÑ‰∏Ä‰∏™ÂØπË±°ÔºåÊòØÂØπÂéüÂßãJdbc APIÂØπË±°ÁöÑÁÆÄÂçïÂ∞ÅË£ÖÔºåÂü∫Êú¨ÊñπÊ≥ïÔºö</p>
<ul>
<li>executeÊñπÊ≥ï</li>
<li>update‰∏ébatchUpdateÊñπÊ≥ï</li>
<li>query‰∏équeryXXXÊñπÊ≥ï</li>
<li>callÊñπÊ≥ï</li>
</ul>
<p>DbUtilsÂØºÁöÑ‰æùËµñÔºö</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--        dbutils--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        mysqlÈ©±Âä®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        jdbcËøûÊé•Ê±†--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>JdbcTemplateÂØºÁöÑ‰æùËµñÔºö</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--        JdbcTemplate--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        Âíå‰∫ãÂä°Áõ∏ÂÖ≥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        mysqlÈ©±Âä®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Ë°®ÁöÑÂÆû‰ΩìÁ±ª"><a href="#Ë°®ÁöÑÂÆû‰ΩìÁ±ª" class="headerlink" title="Ë°®ÁöÑÂÆû‰ΩìÁ±ª"></a>Ë°®ÁöÑÂÆû‰ΩìÁ±ª</h1><p>ÂÆûÁé∞SerializableÊé•Âè£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ë¥¶Êà∑ÁöÑÂÆû‰ΩìÁ±ª</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Float money;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get set toString</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="JdbcTemplateÁöÑÊúÄÂü∫Êú¨Áî®Ê≥ï"><a href="#JdbcTemplateÁöÑÊúÄÂü∫Êú¨Áî®Ê≥ï" class="headerlink" title="JdbcTemplateÁöÑÊúÄÂü∫Êú¨Áî®Ê≥ï"></a>JdbcTemplateÁöÑÊúÄÂü∫Êú¨Áî®Ê≥ï</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcTemplateDemo1</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ÂáÜÂ§áÊï∞ÊçÆÊ∫êÔºöspringÁöÑÂÜÖÁΩÆÊï∞ÊçÆÊ∫ê</span></span><br><span class="line">        DriverManagerDataSource ds = <span class="keyword">new</span> DriverManagerDataSource();</span><br><span class="line">        ds.setDriverClassName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">        ds.setUrl(<span class="string">"jdbc:mysql://localhost:3306/groot?characterEncoding=utf8"</span>);</span><br><span class="line">        ds.setUsername(<span class="string">"root"</span>);</span><br><span class="line">        ds.setPassword(<span class="string">"iamgroot"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.ÂàõÂª∫JdbcTemplateÂØπË±°</span></span><br><span class="line">        JdbcTemplate jt = <span class="keyword">new</span> JdbcTemplate();</span><br><span class="line">        <span class="comment">// ÁªôjtËÆæÁΩÆÊï∞ÊçÆÊ∫ê</span></span><br><span class="line">        jt.setDataSource(ds);</span><br><span class="line">        <span class="comment">// 2.ÊâßË°åÊìç‰Ωú</span></span><br><span class="line">        jt.execute(<span class="string">"insert into account(name,money) values('ccc',1000)"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÔºåÊ≤°ÊúâÈóÆÈ¢ò</p>
<img src="/images/2020/screencapture2020-03-19PM3.57.43.jpg" width=200>

<p>‰ΩÜÊòØËøôÊ†∑ÂÜôÊï∞ÊçÆÂ∫ìÁöÑÈÖçÁΩÆÈÉΩÂÜôÊ≠ª‰∫ÜÔºåËÄå‰∏îÁî®‰∫ÜÂæàÂ§öset„ÄÅnew</p>
<p>ÈÉΩÂèØ‰ª•ÈÄöËøáIoCÈÖçÁΩÆ</p>
<h2 id="IoCÈÖçÁΩÆ"><a href="#IoCÈÖçÁΩÆ" class="headerlink" title="IoCÈÖçÁΩÆ"></a>IoCÈÖçÁΩÆ</h2><p>ËøôÈáådataSourceÊöÇÊó∂ÂÖàÁî®SpringÂÜÖÁΩÆÁöÑÔºàid=‚ÄùdataSource‚ÄùÔºâ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcTemplateDemo2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.Ëé∑ÂèñÂÆπÂô®</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.Ëé∑ÂèñÂØπË±°</span></span><br><span class="line">        JdbcTemplate jt = ac.getBean(<span class="string">"jdbcTemplate"</span>,JdbcTemplate<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.ÊâßË°åÊìç‰Ωú</span></span><br><span class="line">        jt.execute(<span class="string">"insert into account(name,money)values('ddd',2222)"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>‰πüÊ≤°ÈóÆÈ¢ò</p>
<img src="/images/2020/screencapture2020-03-19PM4.04.17.jpg" width=200>

<h1 id="‰ΩøÁî®JdbcTemplateÂÆûÁé∞Âü∫Êú¨ÁöÑCRUD"><a href="#‰ΩøÁî®JdbcTemplateÂÆûÁé∞Âü∫Êú¨ÁöÑCRUD" class="headerlink" title="‰ΩøÁî®JdbcTemplateÂÆûÁé∞Âü∫Êú¨ÁöÑCRUD"></a>‰ΩøÁî®JdbcTemplateÂÆûÁé∞Âü∫Êú¨ÁöÑCRUD</h1><p>Â¢ûÂà†ÊîπÈÉΩÊòØupdateÊñπÊ≥ï</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ‰øùÂ≠ò</span></span><br><span class="line">jt.update(<span class="string">"insert into account(name,money)values(?,?)"</span>,<span class="string">"eee"</span>,<span class="number">3333f</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Êõ¥Êñ∞</span></span><br><span class="line">jt.update(<span class="string">"update account set name=?,money=? where id=?"</span>,<span class="string">"test"</span>,<span class="number">4567</span>,<span class="number">7</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Âà†Èô§</span></span><br><span class="line">jt.update(<span class="string">"delete from account where id=?"</span>,<span class="number">8</span>);</span><br></pre></td></tr></table></figure>

<p>Êü•ËØ¢ÊòØquery</p>
<p>queryÊúâÂæàÂ§öÂæàÂ§öÂæàÂ§öÈáçËΩΩÁöÑÊñπÊ≥ïÔºåÊâæÁöÑÊó∂ÂÄôÂÖ≥Ê≥®‰∏§‰∏™ÁÇπÔºöÊàë‰ª¨Êúâ‰ªÄ‰πàÔºàÂèÇÊï∞Ôºâ„ÄÅÊàë‰ª¨Ë¶Å‰ªÄ‰πàÔºàËøîÂõûÂÄºÔºâ</p>
<p>ÊØîÂ¶ÇÊúâsqlËØ≠Âè•„ÄÅÂèÇÊï∞ÔºåË¶ÅËøîÂõû‰∏Ä‰∏™ListÔºåÁ≠õÈÄâÂá∫Êù•Âü∫Êú¨Â∞±Ââ©2‰∏™‰∫ÜÔºåÂÆÉ‰ª¨‰∏Ä‰∏™Ë¶Å‰º†Object[] argsÔºå‰∏Ä‰∏™ÊòØObject‚Ä¶ argsÔºåÊòØÈíàÂØπ‰∏çÂêåÁâàÊú¨ÁöÑÔºàÂâçËÄÖÊâÄÊúâÁâàÊú¨ÂèØÁî®ÔºåÂêéËÄÖjdk5‰πãÂêéÊîØÊåÅÂèØÂèòÂèÇÊï∞ÂèØÁî®Ôºâ</p>
<p>Á¨¨‰∏Ä‰∏™ÊñπÊ≥ïÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Êü•ËØ¢ÊâÄÊúâ</span></span><br><span class="line">List&lt;Account&gt; accounts = jt.query(<span class="string">"select * from account where money &gt; ?"</span>,<span class="keyword">new</span> AccountRowMapper(),<span class="number">1000f</span>);</span><br></pre></td></tr></table></figure>

<p>ÈúÄË¶ÅÂÜô‰∏Ä‰∏™AccountRowMapperÁ±ª</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ÂÆö‰πâAccountÁöÑÂ∞ÅË£ÖÁ≠ñÁï•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AccountRowMapper</span> <span class="keyword">implements</span> <span class="title">RowMapper</span>&lt;<span class="title">Account</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ÊääÁªìÊûúÈõÜ‰∏≠ÁöÑÊï∞ÊçÆÂ∞ÅË£ÖÂà∞Account‰∏≠ÔºåÁÑ∂ÂêéÁî±springÊääÊØè‰∏™AccountÂä†Âà∞ÈõÜÂêà‰∏≠</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> rowNum</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">mapRow</span><span class="params">(ResultSet rs, <span class="keyword">int</span> rowNum)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setId(rs.getInt(<span class="string">"id"</span>));</span><br><span class="line">        account.setName(rs.getString(<span class="string">"name"</span>));</span><br><span class="line">        account.setMoney(rs.getFloat(<span class="string">"money"</span>));</span><br><span class="line">        <span class="keyword">return</span> account;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ê≠§Êó∂ÈóÆÈ¢òÊù•‰∫ÜÔºåÂØπÊØîdbutils‰∏≠ÁöÑQueryRunner</p>
<img src="/images/2020/2020031902.png">

<p>‰∏çÂêåÁöÑÂè™ÊúâResultSetHandlerÂíåAccountRowMapperÔºå‰ªéÂ∞ÅË£ÖÁöÑËßíÂ∫¶‰ΩúÁî®ÊòØ‰∏ÄÊ†∑ÁöÑ</p>
<p>‰ª•ÂâçÊòØÁî®ÁöÑdbutilsÊèê‰æõÁöÑbeanListHandlerÂÆûÁé∞ÁöÑ</p>
<p>ÈöæÈÅìÊú∫Êô∫ÁöÑSpringÊ≤°ÊúâËøô‰∏™ÂÆûÁé∞ÂêóËøòË¶ÅËá™Â∑±ÂÜôÔºü</p>
<p>ÊòæÁÑ∂ÂøÖÈ°ªÊúâ -&gt; BeanPropertyRowMapper</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Êü•ËØ¢ÊâÄÊúâ</span></span><br><span class="line"><span class="comment">// List&lt;Account&gt; accounts = jt.query("select * from account where money &gt; ?",new AccountRowMapper(),1000f);</span></span><br><span class="line">List&lt;Account&gt; accounts = jt.query(<span class="string">"select * from account where money &gt; ?"</span>,<span class="keyword">new</span> BeanPropertyRowMapper&lt;Account&gt;(Account<span class="class">.<span class="keyword">class</span>),1000<span class="title">f</span>)</span>;</span><br><span class="line"><span class="keyword">for</span>(Account account : accounts)&#123;</span><br><span class="line">  System.out.println(account);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËÉΩÊü•ÊâÄÊúâ‰∫ÜÔºåÊü•‰∏Ä‰∏™‰πüÂ∑Æ‰∏çÂ§öÔºàÂÆûÈôÖ‰ΩøÁî®BeanPropertyRowMapperÊØîËæÉÂ§öÔºâ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Êü•ËØ¢‰∏Ä‰∏™</span></span><br><span class="line">List&lt;Account&gt; accounts = jt.query(<span class="string">"select * from account where id = ?"</span>,<span class="keyword">new</span> BeanPropertyRowMapper&lt;Account&gt;(Account<span class="class">.<span class="keyword">class</span>),3)</span>;</span><br><span class="line">System.out.println(accounts.isEmpty()? <span class="string">"Ê≤°ÊúâÂÜÖÂÆπ"</span> :accounts.get(<span class="number">0</span>));</span><br></pre></td></tr></table></figure>

<p>ËøòÊúâËÅöÂêà</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Êü•ËØ¢ËøîÂõû‰∏ÄË°å‰∏ÄÂàóÔºà‰ΩøÁî®ËÅöÂêàÂáΩÊï∞Ôºå‰ΩÜ‰∏çÂä†group byÂ≠êÂè•Ôºâ</span></span><br><span class="line">Long count = jt.queryForObject(<span class="string">"select count(*) from account where money &gt; ?"</span>,Long<span class="class">.<span class="keyword">class</span>,1000<span class="title">f</span>)</span>;</span><br><span class="line">System.out.println(count);</span><br></pre></td></tr></table></figure>

<p>Á¨¨‰∫å‰∏™ÂèÇÊï∞Áî®Êù•ÊåáÂÆöËøîÂõûÁ±ªÂûãÔºàÂâçÊèêÊòØËÉΩËΩ¨Ôºå‰∏∫Èò≤Ê∫¢Âá∫‰∏ÄËà¨Áî®LongÊé•Êî∂Ôºâ</p>
<h1 id="JdbcTemplateÂú®Dao‰∏≠ÁöÑ‰ΩøÁî®"><a href="#JdbcTemplateÂú®Dao‰∏≠ÁöÑ‰ΩøÁî®" class="headerlink" title="JdbcTemplateÂú®Dao‰∏≠ÁöÑ‰ΩøÁî®"></a>JdbcTemplateÂú®Dao‰∏≠ÁöÑ‰ΩøÁî®</h1><p>ÂÜô‰∏Ä‰∏™IAccountDaoÊé•Âè£ÔºåÂÆûÁé∞Á±ª‰∏≠Áî®‰∏äÈù¢ÁöÑÊñπÊ≥ïÂÆåÊàêÂäüËÉΩÂç≥ÂèØ</p>
<h2 id="JdbcDaoSupportÁöÑ‰ΩøÁî®"><a href="#JdbcDaoSupportÁöÑ‰ΩøÁî®" class="headerlink" title="JdbcDaoSupportÁöÑ‰ΩøÁî®"></a>JdbcDaoSupportÁöÑ‰ΩøÁî®</h2><p>Êúâ‰∏Ä‰∏™ÈóÆÈ¢òÊòØÔºåÂ¶ÇÊûúÂÆûÈôÖÂºÄÂèë‰∏≠ÊúâÂ§ö‰∏™DaoÔºåÊØè‰∏™ÂÆûÁé∞Á±ª‰∏≠ÈÉΩË¶ÅËé∑ÂèñJdbcTemplate</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setJdbcTemplate</span><span class="params">(JdbcTemplate jdbcTemplate)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.jdbcTemplate = jdbcTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËøôÊÆµ‰ª£Á†Å‰ºöÈáçÂ§çÂæàÂ§öÊ¨°</p>
<p>ÂèØ‰ª•ÂÜô‰∏Ä‰∏™JdbcDaoSupportÁ±ªÁî®‰∫éÊäΩÂèñËøôÊÆµÈáçÂ§ç‰ª£Á†Å</p>
<p>ÂÖ∂ÂÆÉDaoImpÁªßÊâøËøô‰∏™Á±ªÔºågetÂÖ∂‰∏≠ÁöÑjdbcTemplateÔºådataSource‰πüÂú®ÂÖ∂‰∏≠ËÆæÁΩÆÂ•Ω</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ê≠§Á±ªÁî®‰∫éÊäΩÂèñdao‰∏≠ÁöÑÈáçÂ§ç‰ª£Á†Å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcDaoSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setJdbcTemplate</span><span class="params">(JdbcTemplate jdbcTemplate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.jdbcTemplate = jdbcTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JdbcTemplate <span class="title">getJdbcTemplate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDataSource</span><span class="params">(DataSource dataSource)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(jdbcTemplate == <span class="keyword">null</span>)&#123;</span><br><span class="line">            jdbcTemplate = createJdbcTemplate(dataSource);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> JdbcTemplate <span class="title">createJdbcTemplate</span><span class="params">(DataSource dataSource)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JdbcTemplate(dataSource);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊòæÁÑ∂ÔºåsetDataSourceÁöÑÊó∂ÂÄôJdbcTemplate‰πüÊúâ‰∫Ü</p>
<p>‰∫éÊòØÈÖçÁΩÆÁöÑÊó∂ÂÄôÂ∞±‰∏çÁî®ÈÖçJdbcTemplate‰∫Ü</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆË¥¶Êà∑ÁöÑÊåÅ‰πÖÂ±Ç--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountDao"</span> <span class="attr">class</span>=<span class="string">"com.itheima.dao.impl.AccountDaoImpl"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--        &lt;property name="jdbcTemplate" ref="jdbcTemplate"&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--ÈÖçÁΩÆJdbcTemplate--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate"&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/bean&gt;--&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÈÇ£‰πàÈóÆÈ¢òÂèàÊù•‰∫Ü</p>
<p>Ëá™Â∑±ÈÉΩËÉΩÂÜôÂá∫Êù•ÁöÑ‰∏úË•øSpringÊòæÁÑ∂ÂøÖÈ°ªÊúâ</p>
<p>ÊääËøô‰∏™Ëá™Â∑±ÂÜôÁöÑJdbcDaoSupportÊ≥®ÈáäÊéâÔºåËøòËÉΩË∑ëÔºå‰∏∫Âï•Âë¢</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.support.JdbcDaoSupport;</span><br></pre></td></tr></table></figure>

<p>Ëá™Âä®ÂØºÂÖ•‰∫ÜSpringÁöÑJdbcDaoSupport</p>
<p>ÊâìÂºÄËøô‰∏™Á±ªÁúã‰∏Ä‰∏ãÔºåÂ∞±ÊúâJdbcTemplateÔºåÊúâsetDataSourceÊñπÊ≥ïÔºåÊúâ‰∏äÈù¢‰∏ÄÂ†Ü</p>
<p>ÊâÄ‰ª•‰∏çÈúÄË¶ÅËá™Â∑±ÂÜôÔºåÁªßÊâøÂ∞±ÂÆå‰∫ã</p>
<p>ÁªßÊâøÂÆÉÁöÑÁõÆÁöÑÂ∞±ÊòØÂú®ÊúâÂ§ö‰∏™DaoÊó∂ÂéªÈô§ÈáçÂ§ç‰ª£Á†Å</p>
<p>‰ΩÜÊòØÁî±‰∫éÊ∫êÁ†Å‰∏çËÉΩÂä®ÔºåÂ∞±‰∏çÂ•ΩÈÄöËøáÊ≥®Ëß£ÈÖçÁΩÆ‰∫ÜÔºåËá™Â∑±ÂÜôÂíåÁõ¥Êé•ÁªßÊâøÁöÑÂå∫Âà´Â∞±Âú®‰∫éËøôÈáåÔºåÈúÄË¶ÅÊùÉË°°</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>ËÆ∞ÂΩïÂá†‰∏™ËÆ©ÊàëÂøÉÂä®ÁöÑËÆæËÆ°</title>
    <url>/2020/03/18/aha/</url>
    <content><![CDATA[<h1 id="TrelloÁöÑÂàóË°®ÂÆåÊàêÊúÄÂêé‰∏Ä‰∏™Êó∂‰ºöÊâ≠Âä®ÔΩûËøòÊúâ‰∏çÂêåÁöÑÊëáÊëÜÊñπÂºèÔºÅ"><a href="#TrelloÁöÑÂàóË°®ÂÆåÊàêÊúÄÂêé‰∏Ä‰∏™Êó∂‰ºöÊâ≠Âä®ÔΩûËøòÊúâ‰∏çÂêåÁöÑÊëáÊëÜÊñπÂºèÔºÅ" class="headerlink" title="TrelloÁöÑÂàóË°®ÂÆåÊàêÊúÄÂêé‰∏Ä‰∏™Êó∂‰ºöÊâ≠Âä®ÔΩûËøòÊúâ‰∏çÂêåÁöÑÊëáÊëÜÊñπÂºèÔºÅ"></a>TrelloÁöÑÂàóË°®ÂÆåÊàêÊúÄÂêé‰∏Ä‰∏™Êó∂‰ºöÊâ≠Âä®ÔΩûËøòÊúâ‰∏çÂêåÁöÑÊëáÊëÜÊñπÂºèÔºÅ</h1><img src="/images/2020/Mar-18-2020 22-56-56.gif" width=400>
<img src="/images/2020/Mar-18-2020 22-56-19.gif" width=400>
<img src="/images/2020/Mar-18-2020 22-57-26.gif" width=400>
ÂïäTrelloÊàëÁöÑ‚ù§Ô∏èÔºÅ

<h1 id="‰ºÅÈπÖÂ≤õÈáåÁöÑ‰ºÅÈπÖ‰ºöÊääËä±Áî∞ÈáåÁöÑËä±ÂèºÂá∫Êù•ÁßçÔΩû"><a href="#‰ºÅÈπÖÂ≤õÈáåÁöÑ‰ºÅÈπÖ‰ºöÊääËä±Áî∞ÈáåÁöÑËä±ÂèºÂá∫Êù•ÁßçÔΩû" class="headerlink" title="‰ºÅÈπÖÂ≤õÈáåÁöÑ‰ºÅÈπÖ‰ºöÊääËä±Áî∞ÈáåÁöÑËä±ÂèºÂá∫Êù•ÁßçÔΩû"></a>‰ºÅÈπÖÂ≤õÈáåÁöÑ‰ºÅÈπÖ‰ºöÊääËä±Áî∞ÈáåÁöÑËä±ÂèºÂá∫Êù•ÁßçÔΩû</h1><img src="/images/2020/20200318_233535.gif" width=300>
Â§©ÂëêÊàëÈúÄË¶Å‰∏Ä‰∏™È´òÊ∏ÖÁöÑÂΩïÂ±èapp -MARK-]]></content>
      <categories>
        <category>Memo</category>
      </categories>
  </entry>
  <entry>
    <title>VueÁ¨îËÆ∞07 ÊÄªÁªì</title>
    <url>/2020/03/17/note-vue-07/</url>
    <content><![CDATA[<p>Ëøô‰∏™ÊïôÁ®ã6pÂ≠¶ÂÆå‰∫ÜÔΩûÊÄªÁªì‰∏Ä‰∏ãËøô‰∏™Âõæ‰π¶Â¢ûÂà†ÊîπÊü•ÁöÑdemo</p>
<blockquote>
<p><a href="https://www.bilibili.com/video/av85793766" target="_blank" rel="noopener">https://www.bilibili.com/video/av85793766</a></p>
</blockquote>
<hr>
<p><a href="/2020/03/06/note-vue-02/">Â∑•Á®ãÂàõÂª∫</a>Áï•<br>Êï∞ÊçÆÂ∫ìÈÉ®ÂàÜÁï•</p>
<h1 id="ÂêéÁ´Ø"><a href="#ÂêéÁ´Ø" class="headerlink" title="ÂêéÁ´Ø"></a>ÂêéÁ´Ø</h1><h2 id="È°πÁõÆÁªìÊûÑ"><a href="#È°πÁõÆÁªìÊûÑ" class="headerlink" title="È°πÁõÆÁªìÊûÑ"></a>È°πÁõÆÁªìÊûÑ</h2><img src="/images/2020/screencapture2020-03-17PM5.44.27.jpg" width=400>

<ul>
<li>Book ÂÆû‰ΩìÁ±ª</li>
<li>BookRepository ÁªßÊâøJpaRepositoryÔºåÊèê‰æõÊï∞ÊçÆÂ∫ìÂ¢ûÂà†ÊîπÊü•Êé•Âè£</li>
<li>BookHandler Áõ∏Â∫îËØ∑Ê±Ç</li>
<li>BookRepositoryTest ÊµãËØïBookRepositoryÁöÑÊñπÊ≥ï</li>
</ul>
<h2 id="Book"><a href="#Book" class="headerlink" title="Book"></a>Book</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coconutnut.bookstore_server.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GenerationType;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span> <span class="comment">// Ê†πÊçÆÁ±ªÂêçÂíåË°®ÂêçÂØπÂ∫îÁªëÂÆö</span></span><br><span class="line"><span class="meta">@Data</span>   <span class="comment">// Ëá™Âä®ÁîüÊàêget/set</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span> <span class="comment">// ‰∏ªÈîÆ</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY) <span class="comment">// idËá™Â¢û</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="BookRepository"><a href="#BookRepository" class="headerlink" title="BookRepository"></a>BookRepository</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coconutnut.bookstore_server.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.coconutnut.bookstore_server.entity.Book;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &lt;&gt;‰∏≠Á¨¨‰∏Ä‰∏™ÊòØÂÆû‰ΩìÁ±ªÔºåÁ¨¨‰∫å‰∏™ÊòØ‰∏ªÈîÆÁ±ªÂûã</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BookRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Book</span>,<span class="title">Integer</span>&gt; </span>&#123; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>JpaRepository‰∏≠ÊúâÂ∏∏Áî®ÁöÑÂ¢ûÂà†ÊîπÊü•ÊñπÊ≥ïÔºåÂèØ‰ª•Áõ¥Êé•Ë∞ÉÁî®</p>
<p>&amp; ÈÄöÂ∏∏ÊµÅÁ®ãÔºöÂÖàÂú®Test‰∏≠ÊµãËØïÊñπÊ≥ïÔºåÊ≤°ÈóÆÈ¢òÂú®Controller‰∏≠ÂÜôÂØπÂ§ñÊé•Âè£ÔºåÊµèËßàÂô®Áúã‰∏Ä‰∏ãËøîÂõûÂÄºÂØπ‰∏çÂØπÔºåÊúÄÂêéÂÜôÂâçÁ´Ø</p>
<p>SpringÂ∑•Á®ãËá™Â∏¶‰∏Ä‰∏™ÊµãËØïÁ±ªBookstoreServerApplicationTests<br>Ëá™Â∑±ÂàõÂª∫ÂèØÂú®Êé•Âè£Âêç‰∏äÂè≥ÈîÆ-&gt;Go To-&gt;Test-&gt;Create New Test<br>ÁîüÊàêÁöÑÊµãËØïÁ±ªÂä†@SpringBootTestÔºåË¶ÅÊµãËØïÁöÑÁ±ª@AutowiredËá™Âä®Ê≥®ÂÖ•ÔºåÂÜôÁöÑÊñπÊ≥ïÂä†@TestÂç≥ÂèØ</p>
<h2 id="BookHandler"><a href="#BookHandler" class="headerlink" title="BookHandler"></a>BookHandler</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coconutnut.bookstore_server.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.coconutnut.bookstore_server.entity.Book;</span><br><span class="line"><span class="keyword">import</span> com.coconutnut.bookstore_server.repository.BookRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.PageRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/book"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookRepository bookRepository;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Êü•ÊâÄÊúâ‰π¶</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Book&gt; <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bookRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Êü•‰∏ÄÈ°µ</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findAll/&#123;page&#125;/&#123;size&#125;"</span>)</span><br><span class="line">    <span class="comment">// @PathVariableËé∑ÂèñÂèÇÊï∞</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Page&lt;Book&gt; <span class="title">findAll</span><span class="params">(@PathVariable(<span class="string">"page"</span>)</span> Integer page,@<span class="title">PathVariable</span><span class="params">(<span class="string">"size"</span>)</span> Integer size)</span>&#123;</span><br><span class="line">        PageRequest pageRequest = PageRequest.of(page,size);</span><br><span class="line">        <span class="keyword">return</span> bookRepository.findAll(pageRequest);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Êñ∞Â¢û</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/save"</span>)</span><br><span class="line">    <span class="comment">// @RequestBodyÊääjsonÊ†ºÂºèËΩ¨ÊàêjavaÂØπË±°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">(@RequestBody Book book)</span></span>&#123;</span><br><span class="line">        Book result = bookRepository.save(book);</span><br><span class="line">        <span class="keyword">if</span>(result != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Êü•‰∏Ä‰∏™</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findById/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Book <span class="title">findById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bookRepository.findById(id).get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ‰øÆÊîπ</span></span><br><span class="line">    <span class="meta">@PutMapping</span>(<span class="string">"/update"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">update</span><span class="params">(@RequestBody Book book)</span></span>&#123;</span><br><span class="line">        Book result = bookRepository.save(book);</span><br><span class="line">        <span class="keyword">if</span>(result != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Âà†Èô§</span></span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"/deleteById/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id)</span>&#123;</span><br><span class="line">        bookRepository.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ÂâçÁ´Ø"><a href="#ÂâçÁ´Ø" class="headerlink" title="ÂâçÁ´Ø"></a>ÂâçÁ´Ø</h1><h2 id="È°πÁõÆÁªìÊûÑ-1"><a href="#È°πÁõÆÁªìÊûÑ-1" class="headerlink" title="È°πÁõÆÁªìÊûÑ"></a>È°πÁõÆÁªìÊûÑ</h2><img src="/images/2020/screencapture2020-03-17PM5.46.22.jpg"  width=400>

<ul>
<li>Index.js ÈÖçË∑ØÁî±</li>
<li>App.vue Â∏∏È©ªÁöÑÈ°µÈù¢</li>
<li>ÂÖ∂ÂÆÉvue ÂµåÂÖ•ÁöÑÈ°µÈù¢</li>
</ul>
<h2 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h2><p>ÈÖçÁΩÆÈ°µÈù¢ÁöÑ‰ªéÂ±ûÂÖ≥Á≥ª‰∏éË∑ØÂæÑ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> Index <span class="keyword">from</span> <span class="string">"../views/Index"</span>;</span><br><span class="line"><span class="keyword">import</span> BookManage <span class="keyword">from</span> <span class="string">'../views/BookManage'</span></span><br><span class="line"><span class="keyword">import</span> AddBook <span class="keyword">from</span> <span class="string">'../views/AddBook'</span></span><br><span class="line"><span class="keyword">import</span> BookUpdate <span class="keyword">from</span> <span class="string">'../views/BookUpdate'</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    name: <span class="string">'Âõæ‰π¶ÁÆ°ÁêÜ'</span>,</span><br><span class="line">    show: <span class="literal">true</span>,</span><br><span class="line">    component:Index,</span><br><span class="line">    redirect:<span class="string">'book-manage'</span>,</span><br><span class="line">    children:[</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/book-manage'</span>,</span><br><span class="line">        name: <span class="string">'Êü•ËØ¢Âõæ‰π¶'</span>,</span><br><span class="line">        component: BookManage</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/add-book'</span>,</span><br><span class="line">        name: <span class="string">'Ê∑ªÂä†Âõæ‰π¶'</span>,</span><br><span class="line">        component: AddBook</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/book-update'</span>,</span><br><span class="line">    name: <span class="string">'‰øÆÊîπ'</span>,</span><br><span class="line">    show: <span class="literal">false</span>,</span><br><span class="line">    component: BookUpdate</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">'history'</span>,</span><br><span class="line">  base: process.env.BASE_URL,</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<h2 id="È°µÈù¢ÂµåÂ•ó‰∏éË∑≥ËΩ¨"><a href="#È°µÈù¢ÂµåÂ•ó‰∏éË∑≥ËΩ¨" class="headerlink" title="È°µÈù¢ÂµåÂ•ó‰∏éË∑≥ËΩ¨"></a>È°µÈù¢ÂµåÂ•ó‰∏éË∑≥ËΩ¨</h2><p>App.vue‰∏≠templateÁªìÊûÑ</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-container</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-aside</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-menu</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-main</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+------------------------------------+ </span><br><span class="line">| App                                |  </span><br><span class="line">| +------+-------------------------+ | </span><br><span class="line">| | menu | main                    | |  </span><br><span class="line">| |      | +---------------------+ | |  </span><br><span class="line">| |      | | router-view         | | | </span><br><span class="line">| |      | +---------------------+ | |  </span><br><span class="line">| +------+-------------------------+ | </span><br><span class="line">+------------------------------------+</span><br></pre></td></tr></table></figure>

<p>Â∑¶‰æßasideÂå∫Âüü‰∏≠ÊîæmenuÔºåÂè≥‰æßmain‰∏≠Áî±routerÂä®ÊÄÅÂä†ËΩΩ</p>
<p>Index.vue‰∏≠templateÁªìÊûÑ</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Index.vue‰∏≠ÂÖ∂ÂÆÉÈÉΩÊòØÈªòËÆ§ÁöÑ</p>
<p>Ê†πÊçÆindex.js‰∏≠ÁöÑÈÖçÁΩÆÔºå‚Äô/‚ÄòÂ∞±Âä†ËΩΩIndex.vueÂà∞App.vueÁöÑrouter-viewÂå∫ÂüüÔºåÂÜç‚Äô/book-manage‚ÄôÂä†ËΩΩIndex.vueÁöÑrouter-viewÂå∫Âüü„ÄÇËÄåIndexÈáçÂÆöÂêëÂà∞book-manageÔºå‰∫éÊòØ‚Äôhttp:localhost:4000/‚ÄòÈªòËÆ§Â∞±ÊòæÁ§∫‰∫Übook-manage</p>
<p>ËÄå‚Äô/book-update‚ÄôÂä†ËΩΩUpdate.vueÂà∞App.vueÁöÑrouter-viewÂå∫Âüü</p>
<p>ÊïÖÊòæÁ§∫ÊâÄÊúâÂ≠êÈ°µÈù¢ÁöÑÊó∂ÂÄôÈÉΩÂèØ‰ª•ÁúãÂà∞ËèúÂçï</p>
<h2 id="Ê†πÊçÆroutesÈÖçÁΩÆÂä®ÊÄÅÂä†ËΩΩËèúÂçïÊ†è-gt-App-vue"><a href="#Ê†πÊçÆroutesÈÖçÁΩÆÂä®ÊÄÅÂä†ËΩΩËèúÂçïÊ†è-gt-App-vue" class="headerlink" title="Ê†πÊçÆroutesÈÖçÁΩÆÂä®ÊÄÅÂä†ËΩΩËèúÂçïÊ†è -&gt; App.vue"></a>Ê†πÊçÆroutesÈÖçÁΩÆÂä®ÊÄÅÂä†ËΩΩËèúÂçïÊ†è -&gt; App.vue</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-container</span> <span class="attr">style</span>=<span class="string">"height: 500px; border: 1px solid #eee"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">width</span>=<span class="string">"200px"</span> <span class="attr">style</span>=<span class="string">"background-color: rgb(238, 241, 246)"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--            ËøôÈáåÊ∑ªÂä†routerÊ†áÁ≠æÔºåel-menu-itemÁöÑindexÂ∞±‰ºöË¢´‰Ωú‰∏∫routerË∑ØÂæÑ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-menu</span> <span class="attr">router</span> <span class="attr">:default-openeds</span>=<span class="string">"['0','1']"</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--          showÂ±ûÊÄß‰∏∫trueÂàôÈÅçÂéÜ--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in $router.options.routes"</span> <span class="attr">:index</span>=<span class="string">"index+''"</span> <span class="attr">v-if</span>=<span class="string">"item.show"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-setting"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--                    Êù°‰ª∂Âà§Êñ≠ÂΩìÂâçË∑ØÂæÑÊòØÂê¶Á≠â‰∫éindexÔºåÊõ¥ÊîπÈÄâ‰∏≠Áä∂ÊÄÅÔºå‰∏ªË¶ÅÊòØÂú®ÂàùÂßãÂåñÊó∂Â¢ûÂä†ÈªòËÆ§ÁöÑÈÄâ‰∏≠Áä∂ÊÄÅ--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">v-for</span>=<span class="string">"item2 in item.children"</span> <span class="attr">:index</span>=<span class="string">"item2.path"</span> <span class="attr">:class</span>=<span class="string">"$route.path==item2.path ? 'is-active' : ''"</span>&gt;</span>&#123;&#123;item2.name&#125;&#125;<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-main</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--            ‰∏äÈù¢ÂèàindexÁ°ÆÂÆöÁöÑrouterË¢´ÊòæÁ§∫Âú®ËøôÈáåÔºå‰πüÂ∞±ÊòØmainÂå∫Âüü‰∏≠--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'app'</span>,</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-id">#app</span> &#123;</span></span><br><span class="line">  font-family: 'Avenir', Helvetica, Arial, sans-serif;</span><br><span class="line">  -webkit-font-smoothing: antialiased;</span><br><span class="line">  -moz-osx-font-smoothing: grayscale;</span><br><span class="line">  text-align: center;</span><br><span class="line"><span class="css">  <span class="selector-tag">color</span>: <span class="selector-id">#2c3e50</span>;</span></span><br><span class="line">  margin-top: 60px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Ë°®ÂçïÊòæÁ§∫ÊâÄÊúâ‰π¶Á±ç„ÄÅÁøªÈ°µ„ÄÅÂà†Èô§-gt-BookManage-vue"><a href="#Ë°®ÂçïÊòæÁ§∫ÊâÄÊúâ‰π¶Á±ç„ÄÅÁøªÈ°µ„ÄÅÂà†Èô§-gt-BookManage-vue" class="headerlink" title="Ë°®ÂçïÊòæÁ§∫ÊâÄÊúâ‰π¶Á±ç„ÄÅÁøªÈ°µ„ÄÅÂà†Èô§ -&gt; BookManage.vue"></a>Ë°®ÂçïÊòæÁ§∫ÊâÄÊúâ‰π¶Á±ç„ÄÅÁøªÈ°µ„ÄÅÂà†Èô§ -&gt; BookManage.vue</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:data</span>=<span class="string">"tableData"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">border</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">"width: 100%"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">                <span class="attr">fixed</span></span></span><br><span class="line"><span class="tag">                <span class="attr">prop</span>=<span class="string">"id"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">label</span>=<span class="string">"ÁºñÂè∑"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">width</span>=<span class="string">"150"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">                <span class="attr">prop</span>=<span class="string">"name"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">label</span>=<span class="string">"‰π¶Âêç"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">width</span>=<span class="string">"150"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">                <span class="attr">prop</span>=<span class="string">"author"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">label</span>=<span class="string">"‰ΩúËÄÖ"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">width</span>=<span class="string">"150"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                fixed="right"--&gt;</span></span><br><span class="line">                label="Êìç‰Ωú"</span><br><span class="line">                width="100"&gt;</span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"edit(scope.row)"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">size</span>=<span class="string">"small"</span>&gt;</span>‰øÆÊîπ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"deleteBook(scope.row)"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">size</span>=<span class="string">"small"</span>&gt;</span>Âà†Èô§<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            <span class="attr">background</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">"prev, pager, next"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">"pageSize"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">"total"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">"clickPage"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">        methods: &#123;</span><br><span class="line"><span class="actionscript">            <span class="comment">// Âà†Èô§</span></span></span><br><span class="line">            deleteBook(row) &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> _this = <span class="keyword">this</span></span></span><br><span class="line"><span class="actionscript">                axios.delete(<span class="string">'http://localhost:8181/book/deleteById/'</span>+row.id).then(<span class="function"><span class="keyword">function</span><span class="params">(resp)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">// ËøôÈáåÊ≤°ÊúâÁÆ°ËøîÂõû‰ø°ÊÅØÔºå‰πüÂèØ‰ª•Âà§Êñ≠Áä∂ÊÄÅÔºå200Â∞±ÊòØÊàêÂäü</span></span></span><br><span class="line"><span class="actionscript">                    _this.$alert(<span class="string">'„Ää'</span>+row.name+<span class="string">'„ÄãÂà†Èô§ÊàêÂäüÔºÅ'</span>, <span class="string">'Ê∂àÊÅØ'</span>, &#123;</span></span><br><span class="line"><span class="actionscript">                        confirmButtonText: <span class="string">'Á°ÆÂÆö'</span>,</span></span><br><span class="line"><span class="javascript">                        callback: <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">                            <span class="comment">// Âà∑Êñ∞</span></span></span><br><span class="line"><span class="javascript">                            <span class="built_in">window</span>.location.reload()</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="actionscript">            <span class="comment">// Ë∑≥ËΩ¨Âà∞ÁºñËæë</span></span></span><br><span class="line">            edit(row) &#123;</span><br><span class="line"><span class="actionscript">                <span class="comment">// this.$router.push('/book-update')</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.$router.push(&#123;</span></span><br><span class="line"><span class="actionscript">                    path: <span class="string">'/book-update'</span>,</span></span><br><span class="line">                    query: &#123;</span><br><span class="line">                        id: row.id</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="actionscript">            <span class="comment">// ÁøªÈ°µ</span></span></span><br><span class="line">            clickPage(index)&#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> _this = <span class="keyword">this</span></span></span><br><span class="line"><span class="actionscript">                axios.get(<span class="string">'http://localhost:8181/book/findAll/'</span>+(index<span class="number">-1</span>)+<span class="string">'/6'</span>).then(<span class="function"><span class="keyword">function</span><span class="params">(resp)</span></span>&#123;</span></span><br><span class="line">                    _this.tableData = resp.data.content</span><br><span class="line">                    _this.pageSize = resp.data.size</span><br><span class="line">                    _this.total = resp.data.totalElements</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                pageSize:<span class="string">'6'</span>,</span></span><br><span class="line"><span class="actionscript">                total:<span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">                tableData:<span class="string">''</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// Âä†ËΩΩ‰π¶Á±ç‰ø°ÊÅØÂà∞Ë°®Âçï</span></span></span><br><span class="line">        created()&#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">const</span> _this = <span class="keyword">this</span></span></span><br><span class="line"><span class="actionscript">            axios.get(<span class="string">'http://localhost:8181/book/findAll/0/6'</span>).then(<span class="function"><span class="keyword">function</span><span class="params">(resp)</span></span>&#123;</span></span><br><span class="line">                _this.tableData = resp.data.content</span><br><span class="line">                _this.pageSize = resp.data.size</span><br><span class="line">                _this.total = resp.data.totalElements</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Êñ∞Â¢û-gt-AddBook-vue"><a href="#Êñ∞Â¢û-gt-AddBook-vue" class="headerlink" title="Êñ∞Â¢û -&gt; AddBook.vue"></a>Êñ∞Â¢û -&gt; AddBook.vue</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    modelËÆæÁΩÆÊï∞ÊçÆÁªëÂÆöÔºårulesËÆæÁΩÆÊ†°È™åËßÑÂàôÔºårefÊòØÂêçÂ≠óÔºåÂú®Êèê‰∫§Êó∂‰ΩøÁî®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">style</span>=<span class="string">"width: 60%"</span> <span class="attr">:model</span>=<span class="string">"ruleForm"</span> <span class="attr">:rules</span>=<span class="string">"rules"</span> <span class="attr">ref</span>=<span class="string">"ruleForm"</span> <span class="attr">label-width</span>=<span class="string">"100px"</span> <span class="attr">class</span>=<span class="string">"demo-ruleForm"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"‰π¶Âêç"</span> <span class="attr">prop</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.name"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"‰ΩúËÄÖ"</span> <span class="attr">prop</span>=<span class="string">"author"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.author"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"submitForm('ruleForm')"</span>&gt;</span>Á´ãÂç≥ÂàõÂª∫<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"resetForm('ruleForm')"</span>&gt;</span>ÈáçÁΩÆ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line">                ruleForm: &#123;</span><br><span class="line"><span class="actionscript">                    name: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">                    author: <span class="string">''</span>,</span></span><br><span class="line">                &#125;,</span><br><span class="line">                rules: &#123;</span><br><span class="line">                    name: [</span><br><span class="line"><span class="actionscript">                        &#123; required: <span class="literal">true</span>, message: <span class="string">'ËØ∑ËæìÂÖ•‰π¶Âêç'</span>, trigger: <span class="string">'blur'</span> &#125;,</span></span><br><span class="line">                    ],</span><br><span class="line">                    author: [</span><br><span class="line"><span class="actionscript">                        &#123; required: <span class="literal">true</span>, message: <span class="string">'ËØ∑ËæìÂÖ•‰ΩúËÄÖ'</span>, trigger: <span class="string">'blur'</span> &#125;,</span></span><br><span class="line">                    ],</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line"><span class="actionscript">            <span class="comment">// Êèê‰∫§Ë°®Âçï</span></span></span><br><span class="line">            submitForm(formName) &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> _this = <span class="keyword">this</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.$refs[formName].validate(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span><br><span class="line">                    if (valid) &#123;</span><br><span class="line"><span class="actionscript">                        axios.post(<span class="string">'http://localhost:8181/book/save'</span>,<span class="keyword">this</span>.ruleForm).then(<span class="function"><span class="keyword">function</span><span class="params">(resp)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">if</span>(resp.data == <span class="string">'success'</span>)&#123;</span></span><br><span class="line">                                _this.$message(&#123;</span><br><span class="line"><span class="actionscript">                                    message: <span class="string">'„Ää'</span>+_this.ruleForm.name+<span class="string">'„Äã'</span>+<span class="string">'Ê∑ªÂä†ÊàêÂäü'</span>,</span></span><br><span class="line"><span class="actionscript">                                    type: <span class="string">'success'</span></span></span><br><span class="line">                                &#125;)</span><br><span class="line"><span class="actionscript">                                _this.$router.push(<span class="string">'/book-manage'</span>)</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="actionscript">            <span class="comment">// ÈáçÁΩÆË°®Âçï</span></span></span><br><span class="line">            resetForm(formName) &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.$refs[formName].resetFields();</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="‰øÆÊîπ-gt-BookUpdate-vue"><a href="#‰øÆÊîπ-gt-BookUpdate-vue" class="headerlink" title="‰øÆÊîπ -&gt;  BookUpdate.vue"></a>‰øÆÊîπ -&gt;  BookUpdate.vue</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    modelËÆæÁΩÆÊï∞ÊçÆÁªëÂÆöÔºårulesËÆæÁΩÆÊ†°È™åËßÑÂàôÔºårefÊòØÂêçÂ≠óÔºåÂú®Êèê‰∫§Êó∂‰ΩøÁî®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">style</span>=<span class="string">"width: 60%"</span> <span class="attr">:model</span>=<span class="string">"ruleForm"</span> <span class="attr">:rules</span>=<span class="string">"rules"</span> <span class="attr">ref</span>=<span class="string">"ruleForm"</span> <span class="attr">label-width</span>=<span class="string">"100px"</span> <span class="attr">class</span>=<span class="string">"demo-ruleForm"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"ÁºñÂè∑"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.id"</span> <span class="attr">readonly</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"‰π¶Âêç"</span> <span class="attr">prop</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.name"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"‰ΩúËÄÖ"</span> <span class="attr">prop</span>=<span class="string">"author"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.author"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"submitForm('ruleForm')"</span>&gt;</span>‰øÆÊîπ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"submitForm('ruleForm')"</span>&gt;</span>ÈáçÁΩÆ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line">                ruleForm: &#123;</span><br><span class="line"><span class="actionscript">                    id: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">                    name: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">                    author: <span class="string">''</span>,</span></span><br><span class="line">                &#125;,</span><br><span class="line">                rules: &#123;</span><br><span class="line">                    name: [</span><br><span class="line"><span class="actionscript">                        &#123; required: <span class="literal">true</span>, message: <span class="string">'ËØ∑ËæìÂÖ•‰π¶Âêç'</span>, trigger: <span class="string">'blur'</span> &#125;,</span></span><br><span class="line">                    ],</span><br><span class="line">                    author: [</span><br><span class="line"><span class="actionscript">                        &#123; required: <span class="literal">true</span>, message: <span class="string">'ËØ∑ËæìÂÖ•‰ΩúËÄÖ'</span>, trigger: <span class="string">'blur'</span> &#125;,</span></span><br><span class="line">                    ],</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line"><span class="actionscript">            <span class="comment">// Êèê‰∫§Ë°®Âçï</span></span></span><br><span class="line">            submitForm(formName) &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> _this = <span class="keyword">this</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.$refs[formName].validate(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span><br><span class="line">                    if (valid) &#123;</span><br><span class="line"><span class="actionscript">                        axios.put(<span class="string">'http://localhost:8181/book/update'</span>,<span class="keyword">this</span>.ruleForm).then(<span class="function"><span class="keyword">function</span><span class="params">(resp)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">if</span>(resp.data == <span class="string">'success'</span>)&#123;</span></span><br><span class="line">                                _this.$message(&#123;</span><br><span class="line"><span class="actionscript">                                    message: <span class="string">'„Ää'</span>+_this.ruleForm.name+<span class="string">'„Äã'</span>+<span class="string">'‰øÆÊîπÊàêÂäü'</span>,</span></span><br><span class="line"><span class="actionscript">                                    type: <span class="string">'success'</span></span></span><br><span class="line">                                &#125;)</span><br><span class="line"><span class="actionscript">                                _this.$router.push(<span class="string">'/book-manage'</span>)</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            resetForm(formName) &#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.$refs[formName].resetFields();</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="actionscript">        <span class="comment">// Â°´ÂÖ•ÂàùÂßã‰ø°ÊÅØ</span></span></span><br><span class="line">        created()&#123;</span><br><span class="line"><span class="actionscript">            <span class="comment">// ÊòØroute‰∏çÊòØrouter!</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// alert(this.$route.query.id)</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">const</span> _this = <span class="keyword">this</span></span></span><br><span class="line"><span class="actionscript">            axios.get(<span class="string">'http://localhost:8181/book/findById/'</span>+<span class="keyword">this</span>.$route.query.id).then(<span class="function"><span class="keyword">function</span><span class="params">(resp)</span></span>&#123;</span></span><br><span class="line">                _this.ruleForm = resp.data</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="‰∏ÄÁÇπÊÉ≥Ê≥ï"><a href="#‰∏ÄÁÇπÊÉ≥Ê≥ï" class="headerlink" title="‰∏ÄÁÇπÊÉ≥Ê≥ï"></a>‰∏ÄÁÇπÊÉ≥Ê≥ï</h1><p>Spring Boot + Vue ÁúüÊòØÂ•ΩÊñπ‰æø</p>
<p>ÂêéÁ´ØÂü∫Êú¨‰∏çÁî®ÂÜô‰ªÄ‰πàÔºåË¶ÅÁî®ÁöÑÊñπÊ≥ïÈÉΩÊúâ</p>
<p>ÂâçÁ´ØË¶Å‰ªÄ‰πàÊ®°ÁâàÁõ¥Êé•Âú®element uiÈáåÊâæÊù•Áî®</p>
<p>Ë∑üÁùÄÊï≤Ëøô‰∏™demoÁöÑÊó∂ÂÄôÁ¢∞Âà∞ÁöÑÂùëÂü∫Êú¨ÈÉΩÊòØÂíåË∑ØÁî±ÊúâÂÖ≥ÁöÑÔºårouterËΩ¨Êù•ËΩ¨ÂéªÊúâÁÇπÊôï</p>
<p>‰ΩÜÊòØ ÊÄª‰πã</p>
<p>ÊàëÁúüÁöÑ‰ªéÊù•Ê≤°ÊúâÂú®Âì™‰∏™ÊïôÁ®ãÂê¨ËßÅËøô‰πàÂ§ö‚ÄúÂ∞±Ë°å‰∫Ü‚Äù„ÄÅ‚ÄúËá™Âä®‚Äù„ÄÅ‚Äú‰∏çÁî®ÁÆ°‰∫Ü‚Äù‚Ä¶ÊûÅÂ∫¶ËàíÈÄÇÔºÅÊúâÊû∂Â≠ê‰∏çÁî®ÂæíÊâãÁà¨Â¢ôÁúüÂ•Ω</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>VueÁ¨îËÆ∞06 ‰øÆÊîπÂíåÂà†Èô§</title>
    <url>/2020/03/17/note-vue-06/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av85793766?p=6" target="_blank" rel="noopener">https://www.bilibili.com/video/av85793766?p=6</a></p>
</blockquote>
<h1 id="Ë∑≥ËΩ¨Âà∞‰øÆÊîπÈ°µÈù¢"><a href="#Ë∑≥ËΩ¨Âà∞‰øÆÊîπÈ°µÈù¢" class="headerlink" title="Ë∑≥ËΩ¨Âà∞‰øÆÊîπÈ°µÈù¢"></a>Ë∑≥ËΩ¨Âà∞‰øÆÊîπÈ°µÈù¢</h1><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;template slot-scope=<span class="string">"scope"</span>&gt;</span><br><span class="line">  &lt;el-button @click="edit(scope.row)" type="text" size="small"&gt;‰øÆÊîπ&lt;/el-button&gt;</span><br><span class="line">  &lt;el-button type="text" size="small"&gt;Âà†Èô§&lt;/el-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>@click‰∏≠ÁªëÂÆöÁÇπÂáª‰∫ã‰ª∂</p>
<p>ËøôÈáåË∑≥ËΩ¨Áî®thisËÄå‰∏çÈúÄË¶Å_thisÔºåÂõ†‰∏∫‰∏çÂú®ÂõûË∞ÉÂáΩÊï∞‰∏≠</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">edit(row) &#123;</span><br><span class="line">	this.$router.push(&#39;&#x2F;book-update&#39;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>DEBUG</strong></p>
<p>ËøôÈáåË∑≥ËΩ¨ËøáÂéª‰πãÂêéÔºåÊï¥È°µÈÉΩÊòØ‰øÆÊîπÈ°µÈù¢ÔºåÂ∑¶‰æßËèúÂçïÊ≤°Êúâ‰∫Ü</p>
<p>ÂíåÊ∫êÁ†ÅÂØπÊØîÔºåÂèëÁé∞Â∑¶‰æßËèúÂçïÁöÑ‰ª£Á†ÅÊîæÂú®App.vueËÄå‰∏çÊòØIndex.vue ÊàëÂ§±ÂøÜ‰∫ÜÔºü</p>
<p>‰∏çËøá‰πüÂ∞±ÂèØ‰ª•Ëß£Èáä‰∫ÜÔºåÂä†ËΩΩÁÆ°ÁêÜ„ÄÅÊñ∞Â¢ûÂíå‰øÆÊîπÊõøÊç¢ÁöÑÊòØmainÈáåÁöÑIndexÈÉ®ÂàÜÔºå‰∏çÁÆ°ÊÄé‰πàÊõøÊç¢ËèúÂçïÈÉΩËøòÂú®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+------------------------------------+ </span><br><span class="line">| App                                |  </span><br><span class="line">| +------+-------------------------+ | </span><br><span class="line">| | menu | main                    | |  </span><br><span class="line">| |      | +---------------------+ | |  </span><br><span class="line">| |      | | Index               | | | </span><br><span class="line">| |      | +---------------------+ | |  </span><br><span class="line">| +------+-------------------------+ | </span><br><span class="line">+------------------------------------+</span><br></pre></td></tr></table></figure>

<p>ËÄåÊàëÁöÑÊäämenuÂÜôÂú®IndexÈáåÈù¢ÔºåÁÆ°ÁêÜÂíåÊñ∞Â¢ûÊõøÊç¢ÁöÑÊòØIndexÈáåÁöÑmainÂå∫ÂüüÔºåmenuËøòÂú®ÔºåËÄå‰øÆÊîπÁõ¥Êé•ÊääIndexÊç¢Êéâ‰∫Ü</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+------------------------------------+ </span><br><span class="line">| App                                |  </span><br><span class="line">| +--------------------------------+ | </span><br><span class="line">| | Index                          | |  </span><br><span class="line">| | +------+---------------------+ | |  </span><br><span class="line">| | | menu | main                | | | </span><br><span class="line">| | +------+---------------------+ | |  </span><br><span class="line">| +--------------------------------+ | </span><br><span class="line">+------------------------------------+</span><br></pre></td></tr></table></figure>

<p>ÊîπËøáÊù•‰πãÂêéÈ°µÈù¢Â∞±Ê≠£Â∏∏‰∫Ü</p>
<hr>
<h1 id="‰øÆÊîπÈ°µÈù¢"><a href="#‰øÆÊîπÈ°µÈù¢" class="headerlink" title="‰øÆÊîπÈ°µÈù¢"></a>‰øÆÊîπÈ°µÈù¢</h1><p>ÂÖàÊääÊñ∞Â¢ûÁïåÈù¢Ë°®ÂçïÂ§çÂà∂ËøáÂéª</p>
<p>Âú®createdÊñπÊ≥ï‰∏≠Ë∞ÉÂêéÂè∞Êï∞ÊçÆÔºåÊòæÁ§∫Âà∞È°µÈù¢</p>
<p>È¶ñÂÖàÈúÄË¶ÅËé∑ÂèñÂΩìÂâçÁöÑidÔºåBookManageÈ°µÈù¢Âú®router‰∏≠Â∏¶ÂèÇÊï∞Á©øËøáÂéª</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">edit(row) &#123;</span><br><span class="line">  <span class="comment">// this.$router.push('/book-update')</span></span><br><span class="line">  <span class="keyword">this</span>.$router.push(&#123;</span><br><span class="line">    path: <span class="string">'/book-update'</span>,</span><br><span class="line">    query: &#123;</span><br><span class="line">    	id: row.id</span><br><span class="line">  	&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>BookUpdateÈ°µÈù¢‰∏≠Êé•Êî∂</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  submitForm(formName) &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;,</span><br><span class="line">    resetForm(formName) &#123;</span><br><span class="line">      <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">created()&#123;</span><br><span class="line">    <span class="comment">// ÊòØroute‰∏çÊòØrouter!</span></span><br><span class="line">    alert(<span class="keyword">this</span>.$route.query.id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËøôÈáåcreated()Âú®methodsÂ§ñÈù¢</p>
<h1 id="Ëé∑ÂèñÂæÖ‰øÆÊîπ‰øÆÊîπÂõæ‰π¶‰ø°ÊÅØ"><a href="#Ëé∑ÂèñÂæÖ‰øÆÊîπ‰øÆÊîπÂõæ‰π¶‰ø°ÊÅØ" class="headerlink" title="Ëé∑ÂèñÂæÖ‰øÆÊîπ‰øÆÊîπÂõæ‰π¶‰ø°ÊÅØ"></a>Ëé∑ÂèñÂæÖ‰øÆÊîπ‰øÆÊîπÂõæ‰π¶‰ø°ÊÅØ</h1><h2 id="ÂêéÁ´Ø"><a href="#ÂêéÁ´Ø" class="headerlink" title="ÂêéÁ´Ø"></a>ÂêéÁ´Ø</h2><p>RepositoryÁöÑfindById()ËøîÂõûÁöÑÊòØOptionÁ±ªÔºåÁõ∏ÂΩì‰∫éÊääBookÂèàÂåÖ‰∫Ü‰∏ÄÂ±ÇÔºåÂÜçÁî®get()ÂæóÂà∞BookÂØπË±°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">findById</span><span class="params">()</span></span>&#123;</span><br><span class="line">  Book book = repository.findById(<span class="number">1</span>).get();</span><br><span class="line">  System.out.println(book);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÂÖàÊµãËØï‰∏Ä‰∏ãÔºåÊé•Âè£Ê≤°ÊúâÈóÆÈ¢òÔºåÂÜçÂÜôÂØπÂ§ñÊèê‰æõÁöÑÊñπÊ≥ï</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/findById/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Book <span class="title">findById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> bookRepository.findById(id).get();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÂØπÊé•"><a href="#ÂØπÊé•" class="headerlink" title="ÂØπÊé•"></a>ÂØπÊé•</h2><p>Ëé∑ÂèñÊï∞ÊçÆÂπ∂ÁªëÂÆöÂà∞Ë°®Âçï‰∏ä</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">created()&#123;</span><br><span class="line">  <span class="keyword">const</span> _this = <span class="keyword">this</span></span><br><span class="line">  axios.get(<span class="string">'http://localhost:8181/book/findById/'</span>+<span class="keyword">this</span>.$route.query.id).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>)</span>&#123;</span><br><span class="line">    _this.ruleForm = resp.data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ë°®ÂçïÂä†‰∏Ä‰∏™idÂ±ûÊÄß</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"ÁºñÂè∑"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.id"</span> <span class="attr">readonly</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰∏çÂèØ‰øÆÊîπÔºåÂä†readonlyÔºå‰∏çÈúÄË¶ÅÊ†°È™åÔºåÂà†prop=‚Äùid‚Äù</p>
<p>‰∏ãÈù¢ruleForm‰πüË¶ÅÂä†ÂØπÂ∫îÁöÑid</p>
<h1 id="‰øÆÊîπÂõæ‰π¶"><a href="#‰øÆÊîπÂõæ‰π¶" class="headerlink" title="‰øÆÊîπÂõæ‰π¶"></a>‰øÆÊîπÂõæ‰π¶</h1><p>ÂêéÁ´ØÂÜô‰∏Ä‰∏™‰øÆÊîπÊñπÊ≥ï</p>
<p>repositoryÊ≤°ÊúâupdateÊñπÊ≥ïÔºåsaveÂèØ‰ª•Áî®‰∫é‰øÆÊîπ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PutMapping</span>(<span class="string">"/update"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">update</span><span class="params">(@RequestBody Book book)</span></span>&#123;</span><br><span class="line">  Book result = bookRepository.save(book);</span><br><span class="line">  <span class="keyword">if</span>(result != <span class="keyword">null</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÂÜÖÂÆπÂíåsaveÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰ΩÜÊòØ‰∏∫‰∫ÜÁ¨¶ÂêàRESTfulÈ£éÊ†ºÔºåÊñ∞ÂÜô‰∏Ä‰∏™PutMappingÁöÑ</p>
<p>ÂâçÁ´ØsubmitFormÈáåÈù¢Á®çÂæÆ‰øÆÊîπ‰∏Ä‰∏ãÔºåpostÊîπÊàêputÔºåurlÊîπ‰∏Ä‰∏ãÔºåmessageÊîπÊàê‰øÆÊîπÊàêÂäü</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">axios.put(<span class="string">'http://localhost:8181/book/update'</span>,<span class="keyword">this</span>.ruleForm).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(resp.data == <span class="string">'success'</span>)&#123;</span><br><span class="line">    _this.$message(&#123;</span><br><span class="line">      message: <span class="string">'„Ää'</span>+_this.ruleForm.name+<span class="string">'„Äã'</span>+<span class="string">'‰øÆÊîπÊàêÂäü'</span>,</span><br><span class="line">      type: <span class="string">'success'</span></span><br><span class="line">    &#125;)</span><br><span class="line">    _this.$router.push(<span class="string">'/book-manage'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="Âà†Èô§Âõæ‰π¶"><a href="#Âà†Èô§Âõæ‰π¶" class="headerlink" title="Âà†Èô§Âõæ‰π¶"></a>Âà†Èô§Âõæ‰π¶</h1><p>ÂêéÁ´Ø</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping</span>(<span class="string">"/deleteById/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id)</span>&#123;</span><br><span class="line">  bookRepository.deleteById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>buttonÁªë‰∏Ä‰∏™‰∫ã‰ª∂</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"deleteBook(scope.row)"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">size</span>=<span class="string">"small"</span>&gt;</span>Âà†Èô§<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰∏çËÉΩÂè´deleteÔºåÂíåÂÖ≥ÈîÆÂ≠óÂÜ≤Á™Å</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">deleteBook(row) &#123;</span><br><span class="line">  <span class="keyword">const</span> _this = <span class="keyword">this</span></span><br><span class="line">  axios.delete(<span class="string">'http://localhost:8181/book/deleteById/'</span>+row.id).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// ËøôÈáåÊ≤°ÊúâÁÆ°ËøîÂõû‰ø°ÊÅØÔºå‰πüÂèØ‰ª•Âà§Êñ≠Áä∂ÊÄÅÔºå200Â∞±ÊòØÊàêÂäü</span></span><br><span class="line">    _this.$alert(<span class="string">'„Ää'</span>+row.name+<span class="string">'„ÄãÂà†Èô§ÊàêÂäüÔºÅ'</span>, <span class="string">'Ê∂àÊÅØ'</span>, &#123;</span><br><span class="line">      confirmButtonText: <span class="string">'Á°ÆÂÆö'</span>,</span><br><span class="line">      callback: <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// Âà∑Êñ∞</span></span><br><span class="line">        <span class="built_in">window</span>.location.reload()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>ÂÆåÊï¥ÁöÑÂ¢ûÂà†ÊîπÊü•Â∞±ÂÆûÁé∞‰∫ÜÔΩû</p>
<h1 id="‰øÆÊîπËèúÂçï"><a href="#‰øÆÊîπËèúÂçï" class="headerlink" title="‰øÆÊîπËèúÂçï"></a>‰øÆÊîπËèúÂçï</h1><p>Áî±‰∫éÂä†‰∫Ü‰∏Ä‰∏™Ë∑ØÁî±ÔºåËÄåËèúÂçïÊòØÊ†πÊçÆË∑ØÁî±Âä®ÊÄÅÂä†ËΩΩÁöÑÔºå‰ºöÊääÈÖçÁΩÆÁöÑË∑ØÁî±ÂÖ®ÈÉ®ÈÅçÂéÜÂá∫Êù•Ôºå‰∫éÊòØËèúÂçïÂ∑¶‰æßÂ∞±Â§ö‰∫Ü‰∏Ä‰∏™</p>
<p>ÂèØ‰ª•Ê∑ªÂä†‰∏Ä‰∏™Â±ûÊÄßÊù•Âà§Êñ≠ÔºåshowÊòØtrueÂ∞±ÈÅçÂéÜÔºåfalseÂ∞±‰∏çÈÅçÂéÜ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    name: <span class="string">'Âõæ‰π¶ÁÆ°ÁêÜ'</span>,</span><br><span class="line">    show: <span class="literal">true</span>,</span><br><span class="line">    component:Index,</span><br><span class="line">    redirect:<span class="string">'book-manage'</span>,</span><br><span class="line">    children:[</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/book-manage'</span>,</span><br><span class="line">        name: <span class="string">'Êü•ËØ¢Âõæ‰π¶'</span>,</span><br><span class="line">        component: BookManage</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/add-book'</span>,</span><br><span class="line">        name: <span class="string">'Ê∑ªÂä†Âõæ‰π¶'</span>,</span><br><span class="line">        component: AddBook</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/book-update'</span>,</span><br><span class="line">    name: <span class="string">'‰øÆÊîπ'</span>,</span><br><span class="line">    show: <span class="literal">false</span>,</span><br><span class="line">    component: BookUpdate</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>App.vue‰∏≠ÈÄöËøáv-if=‚Äùitem.show‚ÄùÂà§Êñ≠</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-container</span> <span class="attr">style</span>=<span class="string">"height: 500px; border: 1px solid #eee"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">width</span>=<span class="string">"200px"</span> <span class="attr">style</span>=<span class="string">"background-color: rgb(238, 241, 246)"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--            ËøôÈáåÊ∑ªÂä†routerÊ†áÁ≠æÔºåel-menu-itemÁöÑindexÂ∞±‰ºöË¢´‰Ωú‰∏∫routerË∑ØÂæÑ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-menu</span> <span class="attr">router</span> <span class="attr">:default-openeds</span>=<span class="string">"['0','1']"</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--          showÂ±ûÊÄß‰∏∫trueÂàôÈÅçÂéÜ--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in $router.options.routes"</span> <span class="attr">:index</span>=<span class="string">"index+''"</span> <span class="attr">v-if</span>=<span class="string">"item.show"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-setting"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--                    Êù°‰ª∂Âà§Êñ≠ÂΩìÂâçË∑ØÂæÑÊòØÂê¶Á≠â‰∫éindexÔºåÊõ¥ÊîπÈÄâ‰∏≠Áä∂ÊÄÅÔºå‰∏ªË¶ÅÊòØÂú®ÂàùÂßãÂåñÊó∂Â¢ûÂä†ÈªòËÆ§ÁöÑÈÄâ‰∏≠Áä∂ÊÄÅ--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">v-for</span>=<span class="string">"item2 in item.children"</span> <span class="attr">:index</span>=<span class="string">"item2.path"</span> <span class="attr">:class</span>=<span class="string">"$route.path==item2.path ? 'is-active' : ''"</span>&gt;</span>&#123;&#123;item2.name&#125;&#125;<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-main</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--            ‰∏äÈù¢ÂèàindexÁ°ÆÂÆöÁöÑrouterË¢´ÊòæÁ§∫Âú®ËøôÈáåÔºå‰πüÂ∞±ÊòØmainÂå∫Âüü‰∏≠--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÂÆåÂ∑•ÔºÅ</p>
<img src="/images/2020/screencapture2020-03-17PM5.05.48.jpg">]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>VueÁ¨îËÆ∞05 Ë°®Âçï</title>
    <url>/2020/03/16/note-vue-05/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av85793766?p=5" target="_blank" rel="noopener">https://www.bilibili.com/video/av85793766?p=5</a></p>
</blockquote>
<h1 id="Êñ∞Â¢û‰π¶Á±çÈ°µÈù¢"><a href="#Êñ∞Â¢û‰π¶Á±çÈ°µÈù¢" class="headerlink" title="Êñ∞Â¢û‰π¶Á±çÈ°µÈù¢"></a>Êñ∞Â¢û‰π¶Á±çÈ°µÈù¢</h1><p>ÁªßÁª≠ÂÆûÁé∞ÂØπÂõæ‰π¶ÂÆåÊï¥ÁöÑÂ¢ûÂà†ÊîπÊü•</p>
<p>ÂÆòÁΩëÊâæ‰∏Ä‰∏™formË°®Âçï</p>
<p>Êï∞ÊçÆÊòØÂèåÂêëÁªëÂÆöÁöÑÔºå:modelÂíåv-modelÁî®Êù•ÁªëÂÆöÂØπË±°</p>
<p>ÂèØ‰ª•Ê∑ªÂä†Ê†°È™åËßÑÂàôÔºåÈÄöËøárulesÁªëÂÆö„ÄÇÊ†°È™åËßÑÂàô‰∏≠ÔºåËß¶Âèë‰∫ã‰ª∂blurÊåáÂ§±ÂéªÁÑ¶ÁÇπÊó∂Ëß¶ÂèëÊ†°È™å</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">"ruleForm"</span> <span class="attr">:rules</span>=<span class="string">"rules"</span> <span class="attr">ref</span>=<span class="string">"ruleForm"</span> <span class="attr">label-width</span>=<span class="string">"100px"</span> <span class="attr">class</span>=<span class="string">"demo-ruleForm"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"‰π¶Âêç"</span> <span class="attr">prop</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.name"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"‰ΩúËÄÖ"</span> <span class="attr">prop</span>=<span class="string">"author"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"ruleForm.author"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"submitForm('ruleForm')"</span>&gt;</span>Á´ãÂç≥ÂàõÂª∫<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"resetForm('ruleForm')"</span>&gt;</span>ÈáçÁΩÆ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ruleForm: &#123;</span><br><span class="line">                    name: <span class="string">''</span>,</span><br><span class="line">                    author: <span class="string">''</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                rules: &#123;</span><br><span class="line">                    name: [</span><br><span class="line">                        &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'ËØ∑ËæìÂÖ•‰π¶Âêç'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> &#125;,</span><br><span class="line">                    ],</span><br><span class="line">                    author: [</span><br><span class="line">                        &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'ËØ∑ËæìÂÖ•‰ΩúËÄÖ'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> &#125;,</span><br><span class="line">                    ],</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            submitForm(formName) &#123;</span><br><span class="line">                <span class="keyword">this</span>.$refs[formName].validate(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">                        alert(<span class="string">'submit!'</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">'error submit!!'</span>);</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            resetForm(formName) &#123;</span><br><span class="line">                <span class="keyword">this</span>.$refs[formName].resetFields();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="ÂêéÁ´Ø"><a href="#ÂêéÁ´Ø" class="headerlink" title="ÂêéÁ´Ø"></a>ÂêéÁ´Ø</h1><p>BookÁöÑidË¶ÅÂä†Ëá™Â¢ûÊ≥®Ëß£ÔºåÂê¶Âàô‰ºöÂá∫ÈóÆÈ¢ò</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)  <span class="comment">// idËá™Â¢û</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>controller‰∏≠Âä†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/save"</span>)</span><br><span class="line"><span class="comment">// @RequestBodyÊääjsonÊ†ºÂºèËΩ¨ÊàêjavaÂØπË±°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">(@RequestBody Book book)</span></span>&#123;</span><br><span class="line">  Book result = bookRepository.save(book);</span><br><span class="line">  <span class="keyword">if</span>(result != <span class="keyword">null</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"sucess"</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ÂØπÊé•"><a href="#ÂØπÊé•" class="headerlink" title="ÂØπÊé•"></a>ÂØπÊé•</h1><p>‰º†BookÂØπË±°ÔºåÁõ¥Êé•ËøΩÂä†Â∞±Ë°å‰∫ÜÔºå‰∏çÈúÄË¶ÅÊãºÊé•</p>
<p>ÊèêÁ§∫‰ø°ÊÅØÂèØ‰ª•ÂÜçÂéªÂÆòÁΩëÊâæ‰∏Ä‰∏™ÂêàÈÄÇÁöÑÊãøÊù•Áî®</p>
<p>Ê∑ªÂä†ÊàêÂäüÂêéË∑≥ËΩ¨Âà∞Êü•ËØ¢È°µÈù¢ÔºåÁî®router.push</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">submitForm(formName) &#123;</span><br><span class="line">  <span class="keyword">const</span> _this = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">this</span>.$refs[formName].validate(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">      axios.post(<span class="string">'http://localhost:8181/book/save'</span>,<span class="keyword">this</span>.ruleForm).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(resp.data == <span class="string">'success'</span>)&#123;</span><br><span class="line">          _this.$message(&#123;</span><br><span class="line">            message: <span class="string">'„Ää'</span>+_this.ruleForm.name+<span class="string">'„Äã'</span>+<span class="string">'Ê∑ªÂä†ÊàêÂäü'</span>,</span><br><span class="line">            type: <span class="string">'success'</span></span><br><span class="line">          &#125;)</span><br><span class="line">          _this.$router.push(<span class="string">'/book-manage'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>ÂèëÁé∞‰∏Ä‰∏™Â∞èÈóÆÈ¢ò</p>
<p>ËøôÊ†∑ÂºπÂá∫È°∂ÈÉ®ÊèêÁ§∫‰πãÂêéÁõ¥Êé•ÂàáÊç¢È°µÈù¢ÔºåÂ∑¶‰æßÁöÑÈÄâ‰∏≠Áä∂ÊÄÅÊúâÈóÆÈ¢òÔºåÂéüÈ°µÈù¢ÂíåÊñ∞È°µÈù¢ÈÉΩÈÄâ‰∏≠‰∫Ü</p>
<p>‰ΩÜÊòØÁî®ÈúÄË¶ÅÁÇπÂáªÁ°ÆÂÆöÁöÑÊèêÁ§∫Ê°Ü‰πãÂêéÂàáÂõûÂéªÔºåÈÄâ‰∏≠Áä∂ÊÄÅÂ∞±Ê≤°ÊúâÈóÆÈ¢ò</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">_this.$alert(<span class="string">'Ê∑ªÂä†ÊàêÂäü'</span>,<span class="string">'MSG'</span>,&#123;</span><br><span class="line">  confirmButtonTest: <span class="string">'OK'</span>,</span><br><span class="line">  callback: <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">      type: <span class="string">'info'</span>,</span><br><span class="line">      message: <span class="string">`action: <span class="subst">$&#123;action&#125;</span>`</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">_this.$router.push(<span class="string">'/book-manage'</span>)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>VueÁ¨îËÆ∞04 ÂàÜÈ°µ</title>
    <url>/2020/03/16/note-vue-04/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av85793766?p=4" target="_blank" rel="noopener">https://www.bilibili.com/video/av85793766?p=4</a></p>
</blockquote>
<h1 id="Ë°®Ê†º‰∏éÂàÜÈ°µ"><a href="#Ë°®Ê†º‰∏éÂàÜÈ°µ" class="headerlink" title="Ë°®Ê†º‰∏éÂàÜÈ°µ"></a>Ë°®Ê†º‰∏éÂàÜÈ°µ</h1><p>Âú®‰∏ä‰∏ÄÊ¨°ÁöÑÂü∫Á°Ä‰∏äÊ∑ªÂä†Ë°®Ê†ºÂíåÂàÜÈ°µÔºåÂú®ÂÆòÁΩëÊã∑ËøáÊù•ÔºåÊîæÂú®Page1</p>
<p>Ê≥®ÊÑè‰∏çËÉΩÁõ¥Êé•Âπ∂ÂàóÊîæÂú®template‰∏ãÔºåÁî±‰∫éÂè™ËÉΩÊúâ‰∏Ä‰∏™Ê†πËäÇÁÇπÔºåÂ§ñÈù¢Ë¶ÅÂ•ó‰∏Ä‰∏™div</p>
<h2 id="Ë°®Ê†ºÊï∞ÊçÆÂä†ËΩΩ"><a href="#Ë°®Ê†ºÊï∞ÊçÆÂä†ËΩΩ" class="headerlink" title="Ë°®Ê†ºÊï∞ÊçÆÂä†ËΩΩ"></a>Ë°®Ê†ºÊï∞ÊçÆÂä†ËΩΩ</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">    <span class="attr">fixed</span></span></span><br><span class="line"><span class="tag">    <span class="attr">prop</span>=<span class="string">"id"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">label</span>=<span class="string">"ÁºñÂè∑"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">"150"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">tableData: [&#123;</span><br><span class="line">     id: <span class="string">'01'</span>,</span><br><span class="line">     name: <span class="string">'‰π¶Á±ç1'</span>,</span><br><span class="line">     author: <span class="string">'‰ΩúËÄÖ1'</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ê†πÊçÆpropÁöÑÂÄºÂíåÊï∞ÊçÆÂØπÂ∫î</p>
<h2 id="ÂàÜÈ°µ"><a href="#ÂàÜÈ°µ" class="headerlink" title="ÂàÜÈ°µ"></a>ÂàÜÈ°µ</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">     <span class="attr">background</span></span></span><br><span class="line"><span class="tag">     <span class="attr">layout</span>=<span class="string">"prev, pager, next"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">:total</span>=<span class="string">"1000"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>totalÊòØÊÄªËÆ∞ÂΩïÊï∞ÔºåÈªòËÆ§ÊØèÈ°µ10Êù°ÔºåÊ≠§Êó∂Â∞±Êúâ1000/10=100È°µ</p>
<h2 id="ÁªëÂÆöÁÇπÂáª‰∫ã‰ª∂"><a href="#ÁªëÂÆöÁÇπÂáª‰∫ã‰ª∂" class="headerlink" title="ÁªëÂÆöÁÇπÂáª‰∫ã‰ª∂"></a>ÁªëÂÆöÁÇπÂáª‰∫ã‰ª∂</h2><p>Áî®@current-change=‚Äùpage‚Äù</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">               <span class="attr">background</span></span></span><br><span class="line"><span class="tag">               <span class="attr">layout</span>=<span class="string">"prev, pager, next"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">:total</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">               @<span class="attr">current-change</span>=<span class="string">"clickPage"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Script‰∏≠Âä†</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">        methods: &#123;</span><br><span class="line">            clickPage()&#123;</span><br><span class="line">                alert(<span class="number">1</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Âç≥ÂèØÁúãÂà∞ÊïàÊûú</p>
<h2 id="ÁÇπÂáªÁøªÈ°µ"><a href="#ÁÇπÂáªÁøªÈ°µ" class="headerlink" title="ÁÇπÂáªÁøªÈ°µ"></a>ÁÇπÂáªÁøªÈ°µ</h2><p>Êää‰º†ËøáÊù•ÁöÑÂØπË±°ÊâìÂç∞ÁúãÁúãÔºåÂèëÁé∞Â∞±ÊòØÈ°µÈù¢ÁöÑindex</p>
<p>ÁªëÊµãËØïÁöÑÊï∞ÊçÆËØïËØïÔºåÂêéÈù¢Âú®ËøûÂêéÂè∞</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">clickPage(index)&#123;</span><br><span class="line">  <span class="keyword">switch</span>(index)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">      <span class="keyword">this</span>.tableData = [&#123;</span><br><span class="line">        id: <span class="string">'01'</span>,</span><br><span class="line">        name: <span class="string">'‰π¶Á±ç1'</span>,</span><br><span class="line">        author: <span class="string">'‰ΩúËÄÖ1'</span>,</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        id: <span class="string">'02'</span>,</span><br><span class="line">        name: <span class="string">'‰π¶Á±ç2'</span>,</span><br><span class="line">        author: <span class="string">'‰ΩúËÄÖ2'</span>,</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        id: <span class="string">'03'</span>,</span><br><span class="line">        name: <span class="string">'‰π¶Á±ç3'</span>,</span><br><span class="line">        author: <span class="string">'‰ΩúËÄÖ3'</span>,</span><br><span class="line">      &#125;]</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">      <span class="keyword">this</span>.tableData = [&#123;</span><br><span class="line">        id: <span class="string">'04'</span>,</span><br><span class="line">        name: <span class="string">'‰π¶Á±ç4'</span>,</span><br><span class="line">        author: <span class="string">'‰ΩúËÄÖ4'</span>,</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        id: <span class="string">'05'</span>,</span><br><span class="line">        name: <span class="string">'‰π¶Á±ç5'</span>,</span><br><span class="line">        author: <span class="string">'‰ΩúËÄÖ5'</span>,</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        id: <span class="string">'06'</span>,</span><br><span class="line">        name: <span class="string">'‰π¶Á±ç6'</span>,</span><br><span class="line">        author: <span class="string">'‰ΩúËÄÖ6'</span>,</span><br><span class="line">      &#125;]</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>ÂèØ‰ª•Ê≠£Â∏∏ÂàáÊç¢</p>
<h1 id="ÂêéÁ´ØÊ∑ªÂä†ÂàÜÈ°µÊìç‰Ωú"><a href="#ÂêéÁ´ØÊ∑ªÂä†ÂàÜÈ°µÊìç‰Ωú" class="headerlink" title="ÂêéÁ´ØÊ∑ªÂä†ÂàÜÈ°µÊìç‰Ωú"></a>ÂêéÁ´ØÊ∑ªÂä†ÂàÜÈ°µÊìç‰Ωú</h1><p>Spring BootÁöÑRepositoryÊääÂàÜÈ°µ‰πüËß£ÂÜ≥‰∫Ü</p>
<p>ÊµãËØï</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookstoreServerApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    BookRepository repository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        PageRequest pageRequest = PageRequest.of(<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line">        Page&lt;Book&gt; page = repository.findAll(pageRequest);</span><br><span class="line">        System.out.println(page);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-03-16AM11.08.48.jpg">

<p>ÈúÄË¶ÅÁöÑ‰∏úË•øÈÉΩÂèñÂá∫Êù•‰∫Ü</p>
<p>Áõ¥Êé•Ë∞ÉÊñπÊ≥ïÂÆûÁé∞Êé•Âè£Â∞±ÂèØ‰ª•‰∫Ü</p>
<p>Âú®controller‰∏≠ÔºåÊé•Êî∂ÂèÇÊï∞ÔºåË∞ÉfindAllÔºåËøîÂõûPage</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/findAll/&#123;page&#125;/&#123;size&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Page&lt;Book&gt; <span class="title">findAll</span><span class="params">(@PathVariable(<span class="string">"page"</span>)</span> Integer page,@<span class="title">PathVariable</span><span class="params">(<span class="string">"size"</span>)</span> Integer size)</span>&#123;</span><br><span class="line">        PageRequest pageRequest = PageRequest.of(page,size);</span><br><span class="line">        <span class="keyword">return</span> bookRepository.findAll(pageRequest);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-03-16AM11.15.19.jpg">

<h1 id="ÂØπÊé•"><a href="#ÂØπÊé•" class="headerlink" title="ÂØπÊé•"></a>ÂØπÊé•</h1><p>Ë£ÖÊèí‰ª∂</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vue add axios</span><br></pre></td></tr></table></figure>

<p>axio.get().then()</p>
<p>getÈáåÊòØËØ∑Ê±ÇÔºåthenÈáåÊòØÂõûË∞ÉÂáΩÊï∞</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">created()&#123;</span><br><span class="line">	axios.get(<span class="string">'http://localhost:8181/book/findAll/0/6'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(resp)</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-03-16AM11.22.45.jpg">

<p>ÁúãÂà∞Êï∞ÊçÆÂæóÂà∞‰∫Ü</p>
<p>Page‰∏≠data.contentÈÉ®ÂàÜÂ∞±ÊòØ‰π¶Á±çÊï∞ÊçÆÔºåËµãÂÄºÂç≥ÂèØ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    pageSize:<span class="string">'6'</span>,</span><br><span class="line">    total:<span class="string">''</span>,</span><br><span class="line">    tableData:<span class="string">''</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">created()&#123;</span><br><span class="line">  <span class="keyword">const</span> _this = <span class="keyword">this</span></span><br><span class="line">  axios.get(<span class="string">'http://localhost:8181/book/findAll/0/6'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>)</span>&#123;</span><br><span class="line">    _this.tableData = resp.data.content</span><br><span class="line">    _this.pageSize = resp.data.size</span><br><span class="line">    _this.total = resp.data.totalElements</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">               <span class="attr">background</span></span></span><br><span class="line"><span class="tag">               <span class="attr">layout</span>=<span class="string">"prev, pager, next"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">:page-size</span>=<span class="string">"pageSize"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">:total</span>=<span class="string">"total"</span></span></span><br><span class="line"><span class="tag">               @<span class="attr">current-change</span>=<span class="string">"clickPage"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Âπ∂‰∏î‰øÆÊîπÁÇπÂáª‰∫ã‰ª∂ÁªëÂÆöÁöÑÂáΩÊï∞</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">clickPage(index)&#123;</span><br><span class="line">  <span class="keyword">const</span> _this = <span class="keyword">this</span></span><br><span class="line">  axios.get(<span class="string">'http://localhost:8181/book/findAll/'</span>+(index<span class="number">-1</span>)+<span class="string">'/6'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">resp</span>)</span>&#123;</span><br><span class="line">    _this.tableData = resp.data.content</span><br><span class="line">    _this.pageSize = resp.data.size</span><br><span class="line">    _this.total = resp.data.totalElements</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>Â∞±ÂèØ‰ª•ÁÇπÂáªÁøªÈ°µ‰∫Ü</p>
<img src="/images/2020/screencapture2020-03-16AM11.35.54.jpg">

<img src="/images/2020/screencapture2020-03-16AM11.35.57.jpg">

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>ÂêÑÁßçÂêÑÊ†∑ÁöÑÂä®ÊÄÅËßÑÂàíÂ∞èÁªì</title>
    <url>/2020/03/14/dynamic-programming/</url>
    <content><![CDATA[<h1 id="Â°´ÂÖÖdpÊï∞ÁªÑÁöÑÊñπÂºè"><a href="#Â°´ÂÖÖdpÊï∞ÁªÑÁöÑÊñπÂºè" class="headerlink" title="Â°´ÂÖÖdpÊï∞ÁªÑÁöÑÊñπÂºè"></a>Â°´ÂÖÖdpÊï∞ÁªÑÁöÑÊñπÂºè</h1><p>ÁõÆÂâçÁ¢∞Âà∞ÁöÑÈ¢òÁõÆ‰∏≠Ôºå‰∏ÄËà¨Â°´ÂÖÖdpË¶Å‰πàÊòØÊåâÁÖßÈ°∫Â∫è‰∏Ä‰∏™‰∏Ä‰∏™Â°´ÔºåË¶Å‰πàÊòØÂÖàÂÖ®ÂàùÂßãÂåñ‰∏∫-1ÔºåÁº∫Âì™‰∏™Ë°•Âì™‰∏™</p>
<p>‰ª•<a href="#point">ÊúÄÈïø‰∏äÂçáÂ≠êÂ∫èÂàó</a>‰∏∫‰æã</p>
<h2 id="ÊåâÈ°∫Â∫èÊâ´Êèè"><a href="#ÊåâÈ°∫Â∫èÊâ´Êèè" class="headerlink" title="ÊåâÈ°∫Â∫èÊâ´Êèè"></a>ÊåâÈ°∫Â∫èÊâ´Êèè</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLIS</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.length==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            dp[i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;i;k++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(nums[i]&gt;nums[k])&#123;</span><br><span class="line">                        dp[i] = Math.max(dp[i],dp[k]+<span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            max = Math.max(max,dp[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÊåâÈúÄË¶ÅËÆ°ÁÆó"><a href="#ÊåâÈúÄË¶ÅËÆ°ÁÆó" class="headerlink" title="ÊåâÈúÄË¶ÅËÆ°ÁÆó"></a>ÊåâÈúÄË¶ÅËÆ°ÁÆó</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer[] dp;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] nums;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLIS</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.length==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.nums = nums;</span><br><span class="line">        dp = <span class="keyword">new</span> Integer[nums.length];</span><br><span class="line">        Arrays.fill(dp,-<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            max = Math.max(max,getDp(i));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDp</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(dp[i]==-<span class="number">1</span>)&#123;</span><br><span class="line">            dp[i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;i;k++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(nums[i]&gt;nums[k])&#123;</span><br><span class="line">                        dp[i] = Math.max(dp[i],getDp(k)+<span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="‰∏Ä‰∫õÊÉ≥Ê≥ï"><a href="#‰∏Ä‰∫õÊÉ≥Ê≥ï" class="headerlink" title="‰∏Ä‰∫õÊÉ≥Ê≥ï"></a>‰∏Ä‰∫õÊÉ≥Ê≥ï</h3><p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÁî±‰∫édpÁöÑÊØè‰∏™ÂÖÉÁ¥†ÈÉΩÈúÄË¶ÅÂ°´ÂÖÖÔºàÁÑ∂ÂêéÊâæÊúÄÂ§ßÂÄºÔºâÔºåËÄå‰∏îÂèØ‰ª•Êñπ‰æøÁöÑÊåâÁÖßÈ°∫Â∫èÈÅçÂéÜÔºåÊâÄ‰ª•ÊñπÊ≥ï‰∏ÄÊòæÂæóÁÆÄÂçï‰∏Ä‰∫õ</p>
<p>‰ΩÜÊòØÊúâÁöÑÈ¢òÁõÆ‰∏≠È°∫Â∫è‰∏çÊòØÂæàÂ•ΩÊâæÔºåÊØîÂ¶ÇÊúâÁöÑ‰∫åÁª¥dpÊï∞ÁªÑ‰∏≠ÔºåË¶ÅÂ°´ÂÖÖÁöÑÊòØ‰∏âËßíÂΩ¢Âå∫ÂüüÔºåÊúâÁöÑÊòØ‰ªéÂ∑¶ÂæÄÂè≥Êâ´ÔºåÊúâÁöÑÊòØ‰ªé‰∏äÂæÄ‰∏ãÊâ´ÔºåÂÖ∂ÂÆÉ‰∏Ä‰∫õÂ•áÊÄ™ÁöÑdpÂá†‰πéÊâæ‰∏çÂà∞È°∫Â∫è</p>
<p>ËÄå‰∏îÂæàÂ§öÈ¢òÁõÆ‰∏≠Âπ∂‰∏çÈúÄË¶ÅÊääÊï¥‰∏™dpÈÉΩÂ°´Êª°ÔºåÂè™ÈúÄË¶ÅÂæóÂà∞ÁâπÂÆö‰∏Ä‰∏™ÂÖÉÁ¥†Âç≥‰∏∫Á≠îÊ°àÔºåÂÖ∂ÂÆûÊ≤°ÂøÖË¶ÅÊåâÈ°∫Â∫èÊääÊâÄÊúâÁöÑÂÖÉÁ¥†ÈÉΩÁÆóÂá∫Êù•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// getDpÁúüÊòØÈùûÂ∏∏Â•óË∑Ø</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDp</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(dp[i]==-<span class="number">1</span>)&#123;</span><br><span class="line">    <span class="comment">// Ê≤°ÁÆóËøáÂ∞±ÁÆó</span></span><br><span class="line">    <span class="comment">// ÁÆóÁöÑËøáÁ®ã‰∏≠ÁªßÁª≠getDp(k)</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ÁÆóËøá‰∫ÜÁõ¥Êé•ËøîÂõû</span></span><br><span class="line">  <span class="keyword">return</span> dp[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÊâÄ‰ª•ÊÑüËßâÔºåÂæàÂÆπÊòìÊâæÂà∞È°∫Â∫è„ÄÅÊàñËÄÖÂøÖÈ°ªÂ°´Êª°ÁöÑÂèØ‰ª•Áî®ÊñπÊ≥ï‰∏ÄÔºåÂÖ∂ÂÆÉÁöÑÁõ¥Êé•getDp()ÁúÅËÑëÁªÜËÉû</p>
<h1 id="‰∏ÄÁª¥"><a href="#‰∏ÄÁª¥" class="headerlink" title="‰∏ÄÁª¥ "></a>‰∏ÄÁª¥ <h1 id="point"></h1></h1><h2 id="‰æã1-ÊúÄÈïø‰∏äÂçáÂ≠êÂ∫èÂàó-LeetCode-300"><a href="#‰æã1-ÊúÄÈïø‰∏äÂçáÂ≠êÂ∫èÂàó-LeetCode-300" class="headerlink" title="‰æã1 ÊúÄÈïø‰∏äÂçáÂ≠êÂ∫èÂàó (LeetCode 300)"></a>‰æã1 ÊúÄÈïø‰∏äÂçáÂ≠êÂ∫èÂàó (LeetCode 300)</h2><a href="https://leetcode-cn.com/problems/longest-increasing-subsequence/" title="" target="">link</a>

<h3 id="ÊèèËø∞"><a href="#ÊèèËø∞" class="headerlink" title="ÊèèËø∞"></a>ÊèèËø∞</h3><p>ÁªôÂÆö‰∏Ä‰∏™Êó†Â∫èÁöÑÊï¥Êï∞Êï∞ÁªÑÔºåÊâæÂà∞ÂÖ∂‰∏≠ÊúÄÈïø‰∏äÂçáÂ≠êÂ∫èÂàóÁöÑÈïøÂ∫¶</p>
<h3 id="Áä∂ÊÄÅË°®Á§∫"><a href="#Áä∂ÊÄÅË°®Á§∫" class="headerlink" title="Áä∂ÊÄÅË°®Á§∫"></a>Áä∂ÊÄÅË°®Á§∫</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[i] Ë°®Á§∫Á¨¨i‰∏™ÂÖÉÁ¥†ÔºàÂåÖÂê´iÔºâ‰πãÂâçÊúÄÂ§ß‰∏äÂçáÂ≠êÂ∫èÂàóÁöÑÈïøÂ∫¶</span><br></pre></td></tr></table></figure>

<h3 id="Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã"><a href="#Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã" class="headerlink" title="Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã"></a>Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[i] &#x3D; max&#123; dp[k] + 1&#125;</span><br><span class="line">ÂÖ∂‰∏≠ 0&lt;&#x3D;k&lt;i ‰∏î nums[i]&gt;nums[k]</span><br></pre></td></tr></table></figure>

<h3 id="ÂÆûÁé∞"><a href="#ÂÆûÁé∞" class="headerlink" title="ÂÆûÁé∞"></a>ÂÆûÁé∞</h3><p>ËßÅÔºö<a href="#Â°´ÂÖÖdpÊï∞ÁªÑÁöÑÊñπÂºè">Â°´ÂÖÖdpÊï∞ÁªÑÁöÑÊñπÂºè</a></p>
<h1 id="‰∫åÁª¥"><a href="#‰∫åÁª¥" class="headerlink" title="‰∫åÁª¥"></a>‰∫åÁª¥</h1><h2 id="‰æã1-ÊúÄÈïøÂÖ¨ÂÖ±Â≠êÂ∫èÂàóÈóÆÈ¢òÔºàÁÆóÊ≥ïËÆæËÆ°ÊäÄÂ∑ß‰∏éÂàÜÊûê-Ê≤ôÁâπÁâà-p130Ôºâ"><a href="#‰æã1-ÊúÄÈïøÂÖ¨ÂÖ±Â≠êÂ∫èÂàóÈóÆÈ¢òÔºàÁÆóÊ≥ïËÆæËÆ°ÊäÄÂ∑ß‰∏éÂàÜÊûê-Ê≤ôÁâπÁâà-p130Ôºâ" class="headerlink" title="‰æã1 ÊúÄÈïøÂÖ¨ÂÖ±Â≠êÂ∫èÂàóÈóÆÈ¢òÔºàÁÆóÊ≥ïËÆæËÆ°ÊäÄÂ∑ß‰∏éÂàÜÊûê Ê≤ôÁâπÁâà p130Ôºâ"></a>‰æã1 ÊúÄÈïøÂÖ¨ÂÖ±Â≠êÂ∫èÂàóÈóÆÈ¢òÔºàÁÆóÊ≥ïËÆæËÆ°ÊäÄÂ∑ß‰∏éÂàÜÊûê Ê≤ôÁâπÁâà p130Ôºâ</h2><h3 id="ÊèèËø∞-1"><a href="#ÊèèËø∞-1" class="headerlink" title="ÊèèËø∞"></a>ÊèèËø∞</h3><p>Êâæ‰∏§‰∏™Â≠óÁ¨¶‰∏≤ÁöÑÊúÄÈïøÂÖ¨ÂÖ±Â≠êÂ∫èÂàóÈïøÂ∫¶</p>
<p>Â¶ÇA=zxyxyz B=xyyzx ÂàôÊúÄÈïøÂÖ¨ÂÖ±Â≠êÂ∫èÂàó‰∏∫xyyz</p>
<h3 id="Áä∂ÊÄÅË°®Á§∫-1"><a href="#Áä∂ÊÄÅË°®Á§∫-1" class="headerlink" title="Áä∂ÊÄÅË°®Á§∫"></a>Áä∂ÊÄÅË°®Á§∫</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">‰ª§ A &#x3D; a1a2‚Ä¶anÔºåB &#x3D; b1b2‚Ä¶bn</span><br><span class="line">L[i , j] Ë°®Á§∫ a1a2‚Ä¶ai Âíå b1b2‚Ä¶bj ÁöÑÊúÄÈïøÂÖ¨ÂÖ±Â≠êÂ∫èÂàóÁöÑÈïøÂ∫¶</span><br></pre></td></tr></table></figure>

<h3 id="Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã-1"><a href="#Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã-1" class="headerlink" title="Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã"></a>Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ÂΩì A[i] &#x3D;&#x3D; B[i]ÔºåL[i , j] &#x3D; L[i-1 , j-1] + 1</span><br><span class="line">ÂΩì A[i] !&#x3D; B[i]ÔºåL[i , j] &#x3D; max&#123; L[i-1 , j] , L[i , j-1] &#125;</span><br></pre></td></tr></table></figure>

<p>eg:<br>A = horseÔºåB = ros<br>i‰∏∫2Ôºåj‰∏∫2Êó∂Ôºåo == oÔºåL[ ho , ro ] = L[ h , r ] + 1<br>i‰∏∫3Ôºåj‰∏∫3Êó∂Ôºår != sÔºåL[ hor , ros ] = max{ L[ ho , ros ] , L[ hor , ro ] }</p>
<h3 id="ÂÆûÁé∞-1"><a href="#ÂÆûÁé∞-1" class="headerlink" title="ÂÆûÁé∞"></a>ÂÆûÁé∞</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">LCS</span><span class="params">(String word1, String word2)</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">  <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[word1.length()+<span class="number">1</span>][word2.length()+<span class="number">1</span>];</span><br><span class="line">    </span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;word1.length()+<span class="number">1</span>;i++) &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;word2.length()+<span class="number">1</span>;j++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(word1.charAt(i-<span class="number">1</span>)==word2.charAt(j-<span class="number">1</span>)) &#123;</span><br><span class="line">				dp[i][j] = dp[i-<span class="number">1</span>][j-<span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				dp[i][j] = Math.max(dp[i-<span class="number">1</span>][j], dp[i][j-<span class="number">1</span>]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">  </span><br><span class="line">	<span class="keyword">return</span> dp[word1.length()][word2.length()];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="‰æã2-ÁºñËæëË∑ùÁ¶ª-LeetCode-72"><a href="#‰æã2-ÁºñËæëË∑ùÁ¶ª-LeetCode-72" class="headerlink" title="‰æã2 ÁºñËæëË∑ùÁ¶ª (LeetCode 72)"></a>‰æã2 ÁºñËæëË∑ùÁ¶ª (LeetCode 72)</h2><a href="https://leetcode-cn.com/problems/edit-distance/" title="" target="">link</a>

<h3 id="ÊèèËø∞-2"><a href="#ÊèèËø∞-2" class="headerlink" title="ÊèèËø∞"></a>ÊèèËø∞</h3><p>ÁªôÂÆö‰∏§‰∏™ÂçïËØç word1 Âíå word2ÔºåËÆ°ÁÆóÂ∞Ü word1 ËΩ¨Êç¢Êàê word2 ÊâÄ‰ΩøÁî®ÁöÑÊúÄÂ∞ëÊìç‰ΩúÊï∞</p>
<p>Êìç‰ΩúÂåÖÊã¨Ôºö</p>
<ul>
<li>ÊèíÂÖ•‰∏Ä‰∏™Â≠óÁ¨¶</li>
<li>Âà†Èô§‰∏Ä‰∏™Â≠óÁ¨¶</li>
<li>ÊõøÊç¢‰∏Ä‰∏™Â≠óÁ¨¶</li>
</ul>
<h3 id="Áä∂ÊÄÅË°®Á§∫-2"><a href="#Áä∂ÊÄÅË°®Á§∫-2" class="headerlink" title="Áä∂ÊÄÅË°®Á§∫"></a>Áä∂ÊÄÅË°®Á§∫</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">‰ª§ A &#x3D; a1a2‚Ä¶anÔºåB &#x3D; b1b2‚Ä¶bn</span><br><span class="line">L[i , j] Ë°®Á§∫ a1a2‚Ä¶ai Âíå b1b2‚Ä¶bj ÁöÑÊúÄÁü≠ÁºñËæëË∑ùÁ¶ª</span><br></pre></td></tr></table></figure>

<p>ÂíåÂÖ¨ÂÖ±Â≠êÂ∫èÂàó‰∏ÄÊ†∑</p>
<h3 id="Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã-2"><a href="#Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã-2" class="headerlink" title="Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã"></a>Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ÂΩì A[i] &#x3D;&#x3D; B[i]ÔºåL[i , j] &#x3D; L[i-1 , j-1]</span><br><span class="line">ÂΩì A[i] !&#x3D; B[i]ÔºåL[i , j] &#x3D; min&#123; L[i-1 , j-1] , L[i-1 , j] , L[i , j-1] &#125; + 1</span><br><span class="line">ÂÖ∂‰∏≠ÔºåL[i-1 , j-1]‰ª£Ë°®ÊõøÊç¢Êìç‰ΩúÔºåL[i-1 , j]‰ª£Ë°®Âà†Èô§Êìç‰ΩúÔºåL[i , j-1]‰ª£Ë°®ÊèíÂÖ•Êìç‰Ωú</span><br></pre></td></tr></table></figure>

<p>eg:<br>A = horseÔºåB = ros<br>i‰∏∫2Ôºåj‰∏∫2Êó∂Ôºåo == oÔºåL[ ho , ro ] = L[ h , r ]ÔºåÊó†ÈúÄÁªßÁª≠ÁºñËæë<br>i‰∏∫3Ôºåj‰∏∫3Êó∂Ôºår != sÔºåL[ hor , ros ] = min{ L[ ho , ro ] , L[ ho , ros ] , L[ hor , ro ] } + 1<br>L[ ho , ro ] + 1 ‰ª£Ë°®ÔºåÂú®hoÂ∑≤ÁªèÁºñËæëÊàêro‰πãÂêéÔºåÂ∞ÜrÊõøÊç¢Êàês<br>L[ ho , ros ] + 1 ‰ª£Ë°®ÔºåÂú®hoÂ∑≤ÁªèÁºñËæëÊàêros‰πãÂêéÔºåÂ∞ÜrÂà†Èô§<br>L[ hor , ro ] + 1 ‰ª£Ë°®ÔºåÂú®horÂ∑≤ÁªèÁºñËæëÊàêro‰πãÂêéÔºåÊèíÂÖ•s</p>
<h3 id="ÂÆûÁé∞-2"><a href="#ÂÆûÁé∞-2" class="headerlink" title="ÂÆûÁé∞"></a>ÂÆûÁé∞</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">minDistance</span><span class="params">(String word1, String word2)</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[word1.length()+<span class="number">1</span>][word2.length()+<span class="number">1</span>];</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;word1.length()+<span class="number">1</span>;i++) &#123;</span><br><span class="line">    	    dp[i][<span class="number">0</span>] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;word2.length()+<span class="number">1</span>;i++) &#123;</span><br><span class="line">    	    dp[<span class="number">0</span>][i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;word1.length()+<span class="number">1</span>;i++) &#123;</span><br><span class="line">	    	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;word2.length()+<span class="number">1</span>;j++) &#123;</span><br><span class="line">		    	<span class="keyword">if</span>(word1.charAt(i-<span class="number">1</span>)==word2.charAt(j-<span class="number">1</span>)) &#123;</span><br><span class="line">			    	dp[i][j] = dp[i-<span class="number">1</span>][j-<span class="number">1</span>];</span><br><span class="line">    			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">	    			<span class="keyword">int</span> min = Math.min(dp[i-<span class="number">1</span>][j], dp[i][j-<span class="number">1</span>]);</span><br><span class="line">		    		min = Math.min(min, dp[i-<span class="number">1</span>][j-<span class="number">1</span>]);</span><br><span class="line">			    	dp[i][j] = min+<span class="number">1</span>;</span><br><span class="line">			    &#125;</span><br><span class="line">    		&#125;</span><br><span class="line">	    &#125;	</span><br><span class="line">	</span><br><span class="line">	    <span class="keyword">return</span> dp[word1.length()][word2.length()];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Ê≥®ÊÑè"><a href="#Ê≥®ÊÑè" class="headerlink" title="Ê≥®ÊÑè"></a>Ê≥®ÊÑè</h3><p>ËøôÈ¢òdpÁ¨¨0Ë°åÂíåÁ¨¨0ÂàóÂàùÂßãÂåñ‰∏∫0,1,2,3‚Ä¶</p>
<h2 id="‰æã3-ÂõûÊñáÂ≠ê‰∏≤-LeetCode-647"><a href="#‰æã3-ÂõûÊñáÂ≠ê‰∏≤-LeetCode-647" class="headerlink" title="‰æã3 ÂõûÊñáÂ≠ê‰∏≤ (LeetCode 647)"></a>‰æã3 ÂõûÊñáÂ≠ê‰∏≤ (LeetCode 647)</h2><a href="https://leetcode-cn.com/problems/palindromic-substrings/" title="" target="">link</a>

<h3 id="ÊèèËø∞-3"><a href="#ÊèèËø∞-3" class="headerlink" title="ÊèèËø∞"></a>ÊèèËø∞</h3><p>ÁªüËÆ°ÁªôÂÆöÂ≠óÁ¨¶‰∏≤‰∏≠ÂõûÊñáÂ≠ê‰∏≤ÁöÑ‰∏™Êï∞</p>
<p>Â¶Ç‚Äùaaa‚Äù‰∏≠Êúâ‚Äùa‚Äù, ‚Äúa‚Äù, ‚Äúa‚Äù, ‚Äúaa‚Äù, ‚Äúaa‚Äù, ‚Äúaaa‚ÄùÂÖ±6‰∏™</p>
<h3 id="Áä∂ÊÄÅË°®Á§∫-3"><a href="#Áä∂ÊÄÅË°®Á§∫-3" class="headerlink" title="Áä∂ÊÄÅË°®Á§∫"></a>Áä∂ÊÄÅË°®Á§∫</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[i][j] Ë°®Á§∫Â≠óÁ¨¶‰∏≤ÁöÑÁ¨¨iÂà∞j‰Ωç(Âê´)ÊòØÂê¶‰∏∫ÂõûÊñá‰∏≤</span><br></pre></td></tr></table></figure>

<h3 id="Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã-3"><a href="#Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã-3" class="headerlink" title="Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã"></a>Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã</h3><p>ËßÅÊ≥®Èáä</p>
<h3 id="ÂÆûÁé∞-3"><a href="#ÂÆûÁé∞-3" class="headerlink" title="ÂÆûÁé∞"></a>ÂÆûÁé∞</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    Integer[][] dp;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countSubstrings</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s.length()==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        dp = <span class="keyword">new</span> Integer[s.length()][s.length()];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</span><br><span class="line">            Arrays.fill(dp[i],-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;s.length();j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(getDp(i,j,s)==<span class="number">1</span>)&#123;</span><br><span class="line">                    cnt++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cnt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDp</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j,String s)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(dp[i][j]==-<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i==j)&#123;</span><br><span class="line">                <span class="comment">// "a"ÊòØ</span></span><br><span class="line">                dp[i][j] = <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s.charAt(i)!=s.charAt(j))&#123;</span><br><span class="line">                <span class="comment">// "ab"„ÄÅ"a***b"‰∏çÊòØ</span></span><br><span class="line">                dp[i][j] = <span class="number">0</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(j-i==<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="comment">// "aa"ÊòØ</span></span><br><span class="line">                    dp[i][j] = <span class="number">1</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">// "a****a"</span></span><br><span class="line">                    <span class="keyword">if</span>(getDp(i+<span class="number">1</span>,j-<span class="number">1</span>,s)==<span class="number">1</span>)&#123;</span><br><span class="line">                        <span class="comment">// ‰∏≠Èó¥ÊòØÂàôÊòØ</span></span><br><span class="line">                        dp[i][j] = <span class="number">1</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        dp[i][j] = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="‰∏âÁª¥"><a href="#‰∏âÁª¥" class="headerlink" title="‰∏âÁª¥"></a>‰∏âÁª¥</h1><h2 id="‰æã1-‰∫åÊåáËæìÂÖ•ÁöÑÁöÑÊúÄÂ∞èË∑ùÁ¶ª-LeetCode-1320"><a href="#‰æã1-‰∫åÊåáËæìÂÖ•ÁöÑÁöÑÊúÄÂ∞èË∑ùÁ¶ª-LeetCode-1320" class="headerlink" title="‰æã1 ‰∫åÊåáËæìÂÖ•ÁöÑÁöÑÊúÄÂ∞èË∑ùÁ¶ª (LeetCode 1320)"></a>‰æã1 ‰∫åÊåáËæìÂÖ•ÁöÑÁöÑÊúÄÂ∞èË∑ùÁ¶ª (LeetCode 1320)</h2><a href="https://leetcode-cn.com/problems/minimum-distance-to-type-a-word-using-two-fingers/" title="" target="">link</a>

<h3 id="ÊèèËø∞-4"><a href="#ÊèèËø∞-4" class="headerlink" title="ÊèèËø∞"></a>ÊèèËø∞</h3><img src="/images/2020/screencapture2020-03-14PM4.50.56.jpg" width=400>

<p>‰∫åÊåáËæìÂÖ•Ê≥ïÈîÆÁõò‰∏äÔºåÊØè‰∏™Â≠óÊØçÂèØÁî®ÂùêÊ†áË°®Á§∫ÔºåÂ¶ÇP(2,3)</p>
<p>ÁªôÂÆö‰∏Ä‰∏™ÂæÖËæìÂÖ•Â≠óÁ¨¶‰∏≤ÔºåËÆ°ÁÆó‰ªÖÁî®‰∏§Ê†πÊâãÊåáÔºåËæìÂÖ•ËØ•Â≠óÁ¨¶‰∏≤ÁöÑÊúÄÂ∞èÁßªÂä®Ë∑ùÁ¶ªÔºàËµ∑Âßã‰ΩçÁΩÆ‰ªªÊÑèÔºå‰ª£‰ª∑‰Ωç0Ôºâ</p>
<p>Ë∑ùÁ¶ªÊåâ |x1-x2| + |y1-y2| ËÆ°ÁÆó</p>
<h3 id="Áä∂ÊÄÅË°®Á§∫-4"><a href="#Áä∂ÊÄÅË°®Á§∫-4" class="headerlink" title="Áä∂ÊÄÅË°®Á§∫"></a>Áä∂ÊÄÅË°®Á§∫</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[i][l][r] Ë°®Á§∫ËæìÂÖ•ÂÆåÁ¨¨i‰∏™Â≠óÊØçÂêéÔºåÂ∑¶Êâã‰ΩçÁΩÆ‰∏∫lÔºåÂè≥Êâã‰ΩçÁΩÆ‰∏∫r</span><br><span class="line">l„ÄÅrÂØπÂ∫îÂ≠óÊØçÁºñÂè∑ÔºåÂ¶ÇA-0,B-1</span><br></pre></td></tr></table></figure>

<h3 id="Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã-4"><a href="#Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã-4" class="headerlink" title="Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã"></a>Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ËÆ∞Á¨¨i‰∏™Â≠óÊØç‰ΩçcurÔºåÁ¨¨i-1‰∏™Â≠óÊØç‰∏∫pre</span><br><span class="line"></span><br><span class="line">1.Â∑¶ÊâãÁßªÂä®Âà∞curÂ§Ñ</span><br><span class="line">	- ÁßªÂä®ÂâçÂ∑¶ÊâãÂú®preÂ§ÑÔºåÂàôÂ∑¶ÊâãÂøÖÁÑ∂‰ªépreÁßªÂà∞curÔºåÂè≥ÊâãÂèØ‰ª•Âú®‰ªªÊÑè‰ΩçÁΩÆm</span><br><span class="line">	   dp[i][cur][m] &#x3D; dp[i-1][pre][m] + dis(pre,cur);</span><br><span class="line">	- ÁßªÂä®ÂâçÂè≥ÊâãÂú®preÂ§Ñ(Âç≥m&#x3D;&#x3D;pre)ÔºåÂàôÂ∑¶ÊâãÂèØ‰ª•‰ªé‰ªªÊÑè‰ΩçÁΩÆnÁßªÂà∞cur</span><br><span class="line">	   dp[i][cur][m] &#x3D; dp[i-1][n][m] + dis(n,cur);</span><br><span class="line"></span><br><span class="line">ÊïÖ dp[i][cur][m] &#x3D; min&#123; dp[i-1][pre][m] , dp[i-1][n][pre] &#125;</span><br><span class="line">ÂÖ∂‰∏≠mÂèñÂÄº0~26ÔºånÂèñÂÄº0~26</span><br><span class="line"></span><br><span class="line">2.Âè≥ÊâãÁßªÂä®Âà∞curÂ§Ñ</span><br><span class="line">	- ÁßªÂä®ÂâçÂè≥ÊâãÂú®preÂ§ÑÔºåÂàôÂè≥ÊâãÂøÖÁÑ∂‰ªépreÁßªÂà∞curÔºåÂ∑¶ÊâãÂèØ‰ª•Âú®‰ªªÊÑè‰ΩçÁΩÆm</span><br><span class="line">	   dp[i][m][cur] &#x3D; dp[i-1][m][pre] + dis(pre,cur);</span><br><span class="line">	- ÁßªÂä®ÂâçÂ∑¶ÊâãÂú®preÂ§Ñ(Âç≥m&#x3D;&#x3D;pre)ÔºåÂàôÂè≥ÊâãÂèØ‰ª•‰ªé‰ªªÊÑè‰ΩçÁΩÆnÁßªÂà∞cur</span><br><span class="line">	   dp[i][m][cur] &#x3D; dp[i-1][m][n] + dis(n,cur);</span><br><span class="line"></span><br><span class="line">Âêå‰∏äÔºådp[i][cur][m] &#x3D; min&#123; dp[i-1][pre][m] , dp[i-1][n][pre] &#125;</span><br></pre></td></tr></table></figure>

<h3 id="ÂÆûÁé∞-4"><a href="#ÂÆûÁé∞-4" class="headerlink" title="ÂÆûÁé∞"></a>ÂÆûÁé∞</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minimumDistance</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] words = <span class="keyword">new</span> <span class="keyword">int</span>[word.length()];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;word.length();i++)&#123;</span><br><span class="line">            words[i] = word.charAt(i) - <span class="string">'A'</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[][][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[words.length][<span class="number">26</span>][<span class="number">26</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)&#123;</span><br><span class="line">            <span class="comment">// Â∑¶ÊâãÂºÄÂßã</span></span><br><span class="line">            dp[<span class="number">0</span>][words[<span class="number">0</span>]][i] = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">// Âè≥ÊâãÂºÄÂßã</span></span><br><span class="line">            dp[<span class="number">0</span>][i][words[<span class="number">0</span>]] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;words.length;i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> cur = words[i];</span><br><span class="line">            <span class="keyword">int</span> pre = words[i-<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> dis = calDis(cur,pre);</span><br><span class="line">            <span class="comment">// Ëá≥Â∞ëÊúâ‰∏ÄÂè™ÊâãÂú®curÔºåÂè¶‰∏ÄÂè™ÊâãÂèØ‰ª•Âú®‰ªªÊÑè‰ΩçÁΩÆ</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> m=<span class="number">0</span>;m&lt;<span class="number">26</span>;m++)&#123;</span><br><span class="line">                <span class="comment">// Âè≥Êâã‰∏çÂä®ÔºåÂ∑¶Êâã‰ªépreÁßªÂà∞curÔºà‰∏ä‰∏Ä‰∏™Â≠óÁ¨¶ÊòØÂ∑¶ÊâãÊåâÁöÑÔºâ</span></span><br><span class="line">                dp[i][cur][m] = dp[i-<span class="number">1</span>][pre][m] + dis;</span><br><span class="line">                <span class="comment">// Â∑¶Êâã‰∏çÂä®ÔºåÂè≥Êâã‰ªépreÁßªÂà∞curÔºà‰∏ä‰∏Ä‰∏™Â≠óÁ¨¶ÊòØÂè≥ÊâãÊåâÁöÑÔºâ</span></span><br><span class="line">                dp[i][m][cur] = dp[i-<span class="number">1</span>][m][pre] + dis;</span><br><span class="line">                <span class="keyword">if</span>(m==pre)&#123;</span><br><span class="line">                    <span class="comment">// ÁßªÂä®ÂâçÂè¶‰∏ÄÂè™ÊâãÂàöÂ•ΩÂú®preÂ§Ñ</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> n=<span class="number">0</span>;n&lt;<span class="number">26</span>;n++)&#123;</span><br><span class="line">                        <span class="keyword">int</span> dis2 = calDis(n,cur);</span><br><span class="line">                        <span class="comment">// Âè≥Êâã‰∏çÂä®ÔºåÂ∑¶Êâã‰ªé‰ªªÊÑè‰ΩçÁΩÆÁßªÂà∞curÔºà‰∏ä‰∏Ä‰∏™Â≠óÁ¨¶ÊòØÂè≥ÊâãÊåâÁöÑÔºâ</span></span><br><span class="line">                        dp[i][cur][m] = Math.min(dp[i][cur][m],dp[i-<span class="number">1</span>][n][m]+dis2);</span><br><span class="line">                        <span class="comment">// Â∑¶Êâã‰∏çÂä®ÔºåÂè≥Êâã‰ªé‰ªªÊÑè‰ΩçÁΩÆÁßªÂà∞curÔºà‰∏ä‰∏Ä‰∏™Â≠óÁ¨¶ÊòØÂ∑¶ÊâãÊåâÁöÑÔºâ</span></span><br><span class="line">                        dp[i][m][cur] = Math.min(dp[i][m][cur],dp[i-<span class="number">1</span>][m][n]+dis2);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> min = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">int</span> last = words[words.length-<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> m=<span class="number">0</span>;m&lt;<span class="number">26</span>;m++)&#123;</span><br><span class="line">            min = Math.min(min,dp[words.length-<span class="number">1</span>][last][m]);</span><br><span class="line">            min = Math.min(min,dp[words.length-<span class="number">1</span>][m][last]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> min;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calDis</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x1 = a / <span class="number">6</span>, y1 = a % <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">int</span> x2 = b / <span class="number">6</span>, y2 = b % <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)(Math.abs(x1 - x2)) + (<span class="keyword">int</span>)(Math.abs(y1 - y2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="‰ºòÂåñ‰∏∫‰∫åÁª¥"><a href="#‰ºòÂåñ‰∏∫‰∫åÁª¥" class="headerlink" title="‰ºòÂåñ‰∏∫‰∫åÁª¥"></a>‰ºòÂåñ‰∏∫‰∫åÁª¥</h3><p>Áî±‰∫é‰∏§Âè™ÊâãÊòØÂÆåÂÖ®ÂØπÁß∞ÁöÑÔºå‰∏çÈúÄË¶ÅÁü•ÈÅìÂÖ∑‰ΩìÂì™Âè™ÊâãÂú®curÂ§ÑÔºåÂè™Ë¶ÅÊúâ‰∏ÄÂè™Âú®Â∞±Ë°å‰∫Ü</p>
<h4 id="Áä∂ÊÄÅË°®Á§∫-5"><a href="#Áä∂ÊÄÅË°®Á§∫-5" class="headerlink" title="Áä∂ÊÄÅË°®Á§∫"></a>Áä∂ÊÄÅË°®Á§∫</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[i][rest] Ë°®Á§∫‰∏ÄÂè™ÊâãÂú®curÔºåÂè¶‰∏ÄÂè™ÊâãÂú®restÂ§ÑÊó∂ÁöÑÊúÄÂ∞èÁßªÂä®Ë∑ùÁ¶ª</span><br></pre></td></tr></table></figure>

<h4 id="Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã-5"><a href="#Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã-5" class="headerlink" title="Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã"></a>Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">‰∏ÄÂè™Êâã‰ªépreÁßªÂä®Âà∞curÔºåÂè¶‰∏ÄÂè™ÊâãÈöè‰æøÂú®Âì™</span><br><span class="line">dp[i][anywhere] &#x3D; dp[i-1][anywhere] + dis(pre,cur)</span><br><span class="line"></span><br><span class="line">Ëã•Âè¶‰∏ÄÂè™ÊâãÊÅ∞Â•ΩÂú®preÂ§ÑÔºåËøôÂè™ÊâãÂèØ‰ª•‰ªé‰ªª‰ΩïÂú∞ÊñπÁßªÂä®Âà∞cur</span><br><span class="line">dp[i][pre] &#x3D; dp[i-1][anywhere] + dis(anywhere,cur)</span><br></pre></td></tr></table></figure>

<h4 id="ÂÆûÁé∞-5"><a href="#ÂÆûÁé∞-5" class="headerlink" title="ÂÆûÁé∞"></a>ÂÆûÁé∞</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minimumDistance</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] words = <span class="keyword">new</span> <span class="keyword">int</span>[word.length()];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;word.length();i++)&#123;</span><br><span class="line">            words[i] = word.charAt(i) - <span class="string">'A'</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[words.length][<span class="number">26</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;words.length;i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> cur = words[i];</span><br><span class="line">            <span class="keyword">int</span> pre = words[i-<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> dis = calDis(cur,pre);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> m=<span class="number">0</span>;m&lt;<span class="number">26</span>;m++)&#123;</span><br><span class="line">                <span class="comment">// ‰∏ÄÂè™Êâã‰ªépreÁßªÂä®Âà∞curÔºåÂè¶‰∏ÄÂè™ÊâãÈöè‰æøÂú®Âì™</span></span><br><span class="line">                dp[i][m] = dp[i-<span class="number">1</span>][m] + dis;</span><br><span class="line">                <span class="keyword">if</span>(m==pre)&#123;</span><br><span class="line">                    <span class="comment">// Âè¶‰∏ÄÂè™ÊâãÊÅ∞Â•ΩÂú®preÂ§ÑÔºåËøôÂè™ÊâãÂèØ‰ª•‰ªé‰ªª‰ΩïÂú∞ÊñπÁßªÂä®Âà∞cur</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> n=<span class="number">0</span>;n&lt;<span class="number">26</span>;n++)&#123;</span><br><span class="line">                        dp[i][m] = Math.min(dp[i][m],dp[i-<span class="number">1</span>][n]+calDis(n,cur));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> min = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> m=<span class="number">0</span>;m&lt;<span class="number">26</span>;m++)&#123;</span><br><span class="line">            min = Math.min(min,dp[words.length-<span class="number">1</span>][m]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> min;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calDis</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x1 = a / <span class="number">6</span>, y1 = a % <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">int</span> x2 = b / <span class="number">6</span>, y2 = b % <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)(Math.abs(x1 - x2)) + (<span class="keyword">int</span>)(Math.abs(y1 - y2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>‰ºòÂåñÂâç ÊâßË°åÁî®Êó∂Ôºö<strong>19 ms</strong> ÂÜÖÂ≠òÊ∂àËÄóÔºö<strong>42.6 MB</strong></p>
<p>‰ºòÂåñÂêé ÊâßË°åÁî®Êó∂Ôºö<strong>7 ms</strong> ÂÜÖÂ≠òÊ∂àËÄóÔºö<strong>38.1 MB</strong></p>
<p>‰πü‰∏çÂ§öÁöÑÊ†∑Â≠ê‚Ä¶‰ΩÜÊòØÊÄùË∑ØÁÆÄÂçïÂ§ö‰∫Ü</p>
<h1 id="Áä∂ÊÄÅÂéãÁº©"><a href="#Áä∂ÊÄÅÂéãÁº©" class="headerlink" title="Áä∂ÊÄÅÂéãÁº©"></a>Áä∂ÊÄÅÂéãÁº©</h1><p>Â∞ÜÁä∂ÊÄÅÁî®‰∫åËøõÂà∂‰∏≤Ë°®Á§∫Ôºå‰∫åËøõÂà∂‰∏≤‰ª•intÂΩ¢Âºè‰Ωú‰∏∫‰∏ãÊ†á</p>
<h2 id="‰æã1-ÂèÇÂä†ËÄÉËØïÁöÑÊúÄÂ§ßÂ≠¶ÁîüÊï∞-LeetCode-1349"><a href="#‰æã1-ÂèÇÂä†ËÄÉËØïÁöÑÊúÄÂ§ßÂ≠¶ÁîüÊï∞-LeetCode-1349" class="headerlink" title="‰æã1 ÂèÇÂä†ËÄÉËØïÁöÑÊúÄÂ§ßÂ≠¶ÁîüÊï∞ (LeetCode 1349)"></a>‰æã1 ÂèÇÂä†ËÄÉËØïÁöÑÊúÄÂ§ßÂ≠¶ÁîüÊï∞ (LeetCode 1349)</h2><a href="https://leetcode-cn.com/problems/maximum-students-taking-exam/" title="" target="">link</a>

<h3 id="ÊèèËø∞-5"><a href="#ÊèèËø∞-5" class="headerlink" title="ÊèèËø∞"></a>ÊèèËø∞</h3><img src="/images/2020/screencapture2020-03-13PM5.17.37.jpg">

<ul>
<li>ÊïôÂÆ§ÈáåÊúâÁöÑÂ∫ß‰ΩçÊòØÂùèÁöÑ</li>
<li>Â≠¶ÁîüÂèØ‰ª•ÁúãÂà∞Â∑¶„ÄÅÂè≥„ÄÅÂ∑¶‰∏ä„ÄÅÂè≥‰∏äÊñπÂêëÁöÑËØïÂç∑</li>
</ul>
<p>ËÆ°ÁÆóËØ•ËÄÉÂú∫ÂèØ‰ª•ÂÆπÁ∫≥ÁöÑ‰∏ÄËµ∑ÂèÇÂä†ËÄÉËØï‰∏îÊó†Ê≥ï‰ΩúÂºäÁöÑÊúÄÂ§ßÂ≠¶Áîü‰∫∫Êï∞</p>
<h3 id="Áä∂ÊÄÅÂéãÁº©-1"><a href="#Áä∂ÊÄÅÂéãÁº©-1" class="headerlink" title="Áä∂ÊÄÅÂéãÁº©"></a>Áä∂ÊÄÅÂéãÁº©</h3><p>Áî®‰∏Ä‰∏™‰∫åËøõÂà∂‰∏≤Ë°®Á§∫‰∏ÄË°å‰∏≠ÊØè‰∏™‰ΩçÁΩÆÊúâÊ≤°Êúâ‰∫∫Âùê</p>
<p>Â¶Ç 0011 Ë°®Á§∫ Êó†Êó†ÊúâÊúâÔºåËÆ∞‰∏∫3</p>
<h3 id="Áä∂ÊÄÅË°®Á§∫-6"><a href="#Áä∂ÊÄÅË°®Á§∫-6" class="headerlink" title="Áä∂ÊÄÅË°®Á§∫"></a>Áä∂ÊÄÅË°®Á§∫</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[row][pre] Ë°®Á§∫ÂΩìrow-1Ë°åÁöÑÂùêÊ≥ï‰∏∫preÊó∂ÔºåÁ¨¨rowË°åÂèäÂêéÈù¢ÊâÄÊúâË°åÊúÄÂ§öÂùêÂ§öÂ∞ë‰∫∫</span><br></pre></td></tr></table></figure>

<p>ÂÖ∂‰∏≠ÔºåpreÂàùÂßãÂåñÁöÑÂ§ßÂ∞è‰∏∫ 1 &lt;&lt; ÂàóÊï∞</p>
<p>Â¶Ç Êúâ6ÂàóÔºåÊúÄÂ§ö 2 ^ 6 ÁßçÂùêÊ≥ïÔºåÂç≥ 1 &lt;&lt; 6</p>
<h3 id="Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã-6"><a href="#Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã-6" class="headerlink" title="Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã"></a>Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[row][pre] &#x3D; max&#123; dp[row+1][cur] + Integer.bitCount(cur) &#125;</span><br><span class="line">ÂÖ∂‰∏≠curÊòØrowË°åÊâÄÊúâÂèØË°åÁä∂ÊÄÅ</span><br></pre></td></tr></table></figure>

<p>ÊØèÊ¨°ÈúÄÂÖàÂà§Êñ≠ÂùêÊ≥ï‰∏∫ cur ÊòØÂê¶ÂèØË°å</p>
<h3 id="ÁªìÊûú"><a href="#ÁªìÊûú" class="headerlink" title="ÁªìÊûú"></a>ÁªìÊûú</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dp[0][0] Âç≥‰∏∫ Á¨¨-1Ë°åÊ≤°‰∫∫ÂùêÊó∂ÔºåÁ¨¨1Ë°åÂèäÂêéÈù¢ÊâÄÊúâË°åÊúÄÂ§öÂùêÁöÑ‰∫∫Êï∞</span><br></pre></td></tr></table></figure>

<h3 id="ÂÆûÁé∞-6"><a href="#ÂÆûÁé∞-6" class="headerlink" title="ÂÆûÁé∞"></a>ÂÆûÁé∞</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">char</span>[][] seats;</span><br><span class="line">    <span class="keyword">private</span> Integer[][] dp;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxStudents</span><span class="params">(<span class="keyword">char</span>[][] seats)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.seats = seats;</span><br><span class="line">        dp = <span class="keyword">new</span> Integer[seats.length][<span class="number">1</span> &lt;&lt; seats[<span class="number">0</span>].length];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ret = getDp(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDp</span><span class="params">(<span class="keyword">int</span> row,<span class="keyword">int</span> pre)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(row == seats.length)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(dp[row][pre] == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">// ÈÅçÂéÜrowË°åÊâÄÊúâÂùêÊ≥ï</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;dp[<span class="number">0</span>].length;i++)&#123;</span><br><span class="line">                <span class="comment">// Ê£ÄÊü•ÊòØÂê¶Á¨¶ÂêàË¶ÅÊ±Ç</span></span><br><span class="line">                <span class="keyword">if</span>(isValid(row,pre,i))&#123;</span><br><span class="line">                    <span class="keyword">int</span> backNum = getDp(row+<span class="number">1</span>,i);     <span class="comment">// ÂêéÊéíËÉΩÂùêÂ§öÂ∞ë</span></span><br><span class="line">                    <span class="keyword">int</span> curNum = Integer.bitCount(i); <span class="comment">// Êú¨ÊéíËÉΩÂùêÂ§öÂ∞ë</span></span><br><span class="line">                    res = Math.max(res,backNum+curNum);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            dp[row][pre] = res;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[row][pre];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// Âà§Êñ≠ÂΩìÁ¨¨row-1Ë°åÂùêÊ≥ï‰∏∫preÊó∂ÔºårowË°åÂùêÊ≥ï‰∏∫curÊòØÂê¶ÂèØË°å</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> pre, <span class="keyword">int</span> cur)</span> </span>&#123; <span class="comment">//... &#125;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode.337 ÊâìÂÆ∂Âä´Ëàç</title>
    <url>/2020/03/12/exercise/</url>
    <content><![CDATA[<a href="https://leetcode-cn.com/problems/house-robber-iii/" title="" target="">È¢òÁõÆÂú∞ÂùÄ</a>

<h1 id="Êö¥ÂäõÊä¢Âä´"><a href="#Êö¥ÂäõÊä¢Âä´" class="headerlink" title="Êö¥ÂäõÊä¢Âä´"></a>Êö¥ÂäõÊä¢Âä´</h1><p>ÂÜôÂá∫Êù•ÂÄíÊòØÊå∫Âø´ÔºåÁªìÊûúÂèëÁé∞Êó∂Èó¥ÁàÜÁÇ∏</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rob</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Math.max(find(root,<span class="keyword">true</span>),find(root,<span class="keyword">false</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(TreeNode root, <span class="keyword">boolean</span> isGap)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(!isGap)&#123;</span><br><span class="line">            <span class="comment">// Êú¨Â±ÇÊä¢Ôºå‰∏ãÂ±Ç‰∏çËÉΩÊä¢</span></span><br><span class="line">            ret+=root.val;</span><br><span class="line">            ret+=find(root.left,<span class="keyword">false</span>);</span><br><span class="line">            ret+=find(root.right,<span class="keyword">false</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">int</span> next1 = Math.max(find(root.left,<span class="keyword">true</span>),find(root.left,<span class="keyword">false</span>));</span><br><span class="line">            <span class="keyword">int</span> next2 = Math.max(find(root.right,<span class="keyword">true</span>),find(root.right,<span class="keyword">false</span>));</span><br><span class="line">            ret = next1 + next2;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ÊâßË°åÁî®Êó∂Ôºö2817 ms</span><br><span class="line">ÂÜÖÂ≠òÊ∂àËÄóÔºö39.3 MB</span><br></pre></td></tr></table></figure>

<p>ËøôÊ†∑ÂÜôÊØèÊ¨°ÈÉΩÈÄíÂΩíÊâæ‰∫ÜËá≥Â∞ë2Ê¨°„ÄÅÁîöËá≥4Ê¨°Â≠êËäÇÁÇπ</p>
<p>Áõ∏ÂΩì‰∫éÊää‰∫åÂèâÊ†ëÁúÅ‰∏ãÊù•ÁöÑlogÂèàÁªôÁøªÂÄç‰πòÂõûÂéª‰∫Ü</p>
<h1 id="Êú∫Êô∫ÁöÑÂä´Âå™"><a href="#Êú∫Êô∫ÁöÑÂä´Âå™" class="headerlink" title="Êú∫Êô∫ÁöÑÂä´Âå™"></a>Êú∫Êô∫ÁöÑÂä´Âå™</h1><p>Áúã‰∫ÜÈ¢òËß£‰∏≠‰∏ÄÊ¨°ËøîÂõû2ÁßçÊÉÖÂÜµÔºå‰øÆÊîπ‰∏Ä‰∏ã</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rob</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] ans = find(root);</span><br><span class="line">        <span class="keyword">return</span> Math.max(ans[<span class="number">0</span>],ans[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] find(TreeNode root)&#123;</span><br><span class="line">        <span class="comment">// ret0-Êú¨Â±Ç‰∏çÊä¢Ôºõret1-Êú¨Â±ÇÊä¢</span></span><br><span class="line">        <span class="keyword">int</span>[] ret = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(root==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> ret;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span>[] left = find(root.left);</span><br><span class="line">        <span class="keyword">int</span>[] right = find(root.right);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ‰∏ãÂ±ÇÁà±Êä¢‰∏çÊä¢</span></span><br><span class="line">        ret[<span class="number">0</span>] = Math.max(left[<span class="number">0</span>],left[<span class="number">1</span>]) + Math.max(right[<span class="number">0</span>],right[<span class="number">1</span>]);</span><br><span class="line">        <span class="comment">// ‰∏ãÂ±Ç‰∏çËÉΩÊä¢</span></span><br><span class="line">        ret[<span class="number">1</span>] = root.val + left[<span class="number">0</span>] + right[<span class="number">0</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ÊâßË°åÁî®Êó∂Ôºö1 ms</span><br><span class="line">ÂÜÖÂ≠òÊ∂àËÄóÔºö41.6 MB</span><br></pre></td></tr></table></figure>

<p>ËøôÊ†∑Â∞±Âè™ÈÅçÂéÜ‰∫Ü1Ê¨°</p>
<h1 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h1><p>ÈÄíÂΩí‰∏≠Â¶ÇÊûúË¶ÅÂàÜÊÉÖÂÜµËÆ®ËÆ∫Ôºå‰∏ÄÊ¨°ËøîÂõûÂ§ö‰∏™ÁªìÊûúÔºå‰∏çË¶ÅÂ§öÊ¨°Ë∞ÉÁî®ÈÄíÂΩí</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>Android 10 ÂÜôÊñá‰ª∂ÊùÉÈôêÈóÆÈ¢ò</title>
    <url>/2020/03/12/debug-android/</url>
    <content><![CDATA[<h1 id="bugÊèèËø∞"><a href="#bugÊèèËø∞" class="headerlink" title="bugÊèèËø∞"></a>bugÊèèËø∞</h1><p>Êç¢ÊâãÊú∫‰πãÂêé‰∏Ä‰∏™‰ª•ÂâçÊ≤°ÊØõÁóÖÁöÑÂÜôÊñá‰ª∂Êìç‰ΩúÂÜô‰∏ç‰∫Ü‰∫Ü<br>‰º∞Êë∏ÁùÄÊòØÁâàÊú¨ÈóÆÈ¢ò</p>
<h1 id="Ëß£ÂÜ≥ÊñπÊ≥ï"><a href="#Ëß£ÂÜ≥ÊñπÊ≥ï" class="headerlink" title="Ëß£ÂÜ≥ÊñπÊ≥ï"></a>Ëß£ÂÜ≥ÊñπÊ≥ï</h1><p>AndroidManifest.xml‰∏≠ÔºåapplicationÊ†áÁ≠æ‰∏≠Âä†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">android:requestLegacyExternalStorage&#x3D;&quot;true&quot;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ref:<br><a href="https://blog.csdn.net/weixin_40093242/article/details/104067573?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task" target="_blank" rel="noopener">https://blog.csdn.net/weixin_40093242/article/details/104067573?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Debug</category>
      </categories>
  </entry>
  <entry>
    <title>SpringÁ¨îËÆ∞10 AOP</title>
    <url>/2020/03/12/note-spring-10/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p56~65</p>
</blockquote>
<hr>
<h1 id="AOPÊ¶ÇËø∞"><a href="#AOPÊ¶ÇËø∞" class="headerlink" title="AOPÊ¶ÇËø∞"></a>AOPÊ¶ÇËø∞</h1><p>Aspect Oriented Programming Èù¢ÂêëÂàáÈù¢ÁºñÁ®ã</p>
<ul>
<li><p>Êâ©Â±ïÂäüËÉΩ‰∏çÈÄöËøá‰øÆÊîπÊ∫ê‰ª£Á†ÅÂÆûÁé∞</p>
</li>
<li><p>AOPÈááÂèñÊ®™ÂêëÊäΩÂèñÊú∫Âà∂ÔºåÂèñ‰ª£‰∫Ü‰º†ÁªüÁöÑÁ∫µÂêëÁªßÊâø‰ΩìÁ≥ªÈáçÂ§çÊÄß‰ª£Á†Å</p>
</li>
<li><p>Â∫ïÂ±Ç‰ΩøÁî®Âä®ÊÄÅ‰ª£ÁêÜÊñπÊ≥ïÂÆûÁé∞</p>
<ul>
<li>ÊúâÊé•Âè£Êó∂Ôºå‰ΩøÁî®jdkÂä®ÊÄÅ‰ª£ÁêÜÔºåÂàõÂª∫ÂíåÊé•Âè£ÂÆûÁé∞Âπ≥Á∫ßÁöÑ‰ª£ÁêÜÂØπË±°</li>
<li>Êó†Êé•Âè£Êó∂Ôºå‰ΩøÁî®cglibÂä®ÊÄÅ‰ª£ÁêÜÔºåÂàõÂª∫Á±ªÁöÑÂ≠êÁ±ªÁöÑ‰ª£ÁêÜÂØπË±°</li>
</ul>
</li>
</ul>
<h2 id="‰ΩúÁî®Âèä‰ºòÂäø"><a href="#‰ΩúÁî®Âèä‰ºòÂäø" class="headerlink" title="‰ΩúÁî®Âèä‰ºòÂäø"></a>‰ΩúÁî®Âèä‰ºòÂäø</h2><p>‰ΩúÁî®Ôºö</p>
<ul>
<li>Âú®Á®ãÂ∫èËøêË°åÊúüÈó¥Ôºå‰∏ç‰øÆÊîπÊ∫êÁ†ÅÂØπÂ∑≤ÊúâÊñπÊ≥ïËøõË°åÂ¢ûÂº∫</li>
</ul>
<p>‰ºòÂäøÔºö</p>
<ul>
<li>ÂáèÂ∞ëÈáçÂ§ç‰ª£Á†Å</li>
<li>ÊèêÈ´òÂºÄÂèëÊïàÁéá</li>
<li>Áª¥Êä§Êñπ‰æø</li>
</ul>
<h1 id="Spring‰∏≠ÁöÑAOP"><a href="#Spring‰∏≠ÁöÑAOP" class="headerlink" title="Spring‰∏≠ÁöÑAOP"></a>Spring‰∏≠ÁöÑAOP</h1><h2 id="Áõ∏ÂÖ≥ÊúØËØ≠"><a href="#Áõ∏ÂÖ≥ÊúØËØ≠" class="headerlink" title="Áõ∏ÂÖ≥ÊúØËØ≠"></a>Áõ∏ÂÖ≥ÊúØËØ≠</h2><h3 id="Joinpoint-ËøûÊé•ÁÇπ"><a href="#Joinpoint-ËøûÊé•ÁÇπ" class="headerlink" title="Joinpoint ËøûÊé•ÁÇπ"></a>Joinpoint ËøûÊé•ÁÇπ</h3><p>Á±ª‰∏≠ÂèØ‰ª•Ë¢´Â¢ûÂº∫ÁöÑÊñπÊ≥ï</p>
<h3 id="Pointcut-ÂàáÂÖ•ÁÇπ"><a href="#Pointcut-ÂàáÂÖ•ÁÇπ" class="headerlink" title="Pointcut ÂàáÂÖ•ÁÇπ"></a>Pointcut ÂàáÂÖ•ÁÇπ</h3><p>Á±ª‰∏≠ÂÆûÈôÖÂ¢ûÂº∫ÁöÑÊñπÊ≥ï</p>
<h3 id="Advice-ÈÄöÁü•-Â¢ûÂº∫"><a href="#Advice-ÈÄöÁü•-Â¢ûÂº∫" class="headerlink" title="Advice ÈÄöÁü•/Â¢ûÂº∫"></a>Advice ÈÄöÁü•/Â¢ûÂº∫</h3><p>ÂàáÂÖ•ÁÇπ‰∏äÊâ©Â±ïÁöÑÂäüËÉΩ</p>
<ul>
<li>ÂâçÁΩÆÂ¢ûÂº∫ÔºöÂú®ÊñπÊ≥ï‰πãÂâçÊâßË°å</li>
<li>ÂêéÁΩÆÂ¢ûÂº∫ÔºöÂú®ÊñπÊ≥ïÊ≠£Â∏∏ÊâßË°å‰πãÂêéÊâßË°å</li>
<li>ÊúÄÁªàÂ¢ûÂº∫ÔºöÂú®ÊúÄÂêéÊâßË°åÔºåÊó†ËÆ∫ÊòØÂê¶ÊúâÂºÇÂ∏∏</li>
<li>ÁéØÁªïÂ¢ûÂº∫ÔºöÂú®‰πãÂâçÂíå‰πãÂêéÊâßË°å</li>
<li>ÂºÇÂ∏∏Â¢ûÂº∫ÔºöÊñπÊ≥ïÂá∫Áé∞ÂºÇÂ∏∏Êó∂ÊâßË°å</li>
</ul>
<h3 id="Introduction-Âºï‰ªã"><a href="#Introduction-Âºï‰ªã" class="headerlink" title="Introduction Âºï‰ªã"></a>Introduction Âºï‰ªã</h3><p>‰∏ÄÁßçÁâπÊÆäÁöÑÂ¢ûÂº∫ÔºåÂú®‰∏ç‰øÆÊîπÁ±ª‰ª£Á†ÅÁöÑÂâçÊèê‰∏ãÔºåÂèØ‰ª•Âú®ËøêË°åÊúüÈó¥‰∏∫Á±ªÂä®ÊÄÅÂú∞Ê∑ªÂä†‰∏Ä‰∫õÊñπÊ≥ïÊàñField</p>
<h3 id="Target-ÁõÆÊ†áÂØπË±°"><a href="#Target-ÁõÆÊ†áÂØπË±°" class="headerlink" title="Target ÁõÆÊ†áÂØπË±°"></a>Target ÁõÆÊ†áÂØπË±°</h3><p>Ë¶ÅÂ¢ûÂº∫ÁöÑÁ±ª</p>
<h3 id="Weaving-ÁªáÂÖ•"><a href="#Weaving-ÁªáÂÖ•" class="headerlink" title="Weaving ÁªáÂÖ•"></a>Weaving ÁªáÂÖ•</h3><p>ÊääÂ¢ûÂº∫Â∫îÁî®Âà∞ÁõÆÊ†áÂØπË±°ÁöÑËøáÁ®ã</p>
<h3 id="Proxy-‰ª£ÁêÜ"><a href="#Proxy-‰ª£ÁêÜ" class="headerlink" title="Proxy ‰ª£ÁêÜ"></a>Proxy ‰ª£ÁêÜ</h3><p>‰∏Ä‰∏™Á±ªË¢´AOPÁªáÂÖ•Â¢ûÂº∫ÂêéÔºåÂ∞±‰∫ßÁîü‰∏Ä‰∏™ÁªìÊûú‰ª£ÁêÜÁ±ª</p>
<h3 id="Aspect-ÂàáÈù¢"><a href="#Aspect-ÂàáÈù¢" class="headerlink" title="Aspect ÂàáÈù¢"></a>Aspect ÂàáÈù¢</h3><p>ÂàáÂÖ•ÁÇπ + ÈÄöÁü•/Âºï‰ªã</p>
<h1 id="SpringÂü∫‰∫éXMLÁöÑAOPÈÖçÁΩÆ"><a href="#SpringÂü∫‰∫éXMLÁöÑAOPÈÖçÁΩÆ" class="headerlink" title="SpringÂü∫‰∫éXMLÁöÑAOPÈÖçÁΩÆ"></a>SpringÂü∫‰∫éXMLÁöÑAOPÈÖçÁΩÆ</h1><h2 id="ÈÖçÁΩÆÊ≠•È™§"><a href="#ÈÖçÁΩÆÊ≠•È™§" class="headerlink" title="ÈÖçÁΩÆÊ≠•È™§"></a>ÈÖçÁΩÆÊ≠•È™§</h2><ol>
<li><p>ÈÖçÁΩÆÂ¢ûÂº∫Bean</p>
</li>
<li><p>‰ΩøÁî®aop:configÊ†áÁ≠æË°®ÊòéÂºÄÂßãAOPÁöÑÈÖçÁΩÆ</p>
</li>
<li><p>‰ΩøÁî®aop:aspectÊ†áÁ≠æË°®ÊòéÈÖçÁΩÆÂàáÈù¢</p>
<p>idÂ±ûÊÄßÔºöÊòØÁªôÂàáÈù¢Êèê‰æõ‰∏Ä‰∏™ÂîØ‰∏ÄÊ†áËØÜ<br>refÂ±ûÊÄßÔºöÊòØÊåáÂÆöÈÄöÁü•Á±ªbeanÁöÑId</p>
</li>
<li><p>Âú®aop:aspectÊ†áÁ≠æÁöÑÂÜÖÈÉ®‰ΩøÁî®ÂØπÂ∫îÊ†áÁ≠æÊù•ÈÖçÁΩÆÈÄöÁü•ÁöÑÁ±ªÂûã</p>
<p>aop:beforeÔºöË°®Á§∫ÈÖçÁΩÆÂâçÁΩÆÈÄöÁü•ÔºàÂÆû‰æã‰∏≠ËÆ©printLogÊñπÊ≥ïÂú®ÂàáÂÖ•ÁÇπÊñπÊ≥ïÂâçÊâßË°åÔºâ<br>methodÂ±ûÊÄßÔºöÁî®‰∫éÊåáÂÆöÁ±ª‰∏≠Âì™‰∏™ÊñπÊ≥ïÊòØÂâçÁΩÆÈÄöÁü•<br>pointcutÂ±ûÊÄßÔºöÁî®‰∫éÊåáÂÆöÂàáÂÖ•ÁÇπË°®ËææÂºèÔºåËØ•Ë°®ËææÂºèÁöÑÂê´‰πâÊåáÁöÑÊòØÂØπ‰∏öÂä°Â±Ç‰∏≠Âì™‰∫õÊñπÊ≥ïÂ¢ûÂº∫</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ÂàáÂÖ•ÁÇπË°®ËææÂºèÁöÑÂÜôÊ≥ïÔºö</span><br><span class="line">	ÂÖ≥ÈîÆÂ≠óÔºöexecution(Ë°®ËææÂºè)</span><br><span class="line">	Ë°®ËææÂºèÔºö</span><br><span class="line">		ËÆøÈóÆ‰øÆÈ•∞Á¨¶  ËøîÂõûÂÄº  ÂåÖÂêç.ÂåÖÂêç.ÂåÖÂêç...Á±ªÂêç.ÊñπÊ≥ïÂêç(ÂèÇÊï∞ÂàóË°®)</span><br><span class="line">		</span><br><span class="line">	Ê†áÂáÜÁöÑË°®ËææÂºèÂÜôÊ≥ïÔºö</span><br><span class="line">		public void com.itheima.service.impl.AccountServiceImpl.saveAccount()</span><br><span class="line">	ËÆøÈóÆ‰øÆÈ•∞Á¨¶ÂèØ‰ª•ÁúÅÁï•</span><br><span class="line">		void com.itheima.service.impl.AccountServiceImpl.saveAccount()</span><br><span class="line">	ËøîÂõûÂÄºÂèØ‰ª•‰ΩøÁî®ÈÄöÈÖçÁ¨¶ÔºåË°®Á§∫‰ªªÊÑèËøîÂõûÂÄº</span><br><span class="line">		* com.itheima.service.impl.AccountServiceImpl.saveAccount()</span><br><span class="line">	ÂåÖÂêçÂèØ‰ª•‰ΩøÁî®ÈÄöÈÖçÁ¨¶ÔºåË°®Á§∫‰ªªÊÑèÂåÖ„ÄÇ‰ΩÜÊòØÊúâÂá†Á∫ßÂåÖÔºåÂ∞±ÈúÄË¶ÅÂÜôÂá†‰∏™*.</span><br><span class="line">		* *.*.*.*.AccountServiceImpl.saveAccount())</span><br><span class="line">	ÂåÖÂêçÂèØ‰ª•‰ΩøÁî®..Ë°®Á§∫ÂΩìÂâçÂåÖÂèäÂÖ∂Â≠êÂåÖ</span><br><span class="line">		* *..AccountServiceImpl.saveAccount()</span><br><span class="line">	Á±ªÂêçÂíåÊñπÊ≥ïÂêçÈÉΩÂèØ‰ª•‰ΩøÁî®*Êù•ÂÆûÁé∞ÈÄöÈÖç</span><br><span class="line">		* *..*.*()</span><br><span class="line"></span><br><span class="line">	ÂèÇÊï∞ÂàóË°®Ôºö</span><br><span class="line">		ÂèØ‰ª•Áõ¥Êé•ÂÜôÊï∞ÊçÆÁ±ªÂûãÔºö</span><br><span class="line">			Âü∫Êú¨Á±ªÂûãÁõ¥Êé•ÂÜôÂêçÁß∞           int</span><br><span class="line">			ÂºïÁî®Á±ªÂûãÂÜôÂåÖÂêç.Á±ªÂêçÁöÑÊñπÂºè   java.lang.String</span><br><span class="line">			ÂèØ‰ª•‰ΩøÁî®ÈÄöÈÖçÁ¨¶Ë°®Á§∫‰ªªÊÑèÁ±ªÂûãÔºå‰ΩÜÊòØÂøÖÈ°ªÊúâÂèÇÊï∞</span><br><span class="line">			ÂèØ‰ª•‰ΩøÁî®..Ë°®Á§∫ÊúâÊó†ÂèÇÊï∞ÂùáÂèØÔºåÊúâÂèÇÊï∞ÂèØ‰ª•ÊòØ‰ªªÊÑèÁ±ªÂûã</span><br><span class="line"></span><br><span class="line">	ÂÖ®ÈÄöÈÖçÂÜôÊ≥ïÔºö</span><br><span class="line">		* *..*.*(..)</span><br><span class="line"></span><br><span class="line">	ÂÆûÈôÖÂºÄÂèë‰∏≠ÂàáÂÖ•ÁÇπË°®ËææÂºèÁöÑÈÄöÂ∏∏ÂÜôÊ≥ïÔºö</span><br><span class="line">		ÂàáÂà∞‰∏öÂä°Â±ÇÂÆûÁé∞Á±ª‰∏ãÁöÑÊâÄÊúâÊñπÊ≥ï</span><br><span class="line">			* com.itheima.service.impl.*.*(..)</span><br></pre></td></tr></table></figure>

<h2 id="Á§∫‰æã"><a href="#Á§∫‰æã" class="headerlink" title="Á§∫‰æã"></a>Á§∫‰æã</h2><h3 id="xmlÈÖçÁΩÆ"><a href="#xmlÈÖçÁΩÆ" class="headerlink" title="xmlÈÖçÁΩÆ"></a>xmlÈÖçÁΩÆ</h3><p>Âú®Spring Framework DocumentationÁöÑCore‰∏≠ÊêúÁ¥¢xmlns:aopÔºåÂØºÂÖ•Á∫¶Êùü</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ÈÖçÁΩÆsrpingÁöÑIoc,ÊääserviceÂØπË±°ÈÖçÁΩÆËøõÊù•--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">     <span class="comment">&lt;!-- ÈÖçÁΩÆLoggerÁ±ª --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"logger"</span> <span class="attr">class</span>=<span class="string">"com.itheima.utils.Logger"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ÈÖçÁΩÆAOP--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ÈÖçÁΩÆÂàáÈù¢ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">id</span>=<span class="string">"logAdvice"</span> <span class="attr">ref</span>=<span class="string">"logger"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ÈÖçÁΩÆÈÄöÁü•ÁöÑÁ±ªÂûãÔºåÂπ∂‰∏îÂª∫Á´ãÈÄöÁü•ÊñπÊ≥ïÂíåÂàáÂÖ•ÁÇπÊñπÊ≥ïÁöÑÂÖ≥ËÅî--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">"printLog"</span> <span class="attr">pointcut</span>=<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="‰∏öÂä°Â±Ç"><a href="#‰∏öÂä°Â±Ç" class="headerlink" title="‰∏öÂä°Â±Ç"></a>‰∏öÂä°Â±Ç</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ë¥¶Êà∑ÁöÑ‰∏öÂä°Â±ÇÊé•Âè£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Ê®°Êãü‰øùÂ≠òË¥¶Êà∑ Êó†ËøîÂõûÂÄºÊó†ÂèÇ</span></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Ê®°ÊãüÊõ¥Êñ∞Ë¥¶Êà∑ Êó†ËøîÂõûÂÄºÊúâÂèÇ</span></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(<span class="keyword">int</span> i)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Âà†Èô§Ë¥¶Êà∑ ÊúâËøîÂõûÂÄºÊó†ÂèÇ</span></span><br><span class="line">   <span class="function"><span class="keyword">int</span>  <span class="title">deleteAccount</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ë¥¶Êà∑ÁöÑ‰∏öÂä°Â±ÇÂÆûÁé∞Á±ª</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ÊâßË°å‰∫Ü‰øùÂ≠ò"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ÊâßË°å‰∫ÜÊõ¥Êñ∞"</span>+i);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteAccount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ÊâßË°å‰∫ÜÂà†Èô§"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ÈÄöÁü•"><a href="#ÈÄöÁü•" class="headerlink" title="ÈÄöÁü•"></a>ÈÄöÁü•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Áî®‰∫éËÆ∞ÂΩïÊó•ÂøóÁöÑÂ∑•ÂÖ∑Á±ªÔºåÂÆÉÈáåÈù¢Êèê‰æõ‰∫ÜÂÖ¨ÂÖ±ÁöÑ‰ª£Á†Å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Áî®‰∫éÊâìÂç∞Êó•ÂøóÔºöËÆ°ÂàíËÆ©ÂÖ∂Âú®ÂàáÂÖ•ÁÇπÊñπÊ≥ïÊâßË°å‰πãÂâçÊâßË°å</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">printLog</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"LoggerÁ±ª‰∏≠ÁöÑpringLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü„ÄÇ„ÄÇ„ÄÇ"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ÊµãËØïAOPÁöÑÈÖçÁΩÆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AOPTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1.Ëé∑ÂèñÂÆπÂô®</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);</span><br><span class="line">        <span class="comment">//2.Ëé∑ÂèñÂØπË±°</span></span><br><span class="line">        IAccountService as = (IAccountService)ac.getBean(<span class="string">"accountService"</span>);</span><br><span class="line">        <span class="comment">//3.ÊâßË°åÊñπÊ≥ï</span></span><br><span class="line">        as.saveAccount();</span><br><span class="line">        as.updateAccount(<span class="number">1</span>);</span><br><span class="line">        as.deleteAccount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-03-12AM9.48.57.jpg">

<h2 id="ÈÖçÁΩÆÂàáÂÖ•ÁÇπË°®ËææÂºè"><a href="#ÈÖçÁΩÆÂàáÂÖ•ÁÇπË°®ËææÂºè" class="headerlink" title="ÈÖçÁΩÆÂàáÂÖ•ÁÇπË°®ËææÂºè"></a>ÈÖçÁΩÆÂàáÂÖ•ÁÇπË°®ËææÂºè</h2><p>idÂ±ûÊÄßÁî®‰∫éÊåáÂÆöË°®ËææÂºèÁöÑÂîØ‰∏ÄÊ†áËØÜ</p>
<p>expressionÂ±ûÊÄßÁî®‰∫éÊåáÂÆöË°®ËææÂºèÂÜÖÂÆπ</p>
<p>ËØ•Ê†áÁ≠æÂÜôÂú®aop:aspectÊ†áÁ≠æÂÜÖÈÉ®Âè™ËÉΩÂΩìÂâçÂàáÈù¢‰ΩøÁî®</p>
<p>ËøòÂèØ‰ª•ÂÜôÂú®aop:aspectÂ§ñÈù¢ÔºåÊ≠§Êó∂Â∞±ÂèòÊàê‰∫ÜÊâÄÊúâÂàáÈù¢ÂèØÁî®</p>
<p>Ê≥®ÊÑèÔºöÂøÖÈ°ªÊîæÂú®ÂàáÈù¢‰πãÂâçÔºåÂê¶Âàô‰ºöÊä•ÈîôÔºàËøò‰∏çÊèêÈÜíÊÄé‰πàÈîôÁöÑÔºâ</p>
<h2 id="4ÁßçÂ∏∏Áî®ÈÄöÁü•Á±ªÂûã"><a href="#4ÁßçÂ∏∏Áî®ÈÄöÁü•Á±ªÂûã" class="headerlink" title="4ÁßçÂ∏∏Áî®ÈÄöÁü•Á±ªÂûã"></a>4ÁßçÂ∏∏Áî®ÈÄöÁü•Á±ªÂûã</h2><p>ÁªßÁª≠Âú®ÂàöÊâçÁöÑÂÆû‰æã‰∏äÂä†ÂÖ∂ÂÆÉÈÄöÁü•Á±ªÂûã</p>
<p>‰ΩøÁî®ÂàáÂÖ•ÁÇπË°®ËææÂºèÁÆÄÂåñÈÖçÁΩÆ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ÈÖçÁΩÆAOP--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ÈÖçÁΩÆÂàáÂÖ•ÁÇπË°®ËææÂºè --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"pt1"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:pointcut</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ÈÖçÁΩÆÂàáÈù¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">id</span>=<span class="string">"logAdvice"</span> <span class="attr">ref</span>=<span class="string">"logger"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ÈÖçÁΩÆÂâçÁΩÆÈÄöÁü•ÔºöÂú®ÂàáÂÖ•ÁÇπÊñπÊ≥ïÊâßË°å‰πãÂâçÊâßË°å--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">"beforePrintLog"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span> &gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ÈÖçÁΩÆÂêéÁΩÆÈÄöÁü•ÔºöÂú®ÂàáÂÖ•ÁÇπÊñπÊ≥ïÊ≠£Â∏∏ÊâßË°å‰πãÂêéÂÄº„ÄÇÂÆÉÂíåÂºÇÂ∏∏ÈÄöÁü•Ê∞∏ËøúÂè™ËÉΩÊâßË°å‰∏Ä‰∏™--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">"afterReturningPrintLog"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after-returning</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ÈÖçÁΩÆÂºÇÂ∏∏ÈÄöÁü•ÔºöÂú®ÂàáÂÖ•ÁÇπÊñπÊ≥ïÊâßË°å‰∫ßÁîüÂºÇÂ∏∏‰πãÂêéÊâßË°å„ÄÇÂÆÉÂíåÂêéÁΩÆÈÄöÁü•Ê∞∏ËøúÂè™ËÉΩÊâßË°å‰∏Ä‰∏™--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">"afterThrowingPrintLog"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after-throwing</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ÈÖçÁΩÆÊúÄÁªàÈÄöÁü•ÔºöÊó†ËÆ∫ÂàáÂÖ•ÁÇπÊñπÊ≥ïÊòØÂê¶Ê≠£Â∏∏ÊâßË°åÂÆÉÈÉΩ‰ºöÂú®ÂÖ∂ÂêéÈù¢ÊâßË°å--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">"afterPrintLog"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÂàáÂÖ•ÁÇπÊñπÊ≥ïÊó†ÂºÇÂ∏∏Êó∂ËæìÂá∫</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ÂâçÁΩÆÈÄöÁü•LoggerÁ±ª‰∏≠ÁöÑbeforePrintLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...</span><br><span class="line">ÊâßË°å‰∫Ü‰øùÂ≠ò</span><br><span class="line">ÂêéÁΩÆÈÄöÁü•LoggerÁ±ª‰∏≠ÁöÑafterReturningPrintLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...</span><br><span class="line">ÊúÄÁªàÈÄöÁü•LoggerÁ±ª‰∏≠ÁöÑafterPrintLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...</span><br></pre></td></tr></table></figure>

<p>ÂàáÂÖ•ÁÇπÊñπÊ≥ïÊúâÂºÇÂ∏∏Êó∂ËæìÂá∫</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ÂâçÁΩÆÈÄöÁü•LoggerÁ±ª‰∏≠ÁöÑbeforePrintLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...</span><br><span class="line">ÊâßË°å‰∫Ü‰øùÂ≠ò</span><br><span class="line">ÂºÇÂ∏∏ÈÄöÁü•LoggerÁ±ª‰∏≠ÁöÑafterThrowingPrintLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...</span><br><span class="line">ÊúÄÁªàÈÄöÁü•LoggerÁ±ª‰∏≠ÁöÑafterPrintLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.ArithmeticException: &#x2F; by zero</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>ÂêéÁΩÆÂíåÂºÇÂ∏∏Âè™‰ºöÊâßË°åÂÖ∂‰∏≠‰∏Ä‰∏™</p>
<h2 id="ÁéØÁªïÈÄöÁü•"><a href="#ÁéØÁªïÈÄöÁü•" class="headerlink" title="ÁéØÁªïÈÄöÁü•"></a>ÁéØÁªïÈÄöÁü•</h2><p>‰∏ãÈù¢ËøôÊ†∑ÈÖçÁΩÆÁéØÁªïÈÄöÁü•ÊòØ‰∏çË°åÁöÑ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">aroundPringLog</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"LoggerÁ±ª‰∏≠ÁöÑafterThrowingPrintLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü..."</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>ËøôÊ†∑ÈÖçÁΩÆÂêéÔºåÂàáÂÖ•ÁÇπÊñπÊ≥ï‰∏çÊâßË°å‰∫ÜÔºåÂè™ÊâßË°åÈÄöÁü•ÊñπÊ≥ï</p>
<p>ÂàÜÊûêÔºöÂØπÊØîÂä®ÊÄÅ‰ª£ÁêÜ‰∏≠ÔºåÂèëÁé∞ÂÖ∂‰∏≠ÁöÑÁéØÁªïÈÄöÁü•ÊúâÊòéÁ°ÆÁöÑÂàáÂÖ•ÁÇπË∞ÉÁî®ÔºåËÄåËøôÊ†∑Ê≤°Êúâ</p>
<p>Ëß£ÂÜ≥Ôºö‰ΩøÁî®SpringÁöÑProceedingJoinPointÊé•Âè£„ÄÇËØ•Êé•Âè£Êúâ‰∏Ä‰∏™proceed()ÊñπÊ≥ïÔºåÂú®Á®ãÂ∫èÊâßË°åÊó∂ÔºåSpring‰ºöÊèê‰æõËØ•Êé•Âè£ÁöÑÂÆûÁé∞Á±ª‰æõÊàë‰ª¨‰ΩøÁî®</p>
<p>ËøôÊ†∑ÂèØ‰ª•ÊéßÂà∂Â¢ûÂº∫ÊñπÊ≥ï‰ΩïÊó∂ÊâßË°åÔºåÂâçÁΩÆ„ÄÅÂêéÁΩÆ„ÄÅÂºÇÂ∏∏„ÄÅÊúÄÁªàÈÉΩÂèØ‰ª•ÂÆûÁé∞</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">	 <span class="function"><span class="keyword">public</span> Object <span class="title">aroundPringLog</span><span class="params">(ProceedingJoinPoint pjp)</span></span>&#123;</span><br><span class="line">        Object rtValue = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Object[] args = pjp.getArgs();<span class="comment">// ÂæóÂà∞ÊñπÊ≥ïÊâßË°åÊâÄÈúÄÁöÑÂèÇÊï∞</span></span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"LoggerÁ±ª‰∏≠ÁöÑaroundPringLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...ÂâçÁΩÆ"</span>);</span><br><span class="line">            rtValue = pjp.proceed(args);<span class="comment">// ÊòéÁ°ÆË∞ÉÁî®‰∏öÂä°Â±ÇÊñπÊ≥ïÔºàÂàáÂÖ•ÁÇπÊñπÊ≥ïÔºâ</span></span><br><span class="line">            System.out.println(<span class="string">"LoggerÁ±ª‰∏≠ÁöÑaroundPringLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...ÂêéÁΩÆ"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> rtValue;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Throwable t)&#123;</span><br><span class="line">            System.out.println(<span class="string">"LoggerÁ±ª‰∏≠ÁöÑaroundPringLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...ÂºÇÂ∏∏"</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(t);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"LoggerÁ±ª‰∏≠ÁöÑaroundPringLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...ÊúÄÁªà"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆÁéØÁªïÈÄöÁü•--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">"aroundPringLog"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt1"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:around</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="SpringÂü∫‰∫éÊ≥®Ëß£ÁöÑAOPÈÖçÁΩÆ"><a href="#SpringÂü∫‰∫éÊ≥®Ëß£ÁöÑAOPÈÖçÁΩÆ" class="headerlink" title="SpringÂü∫‰∫éÊ≥®Ëß£ÁöÑAOPÈÖçÁΩÆ"></a>SpringÂü∫‰∫éÊ≥®Ëß£ÁöÑAOPÈÖçÁΩÆ</h1><h2 id="Á§∫‰æã-1"><a href="#Á§∫‰æã-1" class="headerlink" title="Á§∫‰æã"></a>Á§∫‰æã</h2><h3 id="xmlÈÖçÁΩÆ-1"><a href="#xmlÈÖçÁΩÆ-1" class="headerlink" title="xmlÈÖçÁΩÆ"></a>xmlÈÖçÁΩÆ</h3><p>Á∫¶ÊùüÊØîÂü∫‰∫éxmlÁöÑÂ§ö‰∫Ücontext</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ÈÖçÁΩÆspringÂàõÂª∫ÂÆπÂô®Êó∂Ë¶ÅÊâ´ÊèèÁöÑÂåÖ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.itheima"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ÈÖçÁΩÆspringÂºÄÂêØÊ≥®Ëß£AOPÁöÑÊîØÊåÅ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="LoggerÈÖçÁΩÆÔºà4ÁßçÂ∏∏Áî®Á±ªÂûãÔºâÔºÅ-Âª∫ËÆÆÂà´Áî®ÔºåÊúâbug"><a href="#LoggerÈÖçÁΩÆÔºà4ÁßçÂ∏∏Áî®Á±ªÂûãÔºâÔºÅ-Âª∫ËÆÆÂà´Áî®ÔºåÊúâbug" class="headerlink" title="LoggerÈÖçÁΩÆÔºà4ÁßçÂ∏∏Áî®Á±ªÂûãÔºâÔºÅ[Âª∫ËÆÆÂà´Áî®ÔºåÊúâbug]"></a>LoggerÈÖçÁΩÆÔºà4ÁßçÂ∏∏Áî®Á±ªÂûãÔºâÔºÅ[Âª∫ËÆÆÂà´Áî®ÔºåÊúâbug]</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"logger"</span>)</span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">// Ë°®Á§∫ÂΩìÂâçÁ±ªÊòØ‰∏Ä‰∏™ÂàáÈù¢Á±ª</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ÈÖçÁΩÆÂàáÂÖ•ÁÇπË°®ËææÂºè</span></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">pt1</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Ê≥®ÊÑèË¶ÅÂä†()</span></span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">"pt1()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">beforePrintLog</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ÂâçÁΩÆÈÄöÁü•LoggerÁ±ª‰∏≠ÁöÑbeforePrintLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterReturning</span>(<span class="string">"pt1()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">afterReturningPrintLog</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ÂêéÁΩÆÈÄöÁü•LoggerÁ±ª‰∏≠ÁöÑafterReturningPrintLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterThrowing</span>(<span class="string">"pt1()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">afterThrowingPrintLog</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ÂºÇÂ∏∏ÈÄöÁü•LoggerÁ±ª‰∏≠ÁöÑafterThrowingPrintLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span>(<span class="string">"pt1()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">afterPrintLog</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ÊúÄÁªàÈÄöÁü•LoggerÁ±ª‰∏≠ÁöÑafterPrintLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËøêË°åËæìÂá∫Ôºö</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">ÂâçÁΩÆÈÄöÁü•LoggerÁ±ª‰∏≠ÁöÑbeforePrintLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...</span><br><span class="line">ÊâßË°å‰∫Ü‰øùÂ≠ò</span><br><span class="line">ÊúÄÁªàÈÄöÁü•LoggerÁ±ª‰∏≠ÁöÑafterPrintLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...</span><br><span class="line">ÂêéÁΩÆÈÄöÁü•LoggerÁ±ª‰∏≠ÁöÑafterReturningPrintLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...</span><br></pre></td></tr></table></figure>

<p>ÂèëÁé∞ÊúÄÁªàÂú®ÂêéÁΩÆ‰πãÂâçÊâßË°å‰∫ÜÔºàÂºÇÂ∏∏‰πü‰∏ÄÊ†∑Ôºâ</p>
<p>Ê≤°ÊúâÂäûÊ≥ïÔºåÂõ†‰∏∫SpringÂü∫‰∫éÊ≥®Ëß£ÁöÑAOP‰∏≠ÔºåË∞ÉÁî®È°∫Â∫èÁ°ÆÂÆûÊúâÈóÆÈ¢òÔºåÂÆûÈôÖÂºÄÂèë‰∏≠Â∫îËØ•ÊÖéÈáç</p>
<h3 id="LoggerÈÖçÁΩÆÔºàÁéØÁªïÈÄöÁü•Ôºâ"><a href="#LoggerÈÖçÁΩÆÔºàÁéØÁªïÈÄöÁü•Ôºâ" class="headerlink" title="LoggerÈÖçÁΩÆÔºàÁéØÁªïÈÄöÁü•Ôºâ"></a>LoggerÈÖçÁΩÆÔºàÁéØÁªïÈÄöÁü•Ôºâ</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"logger"</span>)</span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">// Ë°®Á§∫ÂΩìÂâçÁ±ªÊòØ‰∏Ä‰∏™ÂàáÈù¢Á±ª</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ÈÖçÁΩÆÂàáÂÖ•ÁÇπË°®ËææÂºè</span></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">pt1</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around</span>(<span class="string">"pt1()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">aroundPringLog</span><span class="params">(ProceedingJoinPoint pjp)</span></span>&#123;</span><br><span class="line">        Object rtValue = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Object[] args = pjp.getArgs();<span class="comment">// ÂæóÂà∞ÊñπÊ≥ïÊâßË°åÊâÄÈúÄÁöÑÂèÇÊï∞</span></span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"LoggerÁ±ª‰∏≠ÁöÑaroundPringLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...ÂâçÁΩÆ"</span>);</span><br><span class="line"></span><br><span class="line">            rtValue = pjp.proceed(args);<span class="comment">// ÊòéÁ°ÆË∞ÉÁî®‰∏öÂä°Â±ÇÊñπÊ≥ïÔºàÂàáÂÖ•ÁÇπÊñπÊ≥ïÔºâ</span></span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"LoggerÁ±ª‰∏≠ÁöÑaroundPringLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...ÂêéÁΩÆ"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> rtValue;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Throwable t)&#123;</span><br><span class="line">            System.out.println(<span class="string">"LoggerÁ±ª‰∏≠ÁöÑaroundPringLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...ÂºÇÂ∏∏"</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(t);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"LoggerÁ±ª‰∏≠ÁöÑaroundPringLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...ÊúÄÁªà"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ê≠§Êó∂Â∞±Ê≤°ÊúâÈ°∫Â∫èÈóÆÈ¢ò‰∫Ü</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">LoggerÁ±ª‰∏≠ÁöÑaroundPringLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...ÂâçÁΩÆ</span><br><span class="line">ÊâßË°å‰∫Ü‰øùÂ≠ò</span><br><span class="line">LoggerÁ±ª‰∏≠ÁöÑaroundPringLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...ÂêéÁΩÆ</span><br><span class="line">LoggerÁ±ª‰∏≠ÁöÑaroundPringLogÊñπÊ≥ïÂºÄÂßãËÆ∞ÂΩïÊó•Âøó‰∫Ü...ÊúÄÁªà</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>VueÁ¨îËÆ∞03 Element UI‰ΩøÁî®&amp;Âä®ÊÄÅË∑ØÁî±ÂØºËà™Ê†è</title>
    <url>/2020/03/11/note-vue-03/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av85793766" target="_blank" rel="noopener">https://www.bilibili.com/video/av85793766</a><br>p2~3</p>
</blockquote>
<h1 id="ÂÆâË£Ö"><a href="#ÂÆâË£Ö" class="headerlink" title="ÂÆâË£Ö"></a>ÂÆâË£Ö</h1><p>Âíå‰∏äÊ¨°‰∏ÄÊ†∑ÂàõÂª∫È°πÁõÆÔºåÂú®vue ui‰∏≠Ê∑ªÂä†Element UIÊèí‰ª∂</p>
<p>Idea‰∏≠ÂØºÂÖ•Â∑•Á®ã</p>
<p>Â¶ÇÊûúÊèí‰ª∂Âú®ÂàöÊâçUI‰∏≠Ê≤°ÊúâË£ÖÊàêÂäüÔºåÂèØ‰ª•Âú®ÂëΩ‰ª§Ë°åË£Ö</p>
<h1 id="‰ΩøÁî®"><a href="#‰ΩøÁî®" class="headerlink" title="‰ΩøÁî®"></a>‰ΩøÁî®</h1><p>Element UIÁöÑ‰ΩøÁî®ÂèØ‰ª•ÁúãÂÆòÁΩëÊâãÂÜå</p>
<a href="https://element.eleme.cn/2.0/#/zh-CN" title="" target="">Elemnt UI ‰∏≠ÊñáÂÆòÁΩë</a>

<p>Êúâ‰∏Ä‰∫õÂ∏∏ËßÅÁöÑÂ∏ÉÂ±ÄÊñπÂºè</p>
<h2 id="ÂØºÂÖ•ÂÆû‰æã"><a href="#ÂØºÂÖ•ÂÆû‰æã" class="headerlink" title="ÂØºÂÖ•ÂÆû‰æã"></a>ÂØºÂÖ•ÂÆû‰æã</h2><p>Áõ¥Êé•ÊääÂÆòÁΩëÂÆû‰æãÂ§çÂà∂Âà∞App.vue‰∏≠ÔºàhtmlÂ§çÂà∂Âà∞divÊ†áÁ≠æ‰πãÈó¥Ôºâ</p>
<p>Âà∑Êñ∞ÁΩëÈ°µÂ∞±ËÉΩÁúãÂà∞ÊïàÊûú</p>
<h2 id="‰∏Ä‰∫õÊ†áÁ≠æËØ¥Êòé"><a href="#‰∏Ä‰∫õÊ†áÁ≠æËØ¥Êòé" class="headerlink" title="‰∏Ä‰∫õÊ†áÁ≠æËØ¥Êòé"></a>‰∏Ä‰∫õÊ†áÁ≠æËØ¥Êòé</h2><p>el-container: ÊûÑÂª∫Êï¥‰∏™‚ªöÈù¢Ê°ÜÊû∂</p>
<p>el-menu: Â∑¶‰æßËèúÂçï</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// :default-openedsÈªòËÆ§Â±ïÂºÄÁöÑËèúÂçï :default-activeÈªòËÆ§ÈÄâ‰∏≠ÁöÑËèúÂçï</span><br><span class="line"><span class="tag">&lt;<span class="name">el-menu</span> <span class="attr">:default-openeds</span>=<span class="string">"['1', '3']"</span> <span class="attr">:default-active</span>=<span class="string">"1-2"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ËßÜÈ¢ëÈáåËØ¥Ëøô‰∏™‚Äù1-2‚ÄùÂøÖÈ°ªÂÜôÊàê‚Äù[1-2]‚ÄùÊàñÂàô‚Äù‚Äò1-2‚Äô‚ÄùÊâçËÉΩËØÜÂà´</p>
<p>‰ΩÜÊòØËØï‰∫Ü‰∏Ä‰∏ãÁõ¥Êé•ÂÜô‰πüËØÜÂà´‰∫Ü</p>
<p>el-submenu: ÂèØÂ±ïÂºÄÁöÑËèúÂçï</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// ËèúÂçïÁöÑ‰∏ãÊ†áÔºåÊñáÊú¨Á±ªÂûãÔºå‰∏çËÉΩÊòØÊï∞ÂÄºÁ±ªÂûã</span><br><span class="line"><span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">index</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">  // template:ÂØπÂ∫î el-submenu ÁöÑËèúÂçïÂêç i:ËÆæÁΩÆËèúÂçïÂõæÊ†áÔºåÂÖ∑‰ΩìÂú®ÊñáÊ°£Êâæ</span><br><span class="line">	<span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-message"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>ÂØºËà™‰∏Ä<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÈúÄË¶ÅÁöÑËØùËøòÂèØ‰ª•ÂµåÂ•óÂ§öÁ∫ßsubmenu</p>
<h2 id="ÈÄöËøávue-routerÂä®ÊÄÅÊûÑÂª∫Â∑¶‰æßËèúÂçï"><a href="#ÈÄöËøávue-routerÂä®ÊÄÅÊûÑÂª∫Â∑¶‰æßËèúÂçï" class="headerlink" title="ÈÄöËøávue routerÂä®ÊÄÅÊûÑÂª∫Â∑¶‰æßËèúÂçï"></a>ÈÄöËøávue routerÂä®ÊÄÅÊûÑÂª∫Â∑¶‰æßËèúÂçï</h2><h3 id="ÈÖçÁΩÆÈ°µÈù¢"><a href="#ÈÖçÁΩÆÈ°µÈù¢" class="headerlink" title="ÈÖçÁΩÆÈ°µÈù¢"></a>ÈÖçÁΩÆÈ°µÈù¢</h3><p>Êñ∞Âª∫4‰∏™È°µÈù¢ÔºåÂú®router‰∏≠ÈÖçÁΩÆ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Page1 <span class="keyword">from</span> <span class="string">'../views/Page1'</span></span><br><span class="line"><span class="keyword">import</span> Page2 <span class="keyword">from</span> <span class="string">'../views/Page2'</span></span><br><span class="line"><span class="keyword">import</span> Page3 <span class="keyword">from</span> <span class="string">'../views/Page3'</span></span><br><span class="line"><span class="keyword">import</span> Page4 <span class="keyword">from</span> <span class="string">'../views/Page4'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/page1'</span>,</span><br><span class="line">    name: <span class="string">'È°µÈù¢1'</span>,</span><br><span class="line">    component: Page1</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/page2'</span>,</span><br><span class="line">    name: <span class="string">'È°µÈù¢2'</span>,</span><br><span class="line">    component: Page2</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/page3'</span>,</span><br><span class="line">    name: <span class="string">'È°µÈù¢3'</span>,</span><br><span class="line">    component: Page3</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/page4'</span>,</span><br><span class="line">    name: <span class="string">'È°µÈù¢4'</span>,</span><br><span class="line">    component: Page4</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>‰ΩÜÊòØËøôÊ†∑Ëøò‰∏ç‰ºöÊòæÁ§∫ÔºåË¶ÅÂú®App.vue‰∏≠Âä†‰∏ärouterÂØπÂ∫îÁöÑÈ°µÈù¢</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">        ...</span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-03-11AM10.59.18.jpg">

<p>Ê≠§Êó∂Áõ∏ÂΩì‰∫éApp‰∏≠ÁöÑÂÜÖÂÆπÊòØÊú¨Êù•Â∞±ÊòæÁ§∫ÁöÑÔºå‰∏ãÈù¢ÁöÑviewÊòØÈôÑÂä†‰∏äÂéªÁöÑ</p>
<p>ËøôÊ†∑ÊîæÊòæÁÑ∂ÊòØÊúâÈóÆÈ¢òÁöÑ</p>
<p>ÊääÂÆÉÊîæÂà∞mainÈáåÈù¢</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">				...</span><br><span class="line">				<span class="tag">&lt;<span class="name">el-main</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/images/2020/screencapture2020-03-11AM11.03.53.jpg">

<p>ËøôÊ†∑Â∞±ÊîæËøõÂéª‰∫ÜÔºå‰∏ã‰∏ÄÊ≠•ÊääÂÆÉ‰ª¨Ëøû‰∏ä</p>
<h3 id="ÈÅçÂéÜrouter"><a href="#ÈÅçÂéÜrouter" class="headerlink" title="ÈÅçÂéÜrouter"></a>ÈÅçÂéÜrouter</h3><p>ÈúÄË¶Å‰øÆÊîπrouterÁöÑÂ±ÇÁ∫ßÁªìÊûÑ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    name: <span class="string">'ÂØºËà™1'</span>,</span><br><span class="line">    component:App,</span><br><span class="line">    children:[</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page1'</span>,</span><br><span class="line">        name: <span class="string">'È°µÈù¢1'</span>,</span><br><span class="line">        component: Page1</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page2'</span>,</span><br><span class="line">        name: <span class="string">'È°µÈù¢2'</span>,</span><br><span class="line">        component: Page2</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path:<span class="string">'/navigation'</span>,</span><br><span class="line">    name: <span class="string">'ÂØºËà™2'</span>,</span><br><span class="line">    component:App,</span><br><span class="line">    children:[</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page3'</span>,</span><br><span class="line">        name: <span class="string">'È°µÈù¢3'</span>,</span><br><span class="line">        component: Page3</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page4'</span>,</span><br><span class="line">        name: <span class="string">'È°µÈù¢4'</span>,</span><br><span class="line">        component: Page4</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>ÁÑ∂ÂêéÂú®App.vue‰∏≠ËØªÂèñ</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">width</span>=<span class="string">"200px"</span> <span class="attr">style</span>=<span class="string">"background-color: rgb(238, 241, 246)"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">el-menu</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">v-for</span>=<span class="string">"item in $router.options.routes"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-setting"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Â∞±ÊòæÁ§∫Âá∫Êù•‰∫Ü</p>
<img src="/images/2020/screencapture2020-03-11AM11.14.49.jpg">

<hr>
<p>‰∏Ä‰∏™Â∞èbug</p>
<p>È°µÈù¢‰∏ÄÂºÄÂßãÊòØÁ©∫ÁôΩÁöÑÔºåÂèëÁé∞ÊòØAppÊ≤°ÊúâÂºïÂÖ•Ôºårouter‰∏≠Ë¶ÅÂä†</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br></pre></td></tr></table></figure>

<hr>
<p>ÊääÂÜÖÂ±ÇÁöÑÂÖÉÁ¥†‰πüËØªÂá∫Êù•</p>
<p>Áé∞Âú®ÁÇπ‰∏Ä‰∏™ÂØºËà™Êó∂Ôºå‰∏§‰∏™‰ºö‰∏ÄËµ∑Â±ïÂºÄ„ÄÅÂêà‰∏äÔºåÂõ†‰∏∫Ê≤°ÊúâÂä†index</p>
<p>ÂÜçÂä†‰∏äindexÂ±ûÊÄßÔºàÈÄöËøáitemÁöÑ‰∏ãÊ†áÔºåitemÂú®ÂâçÔºåindexÂú®ÂêéÔºâÔºåÈúÄË¶ÅÂ≠óÁ¨¶‰∏≤Â±ûÊÄßÔºåÊãº‰∏Ä‰∏™‚Äô‚Äô</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">width</span>=<span class="string">"200px"</span> <span class="attr">style</span>=<span class="string">"background-color: rgb(238, 241, 246)"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-menu</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in $router.options.routes"</span> <span class="attr">:index</span>=<span class="string">"index+''"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-setting"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#123;&#123;index&#125;&#125;-&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">v-for</span>=<span class="string">"(item2,index2) in item.children"</span> <span class="attr">:index</span>=<span class="string">"index+'-'+index2"</span>&gt;</span>&#123;&#123;item2.name&#125;&#125;<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Â∞±ÂèØ‰ª•ÂÆö‰ΩçÂà∞ÊØè‰∏Ä‰∏™‰∫Ü</p>
<img src="/images/2020/screencapture2020-03-11AM11.29.49.jpg">

<h2 id="menu‰∏érouterÁªëÂÆö"><a href="#menu‰∏érouterÁªëÂÆö" class="headerlink" title="menu‰∏érouterÁªëÂÆö"></a>menu‰∏érouterÁªëÂÆö</h2><p>ÊääApp‰∏≠ÁöÑÂÜÖÂÆπÊîæÂà∞IndexÈ°µÈù¢‰∏≠</p>
<p>1„ÄÅÁªô el-menu Ê†áÁ≠æÊ∑ªÂä† router Â±ûÊÄß</p>
<p>2„ÄÅÂú®‚ªöÈù¢‰∏≠Ê∑ªÂä† router-view Ê†áÁ≠æÔºàÂÆÉÊòØ‰∏Ä‰∏™ÂÆπÂô®ÔºåÂèØ‰ª•Âä®ÊÄÅÊ∏≤ÊüìÈÄâÊã©ÁöÑrouterÔºâ</p>
<p>3„ÄÅel-menu-item Ê†áÁ≠æÁöÑ index ÂÄºÂ∞±ÊòØË¶ÅË∑≥ËΩ¨ÁöÑ router</p>
<p>ÈªòËÆ§È°µÈù¢ÔºåÂú®router‰∏≠ÂÜôredirect</p>
<p>Âπ∂ÂàùÂßãÂåñÈÄâ‰∏≠ÔºåÂ¶ÇÊûúÈÄâÊã©ÂàôÂä†is-activeÁä∂ÊÄÅ„ÄÇÁî®route.pathËé∑ÂèñÂΩìÂâçË∑ØÂæÑ</p>
<img src="/images/2020/screencapture2020-03-11PM4.09.10.jpg">

<h1 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h1><h2 id="Êñá‰ª∂ÁªìÊûÑ"><a href="#Êñá‰ª∂ÁªìÊûÑ" class="headerlink" title="Êñá‰ª∂ÁªìÊûÑ"></a>Êñá‰ª∂ÁªìÊûÑ</h2><img src="/images/2020/screencapture2020-03-11PM4.10.22.jpg" width=300>

<h2 id="App-vue"><a href="#App-vue" class="headerlink" title="App.vue"></a>App.vue</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    Ëøô‰∏™routerÂØπÂ∫îÁöÑÂç≥‰∏∫/Ôºå‰πüÂ∞±ÊòØIndexÈ°µÈù¢--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Index-vue"><a href="#Index-vue" class="headerlink" title="Index.vue"></a>Index.vue</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-container</span> <span class="attr">style</span>=<span class="string">"height: 500px; border: 1px solid #eee"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">width</span>=<span class="string">"200px"</span> <span class="attr">style</span>=<span class="string">"background-color: rgb(238, 241, 246)"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            ËøôÈáåÊ∑ªÂä†routerÊ†áÁ≠æÔºåel-menu-itemÁöÑindexÂ∞±‰ºöË¢´‰Ωú‰∏∫routerË∑ØÂæÑ--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu</span> <span class="attr">router</span> <span class="attr">:default-openeds</span>=<span class="string">"['0','1']"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in $router.options.routes"</span> <span class="attr">:index</span>=<span class="string">"index+''"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-setting"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#123;&#123;index&#125;&#125;-&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                    Êù°‰ª∂Âà§Êñ≠ÂΩìÂâçË∑ØÂæÑÊòØÂê¶Á≠â‰∫éindexÔºåÊõ¥ÊîπÈÄâ‰∏≠Áä∂ÊÄÅÔºå‰∏ªË¶ÅÊòØÂú®ÂàùÂßãÂåñÊó∂Â¢ûÂä†ÈªòËÆ§ÁöÑÈÄâ‰∏≠Áä∂ÊÄÅ--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">v-for</span>=<span class="string">"item2 in item.children"</span> <span class="attr">:index</span>=<span class="string">"item2.path"</span> <span class="attr">:class</span>=<span class="string">"$route.path==item2.path ? 'is-active' : ''"</span>&gt;</span>&#123;&#123;item2.path&#125;&#125;-&#123;&#123;item2.name&#125;&#125;<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-main</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            ‰∏äÈù¢ÂèàindexÁ°ÆÂÆöÁöÑrouterË¢´ÊòæÁ§∫Âú®ËøôÈáåÔºå‰πüÂ∞±ÊòØmainÂå∫Âüü‰∏≠--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    name: <span class="string">'ÂØºËà™1'</span>,</span><br><span class="line">    component:Index,</span><br><span class="line">    redirect:<span class="string">'page1'</span>,</span><br><span class="line">    children:[</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page1'</span>,</span><br><span class="line">        name: <span class="string">'È°µÈù¢1'</span>,</span><br><span class="line">        component: Page1</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page2'</span>,</span><br><span class="line">        name: <span class="string">'È°µÈù¢2'</span>,</span><br><span class="line">        component: Page2</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path:<span class="string">'/navigation'</span>,</span><br><span class="line">    name: <span class="string">'ÂØºËà™2'</span>,</span><br><span class="line">    component:Index,</span><br><span class="line">    children:[</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page3'</span>,</span><br><span class="line">        name: <span class="string">'È°µÈù¢3'</span>,</span><br><span class="line">        component: Page3</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/page4'</span>,</span><br><span class="line">        name: <span class="string">'È°µÈù¢4'</span>,</span><br><span class="line">        component: Page4</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>Ê≥®ÊÑèÂå∫Âà´Ôºörouter/route/routes</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>maxOSÊà™ÂõæËÆæÁΩÆ</title>
    <url>/2020/03/11/mac-screencapture/</url>
    <content><![CDATA[<p>ÈóÆÈ¢òÔºö‰ª•ÂâçÊèíÂÖ•Êà™ÂõæÂæóÂÖàÊîπÊñá‰ª∂ÂêçÔºåË¶ÅÊó∂Èó¥Êà≥‰∏çÂê´‰∏≠ÊñáÔºåËÄå‰∏îpngÁâπÂà´Â§ßÔºåÊúÄÂ•ΩËΩ¨ÊàêjpgÔºåÂæàÈ∫ªÁÉ¶</p>
<p>ÁõÆÊ†áÔºöÊñá‰ª∂ÂêçÊó∂Èó¥Êà≥‰∏çÂê´‰∏≠Êñá &amp; jpgÊ†ºÂºè</p>
<hr>
<h1 id="‰∏ÄÈÄöÊìç‰Ωú"><a href="#‰∏ÄÈÄöÊìç‰Ωú" class="headerlink" title="‰∏ÄÈÄöÊìç‰Ωú"></a>‰∏ÄÈÄöÊìç‰Ωú</h1><h2 id="ÊîπÊ†ºÂºè"><a href="#ÊîπÊ†ºÂºè" class="headerlink" title="ÊîπÊ†ºÂºè"></a>ÊîπÊ†ºÂºè</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">defaults write com.apple.screencapture type jpg</span><br></pre></td></tr></table></figure>

<h2 id="ÊîπÂêç"><a href="#ÊîπÂêç" class="headerlink" title="ÊîπÂêç"></a>ÊîπÂêç</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">defaults write com.apple.screencapture name screencapture</span><br></pre></td></tr></table></figure>

<h2 id="ÊîπÊó∂Èó¥Êà≥Ê†ºÂºè"><a href="#ÊîπÊó∂Èó¥Êà≥Ê†ºÂºè" class="headerlink" title="ÊîπÊó∂Èó¥Êà≥Ê†ºÂºè"></a>ÊîπÊó∂Èó¥Êà≥Ê†ºÂºè</h2><p>Á≥ªÁªüÂÅèÂ•ΩËÆæÁΩÆ-&gt;ËØ≠Ë®Ä‰∏éÂú∞Âå∫-&gt;È´òÁ∫ß-&gt;Êó∂Èó¥</p>
<p>Ê≠£ÂçàÂâçÂíå‰∏≠ÂçàÂêéÊ°Ü‰∏≠Ôºö‰∏äÂçà/‰∏ãÂçàÊîπÊàêAM/PM </p>
<h2 id="ÂÆåÂ∑•"><a href="#ÂÆåÂ∑•" class="headerlink" title="ÂÆåÂ∑•"></a>ÂÆåÂ∑•</h2><p>Before:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Êà™Â±è2020-03-11‰∏äÂçà9.50.34</span><br></pre></td></tr></table></figure>

<p>After:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">screencapture2020-03-11AM10.05.30</span><br></pre></td></tr></table></figure>



<hr>
<h1 id="ÂëΩ‰ª§Â§áÂøò"><a href="#ÂëΩ‰ª§Â§áÂøò" class="headerlink" title="ÂëΩ‰ª§Â§áÂøò"></a>ÂëΩ‰ª§Â§áÂøò</h1><h2 id="‰øÆÊîπÊ†ºÂºè"><a href="#‰øÆÊîπÊ†ºÂºè" class="headerlink" title="‰øÆÊîπÊ†ºÂºè"></a>‰øÆÊîπÊ†ºÂºè</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">defaults write com.apple.screencapture type jpg</span><br></pre></td></tr></table></figure>

<h2 id="‰øÆÊîπÊñá‰ª∂Âêç"><a href="#‰øÆÊîπÊñá‰ª∂Âêç" class="headerlink" title="‰øÆÊîπÊñá‰ª∂Âêç"></a>‰øÆÊîπÊñá‰ª∂Âêç</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">defaults write com.apple.screencapture name XXX</span><br></pre></td></tr></table></figure>

<h2 id="Êó∂Èó¥Êà≥"><a href="#Êó∂Èó¥Êà≥" class="headerlink" title="Êó∂Èó¥Êà≥"></a>Êó∂Èó¥Êà≥</h2><h3 id="ÁßªÈô§Êó∂Èó¥Êà≥"><a href="#ÁßªÈô§Êó∂Èó¥Êà≥" class="headerlink" title="ÁßªÈô§Êó∂Èó¥Êà≥"></a>ÁßªÈô§Êó∂Èó¥Êà≥</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">defaults write com.apple.screencapture &quot;include-date&quot; 0</span><br></pre></td></tr></table></figure>

<h3 id="Âä†Êó∂Èó¥Êà≥"><a href="#Âä†Êó∂Èó¥Êà≥" class="headerlink" title="Âä†Êó∂Èó¥Êà≥"></a>Âä†Êó∂Èó¥Êà≥</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">defaults write com.apple.screencapture &quot;include-date&quot; 1</span><br></pre></td></tr></table></figure>

<h2 id="ÂÖ∂ÂÆÉÂ∏ÆÂä©"><a href="#ÂÖ∂ÂÆÉÂ∏ÆÂä©" class="headerlink" title="ÂÖ∂ÂÆÉÂ∏ÆÂä©"></a>ÂÖ∂ÂÆÉÂ∏ÆÂä©</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">screencapture -h</span><br></pre></td></tr></table></figure>



<blockquote>
<p>ref:</p>
<p><a href="https://zhuanlan.zhihu.com/p/73725126" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/73725126</a></p>
<p><a href="https://www.maketecheasier.com/remove-time-stamp-screenshot-mac/" target="_blank" rel="noopener">https://www.maketecheasier.com/remove-time-stamp-screenshot-mac/</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>tool</tag>
      </tags>
  </entry>
  <entry>
    <title>Êù•Âà∞HexoÁöÑÁ¨¨‰∏ÄÂ§©ÔºÅ</title>
    <url>/2020/03/10/hello-hexo/</url>
    <content><![CDATA[<p>‰ªé‰∏ãÂçàÂºÄÂßãÊê≠Âª∫ÔºåË∞É‰∏ªÈ¢òÔºå‰∏ÄÁõ¥Âà∞Êôö‰∏äÊê¨ËøêÂÆå‰∫ÜÊ≠£Âú®ÂÜôÁöÑÁ¨îËÆ∞ÔºåÂøÉÊÉÖËàíÁïÖ</p>
<p>ÂÖàÂ∞ùËØïÁöÑÊòØJekyllÔºåÊàëÁöÑËÄÅÂ§©ÈπÖÂïäÔºåÊäòËÖæ‰∫Ü‰∏ÄÊï¥Â§©Ôºå‰∏çÊòØÈÖçÁΩÆÊúâÈóÆÈ¢òÂ∞±ÊòØËµÑÊ∫êÊúâÈóÆÈ¢òÔºåÊú¨Âú∞Â•Ω‰∏çÂÆπÊòìÊàêÂäü‰∫ÜÊèê‰∫§Âà∞githubÂèàÂ¥©‰∫ÜÔºåbuildÊàêÂäü‰∫ÜcssÂèà‰∏çÊ∏≤Êüì‚Ä¶<br>ÊÇ®ÊòØHydeÂêß</p>
<p>ÊÄª‰πãÔºåÁé∞Âú®Êã•Êúâ‰∏Ä‰∏™Â∏¶‰æßËæπÊ†èÁõÆÂΩïÁöÑÂ∞è‰ªìÂ∫ì‰∫ÜÔΩû<br><img src="/images/2020/8586786.png" width=200></p>
<p>ÂºÄÂêØÊé¢Á¥¢ËøõÂ∫¶Êù°<br>[|||||¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑]10%</p>
<p>(deprecated)<a href="https://blog.csdn.net/weixin_42319408" title="" target="">ËÄÅÂÆ∂</a></p>
]]></content>
      <categories>
        <category>Memo</category>
      </categories>
  </entry>
  <entry>
    <title>‰∏Ä‰∫õÊúâË∂£ÁöÑÁΩëÁ´ô</title>
    <url>/2020/03/10/bookmark/</url>
    <content><![CDATA[<h1 id="ÈÖçËâ≤"><a href="#ÈÖçËâ≤" class="headerlink" title="ÈÖçËâ≤"></a>ÈÖçËâ≤</h1><h2 id=""><a href="#" class="headerlink" title=""></a><a href="http://zhongguose.com/" title="" target="">‰∏≠ÂõΩËâ≤</a></h2><p>‰∏≠ÂõΩ‰º†ÁªüÈ¢úËâ≤ÔºåÊØè‰∏Ä‰∏™ÈÉΩÊúâCMYK„ÄÅRGBÂÄº(ÂåÖÊã¨16ËøõÂà∂Â≠óÁ¨¶‰∏≤ÂΩ¢ÂºèÔΩûÂ•ΩÁî®ÔºÅ)<br><img src="/images/2020/2020-03-10.8.30.50.jpg"><br>#5dbe8a Ë∂ÖÁà±ÁöÑËîªÊ¢¢ÁªøÔΩû</p>
<h2 id="-1"><a href="#-1" class="headerlink" title=""></a><a href="https://brandcolors.net/" title="" target="">brandcolors</a></h2><p>ÂìÅÁâåÈÖçËâ≤ÔºåÂèØ‰ª•ÂèëÁé∞ÂêÑÁßçÁúºÁÜüÁöÑÈ¢úËâ≤</p>
<p>ËøôÊòØÁôæÂ∫¶<br><img src="/images/2020/2020-03-10.8.44.30.jpg"><br>ËøôÊòØNASA<br><img src="/images/2020/2020-03-10.8.48.06.jpg"><br>ËøôÊòØË∞∑Ê≠å<br><img src="/images/2020/2020-03-10.8.46.18.jpg"><br>ËøôÊòØÂæÆËΩØ<br><img src="/images/2020/2020-03-10.8.47.35.jpg"><br>ÈÇ£‰πàÈóÆÈ¢òÊù•‰∫ÜÔºåÂÆÉ‰ª¨ÊòØË∞ÅÔºü<br><img src="/images/2020/2020-03-10.8.24.22.jpg"></p>
<p><a href="/images/2020/2020-03-10.8.24.21.jpg">ÊàëÊòØÁ≠îÊ°à</a></p>
<h2 id="-2"><a href="#-2" class="headerlink" title=""></a><a href="https://webgradients.com/" title="" target="">webgradients</a></h2><p>‰∏ÄÈ¢ó‰∏ÄÈ¢óË∂Ö‰ªôÁöÑÊ∏êÂèòËâ≤Ôºå‰πüÂèØ‰ª•ÂÖ®Â±èÊü•ÁúãÔºåËàíÈÄÇ<br><img src="/images/2020/2020-03-10.8.26.24.jpg"></p>
<h2 id="-3"><a href="#-3" class="headerlink" title=""></a><a href="https://uigradients.com/" title="" target="">uigradients</a></h2><p>‰πüÊòØÁæé‰∏ΩÁöÑÊ∏êÂèòËâ≤<br><img src="/images/2020/2020-03-10.8.30.23.jpg"></p>
<h2 id="-4"><a href="#-4" class="headerlink" title=""></a><a href="https://www.webdesignrankings.com/resources/lolcolors/" title="" target="">LOLCOLORS</a></h2><p>Ê∞¥Êª¥ÂΩ¢ÁöÑÈÖçËâ≤<br><img src="/images/2020/2020-03-10.9.13.18.jpg"></p>
<h2 id="-5"><a href="#-5" class="headerlink" title=""></a><a href="https://color.adobe.com/zh/create/color-wheel/" title="" target="">Ëâ≤ËΩÆ</a></h2><p>adobeÂá∫ÂìÅÔºå‰∏ç‰ºöÁî®Ôºå‰ΩÜÊòØÂæàÂ•ΩÁé©<br><img src="/images/2020/2020-03-10.9.10.41.jpg"></p>
<h2 id="-6"><a href="#-6" class="headerlink" title=""></a><a href="https://color.hailpixel.com/" title="" target="">Colordot</a></h2><p>Ëøô‰∏™‰πüÂæàÊúâË∂£ÔºÅÊå™Âä®ÂÖâÊ†áË∞ÉËâ≤ÔºåÁÇπÂáªÂõ∫ÂÆö<br><img src="/images/2020/2020-03-10.9.15.21.jpg"><br><img src="/images/2020/2020-03-10.9.17.15.jpg"></p>
<h1 id="ÂõæÊ†á"><a href="#ÂõæÊ†á" class="headerlink" title="ÂõæÊ†á"></a>ÂõæÊ†á</h1><h2 id="-7"><a href="#-7" class="headerlink" title=""></a><a href="https://thenounproject.com/" title="" target="">thenounproject</a></h2><p>Â∏∏Áî®ÁöÑÂõæÊ†áÁΩëÁ´ô</p>
<img src="/images/2020/2020-03-10.9.22.23.jpg">



<h1 id="ËÆæËÆ°"><a href="#ËÆæËÆ°" class="headerlink" title="ËÆæËÆ°"></a>ËÆæËÆ°</h1><h2 id="-8"><a href="#-8" class="headerlink" title=""></a><a href="https://dribbble.com/" title="" target="">dribbble</a></h2><img src="/images/2020/screencapture2020-03-18PM11.47.55.jpg">

<h2 id="-9"><a href="#-9" class="headerlink" title=""></a><a href="https://tympanus.net/codrops/" title="" target="">codrops</a></h2><p>ÂèëÁé∞ÈÖ∑ÁÇ´ÁöÑÈ°µÈù¢</p>
<img src="/images/2020/screencapture2020-03-18PM11.49.26.jpg">

]]></content>
      <categories>
        <category>Memo</category>
      </categories>
  </entry>
  <entry>
    <title>SpringÁ¨îËÆ∞09 ‰∫ãÂä°ÊéßÂà∂ÁöÑÈóÆÈ¢ò&amp;Âä®ÊÄÅ‰ª£ÁêÜ</title>
    <url>/2020/03/09/note-spring-09/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p46~55</p>
</blockquote>
<hr>
<h1 id="AccountÊ°à‰æã‰∏≠ËΩ¨Ë¥¶ÊñπÊ≥ïÁöÑ‰∫ãÂä°ÈóÆÈ¢ò"><a href="#AccountÊ°à‰æã‰∏≠ËΩ¨Ë¥¶ÊñπÊ≥ïÁöÑ‰∫ãÂä°ÈóÆÈ¢ò" class="headerlink" title="AccountÊ°à‰æã‰∏≠ËΩ¨Ë¥¶ÊñπÊ≥ïÁöÑ‰∫ãÂä°ÈóÆÈ¢ò"></a>AccountÊ°à‰æã‰∏≠ËΩ¨Ë¥¶ÊñπÊ≥ïÁöÑ‰∫ãÂä°ÈóÆÈ¢ò</h1><img src="/images/2020/20200309100124499.png">

<p>‰∫ãÂä°ÊéßÂà∂Â∫îËØ•ÈÉΩÂú®‰∏öÂä°Â±ÇÔºå‰πãÂâçÁöÑÊ°à‰æã‰∏≠ÈÉΩÂú®ÊåÅ‰πÖÂ±ÇÔºåÈúÄË¶Å‰øÆÊîπ<br>ÂÜô‰∏§‰∏™Â∑•ÂÖ∑Á±ª</p>
<h1 id="2‰∏™Â∑•ÂÖ∑Á±ª"><a href="#2‰∏™Â∑•ÂÖ∑Á±ª" class="headerlink" title="2‰∏™Â∑•ÂÖ∑Á±ª"></a>2‰∏™Â∑•ÂÖ∑Á±ª</h1><h2 id="ConnectionUtils"><a href="#ConnectionUtils" class="headerlink" title="ConnectionUtils"></a>ConnectionUtils</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ËøûÊé•ÁöÑÂ∑•ÂÖ∑Á±ªÔºåÂÆÉÁî®‰∫é‰ªéÊï∞ÊçÆÊ∫ê‰∏≠Ëé∑Âèñ‰∏Ä‰∏™ËøûÊé•ÔºåÂπ∂‰∏îÂÆûÁé∞ÂíåÁ∫øÁ®ãÁöÑÁªëÂÆö</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectionUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ThreadLocal&lt;Connection&gt; tl = <span class="keyword">new</span> ThreadLocal&lt;Connection&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDataSource</span><span class="params">(DataSource dataSource)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dataSource = dataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ã‰∏äÁöÑËøûÊé•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Connection <span class="title">getThreadConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// 1.ÂÖà‰ªéThreadLocal‰∏äËé∑Âèñ</span></span><br><span class="line">            Connection conn = tl.get();</span><br><span class="line">            <span class="comment">// 2.Âà§Êñ≠ÂΩìÂâçÁ∫øÁ®ã‰∏äÊòØÂê¶ÊúâËøûÊé•</span></span><br><span class="line">            <span class="keyword">if</span> (conn == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// 3.‰ªéÊï∞ÊçÆÊ∫ê‰∏≠Ëé∑Âèñ‰∏Ä‰∏™ËøûÊé•ÔºåÂπ∂‰∏îÂ≠òÂÖ•ThreadLocal‰∏≠</span></span><br><span class="line">                conn = dataSource.getConnection();</span><br><span class="line">                tl.set(conn);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 4.ËøîÂõûÂΩìÂâçÁ∫øÁ®ã‰∏äÁöÑËøûÊé•</span></span><br><span class="line">            <span class="keyword">return</span> conn;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ÊääËøûÊé•ÂíåÁ∫øÁ®ãËß£Áªë</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeConnection</span><span class="params">()</span></span>&#123;</span><br><span class="line">        tl.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="TransactionManager"><a href="#TransactionManager" class="headerlink" title="TransactionManager"></a>TransactionManager</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Âíå‰∫ãÂä°ÁÆ°ÁêÜÁõ∏ÂÖ≥ÁöÑÂ∑•ÂÖ∑Á±ªÔºåÂÆÉÂåÖÂê´‰∫ÜÔºåÂºÄÂêØ‰∫ãÂä°ÔºåÊèê‰∫§‰∫ãÂä°ÔºåÂõûÊªö‰∫ãÂä°ÂíåÈáäÊîæËøûÊé•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TransactionManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ConnectionUtils connectionUtils;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setConnectionUtils</span><span class="params">(ConnectionUtils connectionUtils)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.connectionUtils = connectionUtils;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ÂºÄÂêØ‰∫ãÂä°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">beginTransaction</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connectionUtils.getThreadConnection().setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Êèê‰∫§‰∫ãÂä°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">commit</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connectionUtils.getThreadConnection().commit();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ÂõûÊªö‰∫ãÂä°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">rollback</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connectionUtils.getThreadConnection().rollback();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ÈáäÊîæËøûÊé•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">release</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connectionUtils.getThreadConnection().close();<span class="comment">// ËøòÂõûËøûÊé•Ê±†‰∏≠</span></span><br><span class="line">            connectionUtils.removeConnection();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ËøûÊé•ËøòÂõûËøûÊé•Ê±†‰∏≠ÂêéÔºåËøòÈúÄÂÜçÊääËøûÊé•ÂíåÁ∫øÁ®ãËß£ÁªëÔºåÂê¶Âàô‰∏ãÊ¨°ConnectionUtils‰∏≠Âà§Êñ≠ÊòØÂê¶ÊúâËøûÊé•ÊòØtrueÔºå‰ΩÜËøô‰∏™ËøûÊé•ÊòØÂ∑≤ÁªèÂÖ≥Èó≠ÁöÑÈîôËØØÁöÑËøûÊé•</p>
<h2 id="Ê≥®ÂÖ•"><a href="#Ê≥®ÂÖ•" class="headerlink" title="Ê≥®ÂÖ•"></a>Ê≥®ÂÖ•</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;!-- ÈÖçÁΩÆConnectionÁöÑÂ∑•ÂÖ∑Á±ª ConnectionUtils --&gt;</span><br><span class="line">   &lt;bean id=<span class="string">"connectionUtils"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.itheima.utils.ConnectionUtils"</span>&gt;</span><br><span class="line">       &lt;!-- Ê≥®ÂÖ•Êï∞ÊçÆÊ∫ê--&gt;</span><br><span class="line">       &lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- ÈÖçÁΩÆ‰∫ãÂä°ÁÆ°ÁêÜÂô®--&gt;</span><br><span class="line">   &lt;bean id=<span class="string">"txManager"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.itheima.utils.TransactionManager"</span>&gt;</span><br><span class="line">       &lt;!-- Ê≥®ÂÖ•ConnectionUtils --&gt;</span><br><span class="line">       &lt;property name="connectionUtils" ref="connectionUtils"&gt;&lt;/property&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<h1 id="‰ª£Á†ÅÊîπÈÄ†"><a href="#‰ª£Á†ÅÊîπÈÄ†" class="headerlink" title="‰ª£Á†ÅÊîπÈÄ†"></a>‰ª£Á†ÅÊîπÈÄ†</h1><p>‰øÆÊîπ‰πãÂêé‰∏çÈúÄË¶ÅÂú®beans.xml‰∏≠Ê≥®ÂÖ•dataSource‰∫Ü</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆConnectionÁöÑÂ∑•ÂÖ∑Á±ª ConnectionUtils --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"connectionUtils"</span> <span class="attr">class</span>=<span class="string">"com.itheima.utils.ConnectionUtils"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Ê≥®ÂÖ•Êï∞ÊçÆÊ∫ê--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- property name="dataSource" ref="dataSource"&gt;&lt;/property--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Âú®AccountDaoImpl‰∏≠Âä†‰∏Ä‰∏™ConnectionUtils</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> ConnectionUtils connectionUtils;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setConnectionUtils</span><span class="params">(ConnectionUtils connectionUtils)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">this</span>.connectionUtils = connectionUtils;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Âπ∂‰∏îrunnerËé∑ÂèñËøûÊé•Êîπ‰∏∫</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">runner.query(connectionUtils.getThreadConnection(),<span class="string">"select * from account"</span>,<span class="keyword">new</span> BeanListHandler&lt;Account&gt;(Account<span class="class">.<span class="keyword">class</span>))</span>;</span><br></pre></td></tr></table></figure>
<p>Ê≠§Êó∂ÔºåAccountServiceImpl‰∏≠‰∏Ä‰∏™ÂÆåÊï¥ÁöÑ‰∫ãÂä°ÊµÅÁ®ãÊòØ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">findAllAccount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.ÂºÄÂêØ‰∫ãÂä°</span></span><br><span class="line">            txManager.beginTransaction();</span><br><span class="line">            <span class="comment">// 2.ÊâßË°åÊìç‰Ωú</span></span><br><span class="line">            List&lt;Account&gt; accounts = accountDao.findAllAccount();</span><br><span class="line">            <span class="comment">// 3.Êèê‰∫§‰∫ãÂä°</span></span><br><span class="line">            txManager.commit();</span><br><span class="line">            <span class="comment">// 4.ËøîÂõûÁªìÊûú</span></span><br><span class="line">            <span class="keyword">return</span> accounts;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="comment">// 5.ÂõûÊªöÊìç‰Ωú</span></span><br><span class="line">            txManager.rollback();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6.ÈáäÊîæËøûÊé•</span></span><br><span class="line">            txManager.release();</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>‰ΩÜÊòØÊØè‰∏™ÊñπÊ≥ïÈÉΩË¶ÅËøôÊ†∑ÂÜôÔºåÂæàËáÉËÇø<br>ËÄå‰∏îÊñπÊ≥ïÁöÑ‰æùËµñÂæà‰∏•ÈáçÔºàÂ¶ÇÊûúTransactionManager‰∏≠beginTransactionÊñπÊ≥ïÂêçÊîπÊàêbeginTransaction1ÔºåAccountServiceImpl‰∏≠ÊØè‰∏ÄÂ§ÑÁî®Âà∞ÁöÑÈÉΩË¶ÅÊîπÔºâ<br>Ëøõ‰∏ÄÊ≠•ÊîπÈÄ†Ôºö‰ª£ÁêÜ</p>
<p>&amp; Áé∞Âú®ÁöÑ‰æùËµñÊúâ‰∫õ‰π±‰∏ÉÂÖ´Á≥üÔºåÂú®ÂêéÈù¢SpringÁöÑ‰∫ãÂä°ÊéßÂà∂‰∏≠Ëß£ÂÜ≥</p>
<h1 id="Âä®ÊÄÅ‰ª£ÁêÜ"><a href="#Âä®ÊÄÅ‰ª£ÁêÜ" class="headerlink" title="Âä®ÊÄÅ‰ª£ÁêÜ"></a>Âä®ÊÄÅ‰ª£ÁêÜ</h1><h2 id="ÊèèËø∞"><a href="#ÊèèËø∞" class="headerlink" title="ÊèèËø∞"></a>ÊèèËø∞</h2><img src="/images/2020/20200309104823423.png">

<p>ÁâπÁÇπÔºöÂ≠óËäÇÁ†ÅÈöèÁî®ÈöèÂàõÂª∫ÔºåÈöèÁî®ÈöèÂä†ËΩΩ<br>‰ΩúÁî®Ôºö‰∏ç‰øÆÊîπÊ∫êÁ†ÅÁöÑÂü∫Á°Ä‰∏äÂØπÊñπÊ≥ïÂ¢ûÂº∫</p>
<p>ÂàÜÁ±ªÔºö</p>
<ul>
<li>Âü∫‰∫éÊé•Âè£ÁöÑÂä®ÊÄÅ‰ª£ÁêÜ</li>
<li>Âü∫‰∫éÂ≠êÁ±ªÁöÑÂä®ÊÄÅ‰ª£ÁêÜ</li>
</ul>
<p>Áî®Â§ÑÂ¶ÇÔºö<br>ËøûÊé•Ê±†closeÊñπÊ≥ïÂÖ≥Èó≠Êó∂‰∏çËÉΩÁúüÊ≠£ÂÖ≥Èó≠ÔºåËøòË¶ÅËøòÂõûÊ±†‰∏≠„ÄÇÂèØ‰ª•‰ΩøÁî®Âä®ÊÄÅ‰ª£ÁêÜÂØπÂÖ∂ËøõË°åÂ¢ûÂº∫ÔºåÊääÂÆÉËøòÂõûÊ±†Èáå<br>Ëß£ÂÜ≥‰∏≠Êñá‰π±Á†ÅÔºårequestÂØπË±°ÁöÑÊñπÊ≥ïÂ¢ûÂº∫ÔºåÁî®Ë£ÖÈ•∞ËÄÖÊ®°ÂºèÂèØ‰ª•ÂÆûÁé∞Ôºå‰πüÂèØ‰ª•Áî®Âä®ÊÄÅ‰ª£ÁêÜÂÆûÁé∞</p>
<h2 id="Âü∫‰∫éÊé•Âè£ÁöÑÂä®ÊÄÅ‰ª£ÁêÜ"><a href="#Âü∫‰∫éÊé•Âè£ÁöÑÂä®ÊÄÅ‰ª£ÁêÜ" class="headerlink" title="Âü∫‰∫éÊé•Âè£ÁöÑÂä®ÊÄÅ‰ª£ÁêÜ"></a>Âü∫‰∫éÊé•Âè£ÁöÑÂä®ÊÄÅ‰ª£ÁêÜ</h2><p>Ê∂âÂèäÁöÑÁ±ªÔºöProxy<br>Êèê‰æõËÄÖÔºöJDKÂÆòÊñπ<br>Â¶Ç‰ΩïÂàõÂª∫‰ª£ÁêÜÂØπË±°Ôºö‰ΩøÁî®ProxyÁ±ª‰∏≠ÁöÑnewProxyInstanceÊñπÊ≥ï<br>ÂàõÂª∫‰ª£ÁêÜÂØπË±°ÁöÑË¶ÅÊ±ÇÔºöË¢´‰ª£ÁêÜÁ±ªÊúÄÂ∞ëÂÆûÁé∞‰∏Ä‰∏™Êé•Âè£ÔºåÂ¶ÇÊûúÊ≤°ÊúâÂàô‰∏çËÉΩ‰ΩøÁî®</p>
<p>newProxyInstanceÊñπÊ≥ïÁöÑÂèÇÊï∞Ôºö</p>
<ul>
<li>ClassLoaderÔºöÁ±ªÂä†ËΩΩÂô®<br>ÂÆÉÊòØÁî®‰∫éÂä†ËΩΩ‰ª£ÁêÜÂØπË±°Â≠óËäÇÁ†ÅÁöÑ„ÄÇÂíåË¢´‰ª£ÁêÜÂØπË±°‰ΩøÁî®Áõ∏ÂêåÁöÑÁ±ªÂä†ËΩΩÂô®„ÄÇÂõ∫ÂÆöÂÜôÊ≥ï</li>
<li>Class[]ÔºöÂ≠óËäÇÁ†ÅÊï∞ÁªÑ<br>ÂÆÉÊòØÁî®‰∫éËÆ©‰ª£ÁêÜÂØπË±°ÂíåË¢´‰ª£ÁêÜÂØπË±°ÊúâÁõ∏ÂêåÊñπÊ≥ï„ÄÇÂõ∫ÂÆöÂÜôÊ≥ï</li>
<li>InvocationHandlerÔºöÁî®‰∫éÊèê‰æõÂ¢ûÂº∫ÁöÑ‰ª£Á†Å<br>ÂÜôÂ¶Ç‰Ωï‰ª£ÁêÜ„ÄÇ‰∏ÄËà¨ÈÉΩÊòØÂÜô‰∏Ä‰∏™ËØ•Êé•Âè£ÁöÑÂÆûÁé∞Á±ªÔºåÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÈÉΩÊòØÂåøÂêçÂÜÖÈÉ®Á±ªÔºå‰ΩÜ‰∏çÊòØÂøÖÈ°ªÁöÑ„ÄÇÊ≠§Êé•Âè£ÁöÑÂÆûÁé∞Á±ªÈÉΩÊòØË∞ÅÁî®Ë∞ÅÂÜô</li>
</ul>
<h3 id="Á§∫‰æã"><a href="#Á§∫‰æã" class="headerlink" title="Á§∫‰æã"></a>Á§∫‰æã</h3><img src="/images/2020/20200309110447314.png" width=300>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ÂØπÁîü‰∫ßÂéÇÂÆ∂Ë¶ÅÊ±ÇÁöÑÊé•Âè£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IProducer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ÈîÄÂîÆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saleProduct</span><span class="params">(<span class="keyword">float</span> money)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ÂîÆÂêé</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterService</span><span class="params">(<span class="keyword">float</span> money)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ‰∏Ä‰∏™Áîü‰∫ßËÄÖ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Producer</span> <span class="keyword">implements</span> <span class="title">IProducer</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saleProduct</span><span class="params">(<span class="keyword">float</span> money)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ÈîÄÂîÆ‰∫ßÂìÅÔºåÂπ∂ÊãøÂà∞Èí±Ôºö"</span>+money);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterService</span><span class="params">(<span class="keyword">float</span> money)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Êèê‰æõÂîÆÂêéÊúçÂä°ÔºåÂπ∂ÊãøÂà∞Èí±Ôºö"</span>+money);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ê®°Êãü‰∏Ä‰∏™Ê∂àË¥πËÄÖ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Producer producer = <span class="keyword">new</span> Producer();</span><br><span class="line"></span><br><span class="line">        IProducer proxyProducer = (IProducer) Proxy.newProxyInstance(producer.getClass().getClassLoader(),</span><br><span class="line">                producer.getClass().getInterfaces(),</span><br><span class="line">                <span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line">                    <span class="comment">/**</span></span><br><span class="line"><span class="comment">                     * ‰ΩúÁî®ÔºöÊâßË°åË¢´‰ª£ÁêÜÂØπË±°ÁöÑ‰ªª‰ΩïÊé•Âè£ÊñπÊ≥ïÈÉΩ‰ºöÁªèËøáËØ•ÊñπÊ≥ïÔºàÂç≥ÊúâÊã¶Êà™ÂäüËÉΩÔºâ</span></span><br><span class="line"><span class="comment">                     * ÊñπÊ≥ïÂèÇÊï∞ÁöÑÂê´‰πâ</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@param</span> proxy   ‰ª£ÁêÜÂØπË±°ÁöÑÂºïÁî®</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@param</span> method  ÂΩìÂâçÊâßË°åÁöÑÊñπÊ≥ï</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@param</span> args    ÂΩìÂâçÊâßË°åÊñπÊ≥ïÊâÄÈúÄÁöÑÂèÇÊï∞</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@return</span>        ÂíåË¢´‰ª£ÁêÜÂØπË±°ÊñπÊ≥ïÊúâÁõ∏ÂêåÁöÑËøîÂõûÂÄº</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">                     */</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                        <span class="comment">// Êé•Êî∂ËøîÂõûÂÄº</span></span><br><span class="line">                        Object returnValue = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">                        <span class="comment">// 1.Ëé∑ÂèñÊñπÊ≥ïÊâßË°åÁöÑÂèÇÊï∞</span></span><br><span class="line">                        Float money = (Float)args[<span class="number">0</span>];</span><br><span class="line">                        <span class="comment">// 2.Âà§Êñ≠ÂΩìÂâçÊñπÊ≥ïÊòØ‰∏çÊòØÈîÄÂîÆ</span></span><br><span class="line">                        <span class="keyword">if</span>(<span class="string">"saleProduct"</span>.equals(method.getName())) &#123;</span><br><span class="line">                            returnValue = method.invoke(producer, money*<span class="number">0.8f</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">return</span> returnValue;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">    </span><br><span class="line">    	proxyProducer.saleProduct(<span class="number">10000f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/images/2020/20200309111349124.png" width=600>

<p>‰ΩøÁî®‰ª£ÁêÜÂêéÔºåÊ∂àË¥πËÄÖ‰ªò10000Ôºå‰ª£ÁêÜÊèêÊàê20%ÔºåÁîü‰∫ßËÄÖÊãøÂà∞8000</p>
<p>Âπ∂Ê≤°ÊúâÂØπÁîü‰∫ßËÄÖÁöÑ‰ª£Á†ÅÂÅö‰ªª‰Ωï‰øÆÊîπÔºå‰ΩÜÊòØÂÆûÁé∞‰∫ÜÂ¢ûÂº∫<br>Ê≠§Â§ÑÂç≥‰∏∫Âü∫‰∫éÊé•Âè£ÁöÑÂä®ÊÄÅ‰ª£ÁêÜ</p>
<p>‰ΩÜÊòØÊúâ‰∏Ä‰∏™ÈóÆÈ¢ò<br>Â¶ÇÊûúÁîü‰∫ßËÄÖÊ≤°ÊúâÂÆûÁé∞Êé•Âè£ÔºåÂ∞±‰∏çËÉΩËøôÊ†∑Áî®‰∫ÜÔºå‰ºöÊä•‰ª£ÁêÜÂºÇÂ∏∏</p>
<h2 id="Âü∫‰∫éÂ≠êÁ±ªÁöÑÂä®ÊÄÅ‰ª£ÁêÜ"><a href="#Âü∫‰∫éÂ≠êÁ±ªÁöÑÂä®ÊÄÅ‰ª£ÁêÜ" class="headerlink" title="Âü∫‰∫éÂ≠êÁ±ªÁöÑÂä®ÊÄÅ‰ª£ÁêÜ"></a>Âü∫‰∫éÂ≠êÁ±ªÁöÑÂä®ÊÄÅ‰ª£ÁêÜ</h2><p>Ë¶ÅÊ±ÇÊúâÁ¨¨‰∏âÊñπjarÂåÖÁöÑÊîØÊåÅ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1_3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Ê∂âÂèäÁöÑÁ±ªÔºöEnhancer<br>Êèê‰æõËÄÖÔºöÁ¨¨‰∏âÊñπcglibÂ∫ì</p>
<p>Â¶Ç‰ΩïÂàõÂª∫‰ª£ÁêÜÂØπË±°Ôºö‰ΩøÁî®EnhancerÁ±ª‰∏≠ÁöÑcreateÊñπÊ≥ï<br>ÂàõÂª∫‰ª£ÁêÜÂØπË±°ÁöÑË¶ÅÊ±ÇÔºöË¢´‰ª£ÁêÜÁ±ª‰∏çËÉΩÊòØÊúÄÁªàÁ±ª</p>
<p>createÊñπÊ≥ïÁöÑÂèÇÊï∞Ôºö</p>
<ul>
<li>ClassÔºöÂ≠óËäÇÁ†Å<br>Áî®‰∫éÊåáÂÆöË¢´‰ª£ÁêÜÂØπË±°ÁöÑÂ≠óËäÇÁ†Å</li>
<li>CallbackÔºöÁî®‰∫éÊèê‰æõÂ¢ûÂº∫ÁöÑ‰ª£Á†Å<br>ÂÜôÂ¶Ç‰Ωï‰ª£ÁêÜ„ÄÇ‰∏ÄËà¨ÊòØÂÜô‰∏Ä‰∏™ËØ•Êé•Âè£ÁöÑÂÆûÁé∞Á±ªÔºåÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÈÉΩÊòØÂåøÂêçÂÜÖÈÉ®Á±ªÔºå‰ΩÜ‰∏çÊòØÂøÖÈ°ªÁöÑ<br>Ê≠§Êé•Âè£ÁöÑÂÆûÁé∞Á±ªÈÉΩÊòØË∞ÅÁî®Ë∞ÅÂÜô<br>‰∏ÄËà¨ÂÜôÁöÑÈÉΩÊòØËØ•Êé•Âè£ÁöÑÂ≠êÊé•Âè£ÂÆûÁé∞Á±ªÔºöMethodInterceptor</li>
</ul>
<h3 id="Á§∫‰æã-1"><a href="#Á§∫‰æã-1" class="headerlink" title="Á§∫‰æã"></a>Á§∫‰æã</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ‰∏Ä‰∏™Áîü‰∫ßËÄÖ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Producer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ÈîÄÂîÆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saleProduct</span><span class="params">(<span class="keyword">float</span> money)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ÈîÄÂîÆ‰∫ßÂìÅÔºåÂπ∂ÊãøÂà∞Èí±Ôºö"</span>+money);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ÂîÆÂêé</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterService</span><span class="params">(<span class="keyword">float</span> money)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Êèê‰æõÂîÆÂêéÊúçÂä°ÔºåÂπ∂ÊãøÂà∞Èí±Ôºö"</span>+money);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.cglib;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> net.sf.cglib.proxy.Enhancer;</span><br><span class="line"><span class="keyword">import</span> net.sf.cglib.proxy.MethodInterceptor;</span><br><span class="line"><span class="keyword">import</span> net.sf.cglib.proxy.MethodProxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ê®°Êãü‰∏Ä‰∏™Ê∂àË¥πËÄÖ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Producer producer = <span class="keyword">new</span> Producer();</span><br><span class="line"></span><br><span class="line">        Producer cglibProducer = (Producer)Enhancer.create(producer.getClass(), <span class="keyword">new</span> MethodInterceptor() &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * ÊâßË°åË¢´‰ª£ÁêÜÂØπË±°ÁöÑ‰ªª‰ΩïÊñπÊ≥ïÈÉΩ‰ºöÁªèËøáËØ•ÊñπÊ≥ï</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> proxy</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> method</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">             *    ‰ª•‰∏ä‰∏â‰∏™ÂèÇÊï∞ÂíåÂü∫‰∫éÊé•Âè£ÁöÑÂä®ÊÄÅ‰ª£ÁêÜ‰∏≠invokeÊñπÊ≥ïÁöÑÂèÇÊï∞ÊòØ‰∏ÄÊ†∑ÁöÑ</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> methodProxy ÔºöÂΩìÂâçÊâßË°åÊñπÊ≥ïÁöÑ‰ª£ÁêÜÂØπË±°</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">             * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span><span class="params">(Object proxy, Method method, Object[] args, MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                Object returnValue = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 1.Ëé∑ÂèñÊñπÊ≥ïÊâßË°åÁöÑÂèÇÊï∞</span></span><br><span class="line">                Float money = (Float)args[<span class="number">0</span>];</span><br><span class="line">                <span class="comment">// 2.Âà§Êñ≠ÂΩìÂâçÊñπÊ≥ïÊòØ‰∏çÊòØÈîÄÂîÆ</span></span><br><span class="line">                <span class="keyword">if</span>(<span class="string">"saleProduct"</span>.equals(method.getName())) &#123;</span><br><span class="line">                    returnValue = method.invoke(producer, money*<span class="number">0.8f</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> returnValue;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        cglibProducer.saleProduct(<span class="number">12000f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="‰ΩøÁî®Âä®ÊÄÅ‰ª£ÁêÜÂÆûÁé∞‰∫ãÂä°ÊéßÂà∂"><a href="#‰ΩøÁî®Âä®ÊÄÅ‰ª£ÁêÜÂÆûÁé∞‰∫ãÂä°ÊéßÂà∂" class="headerlink" title="‰ΩøÁî®Âä®ÊÄÅ‰ª£ÁêÜÂÆûÁé∞‰∫ãÂä°ÊéßÂà∂"></a>‰ΩøÁî®Âä®ÊÄÅ‰ª£ÁêÜÂÆûÁé∞‰∫ãÂä°ÊéßÂà∂</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Áî®‰∫éÂàõÂª∫ServiceÁöÑ‰ª£ÁêÜÂØπË±°ÁöÑÂ∑•ÂéÇ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IAccountService accountService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TransactionManager txManager;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">setAccountService</span><span class="params">(IAccountService accountService)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.accountService = accountService;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTxManager</span><span class="params">(TransactionManager txManager)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.txManager = txManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Ëé∑ÂèñService‰ª£ÁêÜÂØπË±°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IAccountService <span class="title">getAccountService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (IAccountService)Proxy.newProxyInstance(accountService.getClass().getClassLoader(),</span><br><span class="line">                accountService.getClass().getInterfaces(),</span><br><span class="line">                <span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line">                    <span class="comment">/**</span></span><br><span class="line"><span class="comment">                     * Ê∑ªÂä†‰∫ãÂä°ÁöÑÊîØÊåÅ</span></span><br><span class="line"><span class="comment">                     *</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@param</span> proxy</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@param</span> method</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">                     * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">                     */</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                        <span class="keyword">if</span>(<span class="string">"test"</span>.equals(method.getName()))&#123;</span><br><span class="line">                            <span class="keyword">return</span> method.invoke(accountService,args);</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        Object rtValue = <span class="keyword">null</span>;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="comment">// 1.ÂºÄÂêØ‰∫ãÂä°</span></span><br><span class="line">                            txManager.beginTransaction();</span><br><span class="line">                            <span class="comment">// 2.ÊâßË°åÊìç‰Ωú</span></span><br><span class="line">                            rtValue = method.invoke(accountService, args);</span><br><span class="line">                            <span class="comment">// 3.Êèê‰∫§‰∫ãÂä°</span></span><br><span class="line">                            txManager.commit();</span><br><span class="line">                            <span class="comment">// 4.ËøîÂõûÁªìÊûú</span></span><br><span class="line">                            <span class="keyword">return</span> rtValue;</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                            <span class="comment">// 5.ÂõûÊªöÊìç‰Ωú</span></span><br><span class="line">                            txManager.rollback();</span><br><span class="line">                            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">                        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                            <span class="comment">// 6.ÈáäÊîæËøûÊé•</span></span><br><span class="line">                            txManager.release();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Âπ∂ÂØπbeans.xmlÂÅöÁõ∏Â∫îÁöÑ‰øÆÊîπ<br>ÊµãËØï‰∏≠IAccountServiceÂè™Áî®Autowird‰∏çÂ§ü‰∫ÜÔºåËøòÈúÄ@Qualifier(‚ÄúproxyAccountService‚Äù)</p>
<p>‰ΩøÁî®Âä®ÊÄÅ‰ª£ÁêÜÂêéÔºåÊ∂àÈô§‰∫ÜÈáçÂ§ç‰ª£Á†ÅÔºåËß£Èô§‰∫ÜÊñπÊ≥ïÁöÑ‰æùËµñ<br>‰ΩÜÊòØÈÖçÁΩÆÂèòÂæóÁπÅÁêê‰∫Ü<br>Êõ¥Â•ΩÁöÑÊñπÂºèÔºü‚Äî‚Äî&gt;AOP</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>VueÁ¨îËÆ∞02 Spring Boot+VueÂâçÂêéÁ´ØÂàÜÁ¶ªÂºÄÂèëÂü∫Êú¨ÊµÅÁ®ã</title>
    <url>/2020/03/06/note-vue-02/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av85793766?p=1" target="_blank" rel="noopener">https://www.bilibili.com/video/av85793766?p=1</a></p>
</blockquote>
<hr>
<h1 id="VueÂ∑•Á®ã"><a href="#VueÂ∑•Á®ã" class="headerlink" title="VueÂ∑•Á®ã"></a>VueÂ∑•Á®ã</h1><h2 id="ÂàõÂª∫"><a href="#ÂàõÂª∫" class="headerlink" title="ÂàõÂª∫"></a>ÂàõÂª∫</h2><p>vue uiÂàõÂª∫Â∑•Á®ãÔºåÂØºÂÖ•Idea<br>(jsÁâàÊú¨Â§™‰ΩéÂèØËÉΩÊúâËØ≠Ê≥ïÊä•ÈîôÔºåÈÖçÁΩÆ‰∏≠Êîπ‰∏∫6Âç≥ÂèØ)</p>
<p>ÂêØÂä®Ôºönpm run serve<br>ÂÅúÊ≠¢Ôºöctrl+C</p>
<h2 id="ÂºïÂÖ•È°µÈù¢-amp-ÈÖçÁΩÆË∑ØÂæÑ"><a href="#ÂºïÂÖ•È°µÈù¢-amp-ÈÖçÁΩÆË∑ØÂæÑ" class="headerlink" title="ÂºïÂÖ•È°µÈù¢&amp;ÈÖçÁΩÆË∑ØÂæÑ"></a>ÂºïÂÖ•È°µÈù¢&amp;ÈÖçÁΩÆË∑ØÂæÑ</h2><p>router/index.js‰∏≠ÂºïÂÖ•.vue<br>App.vue‰∏≠ÈÖçÁΩÆrouter</p>
<h2 id="Book-vue"><a href="#Book-vue" class="headerlink" title="Book.vue"></a>Book.vue</h2><p>templateÂ∞±ÊòØhtmlÔºåscriptÂ∞±ÊòØjsÔºåstyleÂ∞±ÊòØcss<br>template‰∏≠Âè™ÂÖÅËÆ∏Êúâ‰∏Ä‰∏™Ê†πËäÇÁÇπ<br>ÂâçÁ´ØÂèØ‰ª•ÂÖàÁî®ÂÅáÊï∞ÊçÆÔºåÂÜôÂú®scriptÈáåÈù¢</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div id=<span class="string">"showcase"</span>&gt;</span><br><span class="line">        &lt;table&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;ÁºñÂè∑&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">                &lt;td&gt;ÂêçÁß∞&lt;/</span>td&gt;</span><br><span class="line">                &lt;td&gt;‰ΩúËÄÖ&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>tr&gt;</span><br><span class="line">            &lt;tr v-<span class="keyword">for</span>=<span class="string">"item in books"</span>&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;item.id&#125;&#125;&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">                &lt;td&gt;&#123;&#123;item.name&#125;&#125;&lt;/</span>td&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;item.author&#125;&#125;&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>tr&gt;</span><br><span class="line">        &lt;<span class="regexp">/table&gt;</span></span><br><span class="line"><span class="regexp">        &#123;&#123;msg&#125;&#125;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">    export default &#123;</span></span><br><span class="line"><span class="regexp">        name: "Book",</span></span><br><span class="line"><span class="regexp">        data()&#123;</span></span><br><span class="line"><span class="regexp">            return&#123;</span></span><br><span class="line"><span class="regexp">                msg:'2019999999999999',</span></span><br><span class="line"><span class="regexp">                books:[</span></span><br><span class="line"><span class="regexp">                    &#123;</span></span><br><span class="line"><span class="regexp">                        id: 20200001,</span></span><br><span class="line"><span class="regexp">                        name: 'ÁóÖÊØíÊòüÁêÉ',</span></span><br><span class="line"><span class="regexp">                        author: 'Âç°Â∞î¬∑ÈΩêÈªò'</span></span><br><span class="line"><span class="regexp">                    &#125;,</span></span><br><span class="line"><span class="regexp">                    &#123;</span></span><br><span class="line"><span class="regexp">                        id:20200002,</span></span><br><span class="line"><span class="regexp">                        name: 'Ê¥õÂü∫ÂêØÁ§∫ÂΩï',</span></span><br><span class="line"><span class="regexp">                        author: '‰πîÂÆâÂ¶Æ¬∑M¬∑ÂìàÈáåÊñØ'</span></span><br><span class="line"><span class="regexp">                    &#125;,</span></span><br><span class="line"><span class="regexp">                    &#123;</span></span><br><span class="line"><span class="regexp">                        id:20200003,</span></span><br><span class="line"><span class="regexp">                        name: 'Â¢ûÂº∫‰∫∫Á±ª',</span></span><br><span class="line"><span class="regexp">                        author: 'Êµ∑‰º¶¬∑Â∏ïÂ∏ïÊâ¨Â∞ºÊñØ'</span></span><br><span class="line"><span class="regexp">                    &#125;</span></span><br><span class="line"><span class="regexp">                ]</span></span><br><span class="line"><span class="regexp">            &#125;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure>
<p>vueÂèØ‰ª•Âä®ÊÄÅÂä†ËΩΩÔºåÊîπÂÆå‰ª£Á†Å‰∏çÈúÄË¶ÅÈáçÂêØÔºåÁõ¥Êé•ËÆøÈóÆÂç≥ÂèØ<br>ËØï‰∫Ü‰∏ãÂèØ‰ª•Ê≠£Â∏∏ËÆøÈóÆÔΩû</p>
<h1 id="SpringÂ∑•Á®ã"><a href="#SpringÂ∑•Á®ã" class="headerlink" title="SpringÂ∑•Á®ã"></a>SpringÂ∑•Á®ã</h1><h2 id="ÂàõÂª∫-1"><a href="#ÂàõÂª∫-1" class="headerlink" title="ÂàõÂª∫"></a>ÂàõÂª∫</h2><p>Idea‰∏≠Spring InitializrÈªòËÆ§Ê®°ÁâàÂàõÂª∫<br>‰æùËµñÂãæ‰∏äÔºöLombok„ÄÅSpring Web„ÄÅSpring Data JPA„ÄÅMySQL Driver</p>
<h2 id="ÈÖçÁΩÆÊñá‰ª∂"><a href="#ÈÖçÁΩÆÊñá‰ª∂" class="headerlink" title="ÈÖçÁΩÆÊñá‰ª∂"></a>ÈÖçÁΩÆÊñá‰ª∂</h2><p>ËøôÈáåÊ≤°ÊúâÁî®application.propertiesÔºåÂà†Êéâ<br>Êñ∞Âª∫application.ymlÔºåÂ≠òÊîæËøûÊé•Êï∞ÊçÆÂ∫ìÁöÑ‰ø°ÊÅØ</p>
<h2 id="Êï∞ÊçÆÂ∫ìÂª∫Ë°®"><a href="#Êï∞ÊçÆÂ∫ìÂª∫Ë°®" class="headerlink" title="Êï∞ÊçÆÂ∫ìÂª∫Ë°®"></a>Êï∞ÊçÆÂ∫ìÂª∫Ë°®</h2><p>Áî®Êèê‰æõÁöÑbook.sqlÂª∫bookË°®</p>
<h2 id="Book"><a href="#Book" class="headerlink" title="Book"></a>Book</h2><p>ÂíåbookË°®ÂØπÂ∫îÔºåÂä†@EntityÂêéÔºåÊ†πÊçÆÁ±ªÂêçÂíåË°®ÂêçÂØπÂ∫îÁªëÂÆö<br>ÂÜçÂä†‰∏Ä‰∏™@DataÔºåÊòØlombokÁöÑÊ≥®Ëß£ÔºåËá™Âä®ÁîüÊàêget/set<br>Â±ûÊÄßÂêçÂíåÂèòÈáèÂêçÂØπÂ∫îÔºåËá™Âä®ÁªëÂÆö<br>idË¶ÅÂä†‰∏Ä‰∏™@IdÔºåÂÆÉÊòØ‰∏ªÈîÆ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="BookRepository"><a href="#BookRepository" class="headerlink" title="BookRepository"></a>BookRepository</h2><p>ÁªßÊâøJpaRepositoryÔºå&lt;&gt;‰∏≠Á¨¨‰∏Ä‰∏™ÊòØÂÆû‰ΩìÁ±ªÔºåÁ¨¨‰∫å‰∏™ÊòØ‰∏ªÈîÆÁ±ªÂûã<br>Êé•Âè£‰∏≠findAllÁ≠âÊñπÊ≥ïÈÉΩÊúâÔºåÁõ¥Êé•Áî®Â∞±Ë°å</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BookRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Book</span>,<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ÊµãËØïBookRepository"><a href="#ÊµãËØïBookRepository" class="headerlink" title="ÊµãËØïBookRepository"></a>ÊµãËØïBookRepository</h2><p>ÁÑ∂ÂêéÊµãËØï‰∏Ä‰∏ã<br>Âª∫Á´ãÁöÑSpringÂ∑•Á®ãËá™Â∏¶‰∏Ä‰∏™ÊµãËØïÁ±ªBookstoreServerApplicationTests<br>ÊàñËÄÖËá™Â∑±ÂàõÂª∫ÔºåÂú®Êé•Âè£Âêç‰∏äÂè≥ÈîÆ-&gt;Go To-&gt;Test-&gt;Create New Test<br>ÁªôÁîüÊàêÁöÑÊµãËØïÁ±ªÂä†‰∏Ä‰∏™@SpringBootTestÔºåË¶ÅÊµãËØïÁöÑÁ±ª@AutowiredËá™Âä®Ê≥®ÂÖ•ÔºåÂÜôÁöÑÊñπÊ≥ïÂä†‰∏Ä‰∏™@TestÔºåÂ∞±ÂèØ‰ª•ËøêË°å‰∫Ü</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookRepositoryTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookRepository bookRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(bookRepository.findAll());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ËØï‰∏Ä‰∏ã<br><img src="/images/2020/20200306180717607.png"><br>ÊàêÂäü<br>‰∏îÊâìÂç∞‰∫ÜsqlËØ≠Âè•ÔºåÂõ†‰∏∫ymlÈáåÈù¢ÈÖç‰∫Üjpa: show-sql: trueÂíåÊ†ºÂºèÂåñ</p>
<p>ÊØèÂÜô‰∏Ä‰∏™repositoryÂÖàÊµã‰∏Ä‰∏ãÔºå‰øùËØÅÊ≤°ÈóÆÈ¢òÂÜçÁªßÁª≠ÂÜôcontroller</p>
<h2 id="BookHandler"><a href="#BookHandler" class="headerlink" title="BookHandler"></a>BookHandler</h2><p>ÈÖç‰∏äÂØπÂ∫îÁöÑÊ≥®Ëß£Âíåmapping</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/book"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookRepository bookRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Book&gt; <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bookRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><p>ËøêË°åBookstoreServerApplicationÂêØÂä®Á±ª<br>Ê≥®ÊÑèÊ≠§Êó∂Á´ØÂè£ÊòØ8181<br><img src="/images/2020/20200306181433240.png"><br>Ê≤°ÊúâÈóÆÈ¢òÔºåÂêéÁ´ØÂ∞±ÊêûÂÆö‰∫Ü<br>Êé•‰∏ãÊù•ÂâçÂêéÁ´ØÂØπÊé•Â∞±Ë°å</p>
<h1 id="ÂØπÊé•"><a href="#ÂØπÊé•" class="headerlink" title="ÂØπÊé•"></a>ÂØπÊé•</h1><p>vue‰∏≠ajaxËØ∑Ê±ÇÁî®axiosÁªÑ‰ª∂<br>ÔºàÂÖàÂú®ÂëΩ‰ª§Ë°åÊääÊúçÂä°ÂÅúÊéâÔºåÂÆâË£ÖÔºåvue add axiosÔºâ<br>Ë£ÖÂ•Ω‰πãÂêéËá™Âä®Êúâ‰∫Üsrc/plugins/axios.js</p>
<p>Âà∑Êñ∞È°µÈù¢Êó∂ËØªÂèñÊï∞ÊçÆÔºåÂèØ‰ª•ÂÜôÂà∞ÂàùÂßãÂåñÂáΩÊï∞‰∏≠ÔºåÊØîÂ¶ÇËøôÊ†∑Ôºö</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">		created() &#123;</span><br><span class="line">            alert(<span class="number">123</span>)</span><br><span class="line">            axios.get(<span class="string">'http://localhost:8181/book/findAll/'</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">resp</span>)</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(resp)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>Âà∑Êñ∞ÔºåÁúãÊµèËßàÂô®ÁöÑÊéßÂà∂Âè∞<br>Êúâ‰∏™Ë∑®ÂüüÈóÆÈ¢òÔºà8181ËÆøÈóÆ8080ÔºâÔºåÂâçÁ´ØÂêéÁ´ØÈÉΩÂèØ‰ª•Ëß£ÂÜ≥<br>ËøôÈáåÂú®SpringBoot‰∏≠Ëß£ÂÜ≥<br>Âè™ÈúÄÊ∑ªÂä†‰∏Ä‰∏™ÈÖçÁΩÆÁ±ªÔºåÈáçÂÜôaddCorsMappingsÊñπÊ≥ïÂç≥ÂèØÔºà‰∏çÁî®ËÆ∞ÔºåÂõ∫ÂÆöÁöÑÔºåË¶ÅÁî®ÁöÑÊó∂ÂÄôÂ§çÂà∂Â∞±Ë°åÔºâ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CrosConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addMapping(<span class="string">"/**"</span>)</span><br><span class="line">                .allowedOrigins(<span class="string">"*"</span>)</span><br><span class="line">                .allowedMethods(<span class="string">"GET"</span>, <span class="string">"HEAD"</span>, <span class="string">"POST"</span>, <span class="string">"PUT"</span>, <span class="string">"DELETE"</span>, <span class="string">"OPTIONS"</span>)</span><br><span class="line">                .allowCredentials(<span class="keyword">true</span>)</span><br><span class="line">                .maxAge(<span class="number">3600</span>)</span><br><span class="line">                .allowedHeaders(<span class="string">"*"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ÈáçÂêØÔºåÂÜçËÆøÈóÆÂ∞±Â•Ω‰∫Ü<br><img src="https://img-blog.csdnimg.cn/20200306185233941.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjMxOTQwOA==,size_16,color_FFFFFF,t_70" alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"><br>ÁÑ∂ÂêéÂÜçÂõûË∞ÉÂáΩÊï∞‰∏≠ÊäädataÊãøÂà∞Â∞±Ë°å<br>Ê≥®ÊÑèÔºö‰∏çËÉΩÁõ¥Êé•Áî®thisÔºåÂõûË∞ÉÂáΩÊï∞‰∏≠thisÊåáÁöÑÊòØÂõûË∞ÉÔºåËÄå‰∏çÊòØÂ§ñÈù¢ÔºåË¶ÅÂÖàÂú®Â§ñÈù¢ÊãøÂà∞this</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div id=<span class="string">"showcase"</span>&gt;</span><br><span class="line">        &lt;table&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;ÁºñÂè∑&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;ÂêçÁß∞&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;‰ΩúËÄÖ&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr v-<span class="keyword">for</span>=<span class="string">"item in books"</span>&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;item.id&#125;&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;item.name&#125;&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&#123;&#123;item.author&#125;&#125;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export <span class="keyword">default</span> &#123;</span><br><span class="line">        name: <span class="string">"Book"</span>,</span><br><span class="line">        data()&#123;</span><br><span class="line">            <span class="keyword">return</span>&#123;</span><br><span class="line">                books:[]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        created() &#123;</span><br><span class="line">            <span class="keyword">const</span> _this = <span class="keyword">this</span></span><br><span class="line">            axios.get(<span class="string">'http://localhost:8181/book/findAll'</span>).then(function (resp)&#123;</span><br><span class="line">                _this.books = resp.data</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>ËøôÊ†∑ÂâçÂêéÁ´ØÂ∞±Ëøû‰∏ä‰∫Ü<br><img src="/images/2020/20200306185851937.png"></p>
<h1 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h1><ol>
<li>ÂÜôÂâçÁ´ØÔºåÁî®Âä†Êï∞ÊçÆÊµãËØï</li>
<li>ÂÜôÂêéÁ´ØÔºå‰øùËØÅÊé•Âè£ËÉΩËÆøÈóÆ</li>
<li>Ë∞ÉÂêéÁ´ØÔºàÂêéÁ´ØËß£ÂÜ≥Ë∑®ÂüüÈóÆÈ¢òÔºâ</li>
</ol>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>VueÁ¨îËÆ∞01 @vue_cliÁéØÂ¢ÉÊê≠Âª∫</title>
    <url>/2020/03/06/note-vue-01/</url>
    <content><![CDATA[<img src="/images/2020/20200306115323370.png">
Âú®ÁªèÂéÜ‰∫ÜËøô‰πàÂ§öÂùë‰πãÂêéÁªà‰∫ébuild succeeded‰∫Ü
ÂèØÂñúÂèØË¥∫
Êï¥ÁêÜ‰∏ãÊàêÂäüË∑ØÂæÑ

<hr>
<p>ÁâàÊú¨Ôºö</p>
<ul>
<li>macOS Catalina 10.15.3</li>
<li>Homebrew 2.2.6</li>
<li>node v13.8.0</li>
<li>npm 6.13.7</li>
<li>@vue/cli 4.2.3</li>
</ul>
<hr>
<h2 id="1-ÂÆâË£Önode"><a href="#1-ÂÆâË£Önode" class="headerlink" title="1. ÂÆâË£Önode"></a>1. ÂÆâË£Önode</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">brew install node</span><br></pre></td></tr></table></figure>
<p>ÂùëÔºöbrewÂ∑®ÊÖ¢Êó†ÊØî<br>Ëß£ÂÜ≥ÔºöÊç¢Ê∏ÖÂçéÈïúÂÉè</p>
<blockquote>
<p><a href="https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/</a></p>
</blockquote>
<h2 id="2-ÂÆâË£Ö-vue-cli"><a href="#2-ÂÆâË£Ö-vue-cli" class="headerlink" title="2. ÂÆâË£Ö@vue/cli"></a>2. ÂÆâË£Ö@vue/cli</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo npm install -g @vue&#x2F;cli</span><br></pre></td></tr></table></figure>
<p>ÂùëÔºöÊ≤°ÊúâÊùÉÈôê<br>Ëß£ÂÜ≥Ôºösudo</p>
<blockquote>
<p><a href="https://www.jianshu.com/p/0207ee424422" target="_blank" rel="noopener">https://www.jianshu.com/p/0207ee424422</a></p>
</blockquote>
<p>ÂùëÔºöÊñ∞ÊóßÁâàÊú¨ÂêçÂ≠ó‰∏ç‰∏ÄÊ†∑<br>Ëß£ÂÜ≥Ôºö@vue/cliÔºà‰∏çÊòØvue-cliÔºâ</p>
<blockquote>
<p><a href="https://cli.vuejs.org/zh/guide/installation.html" target="_blank" rel="noopener">https://cli.vuejs.org/zh/guide/installation.html</a></p>
</blockquote>
<h2 id="3-ÂàõÂª∫È°πÁõÆ"><a href="#3-ÂàõÂª∫È°πÁõÆ" class="headerlink" title="3. ÂàõÂª∫È°πÁõÆ"></a>3. ÂàõÂª∫È°πÁõÆ</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vue ui</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringÁ¨îËÆ∞08 SpringÊï¥ÂêàJunit</title>
    <url>/2020/03/04/note-spring-08/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p44ÔΩû45 </p>
</blockquote>
<hr>
<p>Áî®‰∫éËß£ÂÜ≥‰πãÂâçÊµãËØïÊó∂ÁöÑÈáçÂ§ç‰ª£Á†Å</p>
<p>ÂéüÊú¨ÁöÑAccountServiceTest‰∏≠ÔºåÊØè‰∏™ÊñπÊ≥ï‰∏≠ÈÉΩÊúâÊ≠•È™§1Âíå2</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCreate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.Ëé∑ÂèñÂÆπÂô®</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.ÂæóÂà∞‰∏öÂä°Â±ÇÂØπË±°</span></span><br><span class="line">        IAccountService as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.ÊâßË°åÊñπÊ≥ï</span></span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setName(<span class="string">"eee"</span>);</span><br><span class="line">        account.setMoney(<span class="number">10000f</span>);</span><br><span class="line">        as.createAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.Ëé∑ÂèñÂÆπÂô®</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.ÂæóÂà∞‰∏öÂä°Â±ÇÂØπË±°</span></span><br><span class="line">        IAccountService as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.ÊâßË°åÊñπÊ≥ï</span></span><br><span class="line">        as.deleteAccount(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>‰ΩøÁî®init()ÂèØ‰ª•Â∞ÜÈáçÂ§ç‰ª£Á†ÅÊäΩÂá∫Êù•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ApplicationContext ac;</span><br><span class="line">    <span class="keyword">private</span> IAccountService as;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.Ëé∑ÂèñÂÆπÂô®</span></span><br><span class="line">        ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.ÂæóÂà∞‰∏öÂä°Â±ÇÂØπË±°</span></span><br><span class="line">        as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCreate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setName(<span class="string">"eee"</span>);</span><br><span class="line">        account.setMoney(<span class="number">10000f</span>);</span><br><span class="line">        as.createAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span></span>&#123;</span><br><span class="line">        as.deleteAccount(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>‰ΩÜÊòØÂπ∂Ê≤°ÊúâÊ†πÊú¨‰∏äËß£ÂÜ≥ÈóÆÈ¢ò<br>ÂºÄÂèëÂíåÊµãËØïÁöÑ‰ª£Á†Å‰ªçÂú®‰∏Ä‰∏™Á±ª‰∏≠ÔºåÈúÄË¶ÅËøõ‰∏ÄÊ≠•Ëß£ËÄ¶</p>
<p>Â¶ÇÊûú‰∏çË¶Åinit()ÔºåÂè™Âú®ÂèòÈáè‰∏äÂä†@AutowiredÊ≤°ÊúâÁî®<br>‰∏ÄÊ≥¢ÂàÜÊûêÔºö<br><img src="/images/2020/20200304194906403.png" width=600></p>
<p>Ëß£ÂÜ≥ÊñπÊ≥ïÔºö</p>
<ol>
<li><p>pom.xml‰∏≠ÂØºÂÖ•springÊï¥ÂêàjunitÁöÑ‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>‰∏îÔºö‰ΩøÁî®spring 5.xÊó∂ÔºåjuintÈúÄË¶Å4.12‰ª•‰∏äÁöÑÁâàÊú¨</p>
</li>
<li><p>‰ΩøÁî®junitÁöÑ@RunWithÊ≥®Ëß£Â∞ÜÂéüÊúâÁöÑmain()ÊõøÊç¢ÊàêspringÊèê‰æõÁöÑ</p>
</li>
<li><p>Áî®@ContextConfigurationÂëäÁü•springÁöÑËøêË°åÂô®ÔºåÂü∫‰∫éxmlËøòÊòØÊ≥®Ëß£ÔºåÂπ∂ËØ¥Êòé‰ΩçÁΩÆ<br>locationsÔºöÊåáÂÆöxmlÊñá‰ª∂ÁöÑ‰ΩçÁΩÆÔºåÂä†‰∏äclasspathÂÖ≥ÈîÆÂ≠óÔºåË°®Á§∫Âú®Á±ªË∑ØÂæÑ‰∏ã<br>classesÔºöÊåáÂÆöÊ≥®ÈáäÁ±ªÊâÄÂú®ÁöÑ‰ΩçÁΩÆ</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">ContextConfiguration</span>(<span class="title">locations</span> </span>= <span class="string">"classpath:beans.xml"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountService as;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCreate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setName(<span class="string">"eee"</span>);</span><br><span class="line">        account.setMoney(<span class="number">10000f</span>);</span><br><span class="line">        as.createAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Âç≥ÂèØÊ≠£Â∏∏ÊâßË°å</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringÁ¨îËÆ∞07 Âü∫‰∫éÊ≥®Ëß£ÁöÑIoCÊ°à‰æãÔºàÂÆûÁé∞CRUDÔºâ</title>
    <url>/2020/03/04/note-spring-07/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931?p=38" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931?p=38</a></p>
</blockquote>
<hr>
<h1 id="Êï∞ÊçÆÂ∫ìÈÉ®ÂàÜ"><a href="#Êï∞ÊçÆÂ∫ìÈÉ®ÂàÜ" class="headerlink" title="Êï∞ÊçÆÂ∫ìÈÉ®ÂàÜ"></a>Êï∞ÊçÆÂ∫ìÈÉ®ÂàÜ</h1><p>ÁªßÁª≠Áî®‰∏äÊ¨°ÁöÑË°®<br><img src="/images/2020/20200304181444129.png" width=200></p>
<hr>
<h1 id="Âú®Âü∫‰∫éxmlÁöÑÊ°à‰æã‰∏ä‰øÆÊîπ"><a href="#Âú®Âü∫‰∫éxmlÁöÑÊ°à‰æã‰∏ä‰øÆÊîπ" class="headerlink" title="Âú®Âü∫‰∫éxmlÁöÑÊ°à‰æã‰∏ä‰øÆÊîπ"></a>Âú®Âü∫‰∫éxmlÁöÑÊ°à‰æã‰∏ä‰øÆÊîπ</h1><p>ÔºàÂä†‰∏äÊï¥ÂêàjunitÁöÑÈÉ®ÂàÜÔºåÂÖ∑‰ΩìËÆ∞ÂΩïÂú®Á¨îËÆ∞8Ôºâ</p>
<p>pom.xmlÂä†‰∏äÊï¥ÂêàjunitÈúÄË¶ÅÁöÑ‰æùËµñspring-test<br>junitÁâàÊú¨4.12Âèä‰ª•‰∏ä</p>
<p>beans.xmlÂêçÁß∞Á©∫Èó¥ÈúÄË¶Å‰øÆÊîπ<br>Âú®SpringÊñáÊ°£‰∏≠ÊêúÁ¥¢xmlns:contextÔºàÂü∫‰∫éxmlÊó∂ÊòØxmlnsÔºâÊâæÂêçÁß∞Á©∫Èó¥<br>ÈÖçÁΩÆServiceÂíåDaoÁöÑÈÉ®ÂàÜÂèØ‰ª•‰∏çË¶Å‰∫Ü<br>Âä†‰∏äcomponent-scanÂëäÁü•SpringÂú®ÂàõÂª∫ÂÆπÂô®Êó∂Ë¶ÅÊâ´ÊèèÁöÑÂåÖ</p>
<p>ÂÆû‰ΩìÁ±ª„ÄÅÊé•Âè£Ê≤°ÊúâÂèòÂåñ</p>
<p>‰∏öÂä°Â±ÇÂÆûÁé∞Á±ªAccountServiceImplÂä†Ê≥®Ëß£<br>@Service(‚ÄúaccountService‚Äù)<br>ÂèòÈáèaccountDao‰∏äÂä†Ê≥®Ëß£ÔºåÁî±‰∫éÂè™Êúâ‰∏Ä‰∏™AccountDaoÔºåÂèØ‰ª•Áî®@Autowired<br>ÂØπÂ∫îÁöÑsetÊñπÊ≥ïÂèØ‰ª•Âà†Êéâ</p>
<p>ÊåÅ‰πÖÂ±ÇÂÆûÁé∞Á±ªAccountDaoImplÂä†Ê≥®Ëß£<br>@Repository(‚ÄúaccountDao‚Äù)<br>runnerÂêåÊ†∑Áî®@AutowiredÔºåsetÊñπÊ≥ïÂà†Êéâ</p>
<p>ÊµãËØïÁ±ªÊîπ‰∏∫Êï¥ÂêàjunitÁöÑÂÜôÊ≥ï</p>
<hr>
<h1 id="ÂÆåÊï¥‰ª£Á†Å"><a href="#ÂÆåÊï¥‰ª£Á†Å" class="headerlink" title="ÂÆåÊï¥‰ª£Á†Å"></a>ÂÆåÊï¥‰ª£Á†Å</h1><h2 id="È°πÁõÆÁªìÊûÑ"><a href="#È°πÁõÆÁªìÊûÑ" class="headerlink" title="È°πÁõÆÁªìÊûÑ"></a>È°πÁõÆÁªìÊûÑ</h2><img src="/images/2020/20200304183227273.png" width=300>

<h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.coconutnut<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>day02_02_account_xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    ÊâìÊàêjarÂåÖ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    Âä†ÂÖ•‰æùËµñ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        spring--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    	<span class="comment">&lt;!--    	springÊï¥Âêàjunit--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--        dbutils--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--        mysqlÈ©±Âä®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--        jdbcËøûÊé•Ê±†--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--    junitÊµãËØï--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="beans-xml"><a href="#beans-xml" class="headerlink" title="beans.xml"></a>beans.xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    ÂëäÁü•SpringÂú®ÂàõÂª∫ÂÆπÂô®Êó∂Ë¶ÅÊâ´ÊèèÁöÑÂåÖ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.cc"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    ÈÖçÁΩÆQueryRunnerÔºàÂ§ö‰æãÔºâ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"runner"</span> <span class="attr">class</span>=<span class="string">"org.apache.commons.dbutils.QueryRunner"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        Ê≥®ÂÖ•Êï∞ÊçÆÊ∫êÔºàÊ≤°ÊúâsetÊñπÊ≥ïÔºåÂè™ËÉΩÊûÑÈÄ†ÂáΩÊï∞Ê≥®ÂÖ•Ôºâ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"ds"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    ÈÖçÁΩÆÊï∞ÊçÆÊ∫ê--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        Ê≥®ÂÖ•ËøûÊé•Êï∞ÊçÆÂ∫ìÁöÑ‰ø°ÊÅØ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/groot?characterEncoding=utf8"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"iamgroot"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ÂÆû‰ΩìÁ±ª"><a href="#ÂÆû‰ΩìÁ±ª" class="headerlink" title="ÂÆû‰ΩìÁ±ª"></a>ÂÆû‰ΩìÁ±ª</h2><p>Account.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ë¥¶Êà∑ÁöÑÂÆû‰ΩìÁ±ª</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Float money;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Float <span class="title">getMoney</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMoney</span><span class="params">(Float money)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.money = money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Account&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", money="</span> + money +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="‰∏öÂä°Â±Ç"><a href="#‰∏öÂä°Â±Ç" class="headerlink" title="‰∏öÂä°Â±Ç"></a>‰∏öÂä°Â±Ç</h2><p>IAccountService.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ë¥¶Êà∑ÁöÑ‰∏öÂä°Â±ÇÊé•Âè£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Â¢û</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> account</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Âà†</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> accountId</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Êîπ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> account</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Êü•‰∏Ä‰∏™</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> accountId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Êü•ÊâÄÊúâ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AccountServiceImpl.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.dao.IAccountDao;</span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"><span class="keyword">import</span> com.cc.service.IAccountService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ë¥¶Êà∑ÁöÑ‰∏öÂä°Â±ÇÂÆûÁé∞Á±ª</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        accountDao.createAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        accountDao.deleteAccount(accountId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        accountDao.updateAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.retrieveAccountById(accountId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.retrieveAllAccounts();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ÊåÅ‰πÖÂ±Ç"><a href="#ÊåÅ‰πÖÂ±Ç" class="headerlink" title="ÊåÅ‰πÖÂ±Ç"></a>ÊåÅ‰πÖÂ±Ç</h2><p>IAccountDao.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ë¥¶Êà∑ÁöÑÊåÅ‰πÖÂ±ÇÊé•Âè£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AccountDaoImpl.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.dao.IAccountDao;</span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.QueryRunner;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanListHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ë¥¶Êà∑ÁöÑÊåÅ‰πÖÂ±ÇÂÆûÁé∞Á±ª</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Repository</span>(<span class="string">"accountDao"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountDaoImpl</span> <span class="keyword">implements</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> QueryRunner runner;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            runner.update(<span class="string">"insert into account(name,money) values(?,?)"</span>, account.getName(), account.getMoney());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            runner.update(<span class="string">"delete from account where id = ?"</span>, accountId);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            runner.update(<span class="string">"update account set name = ?, money = ? where id = ?"</span>, account.getName(), account.getMoney(),account.getId());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> runner.query(<span class="string">"select * from account where id = ?"</span>, <span class="keyword">new</span> BeanHandler&lt;Account&gt;(Account<span class="class">.<span class="keyword">class</span>), <span class="title">accountId</span>)</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> runner.query(<span class="string">"select * from account"</span>, <span class="keyword">new</span> BeanListHandler&lt;Account&gt;(Account<span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ÊµãËØïÊñπÊ≥ï"><a href="#ÊµãËØïÊñπÊ≥ï" class="headerlink" title="ÊµãËØïÊñπÊ≥ï"></a>ÊµãËØïÊñπÊ≥ï</h2><p>AccountServiceTest.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"><span class="keyword">import</span> com.cc.service.IAccountService;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ‰ΩøÁî®JunitÊµãËØïÈÖçÁΩÆ</span></span><br><span class="line"><span class="comment"> * SpringÊï¥ÂêàJunitÁöÑÈÖçÁΩÆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">ContextConfiguration</span>(<span class="title">locations</span> </span>= <span class="string">"classpath:beans.xml"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountService as;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCreate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setName(<span class="string">"eee"</span>);</span><br><span class="line">        account.setMoney(<span class="number">10000f</span>);</span><br><span class="line">        as.createAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span></span>&#123;</span><br><span class="line">        as.deleteAccount(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Account account = as.retrieveAccountById(<span class="number">3</span>);</span><br><span class="line">        account.setMoney(<span class="number">3000f</span>);</span><br><span class="line">        as.updateAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRetrieveOne</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Account account = as.retrieveAccountById(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRetrieveAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Account&gt; accounts = as.retrieveAllAccounts();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(Account account : accounts)&#123;</span><br><span class="line">            System.out.println(account);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h1><p>testRetrieveAll()<br><img src="/images/2020/20200304182802930.png" width=800></p>
<p>testRetrieveOne()<br><img src="/images/2020/20200304182924177.png" width=800></p>
<p>testCreate()<br><img src="/images/2020/20200304183005488.png" width=200></p>
<p>testDelete()<br><img src="/images/2020/20200304183052388.png" width=200></p>
<p>testUpdate()<br><img src="/images/2020/20200304183142618.png" width=200></p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringÁ¨îËÆ∞06 Âü∫‰∫éxmlÁöÑIoCÊ°à‰æãÔºàÂÆûÁé∞CRUDÔºâ</title>
    <url>/2020/03/04/note-spring-06/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p35~37</p>
</blockquote>
<hr>
<h1 id="Êï∞ÊçÆÂ∫ìÈÉ®ÂàÜ"><a href="#Êï∞ÊçÆÂ∫ìÈÉ®ÂàÜ" class="headerlink" title="Êï∞ÊçÆÂ∫ìÈÉ®ÂàÜ"></a>Êï∞ÊçÆÂ∫ìÈÉ®ÂàÜ</h1><p>mysql‰∏≠Âª∫‰∏ÄÂº†accountË°®<br><img src="/images/2020/20200304160612648.png" width=200></p>
<hr>
<h1 id="mavenÂ∑•Á®ã"><a href="#mavenÂ∑•Á®ã" class="headerlink" title="mavenÂ∑•Á®ã"></a>mavenÂ∑•Á®ã</h1><h2 id="È°πÁõÆÁªìÊûÑ"><a href="#È°πÁõÆÁªìÊûÑ" class="headerlink" title="È°πÁõÆÁªìÊûÑ"></a>È°πÁõÆÁªìÊûÑ</h2><img src="/images/2020/20200304180408780.png" width=300>

<h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.coconutnut<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>day02_02_account_xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    ÊâìÊàêjarÂåÖ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    Âä†ÂÖ•‰æùËµñ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        spring--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        dbutils--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        mysqlÈ©±Âä®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        jdbcËøûÊé•Ê±†--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    junitÊµãËØï--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ÂÆû‰ΩìÁ±ª"><a href="#ÂÆû‰ΩìÁ±ª" class="headerlink" title="ÂÆû‰ΩìÁ±ª"></a>ÂÆû‰ΩìÁ±ª</h2><p>Account.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ë¥¶Êà∑ÁöÑÂÆû‰ΩìÁ±ª</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Float money;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Float <span class="title">getMoney</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMoney</span><span class="params">(Float money)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.money = money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Account&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", money="</span> + money +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="‰∏öÂä°Â±Ç"><a href="#‰∏öÂä°Â±Ç" class="headerlink" title="‰∏öÂä°Â±Ç"></a>‰∏öÂä°Â±Ç</h2><p>IAccountService.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ë¥¶Êà∑ÁöÑ‰∏öÂä°Â±ÇÊé•Âè£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Â¢û</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> account</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Âà†</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> accountId</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Êîπ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> account</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Êü•‰∏Ä‰∏™</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> accountId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Êü•ÊâÄÊúâ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AccountServiceImpl.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.dao.IAccountDao;</span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"><span class="keyword">import</span> com.cc.service.IAccountService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ë¥¶Êà∑ÁöÑ‰∏öÂä°Â±ÇÂÆûÁé∞Á±ª</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IAccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAccountDao</span><span class="params">(IAccountDao accountDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.accountDao = accountDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        accountDao.createAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        accountDao.deleteAccount(accountId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        accountDao.updateAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.retrieveAccountById(accountId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.retrieveAllAccounts();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ÊåÅ‰πÖÂ±Ç"><a href="#ÊåÅ‰πÖÂ±Ç" class="headerlink" title="ÊåÅ‰πÖÂ±Ç"></a>ÊåÅ‰πÖÂ±Ç</h2><p>IAccountDao.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ë¥¶Êà∑ÁöÑÊåÅ‰πÖÂ±ÇÊé•Âè£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AccountDaoImpl.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.dao.IAccountDao;</span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.QueryRunner;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanListHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ë¥¶Êà∑ÁöÑÊåÅ‰πÖÂ±ÇÂÆûÁé∞Á±ª</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountDaoImpl</span> <span class="keyword">implements</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> QueryRunner runner;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRunner</span><span class="params">(QueryRunner runner)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.runner = runner;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            runner.update(<span class="string">"insert into account(name,money) values(?,?)"</span>, account.getName(), account.getMoney());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteAccount</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            runner.update(<span class="string">"delete from account where id = ?"</span>, accountId);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            runner.update(<span class="string">"update account set name = ?, money = ? where id = ?"</span>, account.getName(), account.getMoney(),account.getId());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">retrieveAccountById</span><span class="params">(Integer accountId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> runner.query(<span class="string">"select * from account where id = ?"</span>, <span class="keyword">new</span> BeanHandler&lt;Account&gt;(Account<span class="class">.<span class="keyword">class</span>), <span class="title">accountId</span>)</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">retrieveAllAccounts</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> runner.query(<span class="string">"select * from account"</span>, <span class="keyword">new</span> BeanListHandler&lt;Account&gt;(Account<span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="beans-xml"><a href="#beans-xml" class="headerlink" title="beans.xml"></a>beans.xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    ÈÖçÁΩÆService--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.cc.service.impl.AccountServiceImpl"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        Ê≥®ÂÖ•Dao--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"accountDao"</span> <span class="attr">ref</span>=<span class="string">"accountDao"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--    ÈÖçÁΩÆDao--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountDao"</span> <span class="attr">class</span>=<span class="string">"com.cc.dao.impl.AccountDaoImpl"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        Ê≥®ÂÖ•QueryRunner--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"runner"</span> <span class="attr">ref</span>=<span class="string">"runner"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--    ÈÖçÁΩÆQueryRunnerÔºàÂ§ö‰æãÔºâ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"runner"</span> <span class="attr">class</span>=<span class="string">"org.apache.commons.dbutils.QueryRunner"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        Ê≥®ÂÖ•Êï∞ÊçÆÊ∫êÔºàÊ≤°ÊúâsetÊñπÊ≥ïÔºåÂè™ËÉΩÊûÑÈÄ†ÂáΩÊï∞Ê≥®ÂÖ•Ôºâ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"ds"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    ÈÖçÁΩÆÊï∞ÊçÆÊ∫ê--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        Ê≥®ÂÖ•ËøûÊé•Êï∞ÊçÆÂ∫ìÁöÑ‰ø°ÊÅØ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/groot?characterEncoding=utf8"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"iamgroot"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ÊµãËØïÊñπÊ≥ï"><a href="#ÊµãËØïÊñπÊ≥ï" class="headerlink" title="ÊµãËØïÊñπÊ≥ï"></a>ÊµãËØïÊñπÊ≥ï</h2><p>AccountServiceTest.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cc.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.cc.domain.Account;</span><br><span class="line"><span class="keyword">import</span> com.cc.service.IAccountService;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ‰ΩøÁî®JunitÊµãËØïÈÖçÁΩÆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCreate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.Ëé∑ÂèñÂÆπÂô®</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.ÂæóÂà∞‰∏öÂä°Â±ÇÂØπË±°</span></span><br><span class="line">        IAccountService as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.ÊâßË°åÊñπÊ≥ï</span></span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setName(<span class="string">"ddd"</span>);</span><br><span class="line">        account.setMoney(<span class="number">10f</span>);</span><br><span class="line">        as.createAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.Ëé∑ÂèñÂÆπÂô®</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.ÂæóÂà∞‰∏öÂä°Â±ÇÂØπË±°</span></span><br><span class="line">        IAccountService as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.ÊâßË°åÊñπÊ≥ï</span></span><br><span class="line">        as.deleteAccount(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.Ëé∑ÂèñÂÆπÂô®</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.ÂæóÂà∞‰∏öÂä°Â±ÇÂØπË±°</span></span><br><span class="line">        IAccountService as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.ÊâßË°åÊñπÊ≥ï</span></span><br><span class="line">        Account account = as.retrieveAccountById(<span class="number">1</span>);</span><br><span class="line">        account.setMoney(<span class="number">2000f</span>);</span><br><span class="line">        as.updateAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRetrieveOne</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.Ëé∑ÂèñÂÆπÂô®</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.ÂæóÂà∞‰∏öÂä°Â±ÇÂØπË±°</span></span><br><span class="line">        IAccountService as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.ÊâßË°åÊñπÊ≥ï</span></span><br><span class="line">        Account account = as.retrieveAccountById(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRetrieveAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.Ëé∑ÂèñÂÆπÂô®</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.ÂæóÂà∞‰∏öÂä°Â±ÇÂØπË±°</span></span><br><span class="line">        IAccountService as = ac.getBean(<span class="string">"accountService"</span>,IAccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 3.ÊâßË°åÊñπÊ≥ï</span></span><br><span class="line">        List&lt;Account&gt; accounts = as.retrieveAllAccounts();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(Account account : accounts)&#123;</span><br><span class="line">            System.out.println(account);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h1><p>testRetrieveAll()<br><img src="/images/2020/20200304174231997.png" width=800></p>
<p>testRetrieveOne()<br><img src="/images/2020/20200304174150392.png" width=800></p>
<p>testCreate()<br><img src="/images/2020/20200304175250925.png" width=200></p>
<p>testDelete()<br><img src="/images/2020/2020030417540352.png" width=200></p>
<p>testUpdate()<br><img src="/images/2020/20200304175530135.png" width=200></p>
<hr>
<h1 id="ÈÅáÂà∞ÁöÑbug"><a href="#ÈÅáÂà∞ÁöÑbug" class="headerlink" title="ÈÅáÂà∞ÁöÑbug"></a>ÈÅáÂà∞ÁöÑbug</h1><p>ÊâßË°åtestRetrieveAll()Êó∂</p>
<p>==BUG01==</p>
<pre><code>Ë≠¶Âëä: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;accountService&apos; defined in class path resource [beans.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property &apos;accountDao &apos; of bean class [com.cc.service.impl.AccountServiceImpl]: Bean property &apos;accountDao &apos; is not writable or has an invalid setter method. Did you mean &apos;accountDao&apos;?

org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;accountService&apos; defined in class path resource [beans.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property &apos;accountDao &apos; of bean class [com.cc.service.impl.AccountServiceImpl]: Bean property &apos;accountDao &apos; is not writable or has an invalid setter method. Did you mean &apos;accountDao&apos;?

at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1650)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1357)
...</code></pre><p>ÂÖ∂‰∏≠</p>
<pre><code>Bean property &apos;accountDao &apos; is not writable or has an invalid setter method. Did you mean &apos;accountDao&apos;?</code></pre><p>ÂèëÁé∞Â§öÊâì‰∫Ü‰∏™Á©∫Ê†º</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">beans.xml‰∏≠</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"accountDao "</span> <span class="attr">ref</span>=<span class="string">"accountDao"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">Êîπ‰∏∫</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"accountDao"</span> <span class="attr">ref</span>=<span class="string">"accountDao"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ÊîπËøáÊù•‰πãÂêé</p>
<p>==BUG02==</p>
<pre><code>Ë≠¶Âëä: com.mchange.v2.resourcepool.BasicResourcePool$ScatteredAcquireTask@63fd9b65 -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception: 
java.sql.SQLException: Unknown initial character set index &apos;255&apos; received from server. Initial client character set can be forced via the &apos;characterEncoding&apos; property.
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)
...</code></pre><p>‰ºº‰πéÊòØÁºñÁ†ÅÈóÆÈ¢ò</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">beans.xml‰∏≠</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/groot"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">Êîπ‰∏∫</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/groot?characterEncoding=utf8"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Êîπ‰∫Ü‰πãÂêé</p>
<p>==BUG03==</p>
<pre><code>Ë≠¶Âëä: com.mchange.v2.resourcepool.BasicResourcePool$ScatteredAcquireTask@4879bf70 -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception: 
java.sql.SQLException: Unknown system variable &apos;tx_isolation&apos;
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)</code></pre><p>Êü•‰∏Ä‰∏ãËß£ÂÜ≥ÊñπÂïä</p>
<blockquote>
<p><a href="https://blog.csdn.net/always_younger/article/details/80421783" target="_blank" rel="noopener">https://blog.csdn.net/always_younger/article/details/80421783</a></p>
</blockquote>
<p>ËØ¥ÊòØmysql-connector-javaÁâàÊú¨Â§™‰ΩéÁöÑÂéüÂõ†</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">pom.xml‰∏≠</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">Êîπ‰∏∫</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ËøòÊúâ‰∏ÄÁÇπÂ∞èÈóÆÈ¢ò</p>
<pre><code>Loading class `com.mysql.jdbc.Driver&apos;. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver&apos;. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.</code></pre><p>ÊääËøáÊó∂ÁöÑÁ±ªÊç¢Êéâ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">beans.xml‰∏≠</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">Êîπ‰∏∫</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Â∞±Â•Ω‰∫ÜÔºÅ</p>
<pre><code>Account{id=1, name=&apos;aaa&apos;, money=1000.0}
Account{id=2, name=&apos;bbb&apos;, money=1000.0}
Account{id=3, name=&apos;ccc&apos;, money=1000.0}

Process finished with exit code 0</code></pre>]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>‰π∞ÂçñËÇ°Á•®ÁöÑÊúÄ‰Ω≥Êó∂Êú∫ÈóÆÈ¢ò</title>
    <url>/2020/02/29/exercise/</url>
    <content><![CDATA[<p>ÊÄùË∑ØÔºöÂä®ÊÄÅËßÑÂàí</p>
<p>dp[ i ][ j ][ k ]<br>i - Âà∞Á¨¨ i Â§©<br>j - ÊúÄÂ§ö‰∫§Êòì j Ê¨°<br>k - 0:ÂΩìÂâçÊåÅËÇ° / 1:ÂΩìÂâç‰∏çÊåÅËÇ°</p>
<p>Áä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; Á¨¨iÂ§©ÔºåÊúÄÂ§ö‰∫§ÊòìjÊ¨°ÔºåÂΩìÂâç‰∏çÊåÅËÇ°</span><br><span class="line">dp[i][j][0] &#x3D; MAX&#123;</span><br><span class="line">	dp[i-1][j][0],                 &#x2F;&#x2F; Êú¨Ê¨°‰∏çÊåÅ-‰∏äÊ¨°Â∞±‰∏çÊåÅ</span><br><span class="line">	dp[i-1][j-1][1] + Â∑Æ‰ª∑          &#x2F;&#x2F; Êú¨Ê¨°‰∏çÊåÅ-Êú¨Ê¨°Âçñ</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; Á¨¨iÂ§©ÔºåÊúÄÂ§ö‰∫§ÊòìjÊ¨°ÔºåÂΩìÂâçÊåÅËÇ°</span><br><span class="line">dp[i][j][1] &#x3D; MAX&#123;</span><br><span class="line">	dp[i-1][j][0],                &#x2F;&#x2F; Êú¨Ê¨°ÊåÅ-Êú¨Ê¨°‰π∞</span><br><span class="line">	dp[i-1][j][1] + Â∑Æ‰ª∑           &#x2F;&#x2F; Êú¨Ê¨°ÊåÅ-‰∏äÊ¨°Â∞±ÊåÅ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÂÆûÁé∞</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getdp</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j,<span class="keyword">int</span> k,<span class="keyword">int</span>[][][] dp,<span class="keyword">int</span>[] prices)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(dp[i][j][k]==-<span class="number">1</span>)&#123;</span><br><span class="line">		<span class="keyword">if</span>(i&lt;<span class="number">1</span>)&#123;</span><br><span class="line">			dp[i][j][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">			dp[i][j][<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="comment">// Êú¨Ê¨°‰∏çÊåÅ-‰∏äÊ¨°Â∞±‰∏çÊåÅ</span></span><br><span class="line">			<span class="keyword">int</span> dp1 = getdp(i-<span class="number">1</span>,j,<span class="number">0</span>,dp,prices);</span><br><span class="line">			<span class="comment">// Êú¨Ê¨°‰∏çÊåÅ-Êú¨Ê¨°Âçñ</span></span><br><span class="line">			<span class="keyword">int</span> dp2 = j&gt;<span class="number">0</span> ? getdp(i-<span class="number">1</span>,j-<span class="number">1</span>,<span class="number">1</span>,dp,prices)+prices[i]-prices[i-<span class="number">1</span>] : <span class="number">0</span>;</span><br><span class="line">			dp[i][j][<span class="number">0</span>] = Math.max(dp1,dp2);</span><br><span class="line">           </span><br><span class="line">			<span class="comment">// Êú¨Ê¨°ÊåÅ-Êú¨Ê¨°‰π∞</span></span><br><span class="line">			<span class="keyword">int</span> dp3 = getdp(i-<span class="number">1</span>,j,<span class="number">0</span>,dp,prices);</span><br><span class="line">			<span class="comment">// Êú¨Ê¨°ÊåÅ-‰∏äÊ¨°Â∞±ÊåÅ</span></span><br><span class="line">			<span class="keyword">int</span> dp4 = getdp(i-<span class="number">1</span>,j,<span class="number">1</span>,dp,prices)+prices[i]-prices[i-<span class="number">1</span>];</span><br><span class="line">			dp[i][j][<span class="number">1</span>] = Math.max(dp3,dp4);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">	<span class="keyword">return</span> dp[i][j][k];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÂùëÔºöÂΩìkÂæàÂ§ßÊó∂ÔºåÂÜÖÂ≠ò‰ºöÁàÜÔºåÊ≠§Êó∂Áõ∏ÂΩì‰∫é‰∏çÈôêÂà∂‰∫§ÊòìÊ¨°Êï∞ÔºåÁõ¥Êé•Áî®Ë¥™ÂøÉËß£ÂÜ≥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span>[] prices)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(prices.length&lt;<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(k &gt; prices.length/<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="comment">// Áõ∏ÂΩì‰∫é‰∏çÈôêÂà∂Ê¨°Êï∞ÔºåË¥™ÂøÉ</span></span><br><span class="line">            <span class="keyword">int</span> value = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;prices.length;i++)&#123;</span><br><span class="line">                value += prices[i]&gt;prices[i-<span class="number">1</span>] ? prices[i]-prices[i-<span class="number">1</span>] : <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[][][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[prices.length][k+<span class="number">1</span>][<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;prices.length;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;k+<span class="number">1</span>;j++)&#123;</span><br><span class="line">                Arrays.fill(dp[i][j],-<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> getdp(prices.length-<span class="number">1</span>,k,<span class="number">0</span>,dp,prices);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getdp</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j,<span class="keyword">int</span> k,<span class="keyword">int</span>[][][] dp,<span class="keyword">int</span>[] prices)</span></span>&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>Áî®Ëøô‰∏ÄÂ•óËß£Ê≥ïÂπ≤Êéâ4È¢ò</p>
<p>Leetcode 121 ‰π∞ÂçñËÇ°Á•®ÁöÑÊúÄ‰Ω≥Êó∂Êú∫ ‚Äî‚Äî ÊúÄÂ§ö‰∫§Êòì1Ê¨°<br>‰ª§ k = 1</p>
<p>Leetcode 122 ‰π∞ÂçñËÇ°Á•®ÁöÑÊúÄ‰Ω≥Êó∂Êú∫ II ‚Äî‚Äî ‰∏çÈôêÊ¨°Êï∞<br>Áõ¥Êé•Ë¥™ÂøÉ</p>
<p>Leetcode 123 ‰π∞ÂçñËÇ°Á•®ÁöÑÊúÄ‰Ω≥Êó∂Êú∫ III ‚Äî‚Äî ÊúÄÂ§ö‰∫§Êòì2Ê¨°<br>‰ª§ k = 2</p>
<p>Leetcode 188 ‰π∞ÂçñËÇ°Á•®ÁöÑÊúÄ‰Ω≥Êó∂Êú∫ IV ‚Äî‚Äî ÊúÄÂ§ö‰∫§ÊòìkÊ¨°</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringÁ¨îËÆ∞05 IoC</title>
    <url>/2020/02/28/note-spring-05/</url>
    <content><![CDATA[<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p15ÔΩû34</p>
<hr>
<h1 id="IoCÁöÑÊ¶ÇÂøµÂíå‰ΩúÁî®"><a href="#IoCÁöÑÊ¶ÇÂøµÂíå‰ΩúÁî®" class="headerlink" title="IoCÁöÑÊ¶ÇÂøµÂíå‰ΩúÁî®"></a>IoCÁöÑÊ¶ÇÂøµÂíå‰ΩúÁî®</h1><p>‰∏äÊ¨°Â∑•ÂéÇÊ®°Âºè‰∏≠ÂàõÂª∫ÂØπË±°Êúâ2ÁßçÊñπÂºè</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ÊñπÂºè1</span></span><br><span class="line">IAccountService as = <span class="keyword">new</span> AccountServiceImpl();</span><br><span class="line"><span class="comment">// ÊñπÂºè2</span></span><br><span class="line">IAccountService as = (IAccountService) BeanFactory.getBean(<span class="string">"accountService"</span>);</span><br></pre></td></tr></table></figure>
<p>ÊñπÂºè1ÊòØ‰∏ªÂä®ÁöÑÔºõÊñπÂºè2ÊòØË¢´Âä®ÁöÑÔºàÊ†πÊçÆÈÖçÁΩÆÂàõÂª∫ÔºâÔºåÊéßÂà∂ÊùÉËΩ¨ÁßªÁªô‰∫ÜÂ∑•ÂéÇ</p>
<p><strong>IoC (Inversion of Control ÊéßÂà∂ÂèçËΩ¨)ÊääÂàõÂª∫ÂØπË±°ÁöÑÊùÉÂà©‰∫§ÁªôÊ°ÜÊû∂</strong><br><strong>ÂÖ∂‰ΩúÁî®ÊòØÈôç‰ΩéÁ®ãÂ∫èÁöÑËÄ¶Âêà</strong><br>‰ΩÜÂè™ËÉΩÊòØÈôç‰ΩéÔºåËÄå‰∏çËÉΩÂÆåÂÖ®Ê∂àÈô§„ÄÇÂ¶ÇÊûú‰∏§‰∏™Á±ª‰πãÈó¥‰ªª‰ΩïÂÖ≥Á≥ªÈÉΩÊ≤°ÊúâÔºåÈÇ£Êúâ‰∏Ä‰∏™Á±ª‰∏ÄÂÆöÊòØÂ§ö‰ΩôÁöÑ„ÄÇ<br>Ëá™Â∑±ÂÜôÊó∂Áî®Â∑•ÂéÇÊ®°ÂºèÂÆûÁé∞ÔºåSpring‰∏≠ÁöÑIocÂ¶Ç‰ΩïÂÆûÁé∞Ôºü</p>
<hr>
<h1 id="Spring‰∏≠ÁöÑIoC"><a href="#Spring‰∏≠ÁöÑIoC" class="headerlink" title="Spring‰∏≠ÁöÑIoC"></a>Spring‰∏≠ÁöÑIoC</h1><p><strong>ÊéßÂà∂ÂèçËΩ¨ Inversion of Control, IoC</strong></p>
<p>Ëß£ÂÜ≥ÁöÑÈóÆÈ¢òÔºöÈôç‰ΩéÁ®ãÂ∫èËÄ¶ÂêàÔºàÂáèÂ∞ë‰æùËµñÂÖ≥Á≥ªÔºâ<br>Ëß£ÂÜ≥ÁöÑÊñπÊ≥ïÔºö‰ΩøÁî®ÈÖçÁΩÆÁöÑÊñπÂºè</p>
<h2 id="1-ÂØºÂÖ•‰æùËµñ"><a href="#1-ÂØºÂÖ•‰æùËµñ" class="headerlink" title="1.ÂØºÂÖ•‰æùËµñ"></a>1.ÂØºÂÖ•‰æùËµñ</h2><p>ÂØºÂÖ•Spring‰æùËµñ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Âú®Êü•ÁúãÂºïÂÖ•ÁöÑ‰æùËµñ<br><img src="/images/2020/20200228105855284.png" width=400>  <img src="/images/2020/20200228110642475.png" width=500><br>ÂåÖÂê´‰∫ÜÂ∏∏Áî®ÁöÑÊ†∏ÂøÉÁªÑ‰ª∂<br><img src="/images/2020/20200228110023357.png" width=400></p>
<p>Core ContainerÁÆÄÂçïÁöÑËØ¥Â∞±ÊòØ‰∏Ä‰∏™MapÔºåÂ∞ÅË£Ö‰∫ÜË¶ÅÁî®ÁöÑÂØπË±°</p>
<h2 id="2-ÂàõÂª∫ÈÖçÁΩÆÊñá‰ª∂-amp-ÂØºÂÖ•Á∫¶Êùü-amp-ÈÖçÁΩÆbean"><a href="#2-ÂàõÂª∫ÈÖçÁΩÆÊñá‰ª∂-amp-ÂØºÂÖ•Á∫¶Êùü-amp-ÈÖçÁΩÆbean" class="headerlink" title="2.ÂàõÂª∫ÈÖçÁΩÆÊñá‰ª∂&amp;ÂØºÂÖ•Á∫¶Êùü&amp;ÈÖçÁΩÆbean"></a>2.ÂàõÂª∫ÈÖçÁΩÆÊñá‰ª∂&amp;ÂØºÂÖ•Á∫¶Êùü&amp;ÈÖçÁΩÆbean</h2><p>ÁÑ∂ÂêéÂàõÂª∫bean.xmlÔºàÊ≤°ÊúâÂõ∫ÂÆöË¶ÅÊ±ÇÔºå‰π†ÊÉØËøôÊ†∑ÂëΩÂêçÔºåÂõ†‰∏∫ÊòØÁÆ°beansÁöÑÔºâ<br>Âú®spring-framework-5.0.2.RELEASE-docs/spring-framework-referenceÊñá‰ª∂Â§π‰∏≠ÊâæÂà∞index.html<br><img src="/images/2020/20200228111723489.png" width=800><br>ÁÇπcoreÔºåÊêúÁ¥¢xmlnsÔºàÂØºÂÖ•xml schemaÁ∫¶ÊùüÁöÑÂÖ≥ÈîÆÂ≠óÔºâ<br><img src="/images/2020/20200228111921799.png" width=800><br>ÊääÂÆÉÂ§çÂà∂Á≤òË¥¥Âà∞ÈÖçÁΩÆÊñá‰ª∂‰∏≠</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ÈÖçÁΩÆbeanÔºåÊääÂØπË±°ÁöÑÂàõÂª∫‰∫§ÁªôSpringÊù•ÁÆ°ÁêÜ<br>ÂêåÂ∑•ÂéÇÊ®°ÂºèÔºåÈúÄË¶ÅÂîØ‰∏ÄÊ†áÂøóÂíåÂØπË±°ÁöÑÂÖ®ÈôêÂÆöÁ±ªÂêçÔºàÂåÖÂêç+Á±ªÂêçÔºâ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountDao"</span> <span class="attr">class</span>=<span class="string">"com.itheima.dao.impl.AccountDaoImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Ââ©‰∏ãÁöÑËß£ÊûêÈÖçÁΩÆÊñá‰ª∂ÁöÑ‰∫ãÂ∞±Áî±SpringÂÅö‰∫Ü</p>
<h2 id="3-ÂèñÂá∫ÂÆπÂô®-amp-Ëé∑ÂèñÂØπË±°"><a href="#3-ÂèñÂá∫ÂÆπÂô®-amp-Ëé∑ÂèñÂØπË±°" class="headerlink" title="3.ÂèñÂá∫ÂÆπÂô®&amp;Ëé∑ÂèñÂØπË±°"></a>3.ÂèñÂá∫ÂÆπÂô®&amp;Ëé∑ÂèñÂØπË±°</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Client.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.Ëé∑ÂèñÊ†∏ÂøÉÂÆπÂô®ÂØπË±°</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.Ê†πÊçÆidËé∑ÂèñBeanÂØπË±°</span></span><br><span class="line">        <span class="comment">// ÊñπÊ≥ï‰∏ÄÔºöÊãøÂà∞‰∏Ä‰∏™ObjectÁ±ªÔºåËá™Â∑±Âº∫ËΩ¨</span></span><br><span class="line">        IAccountService as  = (IAccountService)ac.getBean(<span class="string">"accountService"</span>);</span><br><span class="line">        <span class="comment">// ÊñπÊ≥ï‰∫åÔºöÁªô‰∏Ä‰∏™Á±ªÂûãÔºåÁõ¥Êé•ÂæóÂà∞ËØ•Á±ªÂûãÂØπË±°</span></span><br><span class="line">        IAccountDao adao = ac.getBean(<span class="string">"accountDao"</span>,IAccountDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="tip-ApplicationContextÁöÑÁªßÊâøÂÖ≥Á≥ª"><a href="#tip-ApplicationContextÁöÑÁªßÊâøÂÖ≥Á≥ª" class="headerlink" title="tip: ApplicationContextÁöÑÁªßÊâøÂÖ≥Á≥ª"></a>tip: ApplicationContextÁöÑÁªßÊâøÂÖ≥Á≥ª</h2><p>Idea‰∏≠ÔºåÂú®Á±ª‰∏äÂè≥ÈîÆ-&gt;Diagrams-&gt;Show Diagram<br>Âú®Êé•Âè£‰∏äÂè≥ÈîÆ-&gt;Show Implementations<br><img src="/images/2020/20200228114140888.png"><br>ÂèØ‰ª•ÁúãÂà∞ÔºåApplicationContextÁªßÊâøËá™BeanFactoryÔºåClassPathXmlApplicationContextÊòØÂÆÉÁöÑÂÆûÁé∞Á±ª</p>
<p>ApplicationContextÁöÑ‰∏â‰∏™Â∏∏Áî®ÂÆûÁé∞Á±ªÔºö<br>     *      ClassPathXmlApplicationContextÔºöÂÆÉÂèØ‰ª•Âä†ËΩΩÁ±ªË∑ØÂæÑ‰∏ãÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºàÈÖçÁΩÆÊñá‰ª∂ÂøÖÈ°ªÂú®Á±ªË∑ØÂæÑ‰∏ãÔºå‰∏çÂú®ÁöÑÂä†ËΩΩ‰∏ç‰∫ÜÔºâÔºàÊõ¥Â∏∏Áî®Ôºâ<br>     *      FileSystemXmlApplicationContextÔºöÂÆÉÂèØ‰ª•Âä†ËΩΩÁ£ÅÁõò‰ªªÊÑèË∑ØÂæÑ‰∏ãÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºàÂøÖÈ°ªÊúâËÆøÈóÆÊùÉÈôêÔºâ<br>     *      AnnotationConfigApplicationContextÔºöÂÆÉÊòØÁî®‰∫éËØªÂèñÊ≥®Ëß£ÂàõÂª∫ÂÆπÂô®ÁöÑÔºàÂêéÈù¢ËÆ≤Ôºâ</p>
<h2 id="tip-ApplicationContextÂíåBeanFactoryÁöÑÂå∫Âà´"><a href="#tip-ApplicationContextÂíåBeanFactoryÁöÑÂå∫Âà´" class="headerlink" title="tip: ApplicationContextÂíåBeanFactoryÁöÑÂå∫Âà´"></a>tip: ApplicationContextÂíåBeanFactoryÁöÑÂå∫Âà´</h2><p><strong>ApplicationContext</strong></p>
<ul>
<li>ÊûÑÂª∫Ê†∏ÂøÉÂÆπÂô®Êó∂ÔºåÂàõÂª∫ÂØπË±°ÈááÂèñÁöÑÁ≠ñÁï•ÊòØÈááÁî®Á´ãÂç≥Âä†ËΩΩÁöÑÊñπÂºè„ÄÇÂç≥Ôºå‰∏ÄËØªÂèñÂÆåÈÖçÁΩÆÊñá‰ª∂È©¨‰∏äÂ∞±ÂàõÂª∫ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÖçÁΩÆÁöÑÂØπË±°</li>
<li>Âçï‰æãÂØπË±°ÈÄÇÁî® </li>
</ul>
<p><strong>BeanFactory</strong></p>
<ul>
<li>ÊûÑÂª∫Ê†∏ÂøÉÂÆπÂô®Êó∂ÔºåÂàõÂª∫ÂØπË±°ÈááÂèñÁöÑÁ≠ñÁï•ÊòØÈááÁî®Âª∂ËøüÂä†ËΩΩÁöÑÊñπÂºè„ÄÇÂç≥Ôºå‰ªÄ‰πàÊó∂ÂÄôÊ†πÊçÆidËé∑ÂèñÂØπË±°‰∫ÜÔºå‰ªÄ‰πàÊó∂ÂÄôÊâçÁúüÊ≠£ÁöÑÂàõÂª∫ÂØπË±°</li>
<li>Â§ö‰æãÂØπË±°‰ΩøÁî®</li>
</ul>
<hr>
<h1 id="beanÁöÑÁªÜËäÇ"><a href="#beanÁöÑÁªÜËäÇ" class="headerlink" title="beanÁöÑÁªÜËäÇ"></a>beanÁöÑÁªÜËäÇ</h1><h2 id="ÂàõÂª∫beanÂØπË±°ÁöÑ‰∏âÁßçÊñπÂºè"><a href="#ÂàõÂª∫beanÂØπË±°ÁöÑ‰∏âÁßçÊñπÂºè" class="headerlink" title="ÂàõÂª∫beanÂØπË±°ÁöÑ‰∏âÁßçÊñπÂºè"></a>ÂàõÂª∫beanÂØπË±°ÁöÑ‰∏âÁßçÊñπÂºè</h2><h3 id="ÊñπÂºè‰∏ÄÔºö‰ΩøÁî®ÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÂàõÂª∫"><a href="#ÊñπÂºè‰∏ÄÔºö‰ΩøÁî®ÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÂàõÂª∫" class="headerlink" title="ÊñπÂºè‰∏ÄÔºö‰ΩøÁî®ÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÂàõÂª∫"></a>ÊñπÂºè‰∏ÄÔºö‰ΩøÁî®ÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÂàõÂª∫</h3><p>Âú®springÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠‰ΩøÁî®beanÊ†áÁ≠æÔºåÈÖç‰ª•idÂíåclassÂ±ûÊÄß‰πãÂêéÔºå‰∏îÊ≤°ÊúâÂÖ∂‰ªñÂ±ûÊÄßÂíåÊ†áÁ≠æÊó∂„ÄÇÈááÁî®ÁöÑÂ∞±ÊòØÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÂàõÂª∫beanÂØπË±°ÔºåÊ≠§Êó∂Â¶ÇÊûúÁ±ª‰∏≠Ê≤°ÊúâÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÔºåÂàôÂØπË±°Êó†Ê≥ïÂàõÂª∫„ÄÇ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="ÊñπÂºè‰∫åÔºö‰ΩøÁî®ÊôÆÈÄöÂ∑•ÂéÇ‰∏≠ÁöÑÊñπÊ≥ïÂàõÂª∫ÂØπË±°"><a href="#ÊñπÂºè‰∫åÔºö‰ΩøÁî®ÊôÆÈÄöÂ∑•ÂéÇ‰∏≠ÁöÑÊñπÊ≥ïÂàõÂª∫ÂØπË±°" class="headerlink" title="ÊñπÂºè‰∫åÔºö‰ΩøÁî®ÊôÆÈÄöÂ∑•ÂéÇ‰∏≠ÁöÑÊñπÊ≥ïÂàõÂª∫ÂØπË±°"></a>ÊñπÂºè‰∫åÔºö‰ΩøÁî®ÊôÆÈÄöÂ∑•ÂéÇ‰∏≠ÁöÑÊñπÊ≥ïÂàõÂª∫ÂØπË±°</h3><p>ÂÆûÈôÖÂºÄÂèë‰∏≠ÔºåÂèØËÉΩË¶ÅÁî®Âà∞Âà´‰∫∫ÂÜôÂ•ΩÁöÑjarÂåÖ‰∏≠ÁöÑÁ±ª„ÄÇÔºà‰∏çÁü•ÈÅìÊúâÊ≤°ÊúâÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞Ôºå‰πüÊó†Ê≥ïÈÄöËøá‰øÆÊîπÊ∫êÁ†ÅÊù•Êèê‰æõÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞Ôºâ„ÄÇ‰æãÂ¶ÇÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Ê®°Êãü‰∏Ä‰∏™Â∑•ÂéÇÁ±ªÔºàËØ•Á±ªÂèØËÉΩÊòØÂ≠òÂú®‰∫éjarÂåÖ‰∏≠ÁöÑÔºåÊàë‰ª¨Êó†Ê≥ïÈÄöËøá‰øÆÊîπÊ∫êÁ†ÅÁöÑÊñπÂºèÊù•Êèê‰æõÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞Ôºâ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InstanceFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> IAccountService <span class="title">getAccountService</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> AccountServiceImpl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ÊúâËøô‰πà‰∏Ä‰∏™InstanceFactoryÁ±ªÔºåÈúÄË¶ÅÊãøÂà∞AccountServiceImpl<br>Â¶ÇÊûúÂÉèÊñπÊ≥ï‰∏ÄÈÇ£Ê†∑ÂàõÂª∫ÂØπË±°ÔºåÂç≥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"instanceFactory"</span> <span class="attr">class</span>=<span class="string">"com.itheima.factory.InstanceFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ÂæóÂà∞ÁöÑÂπ∂‰∏çÊòØAccountServiceImplÂØπË±°ÔºåËÄåÊòØInstanceFactoryÂØπË±°</p>
<p>Ê≠§Êó∂Â∫îËØ•‰øÆÊîπÂàõÂª∫ÂØπË±°ÁöÑÊñπÂºè<br><strong>‰ΩøÁî®ÊôÆÈÄöÂ∑•ÂéÇ‰∏≠ÁöÑÊñπÊ≥ïÂàõÂª∫ÂØπË±°Ôºà‰ΩøÁî®Êüê‰∏™Á±ª‰∏≠ÁöÑÊñπÊ≥ïÂàõÂª∫ÂØπË±°ÔºåÂπ∂Â≠òÂÖ•springÂÆπÂô®Ôºâ</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"instanceFactory"</span> <span class="attr">class</span>=<span class="string">"com.itheima.factory.InstanceFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">factory-bean</span>=<span class="string">"instanceFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getAccountService"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ÂÖàÂàõÂª∫Â∑•ÂéÇÔºåÂÜçÈÄöËøáÂ∑•ÂéÇÁöÑÊñπÊ≥ïÂàõÂª∫ÊâÄÈúÄÂØπË±°</p>
<h3 id="ÊñπÂºè‰∏âÔºö‰ΩøÁî®Â∑•ÂéÇ‰∏≠ÁöÑÈùôÊÄÅÊñπÊ≥ïÂàõÂª∫ÂØπË±°"><a href="#ÊñπÂºè‰∏âÔºö‰ΩøÁî®Â∑•ÂéÇ‰∏≠ÁöÑÈùôÊÄÅÊñπÊ≥ïÂàõÂª∫ÂØπË±°" class="headerlink" title="ÊñπÂºè‰∏âÔºö‰ΩøÁî®Â∑•ÂéÇ‰∏≠ÁöÑÈùôÊÄÅÊñπÊ≥ïÂàõÂª∫ÂØπË±°"></a>ÊñπÂºè‰∏âÔºö‰ΩøÁî®Â∑•ÂéÇ‰∏≠ÁöÑÈùôÊÄÅÊñπÊ≥ïÂàõÂª∫ÂØπË±°</h3><p>Ê®°Êãü‰∏Ä‰∏™Â∑•ÂéÇÁ±ªÔºåÂÆÉÊúâ‰∏Ä‰∏™ËøîÂõûÂØπË±°ÁöÑÈùôÊÄÅÊñπÊ≥ï</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Ê®°Êãü‰∏Ä‰∏™Â∑•ÂéÇÁ±ªÔºàËØ•Á±ªÂèØËÉΩÊòØÂ≠òÂú®‰∫éjarÂåÖ‰∏≠ÁöÑÔºåÊàë‰ª¨Êó†Ê≥ïÈÄöËøá‰øÆÊîπÊ∫êÁ†ÅÁöÑÊñπÂºèÊù•Êèê‰æõÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞Ôºâ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> IAccountService <span class="title">getAccountService</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> AccountServiceImpl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>‰ΩøÁî®Â∑•ÂéÇ‰∏≠ÁöÑÈùôÊÄÅÊñπÊ≥ïÂàõÂª∫ÂØπË±°Ôºà‰ΩøÁî®Êüê‰∏™Á±ª‰∏≠ÁöÑÈùôÊÄÅÊñπÊ≥ïÂàõÂª∫ÂØπË±°ÔºåÂπ∂Â≠òÂÖ•springÂÆπÂô®)</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.factory.StaticFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getAccountService"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ËøôÈáåÁöÑfactory-methodÊòØ‰∏Ä‰∏™ÈùôÊÄÅÊñπÊ≥ï</p>
<p>QÔºöËøô‰∏§‰∏™Â∑•ÂéÇ‰∏≠‰∏çÈÉΩnewÂØπË±°‰∫ÜÂêóÔºü<br>AÔºöÊääËøô‰∏§‰∏™ÂØπË±°Áúã‰ΩújarÂåÖ‰∏≠ÁöÑÁ±ªÔºàÊ≠§Â§ÑÂè™ÊòØÊ®°ÊãüÂÆÉÔºâÔºåjarÂåÖ‰∏≠‰∏çÊòØ.javaÊñá‰ª∂ËÄåÊòØ.classÔºåÈÉΩÊòØÊó†Ê≥ï‰øÆÊîπÁöÑ„ÄÇÂÆûÈôÖÂºÄÂèë‰∏≠ÔºåÊúâ‰∫õÂØπË±°Â∞±ÂæóÁî®ÊñπÊ≥ï‰∫åÊàñÊñπÊ≥ï‰∏âÊù•ÂàõÂª∫</p>
<h2 id="ÊåáÂÆöbeanÂØπË±°ÁöÑ‰ΩúÁî®ËåÉÂõ¥ÔºöbeanÊ†áÁ≠æÁöÑscopeÂ±ûÊÄß"><a href="#ÊåáÂÆöbeanÂØπË±°ÁöÑ‰ΩúÁî®ËåÉÂõ¥ÔºöbeanÊ†áÁ≠æÁöÑscopeÂ±ûÊÄß" class="headerlink" title="ÊåáÂÆöbeanÂØπË±°ÁöÑ‰ΩúÁî®ËåÉÂõ¥ÔºöbeanÊ†áÁ≠æÁöÑscopeÂ±ûÊÄß"></a>ÊåáÂÆöbeanÂØπË±°ÁöÑ‰ΩúÁî®ËåÉÂõ¥ÔºöbeanÊ†áÁ≠æÁöÑscopeÂ±ûÊÄß</h2><p>ÂèñÂÄºÔºö<br><strong>singleton</strong>ÔºöÂçï‰æãÁöÑÔºàÈªòËÆ§ÂÄºÔºâÔºàÂ∏∏Áî®Ôºâ<br><strong>prototype</strong>ÔºöÂ§ö‰æãÁöÑÔºàÂ∏∏Áî®Ôºâ<br><strong>request</strong>Ôºö‰ΩúÁî®‰∫éwebÂ∫îÁî®ÁöÑËØ∑Ê±ÇËåÉÂõ¥<br><strong>session</strong>Ôºö‰ΩúÁî®‰∫éwebÂ∫îÁî®ÁöÑ‰ºöËØùËåÉÂõ¥<br><strong>global-session</strong>Ôºö‰ΩúÁî®‰∫éÈõÜÁæ§ÁéØÂ¢ÉÁöÑ‰ºöËØùËåÉÂõ¥ÔºàÂÖ®Â±Ä‰ºöËØùËåÉÂõ¥ÔºâÔºåÂΩì‰∏çÊòØÈõÜÁæ§ÁéØÂ¢ÉÊó∂ÔºåÂÆÉÂ∞±ÊòØsession</p>
<p>‰æãÂ≠êÔºö</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>global-sessionÁöÑÂê´‰πâ<br><img src="/images/2020/20200228131045586.png" width=800></p>
<h2 id="beanÂØπË±°ÁöÑÁîüÂëΩÂë®Êúü"><a href="#beanÂØπË±°ÁöÑÁîüÂëΩÂë®Êúü" class="headerlink" title="beanÂØπË±°ÁöÑÁîüÂëΩÂë®Êúü"></a>beanÂØπË±°ÁöÑÁîüÂëΩÂë®Êúü</h2><p><strong>Âçï‰æãÂØπË±°</strong></p>
<ul>
<li>Âá∫ÁîüÔºöÂΩìÂÆπÂô®ÂàõÂª∫Êó∂ÂØπË±°Âá∫Áîü</li>
<li>Ê¥ªÁùÄÔºöÂè™Ë¶ÅÂÆπÂô®ËøòÂú®ÔºåÂØπË±°‰∏ÄÁõ¥Ê¥ªÁùÄ</li>
<li>Ê≠ª‰∫°ÔºöÂÆπÂô®ÈîÄÊØÅÔºåÂØπË±°Ê∂à‰∫°</li>
</ul>
<p>ÊÄªÁªìÔºöÂçï‰æãÂØπË±°ÁöÑÁîüÂëΩÂë®ÊúüÂíåÂÆπÂô®Áõ∏Âêå</p>
<p><strong>Â§ö‰æãÂØπË±°</strong></p>
<ul>
<li>Âá∫ÁîüÔºöÂΩìÊàë‰ª¨‰ΩøÁî®ÂØπË±°Êó∂springÊ°ÜÊû∂‰∏∫Êàë‰ª¨ÂàõÂª∫</li>
<li>Ê¥ªÁùÄÔºöÂØπË±°Âè™Ë¶ÅÊòØÂú®‰ΩøÁî®ËøáÁ®ã‰∏≠Â∞±‰∏ÄÁõ¥Ê¥ªÁùÄ„ÄÇ</li>
<li>Ê≠ª‰∫°ÔºöÂΩìÂØπË±°ÈïøÊó∂Èó¥‰∏çÁî®Ôºå‰∏îÊ≤°ÊúâÂà´ÁöÑÂØπË±°ÂºïÁî®Êó∂ÔºåÁî±JavaÁöÑÂûÉÂúæÂõûÊî∂Âô®ÂõûÊî∂</li>
</ul>
<p>ÂèØ‰ª•ÈÄöËøábeanÊ†áÁ≠æÊåáÂÆöÂú®ÁâπÂÆöÁîüÂëΩÂë®ÊúüÊâßË°åÁöÑÊñπÊ≥ï</p>
<p>‰æãÂ≠êÔºö</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">// beans.xml</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">scope</span>=<span class="string">"singleton"</span> <span class="attr">init-method</span>=<span class="string">"init"</span> <span class="attr">destroy-method</span>=<span class="string">"destroy"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Client.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.Ëé∑ÂèñÊ†∏ÂøÉÂÆπÂô®ÂØπË±°</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);  <span class="comment">// ÊâßË°åÂÆåËøôÂè•ÔºåÂçï‰æãÂØπË±°Â∞±ÂàõÂª∫‰∫Ü</span></span><br><span class="line">        <span class="comment">// 2.Ê†πÊçÆidËé∑ÂèñBeanÂØπË±°</span></span><br><span class="line">        IAccountService as  = (IAccountService)ac.getBean(<span class="string">"accountService"</span>);  <span class="comment">// ÊâßË°åÂÆåËøôÂè•ÔºåÂ§ö‰æãÂØπË±°ÊâçÂàõÂª∫</span></span><br><span class="line">        as.saveAccount();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// AccountServiceImpl.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccountServiceImpl</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ÂØπË±°ÂàõÂª∫‰∫Ü..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">saveAccount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"service‰∏≠ÁöÑsaveAccountÊñπÊ≥ïÊâßË°å‰∫Ü..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ÂØπË±°ÂàùÂßãÂåñ‰∫Ü..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">destroy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ÂØπË±°ÈîÄÊØÅ‰∫Ü..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ÊâßË°åËæìÂá∫</p>
<blockquote>
<p>ÂØπË±°ÂàõÂª∫‰∫Ü‚Ä¶<br>ÂØπË±°ÂàùÂßãÂåñ‰∫Ü‚Ä¶<br>service‰∏≠ÁöÑsaveAccountÊñπÊ≥ïÊâßË°å‰∫Ü‚Ä¶</p>
</blockquote>
<p>QÔºö‰∏∫‰ªÄ‰πàÊ≤°ÊúâÊâßË°åÈîÄÊØÅÊñπÊ≥ïÔºü<br>AÔºömain()ÁªìÊùü‰πãÂêéÔºåÂΩìÂâçËøõÁ®ãÂç†Áî®ÁöÑÂÜÖÂ≠òÂÖ®ÈÉ®ÈáäÊîæÔºàÂåÖÊã¨ÂÆπÂô®ÔºâÔºåÊ≠§Êó∂Âπ∂Ê≤°ÊúâË∞ÉÁî®ÈîÄÊØÅÊñπÊ≥ïÂ∞±Â∑≤ÁªèÊääÂÜÖÂ≠òÈáäÊîæ‰∫Ü„ÄÇËøôÈáåË¶ÅÊÉ≥Ë∞ÉÁî®ÈîÄÊØÅÊñπÊ≥ïÔºåÂèØ‰ª•ÊâãÂä®ÂÖ≥Èó≠ÂÆπÂô®</p>
<p>Âú®main()‰∏≠ÊâãÂä®ÂÖ≥Èó≠ÂÆπÂô®<br><img src="/images/2020/20200228132514347.png" width=600><br>‰∏∫‰ªÄ‰πàÊ≤°ÊúâÂë¢Ôºü<br>ËøôÈáåApplicationContextÊòØ‰∏™Êé•Âè£ÔºåË∞É‰∏çÂà∞Â≠êÁ±ªÁöÑÊñπÊ≥ï</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.Ëé∑ÂèñÊ†∏ÂøÉÂÆπÂô®ÂØπË±°</span></span><br><span class="line"><span class="comment">// ApplicationContext ac = new ClassPathXmlApplicationContext("bean.xml");</span></span><br><span class="line">ClassPathXmlApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);</span><br><span class="line"><span class="comment">// 2.Ê†πÊçÆidËé∑ÂèñBeanÂØπË±°</span></span><br><span class="line">IAccountService as  = (IAccountService)ac.getBean(<span class="string">"accountService"</span>);</span><br><span class="line">as.saveAccount();</span><br><span class="line"><span class="comment">// 3.ÊâãÂä®ÂÖ≥Èó≠ÂÆπÂô®</span></span><br><span class="line">ac.close();</span><br></pre></td></tr></table></figure>
<p>ËøôÊ†∑Â∞±ÂèØ‰ª•‰∫Ü</p>
<blockquote>
<p>ÂØπË±°ÂàõÂª∫‰∫Ü‚Ä¶<br>ÂØπË±°ÂàùÂßãÂåñ‰∫Ü‚Ä¶<br>service‰∏≠ÁöÑsaveAccountÊñπÊ≥ïÊâßË°å‰∫Ü‚Ä¶<br>ÂØπË±°ÈîÄÊØÅ‰∫Ü‚Ä¶</p>
</blockquote>
<p>‰ΩÜÊòØÔºåÊ≠§Êó∂Â¶ÇÊûúÊääÂØπË±°Êîπ‰∏∫Â§ö‰æãÁöÑÔºåÂÖ∂ÂÆÉÈÉΩ‰∏çÂèòÔºå‰∏ç‰ºöÊâßË°åÈîÄÊØÅÊñπÊ≥ï</p>
<hr>
<h1 id="Spring‰∏≠ÁöÑ‰æùËµñÊ≥®ÂÖ•-DI"><a href="#Spring‰∏≠ÁöÑ‰æùËµñÊ≥®ÂÖ•-DI" class="headerlink" title="Spring‰∏≠ÁöÑ‰æùËµñÊ≥®ÂÖ•(DI)"></a>Spring‰∏≠ÁöÑ‰æùËµñÊ≥®ÂÖ•(DI)</h1><p><strong>‰æùËµñÊ≥®ÂÖ• Dependency Injection, DI</strong></p>
<p><strong>ËÉΩÊ≥®ÂÖ•ÁöÑ‰∏âÁ±ªÊï∞ÊçÆ</strong></p>
<ol>
<li>Âü∫Êú¨Á±ªÂûãÂíåString</li>
<li>ÂÖ∂‰ªñbeanÁ±ªÂûãÔºàÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÊàñËÄÖÊ≥®Ëß£ÈÖçÁΩÆËøáÁöÑbeanÔºâ</li>
<li>Â§çÊùÇÁ±ªÂûã/ÈõÜÂêàÁ±ªÂûã</li>
</ol>
<p><strong>Ê≥®ÂÖ•ÁöÑ‰∏âÁßçÊñπÂºè</strong></p>
<ol>
<li>‰ΩøÁî®ÊûÑÈÄ†ÂáΩÊï∞Êèê‰æõ</li>
<li>‰ΩøÁî®setÊñπÊ≥ïÊèê‰æõ</li>
<li>‰ΩøÁî®Ê≥®Ëß£Êèê‰æõ</li>
</ol>
<h2 id="ÊûÑÈÄ†ÂáΩÊï∞Ê≥®ÂÖ•"><a href="#ÊûÑÈÄ†ÂáΩÊï∞Ê≥®ÂÖ•" class="headerlink" title="ÊûÑÈÄ†ÂáΩÊï∞Ê≥®ÂÖ•"></a>ÊûÑÈÄ†ÂáΩÊï∞Ê≥®ÂÖ•</h2><p><strong>‰ΩøÁî®ÁöÑÊ†áÁ≠æ</strong>Ôºöconstructor-arg<br><strong>Ê†áÁ≠æÂá∫Áé∞ÁöÑ‰ΩçÁΩÆ</strong>ÔºöbeanÊ†áÁ≠æÁöÑÂÜÖÈÉ®<br><strong>Ê†áÁ≠æ‰∏≠ÁöÑÂ±ûÊÄßÔºàÊåáÂÆöÂèÇÊï∞Ôºâ</strong>Ôºö</p>
<ul>
<li>typeÔºöÊåáÂÆöÊï∞ÊçÆÁ±ªÂûã</li>
<li>indexÔºöÊåáÂÆöÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÁöÑÁ¥¢Âºï‰ΩçÁΩÆ</li>
<li>nameÔºöÊåáÂÆöÂêçÁß∞ÔºàÂ∏∏Áî®Ôºâ</li>
</ul>
<p><strong>Ê†áÁ≠æ‰∏≠ÁöÑÂ±ûÊÄßÔºàÊèê‰æõËµãÂÄºÔºâ</strong>Ôºö</p>
<ul>
<li>valueÔºöÁî®‰∫éÊèê‰æõÂü∫Êú¨Á±ªÂûãÂíåStringÁ±ªÂûãÁöÑÊï∞ÊçÆ</li>
<li>refÔºöÁî®‰∫éÊåáÂÆöÂÖ∂‰ªñÁöÑbeanÁ±ªÂûãÊï∞ÊçÆÔºàÂú®springÁöÑIocÊ†∏ÂøÉÂÆπÂô®‰∏≠Âá∫Áé∞ËøáÁöÑbeanÂØπË±°Ôºâ</li>
</ul>
<p><strong>‰ºòÂäø</strong>Ôºö<br>Âú®Ëé∑ÂèñbeanÂØπË±°Êó∂ÔºåÊ≥®ÂÖ•Êï∞ÊçÆÊòØÂøÖÈ°ªÁöÑÊìç‰ΩúÔºåÂê¶ÂàôÂØπË±°Êó†Ê≥ïÂàõÂª∫ÊàêÂäüÔºàÂøÖÈ°ªÊüê‰∫õÊï∞ÊçÆÊó∂Ôºå‰∏ç‰ºöË¢´ÂøΩÁï•Ôºâ<br><strong>ÂºäÁ´Ø</strong>Ôºö<br>ÊîπÂèò‰∫ÜbeanÂØπË±°ÁöÑÂÆû‰æãÂåñÊñπÂºèÔºåÂàõÂª∫ÂØπË±°Êó∂ÔºåÂç≥‰Ωø‰ª•ÂêéÁî®‰∏çÂà∞Ëøô‰∫õÊï∞ÊçÆÔºå‰πüÂøÖÈ°ªÊèê‰æõ</p>
<p>‰æãÔºö</p>
<p>AccountServiceImplÁ±ªÊúâ3‰∏™ÂèòÈáèÔºåÊ≤°ÊúâÊó†ÂèÇÊûÑÈÄ†ÂáΩÊï∞</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Â¶ÇÊûúÊòØÁªèÂ∏∏ÂèòÂåñÁöÑÊï∞ÊçÆÔºåÂπ∂‰∏çÈÄÇÁî®‰∫éÊ≥®ÂÖ•ÁöÑÊñπÂºè</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccountServiceImpl</span><span class="params">(String name,Integer age,Date birthday)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>bean.xmlÂØπÂ∫îÁöÑbeanÈÖçÁΩÆ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"test"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"18"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"birthday"</span> <span class="attr">ref</span>=<span class="string">"now"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ÈÖçÁΩÆ‰∏Ä‰∏™Êó•ÊúüÂØπË±° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"now"</span> <span class="attr">class</span>=<span class="string">"java.util.Date"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ÈÖçÁΩÆ‰∏≠ÁöÑvalueÈÉΩÊòØÂ≠óÁ¨¶‰∏≤ÔºåÂØπ‰∫éString„ÄÅIntegerÁ±ªÂûãÔºåSpringÂèØ‰ª•Ëá™Âä®ËΩ¨Êç¢<br>‰ΩÜDateÊó†Ê≥ïÁõ¥Êé•ËΩ¨Êç¢ÔºåÈúÄÂè¶Â§ñÈÖçÁΩÆ</p>
<h2 id="setÊñπÊ≥ïÊ≥®ÂÖ•"><a href="#setÊñπÊ≥ïÊ≥®ÂÖ•" class="headerlink" title="setÊñπÊ≥ïÊ≥®ÂÖ•"></a>setÊñπÊ≥ïÊ≥®ÂÖ•</h2><p>ÊØîÊûÑÈÄ†ÂáΩÊï∞Â∏∏Áî®</p>
<p><strong>‰ΩøÁî®ÁöÑÊ†áÁ≠æ</strong>Ôºöproperty<br><strong>Âá∫Áé∞ÁöÑ‰ΩçÁΩÆ</strong>ÔºöbeanÊ†áÁ≠æÁöÑÂÜÖÈÉ®<br><strong>Ê†áÁ≠æÁöÑÂ±ûÊÄß</strong>Ôºö</p>
<ul>
<li>nameÔºöÁî®‰∫éÊåáÂÆöÊ≥®ÂÖ•Êó∂ÊâÄË∞ÉÁî®ÁöÑsetÊñπÊ≥ïÂêçÁß∞Ôºà‰∏çÁÆ°ÂèòÈáèÂêçÔºâ</li>
<li>valueÔºöÁî®‰∫éÊèê‰æõÂü∫Êú¨Á±ªÂûãÂíåStringÁ±ªÂûãÁöÑÊï∞ÊçÆ</li>
<li>refÔºöÁî®‰∫éÊåáÂÆöÂÖ∂‰ªñÁöÑbeanÁ±ªÂûãÊï∞ÊçÆ</li>
</ul>
<p><strong>‰ºòÂäø</strong>Ôºö<br>ÂàõÂª∫ÂØπË±°Êó∂Ê≤°ÊúâÊòéÁ°ÆÁöÑÈôêÂà∂ÔºåÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®ÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞<br><strong>ÂºäÁ´Ø</strong>Ôºö<br>Â¶ÇÊûúÊúâÊüê‰∏™ÊàêÂëòÂøÖÈ°ªÊúâÂÄºÔºå‰ΩÜÊ≤°ÊúâÊ≥®ÂÖ•</p>
<p>‰æãÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl2</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;<span class="keyword">this</span>.name = name;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;<span class="keyword">this</span>.age = age;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBirthday</span><span class="params">(Date birthday)</span> </span>&#123;<span class="keyword">this</span>.birthday = birthday;&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService2"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl2"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"TEST"</span> &gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"21"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"birthday"</span> <span class="attr">ref</span>=<span class="string">"now"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="Â§çÊùÇÁ±ªÂûãÊ≥®ÂÖ•"><a href="#Â§çÊùÇÁ±ªÂûãÊ≥®ÂÖ•" class="headerlink" title="Â§çÊùÇÁ±ªÂûãÊ≥®ÂÖ•"></a>Â§çÊùÇÁ±ªÂûãÊ≥®ÂÖ•</h2><p>Áî®‰∫éÁªôListÁªìÊûÑÈõÜÂêàÊ≥®ÂÖ•ÁöÑÊ†áÁ≠æÔºö<br>            list array set</p>
<p>Áî®‰∫é‰∏™MapÁªìÊûÑÈõÜÂêàÊ≥®ÂÖ•ÁöÑÊ†áÁ≠æ:<br>            map  props</p>
<p>! ÁªìÊûÑÁõ∏ÂêåÔºåÊ†áÁ≠æÂèØ‰ª•‰∫íÊç¢</p>
<p>‰æãÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl3</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// listÁªìÊûÑ</span></span><br><span class="line">    <span class="keyword">private</span> String[] myStrs;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; myList;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; mySet;</span><br><span class="line">    <span class="comment">// mapÁªìÊûÑ</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; myMap;</span><br><span class="line">    <span class="keyword">private</span> Properties myProps;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMyStrs</span><span class="params">(String[] myStrs)</span> </span>&#123; <span class="keyword">this</span>.myStrs = myStrs; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMyList</span><span class="params">(List&lt;String&gt; myList)</span> </span>&#123; <span class="keyword">this</span>.myList = myList; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMySet</span><span class="params">(Set&lt;String&gt; mySet)</span> </span>&#123; <span class="keyword">this</span>.mySet = mySet; &#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMyMap</span><span class="params">(Map&lt;String, String&gt; myMap)</span> </span>&#123; <span class="keyword">this</span>.myMap = myMap; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMyProps</span><span class="params">(Properties myProps)</span> </span>&#123; <span class="keyword">this</span>.myProps = myProps; &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService3"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl3"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--Áî®array„ÄÅlist„ÄÅsetÈÉΩË°å--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"myStrs"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>AAA<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>BBB<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>CCC<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!--Áî®map„ÄÅpropÈÉΩË°å--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"myMap"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"testA"</span> <span class="attr">value</span>=<span class="string">"aaa"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"testB"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>BBB<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Âü∫‰∫éÊ≥®Ëß£ÁöÑIoCÈÖçÁΩÆ"><a href="#Âü∫‰∫éÊ≥®Ëß£ÁöÑIoCÈÖçÁΩÆ" class="headerlink" title="Âü∫‰∫éÊ≥®Ëß£ÁöÑIoCÈÖçÁΩÆ"></a>Âü∫‰∫éÊ≥®Ëß£ÁöÑIoCÈÖçÁΩÆ</h1><p>Ê≥®Ëß£ÈÖçÁΩÆÂíåxmlÈÖçÁΩÆË¶ÅÂÆûÁé∞ÁöÑÂäüËÉΩÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÔºöÈôç‰ΩéÁ®ãÂ∫èËÄ¶Âêà</p>
<p>ÊõæÁªèXMLÁöÑÈÖçÁΩÆÔºö</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">scope</span>=<span class="string">""</span>  <span class="attr">init-method</span>=<span class="string">""</span> <span class="attr">destroy-method</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">""</span>  <span class="attr">value</span>=<span class="string">""</span> | <span class="attr">ref</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>‰ΩøÁî®Ê≥®Ëß£Êó∂Ôºå‰∏çÁî®‰∏äÈù¢ÁöÑ<bean></bean>Ôºå‰ΩÜÈúÄË¶ÅÂëäËØâSpringÂºÄÂêØÊ≥®Ëß£Êâ´Êèè</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ÂëäÁü•springÂú®ÂàõÂª∫ÂÆπÂô®Êó∂Ë¶ÅÊâ´ÊèèÁöÑÂåÖÔºåÈÖçÁΩÆÊâÄÈúÄË¶ÅÁöÑÊ†áÁ≠æ‰∏çÊòØÂú®beansÁöÑÁ∫¶Êùü‰∏≠ÔºåËÄåÊòØ‰∏Ä‰∏™ÂêçÁß∞‰∏∫</span></span><br><span class="line"><span class="comment">    contextÂêçÁß∞Á©∫Èó¥ÂíåÁ∫¶Êùü‰∏≠--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.itheima"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ÂÖ∂‰∏≠contextÂêçÁß∞Á©∫Èó¥ÂíåÂâçÈù¢‰∏ÄÊ†∑ÔºåÂú®ÊñáÊ°£‰∏≠ÊêúÁ¥¢Êâæ</p>
<h2 id="Áî®‰∫éÂàõÂª∫ÂØπË±°ÁöÑÊ≥®Ëß£"><a href="#Áî®‰∫éÂàõÂª∫ÂØπË±°ÁöÑÊ≥®Ëß£" class="headerlink" title="Áî®‰∫éÂàõÂª∫ÂØπË±°ÁöÑÊ≥®Ëß£"></a>Áî®‰∫éÂàõÂª∫ÂØπË±°ÁöÑÊ≥®Ëß£</h2><p><strong>@Component</strong><br>‰ΩúÁî®Ôºö<br>Áî®‰∫éÊääÂΩìÂâçÁ±ªÂØπË±°Â≠òÂÖ•springÂÆπÂô®‰∏≠</p>
<p>Â±ûÊÄßÔºö<br>valueÔºöÁî®‰∫éÊåáÂÆöbeanÁöÑidÔºà‰∏çÂÜôÊó∂ÔºåÈªòËÆ§ÂÄºÊòØÂΩìÂâçÁ±ªÂêçÔºå‰∏îÈ¶ñÂ≠óÊØçÂ∞èÂÜôÔºâ</p>
<p>‰æãÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>(value = <span class="string">"accountService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÁªÜËäÇÔºö<br>ÂΩìÂè™Áªô‰∏Ä‰∏™valueÂ±ûÊÄßËµãÂÄºÊó∂ÔºåvalueÂèØ‰ª•‰∏çÂÜô</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>@Controller</strong>Ôºö‰∏ÄËà¨Áî®Âú®Ë°®Áé∞Â±Ç<br><strong>@Service</strong>Ôºö‰∏ÄËà¨Áî®Âú®‰∏öÂä°Â±Ç<br><strong>@Repository</strong>Ôºö‰∏ÄËà¨Áî®Âú®ÊåÅ‰πÖÂ±Ç</p>
<p>‰ª•‰∏ä‰∏â‰∏™Ê≥®Ëß£ÁöÑ‰ΩúÁî®ÂíåÂ±ûÊÄß‰∏é@Component‰∏ÄÊ®°‰∏ÄÊ†∑<br>ÊòØSpringÊ°ÜÊû∂Êèê‰æõÁöÑÊòéÁ°ÆÁöÑ‰∏âÂ±Ç‰ΩøÁî®ÁöÑÊ≥®Ëß£Ôºå‰Ωø‰∏âÂ±ÇÂØπË±°Êõ¥Âä†Ê∏ÖÊô∞</p>
<h2 id="Áî®‰∫éÊ≥®ÂÖ•Êï∞ÊçÆÁöÑÊ≥®Ëß£"><a href="#Áî®‰∫éÊ≥®ÂÖ•Êï∞ÊçÆÁöÑÊ≥®Ëß£" class="headerlink" title="Áî®‰∫éÊ≥®ÂÖ•Êï∞ÊçÆÁöÑÊ≥®Ëß£"></a>Áî®‰∫éÊ≥®ÂÖ•Êï∞ÊçÆÁöÑÊ≥®Ëß£</h2><p><strong>@Autowired</strong><br>‰ΩúÁî®Ôºö<br>Ëá™Âä®ÊåâÁÖßÁ±ªÂûãÊ≥®ÂÖ•„ÄÇÂè™Ë¶ÅÂÆπÂô®‰∏≠ÊúâÂîØ‰∏ÄÁöÑ‰∏Ä‰∏™beanÂØπË±°Á±ªÂûãÂíåË¶ÅÊ≥®ÂÖ•ÁöÑÂèòÈáèÁ±ªÂûãÂåπÈÖçÔºåÂ∞±ÂèØ‰ª•Ê≥®ÂÖ•ÊàêÂäü„ÄÇÂ¶ÇÊûúiocÂÆπÂô®‰∏≠Ê≤°Êúâ‰ªª‰ΩïbeanÁöÑÁ±ªÂûãÂíåË¶ÅÊ≥®ÂÖ•ÁöÑÂèòÈáèÁ±ªÂûãÂåπÈÖçÔºåÂàôÊä•Èîô<br>ÔºàÂΩìÊúâÂ§ö‰∏™beanÁ±ªÂûãÂåπÈÖçÊó∂ÔºåÁî®ÂèòÈáèÂêçÂíåbeanÁöÑidÂåπÈÖçÔºåÂ¶ÇÊûúÊÅ∞Â•ΩÊúâ‰∏Ä‰∏™ÂåπÈÖçÔºå‰πüÂèØ‰ª•ÊàêÂäüÔºåÂê¶ÂàôÊä•ÈîôÔºâ</p>
<p>Âá∫Áé∞‰ΩçÁΩÆÔºö<br>ÂèØ‰ª•ÊòØÂèòÈáè‰∏äÔºå‰πüÂèØ‰ª•ÊòØÊñπÊ≥ï‰∏ä</p>
<p>‰æãÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> IAccountDao accountDao = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<p>ÁªÜËäÇÔºö<br>Âú®‰ΩøÁî®Ê≥®Ëß£Ê≥®ÂÖ•Êó∂ÔºåsetÊñπÊ≥ïÂ∞±‰∏çÊòØÂøÖÈ°ªÁöÑ‰∫Ü</p>
<p><strong>@Qualifier</strong><br> ‰ΩúÁî®Ôºö<br> Âú®ÊåâÁÖßÁ±ª‰∏≠Ê≥®ÂÖ•ÁöÑÂü∫Á°Ä‰πã‰∏äÂÜçÊåâÁÖßÂêçÁß∞Ê≥®ÂÖ•„ÄÇÂú®ÁªôÁ±ªÊàêÂëòÊ≥®ÂÖ•Êó∂‰∏çËÉΩÂçïÁã¨‰ΩøÁî®ÔºåÂøÖÈ°ªÂíå@Autowired‰∏ÄËµ∑„ÄÇ‰ΩÜÊòØÂú®ÁªôÊñπÊ≥ïÂèÇÊï∞Ê≥®ÂÖ•Êó∂ÂèØ‰ª•ÂçïÁã¨‰ΩøÁî®</p>
<p>Â±ûÊÄßÔºö<br>valueÔºöÁî®‰∫éÊåáÂÆöÊ≥®ÂÖ•beanÁöÑid</p>
<p>‰æãÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@Qualifier</span>(<span class="string">"accountDao1"</span>)</span><br><span class="line"><span class="keyword">private</span> IAccountDao accountDao = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<p><strong>@Resource</strong><br> ‰ΩúÁî®Ôºö<br> Áõ¥Êé•ÊåâÁÖßbeanÁöÑidÊ≥®ÂÖ•ÔºåÂèØ‰ª•Áã¨Á´ã‰ΩøÁî®</p>
<p>Â±ûÊÄßÔºö<br>nameÔºöÁî®‰∫éÊåáÂÆöbeanÁöÑid<br>ÔºàÊ≥®ÊÑèÔºöËøôÈáåÊòØnameÔºå‰∏çÊòØvalueÔºâ</p>
<p>‰æãÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Resource</span>(name = <span class="string">"accountDao1"</span>)</span><br><span class="line"><span class="keyword">private</span> IAccountDao accountDao = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<p>‰ª•‰∏ä‰∏â‰∏™Ê≥®Ëß£ÈÉΩÂè™ËÉΩÊ≥®ÂÖ•ÂÖ∂‰ªñbeanÁ±ªÂûãÁöÑÊï∞ÊçÆÔºåËÄåÂü∫Êú¨Á±ªÂûãÂíåStringÁ±ªÂûãÊó†Ê≥ïÊ≥®ÂÖ•<br>Âè¶Â§ñÔºåÈõÜÂêàÁ±ªÂûãÁöÑÊ≥®ÂÖ•Âè™ËÉΩÈÄöËøáXMLÊù•ÂÆûÁé∞</p>
<p><strong>@Value</strong><br>‰ΩúÁî®Ôºö<br>Áî®‰∫éÊ≥®ÂÖ•Âü∫Êú¨Á±ªÂûãÂíåStringÁ±ªÂûãÁöÑÊï∞ÊçÆ</p>
<p>Â±ûÊÄßÔºö<br>valueÔºöÁî®‰∫éÊåáÂÆöÊï∞ÊçÆÁöÑÂÄº<br>ÂèØ‰ª•‰ΩøÁî®Spring‰∏≠SpELÔºàÂç≥SpringÁöÑelË°®ËææÂºèÔºâÂÜôÊ≥ïÔºö${Ë°®ËææÂºè}</p>
<h2 id="Áî®‰∫éÊîπÂèò‰ΩúÁî®ËåÉÂõ¥ÁöÑÊ≥®Ëß£"><a href="#Áî®‰∫éÊîπÂèò‰ΩúÁî®ËåÉÂõ¥ÁöÑÊ≥®Ëß£" class="headerlink" title="Áî®‰∫éÊîπÂèò‰ΩúÁî®ËåÉÂõ¥ÁöÑÊ≥®Ëß£"></a>Áî®‰∫éÊîπÂèò‰ΩúÁî®ËåÉÂõ¥ÁöÑÊ≥®Ëß£</h2><p><strong>@Scope</strong><br>‰ΩúÁî®Ôºö<br>Áî®‰∫éÊåáÂÆöbeanÁöÑ‰ΩúÁî®ËåÉÂõ¥</p>
<p>Â±ûÊÄßÔºö<br>valueÔºöÊåáÂÆöËåÉÂõ¥ÁöÑÂèñÂÄºÔºàÂ∏∏Áî®Ôºösingleton prototypeÔºâ</p>
<p>‰æãÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="meta">@Scope</span>(<span class="string">"prototype"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ÁîüÂëΩÂë®ÊúüÁõ∏ÂÖ≥ÁöÑÊ≥®Ëß£"><a href="#ÁîüÂëΩÂë®ÊúüÁõ∏ÂÖ≥ÁöÑÊ≥®Ëß£" class="headerlink" title="ÁîüÂëΩÂë®ÊúüÁõ∏ÂÖ≥ÁöÑÊ≥®Ëß£"></a>ÁîüÂëΩÂë®ÊúüÁõ∏ÂÖ≥ÁöÑÊ≥®Ëß£</h2><p><strong>@PreDestroy</strong><br>‰ΩúÁî®ÔºöÁî®‰∫éÊåáÂÆöÈîÄÊØÅÊñπÊ≥ï</p>
<p><strong>@PostConstruct</strong><br>‰ΩúÁî®ÔºöÁî®‰∫éÊåáÂÆöÂàùÂßãÂåñÊñπÊ≥ï</p>
<p>ÂíåbeanÊ†áÁ≠æ‰∏≠‰ΩøÁî®init-methodÂíådestroy-methode‰∏ÄÊ†∑</p>
<p>‰æãÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="meta">@Scope</span>(<span class="string">"singleton"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span>(name = <span class="string">"accountDao1"</span>)</span><br><span class="line">    <span class="keyword">private</span> IAccountDao accountDao = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ÂàùÂßãÂåñÊñπÊ≥ïÊâßË°å‰∫Ü"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PreDestroy</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">destroy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ÈîÄÊØÅÊñπÊ≥ïÊâßË°å‰∫Ü"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">saveAccount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        accountDao.saveAccount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÂêåÊ†∑ÔºåÂ¶ÇÊûúÁ±ªÊòØÂ§ö‰æãÁöÑÔºåÂèØËÉΩ‰∏ç‰ºöÁúãÂà∞ÈîÄÊØÅÊñπÊ≥ïÊâßË°åÁöÑËæìÂá∫ÔºåÂõ†‰∏∫ÂÆÉÁöÑÈîÄÊØÅÊòØJVMÁÆ°ÁöÑ</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringÁ¨îËÆ∞04 Â∫îÁî®ÂàÜÂ±Ç</title>
    <url>/2020/02/24/note-spring-04/</url>
    <content><![CDATA[<h1 id="‰∏âÂ±ÇÊû∂ÊûÑ-3-Tier-Architecture"><a href="#‰∏âÂ±ÇÊû∂ÊûÑ-3-Tier-Architecture" class="headerlink" title="‰∏âÂ±ÇÊû∂ÊûÑ (3-Tier Architecture)"></a>‰∏âÂ±ÇÊû∂ÊûÑ (3-Tier Architecture)</h1><img src="/images/2020/20200224200654315.png" width=400>

<ul>
<li><strong>Ë°®Á§∫Â±Ç (PL, Presentation Layer Êàñ UI, User Interface Layer)</strong> ‚Äî‚Äî ‰∏ªË¶ÅÊòØ‰∏éÁî®Êà∑‰∫§‰∫íÁöÑÁïåÈù¢ÔºåÁî®‰∫éÊé•Êî∂Áî®Êà∑ËæìÂÖ•ÁöÑÊï∞ÊçÆÂíåÊòæÁ§∫Â§ÑÁêÜÂêéÁöÑÊï∞ÊçÆ</li>
<li><strong>‰∏öÂä°ÈÄªËæëÂ±Ç (BLL, Business Logic Layer)</strong> ‚Äî‚Äî PL‰∏éDAL‰πãÈó¥ÁöÑÊ°•Ê¢ÅÔºåÂÆûÁé∞‰∏öÂä°ÈÄªËæëÔºå‰∏ªË¶ÅÂåÖÊã¨È™åËØÅ„ÄÅËÆ°ÁÆó„ÄÅËßÑÂàôÁ≠â</li>
<li><strong>Êï∞ÊçÆËÆøÈóÆÂ±Ç (DAL, Data Access Layer)</strong> ‚Äî‚Äî ‰∏éÊï∞ÊçÆÂ∫ì‰∫§‰∫íÔºåÂÆûÁé∞ÂØπÊï∞ÊçÆÁöÑCURDÔºåÂ∞ÜÂ≠òÂÇ®Âú®Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊï∞ÊçÆÊèê‰∫§Áªô‰∏öÂä°Â±ÇÔºåÂêåÊó∂Â∞Ü‰∏öÂä°Â±ÇÂ§ÑÁêÜÁöÑÊï∞ÊçÆ‰øùÂ≠òÂà∞Êï∞ÊçÆÂ∫ì</li>
</ul>
<h1 id="MVCÊ®°Âºè-Model-View-Controller"><a href="#MVCÊ®°Âºè-Model-View-Controller" class="headerlink" title="MVCÊ®°Âºè (Model-View-Controller)"></a>MVCÊ®°Âºè (Model-View-Controller)</h1><img src="/images/2020/20200224201239437.png" width=300>

<p>ÊèèËø∞1:</p>
<ul>
<li><strong>Ê®°Âûã (Model)</strong> ‚Äî‚Äî Á®ãÂ∫èÈúÄË¶ÅÊìç‰ΩúÁöÑÊï∞ÊçÆÊàñ‰ø°ÊÅØ</li>
<li><strong>ËßÜÂõæ (View)</strong> ‚Äî‚Äî Êèê‰æõÁªôÁî®Êà∑ÁöÑÊìç‰ΩúÁïåÈù¢ÔºåÊòØÁ®ãÂ∫èÁöÑÂ§ñÂ£≥</li>
<li><strong>ÊéßÂà∂Âô® (Controller)</strong> ‚Äî‚Äî Ë¥üË¥£Ê†πÊçÆÁî®Êà∑‰ªé‚ÄùËßÜÂõæÂ±Ç‚ÄùËæìÂÖ•ÁöÑÊåá‰ª§ÔºåÈÄâÂèñ‚ÄùÊï∞ÊçÆÂ±Ç‚Äù‰∏≠ÁöÑÊï∞ÊçÆÔºåÁÑ∂ÂêéÂØπÂÖ∂ËøõË°åÁõ∏Â∫îÁöÑÊìç‰ΩúÔºå‰∫ßÁîüÊúÄÁªàÁªìÊûú</li>
</ul>
<p>ÊèèËø∞2:</p>
<ul>
<li><strong>Ê®°Âûã (Model)</strong> ‚Äî‚Äî Ë°®Á§∫Â∫îÁî®Á®ãÂ∫èÂíå‰ªª‰ΩïÂ∫îÁî±ÂÖ∂ÊâßË°åÁöÑ‰∏öÂä°ÈÄªËæëÊàñÊìç‰ΩúÁöÑÁä∂ÊÄÅ</li>
<li><strong>ËßÜÂõæ (View)</strong> ‚Äî‚Äî Ë¥üË¥£ÈÄöËøáÁî®Êà∑ÁïåÈù¢Â±ïÁ§∫ÂÜÖÂÆπ</li>
<li><strong>ÊéßÂà∂Âô® (Controller)</strong> ‚Äî‚Äî ÊòØÂ§ÑÁêÜÁî®Êà∑‰∫§‰∫í„ÄÅ‰ΩøÁî®Ê®°ÂûãÂπ∂ÊúÄÁªàÈÄâÊã©Ë¶ÅÂëàÁé∞ÁöÑËßÜÂõæÁöÑÁªÑ‰ª∂</li>
</ul>
<h1 id="‰∏âÂ±ÇÊû∂ÊûÑ‰∏éMVCÁöÑÂå∫Âà´‰∏éËÅîÁ≥ª"><a href="#‰∏âÂ±ÇÊû∂ÊûÑ‰∏éMVCÁöÑÂå∫Âà´‰∏éËÅîÁ≥ª" class="headerlink" title="‰∏âÂ±ÇÊû∂ÊûÑ‰∏éMVCÁöÑÂå∫Âà´‰∏éËÅîÁ≥ª"></a>‰∏âÂ±ÇÊû∂ÊûÑ‰∏éMVCÁöÑÂå∫Âà´‰∏éËÅîÁ≥ª</h1><h4 id="1-ÂÖ≥Ê≥®ÁÇπ"><a href="#1-ÂÖ≥Ê≥®ÁÇπ" class="headerlink" title="1. ÂÖ≥Ê≥®ÁÇπ"></a>1. ÂÖ≥Ê≥®ÁÇπ</h4><ul>
<li>‰∏âÂ±ÇÊû∂ÊûÑÊòØ‰∏∫‰∫ÜËß£ÂÜ≥Êï¥‰∏™Â∫îÁî®Á®ãÂ∫è‰∏≠ÂêÑ‰∏™‰∏öÂä°Êìç‰ΩúËøáÁ®ã‰∏≠ÁöÑ==‰∏çÂêåÈò∂ÊÆµÁöÑ‰ª£Á†ÅÂ∞ÅË£Ö==ÈóÆÈ¢òÔºå‰ΩøÁ®ãÂ∫èÂëòÊõ¥Âä†‰∏ìÊ≥®ÁöÑÂ§ÑÁêÜÊüêÈò∂ÊÆµÁöÑ‰∏öÂä°ÈÄªËæë</li>
<li>MVCÊû∂ÊûÑÊ®°ÂºèÂ∞ÜÂ∫îÁî®Á®ãÂ∫èÂàÜ‰∏∫‰∏â‰∏™‰∏ªË¶ÅÁªÑÊàêÈÉ®ÂàÜÔºåÊúâÂä©‰∫éÂÆûÁé∞ÂÖ≥Ê≥®ÁÇπÂàÜÁ¶ª„ÄÇÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπÊòØÂºÄÂèëÊó∂ÁöÑÊåáÂØºÂéüÂàôÔºåÊ≠§ÂéüÂàô‰∏ªÂº†Â∫îÊ†πÊçÆ==ËΩØ‰ª∂ÊâßË°åÁöÑÂ∑•‰ΩúÁ±ªÂûã==Â∞ÜËΩØ‰ª∂ÂàÜÁ¶ª<h4 id="2-ÂàáÂàÜÊñπÂêë"><a href="#2-ÂàáÂàÜÊñπÂêë" class="headerlink" title="2. ÂàáÂàÜÊñπÂêë"></a>2. ÂàáÂàÜÊñπÂêë</h4></li>
<li>‰∏âÂ±ÇÊû∂ÊûÑÊòØ‰∏ÄÁßçËΩØ‰ª∂ÊäΩË±°ÁöÑÂ±ÇÊ¨°ÁªìÊûÑÔºåÊòØÂØπÂ§çÊùÇÁ≥ªÁªüÁöÑ‰∏ÄÁßç<strong>Á∫µÂêëÂàáÂàÜ</strong></li>
<li>MVCÊõ¥ÂÉèÊòØ<strong>Ê®™ÂêëÂàáÂàÜ</strong>ÔºåÊØèÂùóÈÉΩÂèØ‰ª•Áã¨Á´ãÊµãËØï<h4 id="3-‰æùËµñÂÖ≥Á≥ª"><a href="#3-‰æùËµñÂÖ≥Á≥ª" class="headerlink" title="3. ‰æùËµñÂÖ≥Á≥ª"></a>3. ‰æùËµñÂÖ≥Á≥ª</h4></li>
<li>‰∏âÂ±ÇÊû∂ÊûÑ‰∏≠ÔºåÂ±ÇÊ¨°‰πãÈó¥‰∏ÄËà¨ÊòØ<strong>Âêë‰∏ã‰æùËµñ</strong>ÁöÑ„ÄÇ‰∏ãÂ±ÇÂú®Êú™Á°ÆÂÆöÊé•Âè£ÔºàÂ•ëÁ∫¶ÔºâËßÑËåÉÂâçÔºå‰∏äÂ±Ç‰ª£Á†ÅÊó†Ê≥ïÂºÄÂèëÔºå‰∏ãÂ±Ç‰ª£Á†ÅÊé•Âè£ÁöÑÂèòÂåñÂ∞Ü‰Ωø‰∏äÂ±Ç‰∏ÄËµ∑ÂèòÂåñ</li>
<li>MVC‰∏≠Ôºå‰∏âËÄÖÂπ∂<strong>‰∏çÂ≠òÂú®ÊòéÊòæÁöÑÂ±ÇÊ¨°ÁªìÊûÑ</strong>ÔºåÊ≤°ÊúâÊòéÊòæÁöÑÂêë‰∏ã‰æùËµñÁöÑÂÖ≥Á≥ª„ÄÇÁõ∏ÂèçÁöÑÊòØViewÂíåModelÂæÄÂæÄÊòØÊØîËæÉÁã¨Á´ãÁöÑÔºåËÄåControllerÂàôÊòØ‰∏§ËÄÖÁöÑÊ°•Ê¢Å</li>
</ul>
<p><strong>ÈÉΩÊòØ‰∏∫‰∫ÜËß£ËÄ¶</strong></p>
<hr>
<h1 id="MVC„ÄÅMVP„ÄÅMVVM"><a href="#MVC„ÄÅMVP„ÄÅMVVM" class="headerlink" title="MVC„ÄÅMVP„ÄÅMVVM"></a>MVC„ÄÅMVP„ÄÅMVVM</h1><blockquote>
<p><a href="http://www.ruanyifeng.com/blog/2015/02/mvcmvp_mvvm.html" target="_blank" rel="noopener">MVCÔºåMVP Âíå MVVM ÁöÑÂõæÁ§∫</a></p>
</blockquote>
<hr>
<h1 id="ÈòøÈáåËßÑËåÉ"><a href="#ÈòøÈáåËßÑËåÉ" class="headerlink" title="ÈòøÈáåËßÑËåÉ"></a>ÈòøÈáåËßÑËåÉ</h1><blockquote>
<p>„ÄäJavaÂºÄÂèëÊâãÂÜå„Äãv1.5.0 ÂçéÂ±±Áâà</p>
</blockquote>
<p>Âõæ‰∏≠ÈªòËÆ§‰∏äÂ±Ç‰æùËµñ‰∫é‰∏ãÂ±ÇÔºåÁÆ≠Â§¥ÂÖ≥Á≥ªË°®Á§∫ÂèØÁõ¥Êé•‰æùËµñÔºåÂ¶Ç:ÂºÄÊîæÊé•Âè£Â±ÇÂèØ‰ª•‰æùËµñ‰∫é Web Â±ÇÔºå‰πüÂèØ‰ª•Áõ¥Êé•‰æùËµñ‰∫é Service Â±ÇÔºå‰æùÊ≠§Á±ªÊé®:<br><img src="/images/2020/20200224193901683.png" width=400></p>
<ul>
<li><strong>ÂºÄÊîæÊé•Âè£Â±Ç</strong> : ÂèØÁõ¥Êé•Â∞ÅË£Ö Service ÊñπÊ≥ïÊö¥Èú≤Êàê RPC Êé•Âè£;ÈÄöËøá Web Â∞ÅË£ÖÊàê http Êé•Âè£;ËøõË°åÁΩëÂÖ≥ÂÆâÂÖ®ÊéßÂà∂„ÄÅÊµÅÈáèÊéßÂà∂Á≠â„ÄÇ</li>
<li><strong>ÁªàÁ´ØÊòæÁ§∫Â±Ç</strong> : ÂêÑ‰∏™Á´ØÁöÑÊ®°ÊùøÊ∏≤ÊüìÂπ∂ÊâßË°åÊòæÁ§∫ÁöÑÂ±Ç„ÄÇÂΩìÂâç‰∏ªË¶ÅÊòØ velocity Ê∏≤ÊüìÔºåJS Ê∏≤ÊüìÔºåJSP Ê∏≤ÊüìÔºåÁßªÂä®Á´ØÂ±ïÁ§∫Á≠â„ÄÇ</li>
<li><strong>WebÂ±Ç</strong> : ‰∏ªË¶ÅÊòØÂØπËÆøÈóÆÊéßÂà∂ËøõË°åËΩ¨ÂèëÔºåÂêÑÁ±ªÂü∫Êú¨ÂèÇÊï∞Ê†°È™åÔºåÊàñËÄÖ‰∏çÂ§çÁî®ÁöÑ‰∏öÂä°ÁÆÄÂçïÂ§ÑÁêÜÁ≠â„ÄÇ</li>
<li><strong>ServiceÂ±Ç</strong> : Áõ∏ÂØπÂÖ∑‰ΩìÁöÑ‰∏öÂä°ÈÄªËæëÊúçÂä°Â±Ç„ÄÇ</li>
<li><strong>ManagerÂ±Ç</strong> : ÈÄöÁî®‰∏öÂä°Â§ÑÁêÜÂ±ÇÔºåÂÆÉÊúâÂ¶Ç‰∏ãÁâπÂæÅ:</li>
</ul>
<ol>
<li>ÂØπÁ¨¨‰∏âÊñπÂπ≥Âè∞Â∞ÅË£ÖÁöÑÂ±ÇÔºåÈ¢ÑÂ§ÑÁêÜËøîÂõûÁªìÊûúÂèäËΩ¨ÂåñÂºÇÂ∏∏‰ø°ÊÅØ„ÄÇ</li>
<li>ÂØπ Service Â±ÇÈÄöÁî®ËÉΩÂäõÁöÑ‰∏ãÊ≤âÔºåÂ¶ÇÁºìÂ≠òÊñπÊ°à„ÄÅ‰∏≠Èó¥‰ª∂ÈÄöÁî®Â§ÑÁêÜ„ÄÇ</li>
<li>‰∏é DAO Â±Ç‰∫§‰∫íÔºåÂØπÂ§ö‰∏™ DAO ÁöÑÁªÑÂêàÂ§çÁî®„ÄÇ</li>
</ol>
<ul>
<li><strong>DAOÂ±Ç</strong> : Êï∞ÊçÆËÆøÈóÆÂ±ÇÔºå‰∏éÂ∫ïÂ±Ç MySQL„ÄÅOracle„ÄÅHbase Á≠âËøõË°åÊï∞ÊçÆ‰∫§‰∫í„ÄÇ</li>
<li><strong>Â§ñÈÉ®Êé•Âè£ÊàñÁ¨¨‰∏âÊñπÂπ≥Âè∞</strong> : ÂåÖÊã¨ÂÖ∂ÂÆÉÈÉ®Èó® RPC ÂºÄÊîæÊé•Âè£ÔºåÂü∫Á°ÄÂπ≥Âè∞ÔºåÂÖ∂ÂÆÉÂÖ¨Âè∏ÁöÑ HTTP Êé•Âè£„ÄÇ</li>
</ul>
<blockquote>
<p>ref:<br><a href="http://www.ruanyifeng.com/blog/2007/11/mvc.html" target="_blank" rel="noopener">Ë∞àË∞àMVCÊ®°Âºè</a><br><a href="https://www.jianshu.com/p/3b231e5094c5" target="_blank" rel="noopener">ASP.NET MVC‰∏é‰∏âÂ±ÇÊû∂ÊûÑ</a><br><a href="https://docs.microsoft.com/zh-cn/aspnet/core/mvc/overview?view=aspnetcore-3.1" target="_blank" rel="noopener">ASP.NET Core MVC Ê¶ÇËø∞</a><br><a href="https://docs.microsoft.com/zh-cn/dotnet/architecture/modern-web-apps-azure/architectural-principles#separation-of-concerns" target="_blank" rel="noopener">‰ΩìÁ≥ªÁªìÊûÑÂéüÂàô</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringÁ¨îËÆ∞03 Â∑•ÂéÇÊ®°Âºè</title>
    <url>/2020/02/24/note-spring-03/</url>
    <content><![CDATA[<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a><br>p9~14</p>
<hr>
<h1 id="Á®ãÂ∫èÁöÑËÄ¶Âêà‰∏éËß£ËÄ¶-‰ª•jdbcÊ≥®ÂÜåÈ©±Âä®‰∏∫‰æã"><a href="#Á®ãÂ∫èÁöÑËÄ¶Âêà‰∏éËß£ËÄ¶-‰ª•jdbcÊ≥®ÂÜåÈ©±Âä®‰∏∫‰æã" class="headerlink" title="Á®ãÂ∫èÁöÑËÄ¶Âêà‰∏éËß£ËÄ¶ (‰ª•jdbcÊ≥®ÂÜåÈ©±Âä®‰∏∫‰æã)"></a>Á®ãÂ∫èÁöÑËÄ¶Âêà‰∏éËß£ËÄ¶ (‰ª•jdbcÊ≥®ÂÜåÈ©±Âä®‰∏∫‰æã)</h1><p>jdbcÊìç‰Ωú‰∏≠ÔºåÊ≥®ÂÜåÊï∞ÊçÆÂ∫ìÈ©±Âä®Êó∂ÔºåÊúâ2ÁßçÊñπÊ≥ï</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ÊñπÊ≥ï1</span></span><br><span class="line">DriverManager.registerDriver(<span class="keyword">new</span> com.mysql.jdbc.Driver());</span><br><span class="line"><span class="comment">// ÊñπÊ≥ï2</span></span><br><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br></pre></td></tr></table></figure>
<p>Âú®pom.xml‰∏≠Ê∑ªÂä†‰∫Ü‰æùËµñÁöÑÊÉÖÂÜµ‰∏ãÈÉΩÂèØ‰ª•Ê≠£Â∏∏ËøêË°å</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>‰ΩÜÊòØÔºåÂ¶ÇÊûúÂéªÊéâËøôÊÆµ‰æùËµñ</p>
<p>ÊñπÊ≥ï1Êä•ErrorÔºåÊó†Ê≥ïÈÄöËøáÁºñËØë</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Error:(26, 56) java: Á®ãÂ∫èÂåÖcom.mysql.jdbc‰∏çÂ≠òÂú®</span><br></pre></td></tr></table></figure>
<p>ËÄåÊñπÊ≥ï2Êä•ExceptionÔºåÂèØ‰ª•ÈÄöËøáÁºñËØëÔºàÊó†Ê≥ïËøêË°åÔºâ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: com.mysql.jdbc.Driver</span><br></pre></td></tr></table></figure>
<p>Âõ†‰∏∫ÊñπÊ≥ï1‰æùËµñ‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÈ©±Âä®Á±ªÔºåËÄåÊñπÊ≥ï2Áî®ÂèçÂ∞ÑÔºå‰æùËµñÁöÑÂè™ÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤<br>‰ΩÜÊòØËøô‰∏™Â≠óÁ¨¶‰∏≤‰ªçÊòØÂÜôÊ≠ªÂú®‰ª£Á†ÅÈáåÁöÑ„ÄÇÂ∫îËØ•ÂÜôÂà∞ÈÖçÁΩÆÊñá‰ª∂ÈáåÂéªÔºåËøõ‰∏ÄÊ≠•ÂáèÂ∞ëËÄ¶Âêà</p>
<p>ÂÆûÈôÖÂºÄÂèë‰∏≠Â∫îËØ•ÂÅöÂà∞Ôºö</p>
<p><strong>ÁºñËØëÊúü‰∏ç‰æùËµñÔºåËøêË°åÊó∂Êâç‰æùËµñ</strong></p>
<p>Ëß£ËÄ¶ÁöÑÊÄùË∑ØÔºö</p>
<p><strong>Á¨¨‰∏ÄÊ≠•Ôºö‰ΩøÁî®ÂèçÂ∞ÑÊù•ÂàõÂª∫ÂØπË±°ÔºåËÄåÈÅøÂÖç‰ΩøÁî®newÂÖ≥ÈîÆÂ≠ó</strong></p>
<p><strong>Á¨¨‰∫åÊ≠•ÔºöÈÄöËøáËØªÂèñÈÖçÁΩÆÊñá‰ª∂Êù•Ëé∑ÂèñË¶ÅÂàõÂª∫ÁöÑÂØπË±°ÂÖ®ÈôêÂÆöÁ±ªÂêç</strong></p>
<hr>
<h1 id="Â∑•ÂéÇÊ®°Âºè"><a href="#Â∑•ÂéÇÊ®°Âºè" class="headerlink" title="Â∑•ÂéÇÊ®°Âºè"></a>Â∑•ÂéÇÊ®°Âºè</h1><h2 id="ÂéüÂßãÁöÑÂàÜÂ±ÇÂÆûÁé∞ÊñπÊ≥ï"><a href="#ÂéüÂßãÁöÑÂàÜÂ±ÇÂÆûÁé∞ÊñπÊ≥ï" class="headerlink" title="ÂéüÂßãÁöÑÂàÜÂ±ÇÂÆûÁé∞ÊñπÊ≥ï"></a>ÂéüÂßãÁöÑÂàÜÂ±ÇÂÆûÁé∞ÊñπÊ≥ï</h2><img src="/images/2020/202002271544168.png" width=400>

<ul>
<li>Client : Ê®°Êãü‰∏Ä‰∏™Ë°®Áé∞Â±ÇÔºåÁî®‰∫éË∞ÉÁî®‰∏öÂä°Â±Ç</li>
<li>IAccountService : Ë¥¶Êà∑‰∏öÂä°Â±ÇÁöÑÊé•Âè£</li>
<li>AccountServiceImpl : Ë¥¶Êà∑ÁöÑ‰∏öÂä°Â±ÇÂÆûÁé∞Á±ª</li>
<li>IAccountDao : Ë¥¶Êà∑ÁöÑÊåÅ‰πÖÂ±ÇÊé•Âè£</li>
<li>AccountDaoImpl : Ë¥¶Êà∑ÁöÑÊåÅ‰πÖÂ±ÇÂÆûÁé∞Á±ª</li>
</ul>
<p>ÂÖ∂‰∏≠ÔºåÊúâ‰∏§‰∏™‰æùËµñÂÖ≥Á≥ª</p>
<ol>
<li>Ë°®Áé∞Â±ÇË∞ÉÁî®‰∏öÂä°Â±ÇÊó∂<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        IAccountService as = <span class="keyword">new</span> AccountServiceImpl();</span><br><span class="line">        as.saveAccount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>‰∏öÂä°Â±ÇË∞ÉÁî®ÊåÅ‰πÖÂ±ÇÊó∂<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> IAccountDao accountDao = <span class="keyword">new</span> AccountDaoImpl();</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">saveAccount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        accountDao.saveAccount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
ÈÉΩÁî®Âà∞‰∫ÜnewÔºåËÄ¶ÂêàÂ∫¶È´ò<br>Â¶ÇÊûúÊ≠§Êó∂ÊääAccountDaoImplÁöÑ‰ª£Á†ÅÂà†‰∫ÜÔºåServiceÂ∞±Êä•Èîô‰∫Ü„ÄÇÂíåÂâçÈù¢jdbc‰∏≠ÁºñËØëÊúüÁöÑÈîôËØØ‰∏ÄÊ†∑</li>
</ol>
<p>Â¶Ç‰ΩïËß£Èô§ËøôÁßç‰æùËµñÔºü</p>
<h2 id="Bean-amp-BeanFactory"><a href="#Bean-amp-BeanFactory" class="headerlink" title="Bean &amp; BeanFactory"></a>Bean &amp; BeanFactory</h2><p><strong>Bean</strong> ‚Äî‚Äî ÂèØÈáçÁî®ÁªÑ‰ª∂<br>egÔºö‰∏Ä‰∏™DaoÂèØËÉΩË¢´Â§ö‰∏™Service‰ΩøÁî®Ôºå‰∏Ä‰∏™ServiceÂèØËÉΩË¢´Â§ö‰∏™Servlet‰ΩøÁî®ÔºåÂÆÉ‰ª¨ÊòØÂèØÈáçÁî®ÁöÑ</p>
<p><strong>JavaBean</strong> ‚Äî‚Äî Áî®javaËØ≠Ë®ÄÁºñÂÜôÁöÑÂèØÈáçÁî®ÁªÑ‰ª∂</p>
<p><strong>BeanFactory</strong> ‚Äî‚Äî ÂàõÂª∫BeanÂØπË±°ÁöÑÂ∑•ÂéÇ<br>egÔºöÂàõÂª∫DaoÂíåServiceÂØπË±°</p>
<p>Ë¶ÅÂÆûÁé∞Ëøô‰∏™Â∑•ÂéÇÔºåÁ±ª‰ººÂâçÈù¢jdbcÔºå</p>
<p>1.ÈúÄË¶Å‰∏Ä‰∏™<strong>ÈÖçÁΩÆÊñá‰ª∂</strong>Êù•ÈÖçÁΩÆserviceÂíådao<br>ÂÜÖÂÆπÔºöÂîØ‰∏ÄÊ†áËØÜ=ÂÖ®ÈôêÂÆöÁ±ªÂêçÔºàkey=value)<br>ÈÖçÁΩÆÊñá‰ª∂ÂèØ‰ª•ÊòØxml‰πüÂèØ‰ª•ÊòØproperties</p>
<p>2.ËØªÂèñÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÖçÁΩÆÁöÑÂÜÖÂÆπÔºåÈÄöËøá==ÂèçÂ∞Ñ==ÂàõÂª∫ÂØπË±°</p>
<h2 id="Â∑•ÂéÇÊ®°ÂºèËß£ËÄ¶"><a href="#Â∑•ÂéÇÊ®°ÂºèËß£ËÄ¶" class="headerlink" title="Â∑•ÂéÇÊ®°ÂºèËß£ËÄ¶"></a>Â∑•ÂéÇÊ®°ÂºèËß£ËÄ¶</h2><p>Âú®resources‰∏≠Êñ∞Âª∫beans.propertiesÈÖçÁΩÆÊñá‰ª∂ÔºàÊ≠§Â§ÑÁî®propertiesÂõ†‰∏∫ÁÆÄÂçïÔºåSpring‰∏≠Áî®ÁöÑÊòØxmlÔºâ</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">accountService</span> = <span class="string">com.itheima.service.impl.AccountServiceImpl</span></span><br><span class="line"><span class="attr">accountDao</span> = <span class="string">com.itheima.dao.impl.AccountDaoImpl</span></span><br></pre></td></tr></table></figure>
<p>ÂàõÂª∫BeanFactoryÁ±ªËØªÂèñpropertiesÊñá‰ª∂</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanFactory</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ÂÆö‰πâ‰∏Ä‰∏™PropertiesÂØπË±°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Properties props;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ‰ΩøÁî®ÈùôÊÄÅ‰ª£Á†ÅÂùó‰∏∫PropertiesÂØπË±°ËµãÂÄº</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ÂÆû‰æãÂåñÂØπË±°</span></span><br><span class="line">            props = <span class="keyword">new</span> Properties();</span><br><span class="line">            <span class="comment">// Ëé∑ÂèñpropertiesÊñá‰ª∂ÁöÑÊµÅÂØπË±°</span></span><br><span class="line">            InputStream in = BeanFactory.class.getClassLoader().getResourceAsStream("bean.properties");</span><br><span class="line">            props.load(in);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="comment">// Êäõ‰∏Ä‰∏™ErrorÔºåÊ≤°ÊúâËé∑ÂèñÈÖçÁΩÆ‰ø°ÊÅØÂêéÈù¢ÊÉ≥ÈÉΩ‰∏çË¶ÅÊÉ≥</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ExceptionInInitializerError(<span class="string">"ÂàùÂßãÂåñpropertiesÂ§±Ë¥•ÔºÅ"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Ê†πÊçÆBeanÁöÑÂêçÁß∞Ëé∑ÂèñbeanÂØπË±°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getBean</span><span class="params">(String beanName)</span></span>&#123;</span><br><span class="line">        Object bean = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String beanPath = props.getProperty(beanName);</span><br><span class="line">            bean = Class.forName(beanPath).newInstance();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ê≥®ÊÑèÔºö</p>
<ol>
<li>ËØªÈÖçÁΩÆÊñá‰ª∂Êó∂‰∏çË¶ÅÁî®FileInputStreamÔºåWebÂ∑•Á®ã‰∏çÂ•ΩÊâæË∑ØÂæÑ„ÄÇÁî®Á±ªÂä†ËΩΩÂô®„ÄÇ</li>
<li>getBean()ËøîÂõûÁöÑÊòØObjectÁ±ªÂûã</li>
</ol>
<p>Êää‰∏§Â§Ñ‰ΩøÁî®newÂàõÂª∫ÂØπË±°ÁöÑÊîπ‰∏∫Áî®ÂèçÂ∞ÑÂàõÂª∫</p>
<p>Client‰∏≠</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// IAccountService as = new AccountServiceImpl();</span></span><br><span class="line">IAccountService as = (IAccountService) BeanFactory.getBean(<span class="string">"accountService"</span>);</span><br></pre></td></tr></table></figure>
<p>AccountServiceImpl‰∏≠</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// private IAccountDao accountDao = new AccountDaoImpl();</span></span><br><span class="line"><span class="keyword">private</span> IAccountDao accountDao = (IAccountDao) BeanFactory.getBean(<span class="string">"accountDao"</span>);</span><br></pre></td></tr></table></figure>
<p>ObjectÁ±ªÂº∫ËΩ¨‰∏∫ÂØπÂ∫îÁöÑÁ±ª</p>
<p>ÊîπËøõÂêéÁ®ãÂ∫èÁöÑUMLÁ±ªÂõæÈïøËøôÊ†∑</p>
<img src="/images/2020/20200227162837205.png" width=600>

<p>Ê≠§Êó∂Â¶ÇÊûúÊääAccountServiceImplÂà†‰∫ÜÔºåÁ®ãÂ∫èÂèØ‰ª•ËøêË°åÔºåÊäõClassNotFoundException</p>
<h2 id="Â∑•ÂéÇÊ®°ÂºèÁöÑÈóÆÈ¢ò‰∏éÊîπËøõ"><a href="#Â∑•ÂéÇÊ®°ÂºèÁöÑÈóÆÈ¢ò‰∏éÊîπËøõ" class="headerlink" title="Â∑•ÂéÇÊ®°ÂºèÁöÑÈóÆÈ¢ò‰∏éÊîπËøõ"></a>Â∑•ÂéÇÊ®°ÂºèÁöÑÈóÆÈ¢ò‰∏éÊîπËøõ</h2><p>Â¶ÇÊûúË¶ÅÂú®Client‰∏≠Â§öÊ¨°Ë∞ÉÁî®ServiceÔºü</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++) &#123;</span><br><span class="line">	IAccountService as = (IAccountService) BeanFactory.getBean(<span class="string">"accountService"</span>);</span><br><span class="line">	System.out.println(as);</span><br><span class="line">	as.saveAccount();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Âπ∂Âú®AccountServiceImpl‰∏≠Âä†‰∏Ä‰∏™ÊàêÂëòÂèòÈáèi</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> IAccountDao accountDao = (IAccountDao) BeanFactory.getBean(<span class="string">"accountDao"</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">saveAccount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        accountDao.saveAccount();</span><br><span class="line">        System.out.println(i);</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ËøêË°å</p>
<blockquote>
<p>com.itheima.service.impl.AccountServiceImpl@610455d6<br>‰øùÂ≠ò‰∫ÜË¥¶Êà∑<br>1<br>com.itheima.service.impl.AccountServiceImpl@511d50c0<br>‰øùÂ≠ò‰∫ÜË¥¶Êà∑<br>1<br>com.itheima.service.impl.AccountServiceImpl@60e53b93<br>‰øùÂ≠ò‰∫ÜË¥¶Êà∑<br>1<br>com.itheima.service.impl.AccountServiceImpl@5e2de80c<br>‰øùÂ≠ò‰∫ÜË¥¶Êà∑<br>1<br>com.itheima.service.impl.AccountServiceImpl@1d44bcfa<br>‰øùÂ≠ò‰∫ÜË¥¶Êà∑<br>1</p>
<p>Process finished with exit code 0</p>
</blockquote>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåAccountServiceImplÂàõÂª∫‰∫Ü5Ê¨°ÔºåÊØèÊ¨°ÈÉΩÊòØ‰∏Ä‰∏™Êñ∞ÁöÑÂØπË±°<br>Ê≠§Êó∂ÁöÑÂØπË±°ÊòØÂ§ö‰æãÔºåÊïàÁéáÊ≤°ÊúâÂçï‰æãÈ´ò</p>
<p>ÂèØ‰ª•Âú®BeanFactory‰∏≠ÊääÂàõÂª∫Âá∫ÁöÑÂØπË±°ÈÉΩÂ≠òËµ∑Êù•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ÂÆö‰πâ‰∏Ä‰∏™Map,Áî®‰∫éÂ≠òÊîæÊàë‰ª¨Ë¶ÅÂàõÂª∫ÁöÑÂØπË±°„ÄÇÊàë‰ª¨ÊääÂÆÉÁß∞‰πã‰∏∫ÂÆπÂô®</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String,Object&gt; beans;</span><br></pre></td></tr></table></figure>
<p>Âú®ÈùôÊÄÅ‰ª£Á†ÅÂùó‰∏≠ÔºåÂæóÂà∞ÈÖçÁΩÆÊñá‰ª∂ÁöÑËæìÂÖ•ÊµÅÂêéÔºåÂÆû‰æãÂåñËøô‰∏™ÂÆπÂô®„ÄÇÂèñÂá∫ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÊâÄÊúâÁöÑkey-valueÔºåÂàõÂª∫Âπ∂‰øùÂ≠òÂÆÉ‰ª¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ÂÆû‰æãÂåñÂÆπÂô®</span></span><br><span class="line">beans = <span class="keyword">new</span> HashMap&lt;String,Object&gt;();</span><br><span class="line"><span class="comment">// ÂèñÂá∫ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÊâÄÊúâÁöÑKey</span></span><br><span class="line">Enumeration keys = props.keys();</span><br><span class="line"><span class="comment">// ÈÅçÂéÜÊûö‰∏æ</span></span><br><span class="line"><span class="keyword">while</span> (keys.hasMoreElements())&#123;</span><br><span class="line">    <span class="comment">// ÂèñÂá∫ÊØè‰∏™Key</span></span><br><span class="line">    String key = keys.nextElement().toString();</span><br><span class="line">    <span class="comment">// Ê†πÊçÆkeyËé∑Âèñvalue</span></span><br><span class="line">    String beanPath = props.getProperty(key);</span><br><span class="line">    <span class="comment">// ÂèçÂ∞ÑÂàõÂª∫ÂØπË±°</span></span><br><span class="line">    Object value = Class.forName(beanPath).newInstance();</span><br><span class="line">    <span class="comment">// ÊääkeyÂíåvalueÂ≠òÂÖ•ÂÆπÂô®‰∏≠</span></span><br><span class="line">    beans.put(key,value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Ëé∑ÂèñBeansÔºå‰∏çÁî®newInstance()ÔºåÁõ¥Êé•‰ªéÂÆπÂô®‰∏≠ÂèñÂç≥ÂèØ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getBean</span><span class="params">(String beanName)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> beans.get(beanName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ËøôÊ†∑‰øÆÊîπÂêéÔºåË∞ÉÁî®5Ê¨°ServiceÊâìÂç∞ÁöÑÁªìÊûúÊòØ</p>
<blockquote>
<p>com.itheima.service.impl.AccountServiceImpl@610455d6<br>‰øùÂ≠ò‰∫ÜË¥¶Êà∑<br>1<br>com.itheima.service.impl.AccountServiceImpl@610455d6<br>‰øùÂ≠ò‰∫ÜË¥¶Êà∑<br>2<br>com.itheima.service.impl.AccountServiceImpl@610455d6<br>‰øùÂ≠ò‰∫ÜË¥¶Êà∑<br>3<br>com.itheima.service.impl.AccountServiceImpl@610455d6<br>‰øùÂ≠ò‰∫ÜË¥¶Êà∑<br>4<br>com.itheima.service.impl.AccountServiceImpl@610455d6<br>‰øùÂ≠ò‰∫ÜË¥¶Êà∑<br>5</p>
<p>Process finished with exit code 0</p>
</blockquote>
<p>Ê≠§Êó∂ÁöÑAccountServiceImplÂ∞±ÊòØÂçï‰æãÁöÑ‰∫Ü</p>
<p>‰ΩÜÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÊòØÔºåËøô‰∏™iÂú®Â§öÁ∫øÁ®ãÊó∂ÊòØ‰∏çÂÆâÂÖ®ÁöÑ<br>Â∫îËØ•ÊääÂÆÉÁßªÂà∞ÊñπÊ≥ïÈáåÈù¢ÔºåÂ∞±Ê≤°ÊúâËøô‰∏™ÈóÆÈ¢ò‰∫ÜÔºàÂÆûÈôÖ‰ΩøÁî®‰∏ÄËà¨‰πüÊòØËøôÊ†∑Ôºâ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//    private int i = 1;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">saveAccount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">        accountDao.saveAccount();</span><br><span class="line">        System.out.println(i);</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="Â∑•ÂéÇÊ®°Âºè‰ΩøÁî®Â•óË∑ØÊÄªÁªì"><a href="#Â∑•ÂéÇÊ®°Âºè‰ΩøÁî®Â•óË∑ØÊÄªÁªì" class="headerlink" title="Â∑•ÂéÇÊ®°Âºè‰ΩøÁî®Â•óË∑ØÊÄªÁªì"></a>Â∑•ÂéÇÊ®°Âºè‰ΩøÁî®Â•óË∑ØÊÄªÁªì</h2><p>1.ÂàõÂª∫BeanFactory</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// BeanFactory.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanFactory</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ÂÆö‰πâ‰∏Ä‰∏™PropertiesÂØπË±°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Properties props;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ÂÆö‰πâ‰∏Ä‰∏™Map,Áî®‰∫éÂ≠òÊîæÊàë‰ª¨Ë¶ÅÂàõÂª∫ÁöÑÂØπË±°„ÄÇÁß∞‰πã‰∏∫ÂÆπÂô®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String,Object&gt; beans;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//‰ΩøÁî®ÈùôÊÄÅ‰ª£Á†ÅÂùó‰∏∫PropertiesÂØπË±°ËµãÂÄº</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.ÂÆû‰æãÂåñÂØπË±°</span></span><br><span class="line">            props = <span class="keyword">new</span> Properties();</span><br><span class="line">            <span class="comment">// 2.Ëé∑ÂèñpropertiesÊñá‰ª∂ÁöÑÊµÅÂØπË±°</span></span><br><span class="line">            InputStream in = BeanFactory.class.getClassLoader().getResourceAsStream("bean.properties");</span><br><span class="line">            props.load(in);</span><br><span class="line">            <span class="comment">// 3.ÂÆû‰æãÂåñÂÆπÂô®</span></span><br><span class="line">            beans = <span class="keyword">new</span> HashMap&lt;String,Object&gt;();</span><br><span class="line">            <span class="comment">// 4.ÂèñÂá∫ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÊâÄÊúâÁöÑKey</span></span><br><span class="line">            Enumeration keys = props.keys();</span><br><span class="line">            <span class="comment">// 5.ÈÅçÂéÜÊûö‰∏æ</span></span><br><span class="line">            <span class="keyword">while</span> (keys.hasMoreElements())&#123;</span><br><span class="line">                <span class="comment">// ÂèñÂá∫ÊØè‰∏™Key</span></span><br><span class="line">                String key = keys.nextElement().toString();</span><br><span class="line">                <span class="comment">// Ê†πÊçÆkeyËé∑Âèñvalue</span></span><br><span class="line">                String beanPath = props.getProperty(key);</span><br><span class="line">                <span class="comment">// ÂèçÂ∞ÑÂàõÂª∫ÂØπË±°</span></span><br><span class="line">                Object value = Class.forName(beanPath).newInstance();</span><br><span class="line">                <span class="comment">// ÊääkeyÂíåvalueÂ≠òÂÖ•ÂÆπÂô®‰∏≠</span></span><br><span class="line">                beans.put(key,value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ExceptionInInitializerError(<span class="string">"ÂàùÂßãÂåñpropertiesÂ§±Ë¥•ÔºÅ"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Ê†πÊçÆbeanÁöÑÂêçÁß∞Ëé∑ÂèñÂØπË±°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getBean</span><span class="params">(String beanName)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> beans.get(beanName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.ÈÖçÁΩÆÊñá‰ª∂</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">//</span> <span class="string">beans.properties</span></span><br><span class="line"></span><br><span class="line"><span class="attr">accountService</span>=<span class="string">com.itheima.service.impl.AccountServiceImpl</span></span><br><span class="line"><span class="attr">accountDao</span>=<span class="string">com.itheima.dao.impl.AccountDaoImpl</span></span><br></pre></td></tr></table></figure>

<p>3.Ëé∑ÂèñBean</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Client.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    	IAccountService as = (IAccountService) BeanFactory.getBean(<span class="string">"accountService"</span>);</span><br><span class="line">    	as.saveAccount();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringÁ¨îËÆ∞02 IdeaËøêË°åÁ§∫‰æãÈ°πÁõÆÁöÑÂùë</title>
    <url>/2020/02/24/note-spring-02/</url>
    <content><![CDATA[<p>Ë°®Âª∫Â•Ω‰πãÂêéÔºåIdeaÈáåÈù¢Áõ¥Êé•ÊâìÂºÄÁ§∫‰æãÂ∑•Á®ãË∑ë‰∏çËµ∑Êù•ÔºåmysqlÁöÑ‰æùËµñÊúâÈóÆÈ¢ò</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: com.mysql.jdbc.Driver</span><br></pre></td></tr></table></figure>
<p>ÂØπÊØîÂèëÁé∞MavenË∑ØÂæÑ‰∏çÂØπ</p>
<p>ËøôÊòØËá™Â∑±ÂàõÂª∫ÁöÑÂèØ‰ª•ËøêË°åÁöÑMavenÈ°πÁõÆÈÖçÁΩÆ<br><img src="/images/2020/20200224170149695.png" alt="img"></p>
<p>ËøôÊòØÂØºÂÖ•Â∑•Á®ãÁöÑÈÖçÁΩÆ<br><img src="/images/2020/20200224170322871.png" alt="img"></p>
<p>‰øÆÊîπË∑ØÂæÑ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;maven&#x2F;3.6.2&#x2F;libexec</span><br><span class="line">&#x2F;Users&#x2F;coconutnut&#x2F;.m2&#x2F;settings.xml</span><br><span class="line">&#x2F;Users&#x2F;coconutnut&#x2F;.m2&#x2F;repository</span><br></pre></td></tr></table></figure>
<p>Ëß£ÂÜ≥DriverÈóÆÈ¢ò</p>
<hr>
<p>‰∏ã‰∏Ä‰∏™bug<br>Idea‰∏≠ÁÇπËøêË°å</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">MySQLNonTransientConnectionException: Client does not support authentication protocol requested by server</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://www.cnblogs.com/inconceivable/p/9186822.html" target="_blank" rel="noopener">https://www.cnblogs.com/inconceivable/p/9186822.html</a></p>
</blockquote>
<p>Âú®MySQL Workbench‰∏≠ËæìÂÖ•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">USE mysql;</span><br><span class="line">ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;iamgroot&#39;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
<p>Idea‰∏≠ÊèêÁ§∫ÂèòÊàê‰∫Ü</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.sql.SQLException: Unknown initial character set index &#39;255&#39; received from server. Initial client character set can be forced via the &#39;characterEncoding&#39; property.</span><br><span class="line">	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://blog.csdn.net/qq1515312832/article/details/85614733" target="_blank" rel="noopener">https://blog.csdn.net/qq1515312832/article/details/85614733</a></p>
</blockquote>
<p>Âú®ËøûÊé•Êï∞ÊçÆÂ∫ìÁöÑurlÂêéÂä†‰∏äÁºñÁ†ÅÊñπÂºè</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Connection conn = DriverManager.getConnection(<span class="string">"jdbc:mysql://localhost:3306/groot?useUnicode=true&amp;characterEncoding=utf8"</span>,<span class="string">"root"</span>,<span class="string">"iamgroot"</span>);</span><br></pre></td></tr></table></figure>
<p>ÊàêÂäü</p>
<hr>
<p>ÊÄªÁªìÔºö</p>
<ol>
<li>‰øÆÊîπPreference-&gt;Build, Execution, Deployment-&gt;Build Tools-&gt;Maven‰∏≠Ë∑ØÂæÑ</li>
<li>Âú®ËøûÊé•Êï∞ÊçÆÂ∫ìÁöÑurlÂêéÂä†‰∏äÁºñÁ†ÅÊñπÂºè</li>
</ol>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringÁ¨îËÆ∞01 jdbcÂ∏∏Áî®Êìç‰Ωú</title>
    <url>/2020/02/24/note-spring-01/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av47952931" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952931</a></p>
</blockquote>
<p>‰πãÂâçÂ≠¶Êï∞ÊçÆÂ∫ìÁöÑÊó∂ÂÄômysqlË∏©‰∫ÜÂ•ΩÂ§öÂùëÔºå‰∏ªË¶ÅÊòØÁâàÊú¨ÈóÆÈ¢ò<br>‰∏çÂêåÁâàÊú¨ËØ≠Ê≥ïÊúâ‰∫õ‰∏çÂÖºÂÆπ<br>ËÆ∞ÂΩï‰∏Ä‰∏ãApplyÁîüÊàêÁöÑËØ≠Âè•Â§áÁî®</p>
<hr>
<p>ÁâàÊú¨:<br>mysql-8.0.19-macos10.15-x86_64<br>MySQL Workbench 8.0.16</p>
<hr>
<h1 id="MySQL-WorkbenchÊìç‰Ωú"><a href="#MySQL-WorkbenchÊìç‰Ωú" class="headerlink" title="MySQL WorkbenchÊìç‰Ωú"></a>MySQL WorkbenchÊìç‰Ωú</h1><h2 id="ÂàõÂª∫schema"><a href="#ÂàõÂª∫schema" class="headerlink" title="ÂàõÂª∫schema"></a>ÂàõÂª∫schema</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">SCHEMA</span> <span class="string">`groot`</span> ;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ÂàõÂª∫table"><a href="#ÂàõÂª∫table" class="headerlink" title="ÂàõÂª∫table"></a>ÂàõÂª∫table</h2><p>ËøôÊòØbÁ´ôÊïôÁ®ãÁªôÁöÑsql</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">account</span>(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">40</span>),</span><br><span class="line">	money <span class="built_in">float</span></span><br><span class="line">)<span class="built_in">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_general_ci;</span><br></pre></td></tr></table></figure>

<p>ËøôÊòØWorkbenchÈáåÁîüÊàêÁöÑsql</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`groot`</span>.<span class="string">`account`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">45</span>) <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`money`</span> <span class="built_in">FLOAT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>));</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ÊèíÂÖ•ËÆ∞ÂΩï"><a href="#ÊèíÂÖ•ËÆ∞ÂΩï" class="headerlink" title="ÊèíÂÖ•ËÆ∞ÂΩï"></a>ÊèíÂÖ•ËÆ∞ÂΩï</h2><p>bÁ´ôÊïôÁ®ãÁªôÁöÑsql</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">account</span>(<span class="keyword">name</span>,money) <span class="keyword">values</span>(<span class="string">'aaa'</span>,<span class="number">1000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">account</span>(<span class="keyword">name</span>,money) <span class="keyword">values</span>(<span class="string">'bbb'</span>,<span class="number">1000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">account</span>(<span class="keyword">name</span>,money) <span class="keyword">values</span>(<span class="string">'ccc'</span>,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>
<p>WorkbenchÈáåÁîüÊàêÁöÑsql</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`groot`</span>.<span class="string">`account`</span> (<span class="string">`name`</span>, <span class="string">`money`</span>) <span class="keyword">VALUES</span> (<span class="string">'aaa'</span>, <span class="string">'1000'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`groot`</span>.<span class="string">`account`</span> (<span class="string">`name`</span>, <span class="string">`money`</span>) <span class="keyword">VALUES</span> (<span class="string">'bbb'</span>, <span class="string">'1000'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`groot`</span>.<span class="string">`account`</span> (<span class="string">`name`</span>, <span class="string">`money`</span>) <span class="keyword">VALUES</span> (<span class="string">'ccc'</span>, <span class="string">'1000'</span>);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Êü•ÁúãËÆ∞ÂΩï"><a href="#Êü•ÁúãËÆ∞ÂΩï" class="headerlink" title="Êü•ÁúãËÆ∞ÂΩï"></a>Êü•ÁúãËÆ∞ÂΩï</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> groot.account;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Idea‰∏≠ËøûÊé•Êï∞ÊçÆÂ∫ì"><a href="#Idea‰∏≠ËøûÊé•Êï∞ÊçÆÂ∫ì" class="headerlink" title="Idea‰∏≠ËøûÊé•Êï∞ÊçÆÂ∫ì"></a>Idea‰∏≠ËøûÊé•Êï∞ÊçÆÂ∫ì</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1.Ê≥®ÂÜåÈ©±Âä®</span></span><br><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.Ëé∑ÂèñËøûÊé•</span></span><br><span class="line">Connection conn = DriverManager.getConnection(<span class="string">"jdbc:mysql://localhost:3306/groot?useUnicode=true&amp;characterEncoding=utf8"</span>,<span class="string">"root"</span>,<span class="string">"iamgroot"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.Ëé∑ÂèñÊìç‰ΩúÊï∞ÊçÆÂ∫ìÁöÑÈ¢ÑÂ§ÑÁêÜÂØπË±°</span></span><br><span class="line">PreparedStatement pstm = conn.prepareStatement(<span class="string">"select * from account"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.ÊâßË°åSQLÔºåÂæóÂà∞ÁªìÊûúÈõÜ</span></span><br><span class="line">ResultSet rs = pstm.executeQuery();</span><br><span class="line"></span><br><span class="line"><span class="comment">//5.ÈÅçÂéÜÁªìÊûúÈõÜ</span></span><br><span class="line"><span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">    System.out.println(rs.getString(<span class="string">"name"</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//6.ÈáäÊîæËµÑÊ∫ê</span></span><br><span class="line">rs.close();</span><br><span class="line">pstm.close();</span><br><span class="line">conn.close();</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>IntelliJ IDEA Á¨îËÆ∞</title>
    <url>/2020/02/24/note-idea/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.bilibili.com/video/av71609179?from=search&amp;seid=7606544420555480673" target="_blank" rel="noopener">https://www.bilibili.com/video/av71609179?from=search&amp;seid=7606544420555480673</a></p>
</blockquote>
<hr>
<p>ÁâàÊú¨<br>ideaIU-2019.3.3 (Â≠¶ÁîüLicense)<br>macOS Catalina 10.15.3</p>
<hr>
<h1 id="ËÆæÁΩÆ"><a href="#ËÆæÁΩÆ" class="headerlink" title="ËÆæÁΩÆ"></a>ËÆæÁΩÆ</h1><p>Èº†Ê†áÊÇ¨ÊµÆÊèêÁ§∫<br>Preferences-&gt;Editor-&gt;General-&gt;Show quick documentation on mouse move</p>
<p>Ëá™Âä®ÂØºÂåÖ<br>Preferences-&gt;Editor-&gt;General-&gt;AutoImport-&gt;Add unambiguous imports on the fly<br>Preferences-&gt;Editor-&gt;General-&gt;AutoImport-&gt;Optimize imports on the fly (for current project)</p>
<p>ÊñπÊ≥ïÈó¥ÂàÜÈöîÁ¨¶<br>Preferences-&gt;Editor-&gt;General-&gt;Appearance-&gt;Show method separators</p>
<p>ÂøΩÁï•Â§ßÂ∞èÂÜôÊèêÁ§∫<br>Preferences-&gt;Editor-&gt;General-&gt;Code Completion-&gt;Match case (‰∏çÂãæÈÄâ)</p>
<p>Êñá‰ª∂Â§öË°åÊòæÁ§∫Ê†è<br>Preferences-&gt;Editor-&gt;General-&gt;Editor Tabs-&gt;Show tabs in one row (‰∏çÂãæÈÄâ)</p>
<p>‰øÆÊîπÊ≥®ÈáäÈ¢úËâ≤<br>Preferences-&gt;Editor-&gt;Color Scheme-&gt;Language Defaults-&gt;Comments‰∏≠</p>
<p>È°πÁõÆÂ∑•Á®ãÁºñÁ†Å<br>Preferences-&gt;Editor-&gt;File Encodings‰∏≠</p>
<p>Ëá™Âä®ÁºñËØë<br>Preferences-&gt;Build,Execution,Deployment-&gt;Compiler-&gt;Build project automatically<br>Preferences-&gt;Build,Execution,Deployment-&gt;Compiler-&gt;Compile independent modules in parallel</p>
<hr>
<h1 id="Âø´Êç∑ÈîÆ"><a href="#Âø´Êç∑ÈîÆ" class="headerlink" title="Âø´Êç∑ÈîÆ"></a>Âø´Êç∑ÈîÆ</h1><h2 id="Â∏∏Áî®Âø´Êç∑ÈîÆ"><a href="#Â∏∏Áî®Âø´Êç∑ÈîÆ" class="headerlink" title="Â∏∏Áî®Âø´Êç∑ÈîÆ"></a>Â∏∏Áî®Âø´Êç∑ÈîÆ</h2><p>Ë°•ÂÖ®ÊèêÁ§∫Ôºö^+/<br>Ëá™Âä®ÁîüÊàêÔºö^+Enter<br>ÂçïË°åË°•ÂÖ®ÔºöCommand+Shift+Enter<br>ÊñπÊ≥ïÂèÇÊï∞ÊèêÁ§∫ÔºöCommand+P<br>ÈáçÊñ∞ÊéíÁâàÔºöOption+Command+L<br>Surround WithÔºöOption+Command+T<br>Â§çÂà∂Ë°åÊàñÈÄâ‰∏≠Âå∫ÂüüÔºöCommand+D<br>Âà†Èô§Ë°åÔºöCommand+Delete</p>
<h2 id="Live-Templates-amp-Postfix-Completion"><a href="#Live-Templates-amp-Postfix-Completion" class="headerlink" title="Live Templates &amp; Postfix Completion"></a>Live Templates &amp; Postfix Completion</h2><p>Êü•ËØ¢ÂÆûÊó∂‰ª£Á†ÅÊ®°ÁâàÔºöCommand+J<br>Preferences-&gt;Editor-&gt;LiveTemplatesÂíåPreferences-&gt;Editor-&gt;General-&gt;Postfix Completion‰∏≠‰øÆÊîπ</p>
<hr>
<h1 id="ÂØπÊôÆÈÄöJavaÈ°πÁõÆÊâìÂåÖ"><a href="#ÂØπÊôÆÈÄöJavaÈ°πÁõÆÊâìÂåÖ" class="headerlink" title="ÂØπÊôÆÈÄöJavaÈ°πÁõÆÊâìÂåÖ"></a>ÂØπÊôÆÈÄöJavaÈ°πÁõÆÊâìÂåÖ</h1><p>File-&gt;Project Structure (ÊàñÂ∑•ÂÖ∑Ê†èÁõ¥Êé•ÊâìÂºÄ)<br>Project Settings-&gt;Artifacts‰∏≠Âä†ÂÖ•ÂΩìÂâçÈ°πÁõÆ</p>
<p>Build-&gt;Build Artifacts<br>Âú®Â∑•Á®ãÁõÆÂΩï‰∏≠out-&gt;artifacts‰∏≠ÂàõÂª∫jarÂåÖ<br>ÊµãËØïÊó∂ÔºåËæìÂÖ•java -cp ÂåÖÂêç+Á±ªÂêç</p>
<hr>
<h1 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h1><h2 id="IdeaÈÖçÁΩÆMaven"><a href="#IdeaÈÖçÁΩÆMaven" class="headerlink" title="IdeaÈÖçÁΩÆMaven"></a>IdeaÈÖçÁΩÆMaven</h2><p>Preferences-&gt;Build,Execution,Deployment-&gt;Build Tools-&gt;Maven<br>Maven home directory‰∏≠ÂØºÂÖ•</p>
<p>Preferences-&gt;Build,Execution,Deployment-&gt;Build Tools-&gt;Maven-&gt;Importing-&gt;Import Maven projects automaticallyÂãæ‰∏ä</p>
<h2 id="ÂàõÂª∫MavenÈ°πÁõÆ"><a href="#ÂàõÂª∫MavenÈ°πÁõÆ" class="headerlink" title="ÂàõÂª∫MavenÈ°πÁõÆ"></a>ÂàõÂª∫MavenÈ°πÁõÆ</h2><p>New Project-&gt;Maven-&gt;Create from archetypeÂãæ‰∏ä<br>ÂèØ‰ª•ÈÄâÊã©maven-archetype-quickstart<br>ËøêË°åÈªòËÆ§ÁöÑHello WorldÈ°πÁõÆ</p>
<h2 id="ÊâìÂåÖMavenÈ°πÁõÆ"><a href="#ÊâìÂåÖMavenÈ°πÁõÆ" class="headerlink" title="ÊâìÂåÖMavenÈ°πÁõÆ"></a>ÊâìÂåÖMavenÈ°πÁõÆ</h2><p>IdeaÁöÑTerminal‰∏≠ËæìÂÖ• (ÊàñÁ≥ªÁªüTerminalÂàáÂà∞Â∑•Á®ãÁõÆÂΩï‰∏ãËæìÂÖ•)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mvn clean package</span><br></pre></td></tr></table></figure>
<p>ÊâìÂåÖÂÆåÂú®targetÁõÆÂΩï‰∏ã<br>ËøêË°åËæìÂÖ•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java -cp target&#x2F;xxx.jar ÂåÖÂêç+Á±ªÂêç</span><br></pre></td></tr></table></figure>
<h2 id="ÊéíÊü•‰æùËµñÂåÖÂÜ≤Á™Å"><a href="#ÊéíÊü•‰æùËµñÂåÖÂÜ≤Á™Å" class="headerlink" title="ÊéíÊü•‰æùËµñÂåÖÂÜ≤Á™Å"></a>ÊéíÊü•‰æùËµñÂåÖÂÜ≤Á™Å</h2><p>pomÊñá‰ª∂‰∏≠ÔºåÂè≥ÈîÆDiagram-&gt;show Dependencies<br>ÁªìÊûÑÂõæÊòæÁ§∫‰æùËµñÂÖ≥Á≥ª<br>Á∫¢Ëâ≤ËôöÁ∫øÊ†áÊòéÈáçÂ§ç<br>ÊúâÊó∂ÂÄôÈáçÂ§ç‰∏çÂà†Êéâ‰πü‰∏ç‰ºöÊä•ÈîôÔºåÈªòËÆ§‰ΩøÁî®Ë∑ØÂæÑÁü≠ÁöÑ<br>Â¶ÇÊûúÊä•ÈîôÔºåÊéíÈô§ÊéâÂç≥ÂèØÔºå‰ª£Á†Å‰∏≠Ëá™Âä®<exclusion>‚Ä¶</exclusion></p>
<hr>
<h1 id="È°πÁõÆÁõÆÂΩï-amp-Êñá‰ª∂Â§πÁ±ªÂûã"><a href="#È°πÁõÆÁõÆÂΩï-amp-Êñá‰ª∂Â§πÁ±ªÂûã" class="headerlink" title="È°πÁõÆÁõÆÂΩï&amp;Êñá‰ª∂Â§πÁ±ªÂûã"></a>È°πÁõÆÁõÆÂΩï&amp;Êñá‰ª∂Â§πÁ±ªÂûã</h1><h2 id="ÂØπÈ°πÁõÆÁ±ªÂûãÊâãÂä®Ê†áÊ≥®"><a href="#ÂØπÈ°πÁõÆÁ±ªÂûãÊâãÂä®Ê†áÊ≥®" class="headerlink" title="ÂØπÈ°πÁõÆÁ±ªÂûãÊâãÂä®Ê†áÊ≥®"></a>ÂØπÈ°πÁõÆÁ±ªÂûãÊâãÂä®Ê†áÊ≥®</h2><p>Âú®ÁõÆÂΩï‰∏äÂè≥ÈîÆMark Directory as-&gt;ÈÄâÊã©Á±ªÂûã</p>
<p>TestÔºöÂèØÁºñËØëÁöÑÂçïÂÖÉÊµãËØïÁõÆÂΩï<br>ResourcesÔºöËµÑÊ∫êÊñá‰ª∂ÁõÆÂΩï<br>Test ResourcesÔºöÂçïÂÖÉÊµãËØïËµÑÊ∫êÊñá‰ª∂ÁõÆÂΩï<br>ExcludedÔºöÊéíÈô§ÁõÆÂΩïÔºàÁõ∏ÂΩì‰∫éË¢´Â∫üÂºÉÊéâÔºâ<br>Generated SourcesÔºöÁ±ª‰ººsrcÔºàÂè™ÊúâËøôÁßçÂèØ‰ª•Êñ∞Âª∫javaÁ±ªÂíåÂåÖÔºâ</p>
<hr>
<h1 id="Â§öÊ®°ÂùóMavenÈ°πÁõÆ"><a href="#Â§öÊ®°ÂùóMavenÈ°πÁõÆ" class="headerlink" title="Â§öÊ®°ÂùóMavenÈ°πÁõÆ"></a>Â§öÊ®°ÂùóMavenÈ°πÁõÆ</h1><h2 id="ÊûÑÂª∫Â§öÊ®°ÂùóMavenÈ°πÁõÆ"><a href="#ÊûÑÂª∫Â§öÊ®°ÂùóMavenÈ°πÁõÆ" class="headerlink" title="ÊûÑÂª∫Â§öÊ®°ÂùóMavenÈ°πÁõÆ"></a>ÊûÑÂª∫Â§öÊ®°ÂùóMavenÈ°πÁõÆ</h2><p>Êñ∞Âª∫‰∏Ä‰∏™MavenÈ°πÁõÆ<br>ÂÜçÊñ∞Âª∫ModuleÔºåÂÆÉ‰πü‰ºöÊúâsrc„ÄÅmainÁöÑÁõÆÂΩïÁªìÊûÑ</p>
<h2 id="ËÆæÁΩÆÊ®°ÂùóÈó¥‰æùËµñÂÖ≥Á≥ª"><a href="#ËÆæÁΩÆÊ®°ÂùóÈó¥‰æùËµñÂÖ≥Á≥ª" class="headerlink" title="ËÆæÁΩÆÊ®°ÂùóÈó¥‰æùËµñÂÖ≥Á≥ª"></a>ËÆæÁΩÆÊ®°ÂùóÈó¥‰æùËµñÂÖ≥Á≥ª</h2><p>Project Structure-&gt;Modules-&gt;ÈÄâ‰∏≠‰∏Ä‰∏™Ê®°Âùó-&gt;Dependencies‰∏≠Ê∑ªÂä†ÔºåÁÑ∂ÂêéÂãæÈÄâ‰∏ä<br>pom.xml‰∏≠‰πüËÆ∏Ê∑ªÂä†</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xxx<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Ê∑ªÂä†‰æùËµñÂêéÂèØ‰ª•Áõ¥Êé•ÂºïÁî®Ë¢´‰æùËµñÊ®°Âùó‰∏≠ÁöÑ‰ª£Á†Å</p>
<hr>
<h1 id="Maven-WebÈ°πÁõÆ"><a href="#Maven-WebÈ°πÁõÆ" class="headerlink" title="Maven WebÈ°πÁõÆ"></a>Maven WebÈ°πÁõÆ</h1><h2 id="ÂàõÂª∫Maven-WebÈ°πÁõÆ"><a href="#ÂàõÂª∫Maven-WebÈ°πÁõÆ" class="headerlink" title="ÂàõÂª∫Maven WebÈ°πÁõÆ"></a>ÂàõÂª∫Maven WebÈ°πÁõÆ</h2><p>New Project-&gt;Maven-&gt;Create from archetype<br>ÂèØ‰ª•ÈÄâÊã©maven-archetype-webapp</p>
<h2 id="ÈÖçÁΩÆTomcat"><a href="#ÈÖçÁΩÆTomcat" class="headerlink" title="ÈÖçÁΩÆTomcat"></a>ÈÖçÁΩÆTomcat</h2><p>Â∑•ÂÖ∑Ê†è‰∏≠build(ÁªøËâ≤Èî§Â≠ê)ÊóÅËæπÔºåAdd Configuration<br>Êñ∞Âä†Tomcat-&gt;Local ÔºàÈúÄÂÖà‰∏ãËΩΩÊîæÂú®Êú¨Âú∞ÔºåÈÖçÁΩÆË∑ØÂæÑÔºâ</p>
<p>Server‰∏≠ÂèØ‰ª•‰øÆÊîπÈªòËÆ§ÊµèËßàÂô®ÔºåÂèØ‰ª•‰øÆÊîπÁ´ØÂè£Âè∑</p>
<p>Deployment‰∏≠Ê∑ªÂä†Artifact<br>xxx:war exploded</p>
<p>Âç≥ÂèØÂêØÂä®ËøêË°å<br>ÈªòËÆ§index.jspÊòæÁ§∫Hello World!</p>
<h2 id="ÊâìÂåÖËøêË°å"><a href="#ÊâìÂåÖËøêË°å" class="headerlink" title="ÊâìÂåÖËøêË°å"></a>ÊâìÂåÖËøêË°å</h2><p>Âè≥‰æßMavenÂ∑•ÂÖ∑Ê†è‰∏≠<br>Lifecycle-&gt;package-&gt;Run Maven Build<br>install-&gt;Run ‚Äòxxx [install]‚Äô<br>ÊâìÂåÖÊàêÂäüÂêéÔºåÂú®targetÊñá‰ª∂Â§π‰∏ã</p>
<p>warÂåÖÂèØ‰ª•ÈÉ®ÁΩ≤Âà∞ÊúçÂä°Âô®‰∏ä</p>
<p>‰πüÂèØ‰ª•Êã∑Ë¥ùÂà∞Êú¨Âú∞TomcatÁöÑwebappÁõÆÂΩï‰∏ã<br>ËøêË°åTomcatÁöÑbinÁõÆÂΩï‰∏ãÁöÑstartupÔºåÂêØÂä®tomcat<br>Âç≥ÂèØÊµèËßàÂô®ËÆøÈóÆ<br>ÁªìÊùüÂêéshutdownÂÖ≥Èó≠Tomcat</p>
]]></content>
      <categories>
        <category>Note</category>
      </categories>
      <tags>
        <tag>tool</tag>
      </tags>
  </entry>
  <entry>
    <title>ËØæÁ®ãÊÄªÁªì Ê∞ë‰∫ãËØâËÆºÊ≥ï</title>
    <url>/2020/02/22/mindmap/</url>
    <content><![CDATA[<blockquote>
<p>MOOC Âåó‰∫¨‰∫§ÈÄöÂ§ßÂ≠¶ Êù®ÂÜõ Ê∞ë‰∫ãËØâËÆºÊ≥ï</p>
</blockquote>
<p>P1<br><img src="/images/2020/civil_procedure_law1.png"></p>
<p>P2<br><img src="/images/2020/civil_procedure_law2.png"></p>
<p>P3<br><img src="/images/2020/civil_procedure_law3.png"></p>
<p>P4<br><img src="/images/2020/civil_procedure_law4.png"></p>
]]></content>
      <categories>
        <category>Memo</category>
      </categories>
      <tags>
        <tag>mindmap</tag>
      </tags>
  </entry>
  <entry>
    <title>ËØæÁ®ãÊÄªÁªì ÂéãÂäõ‰∏éÊÉÖÁª™ÁÆ°ÁêÜ</title>
    <url>/2020/02/22/mindmap-stress/</url>
    <content><![CDATA[<blockquote>
<p>MOOC ÂõõÂ∑ùÂ§ßÂ≠¶ Êù®Èë´ ÂéãÂäõ‰∏éÊÉÖÁª™ÁÆ°ÁêÜ</p>
</blockquote>
<img src="/images/2020/stress.png">]]></content>
      <categories>
        <category>Memo</category>
      </categories>
      <tags>
        <tag>mindmap</tag>
      </tags>
  </entry>
  <entry>
    <title>ËØæÁ®ãÊÄªÁªì ‰ø°ÊÅØÁ¥†ÂÖª‰∏éÂÆûË∑µ</title>
    <url>/2020/02/22/mindmap-paper/</url>
    <content><![CDATA[<blockquote>
<p>Â§ß‰∏â‰∏äÁöÑÂÖ¨ÈÄâËØæ</p>
</blockquote>
<img src="/images/2020/paper.png">

]]></content>
      <categories>
        <category>Memo</category>
      </categories>
      <tags>
        <tag>mindmap</tag>
      </tags>
  </entry>
</search>
