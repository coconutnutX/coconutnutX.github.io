<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>CoCoNutNut&#39;s NoteBook</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-04-18T04:28:26.390Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>coconutnut</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>axiosè¯·æ±‚è·¨åŸŸé—®é¢˜</title>
    <link href="http://yoursite.com/2020/04/18/debug/"/>
    <id>http://yoursite.com/2020/04/18/debug/</id>
    <published>2020-04-18T04:00:22.000Z</published>
    <updated>2020-04-18T04:28:26.390Z</updated>
    
    <content type="html"><![CDATA[<img src="/images/2020/screencapture2020-04-18 PM12.01.36.jpg"><p>å‘ç°æœ‰è·¨åŸŸé—®é¢˜</p><p>æŸ¥åˆ°</p><blockquote><p><a href="https://www.cnblogs.com/l-y-h/p/11815452.html" target="_blank" rel="noopener">https://www.cnblogs.com/l-y-h/p/11815452.html</a></p></blockquote><p>ç…§ç€æ”¹äº†ä¸€ä¸‹</p><p>ä½†æ˜¯åˆå‡ºç°äº†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cannot set property $http of #&lt;Vue&gt; which has only a getter at eval axios</span><br></pre></td></tr></table></figure><p>æœ€åè§£å†³æ–¹æ³•</p><p>vue.config.js</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        proxy: &#123;</span><br><span class="line">            &#39;&#x2F;api&#39;: &#123;</span><br><span class="line">                target: &#39;http:&#x2F;&#x2F;***:3000&#x2F;&#39;,</span><br><span class="line">                &#x2F;&#x2F; å…è®¸è·¨åŸŸ</span><br><span class="line">                changeOrigin: true,</span><br><span class="line">                ws: true,</span><br><span class="line">                pathRewrite: &#123;</span><br><span class="line">                    &#39;^&#x2F;api&#39;: &#39;&#39;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$axios.get(<span class="string">'/api/findall'</span>).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(response.data)</span><br><span class="line">            &#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">                alert(error);</span><br><span class="line">            &#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;img src=&quot;/images/2020/screencapture2020-04-18 PM12.01.36.jpg&quot;&gt;

&lt;p&gt;å‘ç°æœ‰è·¨åŸŸé—®é¢˜&lt;/p&gt;
&lt;p&gt;æŸ¥åˆ°&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/l
      
    
    </summary>
    
    
      <category term="Debug" scheme="http://yoursite.com/categories/Debug/"/>
    
    
      <category term="vue" scheme="http://yoursite.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>Axureç¬”è®°</title>
    <link href="http://yoursite.com/2020/04/16/note-axure/"/>
    <id>http://yoursite.com/2020/04/16/note-axure/</id>
    <published>2020-04-16T03:17:25.000Z</published>
    <updated>2020-04-16T04:33:38.535Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.bilibili.com/video/BV1Yx411f7d6" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Yx411f7d6</a></p></blockquote><h1 id="æ ‡å°º"><a href="#æ ‡å°º" class="headerlink" title="æ ‡å°º"></a>æ ‡å°º</h1><p>æŒ‰ä½å°ºå­æ‹–ä¸‹æ¥</p><img src="/images/2020/screencapture2020-04-16 AM11.19.53.jpg"><p>å·¦ä¾§ä¹Ÿæ˜¯</p><h1 id="åœ†è§’"><a href="#åœ†è§’" class="headerlink" title="åœ†è§’"></a>åœ†è§’</h1><p>æŒ‰ä½é»„è‰²ä¸‰è§’æ‹–åŠ¨</p><img src="/images/2020/screencapture2020-04-16 AM11.34.03.jpg"><h1 id="å¹³å‡æ’å¸ƒ"><a href="#å¹³å‡æ’å¸ƒ" class="headerlink" title="å¹³å‡æ’å¸ƒ"></a>å¹³å‡æ’å¸ƒ</h1><p>é€‰ä¸­å‡ ä¸ªå…ƒç´ ï¼Œç‚¹æ°´å¹³</p><img src="/images/2020/screencapture2020-04-16 AM11.37.11.jpg"><h1 id="åˆ‡å‰²é¡¶æ "><a href="#åˆ‡å‰²é¡¶æ " class="headerlink" title="åˆ‡å‰²é¡¶æ "></a>åˆ‡å‰²é¡¶æ </h1><p>å³é”®-&gt;åˆ†å‰²å›¾ç‰‡</p><img src="/images/2020/screencapture2020-04-16 PM12.08.32.jpg"><h1 id="åŠ¨ä½œ"><a href="#åŠ¨ä½œ" class="headerlink" title="åŠ¨ä½œ"></a>åŠ¨ä½œ</h1><p>å…ˆå»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸€ä¸ªé¡µé¢å¯¹åº”ä¸€é¡µï¼Œå¤§å°ã€ä½ç½®ç›¸åŒ</p><p>ç”¨çƒ­åŒºç½©åœ¨ç‚¹å‡»åŒºåŸŸä¸Š</p><p>æ·»åŠ äº¤äº’</p><img src="/images/2020/screencapture2020-04-16 PM12.27.48.jpg"><p>è·³è½¬é¡µé¢ å¯é€‰æ‹©æ‰“å¼€é“¾æ¥</p><hr><p>ä¸Šæ‰‹å®Œæˆ</p><img src="/images/2020/screencapture2020-04-16 PM12.31.48.jpg"><img src="/images/2020/screencapture2020-04-16 PM12.31.52.jpg">]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1Yx411f7d6&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/BV1Yx411
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="axure" scheme="http://yoursite.com/tags/axure/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloudç¬”è®°03 Hystrixæ–­è·¯å™¨</title>
    <link href="http://yoursite.com/2020/04/12/note-springcloud-03/"/>
    <id>http://yoursite.com/2020/04/12/note-springcloud-03/</id>
    <published>2020-04-12T07:57:20.000Z</published>
    <updated>2020-04-12T09:37:03.122Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://blog.csdn.net/ThinkWon/article/details/103732497" target="_blank" rel="noopener">https://blog.csdn.net/ThinkWon/article/details/103732497</a></p></blockquote><p>HystrixåŠŸèƒ½ï¼šæœåŠ¡é™çº§ã€æœåŠ¡ç†”æ–­ã€çº¿ç¨‹éš”ç¦»ã€è¯·æ±‚ç¼“å­˜ã€è¯·æ±‚åˆå¹¶ã€æœåŠ¡ç›‘æ§ç­‰</p><h1 id="åˆ›å»ºä¸€ä¸ªhystrix-serviceæ¨¡å—"><a href="#åˆ›å»ºä¸€ä¸ªhystrix-serviceæ¨¡å—" class="headerlink" title="åˆ›å»ºä¸€ä¸ªhystrix-serviceæ¨¡å—"></a>åˆ›å»ºä¸€ä¸ªhystrix-serviceæ¨¡å—</h1><p>ç»è¿‡å‰é¢ä¸€ç³»åˆ—æ‰å¿ƒæ“ä½œï¼Œè¿™æ¬¡åˆ›å»ºçš„æ—¶å€™æ²¡æœ‰ç”¨Spring InitializeråŠ ä¾èµ–ï¼Œç›´æ¥æ”¹çš„pom.xmlå¹¶ä¿®æ”¹ç‰ˆæœ¬</p><p>@EnableCircuitBreakerå¼€å¯æ–­è·¯å™¨åŠŸèƒ½</p><p>pomä¸­è¿˜è¦åŠ ä¸€ä¸ªä¾èµ–</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;cn.hutool&lt;&#x2F;groupId&gt;</span><br><span class="line">&lt;artifactId&gt;hutool-all&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;version&gt;5.1.0&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ¨¡å—ä¹Ÿæ·»åŠ äº†Ribbonçš„è´Ÿè½½å‡è¡¡åŠŸèƒ½</p><p>ä½†æ˜¯pomä¸­å¹¶æ²¡æœ‰é…ç½®è¿™ä¸ªä¾èµ–</p><p>çœ‹äº†ä¸‹ä¾èµ–å›¾å‘ç°æ˜¯eureka-clientä¾èµ–çš„</p><img src="/images/2020/screencapture2020-04-12 PM4.24.37.jpg"><h2 id="æœåŠ¡é™çº§"><a href="#æœåŠ¡é™çº§" class="headerlink" title="æœåŠ¡é™çº§"></a>æœåŠ¡é™çº§</h2><p>åœ¨UserHystrixControllerä¸­æ·»åŠ ç”¨äºæµ‹è¯•æœåŠ¡é™çº§çš„æ¥å£</p><p>åœ¨UserServiceä¸­æ·»åŠ è°ƒç”¨æ–¹æ³•ä¸æœåŠ¡é™çº§æ–¹æ³•ï¼Œå¹¶æ·»åŠ @HystrixCommandæ³¨è§£</p><p>å¯åŠ¨eureka-serverã€user-serviceã€hystrix-serviceæœåŠ¡</p><img src="/images/2020/screencapture2020-04-12 PM5.16.10.jpg"><p>å…³é—­user-serviceæœåŠ¡é‡æ–°æµ‹è¯•è¯¥æ¥å£</p><img src="/images/2020/screencapture2020-04-12 PM5.16.42.jpg"><p>åé¢æµ‹è¯•å¿½ç•¥æŸäº›å¼‚å¸¸é™çº§ã€ç¼“å­˜ã€è¯·æ±‚åˆå¹¶è¡¨ç°å‡å’Œæ•™ç¨‹ä¸€æ ·</p><img src="/images/2020/screencapture2020-04-12 PM5.35.06.jpg"><h2 id="DEBUGï¼šè°ƒç”¨æœåŠ¡å¤±è´¥"><a href="#DEBUGï¼šè°ƒç”¨æœåŠ¡å¤±è´¥" class="headerlink" title="DEBUGï¼šè°ƒç”¨æœåŠ¡å¤±è´¥"></a>DEBUGï¼šè°ƒç”¨æœåŠ¡å¤±è´¥</h2><p>å¯åŠ¨åæ³¨å†Œä¸­å¿ƒ</p><img src="/images/2020/screencapture2020-04-12 PM4.31.04.jpg"><p>è°ƒç”¨æµ‹è¯•æ–¹æ³•å</p><img src="/images/2020/screencapture2020-04-12 PM4.31.10.jpg"><p>ç›´æ¥å¤±è´¥äº†ï¼Ÿ</p><p>è¯•è¯•åŸæœåŠ¡åœ°å€</p><img src="/images/2020/screencapture2020-04-12 PM4.32.40.jpg"><p>æ²¡é—®é¢˜</p><p>è¿™ä¸ªbugä¼¼æ›¾ç›¸è¯†</p><p>ä¸Šæ¬¡åœ¨ribbon-serviceä¸­æ·»åŠ äº†ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.netflix.ribbon<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ribbon-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>hystrix-serviceä¸­ä¹ŸåŠ ä¸€ä¸ªè¯•è¯•</p><p>æ³¨å†Œä¸­å¿ƒå¤šäº†è­¦å‘Š</p><img src="/images/2020/screencapture2020-04-12 PM4.35.28.jpg"><p>è¿è¡Œ*2</p><p>è¿˜æ˜¯å¤±è´¥äº†</p><p>çœ‹ä¸‹Maven</p><img src="/images/2020/screencapture2020-04-12 PM4.43.25.jpg"><p>åŠ ä¸ªç‰ˆæœ¬</p><p>ribbonæ¨¡å—ç”¨çš„æ˜¯2.3.0</p><p>è¿è¡Œ*3</p><p>è¿˜æ˜¯æŒ‚äº†</p><p>æ‹¿æºç çš„è¿™ä¸‰ä¸ªæ¨¡å—è¯•è¯•</p><img src="/images/2020/screencapture2020-04-12 PM4.47.14.jpg"><p>æ˜¯å¯ä»¥çš„</p><p>å¯¹æ¯”ç‰ˆæœ¬</p><img src="/images/2020/screencapture2020-04-12 PM4.49.02.jpg"><p>å…¨éƒ¨æ”¹æˆä¸€æ ·çš„</p><p>å‘ç°æºç pomä¸­è¿˜å¤šäº†ä¸€ä¸ª</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä»¥åŠ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure><p>éš¾æ€ªå‰é¢springframework-cloudçš„æ¨¡å—æ€»æ˜¯æ²¡æœ‰ç‰ˆæœ¬å·ï¼ŒåŸæ¥æ˜¯æ²¡åŠ è¿™ä¸ª</p><p>ï¼ˆè§£å†³äº†å‰é¢ç¬”è®°02ä¸­ä¸€ä¸ªMARKï¼‰</p><p>è¿è¡Œ*4</p><p>è¿˜ğŸ¥¶æ˜¯ğŸ¥¶æŒ‚ğŸ¥¶äº†</p><p>å†æ¥ä¸€ä¸ªä¸ªæ¯”ä»£ç </p><p>æ²¡å·®å•Šï¼Ÿ</p><p>éš¾é“æ˜¯å…¶å®ƒæ¨¡å—çš„ä¾èµ–ä¹Ÿè¦æ”¹ï¼Ÿæ”¹å§</p><p>å‘ç°å‰é¢å¤§éƒ¨åˆ†éƒ½æ˜¯æœ‰dependencyManagementçš„ï¼Œæ‰€ä»¥å…¶å®ä¹Ÿæ²¡ä»€ä¹ˆå˜åŠ¨</p><p>è¿è¡Œ*5</p><p>æŒ‚</p><p>åˆšæ‰æŠŠspring-boot-starter-actuatoråˆ äº†ï¼Œé‡æ–°åŠ ä¸Š</p><p>è¿è¡Œ*6</p><p>ï¼æˆåŠŸäº†</p><p>å¯æ˜¯è¿™ä¸ªæ—¶å€™å…¶å®ƒç‰ˆæœ¬éƒ½å’Œæºç ä¸€æ ·äº†ï¼Œä½†æ˜¯æºç æ²¡æœ‰ç”¨è¿™ä¸ªå•Šï¼Ÿ-MARK-</p><h2 id="é—®é¢˜æ€»ç»“"><a href="#é—®é¢˜æ€»ç»“" class="headerlink" title="é—®é¢˜æ€»ç»“"></a>é—®é¢˜æ€»ç»“</h2><ol><li><p>ç‰ˆæœ¬ ç‰ˆæœ¬ ç‰ˆæœ¬</p></li><li><p>æ³¨å†Œä¸­å¿ƒæœ‰ï¼Œä½†æ‰¾ä¸åˆ°æœåŠ¡ï¼Œè¯•è¯•åŠ ä¸Š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><img src="/images/2020/screencapture2020-04-12 PM5.36.45.jpg">]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/ThinkWon/article/details/103732497&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://blog.csdn.net/Thin
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="springcloud" scheme="http://yoursite.com/tags/springcloud/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloudç¬”è®°02 Ribbonè´Ÿè½½å‡è¡¡</title>
    <link href="http://yoursite.com/2020/04/09/note-springcloud-02/"/>
    <id>http://yoursite.com/2020/04/09/note-springcloud-02/</id>
    <published>2020-04-09T11:13:46.000Z</published>
    <updated>2020-04-12T08:59:59.314Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://blog.csdn.net/ThinkWon/article/details/103729080" target="_blank" rel="noopener">https://blog.csdn.net/ThinkWon/article/details/103729080</a></p></blockquote><h1 id="user-serviceæ¨¡å—"><a href="#user-serviceæ¨¡å—" class="headerlink" title="user-serviceæ¨¡å—"></a>user-serviceæ¨¡å—</h1><ol><li>åˆ›å»ºuser-serviceæ¨¡å—</li><li>pom.xmlæ·»åŠ ä¾èµ–</li><li>é…ç½®application.yml</li><li>å®ä½“ç±»å’Œå“åº”ç±»</li><li>æ§åˆ¶å™¨</li><li>Serviceæ¥å£å’Œå®ç°ç±»</li></ol><h1 id="ribbon-serviceæ¨¡å—"><a href="#ribbon-serviceæ¨¡å—" class="headerlink" title="ribbon-serviceæ¨¡å—"></a>ribbon-serviceæ¨¡å—</h1><ol><li>åˆ›å»ºribbon-serviceæ¨¡å—</li><li>pom.xmlæ·»åŠ ä¾èµ–</li><li>é…ç½®application.yml</li><li>@LoadBalancedæ³¨è§£èµ‹äºˆRestTemplateè´Ÿè½½å‡è¡¡çš„èƒ½åŠ›</li><li>å®ä½“ç±»å’Œå“åº”ç±»</li><li>æ§åˆ¶å™¨</li></ol><h1 id="è´Ÿè½½å‡è¡¡åŠŸèƒ½æ¼”ç¤º"><a href="#è´Ÿè½½å‡è¡¡åŠŸèƒ½æ¼”ç¤º" class="headerlink" title="è´Ÿè½½å‡è¡¡åŠŸèƒ½æ¼”ç¤º"></a>è´Ÿè½½å‡è¡¡åŠŸèƒ½æ¼”ç¤º</h1><ol><li>å¼€å¯æœåŠ¡</li></ol><p>8001å¼€ä¸€ä¸ªServerï¼ˆä¸Šæ¬¡çš„æ¨¡å—ï¼‰</p><p>8201ã€8202å„å¼€ä¸€ä¸ªService</p><img src="/images/2020/screencapture2020-04-09 PM7.55.27.jpg"><p>è¿™æ¬¡æ˜¯åŒæ ·çš„é…ç½®æ–‡ä»¶ï¼Œ2ä¸ªç«¯å£å„å¼€ä¸€ä¸ªï¼Œæ”¹Active profiles</p><p>ä¸Šæ¬¡æ˜¯ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œå¼€åœ¨ä¸åŒçš„ç«¯å£ï¼Œç”¨Override parameters</p><p>8301å¼€Ribbon Service</p><img src="/images/2020/screencapture2020-04-09 PM9.36.41.jpg"><ol start="2"><li>è°ƒç”¨æ¥å£è¿›è¡Œæµ‹è¯•</li></ol><img src="/images/2020/screencapture2020-04-10 AM10.28.54.jpg"><p>8201</p><img src="/images/2020/screencapture2020-04-10 AM10.32.24.jpg"><p>8202</p><img src="/images/2020/screencapture2020-04-10 AM10.32.33.jpg"><h2 id="DEBUGï¼šè¿è¡Œåæ²¡æœ‰æ³¨å†Œ"><a href="#DEBUGï¼šè¿è¡Œåæ²¡æœ‰æ³¨å†Œ" class="headerlink" title="DEBUGï¼šè¿è¡Œåæ²¡æœ‰æ³¨å†Œ"></a>DEBUGï¼šè¿è¡Œåæ²¡æœ‰æ³¨å†Œ</h2><p>å¯åŠ¨å‡ ä¸ªæœåŠ¡å</p><img src="/images/2020/screencapture2020-04-09 PM7.59.13.jpg"><p>ä½†æ˜¯æµè§ˆå™¨ä¸­æŸ¥çœ‹</p><img src="/images/2020/screencapture2020-04-09 PM7.59.23.jpg"><p>å‘ç°åˆå¿˜è®°åŠ @EnableDiscoveryClientäº†</p><p>é‡å¯</p><p>è¿˜æ˜¯æ²¡æœ‰æ³¨å†Œä¸Š</p><p><strong>å°è¯•1</strong></p><blockquote><p><a href="https://blog.csdn.net/yangyongming_888/article/details/83859092" target="_blank" rel="noopener">https://blog.csdn.net/yangyongming_888/article/details/83859092</a></p></blockquote><p>è¯´æ˜¯ä¾èµ–å¸¦starterå’Œä¸å¸¦starter</p><p>ä½†æ˜¯çœ‹äº†ä¸‹ä¸‰ä¸ªpom.xmlä¸­éƒ½æ˜¯å¸¦starterçš„</p><p>å†æ¯”è¾ƒä¸€ä¸‹ä¾èµ–</p><p>æºç -eureka-server</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é¡¹ç›®-eureka-server</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æºç -ribbon-service</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é¡¹ç›®-ribbon-service</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æºç -user-service</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é¡¹ç›®-user-service</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸€æ ·ï¼Œçœ‹æ¥ä¸æ˜¯è¿™ä¸ªé—®é¢˜</p><p><strong>å°è¯•2</strong></p><p>å…³é—­serverï¼Œç›´æ¥å¯åŠ¨serviceï¼Œå‘ç°ä¹Ÿå¯åŠ¨äº†ï¼Œå¹¶æ²¡æœ‰æŠ¥é”™</p><p>ä½†æ˜¯ä¸Šæ¬¡çš„clientå¦‚æœåœ¨æ²¡å¼€serviceçš„æ—¶å€™å¯åŠ¨ä¼šæŠ¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ä¹Ÿè®¸æ ¹æœ¬å°±æ²¡æœ‰è¿ä¸ŠæœåŠ¡å™¨ï¼Ÿ</p><p>éš¾é“æ˜¯ymlæ²¡æœ‰ç”Ÿæ•ˆï¼Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn -X clean install</span><br></pre></td></tr></table></figure><p>æ²¡ç”¨</p><blockquote><p><a href="https://segmentfault.com/q/1010000012008825" target="_blank" rel="noopener">https://segmentfault.com/q/1010000012008825</a></p></blockquote><p>æœ‰è¯´æ˜¯ymlçš„ç¼©è¿›é—®é¢˜</p><p>çœ‹äº†ä¸€ä¸‹ä¸Šæ¬¡å¯ä»¥æ³¨å†Œçš„æœåŠ¡çš„yml</p><img src="/images/2020/screencapture2020-04-09 PM8.49.31.jpg"><p>è¿™æ¬¡çš„</p><img src="/images/2020/screencapture2020-04-09 PM8.49.35.jpg"><p>å‘ç°æ³¨å†Œçš„trueæ˜¯ç™½è‰²çš„</p><p>æç¤º</p><img src="/images/2020/screencapture2020-04-09 PM8.53.23.jpg"><p>ç¡®å®æœ‰é—®é¢˜</p><p>æŠŠpom.xmlä¸­spring-cloud-starter-netflix-eureka-clientçš„ä¾èµ–æ³¨é‡Šçš„ï¼Œä¾ç„¶èƒ½å¯åŠ¨</p><blockquote><p><a href="https://ask.csdn.net/questions/719186" target="_blank" rel="noopener">https://ask.csdn.net/questions/719186</a></p></blockquote><p>æœ‰è¯´åŠ ç‰ˆæœ¬å·çš„</p><p>æ²¡ç”¨</p><p>æƒ³æƒ³å’Œä¸Šæ¬¡åˆ›å»ºçš„åŒºåˆ«ï¼Œä¸Šæ¬¡æ˜¯åœ¨åˆ›å»ºæ¨¡å—çš„æ—¶å€™é€šè¿‡Spring Initializeré€‰æ‹©äº†Eureka Discovery Clientçš„ä¾èµ–</p><p>è¯•è¯•åˆ›å»ºä¸€ä¸ªuser-service2ï¼Œåˆ›å»ºçš„æ—¶å€™é€‰ä¸ŠEureka Discovery Client</p><p>æŠŠapplication.ymlçš„å†…å®¹å¤åˆ¶è¿‡å»ï¼Œå¯ä»¥è§£æ</p><p>å®ƒçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>user-serviceçš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ²¡å·®å•Š</p><p>é‚£éš¾é“æ˜¯ä¾èµ–æ²¡æœ‰å¯¼å…¥</p><p>çœ‹ä¸‹Maven</p><img src="/images/2020/screencapture2020-04-09 PM9.14.59.jpg"><p>???</p><p>éš¾é“çœŸæ˜¯æ²¡æœ‰ç‰ˆæœ¬å·</p><p>è€Œä¸”ä¸ºä»€ä¹ˆå‰é¢çš„æ¨¡å—ä¹Ÿéƒ½æ˜¯çº¢çš„ï¼Œé‚£æ˜¯æ€ä¹ˆè¿è¡ŒæˆåŠŸçš„ è¿·æƒ‘</p><p>ç‚¹è¿›å»çœ‹ä¸€ä¸‹</p><img src="/images/2020/screencapture2020-04-09 PM9.15.46.jpg"><p>ä¹Ÿè®¸åªæ˜¯éƒ¨åˆ†å†²çªæ‰€ä»¥è¿˜èƒ½è¿è¡Œï¼Ÿ</p><p>æ€»ä¹‹å…ˆåŠ ä¸ªç‰ˆæœ¬å·</p><img src="/images/2020/screencapture2020-04-09 PM9.23.48.jpg"><p>åŠ äº†ä¹‹åè¿˜æ˜¯unknown</p><p>é‡å¯ä¹Ÿæ˜¯</p><p>å‘ç°å³ä¸‹è§’åœ¨ä¸‹è½½</p><p>ä¸‹å®Œä¹‹åå˜æˆäº†Mavenä¸­å˜æˆäº†2.2.2.RELEASE</p><p>æ¿€åŠ¨åœ°æ“æ“æ‰‹</p><img src="/images/2020/screencapture2020-04-09 PM9.27.27.jpg"><p>æˆåŠŸï¼</p><img src="/images/2020/screencapture2020-04-09 PM9.29.40.jpg"><p>æ³¨å†Œä¸Šäº†</p><p>ç»™ribbon-serviceä¹ŸåŠ ä¸ªç‰ˆæœ¬</p><p>åŠ åœ¨propertiesé‡Œä¼¼ä¹ä¸ç®¡ç”¨ï¼Œæš‚æ—¶éƒ½åŠ åœ¨dependencyé‡Œå¥½äº†</p><img src="/images/2020/screencapture2020-04-09 PM9.31.51.jpg"><h2 id="DEBUGï¼šè°ƒç”¨æ¥å£è°ƒè¯•çš„é—®é¢˜"><a href="#DEBUGï¼šè°ƒç”¨æ¥å£è°ƒè¯•çš„é—®é¢˜" class="headerlink" title="DEBUGï¼šè°ƒç”¨æ¥å£è°ƒè¯•çš„é—®é¢˜"></a>DEBUGï¼šè°ƒç”¨æ¥å£è°ƒè¯•çš„é—®é¢˜</h2><p>å‡ºç°Whitelabel Error Page</p><p>æŠ¥é”™æ˜¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2020-04-09 21:37:37.483 ERROR 3503 --- [nio-8301-exec-1] o.a.c.c.C.[.[.[&#x2F;].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Failed to process import candidates for configuration class [org.springframework.cloud.netflix.ribbon.RibbonClientConfiguration]; nested exception is java.lang.IllegalStateException: Failed to introspect annotated methods on class org.springframework.cloud.netflix.ribbon.RestClientRibbonConfiguration] with root cause</span><br><span class="line"></span><br><span class="line">java.lang.ClassNotFoundException: com.netflix.niws.client.http.RestClient</span><br><span class="line">at java.net.URLClassLoader.findClass(URLClassLoader.java:382) ~[na:1.8.0_241]</span><br><span class="line">at java.lang.ClassLoader.loadClass(ClassLoader.java:418) ~[na:1.8.0_241]</span><br></pre></td></tr></table></figure><p>æ‰¾ä¸åˆ°com.netflix.niws.client.http.RestClient</p><p>çœ‹ä¸€ä¸‹ä¾èµ–</p><img src="/images/2020/screencapture2020-04-09 PM9.46.14.jpg"><p>ä¼¼ä¹æœ‰å¾ˆå¤šå†²çª</p><blockquote><p><a href="https://stackoverflow.com/questions/50675895/java-lang-classnotfoundexception-com-netflix-discovery-eurekaclientconfig" target="_blank" rel="noopener">https://stackoverflow.com/questions/50675895/java-lang-classnotfoundexception-com-netflix-discovery-eurekaclientconfig</a></p><p>You should select only <em>Eureka Server</em> using <em>spring Initializr</em> while creating eureka server project.</p></blockquote><p>â€¦</p><p>è¯•ä¸€ä¸‹é‡æ–°åˆ›å»º</p><img src="/images/2020/screencapture2020-04-09 PM10.00.26.jpg" width=400><p>å°±æ²¡æœ‰å†²çªäº†</p><p>è¿è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.ClassNotFoundException: com.netflix.niws.client.http.RestClient</span><br></pre></td></tr></table></figure><p>æ€ä¹ˆè¿˜æ˜¯æ‰¾ä¸åˆ°ï¼Ÿï¼Ÿï¼Ÿ</p><p>æŠŠribbonçš„ä¾èµ–æŒªåˆ°å‰é¢æ¥ä¼˜å…ˆæ‰¾å‘¢ï¼Ÿ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿˜æ˜¯ä¸è¡Œ</p><p>å†ç¿»ä¸€ä¸‹æŠ¥é”™å‘ç°æ˜¯getUserå‡½æ•°çš„é—®é¢˜</p><img src="/images/2020/screencapture2020-04-09 PM10.19.03.jpg"><p>åœ¨é‡Œé¢æ‰“å°ä¸€ä¸‹è·¯å¾„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">getUser</span><span class="params">(@PathVariable Long id)</span> </span>&#123;</span><br><span class="line">  System.out.println(<span class="string">"ã€getUserä¸­ã€‘userServiceUrlï¼š"</span>+userServiceUrl);</span><br><span class="line">  <span class="keyword">return</span> restTemplate.getForObject(userServiceUrl + <span class="string">"/user/&#123;1&#125;"</span>, Result<span class="class">.<span class="keyword">class</span>, <span class="title">id</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºå¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ã€getUserä¸­ã€‘userServiceUrlï¼šhttp:&#x2F;&#x2F;user-service</span><br></pre></td></tr></table></figure><p>æ²¡æœ‰localhost?</p><p>æµè§ˆå™¨è®¿é—®ä¸€ä¸‹</p><p>æ‰¾ä¸åˆ° <strong>user-service</strong> çš„æœåŠ¡å™¨ IP åœ°å€</p><p>ä¸Šæ¬¡å¥½åƒæ³¨å†Œè¿‡ipæ¥ç€</p><p>ä½†æ˜¯æ³¨å†Œæ˜¯hostname</p><p>è¿™é‡Œåº”è¯¥æ˜¯è¦é€šè¿‡æœåŠ¡åç§°è®¿é—®2ä¸ªServiceï¼Œä¼¼ä¹ä¸ä¸€æ ·</p><p>è¯•è¯•ç›´æ¥ç”¨localhoståŠ ç«¯å£è®¿é—®</p><img src="/images/2020/screencapture2020-04-09 PM10.33.08.jpg"><p>å•ä¸ªèŠ‚ç‚¹çš„æœåŠ¡æ²¡æœ‰é—®é¢˜</p><p>é‚£åº”è¯¥å°±æ˜¯åœ¨æ³¨å†ŒæœåŠ¡åç§°åˆ°ipçš„è½¬æ¢ä¸Šå‡ºäº†é—®é¢˜</p><blockquote><p><a href="https://bbs.csdn.net/topics/392414113" target="_blank" rel="noopener">https://bbs.csdn.net/topics/392414113</a></p></blockquote><p>æŠŠ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> RestTemplate restTemplate;</span><br></pre></td></tr></table></figure><p>æ”¹æˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> RestOperations restTemplate;</span><br></pre></td></tr></table></figure><p>ä¸è¡Œ</p><blockquote><p><a href="https://www.liangzl.com/get-article-detail-174951.html" target="_blank" rel="noopener">https://www.liangzl.com/get-article-detail-174951.html</a></p></blockquote><p>å¯¹æ¯”äº†ä¸€ä¸‹è¿™ä¸ªæ•™ç¨‹ï¼Œä¹Ÿæ²¡æ‰¾åˆ°é—®é¢˜</p><p>ç½‘é¡µä¸Šçš„é”™è¯¯ä¿¡æ¯æ˜¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">There was an unexpected error (type&#x3D;Internal Server Error, status&#x3D;500).</span><br><span class="line">Failed to process import candidates for configuration class [org.springframework.cloud.netflix.ribbon.RibbonClientConfiguration]; nested exception is java.lang.IllegalStateException: Failed to introspect annotated methods on class org.springframework.cloud.netflix.ribbon.RestClientRibbonConfiguration</span><br></pre></td></tr></table></figure><p>ä¼¼ä¹æ˜¯æ³¨é‡Šçš„é—®é¢˜</p><p>â€¦</p><p>å¾ˆä¹…å¾ˆä¹…ä»¥å</p><p>â€¦</p><p>è¯•è¯•æºç èƒ½ä¸èƒ½è·‘</p><p>æ¼«é•¿çš„ä¸‹è½½ä¾èµ–</p><p><strong>ç¬¬äºŒå¤©</strong></p><p>è¿è¡Œæºç </p><img src="/images/2020/screencapture2020-04-10 AM10.05.19.jpg"><img src="/images/2020/screencapture2020-04-10 AM10.05.28.jpg"><p>æ²¡æœ‰é—®é¢˜</p><p>è€Œä¸”Mavenä¸€ä¸ªéƒ½æ²¡çº¢</p><img src="/images/2020/screencapture2020-04-10 AM10.06.09.jpg" width=300><p>å¯¹æ¯”ä¸€ä¸‹ä¾èµ–ç‰ˆæœ¬</p><p>æºç eureka-server</p><img src="/images/2020/screencapture2020-04-10 AM10.08.50.jpg"><p>é¡¹ç›®eureka-server</p><img src="/images/2020/screencapture2020-04-10 AM10.08.58.jpg"><p>spring-cloud-starter-netflix-eureka-serverç‰ˆæœ¬ä¸ä¸€æ ·</p><p>diffä¸€ä¸‹pomæ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">8c8</span><br><span class="line">&lt;         &lt;version&gt;2.2.2.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">---</span><br><span class="line">&gt;         &lt;version&gt;2.2.6.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">11c11</span><br><span class="line">&lt;     &lt;groupId&gt;com.jourwon.springcloud&lt;&#x2F;groupId&gt;</span><br><span class="line">---</span><br><span class="line">&gt;     &lt;groupId&gt;com.coconutnut&lt;&#x2F;groupId&gt;</span><br><span class="line">19c19</span><br><span class="line">&lt;         &lt;spring-cloud.version&gt;Hoxton.RELEASE&lt;&#x2F;spring-cloud.version&gt;</span><br><span class="line">---</span><br><span class="line">&gt;         &lt;spring-cloud.version&gt;Hoxton.SR3&lt;&#x2F;spring-cloud.version&gt;</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªæ˜¯spring-boot-starter-parentçš„ç‰ˆæœ¬ä¸ä¸€æ ·</p><p>ä¸€ä¸ªæ˜¯spring-cloudçš„ç‰ˆæœ¬ä¸ä¸€æ ·</p><p>ä¿®æ”¹spring-cloudçš„ç‰ˆæœ¬ï¼ŒMavençš„å†²çªå°±æ²¡æœ‰äº†</p><p>äºæ˜¯æŠŠå…¶å®ƒpomçš„ç‰ˆæœ¬ä¹Ÿæ”¹äº†</p><p>spring-boot-starter-parentçš„ç‰ˆæœ¬æš‚æ—¶æ²¡æ”¹ï¼Œä¿æŒæœ€æ–°</p><img src="/images/2020/screencapture2020-04-10 AM10.22.11.jpg"><p>å¯åŠ¨</p><img src="/images/2020/screencapture2020-04-10 AM10.22.23.jpg"><p>æ³¨å†Œä¸Šäº†</p><img src="/images/2020/screencapture2020-04-10 AM10.22.18.jpg"><p>åˆå´©äº†</p><p>ä½†æ˜¯è¿™æ¬¡æ§åˆ¶å°æ²¡æœ‰Erroräº†</p><p>é”™è¯¯ä¿¡æ¯å˜æˆäº†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">There was an unexpected error (type&#x3D;Internal Server Error, status&#x3D;500).</span><br><span class="line">No instances available for user-service</span><br></pre></td></tr></table></figure><p>å•ç‹¬è®¿é—®<a href="http://localhost:8201/user/1æˆ–è€…http://localhost:8202/user/1éƒ½æ˜¯å¯ä»¥çš„" target="_blank" rel="noopener">http://localhost:8201/user/1æˆ–è€…http://localhost:8202/user/1éƒ½æ˜¯å¯ä»¥çš„</a></p><blockquote><p><a href="https://blog.csdn.net/choice_of_door/article/details/85467105" target="_blank" rel="noopener">https://blog.csdn.net/choice_of_door/article/details/85467105</a></p></blockquote><p>æŒ‰ç…§è¿™ä¸ªåŠ äº†ä¸ªä¾èµ–</p><p>ï¼ˆæºç é‡Œå¹¶æ²¡æœ‰ ä½†æ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<del>MARK</del> (ç¬”è®°03ä¸­è§£å†³)ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.netflix.ribbon<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ribbon-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆåŠŸäº†ï¼</p><p>å—·ï¼</p><h2 id="é—®é¢˜æ€»ç»“"><a href="#é—®é¢˜æ€»ç»“" class="headerlink" title="é—®é¢˜æ€»ç»“"></a>é—®é¢˜æ€»ç»“</h2><p>éƒ½æ˜¯ç‰ˆæœ¬çš„å‘</p><p>åˆ›å»ºæ—¶ç”¨Spring InitializeråŠ è¿˜æ˜¯åæœŸåœ¨pom.xmlä¸­åŠ ä¸é‡è¦</p><p>ä½†æœ€å¥½å’Œæ•™ç¨‹ä¿æŒä¸€è‡´</p><p>è‡³å°‘æ£€æŸ¥å³è¾¹Mavenæ ä¸­æ²¡æœ‰çº¢çº¿</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><img src="/images/2020/screencapture2020-04-10 AM10.51.52.jpg">]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/ThinkWon/article/details/103729080&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://blog.csdn.net/Thin
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="springcloud" scheme="http://yoursite.com/tags/springcloud/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloudç¬”è®°01 Eurekaæ³¨å†Œä¸­å¿ƒ</title>
    <link href="http://yoursite.com/2020/04/08/note-springcloud-01/"/>
    <id>http://yoursite.com/2020/04/08/note-springcloud-01/</id>
    <published>2020-04-08T13:11:54.000Z</published>
    <updated>2020-04-09T15:48:55.329Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://blog.csdn.net/ThinkWon/article/details/103726655" target="_blank" rel="noopener">https://blog.csdn.net/ThinkWon/article/details/103726655</a></p></blockquote><hr><blockquote><p>Spring Cloud Netflix Eurekaæ˜¯Spring Cloud Netflixå­é¡¹ç›®çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œä¸»è¦ç”¨äºå¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡æ²»ç†</p></blockquote><p>å…ˆç–‘æƒ‘äº†ä¸€ä¸‹æ­¤Netflixæ˜¯ä¸æ˜¯å½¼Netflix</p><p>æŸ¥äº†ä¸€ä¸‹ <a href="https://www.cnblogs.com/EasonJim/p/7795816.html" target="_blank" rel="noopener">Netflixæ˜¯ä»€ä¹ˆï¼Œä¸Spring Cloudæœ‰ä»€ä¹ˆå…³ç³»</a> è¿˜çœŸæ˜¯</p><p>çˆ±äº†çˆ±äº†</p><hr><h1 id="æ­å»ºEurekaæ³¨å†Œä¸­å¿ƒ"><a href="#æ­å»ºEurekaæ³¨å†Œä¸­å¿ƒ" class="headerlink" title="æ­å»ºEurekaæ³¨å†Œä¸­å¿ƒ"></a>æ­å»ºEurekaæ³¨å†Œä¸­å¿ƒ</h1><ol><li><p>åˆ›å»ºeureka-serveræ¨¡å—</p></li><li><p>@EnableEurekaServerå¯ç”¨Euerkaæ³¨å†Œä¸­å¿ƒåŠŸèƒ½</p></li><li><p>application.ymlæ·»åŠ é…ç½®</p><p>é¡¹ç›®é»˜è®¤æ˜¯application.propertiesï¼Œä¸ºäº†å’Œæ•™ç¨‹ä¿æŒä¸€è‡´</p><p>åˆ é™¤application.propertiesï¼Œæ‰§è¡Œ mvn -X clean install</p></li><li><p>Run Dashboardè¿è¡Œåº”ç”¨</p></li><li><p>æµè§ˆå™¨æ‰“å¼€æ³¨å†Œä¸­å¿ƒ</p></li></ol><img src="/images/2020/screencapture2020-04-09 AM10.00.53.jpg"><p>æˆåŠŸ</p><hr><p>ä¾èµ–ä¸‹äº†æŒºä¹…ï¼Œçœ‹çœ¼éƒ½æœ‰äº›ä»€ä¹ˆ</p><img src="/images/2020/screencapture2020-04-09 AM9.33.00.jpg" width=400><p>ğŸ˜±ğŸ˜±ğŸ˜±</p><p>ä¸Šé¢æ˜¯spring-cloud-starter-netflix-eureka-server</p><img src="/images/2020/screencapture2020-04-09 AM9.34.40.jpg"><p>ä¸‹é¢æ˜¯spring-boot-starter-test</p><img src="/images/2020/screencapture2020-04-09 AM9.35.06.jpg"><h2 id="DEBUGï¼šæ²¡æœ‰Run-Dashboard"><a href="#DEBUGï¼šæ²¡æœ‰Run-Dashboard" class="headerlink" title="DEBUGï¼šæ²¡æœ‰Run Dashboard"></a>DEBUGï¼šæ²¡æœ‰Run Dashboard</h2><p><strong>å°è¯•1</strong></p><blockquote><p><a href="https://blog.csdn.net/chinoukin/article/details/80577890" target="_blank" rel="noopener">https://blog.csdn.net/chinoukin/article/details/80577890</a></p></blockquote><p>æ”¹.idea/workspace.xmlçš„</p><p>åŸæœ¬æ˜¯è¿™æ ·</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">name</span>=<span class="string">"RunDashboard"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">name</span>=<span class="string">"configurationTypes"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"SpringBootApplicationConfigurationType"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™ä¸ªæ–‡ä»¶æ¯æ¬¡æ”¹äº†command+så°±åˆå›å»äº†</p><p><strong>å°è¯•2</strong></p><blockquote><p><a href="https://blog.csdn.net/feixiangsmile/article/details/96908744" target="_blank" rel="noopener">https://blog.csdn.net/feixiangsmile/article/details/96908744</a></p></blockquote><p>Edit Configurationsä¸­</p><p>Templatesä¸­</p><p>ç‚¹å‡»åŠ å·æ·»åŠ Applicationå’ŒSpring Boot</p><p>workspace.xmlå˜æˆäº†</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">name</span>=<span class="string">"RunDashboard"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">name</span>=<span class="string">"configurationTypes"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"Application"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"SpringBootApplicationConfigurationType"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½†è¿˜æ˜¯æ²¡æœ‰</p><p><strong>å°è¯•3</strong></p><blockquote><p><a href="https://www.cnblogs.com/JealousGirl/p/openorcloserundash.html" target="_blank" rel="noopener">https://www.cnblogs.com/JealousGirl/p/openorcloserundash.html</a></p><p><a href="https://blog.csdn.net/icebox126/article/details/78861943" target="_blank" rel="noopener">https://blog.csdn.net/icebox126/article/details/78861943</a></p></blockquote><p>åœ¨workspace.xmlä¸­æ·»åŠ ï¼ˆè¿™æ¬¡å¯ä»¥åŠ äº†ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"show.run.dashboard.notification"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯é‡å¯è¿˜æ˜¯ä¸ä¼šå¼¹å‡ºæç¤º</p><p><strong>å°è¯•4</strong></p><blockquote><p><a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000428264-New-Spring-Boot-Run-dashboard-not-showing-up" target="_blank" rel="noopener">https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000428264-New-Spring-Boot-Run-dashboard-not-showing-up</a></p><p><a href="https://blog.csdn.net/jianxia801/article/details/99576764" target="_blank" rel="noopener">https://blog.csdn.net/jianxia801/article/details/99576764</a></p></blockquote><img src="/images/2020/screencapture2020-04-09 AM10.30.31.jpg"><p>â€¦</p><p>fine</p><p>åŸæ¥ä¸€ç›´éƒ½åœ¨å•Š</p><img src="/images/2020/screencapture2020-04-09 AM10.31.24.jpg"><h1 id="æ­å»ºEurekaå®¢æˆ·ç«¯"><a href="#æ­å»ºEurekaå®¢æˆ·ç«¯" class="headerlink" title="æ­å»ºEurekaå®¢æˆ·ç«¯"></a>æ­å»ºEurekaå®¢æˆ·ç«¯</h1><ol><li><p>åˆ›å»ºeureka-clientæ¨¡å—</p></li><li><p>æ·»åŠ ä¾èµ–</p></li><li><p>åŠ @EnableDiscoveryClientè¡¨æ˜æ˜¯ä¸€ä¸ªEurekaå®¢æˆ·ç«¯</p></li><li><p>é…ç½®</p></li></ol><h2 id="DEBUGï¼šæ³¨å†Œä¸­å¿ƒä¸­æ²¡æœ‰æ˜¾ç¤ºeureka-client"><a href="#DEBUGï¼šæ³¨å†Œä¸­å¿ƒä¸­æ²¡æœ‰æ˜¾ç¤ºeureka-client" class="headerlink" title="DEBUGï¼šæ³¨å†Œä¸­å¿ƒä¸­æ²¡æœ‰æ˜¾ç¤ºeureka-client"></a>DEBUGï¼šæ³¨å†Œä¸­å¿ƒä¸­æ²¡æœ‰æ˜¾ç¤ºeureka-client</h2><p><strong>å°è¯•1</strong></p><p>åŸæ¥çš„pom.xmlä¸­çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ•™ç¨‹ä¸­è¯´è¦æ·»åŠ çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸€å¼€å§‹ç”±äºspring-cloud-starter-netflix-eureka-clientå·²ç»æœ‰äº†</p><p>ç›´æ¥æ·»åŠ äº†ä¸Šé¢è¿™ä¸ªspring-boot-starter-web</p><p>ä½†æ˜¯è§‰å¾—å¥½åƒæœ‰ç‚¹é—®é¢˜ï¼Ÿ</p><p>spring-boot-starter-testå’Œspring-boot-starter-webä¼šä¸ä¼šå†²çªå‘¢?</p><img src="/images/2020/screencapture2020-04-09 AM10.39.19.jpg"><p>æ²¡å†²çª</p><p>ä½†æ˜¯spring-boot-starter-testä¼¼ä¹å¤šäº†å¾ˆå¤šä¸œè¥¿ï¼ˆè¯•äº†ä¸€ä¸‹å¹¶ä¸èƒ½åˆ ï¼‰</p><p><strong>å°è¯•2</strong></p><p>çœ‹ä¸‹æŠ¥é”™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2020-04-09 10:43:38.777 ERROR 1243 --- [           main] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint&#x3D;DefaultEndpoint&#123; serviceUrl&#x3D;&#39;http:&#x2F;&#x2F;localhost:8001&#x2F;eureka&#x2F;&#125;</span><br><span class="line"></span><br><span class="line">com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)</span><br></pre></td></tr></table></figure><p>å¥½åƒå¹²äº†ä¸ªè ¢äº‹</p><img src="/images/2020/screencapture2020-04-09 AM10.44.58.jpg"><p>æœç„¶ æœåŠ¡å™¨æ²¡å¼€</p><p>é‡æ¥ å…ˆå¼€eureka-server å†å¼€eureka-client</p><img src="/images/2020/screencapture2020-04-09 AM10.46.19.jpg"><img src="/images/2020/screencapture2020-04-09 AM10.46.31.jpg"><p>æ³¨å†ŒæˆåŠŸ</p><h1 id="æ­å»ºEurekaæ³¨å†Œä¸­å¿ƒé›†ç¾¤"><a href="#æ­å»ºEurekaæ³¨å†Œä¸­å¿ƒé›†ç¾¤" class="headerlink" title="æ­å»ºEurekaæ³¨å†Œä¸­å¿ƒé›†ç¾¤"></a>æ­å»ºEurekaæ³¨å†Œä¸­å¿ƒé›†ç¾¤</h1><p>ç›®çš„ï¼šé˜²æ­¢æ³¨å†Œä¸­å¿ƒæŒ‚äº†æ•´ä¸ªå®æ‰ æ­å»ºåŒèŠ‚ç‚¹çš„æ³¨å†Œä¸­å¿ƒé›†ç¾¤</p><ol><li><p>2ä¸ªé…ç½®æ–‡ä»¶</p><p>ï¼ˆä¸çŸ¥é“åŸæœ¬çš„application.ymlè¦ä¸è¦åˆ ï¼Ÿçœ‹äº†ä¸‹æºç æ²¡æœ‰åˆ ï¼‰</p></li><li><p>æœ¬æœºé…ç½®åŸŸå</p><p>macOSåœ¨/etc/hosts</p><p>æ”¹ä¹‹å‰çš„å­˜ä¸ªæ¡£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">##</span><br><span class="line"># Host Database</span><br><span class="line">#</span><br><span class="line"># localhost is used to configure the loopback interface</span><br><span class="line"># when the system is booting.  Do not change this entry.</span><br><span class="line">##</span><br><span class="line">127.0.0.1localhost</span><br><span class="line">255.255.255.255broadcasthost</span><br><span class="line">::1             localhost</span><br><span class="line">127.0.0.1 xmind.net</span><br><span class="line">127.0.0.1 www.xmind.net</span><br></pre></td></tr></table></figure><p>åŠ ä¸¤è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 replica1</span><br><span class="line">127.0.0.1 replica2</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨</p></li><li><p>ä¿®æ”¹é…ç½®ï¼Œè®©eureka-clientè¿æ¥åˆ°é›†ç¾¤</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># é…ç½®æ³¨å†Œä¸­å¿ƒåœ°å€</span><br><span class="line"># defaultZone: http:&#x2F;&#x2F;localhost:8001&#x2F;eureka</span><br><span class="line"># åŒæ—¶æ³¨å†Œåˆ°ä¸¤ä¸ªæ³¨å†Œä¸­å¿ƒ</span><br><span class="line">defaultZone: http:&#x2F;&#x2F;replica1:8002&#x2F;eureka&#x2F;,http:&#x2F;&#x2F;replica2:8003&#x2F;eureka&#x2F;</span><br></pre></td></tr></table></figure><h2 id="DEBUGï¼šæœåŠ¡å™¨æ²¡æœ‰æ³¨å†Œ"><a href="#DEBUGï¼šæœåŠ¡å™¨æ²¡æœ‰æ³¨å†Œ" class="headerlink" title="DEBUGï¼šæœåŠ¡å™¨æ²¡æœ‰æ³¨å†Œ"></a>DEBUGï¼šæœåŠ¡å™¨æ²¡æœ‰æ³¨å†Œ</h2><p>å¤åˆ¶ä¸€ä»½åŸå¯åŠ¨é…ç½®ï¼Œä¿®æ”¹ä¸ºä»replica1å¯åŠ¨</p><img src="/images/2020/screencapture2020-04-09 AM10.57.57.jpg"><p>Run</p><img src="/images/2020/screencapture2020-04-09 AM10.59.41.jpg"><p>å‘ç°æœ‰å¤‡ä»½ï¼Œä½†æ˜¯æ²¡æœ‰æ³¨å†Œï¼Ÿ</p><img src="/images/2020/screencapture2020-04-09 AM10.59.52.jpg"><p>ä¼¼ä¹æ˜¯åªå¤åˆ¶äº†ä¸€ä»½é…ç½®ï¼Œreplica2æ²¡æœ‰å¯åŠ¨</p><p>åŠ ä¸Š</p><img src="/images/2020/screencapture2020-04-09 AM11.10.28.jpg"><p>å¥½äº†</p><img src="/images/2020/screencapture2020-04-09 AM11.11.58.jpg"><h1 id="ç»™Eurekaæ³¨å†Œä¸­å¿ƒæ·»åŠ è®¤è¯"><a href="#ç»™Eurekaæ³¨å†Œä¸­å¿ƒæ·»åŠ è®¤è¯" class="headerlink" title="ç»™Eurekaæ³¨å†Œä¸­å¿ƒæ·»åŠ è®¤è¯"></a>ç»™Eurekaæ³¨å†Œä¸­å¿ƒæ·»åŠ è®¤è¯</h1><ol><li>åˆ›å»ºeureka-security-serveræ¨¡å—</li><li>æ·»åŠ ä¾èµ–</li><li>é…ç½®pom.xml</li><li>æ·»åŠ WebSecurityConfig</li><li>eureka-clientæ³¨å†Œåˆ°æœ‰ç™»å½•è®¤è¯çš„æ³¨å†Œä¸­å¿ƒ</li><li>ä»¥application-security.ymlé…ç½®è¿è¡Œeureka-client</li></ol><h2 id="DEBUGï¼šSpringSecurityæ¨¡å—"><a href="#DEBUGï¼šSpringSecurityæ¨¡å—" class="headerlink" title="DEBUGï¼šSpringSecurityæ¨¡å—"></a>DEBUGï¼šSpringSecurityæ¨¡å—</h2><p>è¦æ·»åŠ SpringSecurityæ¨¡å—ï¼Œä¹Ÿè®¸æ˜¯Spring Cloud Securityä¸‹çš„Cloud Securityï¼Ÿå…ˆè¯•è¯•</p><p>åˆ›å»ºå‡ºçš„pom.xmlä¸­ä¾èµ–æ˜¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ•™ç¨‹ä¸­è¦åŠ çš„ä¾èµ–æ˜¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¥½åƒä¸æ˜¯è¿™ä¸ª</p><p>é‡æ–°åˆ›å»º</p><p>è¿™æ¬¡ç›´æ¥æœç´¢Spring Security å‘ç°æœ‰è¿™ä¸ªæ¨¡å—</p><img src="/images/2020/screencapture2020-04-09 AM11.18.28.jpg"><p>ï¼ˆæœ€åå‘ç°éƒ½è¡Œï¼Œä¸”æ²¡å¿…è¦åˆ›å»ºæ—¶æ·»åŠ ï¼Œéšæ—¶åœ¨pom.xmlä¸­ä¿®æ”¹éƒ½å¯ï¼‰</p><h2 id="DEBUGï¼šæ–°çš„æ¨¡å—æ²¡æœ‰è¢«è¯†åˆ«ä¸ºMavené¡¹ç›®"><a href="#DEBUGï¼šæ–°çš„æ¨¡å—æ²¡æœ‰è¢«è¯†åˆ«ä¸ºMavené¡¹ç›®" class="headerlink" title="DEBUGï¼šæ–°çš„æ¨¡å—æ²¡æœ‰è¢«è¯†åˆ«ä¸ºMavené¡¹ç›®"></a>DEBUGï¼šæ–°çš„æ¨¡å—æ²¡æœ‰è¢«è¯†åˆ«ä¸ºMavené¡¹ç›®</h2><blockquote><p><a href="https://www.jianshu.com/p/909eb8a48d49" target="_blank" rel="noopener">https://www.jianshu.com/p/909eb8a48d49</a></p></blockquote><p>å³è¾¹Mavenæ ï¼‹å¯¹åº”çš„pom.xml</p><h2 id="DEBUGï¼šå¯åŠ¨æŠ¥é”™-amp-Whitelabel-Error-Page"><a href="#DEBUGï¼šå¯åŠ¨æŠ¥é”™-amp-Whitelabel-Error-Page" class="headerlink" title="DEBUGï¼šå¯åŠ¨æŠ¥é”™&amp;Whitelabel Error Page"></a>DEBUGï¼šå¯åŠ¨æŠ¥é”™&amp;Whitelabel Error Page</h2><img src="/images/2020/screencapture2020-04-09 AM11.27.19.jpg"><blockquote><p><a href="https://blog.csdn.net/qq_28379809/article/details/102789716" target="_blank" rel="noopener">https://blog.csdn.net/qq_28379809/article/details/102789716</a></p></blockquote><p>æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨</p><img src="/images/2020/screencapture2020-04-09 AM11.32.17.jpg"><p>è¾“å…¥è´¦å·å¯†ç </p><img src="/images/2020/screencapture2020-04-09 AM11.32.27.jpg"><p>å‘ç°EurekaSecurityServerApplicationæ²¡æœ‰åŠ @EnableEurekaServer</p><img src="/images/2020/screencapture2020-04-09 AM11.45.35.jpg"><p>pom.xmlä¸­æœ‰spring-cloud-starter-netflix-eureka-serverï¼Œä¸ºä»€ä¹ˆå¯¼ä¸è¿›æ¥å‘¢</p><p>å’Œeureka-serverçš„é…ç½®æ¯”è¾ƒï¼Œå‘ç°å°‘ä¸€å¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>Hoxton.SR3<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åŠ ä¸Š</p><p>è¿˜æ˜¯ä¸è¡Œ</p><p>æºç ä¸­æ˜¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>Hoxton.RELEASE<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.security<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-security-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æºç ä¸­çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¤åˆ¶è¿‡å»</p><p>Reimport Maven Projects</p><p>å‘ç°æ­£åœ¨ä¸‹è½½çš„è¿›åº¦æ¡</p><p>æ‰€ä»¥éš¾é“åˆšæ‰æ˜¯å› ä¸ºä¾èµ–è¿˜æ²¡ä¸‹è½½å®Œå—</p><p>ä¸‹è½½å®Œæˆ</p><p>å…¨çº¢äº†â€¦</p><img src="/images/2020/screencapture2020-04-09 AM11.58.06.jpg"><p>æ”¹å›åŸæœ¬çš„ä¾èµ– åˆ æ‰spring-boot-starter-web ä¸çº¢äº†</p><p>å¯åŠ¨</p><img src="/images/2020/screencapture2020-04-09 AM11.59.54.jpg"><p>ğŸ™ƒ</p><p>ä»”ç»†çœ‹ä¸‹æºç çš„é…ç½®æ˜¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è€Œä¸æ˜¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥éš¾é“è¿˜æ˜¯åº”è¯¥å¼•å…¥Spring Cloud Securityæ¨¡å—ï¼Ÿ</p><p>é‡æ–°åˆ›å»ºè¯•è¯•</p><p>æˆåŠŸï¼</p><h2 id="DEBUGï¼šä»¥application-security-ymlé…ç½®è¿è¡Œeureka-client"><a href="#DEBUGï¼šä»¥application-security-ymlé…ç½®è¿è¡Œeureka-client" class="headerlink" title="DEBUGï¼šä»¥application-security.ymlé…ç½®è¿è¡Œeureka-client"></a>DEBUGï¼šä»¥application-security.ymlé…ç½®è¿è¡Œeureka-client</h2><p>ç°åœ¨eureka-clientæœ‰2ä¸ªyml</p><img src="/images/2020/screencapture2020-04-09 PM3.55.10.jpg"><p>ç›´æ¥è¿è¡Œè¿˜æ˜¯application.ymlçš„8101ç«¯å£</p><p>æ ¹æ®åˆšæ‰eureka-serverçš„å¤šä¸ªyml</p><p>æ˜¯ä¿®æ”¹äº†æŒ‡å®šä¸»æœºåœ°å€</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># application.yml</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">localhost</span></span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># application-replica1.yml</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">replica1</span></span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># application-replica2.yml</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">replica2</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨Edit Configurationsä¸­å¤åˆ¶Configurationï¼Œç„¶åä¿®æ”¹ä¸»æœºå</p><p>äºæ˜¯è¿™é‡Œä¹ŸåŠ ä¸ŠæŒ‡å®šä¸»æœºå</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">instance:</span></span><br><span class="line">  <span class="attr">hostname:</span> <span class="string">eureka-client-security</span></span><br></pre></td></tr></table></figure><p>å¤åˆ¶ä¸€ä¸ªEurekaClientApplicationçš„é…ç½®ï¼ŒActive profileså¤„æ”¹ä¸ºä¸»æœºå</p><img src="/images/2020/screencapture2020-04-09 PM4.01.03.jpg"><p>ä½†è¿˜æ˜¯8101ï¼Ÿ</p><img src="/images/2020/screencapture2020-04-09 PM4.04.44.jpg"><p>è§‚å¯Ÿå‘ç°</p><p>Serverçš„é…ç½®æ–‡ä»¶1å«application-replica1.ymlï¼Œhostnameæ˜¯replica1ï¼ŒActive profileså¡«çš„replica1</p><p>é…ç½®æ–‡ä»¶2å«application-replica2.ymlï¼Œhostnameæ˜¯replica2ï¼ŒActive profileså¡«çš„replica2</p><p>éš¾é“â€¦</p><p>æŠŠClientçš„application-security.ymlä¸­æ”¹æˆ</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">instance:</span></span><br><span class="line">  <span class="attr">hostname:</span> <span class="string">security</span></span><br></pre></td></tr></table></figure><p>Active profilesæ”¹æˆsecurity</p><p>Run</p><img src="/images/2020/screencapture2020-04-09 PM4.10.10.jpg"><p>æ‰“å¼€äº†ï¼</p><img src="/images/2020/screencapture2020-04-09 PM4.11.03.jpg"><p>æœ‰ä¸ª<strong>EMERGENCY!</strong> </p><p>ä¿æŠ¤æœºåˆ¶åé¢å†çœ‹</p><p>å…ˆè¯•è¯•è¿™ä¸ªæŒ‡å®šymlåˆ°åº•æ˜¯æ€ä¹ˆæŒ‡å®šçš„</p><table><thead><tr><th>æ–‡ä»¶å</th><th>hostname</th><th>Active profiles</th><th>èƒ½å¦å¯åŠ¨</th></tr></thead><tbody><tr><td>application-security.yml</td><td>eureka-client-security</td><td>eureka-client-security</td><td>å¦</td></tr><tr><td>application-security.yml</td><td>security</td><td>security</td><td>å¯</td></tr><tr><td>application-security.yml</td><td>securityX</td><td>security</td><td>å¯</td></tr><tr><td>application-securityX.yml</td><td>security</td><td>security</td><td>å¦</td></tr></tbody></table><p>çœ‹æ¥Active profilesè¦å¡«æ–‡ä»¶ååé¢çš„éƒ¨åˆ†</p><p>æ•™ç¨‹æœ€ä¸‹é¢çš„å¸¸ç”¨é…ç½®</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span> <span class="comment">#eurekaå®¢æˆ·ç«¯é…ç½®</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">true</span> <span class="comment">#æ˜¯å¦å°†è‡ªå·±æ³¨å†Œåˆ°eurekaæœåŠ¡ç«¯ä¸Šå»</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">true</span> <span class="comment">#æ˜¯å¦è·å–eurekaæœåŠ¡ç«¯ä¸Šæ³¨å†Œçš„æœåŠ¡åˆ—è¡¨</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8001/eureka/</span> <span class="comment"># æŒ‡å®šæ³¨å†Œä¸­å¿ƒåœ°å€</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># å¯ç”¨eurekaå®¢æˆ·ç«¯</span></span><br><span class="line">    <span class="attr">registry-fetch-interval-seconds:</span> <span class="number">30</span> <span class="comment">#å®šä¹‰å»eurekaæœåŠ¡ç«¯è·å–æœåŠ¡åˆ—è¡¨çš„æ—¶é—´é—´éš”</span></span><br><span class="line">  <span class="attr">instance:</span> <span class="comment">#eurekaå®¢æˆ·ç«¯å®ä¾‹é…ç½®</span></span><br><span class="line">    <span class="attr">lease-renewal-interval-in-seconds:</span> <span class="number">30</span> <span class="comment">#å®šä¹‰æœåŠ¡å¤šä¹…å»æ³¨å†Œä¸­å¿ƒç»­çº¦</span></span><br><span class="line">    <span class="attr">lease-expiration-duration-in-seconds:</span> <span class="number">90</span> <span class="comment">#å®šä¹‰æœåŠ¡å¤šä¹…ä¸å»ç»­çº¦è®¤ä¸ºæœåŠ¡å¤±æ•ˆ</span></span><br><span class="line">    <span class="attr">metadata-map:</span></span><br><span class="line">      <span class="attr">zone:</span> <span class="string">guangdong</span> <span class="comment">#æ‰€åœ¨åŒºåŸŸ</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">localhost</span> <span class="comment">#æœåŠ¡ä¸»æœºåç§°</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">false</span> <span class="comment">#æ˜¯å¦ä¼˜å…ˆä½¿ç”¨ipæ¥ä½œä¸ºä¸»æœºå</span></span><br><span class="line">  <span class="attr">server:</span> <span class="comment">#eurekaæœåŠ¡ç«¯é…ç½®</span></span><br><span class="line">    <span class="attr">enable-self-preservation:</span> <span class="literal">false</span> <span class="comment">#å…³é—­eurekaæœåŠ¡ç«¯çš„ä¿æŠ¤æœºåˆ¶</span></span><br></pre></td></tr></table></figure><p>äºæ˜¯åœ¨eureka-serverçš„ymlä¸­åŠ ä¸Š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span> <span class="comment">#eurekaæœåŠ¡ç«¯é…ç½®</span></span><br><span class="line">    <span class="attr">enable-self-preservation:</span> <span class="literal">true</span> <span class="comment">#å…³é—­eurekaæœåŠ¡ç«¯çš„ä¿æŠ¤æœºåˆ¶</span></span><br></pre></td></tr></table></figure><p>å°±æ²¡æœ‰<strong>EMERGENCY!</strong> äº†</p><h2 id="å…³äºeureka-security-serverçš„ä¾èµ–"><a href="#å…³äºeureka-security-serverçš„ä¾èµ–" class="headerlink" title="å…³äºeureka-security-serverçš„ä¾èµ–"></a>å…³äºeureka-security-serverçš„ä¾èµ–</h2><p>å‘ç°æ•™ç¨‹é‡Œå†™çš„ä¾èµ–æ˜¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æºç é‡Œç”¨çš„ä¾èµ–æ˜¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è‡ªå·±åˆšæ‰å¯åŠ¨æˆåŠŸçš„æ˜¯spring-cloud-starter-security</p><p>æ”¹æˆspring-boot-starter-securityè¯•äº†ä¸€ä¸‹ä¹ŸæˆåŠŸäº†</p><h2 id="é—®é¢˜è§£å†³æ€»ç»“"><a href="#é—®é¢˜è§£å†³æ€»ç»“" class="headerlink" title="é—®é¢˜è§£å†³æ€»ç»“"></a>é—®é¢˜è§£å†³æ€»ç»“</h2><ol><li>ç”¨Spring Cloud Securityæ¨¡å—ï¼Œä¸æ˜¯Spring Securityæ¨¡å—</li><li>EurekaSecurityServerApplicationè¦è®°å¾—åŠ @EnableEurekaServer</li><li>ç”¨æŒ‡å®šçš„ymlï¼ˆapplication-XXX.ymlï¼‰å¯åŠ¨Spring Bootï¼Œåœ¨Edit Configurationsä¸­å¤åˆ¶ä¸€ä¸ªåŸConfigurationï¼ŒActive profileså¡«æŒ‡å®šymlæ–‡ä»¶ååŠéƒ¨åˆ†ï¼ˆXXXï¼‰ï¼Œè¿è¡Œè¿™ä¸ªConfiguration</li></ol><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><img src="/images/2020/screencapture2020-04-09 PM4.44.05.jpg">]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/ThinkWon/article/details/103726655&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://blog.csdn.net/Thin
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="springcloud" scheme="http://yoursite.com/tags/springcloud/"/>
    
  </entry>
  
  <entry>
    <title>åˆ·é¢˜é˜¶æ®µä¸€å®Œå·¥çºªå¿µï¼</title>
    <link href="http://yoursite.com/2020/04/08/memo/"/>
    <id>http://yoursite.com/2020/04/08/memo/</id>
    <published>2020-04-08T12:30:32.000Z</published>
    <updated>2020-04-09T07:35:58.567Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸ª<a href="https://github.com/CyC2018/CS-Notes/blob/master/notes/Leetcode%20%E9%A2%98%E8%A7%A3%20-%20%E7%9B%AE%E5%BD%95.md" title="" target="">ç›®å½•</a>ç»ˆäºå®Œå·¥äº†</p><p>LeetCodeä»å»å¹´å‡†å¤‡ç®—æ³•è€ƒè¯•å¼€å§‹åˆ·</p><p>åˆ°ç°åœ¨åˆšå¥½2222ä¸ªç¡¬å¸ğŸ˜ƒ</p><p>æ£’çƒå¸½ï¼å†²é¸­ï¼</p><img src="/images/2020/screencapture2020-04-08 PM7.47.28.jpg" width=300><p>3æœˆæ¯æ—¥1é¢˜å¿˜äº†1å¤© å°±é‚£ä¹ˆ å¹²å¹²å‡€å‡€ æ— å¿§æ— è™‘çš„ å¿˜äº†ğŸ˜­</p><p>4æœˆæäº†å¼ æ—¥å†è´´åœ¨åºŠå¯¹é¢çš„ç™½æ¿ä¸Š ä½†æ„¿â€¦</p><hr><p>æœ€è¿‘å‘¨èµ›è¿˜ä¸å¦‚åˆšå¼€å§‹åšå¾—å¥½</p><p>æœ‰ä¸€ä¸ä¸å‡„å‡‰</p><p>å¸Œæœ›çƒ§æ‰çš„è„‘ç»†èƒç»™æ–°çš„ç¥ç»å›è·¯æä¾›å…»æ–™äº†å§</p><img src="/images/2020/img-91ef518e959886326719c5d07a824772.jpg" width=400><p>æœ€è¿‘çœ‹åˆ°è¿™å¼ å›¾è§‰å¾—è²Œä¼¼å¾ˆæœ‰é“ç†</p><p>æ”¾åœ¨è¿™é‡Œ</p><p>ä¸çŸ¥é“ä»¥åä¼šä¸ä¼šæœ‰ä»€ä¹ˆæ„Ÿå—</p><hr><p>æœ€åæ˜¯ä¸€å¤§æ¡çœ‹æ¿çš„å®Œå·¥è®°å½•</p><img src="/images/2020/Apr-09-2020 15-35-04.gif"><p>å¿«ä¹</p><p>å®…å®¶è¿åŠ¨è®¡åˆ’è¿›è¡Œä¸­</p><p>ä¸¤ä¸ªæœˆæ²¡å‡ºé—¨è¿˜è½»äº†ä¹Ÿæ˜¯å¾ˆéœ‡æƒŠ</p><p>ç»§ç»­æ‰“å¡ï¼å˜¿å’»ï¼</p><p>ä¹Ÿè®¸å“ªå¤©å°±èƒ½åŠˆå‰äº†å‘¢</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;è¿™ä¸ª&lt;a href=&quot;https://github.com/CyC2018/CS-Notes/blob/master/notes/Leetcode%20%E9%A2%98%E8%A7%A3%20-%20%E7%9B%AE%E5%BD%95.md&quot; title=&quot;&quot; targ
      
    
    </summary>
    
    
      <category term="Memo" scheme="http://yoursite.com/categories/Memo/"/>
    
    
      <category term="algorithm" scheme="http://yoursite.com/tags/algorithm/"/>
    
  </entry>
  
  <entry>
    <title>SpringMVCç¬”è®°07 SSMæ•´åˆ</title>
    <link href="http://yoursite.com/2020/04/07/note-springmvc-07/"/>
    <id>http://yoursite.com/2020/04/07/note-springmvc-07/</id>
    <published>2020-04-07T02:27:30.000Z</published>
    <updated>2020-04-07T04:57:24.700Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.bilibili.com/video/BV1Sb411s7qa" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Sb411s7qa</a></p><p>P46~54</p></blockquote><p><strong>ä¸‰å±‚æ¶æ„</strong></p><img src="/images/2020/screencapture2020-04-07 AM10.29.11.jpg"><p>å…ˆä¿è¯æ¯ä¸ªæ¡†æ¶èƒ½å•ç‹¬è¿è¡Œ</p><p>ç„¶åç”¨Springæ•´åˆå¦å¤–2ä¸ª</p><h1 id="å‡†å¤‡æ•°æ®åº“"><a href="#å‡†å¤‡æ•°æ®åº“" class="headerlink" title="å‡†å¤‡æ•°æ®åº“"></a>å‡†å¤‡æ•°æ®åº“</h1><p>accountè¡¨ï¼Œä»¥å‰å»ºè¿‡äº†ï¼Œç»§ç»­ç”¨</p><img src="/images/2020/screencapture2020-04-07 AM10.34.27.jpg" width=300><h1 id="æ­å»ºç¯å¢ƒ"><a href="#æ­å»ºç¯å¢ƒ" class="headerlink" title="æ­å»ºç¯å¢ƒ"></a>æ­å»ºç¯å¢ƒ</h1><p>åˆ›å»ºMavenå·¥ç¨‹ï¼Œé€‰webapp</p><p>è§£å†³åˆ›å»ºé¡¹ç›®è¿‡æ…¢ï¼ŒåŠ ä¸€å¯¹archetypeCatalogï¼šinternal</p><h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><p>ç‰ˆæœ¬é”å®š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slf4j.version</span>&gt;</span>1.6.6<span class="tag">&lt;/<span class="name">slf4j.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">log4j.version</span>&gt;</span>1.2.12<span class="tag">&lt;/<span class="name">log4j.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mybatis.version</span>&gt;</span>3.4.5<span class="tag">&lt;/<span class="name">mybatis.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åŠ ä¾èµ–</p><img src="/images/2020/screencapture2020-04-07 AM10.54.56.jpg" width=400><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- spring IOC --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- spring AOP --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- JdbcTemplate --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- äº‹åŠ¡ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- æµ‹è¯• --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- mysqlé©±åŠ¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- è¿æ¥æ±  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- spring MVC --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- servlet --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- jspæ ‡ç­¾ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- log --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- mybatis --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºç›®å½•"><a href="#åˆ›å»ºç›®å½•" class="headerlink" title="åˆ›å»ºç›®å½•"></a>åˆ›å»ºç›®å½•</h2><p>javaå’Œresourcesæ–‡ä»¶å¤¹</p><img src="/images/2020/screencapture2020-04-07 AM10.57.25.jpg" width=300><p>ç”¨åˆ°çš„ç±»</p><img src="/images/2020/screencapture2020-04-07 AM11.07.04.jpg" width=300><p>Accountä¸‰ä¸ªå±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> Double money;</span><br></pre></td></tr></table></figure><p>åš2ä¸ªæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">(Account account)</span></span>;</span><br></pre></td></tr></table></figure><h1 id="Springæ¡†æ¶"><a href="#Springæ¡†æ¶" class="headerlink" title="Springæ¡†æ¶"></a>Springæ¡†æ¶</h1><h2 id="é…ç½®-applicationContext-xml"><a href="#é…ç½®-applicationContext-xml" class="headerlink" title="é…ç½® applicationContext.xml"></a>é…ç½® applicationContext.xml</h2><p>resourcesä¸‹æ–°å»ºapplicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/tx/spring-tx.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼€å¯æ³¨è§£çš„æ‰«æï¼Œå¸Œæœ›å¤„ç†serviceå’Œdaoï¼Œcontrollerä¸éœ€è¦Springæ¡†æ¶å»å¤„ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.coconutnut"</span> &gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®å“ªäº›æ³¨è§£ä¸æ‰«æ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>controlleræ˜¯è¡¨ç°å±‚çš„ï¼ŒSpringæ¡†æ¶ä¸ç®¡</p><h2 id="åŠ æ³¨è§£"><a href="#åŠ æ³¨è§£" class="headerlink" title="åŠ æ³¨è§£"></a>åŠ æ³¨è§£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ä¸šåŠ¡å±‚ï¼šæŸ¥è¯¢æ‰€æœ‰"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ä¸šåŠ¡å±‚ï¼šä¿å­˜è´¦æˆ·"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>ç”¨junitå•å…ƒæµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSpring</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"classpath:applicationContext.xml"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–å¯¹è±¡</span></span><br><span class="line">        IAccountService as = (IAccountService) ac.getBean(<span class="string">"accountService"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">        as.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="/images/2020/screencapture2020-04-07 AM11.21.45.jpg"><p>WARNINGè¯´æ²¡æœ‰log4jçš„é…ç½®æ–‡ä»¶</p><p>å¤åˆ¶ä¸€ä¸ªlog4j.propertiesåˆ°resourcesç›®å½•ä¸‹å³å¯</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Set root category priority to INFO and its only appender to CONSOLE.</span></span><br><span class="line"><span class="comment">#log4j.rootCategory=INFO, CONSOLE            debug   info   warn error fatal</span></span><br><span class="line"><span class="meta">log4j.rootCategory</span>=<span class="string">info, CONSOLE, LOGFILE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the enterprise logger category to FATAL and its only appender to CONSOLE.</span></span><br><span class="line"><span class="meta">log4j.logger.org.apache.axis.enterprise</span>=<span class="string">FATAL, CONSOLE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CONSOLE is set to be a ConsoleAppender using a PatternLayout.</span></span><br><span class="line"><span class="meta">log4j.appender.CONSOLE</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.CONSOLE.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.CONSOLE.layout.ConversionPattern</span>=<span class="string">%d&#123;ISO8601&#125; %-6r [%15.15t] %-5p %30.30c %x - %m\n</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># LOGFILE is set to be a File appender using a PatternLayout.</span></span><br><span class="line"><span class="meta">log4j.appender.LOGFILE</span>=<span class="string">org.apache.log4j.FileAppender</span></span><br><span class="line"><span class="meta">log4j.appender.LOGFILE.File</span>=<span class="string">/Users/coconutnut/TREE/Midgard/Idea/SSM/axis.log</span></span><br><span class="line"><span class="meta">log4j.appender.LOGFILE.Append</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">log4j.appender.LOGFILE.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.LOGFILE.layout.ConversionPattern</span>=<span class="string">%d&#123;ISO8601&#125; %-6r [%15.15t] %-5p %30.30c %x - %m\n</span></span><br></pre></td></tr></table></figure><p>è¦æ”¹ä¸€ä¸‹è·¯å¾„</p><h1 id="SpringMVCæ¡†æ¶"><a href="#SpringMVCæ¡†æ¶" class="headerlink" title="SpringMVCæ¡†æ¶"></a>SpringMVCæ¡†æ¶</h1><h2 id="é…ç½®-web-xml"><a href="#é…ç½®-web-xml" class="headerlink" title="é…ç½® web.xml"></a>é…ç½® web.xml</h2><p>WEB-INFæ–‡ä»¶å¤¹ä¸‹çš„web.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- é…ç½®å‰ç«¯æ§åˆ¶å™¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åŠ è½½springmvc.xmlé…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨æœåŠ¡å™¨ï¼Œåˆ›å»ºè¯¥servlet --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- è§£å†³ä¸­æ–‡ä¹±ç çš„è¿‡æ»¤å™¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="é…ç½®-springmvc-xml"><a href="#é…ç½®-springmvc-xml" class="headerlink" title="é…ç½® springmvc.xml"></a>é…ç½® springmvc.xml</h2><p>resourcesæ–‡ä»¶å¤¹ä¸‹æ–°å»ºspringmvc.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span> <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼€å¯æ³¨è§£æ‰«æï¼Œåªæ‰«æControlleræ³¨è§£ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.coconutnut"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®çš„è§†å›¾è§£æå™¨å¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"internalResourceViewResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/pages/"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--è¿‡æ»¤é™æ€èµ„æº--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/css/"</span> <span class="attr">mapping</span>=<span class="string">"/css/**"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/images/"</span> <span class="attr">mapping</span>=<span class="string">"/images/**"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/js/"</span> <span class="attr">mapping</span>=<span class="string">"/js/**"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å¼€å¯SpringMVCæ³¨è§£çš„æ”¯æŒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="é¡µé¢"><a href="#é¡µé¢" class="headerlink" title="é¡µé¢"></a>é¡µé¢</h2><p>index.jspä¸­åŠ ä¸€ä¸ªè¶…é“¾æ¥</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;a href="account/findAll"&gt;æµ‹è¯•&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>WEB-INFä¸­æ–°å»ºpagesæ–‡ä»¶å¤¹ï¼Œæ–°å»ºlist.jsp</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;æŸ¥è¯¢æ‰€æœ‰çš„è´¦æˆ·ä¿¡æ¯&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="æ§åˆ¶å™¨"><a href="#æ§åˆ¶å™¨" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/account"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"è¡¨ç°å±‚ï¼šæŸ¥è¯¢æ‰€æœ‰"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"TODO"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><img src="/images/2020/screencapture2020-04-07 AM11.40.21.jpg"><h2 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><img src="/images/2020/screencapture2020-04-07 AM11.41.33.jpg"><img src="/images/2020/screencapture2020-04-07 AM11.41.38.jpg"><h1 id="Springæ•´åˆSpringMVC"><a href="#Springæ•´åˆSpringMVC" class="headerlink" title="Springæ•´åˆSpringMVC"></a>Springæ•´åˆSpringMVC</h1><p>ç›®æ ‡ï¼šControllerä¸­è°ƒç”¨ä¸šåŠ¡å±‚æ–¹æ³•</p><p>æ–¹æ³•ï¼šè¦æŠŠServiceæ³¨å…¥åˆ°Controllerä¸­</p><p>é—®é¢˜ï¼šweb.xmlä¸­é…ç½®äº†springmvc.xmlï¼Œspringmvc.xmlä¸­é…ç½®äº†å¯¹Controllerçš„æ‰«æï¼Œå…¶å®ƒæ‰«æçš„é…ç½®åœ¨applicationContext.xmlä¸­ï¼Œè€Œè¿™ä¸ªæ–‡ä»¶å§‹ç»ˆæ²¡æœ‰è¢«åŠ è½½è¿‡</p><p>è§£å†³ï¼šå¯åŠ¨tomcatæœåŠ¡å™¨æ—¶ï¼ŒåŠ è½½Springçš„é…ç½®æ–‡ä»¶applicationContext.xml</p><p>ServletContextå¯¹è±¡ç”Ÿå‘½å‘¨æœŸå’ŒæœåŠ¡å™¨ç›¸åŒï¼Œå¯ä»¥ç”¨ç›‘å¬å™¨ç›‘å¬å…¶åˆ›å»ºå’Œé”€æ¯</p><p>äºæ˜¯ï¼Œå¯ä»¥åœ¨web.xmlä¸­ç”¨ç›‘å¬å™¨åŠ è½½Springçš„é…ç½®æ–‡ä»¶</p><p>ç›‘å¬å™¨æ˜¯spring-webæä¾›çš„</p><p>å®ƒé»˜è®¤åªåŠ è½½WEB-INFç›®å½•ä¸‹çš„applicationContext.xmlé…ç½®æ–‡ä»¶</p><p>å¯ä»¥å¤åˆ¶ä¸€ä»½ä¸¢åˆ°WEB-INFç›®å½•ï¼Œæˆ–è€…æ‰‹åŠ¨è®¾ç½®è·¯å¾„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®Springçš„ç›‘å¬å™¨ï¼Œé»˜è®¤åªåŠ è½½WEB-INFç›®å½•ä¸‹çš„applicationContext.xmlé…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è®¾ç½®é…ç½®æ–‡ä»¶çš„è·¯å¾„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯åŠ¨æœåŠ¡å™¨æ—¶ï¼ŒSpringçš„é…ç½®æ–‡ä»¶ä¹ŸåŠ è½½äº†</p><p>Serviceå’ŒControlleréƒ½æ”¾åˆ°å®¹å™¨ä¸­äº†</p><p>äºæ˜¯å¯ä»¥åœ¨AccountControllerä¸­è¿›è¡Œä¾èµ–æ³¨å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/account"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountService accountService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"è¡¨ç°å±‚ï¼šæŸ¥è¯¢æ‰€æœ‰"</span>);</span><br><span class="line">        accountService.findAll();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"list"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•-2"><a href="#æµ‹è¯•-2" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>ç‚¹å‡»æµè§ˆå™¨ä¸­æµ‹è¯•æŒ‰é’®</p><img src="/images/2020/screencapture2020-04-07 PM12.00.15.jpg"><p>æˆåŠŸ</p><h1 id="MyBatisæ¡†æ¶"><a href="#MyBatisæ¡†æ¶" class="headerlink" title="MyBatisæ¡†æ¶"></a>MyBatisæ¡†æ¶</h1><h2 id="åŠ æ³¨è§£-1"><a href="#åŠ æ³¨è§£-1" class="headerlink" title="åŠ æ³¨è§£"></a>åŠ æ³¨è§£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from account"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert</span>(<span class="string">"insert into account (name,money) values (#&#123;name&#125;,#&#123;money&#125;)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">(Account account)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é…ç½®-sqlMapConfig-xml"><a href="#é…ç½®-sqlMapConfig-xml" class="headerlink" title="é…ç½® sqlMapConfig.xml"></a>é…ç½® sqlMapConfig.xml</h2><p>åœ¨resourcesä¸­æ–°å»ºsqlMapConfig.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®ç¯å¢ƒ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/groot?characterEncoding=utf8"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"iamgroot"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥æ˜ å°„é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.coconutnut.dao"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•-3"><a href="#æµ‹è¯•-3" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMyBatis</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">        InputStream in = Resources.getResourceAsStream(<span class="string">"sqlMapConfig.xml"</span>);</span><br><span class="line">        <span class="comment">// åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">        SqlSessionFactory factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);</span><br><span class="line">        <span class="comment">// åˆ›å»ºSqlSessionå¯¹è±¡</span></span><br><span class="line">        SqlSession session = factory.openSession();</span><br><span class="line">        <span class="comment">// è·å–åˆ°ä»£ç†å¯¹è±¡</span></span><br><span class="line">        IAccountDao dao = session.getMapper(IAccountDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢æ‰€æœ‰æ•°æ®</span></span><br><span class="line">        List&lt;Account&gt; list = dao.findAll();</span><br><span class="line">        <span class="keyword">for</span>(Account account : list)&#123;</span><br><span class="line">            System.out.println(account);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        session.close();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setName(<span class="string">"ç†Šå¤§"</span>);</span><br><span class="line">        account.setMoney(<span class="number">400</span>d);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">        InputStream in = Resources.getResourceAsStream(<span class="string">"sqlMapConfig.xml"</span>);</span><br><span class="line">        <span class="comment">// åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">        SqlSessionFactory factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);</span><br><span class="line">        <span class="comment">// åˆ›å»ºSqlSessionå¯¹è±¡</span></span><br><span class="line">        SqlSession session = factory.openSession();</span><br><span class="line">        <span class="comment">// è·å–åˆ°ä»£ç†å¯¹è±¡</span></span><br><span class="line">        IAccountDao dao = session.getMapper(IAccountDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¿å­˜</span></span><br><span class="line">        dao.saveAccount(account);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æäº¤äº‹åŠ¡</span></span><br><span class="line">        session.commit();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">        session.close();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•æŸ¥è¯¢</p><img src="/images/2020/screencapture2020-04-07 PM12.12.50.jpg"><p>æµ‹è¯•ä¿å­˜</p><img src="/images/2020/screencapture2020-04-07 PM12.14.12.jpg"><h1 id="Springæ•´åˆMyBatis"><a href="#Springæ•´åˆMyBatis" class="headerlink" title="Springæ•´åˆMyBatis"></a>Springæ•´åˆMyBatis</h1><p>ç›®æ ‡ï¼šServiceèƒ½è°ƒç”¨Dao</p><p>æ­¤æ—¶Serviceå·²ç»åœ¨å®¹å™¨ä¸­äº†ï¼Œéœ€è¦æŠŠç”Ÿæˆçš„Daoçš„ä»£ç†å¯¹è±¡ä¹Ÿå­˜åˆ°å®¹å™¨ä¸­</p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>åœ¨Springçš„é…ç½®æ–‡ä»¶applicationContext.xmlä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Springæ•´åˆMyBatisæ¡†æ¶ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®è¿æ¥æ±  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/groot?characterEncoding=utf8"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"iamgroot"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®SqlSessionFactoryå·¥å‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®AccountDaoæ¥å£æ‰€åœ¨åŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"mapperScanner"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.coconutnut.dao"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™æ®µé…ç½®ï¼ŒsqlMapConfig.xmlå…¶å®å°±ä¸éœ€è¦äº†ï¼Œå¯ä»¥åˆ é™¤</p><h2 id="åŠ æ³¨è§£-2"><a href="#åŠ æ³¨è§£-2" class="headerlink" title="åŠ æ³¨è§£"></a>åŠ æ³¨è§£</h2><p>åœ¨AccountDaoä¸ŠåŠ @Repositoryæ³¨è§£</p><p>åœ¨AccountServiceImplä¸­æ³¨å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ä¸šåŠ¡å±‚ï¼šæŸ¥è¯¢æ‰€æœ‰"</span>);</span><br><span class="line">        <span class="keyword">return</span> accountDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ä¸šåŠ¡å±‚ï¼šä¿å­˜è´¦æˆ·"</span>);</span><br><span class="line">        accountDao.saveAccount(account);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨AccountControllerä¸­æŠŠæŸ¥å‡ºçš„æ•°æ®å­˜å…¥Model</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/account"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAccountService accountService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findAll</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"è¡¨ç°å±‚ï¼šæŸ¥è¯¢æ‰€æœ‰"</span>);</span><br><span class="line">        List&lt;Account&gt; list = accountService.findAll();</span><br><span class="line">        model.addAttribute(<span class="string">"list"</span>,list);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"list"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é¡µé¢-1"><a href="#é¡µé¢-1" class="headerlink" title="é¡µé¢"></a>é¡µé¢</h2><p>åœ¨list.jspä¸­æ‰“å°å‡ºæ¥</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h3&gt;æŸ¥è¯¢æ‰€æœ‰çš„å¸æˆ·&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">&lt;c:forEach items=<span class="string">"$&#123;list&#125;"</span> <span class="keyword">var</span>=<span class="string">"account"</span>&gt;</span><br><span class="line">    $&#123;account.name&#125;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•æŸ¥è¯¢"><a href="#æµ‹è¯•æŸ¥è¯¢" class="headerlink" title="æµ‹è¯•æŸ¥è¯¢"></a>æµ‹è¯•æŸ¥è¯¢</h2><p>å‡ºäº†ä¸€ä¸ªå¼‚å¸¸</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2020-04-07 12:31:59,102 36291  [r$PoolThread-#0] WARN  resourcepool.BasicResourcePool  - com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@64fe7a60 -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception: </span><br><span class="line">java.sql.SQLException: Unknown system variable &#39;tx_isolation&#39;</span><br><span class="line">at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)</span><br><span class="line">at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢å‘ç°æ˜¯mysql-connector-javaç‰ˆæœ¬å¤ªä½å¯¼è‡´</p><p>åœ¨pom.xmlä¸­å°†</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ”¹ä¸º</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.48<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å†è¯•</p><img src="/images/2020/screencapture2020-04-07 PM12.46.36.jpg"><p>æˆåŠŸ</p><h2 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h2><p>ä¿å­˜æ–¹æ³•è¿˜éœ€ç®¡ç†äº‹åŠ¡</p><p>Springä¸­è¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œåœ¨applicationContext.xmlä¸­å¢åŠ </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®Springæ¡†æ¶å£°æ˜å¼äº‹åŠ¡ç®¡ç†--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é…ç½®äº‹åŠ¡ç®¡ç†å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--é…ç½®äº‹åŠ¡é€šçŸ¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"find*"</span> <span class="attr">read-only</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span> <span class="attr">isolation</span>=<span class="string">"DEFAULT"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--é…ç½®AOPå¢å¼º--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut</span>=<span class="string">"execution(* com.coconutnut.service.impl.*ServiceImpl.*(..))"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="é¡µé¢-2"><a href="#é¡µé¢-2" class="headerlink" title="é¡µé¢"></a>é¡µé¢</h2><p>åœ¨index.jspä¸­æ–°å¢è¡¨å•</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;a href="account/findAll"&gt;æµ‹è¯•æŸ¥è¯¢&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;æµ‹è¯•ä¿å­˜&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">    &lt;form action=<span class="string">"account/save"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">        å§“åï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"name"</span> /&gt;&lt;br/&gt;</span><br><span class="line">        é‡‘é¢ï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"money"</span> /&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"ä¿å­˜"</span>/&gt;&lt;br/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="æ§åˆ¶å™¨-1"><a href="#æ§åˆ¶å™¨-1" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h2><p>å¢åŠ saveæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/save"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(Account account, HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">  accountService.saveAccount(account);</span><br><span class="line">  response.sendRedirect(request.getContextPath()+<span class="string">"/account/findAll"</span>);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å­˜å®Œé‡å®šå‘åˆ°listé¡µé¢</p><h2 id="æµ‹è¯•ä¿å­˜"><a href="#æµ‹è¯•ä¿å­˜" class="headerlink" title="æµ‹è¯•ä¿å­˜"></a>æµ‹è¯•ä¿å­˜</h2><img src="/images/2020/screencapture2020-04-07 PM12.54.47.jpg"><p>ç‚¹å‡»ä¿å­˜</p><img src="/images/2020/screencapture2020-04-07 PM12.54.54.jpg"><p>æˆåŠŸ</p><h1 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h1><img src="/images/2020/screencapture2020-04-07 PM12.56.33.jpg" width=300>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1Sb411s7qa&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/BV1Sb411
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="springmvc" scheme="http://yoursite.com/tags/springmvc/"/>
    
  </entry>
  
  <entry>
    <title>SpringMVCç¬”è®°06 å¼‚å¸¸å¤„ç†ä¸æ‹¦æˆªå™¨</title>
    <link href="http://yoursite.com/2020/04/07/note-springmvc-06/"/>
    <id>http://yoursite.com/2020/04/07/note-springmvc-06/</id>
    <published>2020-04-07T01:49:54.000Z</published>
    <updated>2020-04-07T02:27:11.387Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.bilibili.com/video/BV1Sb411s7qa" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Sb411s7qa</a></p><p>P39~45</p></blockquote><h1 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h1><img src="/images/2020/screencapture2020-04-07 AM9.52.33.jpg"><p>å¦‚æœä»€ä¹ˆéƒ½ä¸åšï¼Œäº§ç”Ÿå¼‚å¸¸æ—¶ï¼ˆæ¨¡æ‹Ÿå¯ä»¥é™¤0ï¼‰ï¼Œä¼šå‡ºç°500 Internal Server Error</p><p>æ•™åŠ¡ç³»ç»Ÿå°±æ˜¯è¿™æ ·ğŸ™ƒ</p><p><strong>è§£å†³æ­¥éª¤</strong></p><ol><li>ç¼–å†™è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼ˆç”¨ä½œæç¤ºä¿¡æ¯ï¼‰</li><li>ç¼–å†™å¼‚å¸¸å¤„ç†å™¨</li><li>é…ç½®å¼‚å¸¸å¤„ç†å™¨ï¼ˆè·³è½¬åˆ°æç¤ºé¡µé¢ï¼‰</li></ol><h2 id="è‡ªå®šä¹‰å¼‚å¸¸ç±»"><a href="#è‡ªå®šä¹‰å¼‚å¸¸ç±»" class="headerlink" title="è‡ªå®šä¹‰å¼‚å¸¸ç±»"></a>è‡ªå®šä¹‰å¼‚å¸¸ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å­˜å‚¨æç¤ºä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get set constructor ...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ§åˆ¶å™¨"><a href="#æ§åˆ¶å™¨" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h2><p>æ•è·å¼‚å¸¸ï¼ŒæŠ›è‡ªå®šä¹‰å¼‚å¸¸</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testException"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testException</span><span class="params">()</span> <span class="keyword">throws</span> SysException</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// æ¨¡æ‹Ÿå¼‚å¸¸</span></span><br><span class="line">            <span class="keyword">int</span> a = <span class="number">10</span>/<span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="comment">// æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸ä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> SysException(<span class="string">"æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·å‡ºç°é”™è¯¯äº†..."</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="å¼‚å¸¸å¤„ç†å™¨"><a href="#å¼‚å¸¸å¤„ç†å™¨" class="headerlink" title="å¼‚å¸¸å¤„ç†å™¨"></a>å¼‚å¸¸å¤„ç†å™¨</h2><p>å®ç°HandlerExceptionResolveræ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysExceptionResolver</span> <span class="keyword">implements</span> <span class="title">HandlerExceptionResolver</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†å¼‚å¸¸çš„é€»è¾‘</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveException</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–åˆ°å¼‚å¸¸å¯¹è±¡</span></span><br><span class="line">        SysException e = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(ex <span class="keyword">instanceof</span> SysException)&#123;</span><br><span class="line">            e = (SysException)ex;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            e = <span class="keyword">new</span> SysException(<span class="string">"ç³»ç»Ÿæ­£åœ¨ç»´æŠ¤...."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ›å»ºModelAndViewå¯¹è±¡</span></span><br><span class="line">        ModelAndView mv = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        mv.addObject(<span class="string">"errorMsg"</span>,e.getMessage());</span><br><span class="line">        mv.setViewName(<span class="string">"error"</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é…ç½®å¼‚å¸¸å¤„ç†å™¨"><a href="#é…ç½®å¼‚å¸¸å¤„ç†å™¨" class="headerlink" title="é…ç½®å¼‚å¸¸å¤„ç†å™¨"></a>é…ç½®å¼‚å¸¸å¤„ç†å™¨</h2><p>åœ¨springmvc.xmlä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®å¼‚å¸¸å¤„ç†å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sysExceptionResolver"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.exception.SysExceptionResolver"</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="é”™è¯¯æç¤ºé¡µé¢"><a href="#é”™è¯¯æç¤ºé¡µé¢" class="headerlink" title="é”™è¯¯æç¤ºé¡µé¢"></a>é”™è¯¯æç¤ºé¡µé¢</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    $&#123;errorMsg&#125;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h1 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h1><p>SpringMVCçš„æ‹¦æˆªå™¨ç”¨äºå¯¹å¤„ç†å™¨è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ï¼Œç±»ä¼¼Servletçš„è¿‡æ»¤å™¨ Filter</p><p>æ˜¯AOPçš„ä½“ç°</p><p><strong>æ‹¦æˆªå™¨é“¾</strong></p><p>å°†æ‹¦æˆªå™¨æŒ‰ä¸€å®šçš„é¡ºåºè”ç»“æˆä¸€æ¡é“¾ï¼ŒæŒ‰é¡ºåºè°ƒç”¨</p><p><strong>ä¸è¿‡æ»¤å™¨çš„åŒºåˆ«</strong></p><p>è¿‡æ»¤å™¨æ˜¯Servletè§„èŒƒä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä»»ä½•java webå·¥ç¨‹éƒ½å¯ä»¥ç”¨ï¼›æ‹¦æˆªå™¨æ˜¯Spring MVCæ¡†æ¶çš„</p><p>è¿‡æ»¤å™¨åœ¨url-patternä¸­é…ç½®äº†â€/*â€åï¼Œå¯ä»¥å¯¹æ‰€æœ‰è¦è®¿é—®çš„èµ„æºæ‹¦æˆªï¼›æ‹¦æˆªå™¨åªä¼šæ‹¦æˆªè®¿é—®çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œä¸ä¼šæ‹¦æˆªjspã€htmlç­‰</p><p><strong>ä½¿ç”¨æ­¥éª¤</strong></p><ol><li>ç¼–å†™æ‹¦æˆªå™¨ï¼Œå®ç°HandlerInterceptoræ¥å£</li><li>é…ç½®æ‹¦æˆªå™¨</li></ol><h2 id="æ§åˆ¶å™¨-1"><a href="#æ§åˆ¶å™¨-1" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/testInterceptor"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testInterceptor</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"testInterceptoræ‰§è¡Œäº†..."</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰æ‹¦æˆªå™¨"><a href="#è‡ªå®šä¹‰æ‹¦æˆªå™¨" class="headerlink" title="è‡ªå®šä¹‰æ‹¦æˆªå™¨"></a>è‡ªå®šä¹‰æ‹¦æˆªå™¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor1</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é¢„å¤„ç†ï¼Œcontrolleræ–¹æ³•æ‰§è¡Œå‰</span></span><br><span class="line">  <span class="comment">// return true æ”¾è¡Œï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ‰§è¡Œcontrollerä¸­çš„æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// return false ä¸æ”¾è¡Œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"MyInterceptor1æ‰§è¡Œäº†...å‰"</span>);</span><br><span class="line">      <span class="comment">// ä¹Ÿå¯ä»¥è¯·æ±‚è½¬å‘</span></span><br><span class="line">        <span class="comment">// request.getRequestDispatcher("/WEB-INF/pages/error.jsp").forward(request,response);</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åå¤„ç†æ–¹æ³•ï¼Œcontrolleræ–¹æ³•æ‰§è¡Œåï¼Œsuccess.jspæ‰§è¡Œä¹‹å‰</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"MyInterceptor1æ‰§è¡Œäº†...å"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// success.jspé¡µé¢æ‰§è¡Œåï¼Œè¯¥æ–¹æ³•ä¼šæ‰§è¡Œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"MyInterceptor1æ‰§è¡Œäº†...æœ€å"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>springmvc.xmlä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®æ‹¦æˆªå™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¦æ‹¦æˆªçš„å…·ä½“çš„æ–¹æ³•--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/user/*"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä¸è¦æ‹¦æˆªçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">            &lt;mvc:exclude-mapping path=""/&gt; --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®æ‹¦æˆªå™¨å¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"cn.itcast.controller.cn.itcast.interceptor.MyInterceptor1"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¦æ‹¦æˆªçš„æ–¹æ³•å’Œä¸è¦æ‹¦æˆªçš„æ–¹æ³•é…ç½®ä¸€ä¸ªå°±å¯ä»¥äº†</p><p>è¿™æ ·é…ç½®æ‹¦æˆªå™¨åï¼Œæµ‹è¯•è¾“å‡ºä¸º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MyInterceptor1æ‰§è¡Œäº†...å‰</span><br><span class="line">testInterceptoræ‰§è¡Œäº†</span><br><span class="line">MyInterceptor1æ‰§è¡Œäº†...å</span><br><span class="line">success.jspæ‰§è¡Œäº†</span><br><span class="line">MyInterceptor1æ‰§è¡Œäº†...æœ€å</span><br></pre></td></tr></table></figure><h2 id="2ä¸ªæ‹¦æˆªå™¨"><a href="#2ä¸ªæ‹¦æˆªå™¨" class="headerlink" title="2ä¸ªæ‹¦æˆªå™¨"></a>2ä¸ªæ‹¦æˆªå™¨</h2><img src="/images/2020/screencapture2020-04-07 AM10.26.39.jpg"><p>æ‹¦æˆªå™¨ä»£ç å’Œç¬¬ä¸€ä¸ªä¸€æ ·</p><p><strong>é…ç½®</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--é…ç½®æ‹¦æˆªå™¨--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/user/*"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®æ‹¦æˆªå™¨å¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"cn.itcast.controller.cn.itcast.interceptor.MyInterceptor1"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--é…ç½®ç¬¬äºŒä¸ªæ‹¦æˆªå™¨--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ‹¦æˆªæ‰€æœ‰æ–¹æ³•--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®æ‹¦æˆªå™¨å¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"cn.itcast.controller.cn.itcast.interceptor.MyInterceptor2"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MyInterceptor1æ‰§è¡Œäº†...å‰1</span><br><span class="line">MyInterceptor1æ‰§è¡Œäº†...å‰2</span><br><span class="line">testInterceptoræ‰§è¡Œäº†</span><br><span class="line">MyInterceptor1æ‰§è¡Œäº†...å2</span><br><span class="line">MyInterceptor1æ‰§è¡Œäº†...å1</span><br><span class="line">success.jspæ‰§è¡Œäº†</span><br><span class="line">MyInterceptor1æ‰§è¡Œäº†...æœ€å2</span><br><span class="line">MyInterceptor1æ‰§è¡Œäº†...æœ€å1</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1Sb411s7qa&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/BV1Sb411
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="springmvc" scheme="http://yoursite.com/tags/springmvc/"/>
    
  </entry>
  
  <entry>
    <title>Underwelming</title>
    <link href="http://yoursite.com/2020/04/06/excerpt/"/>
    <id>http://yoursite.com/2020/04/06/excerpt/</id>
    <published>2020-04-06T08:03:19.000Z</published>
    <updated>2020-04-08T13:02:42.733Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è½¯ä»¶æœ€å¤§çš„å¥½å¤„å°±æ˜¯è®©ä¸€åˆ‡å˜å¾—ç®€å•ã€‚ä½†æ˜¯ï¼Œåšåˆ°è¿™ä¸€ç‚¹çš„æ–¹æ³•æ˜¯æ­£ç¡®è®¾ç½®é»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯é™åˆ¶ç”¨æˆ·çš„é€‰æ‹©ã€‚</p><p>â€”â€” Paul Grahamã€Šé»‘å®¢ä¸ç”»å®¶ã€‹</p></blockquote><p>ä¸Šæ¬¡çœ‹è¿™æœ¬ä¹¦çš„æ—¶å€™éƒ½æ²¡æœ‰æ³¨æ„åˆ°è¿™å¥è¯</p><p>è¿™æ¬¡è§åˆ°è§†çº¿éƒ½æŒªä¸èµ°äº†</p><p>å¯èƒ½æ˜¯Springåé—ç—‡</p><p>æƒ³èµ·æ›¾ç»æŸæ¬¡å¬åˆ°çš„ä»‹ç»Apple Design Award Winning App</p><p>å…¶ä¸­Pixelmator Photoçš„é­”æ³•æ£’å¯ä»¥ç”¨â€Underwelmingâ€æ¥å½¢å®¹</p><p>ä¸ä»…æ˜¯æ­£ç¡®è®¾ç½®é»˜è®¤å€¼ï¼ŒåŒæ—¶åŠ¨æ€å±•ç¤ºè¯¸å¤šå‚æ•°çš„å˜åŒ–ï¼Œè®©ç”¨æˆ·çœ‹åˆ°å˜åŒ–çš„èµ·å› å’Œç»“æœ</p><blockquote><ul><li><p>Reaveal whatâ€™s behind the Appâ€™s intelligence</p></li><li><p>Allow adjustments</p></li></ul></blockquote><p>è¿™æ¡è§„å¾‹ä¼¼ä¹é€‚ç”¨å¾ˆå¹¿å‘¢</p><p>å”‰ è¿™ä¹ˆçœ‹çš„è¯ä¹‹å‰è‡ªå·±çš„Appä¸ºäº†ç®€åŒ–æ“ä½œè€Œç–¯ç‹‚ç¼©å‡å¯è°ƒèŠ‚çš„å‚æ•°å®åœ¨ä¸å¦¥</p><p>å¼•ä»¥ä¸ºæˆ’</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;è½¯ä»¶æœ€å¤§çš„å¥½å¤„å°±æ˜¯è®©ä¸€åˆ‡å˜å¾—ç®€å•ã€‚ä½†æ˜¯ï¼Œåšåˆ°è¿™ä¸€ç‚¹çš„æ–¹æ³•æ˜¯æ­£ç¡®è®¾ç½®é»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯é™åˆ¶ç”¨æˆ·çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;â€”â€” Paul Grahamã€Šé»‘å®¢ä¸ç”»å®¶ã€‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸Šæ¬¡çœ‹è¿™æœ¬ä¹¦çš„æ—¶å€™éƒ½æ²¡æœ‰æ³¨æ„åˆ°è¿™å¥è¯&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="Memo" scheme="http://yoursite.com/categories/Memo/"/>
    
    
      <category term="excerpt" scheme="http://yoursite.com/tags/excerpt/"/>
    
  </entry>
  
  <entry>
    <title>SpringMVCç¬”è®°05 æ–‡ä»¶ä¸Šä¼ </title>
    <link href="http://yoursite.com/2020/04/06/note-springmvc-05/"/>
    <id>http://yoursite.com/2020/04/06/note-springmvc-05/</id>
    <published>2020-04-06T02:57:20.000Z</published>
    <updated>2020-04-06T03:35:35.936Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.bilibili.com/video/BV1Sb411s7qa" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Sb411s7qa</a></p><p>P33~38</p></blockquote><h1 id="ä¼ ç»Ÿæ–¹å¼"><a href="#ä¼ ç»Ÿæ–¹å¼" class="headerlink" title="ä¼ ç»Ÿæ–¹å¼"></a>ä¼ ç»Ÿæ–¹å¼</h1><p>ä¸Šä¼ çš„æ–‡ä»¶å’Œè®¿é—®çš„åº”ç”¨åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Š</p><h2 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h2><p>ä½¿ç”¨ Commons-fileupload ç»„ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="jspé¡µé¢"><a href="#jspé¡µé¢" class="headerlink" title="jspé¡µé¢"></a>jspé¡µé¢</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"/user/fileupload1"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">  é€‰æ‹©æ–‡ä»¶ï¼š&lt;input type=<span class="string">"file"</span> name=<span class="string">"upload"</span> /&gt;&lt;br/&gt;</span><br><span class="line">  &lt;input type=<span class="string">"submit"</span> value=<span class="string">"ä¸Šä¼ "</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><h2 id="æ§åˆ¶å™¨"><a href="#æ§åˆ¶å™¨" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨fileuploadç»„ä»¶å®Œæˆæ–‡ä»¶ä¸Šä¼ </span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/fileupload1"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">fileuoload1</span><span class="params">(HttpServletRequest request)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ä¸Šä¼ çš„ä½ç½®</span></span><br><span class="line">  String path = request.getSession().getServletContext().getRealPath(<span class="string">"/uploads/"</span>);</span><br><span class="line">  <span class="comment">// åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">  File file = <span class="keyword">new</span> File(path);</span><br><span class="line">  <span class="keyword">if</span>(!file.exists())&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºè¯¥æ–‡ä»¶å¤¹</span></span><br><span class="line">    file.mkdirs();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è§£ærequestå¯¹è±¡ï¼Œè·å–ä¸Šä¼ æ–‡ä»¶é¡¹</span></span><br><span class="line">  DiskFileItemFactory factory = <span class="keyword">new</span> DiskFileItemFactory();</span><br><span class="line">  ServletFileUpload upload = <span class="keyword">new</span> ServletFileUpload(factory);</span><br><span class="line">  <span class="comment">// è§£ærequest</span></span><br><span class="line">  List&lt;FileItem&gt; items = upload.parseRequest(request);</span><br><span class="line">  <span class="comment">// éå†</span></span><br><span class="line">  <span class="keyword">for</span>(FileItem item:items)&#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­å½“å‰itemå¯¹è±¡æ˜¯å¦æ˜¯ä¸Šä¼ æ–‡ä»¶é¡¹</span></span><br><span class="line">    <span class="keyword">if</span>(item.isFormField())&#123;</span><br><span class="line">      <span class="comment">// æ™®é€šè¡¨å•å‘</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="comment">// è·å–ä¸Šä¼ æ–‡ä»¶çš„åç§°</span></span><br><span class="line">      String filename = item.getName();</span><br><span class="line">      <span class="comment">// æŠŠæ–‡ä»¶çš„åç§°è®¾ç½®å”¯ä¸€å€¼ï¼Œuuid</span></span><br><span class="line">      String uuid = UUID.randomUUID().toString().replace(<span class="string">"-"</span>, <span class="string">""</span>);</span><br><span class="line">      filename = uuid+<span class="string">"_"</span>+filename;</span><br><span class="line">      <span class="comment">// å®Œæˆæ–‡ä»¶ä¸Šä¼ </span></span><br><span class="line">      item.write(<span class="keyword">new</span> File(path,filename));</span><br><span class="line">      <span class="comment">// åˆ é™¤ä¸´æ—¶æ–‡ä»¶</span></span><br><span class="line">      item.delete();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä¸Šä¼ å</p><p>åœ¨target/uploadsä¸­æ‰¾åˆ°ä¸Šä¼ çš„æ–‡ä»¶</p><h1 id="SpringMVCä¼ ç»Ÿæ–¹å¼ä¸Šä¼ "><a href="#SpringMVCä¼ ç»Ÿæ–¹å¼ä¸Šä¼ " class="headerlink" title="SpringMVCä¼ ç»Ÿæ–¹å¼ä¸Šä¼ "></a>SpringMVCä¼ ç»Ÿæ–¹å¼ä¸Šä¼ </h1><h2 id="åŸç†åˆ†æ"><a href="#åŸç†åˆ†æ" class="headerlink" title="åŸç†åˆ†æ"></a>åŸç†åˆ†æ</h2><img src="/images/2020/screencapture2020-04-06 AM11.14.41.jpg"><h2 id="jspé¡µé¢-1"><a href="#jspé¡µé¢-1" class="headerlink" title="jspé¡µé¢"></a>jspé¡µé¢</h2><p>å’Œä¼ ç»Ÿæ–¹å¼ä¸€æ ·</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"/user/fileupload2"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">  é€‰æ‹©æ–‡ä»¶ï¼š&lt;input type=<span class="string">"file"</span> name=<span class="string">"upload"</span> /&gt;&lt;br/&gt;</span><br><span class="line">  &lt;input type=<span class="string">"submit"</span> value=<span class="string">"ä¸Šä¼ "</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶è§£æå™¨"><a href="#é…ç½®æ–‡ä»¶è§£æå™¨" class="headerlink" title="é…ç½®æ–‡ä»¶è§£æå™¨"></a>é…ç½®æ–‡ä»¶è§£æå™¨</h2><p>spingmvc.xmlä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®æ–‡ä»¶è§£æå™¨å¯¹è±¡--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"multipartResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxUploadSize"</span> <span class="attr">value</span>=<span class="string">"10*1024*1024"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é‡Œé¢å¯ä»¥è®¾ç½®ä¸€äº›å±æ€§ï¼Œå¦‚æ–‡ä»¶å¤§å°</p><h2 id="æ§åˆ¶å™¨-1"><a href="#æ§åˆ¶å™¨-1" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/fileupload2"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">fileuoload2</span><span class="params">(HttpServletRequest request, MultipartFile upload)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸Šä¼ çš„ä½ç½®</span></span><br><span class="line">  String path = request.getSession().getServletContext().getRealPath(<span class="string">"/uploads/"</span>);</span><br><span class="line">  <span class="comment">// åˆ¤æ–­è¯¥è·¯å¾„æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">  File file = <span class="keyword">new</span> File(path);</span><br><span class="line">  <span class="keyword">if</span>(!file.exists())&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºè¯¥æ–‡ä»¶å¤¹</span></span><br><span class="line">    file.mkdirs();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–ä¸Šä¼ æ–‡ä»¶çš„åç§°</span></span><br><span class="line">  String filename = upload.getOriginalFilename();</span><br><span class="line">  <span class="comment">// æŠŠæ–‡ä»¶çš„åç§°è®¾ç½®å”¯ä¸€å€¼ï¼Œuuid</span></span><br><span class="line">  String uuid = UUID.randomUUID().toString().replace(<span class="string">"-"</span>, <span class="string">""</span>);</span><br><span class="line">  filename = uuid+<span class="string">"_"</span>+filename;</span><br><span class="line">  <span class="comment">// å®Œæˆæ–‡ä»¶ä¸Šä¼ </span></span><br><span class="line">  upload.transferTo(<span class="keyword">new</span> File(path,filename));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›¸è¾ƒä¼ ç»Ÿæ–¹å¼ï¼Œçœäº†è§£ææ“ä½œï¼Œç®€åŒ–ä¸Šä¼ æ­¥éª¤</p><h1 id="SpringMVCè·¨æœåŠ¡å™¨ä¸Šä¼ "><a href="#SpringMVCè·¨æœåŠ¡å™¨ä¸Šä¼ " class="headerlink" title="SpringMVCè·¨æœåŠ¡å™¨ä¸Šä¼ "></a>SpringMVCè·¨æœåŠ¡å™¨ä¸Šä¼ </h1><img src="/images/2020/screencapture2020-04-06 AM11.25.56.jpg"><p>ç”¨2ä¸ªtomcatæœåŠ¡å™¨ï¼Œæ–‡ä»¶æœåŠ¡å™¨ç«¯å£å·æ­¤å¤„ç”¨çš„9090</p><h2 id="æ–‡ä»¶æœåŠ¡å™¨"><a href="#æ–‡ä»¶æœåŠ¡å™¨" class="headerlink" title="æ–‡ä»¶æœåŠ¡å™¨"></a>æ–‡ä»¶æœåŠ¡å™¨</h2><p>æ–°å»ºä¸€ä¸ªå·¥ç¨‹</p><p>åœ¨webappä¸‹æ–°å»ºuploadsæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ–‡ä»¶</p><p>å¯åŠ¨</p><h2 id="ä¾èµ–-1"><a href="#ä¾èµ–-1" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.jersey<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jersey-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.jersey<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jersey-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="jspé¡µé¢-2"><a href="#jspé¡µé¢-2" class="headerlink" title="jspé¡µé¢"></a>jspé¡µé¢</h2><p>ä»æ²¡ä»€ä¹ˆåŒºåˆ«</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"/user/fileupload3"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">  é€‰æ‹©æ–‡ä»¶ï¼š&lt;input type=<span class="string">"file"</span> name=<span class="string">"upload"</span> /&gt;&lt;br/&gt;</span><br><span class="line">  &lt;input type=<span class="string">"submit"</span> value=<span class="string">"ä¸Šä¼ "</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><h2 id="æ§åˆ¶å™¨-2"><a href="#æ§åˆ¶å™¨-2" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/fileupload3"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">fileuoload3</span><span class="params">(MultipartFile upload)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å®šä¹‰ä¸Šä¼ æ–‡ä»¶æœåŠ¡å™¨è·¯å¾„</span></span><br><span class="line">  String path = <span class="string">"http://localhost:9090/uploads/"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–ä¸Šä¼ æ–‡ä»¶çš„åç§°</span></span><br><span class="line">  String filename = upload.getOriginalFilename();</span><br><span class="line">  <span class="comment">// æŠŠæ–‡ä»¶çš„åç§°è®¾ç½®å”¯ä¸€å€¼ï¼Œuuid</span></span><br><span class="line">  String uuid = UUID.randomUUID().toString().replace(<span class="string">"-"</span>, <span class="string">""</span>);</span><br><span class="line">  filename = uuid+<span class="string">"_"</span>+filename;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ›å»ºå®¢æˆ·ç«¯çš„å¯¹è±¡</span></span><br><span class="line">  Client client = Client.create();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å’Œå›¾ç‰‡æœåŠ¡å™¨è¿›è¡Œè¿æ¥</span></span><br><span class="line">  WebResource webResource = client.resource(path + filename);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">  webResource.put(upload.getBytes());</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡ºç°409å¼‚å¸¸å¯ä»¥æ‰‹åŠ¨åˆ›å»ºä¸€ä¸‹uploadsæ–‡ä»¶å¤¹</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1Sb411s7qa&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/BV1Sb411
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="springmvc" scheme="http://yoursite.com/tags/springmvc/"/>
    
  </entry>
  
  <entry>
    <title>SpringMVCç¬”è®°04 å“åº”æ•°æ®å’Œç»“æœè§†å›¾</title>
    <link href="http://yoursite.com/2020/04/06/note-springmvc-04/"/>
    <id>http://yoursite.com/2020/04/06/note-springmvc-04/</id>
    <published>2020-04-06T02:09:00.000Z</published>
    <updated>2020-04-06T02:57:13.395Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.bilibili.com/video/BV1Sb411s7qa" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Sb411s7qa</a></p><p>P25~32</p></blockquote><h1 id="è¿”å›å€¼ç±»å‹"><a href="#è¿”å›å€¼ç±»å‹" class="headerlink" title="è¿”å›å€¼ç±»å‹"></a>è¿”å›å€¼ç±»å‹</h1><h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testReturnString"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testReturnString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿”å›å­—ç¬¦ä¸²å¯ä»¥æŒ‡å®šé€»è¾‘è§†å›¾åï¼Œé€šè¿‡è§†å›¾è§£æå™¨è§£æä¸ºç‰©ç†è§†å›¾åœ°å€</p><p>æ­¤å¤„è¿”å›â€successâ€å°†è·³è½¬åˆ°success.jsp</p><p><strong>åº”ç”¨</strong></p><p>ä»æ•°æ®åº“ä¸­å–Userå¹¶å­˜å…¥Model</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testReturnString"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testReturnString</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// æ¨¡æ‹Ÿä»æ•°æ®åº“æŸ¥è¯¢å‡ºUserå¯¹è±¡</span></span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setUsername(<span class="string">"ha"</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å­˜å…¥Model</span></span><br><span class="line">  model.addAttribute(<span class="string">"user"</span>,user);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// è·³è½¬åˆ°success.jsp</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨success.jspä¸­å–å‡ºUser</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;æ‰§è¡ŒæˆåŠŸ&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">    $&#123;user.username&#125;</span><br><span class="line">    $&#123;user.password&#125;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="void"><a href="#void" class="headerlink" title="void"></a>void</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testVoid"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testReturnString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰è¿”å›å€¼ï¼Œé»˜è®¤æ ¹æ®è¯·æ±‚è·¯å¾„è·³è½¬ï¼Œå¦‚æ­¤å¤„ä¼šæ‰¾testVoid.jsp</p><p>ä¿®æ”¹éœ€è¦ç”¨åˆ°Requestã€Responseå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testVoid"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testReturnString</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">  <span class="comment">// è¯·æ±‚è½¬å‘</span></span><br><span class="line">  request.getRequestDispatcher(<span class="string">"/WEB-INF/pages/success.jsp"</span>).forward(request, response);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç”¨responseé‡å®šå‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¾‹1</span></span><br><span class="line">response.sendRedirect(request.getContextPath()+<span class="string">"index.jsp"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾‹2</span></span><br><span class="line">response.sendRedirect(<span class="string">"testRetrunString"</span>);</span><br></pre></td></tr></table></figure><p>æˆ–è€…æŒ‡å®šå“åº”ç»“æœï¼Œä¾‹å¦‚å“åº”jsonæ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setCharacterEncoding(<span class="string">"utf-8"</span>); response.setContentType(<span class="string">"application/json;charset=utf-8"</span>); response.getWriter().write(<span class="string">"HELLO"</span>);</span><br></pre></td></tr></table></figure><h2 id="ModelAndView"><a href="#ModelAndView" class="headerlink" title="ModelAndView"></a>ModelAndView</h2><p>ModelAndView æ˜¯ SpringMVC æä¾›çš„ä¸€ä¸ªå¯¹è±¡</p><p>å†…éƒ¨æœ‰ä¸€ä¸ªModelï¼Œå¯ä»¥å­˜æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testReturnModelAndView"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">testReturnModelAndView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// åˆ›å»ºModelAndViewå¯¹è±¡</span></span><br><span class="line">ModelAndView mv = <span class="keyword">new</span> ModelAndView(); </span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æ¨¡æ‹Ÿä»æ•°æ®åº“æŸ¥è¯¢å‡ºUserå¯¹è±¡</span></span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setUsername(<span class="string">"ha"</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å¯ä»¥å­˜å¯¹è±¡</span></span><br><span class="line">  mv.addObject(<span class="string">"user"</span>,user);</span><br><span class="line">  <span class="comment">// ä¹Ÿå¯ä»¥ç›´æ¥å­˜é”®å€¼å¯¹</span></span><br><span class="line">  mv.addObject(<span class="string">"username"</span>, <span class="string">"å¼ ä¸‰"</span>); </span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æŒ‡å®šè·³è½¬åˆ°å“ªä¸ªé¡µé¢</span></span><br><span class="line">  mv.setViewName(<span class="string">"success"</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> mv;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è½¬å‘å’Œé‡å®šå‘"><a href="#è½¬å‘å’Œé‡å®šå‘" class="headerlink" title="è½¬å‘å’Œé‡å®šå‘"></a>è½¬å‘å’Œé‡å®šå‘</h1><p>ä½¿ç”¨å…³é”®å­—è¿›è¡Œè½¬å‘å’Œé‡å®šå‘æ—¶ï¼Œæ— æ³•ä½¿ç”¨è§†å›¾è§£æå™¨ï¼Œéœ€è¦è‡ªå·±å†™è·¯å¾„ï¼Œç”¨å¾—ä¸å¤š</p><h2 id="forward"><a href="#forward" class="headerlink" title="forward"></a>forward</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testForward"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testForward</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"forward:/WEB-INF/pages/success.jsp"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è·¯å¾„å¿…é¡»å†™å®é™…è§†å›¾urlï¼Œä¸èƒ½å†™é€»è¾‘è§†å›¾</p><p>æ—¢å¯ä»¥è½¬å‘åˆ°jspï¼Œä¹Ÿå¯ä»¥è½¬å‘åˆ°å…¶ä»–çš„æ§åˆ¶å™¨æ–¹æ³•</p><h2 id="redirect"><a href="#redirect" class="headerlink" title="redirect"></a>redirect</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testRedirect"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRedirect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// return "redirect:/index.jsp"</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"redirect:testReturnModelAndView"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœé‡å®šå‘åˆ°jspé¡µé¢ï¼Œé¡µé¢ä¸èƒ½å†WEB-INFä¸­ï¼Œä¼šæ‰¾ä¸åˆ°</p><h1 id="å“åº”json"><a href="#å“åº”json" class="headerlink" title="å“åº”json"></a>å“åº”json</h1><p>ä½¿ç”¨@ResponseBody æ³¨è§£å®ç°å°† controller æ–¹æ³•è¿”å›å¯¹è±¡è½¬æ¢ä¸º json å“åº”ç»™å®¢æˆ·ç«¯</p><p>åœ¨webappç›®å½•ä¸‹æ–°å»ºjsæ–‡ä»¶å¤¹ï¼ŒæŠŠjquery.main.jså¤åˆ¶è¿›å»ï¼Œè¦ç”¨çš„jspä¸­å¼•å…¥</p><p><strong>response.jsp</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script src="js/jquery.min.js"&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="comment">// é¡µé¢åŠ è½½ï¼Œç»‘å®šå•å‡»äº‹ä»¶</span></span><br><span class="line">        $(function()&#123;</span><br><span class="line">            $(<span class="string">"#btn"</span>).click(function()&#123;</span><br><span class="line">                 alert(<span class="string">"hello btn"</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;button id="btn"&gt;å‘é€ajaxçš„è¯·æ±‚&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>ç„¶è€Œæ­¤æ—¶åœ¨é¡µé¢ä¸­ç‚¹å‡»æŒ‰é’®ï¼Œä¸ä¼šæœ‰å“åº”</p><p>å› ä¸ºè™½ç„¶å¼•å…¥äº†jquery.min.js</p><p>ä½†æ˜¯åœ¨web.xmlä¸­é…ç½®çš„DispatcherServletæ‹¦æˆªè·¯å¾„â€/â€œï¼Œä¹Ÿä¼šæ‹¦æˆªé™æ€çš„èµ„æºæ–‡ä»¶</p><h2 id="è¿‡æ»¤é™æ€èµ„æº"><a href="#è¿‡æ»¤é™æ€èµ„æº" class="headerlink" title="è¿‡æ»¤é™æ€èµ„æº"></a>è¿‡æ»¤é™æ€èµ„æº</h2><p>åœ¨springmvc.xmlä¸­é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å‰ç«¯æ§åˆ¶å™¨ï¼Œå“ªäº›é™æ€èµ„æºä¸æ‹¦æˆª--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/css/"</span> <span class="attr">mapping</span>=<span class="string">"/css/**"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/images/"</span> <span class="attr">mapping</span>=<span class="string">"/images/**"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/js/"</span> <span class="attr">mapping</span>=<span class="string">"/js/**"</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>é…ç½®ä¹‹åå†ç‚¹å‡»æŒ‰é’®ï¼Œå°±ä¼šæœ‰å¼¹æ¡†äº†</p><h2 id="å‘é€ajaxè¯·æ±‚"><a href="#å‘é€ajaxè¯·æ±‚" class="headerlink" title="å‘é€ajaxè¯·æ±‚"></a>å‘é€ajaxè¯·æ±‚</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">// é¡µé¢åŠ è½½ï¼Œç»‘å®šå•å‡»äº‹ä»¶</span></span><br><span class="line">  $(function()&#123;</span><br><span class="line">    $(<span class="string">"#btn"</span>).click(function()&#123;</span><br><span class="line">      <span class="comment">// å‘é€ajaxè¯·æ±‚</span></span><br><span class="line">      $.ajax(&#123;</span><br><span class="line">        <span class="comment">// ç¼–å†™jsonæ ¼å¼ï¼Œè®¾ç½®å±æ€§å’Œå€¼</span></span><br><span class="line">        url:<span class="string">"user/testAjax"</span>,</span><br><span class="line">        contentType:<span class="string">"application/json;charset=UTF-8"</span>,</span><br><span class="line">        data:<span class="string">'&#123;"username":"hehe","password":"123","age":30&#125;'</span>,</span><br><span class="line">        dataType:<span class="string">"json"</span>,</span><br><span class="line">        type:<span class="string">"post"</span>,</span><br><span class="line">        success:function(data)&#123;</span><br><span class="line">          <span class="comment">// dataæ˜¯æœåŠ¡å™¨ç«¯å“åº”çš„jsonæ•°æ®</span></span><br><span class="line">          alert(data);</span><br><span class="line">          alert(data.username);</span><br><span class="line">          alert(data.password);</span><br><span class="line">          alert(data.age);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="å“åº”jsonæ ¼å¼æ•°æ®"><a href="#å“åº”jsonæ ¼å¼æ•°æ®" class="headerlink" title="å“åº”jsonæ ¼å¼æ•°æ®"></a>å“åº”jsonæ ¼å¼æ•°æ®</h2><p>Springmvc é»˜è®¤ç”¨ MappingJacksonHttpMessageConverter å¯¹ json æ•°æ®è¿›è¡Œè½¬æ¢ï¼Œéœ€è¦åŠ å…¥ jackson çš„åŒ…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯å‘é€çš„ajaxè¯·æ±‚ï¼Œä¼ çš„æ˜¯jsonå­—ç¬¦ä¸²ï¼Œåç«¯å°†å…¶å°è£…åˆ°userå¯¹è±¡ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚å“åº”</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testAjax"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@ResponseBody</span> <span class="function">User <span class="title">testAjax</span><span class="params">(@RequestBody User user)</span></span>&#123;</span><br><span class="line">  <span class="comment">// å“åº”ï¼Œæ¨¡æ‹ŸæŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line">  user.setUsername(<span class="string">"haha"</span>);</span><br><span class="line">  user.setAge(<span class="number">40</span>);</span><br><span class="line">  <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŠ @ResponseBodyï¼ŒæŠŠuserè½¬æˆjson</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1Sb411s7qa&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/BV1Sb411
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="springmvc" scheme="http://yoursite.com/tags/springmvc/"/>
    
  </entry>
  
  <entry>
    <title>SpringMVCç¬”è®°03 å¸¸ç”¨æ³¨è§£</title>
    <link href="http://yoursite.com/2020/04/04/note-springmvc-03/"/>
    <id>http://yoursite.com/2020/04/04/note-springmvc-03/</id>
    <published>2020-04-04T10:14:32.000Z</published>
    <updated>2020-04-04T13:08:23.323Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.bilibili.com/video/BV1Sb411s7qa" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Sb411s7qa</a></p><p>P17~24</p></blockquote><h1 id="RequestParam"><a href="#RequestParam" class="headerlink" title="RequestParam"></a>RequestParam</h1><p>ä½œç”¨ï¼šæŠŠè¯·æ±‚ä¸­çš„æŒ‡å®šåç§°çš„å‚æ•°ä¼ é€’ç»™æ§åˆ¶å™¨ä¸­çš„å½¢å‚èµ‹å€¼</p><p>å±æ€§ï¼š</p><ul><li>valueï¼šè¯·æ±‚å‚æ•°ä¸­çš„åç§°</li><li>requiredï¼šè¯·æ±‚å‚æ•°ä¸­æ˜¯å¦å¿…é¡»æä¾›æ­¤å‚æ•°ï¼Œé»˜è®¤å€¼æ˜¯trueï¼Œå¿…é¡»æä¾›</li></ul><p>å¦‚ï¼Œæ–¹æ³•ä¸­éœ€è¦nameå±æ€§ï¼Œä½†æ˜¯urlä¸­ä¼ çš„æ˜¯usernameå±æ€§ï¼Œå°±ä¼šå°è£…ä¸ä¸Š</p><p>å¯ä»¥ç”¨@RequestParamä¿®é¥°å‚æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(path=<span class="string">"/hello"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(@RequestParam(value=<span class="string">"username"</span>,required=<span class="keyword">false</span>)</span>String name) </span>&#123;</span><br><span class="line">  System.out.println(name); </span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="RequestBody"><a href="#RequestBody" class="headerlink" title="RequestBody"></a>RequestBody</h1><p>ä½œç”¨ï¼šç”¨äºè·å–è¯·æ±‚ä½“çš„å†…å®¹ï¼ˆgetæ–¹æ³•ä¸é€‚ç”¨ï¼‰</p><p>ç›´æ¥ä½¿ç”¨å¾—åˆ°çš„æ˜¯key=value&amp;key=valueç»“æ„çš„æ•°æ®</p><p>å±æ€§ï¼š</p><ul><li>requiredï¼šæ˜¯å¦å¿…é¡»æœ‰è¯·æ±‚ä½“ï¼Œé»˜è®¤å€¼æ˜¯true</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"anno/testRequestBody"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">  ç”¨æˆ·å§“åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  ç”¨æˆ·å¹´é¾„ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"age"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"æäº¤"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(path=<span class="string">"/testRequestBody"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(@RequestBody String body)</span> </span>&#123;</span><br><span class="line">System.out.println(body);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åé¢ä¼ jsonæ•°æ®æ—¶ä¼šç”¨åˆ°</p><h1 id="PathVariable"><a href="#PathVariable" class="headerlink" title="PathVariable"></a>PathVariable</h1><p>ä½œç”¨ï¼šç”¨äºç»‘å®š url ä¸­çš„å ä½ç¬¦ï¼ˆå¦‚:è¯·æ±‚ /delete/{id}ä¸­çš„{id}ï¼‰</p><p>ç”¨äºæ”¯æŒRESTfulé£æ ¼</p><p>å±æ€§ï¼š</p><ul><li>valueï¼šç”¨äºæŒ‡å®š url ä¸­å ä½ç¬¦åç§°</li><li>requiredï¼šæ˜¯å¦å¿…é¡»æä¾›å ä½ç¬¦</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"springmvc/usePathVariable/100"</span>&gt;</span>pathVariable æ³¨è§£<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/usePathVariable/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">usePathVariable</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id)</span>&#123;</span><br><span class="line">System.out.println(id);</span><br><span class="line"><span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”¨RESTfulé£æ ¼æ—¶</p><p>ç”±äºæµè§ˆå™¨formè¡¨å•åªæ”¯æŒGETä¸POSTè¯·æ±‚ï¼Œè€Œä¸æ”¯æŒDELETEã€PUT</p><p>Spring3.0æä¾›äº†ä¸€ä¸ªè¿‡æ»¤å™¨HiddentHttpMethodFilterï¼Œå¯ä»¥å°†æµè§ˆå™¨è¯·æ±‚ä¿®æ”¹ä¸ºæŒ‡å®šæ–¹å¼ï¼Œä½†æ¯”è¾ƒéº»çƒ¦</p><p>è¿˜æœ‰WebClientç±»å¯ä»¥ä½¿ç”¨é™æ€æ–¹æ³•æ¨¡æ‹Ÿå„ç§è¯·æ±‚æ–¹å¼</p><p>æˆ–è€…å¯ä»¥ç»™æµè§ˆå™¨è£…æ’ä»¶</p><h1 id="RequestHeader"><a href="#RequestHeader" class="headerlink" title="RequestHeader"></a>RequestHeader</h1><p>ä½œç”¨ï¼šè·å–è¯·æ±‚æ¶ˆæ¯å¤´</p><p>å±æ€§ï¼š</p><ul><li>valueï¼šæä¾›æ¶ˆæ¯å¤´åç§°</li><li>requiredï¼šæ˜¯å¦å¿…é¡»æœ‰æ­¤æ¶ˆæ¯å¤´</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/useRequestHeader"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">useRequestHeader</span><span class="params">(@RequestHeader(value=<span class="string">"Accept-Language"</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">required=<span class="keyword">false</span>)</span>String requestHeader)</span>&#123; </span><br><span class="line">  System.out.println(requestHeader);</span><br><span class="line"><span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="CookieValue"><a href="#CookieValue" class="headerlink" title="CookieValue"></a>CookieValue</h1><p>ä½œç”¨ï¼šè·å–Cookieçš„å€¼</p><p>å±æ€§ï¼š</p><ul><li>valueï¼šæŒ‡å®š cookie çš„åç§°</li><li>requiredï¼šæ˜¯å¦å¿…é¡»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/useCookieValue"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">useCookieValue</span><span class="params">(@CookieValue(value=<span class="string">"JSESSIONID"</span>,required=<span class="keyword">false</span>)</span> String cookieValue)</span>&#123;</span><br><span class="line">System.out.println(cookieValue);</span><br><span class="line"><span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ModelAttribute"><a href="#ModelAttribute" class="headerlink" title="ModelAttribute"></a>ModelAttribute</h1><p>ä½œç”¨ï¼šåŠ åœ¨æ–¹æ³•ä¸Šï¼Œè¯¥æ–¹æ³•åœ¨æ§åˆ¶å™¨çš„æ–¹æ³•æ‰§è¡Œå‰å…ˆæ‰§è¡Œï¼›åŠ åœ¨å‚æ•°ä¸Šï¼Œè·å–æŒ‡å®šçš„æ•°æ®ç»™å‚æ•°èµ‹å€¼</p><p>å±æ€§ï¼š</p><ul><li>valueï¼šç”¨äºè·å–æ•°æ®çš„ keyï¼ˆkey å¯ä»¥æ˜¯ POJO çš„å±æ€§åç§°ï¼Œä¹Ÿå¯ä»¥æ˜¯ map ç»“æ„çš„ keyï¼‰</li></ul><p>åº”ç”¨åœºæ™¯ï¼š</p><p>è¡¨å•æäº¤æ•°æ®ä¸å®Œæ•´æ—¶ï¼Œå…ˆä»æ•°æ®åº“æŸ¥ç”¨æˆ·ä¿¡æ¯ï¼Œæ²¡æœ‰æäº¤æ•°æ®çš„å­—æ®µç”¨åŸå€¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"springmvc/updateUser"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span> </span><br><span class="line">  ç”¨æˆ·åç§°:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> &gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">ç”¨æˆ·å¹´é¾„:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"age"</span> &gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"ä¿å­˜"</span>&gt;</span> <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ModelAttribute-ä¿®é¥°æ–¹æ³•å¸¦è¿”å›å€¼"><a href="#ModelAttribute-ä¿®é¥°æ–¹æ³•å¸¦è¿”å›å€¼" class="headerlink" title="ModelAttribute ä¿®é¥°æ–¹æ³•å¸¦è¿”å›å€¼"></a>ModelAttribute ä¿®é¥°æ–¹æ³•å¸¦è¿”å›å€¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ModelAttribute</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">showModel</span><span class="params">(String username)</span> </span>&#123; </span><br><span class="line">  <span class="comment">//æ¨¡æ‹Ÿå»æ•°æ®åº“æŸ¥è¯¢</span></span><br><span class="line">User abc = findUserByName(username); </span><br><span class="line">  System.out.println(<span class="string">"æ‰§è¡Œäº† showModel æ–¹æ³•"</span>+abc);</span><br><span class="line"><span class="keyword">return</span> abc; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/updateUser"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testModelAttribute</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"æ§åˆ¶å™¨ä¸­å¤„ç†è¯·æ±‚çš„æ–¹æ³•:ä¿®æ”¹ç”¨æˆ·:"</span>+user);</span><br><span class="line"><span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ModelAttribute-ä¿®é¥°æ–¹æ³•ä¸å¸¦è¿”å›å€¼"><a href="#ModelAttribute-ä¿®é¥°æ–¹æ³•ä¸å¸¦è¿”å›å€¼" class="headerlink" title="ModelAttribute ä¿®é¥°æ–¹æ³•ä¸å¸¦è¿”å›å€¼"></a>ModelAttribute ä¿®é¥°æ–¹æ³•ä¸å¸¦è¿”å›å€¼</h2><p>æ”¾åˆ°mapä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ModelAttribute</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showModel</span><span class="params">(String username,Map&lt;String,User&gt; map)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//æ¨¡æ‹Ÿå»æ•°æ®åº“æŸ¥è¯¢</span></span><br><span class="line">User user = findUserByName(username); </span><br><span class="line">  System.out.println(<span class="string">"æ‰§è¡Œäº† showModel æ–¹æ³•"</span>+user); </span><br><span class="line">  map.put(<span class="string">"abc"</span>,user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/updateUser"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testModelAttribute</span><span class="params">(@ModelAttribute(<span class="string">"abc"</span>)</span>User user) </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"æ§åˆ¶å™¨ä¸­å¤„ç†è¯·æ±‚çš„æ–¹æ³•:ä¿®æ”¹ç”¨æˆ·:"</span>+user);</span><br><span class="line"><span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="SessionAttribute"><a href="#SessionAttribute" class="headerlink" title="SessionAttribute"></a>SessionAttribute</h1><p>ä½œç”¨ï¼šå¤šæ¬¡æ‰§è¡Œæ§åˆ¶å™¨æ–¹æ³•é—´çš„å‚æ•°å…±äº«</p><p>å±æ€§ï¼š</p><ul><li>valueï¼šæŒ‡å®šå­˜å…¥çš„å±æ€§åç§°</li><li>typeï¼šæŒ‡å®šå­˜å…¥çš„æ•°æ®ç±»å‹</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- SessionAttribute æ³¨è§£çš„ä½¿ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"springmvc/testPut"</span>&gt;</span>å­˜å…¥SessionAttribute<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"springmvc/testGet"</span>&gt;</span>å–å‡ºSessionAttribute<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"springmvc/testClean"</span>&gt;</span>æ¸…é™¤SessionAttribute<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>(<span class="string">"sessionAttributeController"</span>)</span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/springmvc"</span>)</span><br><span class="line"><span class="meta">@SessionAttributes</span>(value =&#123;<span class="string">"username"</span>,<span class="string">"password"</span>&#125;,types=&#123;Integer<span class="class">.<span class="keyword">class</span>&#125;) <span class="title">public</span> <span class="title">class</span> <span class="title">SessionAttributeController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@RequestMapping</span>(<span class="string">"/testPut"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">testPut</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">"username"</span>, <span class="string">"æ³°æ–¯ç‰¹"</span>);</span><br><span class="line">    model.addAttribute(<span class="string">"password"</span>,<span class="string">"123456"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@RequestMapping</span>(<span class="string">"/testGet"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testGet</span><span class="params">(ModelMap model)</span></span>&#123;</span><br><span class="line">    System.out.println(model.get(<span class="string">"username"</span>)+<span class="string">";"</span>+model.get(<span class="string">"password"</span>));</span><br><span class="line"><span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@RequestMapping</span>(<span class="string">"/testClean"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">complete</span><span class="params">(SessionStatus sessionStatus)</span></span>&#123;</span><br><span class="line">sessionStatus.setComplete();</span><br><span class="line"><span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1Sb411s7qa&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/BV1Sb411
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="springmvc" scheme="http://yoursite.com/tags/springmvc/"/>
    
  </entry>
  
  <entry>
    <title>SpringMVCç¬”è®°02 è¯·æ±‚å‚æ•°çš„ç»‘å®š</title>
    <link href="http://yoursite.com/2020/04/04/note-springmvc-02/"/>
    <id>http://yoursite.com/2020/04/04/note-springmvc-02/</id>
    <published>2020-04-04T08:19:10.000Z</published>
    <updated>2020-04-04T09:36:46.988Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.bilibili.com/video/BV1Sb411s7qa" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Sb411s7qa</a></p><p>P11~16</p></blockquote><h1 id="ç®€å•å‚æ•°"><a href="#ç®€å•å‚æ•°" class="headerlink" title="ç®€å•å‚æ•°"></a>ç®€å•å‚æ•°</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"param/testParam?username=hehe&amp;password=123"</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testParam"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testParam</span><span class="params">(String username,String password)</span></span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç»‘å®šå®ä½“ç±»å‹"><a href="#ç»‘å®šå®ä½“ç±»å‹" class="headerlink" title="ç»‘å®šå®ä½“ç±»å‹"></a>ç»‘å®šå®ä½“ç±»å‹</h1><p>å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// get set ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¡¨å•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"param/saveAccount"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">  å§“åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"password"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  é‡‘é¢ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"money"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"æäº¤"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç»‘å®š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* è¯·æ±‚å‚æ•°ç»‘å®šæŠŠæ•°æ®å°è£…åˆ°JavaBeançš„ç±»ä¸­</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/saveAccount"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">saveAccount</span><span class="params">(Account account)</span></span>&#123;</span><br><span class="line">  System.out.println(<span class="string">"æ‰§è¡Œäº†..."</span>);</span><br><span class="line">  System.out.println(account);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¼•ç”¨ç±»å‹"><a href="#å¼•ç”¨ç±»å‹" class="headerlink" title="å¼•ç”¨ç±»å‹"></a>å¼•ç”¨ç±»å‹</h2><p>å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String uname;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// get set ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> User user;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¡¨å•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"param/saveAccount"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">  å§“åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"password"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  é‡‘é¢ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"money"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  ç”¨æˆ·å§“åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"user.uname"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  ç”¨æˆ·å¹´é¾„ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"user.age"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"æäº¤"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="é›†åˆç±»å‹"><a href="#é›†åˆç±»å‹" class="headerlink" title="é›†åˆç±»å‹"></a>é›†åˆç±»å‹</h2><p>å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;User&gt; list;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,User&gt; map;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¡¨å•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"param/saveAccount"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">  å§“åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"password"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  é‡‘é¢ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"money"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  ç”¨æˆ·å§“åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"list[0].uname"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  ç”¨æˆ·å¹´é¾„ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"list[0].age"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  ç”¨æˆ·å§“åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"map['one'].uname"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  ç”¨æˆ·å¹´é¾„ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"map['one'].age"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"æäº¤"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>mapä¸­æ”¾keyå€¼ï¼Œè¿™é‡Œæ˜¯â€™oneâ€™</p><h1 id="è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨"><a href="#è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨" class="headerlink" title="è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨"></a>è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨</h1><p>é¡µé¢æäº¤çš„æ•°æ®éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹</p><p>åŸºæœ¬ç±»å‹å¯ä»¥è‡ªåŠ¨è½¬ï¼Œå¦‚Integer</p><p>ä½†æ—¥æœŸç±»å‹å¯èƒ½ä¸æ”¯æŒæŸäº›æ ¼å¼ï¼Œéœ€è¦è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨</p><p>ä¾‹å¦‚ï¼Œç»™UseråŠ ä¸€ä¸ªDateå±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String uname;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date date;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"param/saveUser"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">  ç”¨æˆ·å§“åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"uname"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  ç”¨æˆ·å¹´é¾„ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"age"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  ç”¨æˆ·ç”Ÿæ—¥ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"date"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"æäº¤"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/saveUser"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">saveUser</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">  System.out.println(<span class="string">"æ‰§è¡Œäº†..."</span>);</span><br><span class="line">  System.out.println(user);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç”Ÿæ—¥æ¡†ä¸­è¾“å…¥â€2000/11/11â€å‘ç°å¯ä»¥æ­£å¸¸å°è£…</p><p>ä½†æ˜¯â€2000-11-11â€å‡ºç°Bad Request</p><p>éœ€è¦å†™ä¸€ä¸ªç±»å‹è½¬æ¢ç±»å¹¶æ³¨å†Œ</p><p>éœ€è¦å®ç°Converteræ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringToDateConverter</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>,<span class="title">Date</span>&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">convert</span><span class="params">(String source)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(source == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"è¯·æ‚¨ä¼ å…¥æ•°æ®"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        DateFormat df = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> df.parse(source);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"æ•°æ®ç±»å‹è½¬æ¢å‡ºç°é”™è¯¯"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨springmvc.xmlä¸­é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"conversionService"</span> <span class="attr">class</span>=<span class="string">"org.springframework.context.support.ConversionServiceFactoryBean"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"converters"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"cn.itcast.utils.StringToDateConverter"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼€å¯SpringMVCæ¡†æ¶æ³¨è§£çš„æ”¯æŒ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">"conversionService"</span>/&gt;</span></span><br></pre></td></tr></table></figure><h1 id="è§£å†³ä¸­æ–‡ä¹±ç "><a href="#è§£å†³ä¸­æ–‡ä¹±ç " class="headerlink" title="è§£å†³ä¸­æ–‡ä¹±ç "></a>è§£å†³ä¸­æ–‡ä¹±ç </h1><p>åœ¨web.xmlä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®è§£å†³ä¸­æ–‡ä¹±ç çš„è¿‡æ»¤å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="è·å–ServletåŸç”Ÿçš„API"><a href="#è·å–ServletåŸç”Ÿçš„API" class="headerlink" title="è·å–ServletåŸç”Ÿçš„API"></a>è·å–ServletåŸç”Ÿçš„API</h1><p>ç›´æ¥åœ¨æ–¹æ³•ä¸ŠåŠ å‚æ•°å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testServlet"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testServlet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span>&#123;</span><br><span class="line">  System.out.println(<span class="string">"æ‰§è¡Œäº†..."</span>);</span><br><span class="line">  System.out.println(request);</span><br><span class="line"></span><br><span class="line">  HttpSession session = request.getSession();</span><br><span class="line">  System.out.println(session);</span><br><span class="line"></span><br><span class="line">  ServletContext servletContext = session.getServletContext();</span><br><span class="line">  System.out.println(servletContext);</span><br><span class="line"></span><br><span class="line">  System.out.println(response);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1Sb411s7qa&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/BV1Sb411
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="springmvc" scheme="http://yoursite.com/tags/springmvc/"/>
    
  </entry>
  
  <entry>
    <title>SpringMVCç¬”è®°01 å…¥é—¨</title>
    <link href="http://yoursite.com/2020/04/03/note-springmvc-01/"/>
    <id>http://yoursite.com/2020/04/03/note-springmvc-01/</id>
    <published>2020-04-03T02:14:25.000Z</published>
    <updated>2020-04-04T09:06:32.211Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.bilibili.com/video/BV1Sb411s7qa" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Sb411s7qa</a></p><p>p1~9</p></blockquote><p>SpringMVCæ˜¯ä¸€ä¸ªåŸºäºJavaçš„ã€å®ç°MVCè®¾è®¡æ¨¡å‹çš„ã€è¯·æ±‚é©±åŠ¨ç±»å‹çš„è½»é‡çº§Webæ¡†æ¶</p><p>ä½¿ç”¨Springè¿›è¡Œwebå¼€å‘æ—¶ï¼Œå¯ä»¥é€‰æ‹©SpringMVCï¼Œä¹Ÿå¯ä»¥é›†æˆå…¶å®ƒæ¡†æ¶å¦‚Struts2</p><p>å®ƒé€šè¿‡ä¸€å¥—æ³¨è§£ï¼Œè®©ä¸€ä¸ªç®€å•çš„Javaç±»æˆä¸ºå¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨ï¼Œè€Œæ— éœ€å®ç°ä»»ä½•æ¥å£</p><p>æ”¯æŒRESTfulé£æ ¼çš„è¯·æ±‚</p><img src="/images/2020/screencapture2020-03-26PM10.20.30.jpg"><h1 id="å…¥é—¨æ¡ˆä¾‹"><a href="#å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="å…¥é—¨æ¡ˆä¾‹"></a>å…¥é—¨æ¡ˆä¾‹</h1><p>éœ€æ±‚ï¼š</p><img src="/images/2020/screencapture2020-04-03 AM10.39.54.jpg"><h1 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h1><p>Ideaåˆ›å»ºMavenå·¥ç¨‹ï¼Œé€‰æ‹©webapp</p><p>mavené¡¹ç›®åˆ›å»ºæ—¶ï¼Œå¯ä»¥åŠ ä¸€ç»„é”®å€¼å¯¹archetypeCatalog : internalï¼Œè§£å†³åŠ è½½æ…¢çš„é—®é¢˜</p><p>å»ºç«‹çš„å·¥ç¨‹ç›®å½•æ˜¯ä¸å…¨çš„ï¼Œåœ¨src/mainä¸‹æ‰‹åŠ¨åŠ ä¸Šjavaã€resourceæ–‡ä»¶å¤¹ï¼Œå¹¶å³é”®Mark Directory asè®¾ç½®ä¸ºæºç ã€èµ„æºæ–‡ä»¶å¤¹</p><h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ç¼–è¯‘ç‰ˆæœ¬æ”¹æˆ1.8 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- springç‰ˆæœ¬é”å®šï¼Œä¸‹é¢ç›´æ¥å¼•ç”¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="web-xml"><a href="#web-xml" class="headerlink" title="web.xml"></a>web.xml</h2><p>é…ç½®å‰ç«¯æ§åˆ¶å™¨ï¼ˆservletï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åŠ è½½springmvcçš„é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨æœåŠ¡å™¨æ—¶åŠ è½½ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="springmvcçš„é…ç½®æ–‡ä»¶"><a href="#springmvcçš„é…ç½®æ–‡ä»¶" class="headerlink" title="springmvcçš„é…ç½®æ–‡ä»¶"></a>springmvcçš„é…ç½®æ–‡ä»¶</h2><p>åœ¨resourcesä¸­New-&gt;XML Configuration File-&gt;Spring Config</p><p>åç§°æ²¡æœ‰è¦æ±‚ï¼Œè¿™é‡Œå«springmvc</p><p>å¯¼å…¥åç§°ç©ºé—´ï¼Œå¼€å¯æ³¨è§£æ‰«æ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼€å¯æ³¨è§£æ‰«æ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.test"</span>/&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"internalResourceViewResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®æ–‡ä»¶ç›®å½• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/pages"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®åç¼€å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- å¼€å¯SpringMVCæ¡†æ¶æ³¨è§£æ”¯æŒ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="éƒ¨ç½²æœåŠ¡å™¨"><a href="#éƒ¨ç½²æœåŠ¡å™¨" class="headerlink" title="éƒ¨ç½²æœåŠ¡å™¨"></a>éƒ¨ç½²æœåŠ¡å™¨</h2><p>Add Configuration</p><p>åŠ ä¸€ä¸ªæœ¬åœ°çš„Tomcat</p><p>åœ¨Deploymentä¸­æ·»åŠ </p><img src="/images/2020/screencapture2020-04-03 AM11.15.26.jpg"><h1 id="ä»£ç ç¼–å†™"><a href="#ä»£ç ç¼–å†™" class="headerlink" title="ä»£ç ç¼–å†™"></a>ä»£ç ç¼–å†™</h1><h2 id="index-jsp"><a href="#index-jsp" class="headerlink" title="index.jsp"></a>index.jsp</h2><p>é»˜è®¤è‡ªå¸¦çš„index.jspæ²¡æœ‰å¤´æ–‡ä»¶ä¿¡æ¯ï¼Œä¸­æ–‡å¯èƒ½ä¼šæœ‰ä¹±ç é—®é¢˜</p><p>å¯ä»¥åˆ äº†é‡æ–°åˆ›å»ºä¸€ä¸ª</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;å…¥é—¨ç¨‹åº&lt;/h1&gt;</span><br><span class="line">    &lt;a href="hello"&gt;ç‚¹è¿™é‡Œ&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="HelloController-java"><a href="#HelloController-java" class="headerlink" title="HelloController.java"></a>HelloController.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.test.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(path=<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello Spring"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œè¿”å›â€successâ€ï¼Œè§„åˆ™é»˜è®¤è¿”å›è¿™ä¸ªåå­—çš„jsp</p><h2 id="success-jsp"><a href="#success-jsp" class="headerlink" title="success.jsp"></a>success.jsp</h2><p>å¯ä»¥åœ¨WEB-INFä¸­æ–°å»ºpagesæ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢æ–°å»ºsuccess.jsp</p><p>åŠ ä¸€ä¸ªä¸€çº§æ ‡é¢˜</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;æˆåŠŸ&lt;/h1&gt;</span><br></pre></td></tr></table></figure><h1 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h1><img src="/images/2020/screencapture2020-04-03 AM11.39.30.jpg"><p>ç‚¹å‡»</p><img src="/images/2020/screencapture2020-04-03 AM11.40.09.jpg"><p>æ§åˆ¶å°è¾“å‡º</p><img src="/images/2020/screencapture2020-04-03 AM11.40.58.jpg"><p>æˆåŠŸ</p><h1 id="å…¥é—¨æ¡ˆä¾‹æµç¨‹æ€»ç»“"><a href="#å…¥é—¨æ¡ˆä¾‹æµç¨‹æ€»ç»“" class="headerlink" title="å…¥é—¨æ¡ˆä¾‹æµç¨‹æ€»ç»“"></a>å…¥é—¨æ¡ˆä¾‹æµç¨‹æ€»ç»“</h1> <img src="/images/2020/screencapture2020-04-04 PM5.05.25.jpg"> <img src="/images/2020/screencapture2020-04-04 PM5.06.01.jpg"><h1 id="RequestMappingæ³¨è§£"><a href="#RequestMappingæ³¨è§£" class="headerlink" title="RequestMappingæ³¨è§£"></a>RequestMappingæ³¨è§£</h1><p><strong>ä½œç”¨</strong></p><p>å»ºç«‹è¯·æ±‚urlå’Œå¤„ç†è¯·æ±‚æ–¹æ³•ä¹‹é—´çš„å¯¹åº”å…³ç³»</p><p>å¯ä»¥åŠ åœ¨æ–¹æ³•ä¸Šï¼Œä¹Ÿå¯ä»¥åŠ åœ¨ç±»ä¸Šï¼ˆç›¸å½“äºä¸€çº§ç›®å½•ï¼‰</p><p>å¦‚ç±»ä¸ŠåŠ â€/userâ€ï¼Œæ–¹æ³•ä¸ŠåŠ â€/helloâ€ï¼Œè·³è½¬æ—¶è¯·æ±‚è·¯å¾„ä¸ºâ€user/helloâ€</p><p><strong>å±æ€§</strong></p><p>pathå’Œvalueï¼šä½œç”¨ç›¸åŒï¼ŒæŒ‡æ˜ å°„è·¯å¾„ï¼Œå½“åªæœ‰valueä¸€ä¸ªå±æ€§æ—¶ï¼Œâ€value=â€å¯ä»¥çœç•¥ä¸å†™</p><p>methodï¼šæŒ‡å½“å‰æ–¹æ³•å¯ä»¥æ¥å—çš„è¯·æ±‚æ–¹å¼ï¼Œå‚æ•°å¯ä»¥æ˜¯æ•°ç»„ï¼Œé‡Œé¢æ˜¯æšä¸¾ç±»å‹ï¼ˆå¦‚RequestMathod.POSTï¼‰</p><p>paramsï¼šç”¨äºæŒ‡å®šé™åˆ¶è¯·æ±‚å‚æ•°çš„æ¡ä»¶ï¼Œæ”¯æŒç®€å•çš„è¡¨è¾¾å¼ï¼ˆå¦‚params={â€œusername=heâ€}ï¼Œè¡¨ç¤ºè¯·æ±‚å‚æ•°ä¸­å¿…é¡»æœ‰usernameï¼Œä¸”å€¼å¿…é¡»ä¸ºheï¼‰</p><p>headersï¼šå‘é€çš„è¯·æ±‚å¿…é¡»åŒ…å«è¯·æ±‚å¤´</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1Sb411s7qa&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/BV1Sb411
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="springmvc" scheme="http://yoursite.com/tags/springmvc/"/>
    
  </entry>
  
  <entry>
    <title>MyBatisç¬”è®°09 æ³¨è§£å¼€å‘</title>
    <link href="http://yoursite.com/2020/04/02/note-mybatis-09/"/>
    <id>http://yoursite.com/2020/04/02/note-mybatis-09/</id>
    <published>2020-04-02T13:45:52.000Z</published>
    <updated>2020-04-02T14:41:26.452Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.bilibili.com/video/BV1Db411s7F5" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Db411s7F5</a></p><p>P68~75</p></blockquote><h1 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h1><h2 id="å¯¼åæ ‡"><a href="#å¯¼åæ ‡" class="headerlink" title="å¯¼åæ ‡"></a>å¯¼åæ ‡</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å‡†å¤‡å®ä½“ç±»å’Œæ¥å£"><a href="#å‡†å¤‡å®ä½“ç±»å’Œæ¥å£" class="headerlink" title="å‡†å¤‡å®ä½“ç±»å’Œæ¥å£"></a>å‡†å¤‡å®ä½“ç±»å’Œæ¥å£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// get set ...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><p>æ˜ å°„é…ç½®æ–‡ä»¶å¯ä»¥ä¸è¦äº†ï¼Œä½†ä¸»é…ç½®æ–‡ä»¶ä¸èƒ½çœç•¥</p><p>ï¼ˆå¦‚æœä½¿ç”¨æ³¨è§£å¼€å‘ï¼Œä½†ç›¸åº”è·¯å¾„ä¸‹å­˜åœ¨å¯¹åº”çš„xmlï¼Œä¸ç®¡ç”¨ä¸ç”¨éƒ½ä¼šæŠ¥é”™ï¼‰</p><p>SqlMapConfig.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"jdbcConfig.properties"</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®åˆ«å--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.itheima.domain"</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®ç¯å¢ƒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æŒ‡å®šå¸¦æœ‰æ³¨è§£çš„daoæ¥å£æ‰€åœ¨ä½ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.itheima.dao"</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jdbcConfig.propertiesä¸­é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver&#x3D;com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;eesy_mybatis</span><br><span class="line">jdbc.username&#x3D;root</span><br><span class="line">jdbc.password&#x3D;1234</span><br></pre></td></tr></table></figure><h1 id="å•è¡¨CRUD"><a href="#å•è¡¨CRUD" class="headerlink" title="å•è¡¨CRUD"></a>å•è¡¨CRUD</h1><p>åœ¨mybatisä¸­é’ˆå¯¹CRUDå…±æœ‰å››ä¸ªæ³¨è§£ï¼š@Select @Insert @Update @Delete</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¢</span></span><br><span class="line">  <span class="meta">@Insert</span>(<span class="string">"insert into user(username,address,sex,birthday)values(#&#123;username&#125;,#&#123;address&#125;,#&#123;sex&#125;,#&#123;birthday&#125;)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">saveUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// åˆ </span></span><br><span class="line">  <span class="meta">@Delete</span>(<span class="string">"delete from user where id=#&#123;id&#125; "</span>)</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">(Integer userId)</span></span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æ”¹</span></span><br><span class="line">  <span class="meta">@Update</span>(<span class="string">"update user set username=#&#123;username&#125;,sex=#&#123;sex&#125;,birthday=#&#123;birthday&#125;,address=#&#123;address&#125; where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// æŸ¥</span></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user"</span>)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Select</span>(<span class="string">"select * from user  where id=#&#123;id&#125; "</span>)</span><br><span class="line">    <span class="function">User <span class="title">findById</span><span class="params">(Integer userId)</span></span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æ–¹æ³•ä¸€ï¼šè¿™é‡Œ#&#123;username&#125;æ²¡æœ‰%ï¼ŒæŸ¥è¯¢æ—¶è¦ä¼ å…¥å¦‚â€œ%ç‹%â€</span></span><br><span class="line">  <span class="meta">@Select</span>(<span class="string">"select * from user where username like #&#123;username&#125; "</span>)</span><br><span class="line">  <span class="comment">// æ–¹æ³•äºŒï¼š$&#123;&#125;ä¸­å›ºå®šå†™valueï¼Œä¼ å‚æ—¶ä¸ç”¨å†™%</span></span><br><span class="line">  <span class="meta">@Select</span>(<span class="string">"select * from user where username like '%$&#123;value&#125;%' "</span>)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findUserByName</span><span class="params">(String username)</span></span>;</span><br><span class="line">  <span class="comment">// åŒºåˆ«å’Œä¹‹å‰ä¸€æ ·ï¼Œä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä¸€ä¸ªæ˜¯å‚æ•°å ä½ç¬¦</span></span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Select</span>(<span class="string">"select count(*) from user "</span>)</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findTotalUser</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationCRUDTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> InputStream in;</span><br><span class="line">    <span class="keyword">private</span> SqlSessionFactory factory;</span><br><span class="line">    <span class="keyword">private</span> SqlSession session;</span><br><span class="line">    <span class="keyword">private</span> IUserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span><span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">// 1.è·å–å­—èŠ‚è¾“å…¥æµ</span></span><br><span class="line">        in = Resources.getResourceAsStream(<span class="string">"SqlMapConfig.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.æ ¹æ®å­—èŠ‚è¾“å…¥æµæ„å»ºSqlSessionFactory</span></span><br><span class="line">        factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);</span><br><span class="line">        <span class="comment">// 3.æ ¹æ®SqlSessionFactoryç”Ÿäº§ä¸€ä¸ªSqlSession</span></span><br><span class="line">        session = factory.openSession();</span><br><span class="line">        <span class="comment">// 4.ä½¿ç”¨SqlSessionè·å–Daoçš„ä»£ç†å¯¹è±¡</span></span><br><span class="line">        userDao = session.getMapper(IUserDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span><span class="keyword">throws</span>  Exception</span>&#123;</span><br><span class="line">        <span class="comment">// æäº¤</span></span><br><span class="line">        session.commit();</span><br><span class="line">        <span class="comment">// é‡Šæ”¾èµ„æº</span></span><br><span class="line">        session.close();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSave</span><span class="params">()</span></span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setUsername(<span class="string">"mybatis annotation"</span>);</span><br><span class="line">        user.setAddress(<span class="string">"åŒ—äº¬å¸‚æ˜Œå¹³åŒº"</span>);</span><br><span class="line"></span><br><span class="line">        userDao.saveUser(user);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ä½“ç±»å±æ€§å’Œæ•°æ®åº“ä¸å¯¹åº”é—®é¢˜"><a href="#å®ä½“ç±»å±æ€§å’Œæ•°æ®åº“ä¸å¯¹åº”é—®é¢˜" class="headerlink" title="å®ä½“ç±»å±æ€§å’Œæ•°æ®åº“ä¸å¯¹åº”é—®é¢˜"></a>å®ä½“ç±»å±æ€§å’Œæ•°æ®åº“ä¸å¯¹åº”é—®é¢˜</h2><p>å®ä½“ç±»ä¸­åç§°å’Œè¡¨ä¸­å¯¹ä¸ä¸Šæ—¶ï¼ˆuserName &amp; usernameï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer userId;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String userAddress;</span><br><span class="line">    <span class="keyword">private</span> String userSex;</span><br><span class="line">    <span class="keyword">private</span> Date userBirthday;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨åˆ«åï¼Œä½†æ˜¯æ‰€æœ‰ä½ç½®éƒ½è¦ä½¿ç”¨åˆ«åï¼Œæ¯”è¾ƒéº»çƒ¦</p><p>å¯ä»¥ä½¿ç”¨@Resultsæ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user"</span>)</span><br><span class="line">    <span class="meta">@Results</span>(id=<span class="string">"userMap"</span>,value=&#123;</span><br><span class="line">            <span class="meta">@Result</span>(id=<span class="keyword">true</span>,column = <span class="string">"id"</span>,property = <span class="string">"userId"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(column = <span class="string">"username"</span>,property = <span class="string">"userName"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(column = <span class="string">"address"</span>,property = <span class="string">"userAddress"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(column = <span class="string">"sex"</span>,property = <span class="string">"userSex"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(column = <span class="string">"birthday"</span>,property = <span class="string">"userBirthday"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Select</span>(<span class="string">"select * from user  where id=#&#123;id&#125; "</span>)</span><br><span class="line">    <span class="meta">@ResultMap</span>(<span class="string">"userMap"</span>)</span><br><span class="line">    <span class="function">User <span class="title">findById</span><span class="params">(Integer userId)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»é”®ï¼šid=true</p><p>å…¶å®ƒä½ç½®ç”¨@ResultMapå¼•ç”¨</p><p>æ ‡å‡†å†™æ³•@ResultMap(value={â€œuserMapâ€})</p><p>ç”±äºåªæœ‰ä¸€ä¸ªå±æ€§ï¼Œvalueå¯ä»¥çœç•¥ï¼›æ•°ç»„ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œ{}å¯ä»¥çœç•¥</p><p>äºæ˜¯å¯ä»¥ç›´æ¥å†™@ResultMap(â€œuserMapâ€)</p><h1 id="å¤šè¡¨æŸ¥è¯¢"><a href="#å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="å¤šè¡¨æŸ¥è¯¢"></a>å¤šè¡¨æŸ¥è¯¢</h1><h2 id="å®ä½“ç±»å’Œæ¥å£"><a href="#å®ä½“ç±»å’Œæ¥å£" class="headerlink" title="å®ä½“ç±»å’Œæ¥å£"></a>å®ä½“ç±»å’Œæ¥å£</h2><p>å†å»ºä¸€ä¸ªè´¦æˆ·</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//å¤šå¯¹ä¸€ï¼ˆmybatisä¸­ç§°ä¸ºä¸€å¯¹ä¸€ï¼‰çš„æ˜ å°„ï¼šä¸€ä¸ªè´¦æˆ·åªèƒ½å±äºä¸€ä¸ªç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// get set ...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ç”¨æˆ·å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer userId;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String userAddress;</span><br><span class="line">    <span class="keyword">private</span> String userSex;</span><br><span class="line">    <span class="keyword">private</span> Date userBirthday;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸€å¯¹å¤šå…³ç³»æ˜ å°„ï¼šä¸€ä¸ªç”¨æˆ·å¯¹åº”å¤šä¸ªè´¦æˆ·</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Account&gt; accounts;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// get set ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸€å¯¹ä¸€æŸ¥è¯¢"><a href="#ä¸€å¯¹ä¸€æŸ¥è¯¢" class="headerlink" title="ä¸€å¯¹ä¸€æŸ¥è¯¢"></a>ä¸€å¯¹ä¸€æŸ¥è¯¢</h2><p>æŸ¥è´¦æˆ·ä»¥åŠæ‰€å±çš„ç”¨æˆ·</p><p>IAccountDaoä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Select</span>(<span class="string">"select * from account"</span>)</span><br><span class="line"><span class="meta">@Results</span>(id=<span class="string">"accountMap"</span>,value = &#123;</span><br><span class="line">  <span class="meta">@Result</span>(id=<span class="keyword">true</span>,column = <span class="string">"id"</span>,property = <span class="string">"id"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(column = <span class="string">"uid"</span>,property = <span class="string">"uid"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(column = <span class="string">"money"</span>,property = <span class="string">"money"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(property = <span class="string">"user"</span>,column = <span class="string">"uid"</span>,one=<span class="meta">@One</span>(select=<span class="string">"com.itheima.dao.IUserDao.findById"</span>,fetchType= FetchType.EAGER))</span><br><span class="line">&#125;)</span><br><span class="line"><span class="function">List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¸ä½¿ç”¨left outer joinï¼Œä½¿ç”¨@One</p><p>selectè¦æ‰¾åˆ°èƒ½å®ç°åŠŸèƒ½çš„æ–¹æ³•ï¼Œå³IUserDaoä¸­findByIdï¼Œæ¥æŸ¥è¯¢è´¦æˆ·æ‰€å±çš„ç”¨æˆ·</p><p>FetchTypeå¯ä»¥é…ç½®å»¶è¿ŸåŠ è½½ï¼ˆLAZYï¼‰ï¼Œæˆ–ç«‹å³åŠ è½½ï¼ˆEAGERï¼‰</p><p>å®é™…å¼€å‘æ—¶å¯¹ä¸€ä¸€èˆ¬é€‰æ‹©ç«‹å³åŠ è½½ï¼Œå¯¹å¤šä¸€èˆ¬é€‰æ‹©å»¶è¿ŸåŠ è½½</p><h2 id="ä¸€å¯¹å¤šæŸ¥è¯¢"><a href="#ä¸€å¯¹å¤šæŸ¥è¯¢" class="headerlink" title="ä¸€å¯¹å¤šæŸ¥è¯¢"></a>ä¸€å¯¹å¤šæŸ¥è¯¢</h2><p>æŸ¥ä¸€ä¸ªç”¨æˆ·ï¼Œå’Œè¯¥ç”¨æˆ·å¯¹åº”çš„å¤šä¸ªè´¦æˆ·</p><p>IUserDaoä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"select * from user"</span>)</span><br><span class="line"><span class="meta">@Results</span>(id=<span class="string">"userMap"</span>,value=&#123;</span><br><span class="line">  <span class="meta">@Result</span>(id=<span class="keyword">true</span>,column = <span class="string">"id"</span>,property = <span class="string">"userId"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(column = <span class="string">"username"</span>,property = <span class="string">"userName"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(column = <span class="string">"address"</span>,property = <span class="string">"userAddress"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(column = <span class="string">"sex"</span>,property = <span class="string">"userSex"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(column = <span class="string">"birthday"</span>,property = <span class="string">"userBirthday"</span>),</span><br><span class="line">  <span class="meta">@Result</span>(property = <span class="string">"accounts"</span>,column = <span class="string">"id"</span>,</span><br><span class="line">          many = <span class="meta">@Many</span>(select = <span class="string">"com.itheima.dao.IAccountDao.findAccountByUid"</span>,</span><br><span class="line">                       fetchType = FetchType.LAZY))</span><br><span class="line">&#125;)</span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><p>ç”¨@Many</p><p>IAccountDaoä¸­åŠ ä¸€ä¸ªæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"select * from account where uid = #&#123;userId&#125;"</span>)</span><br><span class="line"><span class="function">List&lt;Account&gt; <span class="title">findAccountByUid</span><span class="params">(Integer userId)</span></span>;</span><br></pre></td></tr></table></figure><h1 id="ç¼“å­˜é…ç½®"><a href="#ç¼“å­˜é…ç½®" class="headerlink" title="ç¼“å­˜é…ç½®"></a>ç¼“å­˜é…ç½®</h1><p>ä¸ç®¡ç”¨xmlè¿˜æ˜¯æ³¨è§£ï¼Œä¸€çº§ç¼“å­˜é»˜è®¤éƒ½æ˜¯å¼€çš„</p><p>æ‰“å¼€äºŒçº§æ³¨è§£ï¼Œå…¨å±€é…ç½®é»˜è®¤ä¹Ÿæ˜¯æ‰“å¼€</p><p>å¯¹äºå•ä¸ªç±»ï¼Œä½¿ç”¨@CacheNamespaceï¼ˆé»˜è®¤æ˜¯falseï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CacheNamespace</span>(blocking = <span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å³å¯å¼€å¯äºŒçº§ç¼“å­˜</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1Db411s7F5&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/BV1Db411
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="mybatis" scheme="http://yoursite.com/tags/mybatis/"/>
    
  </entry>
  
  <entry>
    <title>MyBatisç¬”è®°08 å»¶è¿ŸåŠ è½½ä¸ç¼“å­˜</title>
    <link href="http://yoursite.com/2020/04/02/note-mybatis-08/"/>
    <id>http://yoursite.com/2020/04/02/note-mybatis-08/</id>
    <published>2020-04-02T07:54:43.000Z</published>
    <updated>2020-04-02T09:41:01.666Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.bilibili.com/video/BV1Db411s7F5" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Db411s7F5</a></p><p>P60~67</p></blockquote><h1 id="å»¶è¿ŸåŠ è½½"><a href="#å»¶è¿ŸåŠ è½½" class="headerlink" title="å»¶è¿ŸåŠ è½½"></a>å»¶è¿ŸåŠ è½½</h1><p>å»¶è¿ŸåŠ è½½ï¼šåœ¨çœŸæ­£ä½¿ç”¨æ•°æ®æ—¶æ‰å‘èµ·æŸ¥è¯¢ï¼Œä¸ç”¨çš„æ—¶å€™ä¸æŸ¥è¯¢ï¼ŒæŒ‰éœ€åŠ è½½ï¼ˆæ‡’åŠ è½½ï¼‰</p><p>ç«‹å³åŠ è½½ï¼šä¸ç®¡ç”¨ä¸ç”¨ï¼Œåªè¦ä¸€è°ƒç”¨æ–¹æ³•ï¼Œé©¬ä¸Šå‘èµ·æŸ¥è¯¢</p><p>ä¸€èˆ¬ä¸€å¯¹å¤šã€å¤šå¯¹å¤šé‡‡ç”¨å»¶è¿ŸåŠ è½½ï¼›å¤šå¯¹ä¸€ã€ä¸€å¯¹ä¸€é‡‡ç”¨ç«‹å³åŠ è½½</p><p>æŸ¥å®˜ç½‘æ–‡æ¡£</p><p>æ‰¾åˆ°å»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³</p><p>åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®å‚æ•°--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--å¼€å¯Mybatisæ”¯æŒå»¶è¿ŸåŠ è½½--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"lazyLoadingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"aggressiveLazyLoading"</span> <span class="attr">value</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ä¸€å¯¹ä¸€å®ç°å»¶è¿ŸåŠ è½½"><a href="#ä¸€å¯¹ä¸€å®ç°å»¶è¿ŸåŠ è½½" class="headerlink" title="ä¸€å¯¹ä¸€å®ç°å»¶è¿ŸåŠ è½½"></a>ä¸€å¯¹ä¸€å®ç°å»¶è¿ŸåŠ è½½</h2><p>ä»ç„¶æ˜¯IAccountDaoçš„findAllæ–¹æ³•</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å®šä¹‰å°è£…accountå’Œuserçš„resultMap --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"accountUserMap"</span> <span class="attr">type</span>=<span class="string">"account"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"uid"</span> <span class="attr">column</span>=<span class="string">"uid"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"money"</span> <span class="attr">column</span>=<span class="string">"money"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ä¸€å¯¹ä¸€çš„å…³ç³»æ˜ å°„ï¼šé…ç½®å°è£…userçš„å†…å®¹</span></span><br><span class="line"><span class="comment">        selectå±æ€§æŒ‡å®šçš„å†…å®¹ï¼šæŸ¥è¯¢ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ï¼š</span></span><br><span class="line"><span class="comment">        columnå±æ€§æŒ‡å®šçš„å†…å®¹ï¼šç”¨æˆ·æ ¹æ®idæŸ¥è¯¢æ—¶ï¼Œæ‰€éœ€è¦çš„å‚æ•°çš„å€¼</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"user"</span> <span class="attr">column</span>=<span class="string">"uid"</span> <span class="attr">javaType</span>=<span class="string">"user"</span> <span class="attr">select</span>=<span class="string">"com.itheima.dao.IUserDao.findById"</span>&gt;</span><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æŸ¥è¯¢æ‰€æœ‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"accountUserMap"</span>&gt;</span></span><br><span class="line">  select * from account</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>IUserDao.xmlä¸­éœ€è¦é…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ ¹æ®idæŸ¥è¯¢ç”¨æˆ· --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">parameterType</span>=<span class="string">"INT"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  select * from user where id = #&#123;uid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•æ—¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">  List&lt;Account&gt; accounts = accountDao.findAll();</span><br><span class="line">  <span class="comment">//        for(Account account : accounts)&#123;</span></span><br><span class="line">  <span class="comment">//            System.out.println("--------æ¯ä¸ªaccountçš„ä¿¡æ¯------------");</span></span><br><span class="line">  <span class="comment">//            System.out.println(account);</span></span><br><span class="line">  <span class="comment">//            System.out.println(account.getUser());</span></span><br><span class="line">  <span class="comment">//        &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“æŠŠæ‰“å°ç”¨æˆ·ä¿¡æ¯æ³¨é‡Šæ‰ï¼Œè°ƒç”¨åªfindAll()æ—¶ä¸ä¼šåŠ è½½æ¯ä¸ªç”¨æˆ·ä¿¡æ¯</p><p>åªæœ‰å®é™…ç”¨åˆ°Userçš„æ—¶å€™æ‰ä¼šæ‰§è¡ŒæŸ¥è¯¢ç”¨æˆ·çš„æ“ä½œ</p><h2 id="ä¸€å¯¹å¤šå®ç°å»¶è¿ŸåŠ è½½"><a href="#ä¸€å¯¹å¤šå®ç°å»¶è¿ŸåŠ è½½" class="headerlink" title="ä¸€å¯¹å¤šå®ç°å»¶è¿ŸåŠ è½½"></a>ä¸€å¯¹å¤šå®ç°å»¶è¿ŸåŠ è½½</h2><p>IUserDao.xmlä¸­</p><p>ä¸å†ä½¿ç”¨left outer join</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å®šä¹‰Userçš„resultMap--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"userAccountMap"</span> <span class="attr">type</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"username"</span> <span class="attr">column</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"address"</span> <span class="attr">column</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"sex"</span> <span class="attr">column</span>=<span class="string">"sex"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"birthday"</span> <span class="attr">column</span>=<span class="string">"birthday"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- é…ç½®userå¯¹è±¡ä¸­accountsé›†åˆçš„æ˜ å°„ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"accounts"</span> <span class="attr">ofType</span>=<span class="string">"account"</span> <span class="attr">select</span>=<span class="string">"com.itheima.dao.IAccountDao.findAccountByUid"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æŸ¥è¯¢æ‰€æœ‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"userAccountMap"</span>&gt;</span></span><br><span class="line">  select * from user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>IAccountDao.xmlä¸­éœ€è¦</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢è´¦æˆ·åˆ—è¡¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAccountByUid"</span> <span class="attr">resultType</span>=<span class="string">"account"</span>&gt;</span></span><br><span class="line">  select * from account where uid = #&#123;uid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šéƒ½æ˜¯åœ¨è¦ç”¨çš„æ—¶å€™æ‰å»è°ƒå¦ä¸€ä¸ªç±»ä¸­å…·ä½“çš„æŸ¥è¯¢æ–¹æ³•</p><h1 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h1><p>é€‚ç”¨äºç¼“å­˜çš„æ•°æ®ï¼šç»å¸¸æŸ¥è¯¢ä¸”ä¸å¸¸ä¿®æ”¹ã€æ•°æ®çš„æ­£ç¡®ä¸å¦å¯¹æœ€ç»ˆç»“æœå½±å“ä¸å¤§</p><h2 id="MyBatisä¸­çš„ä¸€çº§ç¼“å­˜"><a href="#MyBatisä¸­çš„ä¸€çº§ç¼“å­˜" class="headerlink" title="MyBatisä¸­çš„ä¸€çº§ç¼“å­˜"></a>MyBatisä¸­çš„ä¸€çº§ç¼“å­˜</h2><p>æŒ‡çš„æ˜¯MyBatisä¸­çš„SqlSessionå¯¹è±¡çš„ç¼“å­˜</p><p>æ‰§è¡ŒæŸ¥è¯¢åï¼ŒæŸ¥è¯¢ç»“æœä¼šåŒæ—¶å­˜å…¥SqlSessionæä¾›çš„ä¸€å—åŒºåŸŸä¸­ï¼Œæ”¹åŒºåŸŸçš„ç»“æ„æ˜¯ä¸€ä¸ªMap</p><p>å†æ¬¡æŸ¥è¯¢åŒæ ·çš„æ•°æ®æ—¶ï¼ŒMyBatisä¼šå…ˆå»SqlSessionä¸­æŸ¥è¯¢æ˜¯å¦æœ‰ç»“æœï¼Œæœ‰çš„è¯ç›´æ¥æ‹¿å‡ºæ¥ç”¨</p><p>å½“SqlSessionå¯¹è±¡æ¶ˆå¤±æ—¶ï¼Œä¸€çº§ç¼“å­˜ä¹Ÿæ¶ˆå¤±</p><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFirstLevelCache</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="comment">// æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">  User user1 = userDao.findById(<span class="number">41</span>);</span><br><span class="line">  System.out.println(user1);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å†æ¬¡æŸ¥è¯¢åŒä¸€ç”¨æˆ·</span></span><br><span class="line">  User user2 = userDao.findById(<span class="number">41</span>);</span><br><span class="line">  System.out.println(user2);</span><br><span class="line"></span><br><span class="line">  System.out.println(user1 == user2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰“å°å‘ç°user1å’Œuser2æ˜¯åŒä¸€ä¸ªï¼Œä¸”æ—¥å¿—ä¿¡æ¯ä¸­åªè®°å½•äº†ä¸€æ¬¡æŸ¥è¯¢</p><p>è¯´æ˜user2æ˜¯ç›´æ¥ä»ç¼“å­˜ä¸­å–çš„</p><p>å¦‚æœåœ¨ä¸¤æ¬¡æŸ¥è¯¢ä¸­å…³é—­SqlSession</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFirstLevelCache</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="comment">// æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">  User user1 = userDao.findById(<span class="number">41</span>);</span><br><span class="line">  System.out.println(user1);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…³é—­å¹¶é‡æ–°è·å–Session</span></span><br><span class="line">  sqlSession.close();</span><br><span class="line">  sqlSession = factory.openSession();</span><br><span class="line">  userDao = sqlSession.getMapper(IUserDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å†æ¬¡æŸ¥è¯¢åŒä¸€ç”¨æˆ·</span></span><br><span class="line">  User user2 = userDao.findById(<span class="number">41</span>);</span><br><span class="line">  System.out.println(user2);</span><br><span class="line"></span><br><span class="line">  System.out.println(user1 == user2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ¬¡ä¸¤ä¸ªå¯¹è±¡ä¸åŒäº†</p><p>sqlSession.clearCache() å¯ä»¥æ¸…ç¼“å­˜ï¼Œä¸¤ä¸ªå¯¹è±¡ä¹Ÿä¸åŒ</p><h2 id="è§¦å‘æ¸…ç©ºä¸€çº§ç¼“å­˜çš„æƒ…å†µ"><a href="#è§¦å‘æ¸…ç©ºä¸€çº§ç¼“å­˜çš„æƒ…å†µ" class="headerlink" title="è§¦å‘æ¸…ç©ºä¸€çº§ç¼“å­˜çš„æƒ…å†µ"></a>è§¦å‘æ¸…ç©ºä¸€çº§ç¼“å­˜çš„æƒ…å†µ</h2><p>è°ƒç”¨SqlSessionçš„ä¿®æ”¹ã€æ·»åŠ ã€åˆ é™¤ã€æäº¤ã€å…³é—­ç­‰æ–¹æ³•æ—¶ï¼Œä¼šæ¸…ç©ºä¸€çº§ç¼“å­˜</p><p>å¦‚åœ¨ä¸¤æ¬¡æŸ¥è¯¢ä¸­æ›´æ–°ç”¨æˆ·</p><p>é…ç½®æ–‡ä»¶ä¸­åŠ æ›´æ–°æ–¹æ³•</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ›´æ–°ç”¨æˆ·ä¿¡æ¯--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateUser"</span> <span class="attr">parameterType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  update user set username=#&#123;username&#125;,address=#&#123;address&#125; where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•æ—¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testClearlCache</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="comment">// 1.æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">  User user1 = userDao.findById(<span class="number">41</span>);</span><br><span class="line">  System.out.println(user1);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.æ›´æ–°ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">  user1.setUsername(<span class="string">"update user clear cache"</span>);</span><br><span class="line">  user1.setAddress(<span class="string">"åŒ—äº¬å¸‚æµ·æ·€åŒº"</span>);</span><br><span class="line">  userDao.updateUser(user1);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3.å†æ¬¡æŸ¥è¯¢idä¸º41çš„ç”¨æˆ·</span></span><br><span class="line">  User user2 = userDao.findById(<span class="number">41</span>);</span><br><span class="line">  System.out.println(user2);</span><br><span class="line"></span><br><span class="line">  System.out.println(user1 == user2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ›´æ–°ä¹‹åå†æŸ¥è¯¢ï¼Œä¼šå‘èµ·ä¸€æ¬¡æ–°çš„æŸ¥è¯¢</p><h2 id="MyBatisä¸­çš„äºŒçº§ç¼“å­˜"><a href="#MyBatisä¸­çš„äºŒçº§ç¼“å­˜" class="headerlink" title="MyBatisä¸­çš„äºŒçº§ç¼“å­˜"></a>MyBatisä¸­çš„äºŒçº§ç¼“å­˜</h2><p>æŒ‡çš„æ˜¯MyBatisä¸­SqlSessionFactoryå¯¹è±¡çš„ç¼“å­˜ï¼Œç”±åŒä¸€ä¸ªSqlSessionFactoryå¯¹è±¡åˆ›å»ºçš„SqlSessionå…±äº«å…¶ç¼“å­˜</p><img src="/images/2020/screencapture2020-04-02PM5.34.35.jpg"><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ol><li><p>è®©MyBatisæ¡†æ¶æ”¯æŒäºŒçº§ç¼“å­˜ï¼ˆåœ¨SqlMapConfig.xmlä¸­é…ç½®ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"cacheEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ï¼ˆä¸é…ä¹Ÿè¡Œï¼Œé»˜è®¤æ˜¯trueï¼‰</p></li><li><p>è®©å½“å‰çš„æ˜ å°„æ–‡ä»¶æ”¯æŒäºŒçº§ç¼“å­˜ï¼ˆåœ¨IUserDao.xmlä¸­é…ç½®ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¼€å¯useræ”¯æŒäºŒçº§ç¼“å­˜--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>è®©å½“å‰çš„æ“ä½œæ”¯æŒäºŒçº§ç¼“å­˜ï¼ˆåœ¨selectæ ‡ç­¾ä¸­é…ç½®ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- æ ¹æ®idæŸ¥è¯¢ç”¨æˆ· --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">parameterType</span>=<span class="string">"INT"</span> <span class="attr">resultType</span>=<span class="string">"user"</span> <span class="attr">useCache</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">  select * from user where id = #&#123;uid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SqlSession sqlSession1 = factory.openSession();</span><br><span class="line">IUserDao dao1 = sqlSession1.getMapper(IUserDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">User user1 = dao1.findById(<span class="number">41</span>);</span><br><span class="line">System.out.println(user1);</span><br><span class="line">sqlSession1.close();</span><br><span class="line"></span><br><span class="line">SqlSession sqlSession2 = factory.openSession();</span><br><span class="line">IUserDao dao2 = sqlSession2.getMapper(IUserDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">User user2 = dao2.findById(<span class="number">41</span>);</span><br><span class="line">System.out.println(user2);</span><br><span class="line">sqlSession2.close();</span><br><span class="line"></span><br><span class="line">System.out.println(user1 == user2);</span><br></pre></td></tr></table></figure><p>å‘ç°ç¬¬äºŒæ¬¡å¹¶æ²¡æœ‰æŸ¥è¯¢ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–</p><p>ä½†æ˜¯æ‰“å°ç»“æœä¸ºfalse</p><p>å› ä¸ºäºŒçº§ç¼“å­˜ä¸­å­˜æ”¾çš„æ˜¯æ•°æ®ï¼Œè€Œä¸æ˜¯å¯¹è±¡</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1Db411s7F5&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/BV1Db411
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="mybatis" scheme="http://yoursite.com/tags/mybatis/"/>
    
  </entry>
  
  <entry>
    <title>MyBatisç¬”è®°07 å¤šè¡¨æŸ¥è¯¢</title>
    <link href="http://yoursite.com/2020/03/31/note-mybatis-07/"/>
    <id>http://yoursite.com/2020/03/31/note-mybatis-07/</id>
    <published>2020-03-31T02:32:43.000Z</published>
    <updated>2020-04-10T00:39:31.248Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.bilibili.com/video/av47952553" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952553</a><br>p48~56</p></blockquote><p>è¡¨ä¹‹é—´çš„å‡ ç§å…³ç³»ï¼šä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€å¤šå¯¹å¤š</p><p>MyBatisæŠŠå¤šå¯¹ä¸€çœ‹æˆä¸€å¯¹ä¸€</p><h1 id="ç¤ºä¾‹ï¼šç”¨æˆ·å’Œè´¦æˆ·"><a href="#ç¤ºä¾‹ï¼šç”¨æˆ·å’Œè´¦æˆ·" class="headerlink" title="ç¤ºä¾‹ï¼šç”¨æˆ·å’Œè´¦æˆ·"></a>ç¤ºä¾‹ï¼šç”¨æˆ·å’Œè´¦æˆ·</h1><p>ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªè´¦æˆ·</p><p>ä¸€ä¸ªè´¦æˆ·åªèƒ½å±äºä¸€ä¸ªç”¨æˆ·</p><p>æ­¥éª¤ï¼š</p><ol><li><p>ä¸¤å¼ è¡¨ï¼ˆè´¦æˆ·è¡¨ å¤–é”®ï¼‰</p></li><li><p>ä¸¤ä¸ªå®ä½“ç±»ï¼ˆä½“ç°ä¸€å¯¹å¤šçš„å…³ç³»ï¼‰</p></li><li><p>ä¸¤ä¸ªé…ç½®æ–‡ä»¶</p></li><li><p>å®ç°é…ç½®</p><p>æŸ¥ç”¨æˆ·çš„æ‰€æœ‰è´¦æˆ·</p><p>æŸ¥è´¦æˆ·çš„ç”¨æˆ·ä¿¡æ¯</p></li></ol><h1 id="ä¸¤å¼ è¡¨"><a href="#ä¸¤å¼ è¡¨" class="headerlink" title="ä¸¤å¼ è¡¨"></a>ä¸¤å¼ è¡¨</h1><p>userè¡¨</p><table><thead><tr><th>id</th><th>username</th><th>address</th><th>sex</th><th>birthday</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>accountè¡¨</p><table><thead><tr><th>id</th><th>uid</th><th>money</th></tr></thead><tbody><tr><td>1</td><td>46</td><td>1000</td></tr><tr><td>2</td><td>45</td><td>1000</td></tr><tr><td>3</td><td>46</td><td>2000</td></tr></tbody></table><p>å¤–é”®uidï¼Œå¼•ç”¨userè¡¨çš„id</p><h1 id="ä¸¤ä¸ªå®ä½“ç±»"><a href="#ä¸¤ä¸ªå®ä½“ç±»" class="headerlink" title="ä¸¤ä¸ªå®ä½“ç±»"></a>ä¸¤ä¸ªå®ä½“ç±»</h1><h2 id="User"><a href="#User" class="headerlink" title="User"></a>User</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸€å¯¹å¤šå…³ç³»æ˜ å°„ï¼šä¸»è¡¨å®ä½“åº”è¯¥åŒ…å«ä»è¡¨å®ä½“çš„é›†åˆå¼•ç”¨</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Account&gt; accounts;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// get set ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ï¼ŒåŒæ—¶è·å–åˆ°ç”¨æˆ·ä¸‹æ‰€æœ‰è´¦æˆ·çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="function">User <span class="title">findById</span><span class="params">(Integer userId)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Account"><a href="#Account" class="headerlink" title="Account"></a>Account</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»è¡¨å®ä½“åº”è¯¥åŒ…å«ä¸€ä¸ªä¸»è¡¨å®ä½“çš„å¯¹è±¡å¼•ç”¨</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// get set ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAccountDao</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æŸ¥è¯¢æ‰€æœ‰è´¦æˆ·ï¼ŒåŒæ—¶è¿˜è¦è·å–åˆ°å½“å‰è´¦æˆ·çš„æ‰€å±ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="function">List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æŸ¥è¯¢æ‰€æœ‰è´¦æˆ·ï¼Œå¹¶ä¸”å¸¦æœ‰ç”¨æˆ·åç§°å’Œåœ°å€ä¿¡æ¯</span></span><br><span class="line">    <span class="function">List&lt;AccountUser&gt; <span class="title">findAllAccount</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¸€å¯¹ä¸€æŸ¥è¯¢"><a href="#ä¸€å¯¹ä¸€æŸ¥è¯¢" class="headerlink" title="ä¸€å¯¹ä¸€æŸ¥è¯¢"></a>ä¸€å¯¹ä¸€æŸ¥è¯¢</h1><p>æŸ¥è¯¢æ‰€æœ‰è´¦æˆ·ï¼Œå’Œè´¦æˆ·å¯¹åº”çš„ç”¨æˆ·ä¿¡æ¯</p><h2 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h2><p>æ–°å»ºä¸€ä¸ªAccountUserç±»ï¼Œä¿å­˜ç”¨æˆ·ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountUser</span> <span class="keyword">extends</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// get set ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>IAccountDao.xmlä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllAccount"</span> <span class="attr">resultType</span>=<span class="string">"accountuser"</span>&gt;</span></span><br><span class="line">  select a.*,u.username,u.address from account a , user u where u.id = a.uid;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ç§å†™ä¸€ä¸ªå­ç±»çš„æ–¹å¼å®é™…ç”¨å¾—ä¸å¤š</p><h2 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h2><p>æ›´å¸¸ç”¨ -&gt; Accountä¸­Userå¯¹è±¡å¼•ç”¨</p><p>é…ç½®IAccountDao.xmlæ—¶ä½¿ç”¨associationæ ‡ç­¾</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å®šä¹‰å°è£…accountå’Œuserçš„resultMap --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"accountUserMap"</span> <span class="attr">type</span>=<span class="string">"account"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"aid"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"uid"</span> <span class="attr">column</span>=<span class="string">"uid"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"money"</span> <span class="attr">column</span>=<span class="string">"money"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ä¸€å¯¹ä¸€çš„å…³ç³»æ˜ å°„ï¼šé…ç½®å°è£…userçš„å†…å®¹--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"user"</span> <span class="attr">column</span>=<span class="string">"uid"</span> <span class="attr">javaType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"username"</span> <span class="attr">property</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"address"</span> <span class="attr">property</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sex"</span> <span class="attr">property</span>=<span class="string">"sex"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"birthday"</span> <span class="attr">property</span>=<span class="string">"birthday"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æŸ¥è¯¢æ‰€æœ‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"accountUserMap"</span>&gt;</span></span><br><span class="line">  select u.*,a.id as aid,a.uid,a.money from account a , user u where u.id = a.uid;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="ä¸€å¯¹å¤šæŸ¥è¯¢"><a href="#ä¸€å¯¹å¤šæŸ¥è¯¢" class="headerlink" title="ä¸€å¯¹å¤šæŸ¥è¯¢"></a>ä¸€å¯¹å¤šæŸ¥è¯¢</h1><p>æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ï¼Œå’Œç”¨æˆ·ä¸‹æ‰€æœ‰è´¦æˆ·çš„ä¿¡æ¯</p><p>IUserDao.xmlä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å®šä¹‰Userçš„resultMap--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"userAccountMap"</span> <span class="attr">type</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"username"</span> <span class="attr">column</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"address"</span> <span class="attr">column</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"sex"</span> <span class="attr">column</span>=<span class="string">"sex"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"birthday"</span> <span class="attr">column</span>=<span class="string">"birthday"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- é…ç½®userå¯¹è±¡ä¸­accountsé›†åˆçš„æ˜ å°„ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"accounts"</span> <span class="attr">ofType</span>=<span class="string">"account"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"aid"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"uid"</span> <span class="attr">property</span>=<span class="string">"uid"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"money"</span> <span class="attr">property</span>=<span class="string">"money"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æŸ¥è¯¢æ‰€æœ‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"userAccountMap"</span>&gt;</span></span><br><span class="line">  select * from user u left outer join account a on u.id = a.uid</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸èƒ½å†ç”¨inner joinï¼ˆ,ï¼‰ï¼Œæ”¹æˆleft outer join</p><h1 id="å¤šå¯¹å¤šæŸ¥è¯¢ï¼ˆç”¨æˆ·-è§’è‰²ï¼‰"><a href="#å¤šå¯¹å¤šæŸ¥è¯¢ï¼ˆç”¨æˆ·-è§’è‰²ï¼‰" class="headerlink" title="å¤šå¯¹å¤šæŸ¥è¯¢ï¼ˆç”¨æˆ·-è§’è‰²ï¼‰"></a>å¤šå¯¹å¤šæŸ¥è¯¢ï¼ˆç”¨æˆ·-è§’è‰²ï¼‰</h1><p>æ­¥éª¤ï¼š</p><ol><li><p>ä¸‰å¼ è¡¨ï¼ˆç”¨æˆ·è¡¨ è§’è‰²è¡¨ è¿˜éœ€ä½¿ç”¨ä¸­é—´è¡¨ï¼‰</p></li><li><p>ä¸¤ä¸ªå®ä½“ç±»ï¼ˆä½“ç°å¤šå¯¹å¤šçš„å…³ç³»ï¼‰</p></li><li><p>ä¸¤ä¸ªé…ç½®æ–‡ä»¶</p></li><li><p>å®ç°é…ç½®</p><p>æŸ¥è¯¢ç”¨æˆ·&amp;ç”¨æˆ·çš„è§’è‰²ä¿¡æ¯</p><p>æŸ¥è¯¢è§’è‰²&amp;è§’è‰²çš„ç”¨æˆ·ä¿¡æ¯</p></li></ol><h1 id="ä¸‰å¼ è¡¨"><a href="#ä¸‰å¼ è¡¨" class="headerlink" title="ä¸‰å¼ è¡¨"></a>ä¸‰å¼ è¡¨</h1><p>ç”¨æˆ·è¡¨</p><table><thead><tr><th>id</th><th>username</th><th>address</th><th>sex</th><th>birthday</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>è§’è‰²è¡¨</p><table><thead><tr><th>id</th><th>role_name</th><th>role_desc</th></tr></thead><tbody><tr><td>1</td><td>é™¢é•¿</td><td>ç®¡ç†æ•´ä¸ªå­¦é™¢</td></tr><tr><td>2</td><td>æ€»è£</td><td>ç®¡ç†æ•´ä¸ªå…¬å¸</td></tr><tr><td>3</td><td>æ ¡é•¿</td><td>ç®¡ç†æ•´ä¸ªå­¦æ ¡</td></tr></tbody></table><p>ä¸­é—´è¡¨</p><table><thead><tr><th>uid</th><th>rid</th></tr></thead><tbody><tr><td>41</td><td>1</td></tr><tr><td>45</td><td>1</td></tr><tr><td>41</td><td>2</td></tr></tbody></table><h1 id="ä¸¤ä¸ªå®ä½“ç±»-1"><a href="#ä¸¤ä¸ªå®ä½“ç±»-1" class="headerlink" title="ä¸¤ä¸ªå®ä½“ç±»"></a>ä¸¤ä¸ªå®ä½“ç±»</h1><h2 id="User-1"><a href="#User-1" class="headerlink" title="User"></a>User</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¤šå¯¹å¤šçš„å…³ç³»æ˜ å°„ï¼šä¸€ä¸ªç”¨æˆ·å¯ä»¥å…·å¤‡å¤šä¸ªè§’è‰²</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Role&gt; roles;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// get set ...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ï¼ŒåŒæ—¶è·å–åˆ°ç”¨æˆ·ä¸‹æ‰€æœ‰è´¦æˆ·çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="function">User <span class="title">findById</span><span class="params">(Integer userId)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Role"><a href="#Role" class="headerlink" title="Role"></a>Role</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Role</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer roleId;</span><br><span class="line">    <span class="keyword">private</span> String roleName;</span><br><span class="line">    <span class="keyword">private</span> String roleDesc;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¤šå¯¹å¤šçš„å…³ç³»æ˜ å°„ï¼šä¸€ä¸ªè§’è‰²å¯ä»¥èµ‹äºˆå¤šä¸ªç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;User&gt; users;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// get set ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IRoleDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ‰€æœ‰è§’è‰²</span></span><br><span class="line">    <span class="function">List&lt;Role&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸¤ä¸ªé…ç½®æ–‡ä»¶"><a href="#ä¸¤ä¸ªé…ç½®æ–‡ä»¶" class="headerlink" title="ä¸¤ä¸ªé…ç½®æ–‡ä»¶"></a>ä¸¤ä¸ªé…ç½®æ–‡ä»¶</h2><h2 id="User-2"><a href="#User-2" class="headerlink" title="User"></a>User</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å®šä¹‰Userçš„resultMap--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"userMap"</span> <span class="attr">type</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"username"</span> <span class="attr">column</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"address"</span> <span class="attr">column</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"sex"</span> <span class="attr">column</span>=<span class="string">"sex"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"birthday"</span> <span class="attr">column</span>=<span class="string">"birthday"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- é…ç½®è§’è‰²é›†åˆçš„æ˜ å°„ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"roles"</span> <span class="attr">ofType</span>=<span class="string">"role"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"roleId"</span> <span class="attr">column</span>=<span class="string">"rid"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"roleName"</span> <span class="attr">column</span>=<span class="string">"role_name"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"roleDesc"</span> <span class="attr">column</span>=<span class="string">"role_desc"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æŸ¥è¯¢æ‰€æœ‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">  select u.*,r.id as rid,r.role_name,r.role_desc from user u</span><br><span class="line">  left outer join user_role ur  on u.id = ur.uid</span><br><span class="line">  left outer join role r on r.id = ur.rid</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ ¹æ®idæŸ¥è¯¢ç”¨æˆ· --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">parameterType</span>=<span class="string">"INT"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  select * from user where id = #&#123;uid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Role-1"><a href="#Role-1" class="headerlink" title="Role"></a>Role</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å®šä¹‰roleè¡¨çš„ResultMap--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"roleMap"</span> <span class="attr">type</span>=<span class="string">"role"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"roleId"</span> <span class="attr">column</span>=<span class="string">"rid"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"roleName"</span> <span class="attr">column</span>=<span class="string">"role_name"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"roleDesc"</span> <span class="attr">column</span>=<span class="string">"role_desc"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"users"</span> <span class="attr">ofType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"username"</span> <span class="attr">property</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"address"</span> <span class="attr">property</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sex"</span> <span class="attr">property</span>=<span class="string">"sex"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"birthday"</span> <span class="attr">property</span>=<span class="string">"birthday"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æŸ¥è¯¢æ‰€æœ‰--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"roleMap"</span>&gt;</span></span><br><span class="line">  select u.*,r.id as rid,r.role_name,r.role_desc from role r</span><br><span class="line">  left outer join user_role ur  on r.id = ur.rid</span><br><span class="line">  left outer join user u on u.id = ur.uid</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é•¿è¯­å¥æ¢è¡Œçš„æ—¶å€™æ³¨æ„åŠ ç©ºæ ¼ï¼Œé˜²æ­¢r leftå˜æˆrleft</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/av47952553&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/av47952553
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="mybatis" scheme="http://yoursite.com/tags/mybatis/"/>
    
  </entry>
  
  <entry>
    <title>MyBatisç¬”è®°06 åŠ¨æ€sqlè¯­å¥</title>
    <link href="http://yoursite.com/2020/03/30/note-mybatis-06/"/>
    <id>http://yoursite.com/2020/03/30/note-mybatis-06/</id>
    <published>2020-03-30T02:47:35.000Z</published>
    <updated>2020-03-30T03:31:42.592Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.bilibili.com/video/av47952553" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952553</a><br>p45~47</p></blockquote><h1 id="ifæ ‡ç­¾"><a href="#ifæ ‡ç­¾" class="headerlink" title="ifæ ‡ç­¾"></a>ifæ ‡ç­¾</h1><p>æ ¹æ®ä¼ å…¥å‚æ•°æ¡ä»¶æŸ¥è¯¢</p><p>æ¡ä»¶å¯èƒ½æ˜¯ç”¨æˆ·åã€æ€§åˆ«ã€åœ°å€ï¼Œæˆ–è€…éƒ½æœ‰ã€éƒ½æ²¡æœ‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IUserDao.java</span></span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">findUserByCondition</span><span class="params">(User user)</span></span>;</span><br></pre></td></tr></table></figure><p>ä¸è¦ç”¨andï¼Œä¸èƒ½ç”¨&amp;&amp;</p><p>sqlè¯­å¥ä¸Šçš„å†…å®¹æ— å…³å¤§å°å†™</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserByCondition"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span> <span class="attr">parameterType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  select * from user where 1=1</span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"userName != null"</span>&gt;</span></span><br><span class="line">    and username = #&#123;userName&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"userSex != null"</span>&gt;</span></span><br><span class="line">    and sex = #&#123;userSex&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindByCondition</span><span class="params">()</span></span>&#123;</span><br><span class="line">  User u = <span class="keyword">new</span> User();</span><br><span class="line">  u.setUserName(<span class="string">"è€ç‹"</span>);</span><br><span class="line">  u.setUserSex(<span class="string">"å¥³"</span>);</span><br><span class="line"></span><br><span class="line">  List&lt;User&gt; users = userDao.findUserByCondition(u);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸å†™ where 1=1 ï¼Ÿ</p><p>æ”¹è¿› -&gt; whereæ ‡ç­¾</p><h1 id="whereæ ‡ç­¾"><a href="#whereæ ‡ç­¾" class="headerlink" title="whereæ ‡ç­¾"></a>whereæ ‡ç­¾</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserByCondition"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span> <span class="attr">parameterType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">  select * from user</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"userName != null"</span>&gt;</span></span><br><span class="line">      and username = #&#123;userName&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"userSex != null"</span>&gt;</span></span><br><span class="line">      and sex = #&#123;userSex&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="foreachæ ‡ç­¾"><a href="#foreachæ ‡ç­¾" class="headerlink" title="foreachæ ‡ç­¾"></a>foreachæ ‡ç­¾</h1><p>æ ¹æ®queryvoä¸­çš„Idé›†åˆå®ç°æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨</p><p><strong>QueryVo.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueryVo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Integer&gt; ids;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get set ...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>IUserDao.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;User&gt; <span class="title">findUserInIds</span><span class="params">(QueryVo vo)</span></span>;</span><br></pre></td></tr></table></figure><p><strong>IUserDao.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserInIds"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span> <span class="attr">parameterType</span>=<span class="string">"queryvo"</span>&gt;</span></span><br><span class="line">  select * from user</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"ids != null and ids.size()&gt;0"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"ids"</span> <span class="attr">open</span>=<span class="string">"and id in ("</span> <span class="attr">close</span>=<span class="string">")"</span> <span class="attr">item</span>=<span class="string">"uid"</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">        #&#123;uid&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>#{uid}æ˜¯ç”±ä¸Šé¢item=â€uidâ€å†³å®šçš„</p><p><strong>æµ‹è¯•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindInIds</span><span class="params">()</span></span>&#123;</span><br><span class="line">  QueryVo vo = <span class="keyword">new</span> QueryVo();</span><br><span class="line">  List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">  list.add(<span class="number">41</span>);</span><br><span class="line">  list.add(<span class="number">42</span>);</span><br><span class="line">  list.add(<span class="number">46</span>);</span><br><span class="line">  vo.setIds(list);</span><br><span class="line"></span><br><span class="line">  List&lt;User&gt; users = userDao.findUserInIds(vo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="sqlæ ‡ç­¾"><a href="#sqlæ ‡ç­¾" class="headerlink" title="sqlæ ‡ç­¾"></a>sqlæ ‡ç­¾</h1><p>æŠ½å–é‡å¤çš„sqlè¯­å¥</p><p>ï¼ˆæœ¬æ¥å†™ä¸å†™;éƒ½å¯ä»¥ï¼Œä½†æ˜¯æŠ½å–sqlè¯­å¥æ—¶ï¼Œä¸ºäº†é˜²æ­¢åç»­çš„æ‹¼æ¥å‡ºé—®é¢˜ï¼Œæœ€å¥½ä¸è¦å†™;ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"defaultUser"</span>&gt;</span></span><br><span class="line">  select * from user</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å°±å¯ä»¥æŠŠ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">  select * from user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ”¹æˆ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"defaultUser"</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/av47952553&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/av47952553
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="mybatis" scheme="http://yoursite.com/tags/mybatis/"/>
    
  </entry>
  
  <entry>
    <title>MyBatisç¬”è®°05 è¿æ¥æ± </title>
    <link href="http://yoursite.com/2020/03/30/note-mybatis-05/"/>
    <id>http://yoursite.com/2020/03/30/note-mybatis-05/</id>
    <published>2020-03-30T01:45:54.000Z</published>
    <updated>2020-03-30T02:47:26.948Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.bilibili.com/video/av47952553" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952553</a><br>p39~43</p></blockquote><h1 id="è¿æ¥æ± "><a href="#è¿æ¥æ± " class="headerlink" title="è¿æ¥æ± "></a>è¿æ¥æ± </h1><p>æ˜¯ä¸€ä¸ªå­˜å‚¨è¿æ¥çš„å®¹å™¨</p><p>ç”¨äºé™ä½è·å–è¿æ¥çš„å¼€é”€</p><p>å¿…é¡»çº¿ç¨‹å®‰å…¨</p><p>å…ˆè¿›å…ˆå‡º</p><h1 id="MyBatisä¸­çš„è¿æ¥æ± "><a href="#MyBatisä¸­çš„è¿æ¥æ± " class="headerlink" title="MyBatisä¸­çš„è¿æ¥æ± "></a>MyBatisä¸­çš„è¿æ¥æ± </h1><p>MyBatisè¿æ¥æ± æä¾›3ç§æ–¹å¼çš„é…ç½®</p><p>é…ç½®çš„ä½ç½®ï¼šä¸»é…ç½®æ–‡ä»¶SqlMapConfig.xmlä¸­dataSourceæ ‡ç­¾ï¼Œtypeå±æ€§è¡¨ç¤ºé‡‡ç”¨ä½•ç§è¿æ¥æ± </p><p>typeå±æ€§çš„å–å€¼ï¼š</p><ul><li><p>POOLED - é‡‡ç”¨ä¼ ç»Ÿçš„javax.sql.DataSourceè§„èŒƒä¸­çš„è¿æ¥æ± </p></li><li><p>UNPOOLED - é‡‡ç”¨ä¼ ç»Ÿçš„è·å–è¿æ¥çš„æ–¹å¼ï¼Œè™½ç„¶ä¹Ÿå®ç°äº†javax.sql.DataSourceæ¥å£ï¼Œä½†æ²¡æœ‰ä½¿ç”¨æ± çš„æ€æƒ³ï¼ˆæ²¡æœ‰å®¹å™¨ï¼Œæ¯æ¬¡ç”¨éƒ½é‡æ–°è·å–ä¸€ä¸ªè¿æ¥ï¼‰</p></li><li><p>JNDI - é‡‡ç”¨æœåŠ¡å™¨æä¾›çš„JNDIæŠ€æœ¯å®ç°ï¼Œæ¥è·å–DataSourceå¯¹è±¡ï¼Œä¸åŒçš„æœåŠ¡å™¨èƒ½æ‹¿åˆ°çš„DataSourceä¸åŒï¼ˆå¦‚æœä¸æ˜¯webæˆ–mavençš„warå·¥ç¨‹ï¼Œä¸èƒ½ä½¿ç”¨ï¼‰</p><p>tomcatæœåŠ¡å™¨é‡‡ç”¨dbcpè¿æ¥æ± </p></li></ul><h2 id="POOLEDå’ŒUNPOOLEDå¯¹æ¯”"><a href="#POOLEDå’ŒUNPOOLEDå¯¹æ¯”" class="headerlink" title="POOLEDå’ŒUNPOOLEDå¯¹æ¯”"></a>POOLEDå’ŒUNPOOLEDå¯¹æ¯”</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®è¿æ¥æ± --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="/images/2020/screencapture2020-03-30AM10.00.05.jpg"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®è¿æ¥æ± --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"UNPOOLED"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="/images/2020/screencapture2020-03-30AM10.00.10.jpg"><h2 id="UNPOOLEDæºç åˆ†æ"><a href="#UNPOOLEDæºç åˆ†æ" class="headerlink" title="UNPOOLEDæºç åˆ†æ"></a>UNPOOLEDæºç åˆ†æ</h2><p>Command + O æœç´¢ PooledDataSource å’Œ UnpooledDataSourceï¼Œå¯ä»¥å‘ç°éƒ½å®ç°äº†DataSourceæ¥å£</p><img src="/images/2020/screencapture2020-03-30AM10.11.24.jpg"><p>è€Œè¿™ä¸ªDataSourceå®ç°javax.sqlï¼Œå³ä¸ºjdbcè§„èŒƒä¸­çš„è¿æ¥æ± å®šä¹‰</p><p>å…¶ä¸­ä¸€å®šä¼šæœ‰getConnection()</p><img src="/images/2020/screencapture2020-03-30AM10.14.24.jpg"><p>æ‰¾ä¸€ä¸‹UnpooledDataSourceä¸­çš„getConnection()</p><img src="/images/2020/screencapture2020-03-30AM10.17.28.jpg"><p>è°ƒäº†doGetConnection()</p><img src="/images/2020/screencapture2020-03-30AM10.18.42.jpg"><p>æœ€åè·å–è¿æ¥çš„è¯­å¥å°±æ˜¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection connection = DriverManager.getConnection(url, properties);</span><br></pre></td></tr></table></figure><p>è€ŒinitializeDriver()ä¸­å°±æ˜¯åå°„æ³¨å†Œé©±åŠ¨</p><img src="/images/2020/screencapture2020-03-30AM10.20.30.jpg"><p>æ‰€ä»¥ï¼ŒUNPOOLEDä½¿ç”¨æ—¶ï¼Œä¼šæ³¨å†Œé©±åŠ¨ã€è·å–è¿æ¥ã€è¿”å›è¿æ¥</p><h2 id="POOLEDæºç åˆ†æ"><a href="#POOLEDæºç åˆ†æ" class="headerlink" title="POOLEDæºç åˆ†æ"></a>POOLEDæºç åˆ†æ</h2><p>ä¹Ÿæ‰¾åˆ°getConnection()</p><img src="/images/2020/screencapture2020-03-30AM10.22.59.jpg"><p>è°ƒäº†popConnection()</p><img src="/images/2020/screencapture2020-03-30AM10.26.37.jpg"><p>å¦‚æœæ²¡æœ‰è¿æ¥ï¼Œåœ¨synchronizedå—ä¸­è¿›è¡Œåç»­æ“ä½œ</p><p>é”çš„æ˜¯è¿™ä¸ªstate</p><img src="/images/2020/screencapture2020-03-30AM10.27.15.jpg"><p>ç»§ç»­ï¼Œå¦‚æœidleConnectionséç©º</p><img src="/images/2020/screencapture2020-03-30AM10.30.59.jpg"><p>è€ŒidleConnectionså°±æ˜¯ä¸€ä¸ªArrayList</p><img src="/images/2020/screencapture2020-03-30AM10.32.21.jpg"><p>å³ï¼Œå½“å®ƒéç©ºï¼Œå–å‡ºç¬¬ä¸€ä¸ª</p><p>å¦‚æœä¸ºç©ºï¼Œè¿æ¥æ•°é‡å°äºæœ€å¤§å€¼ï¼Œåˆ›å»ºè¿æ¥</p><img src="/images/2020/screencapture2020-03-30AM10.34.52.jpg"><p>å¦‚æœå·²ç»åˆ°æœ€å¤§å€¼äº†ï¼Œå–å‡ºä¸€ä¸ªæœ€è€çš„è¿æ¥ï¼Œå°è¯•å¤„ç†ä¹‹åç»§ç»­ç”¨</p><p>æ€»çš„æµç¨‹ï¼š</p><img src="/images/2020/screencapture2020-03-30AM10.40.26.jpg"><p>POOLEDæ˜¯MyBatisè‡ªå·±å®ç°çš„ä¸€å¥—è¿æ¥æ± ï¼Œæ ¹æ®javax.sql.DataSourceè§„èŒƒ</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/av47952553&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/av47952553
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="mybatis" scheme="http://yoursite.com/tags/mybatis/"/>
    
  </entry>
  
  <entry>
    <title>MyBatisç¬”è®°04 é…ç½®æ–‡ä»¶</title>
    <link href="http://yoursite.com/2020/03/27/note-mybatis-04/"/>
    <id>http://yoursite.com/2020/03/27/note-mybatis-04/</id>
    <published>2020-03-27T13:56:09.000Z</published>
    <updated>2020-03-27T14:22:09.066Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.bilibili.com/video/av47952553" target="_blank" rel="noopener">https://www.bilibili.com/video/av47952553</a><br>p37~38</p></blockquote><h1 id="properties"><a href="#properties" class="headerlink" title="properties"></a>properties</h1><p>å¯ä»¥åœ¨æ ‡ç­¾å†…éƒ¨é…ç½®è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å±æ€§å¼•ç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶ä¿¡æ¯</p><h2 id="å†…éƒ¨é…ç½®"><a href="#å†…éƒ¨é…ç½®" class="headerlink" title="å†…éƒ¨é…ç½®"></a>å†…éƒ¨é…ç½®</h2><p>ç›´æ¥å†™åœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/eesy_mybatis"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"1234"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;driver&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å¤–éƒ¨æ–‡ä»¶"><a href="#å¤–éƒ¨æ–‡ä»¶" class="headerlink" title="å¤–éƒ¨æ–‡ä»¶"></a>å¤–éƒ¨æ–‡ä»¶</h2><p>å¼•ç”¨å¤–éƒ¨æ–‡ä»¶</p><p>classpath ä¸‹å®šä¹‰ db.properties æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver&#x3D;com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;eesy</span><br><span class="line">jdbc.username&#x3D;root</span><br><span class="line">jdbc.password&#x3D;1234</span><br></pre></td></tr></table></figure><p>è¦æ±‚æŒ‰urlçš„å†™æ³•å†™åœ°å€</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">url</span>=<span class="string">"file:///D:/IdeaProjects/day02_eesy_01mybatisCRUD/src/main/resources/jdbcConfig.properties"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨typeAliasesé…ç½®ç±»å‹åˆ«å"><a href="#ä½¿ç”¨typeAliasesé…ç½®ç±»å‹åˆ«å" class="headerlink" title="ä½¿ç”¨typeAliasesé…ç½®ç±»å‹åˆ«å"></a>ä½¿ç”¨typeAliasesé…ç½®ç±»å‹åˆ«å</h1><p>åªèƒ½é…ç½®domainä¸­ç±»çš„åˆ«å</p><p>typeï¼šæŒ‡å®šçš„æ˜¯å®ä½“ç±»å…¨é™å®šç±»å</p><p>aliasï¼šå±æ€§æŒ‡å®šåˆ«å</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å•ä¸ªåˆ«åå®šä¹‰ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">"com.itheima.domain.User"</span> <span class="attr">alias</span>=<span class="string">"user"</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAlias</span>&gt;</span>--&gt;</span><br><span class="line">  <span class="comment">&lt;!-- ç”¨äºæŒ‡å®šè¦é…ç½®åˆ«åçš„åŒ…ï¼Œå½“æŒ‡å®šä¹‹åï¼Œè¯¥åŒ…ä¸‹çš„å®ä½“ç±»éƒ½ä¼šæ³¨å†Œåˆ«åï¼Œå¹¶ä¸”ç±»åå°±æ˜¯åˆ«åï¼Œä¸å†åŒºåˆ†å¤§å°å†™--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.itheima.domain"</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æŒ‡å®šäº†åˆ«åå°±ä¸å†åŒºåˆ†å¤§å°å†™ï¼Œuserã€USERã€uSeRéƒ½å¯ä»¥</p><h1 id="mappers"><a href="#mappers" class="headerlink" title="mappers"></a>mappers</h1><p>resourceç”¨äºæŒ‡å®šç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºä½ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/itheima/dao/IUserDao.xml"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>classæŒ‡å®šæ¥å£ç±»è·¯å¾„</p><p>è¦æ±‚ mapper æ¥å£åç§°å’Œ mapper æ˜ å°„æ–‡ä»¶åç§°ç›¸åŒï¼Œä¸”æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">"com.itheima.dao.UserDao"</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>æ›´ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨package</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--&lt;mapper resource="com/itheima/dao/IUserDao.xml"&gt;&lt;/mapper&gt;--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- packageæ ‡ç­¾æ˜¯ç”¨äºæŒ‡å®šdaoæ¥å£æ‰€åœ¨çš„åŒ…,å½“æŒ‡å®šäº†ä¹‹åå°±ä¸éœ€è¦å†å†™mapperä»¥åŠresourceæˆ–è€…classäº† --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.itheima.dao"</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/av47952553&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/av47952553
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="mybatis" scheme="http://yoursite.com/tags/mybatis/"/>
    
  </entry>
  
</feed>
