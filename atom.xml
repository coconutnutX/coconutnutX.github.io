<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>CoCoNutNut&#39;s NoteBook</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2021-02-12T15:49:55.645Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>coconutnut</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Notion Offline记录</title>
    <link href="http://yoursite.com/2021/02/12/notionn/"/>
    <id>http://yoursite.com/2021/02/12/notionn/</id>
    <published>2021-02-12T15:29:15.000Z</published>
    <updated>2021-02-12T15:49:55.645Z</updated>
    
    <content type="html"><![CDATA[<p>Notion的app突然Offline了</p><p>直接访问显示DNS_PROBE_FINISHED_NXDOMAIN</p><p>根据↓尝试</p><blockquote><p><a href="https://linmi.cc/6133.html" target="_blank" rel="noopener">https://linmi.cc/6133.html</a></p></blockquote><p>1.加host<br>cmd中 open /etc<br>host中加一行 104.18.23.110 notion.so<br>此时可以ping通notion.so，但app仍是offline</p><p>2.改DNS<br>加119.29.29.29<br>114.114.114.114<br>没有用，改回默认</p><p>暂时还是不能用，等修复吧</p><p>哎，失去notion仿佛失去了半个脑子</p><p>然后发现github.io也访问不了了，是运营商的问题</p><p>DNS改成114.114.114.114后解决</p><p>之前默认是192.168.3.1</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Notion的app突然Offline了&lt;/p&gt;
&lt;p&gt;直接访问显示DNS_PROBE_FINISHED_NXDOMAIN&lt;/p&gt;
&lt;p&gt;根据↓尝试&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://linmi.cc/6133.html&quot; targe
      
    
    </summary>
    
    
      <category term="Memo" scheme="http://yoursite.com/categories/Memo/"/>
    
    
      <category term="tool" scheme="http://yoursite.com/tags/tool/"/>
    
  </entry>
  
  <entry>
    <title>Unity笔记 Project05 地形&amp;Asset</title>
    <link href="http://yoursite.com/2020/12/02/unity-note-3/"/>
    <id>http://yoursite.com/2020/12/02/unity-note-3/</id>
    <published>2020-12-02T13:54:21.000Z</published>
    <updated>2020-12-02T13:57:22.871Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.youtube.com/watch?v=ddy12WHqt-M&amp;ab_channel=UGuruz" target="_blank" rel="noopener">https://www.youtube.com/watch?v=ddy12WHqt-M&amp;ab_channel=UGuruz</a></p></blockquote><p>试了试地形</p><img src="/images/2020/screencapture2020-12-02 PM8.19.30.jpg"><p>加入人物，按Project04的方式移动</p><img src="/images/2020/screencapture2020-12-02 PM8.20.05.jpg"><p>找了一组模型，能用！</p><img src="/images/2020/screencapture2020-12-02 PM9.53.36.jpg"><p>感觉要起飞了🤩</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=ddy12WHqt-M&amp;amp;ab_channel=UGuruz&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.youtu
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="unity" scheme="http://yoursite.com/tags/unity/"/>
    
  </entry>
  
  <entry>
    <title>Unity笔记 Project04 点击移动+旋转摄像头</title>
    <link href="http://yoursite.com/2020/12/02/unity-note-2/"/>
    <id>http://yoursite.com/2020/12/02/unity-note-2/</id>
    <published>2020-12-02T09:43:51.000Z</published>
    <updated>2020-12-02T10:07:55.039Z</updated>
    
    <content type="html"><![CDATA[<p>想做成点击移动，并且摄像头可以根据鼠标位置有限制的旋转</p><h1 id="Step-1-点击移动"><a href="#Step-1-点击移动" class="headerlink" title="Step 1 - 点击移动"></a>Step 1 - 点击移动</h1><p>参照Project02</p><img src="/images/2020/screencapture2020-12-02 PM5.37.22.jpg"><p>完成~</p><img src="/images/2020/Dec-02-2020 17-42-53.gif"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.AI;</span><br><span class="line"></span><br><span class="line">public class PlayerMovement : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public NavMeshAgent agent;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Start is called before the first frame update</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        agent &#x3D; GetComponent&lt;NavMeshAgent&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; Click to Move</span><br><span class="line">        if(Input.GetMouseButtonDown(0))&#123;</span><br><span class="line">            RaycastHit hit;</span><br><span class="line">            Ray ray &#x3D; Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">            if(Physics.Raycast(ray, out hit, Mathf.Infinity))&#123;</span><br><span class="line">                agent.SetDestination(hit.point);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Step-2-旋转摄像头"><a href="#Step-2-旋转摄像头" class="headerlink" title="Step 2 - 旋转摄像头"></a>Step 2 - 旋转摄像头</h1><p>参照Project03</p><img src="/images/2020/Dec-02-2020 18-05-13.gif"><p>鼠标转向不是很方便，顺便加了方向键旋转</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class CameraLook : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public float mouseSensitivity &#x3D; 100f;</span><br><span class="line">    public float keySensitivity &#x3D; 100f;</span><br><span class="line">    public Transform player &#x3D; null;</span><br><span class="line">    private float xRotation &#x3D; 0f;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Start is called before the first frame update</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; Get mouse position</span><br><span class="line">        float mouseX &#x3D; Input.GetAxis(&quot;Mouse X&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line">        float mouseY &#x3D; Input.GetAxis(&quot;Mouse Y&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Get key inout</span><br><span class="line">        float keyX &#x3D; Input.GetAxis(&quot;Horizontal&quot;) * keySensitivity * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">        Debug.Log(mouseX);</span><br><span class="line">        Debug.Log(keyX);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Rotate camera up and down</span><br><span class="line">        xRotation -&#x3D; mouseY;</span><br><span class="line">        xRotation &#x3D; Mathf.Clamp(xRotation, -30f, 30f);</span><br><span class="line">        transform.localRotation &#x3D; Quaternion.Euler(xRotation, 0f, 0f);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Rotate player left and right</span><br><span class="line">        player.Rotate(Vector3.up * (mouseX + keyX));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>耶(＾－＾)V</p><p>目前这个移动方式很满意，暂时就这样</p><p>下一步可以搭场景啦~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;想做成点击移动，并且摄像头可以根据鼠标位置有限制的旋转&lt;/p&gt;
&lt;h1 id=&quot;Step-1-点击移动&quot;&gt;&lt;a href=&quot;#Step-1-点击移动&quot; class=&quot;headerlink&quot; title=&quot;Step 1 - 点击移动&quot;&gt;&lt;/a&gt;Step 1 - 点击移动&lt;/h
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="unity" scheme="http://yoursite.com/tags/unity/"/>
    
  </entry>
  
  <entry>
    <title>Unity笔记 Project03 第一人称移动</title>
    <link href="http://yoursite.com/2020/12/02/unity-note-1/"/>
    <id>http://yoursite.com/2020/12/02/unity-note-1/</id>
    <published>2020-12-02T05:58:43.000Z</published>
    <updated>2020-12-02T09:23:36.216Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.youtube.com/watch?v=_QajrabyTJc&amp;ab_channel=Brackeys" target="_blank" rel="noopener">https://www.youtube.com/watch?v=_QajrabyTJc&amp;ab_channel=Brackeys</a></p></blockquote><img src="/images/2020/screencapture2020-12-02 PM5.18.52.jpg"><h1 id="层级"><a href="#层级" class="headerlink" title="层级"></a>层级</h1><ul><li>Player（空物体）-&gt; 加Character Controller；PlayerMovement（Script）<ul><li>Body（圆柱）-&gt; 删除Collider</li><li>Main Camera -&gt; 放在人物头部的位置；MouseLook（Script）</li></ul></li></ul><h1 id="旋转"><a href="#旋转" class="headerlink" title="旋转"></a>旋转</h1><p>x轴横向旋转，转动Player和Camera</p><p>y轴纵向旋转，只转动Camera</p><h1 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h1><p>使用Character Controller的方法</p><h1 id="重力"><a href="#重力" class="headerlink" title="重力"></a>重力</h1><p>Character Controller不能使用Rigidbody🤪，只能代码解决</p><p>还需要通过GroundCheck和Layer来解决碰到地面时下落速度清零的问题</p><h1 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h1><ul><li><p>Update()中Time.deltaTime获取从上次调用Update()至今的时间</p></li><li><p>控制爬楼梯跨度&amp;斜坡角度 -&gt; Character Controller中设置</p></li></ul><img src="/images/2020/screencapture2020-12-02_PM2.00.44.jpg"><p>看教程里的总结，用Character Controller和用RigidBody来控制确实挺不一样的，后面得看看用哪个更合适</p><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class MouseLook : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public float mouseSensitivity &#x3D; 100f;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 在Unity中把Player拖过来</span><br><span class="line">    public Transform playerBody &#x3D; null;</span><br><span class="line"></span><br><span class="line">    private float xRotation &#x3D; 0f;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Start is called before the first frame update</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; Get Input</span><br><span class="line">        float mouseX &#x3D; Input.GetAxis(&quot;Mouse X&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line">        float mouseY &#x3D; Input.GetAxis(&quot;Mouse Y&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 纵向旋转Camera</span><br><span class="line">        xRotation -&#x3D; mouseY;</span><br><span class="line">        &#x2F;&#x2F; 不直接用Rotate，因为要先限制旋转角度</span><br><span class="line">        xRotation &#x3D; Mathf.Clamp(xRotation, -30f, 30f);</span><br><span class="line">        transform.localRotation &#x3D; Quaternion.Euler(xRotation, 0f, 0f);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 横向旋转Player</span><br><span class="line">        playerBody.Rotate(Vector3.up * mouseX);</span><br><span class="line">        Debug.Log(mouseX);</span><br><span class="line">        Debug.Log(&quot;R:&quot;+playerBody.transform.rotation);</span><br><span class="line">        Debug.Log(&quot;LR:&quot;+playerBody.transform.localRotation);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerMovement : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public CharacterController controller;</span><br><span class="line"></span><br><span class="line">    public float speed &#x3D; 12f;</span><br><span class="line">    public float gravity &#x3D; -9.81f;</span><br><span class="line">    public float jumpHeight &#x3D; 3f;</span><br><span class="line"></span><br><span class="line">    public Transform groundCheck;</span><br><span class="line">    public float groundDistance &#x3D; 0.4f;</span><br><span class="line">    public LayerMask groundMask;</span><br><span class="line"></span><br><span class="line">    Vector3 velocity;</span><br><span class="line">    bool isGrounded;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; 防止向下的速度无限增大</span><br><span class="line">        isGrounded &#x3D; Physics.CheckSphere(groundCheck.position, groundDistance, groundMask);</span><br><span class="line"></span><br><span class="line">        if(isGrounded &amp;&amp; velocity.y &lt; 0)&#123;</span><br><span class="line">            velocity.y &#x3D; -2f;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 移动</span><br><span class="line">        float x &#x3D; Input.GetAxis(&quot;Horizontal&quot;);</span><br><span class="line">        float z &#x3D; Input.GetAxis(&quot;Vertical&quot;);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 这样写是全局坐标，不管Player面对什么方向</span><br><span class="line">        &#x2F;&#x2F; Vector3 move &#x3D; new Vector3(x, 0f, z);</span><br><span class="line"></span><br><span class="line">        Vector3 move &#x3D; transform.right * x + transform.forward * z;</span><br><span class="line">        controller.Move(move * speed * Time.deltaTime);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 跳跃</span><br><span class="line">        if(Input.GetButtonDown(&quot;Jump&quot;) &amp;&amp; isGrounded)&#123;</span><br><span class="line">            velocity.y &#x3D; Mathf.Sqrt(jumpHeight * -2f * gravity);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 模拟重力</span><br><span class="line">        velocity.y +&#x3D; gravity * Time.deltaTime;</span><br><span class="line">        controller.Move(velocity * Time.deltaTime);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=_QajrabyTJc&amp;amp;ab_channel=Brackeys&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.you
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="unity" scheme="http://yoursite.com/tags/unity/"/>
    
  </entry>
  
  <entry>
    <title>Unity笔记 Project02 点击移动</title>
    <link href="http://yoursite.com/2020/12/02/unity-note/"/>
    <id>http://yoursite.com/2020/12/02/unity-note/</id>
    <published>2020-12-02T05:36:44.000Z</published>
    <updated>2020-12-02T09:26:35.690Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.youtube.com/watch?v=y_zdW5LIX5o&ab_channel=PekkeDev" target="_blank" rel="noopener">Click To Move with NavMesh - Unity 3D</a></p></blockquote><p>选中地面</p><p>窗口 → AI → 导航: Static &amp; Walkable</p><img src="/images/2020/screencapture2020-12-02_PM1.26.36.jpg"><p>烘焙 → Bake</p><img src="/images/2020/screencapture2020-12-02_PM1.27.18.jpg"><p>Player加组件Nav Mesh Agent</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.AI;</span><br><span class="line"></span><br><span class="line">public class Player : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    NavMeshAgent agent;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Start is called before the first frame update</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        agent &#x3D; GetComponent&lt;NavMeshAgent&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if(Input.GetMouseButtonDown(0))&#123;</span><br><span class="line">            RaycastHit hit;</span><br><span class="line">            Ray ray &#x3D; Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">            if(Physics.Raycast(ray, out hit, Mathf.Infinity))&#123;</span><br><span class="line">                agent.SetDestination(hit.point);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=y_zdW5LIX5o&amp;ab_channel=PekkeDev&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Click To Move with 
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="unity" scheme="http://yoursite.com/tags/unity/"/>
    
  </entry>
  
  <entry>
    <title>Unity笔记 Project01 Basic</title>
    <link href="http://yoursite.com/2020/11/30/note-unity/"/>
    <id>http://yoursite.com/2020/11/30/note-unity/</id>
    <published>2020-11-30T12:55:58.000Z</published>
    <updated>2020-12-02T09:20:31.015Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.youtube.com/watch?v=pwZpJzpE2lQ&amp;t=4178s&amp;ab_channel=Imphenzia" target="_blank" rel="noopener">https://www.youtube.com/watch?v=pwZpJzpE2lQ&amp;t=4178s&amp;ab_channel=Imphenzia</a></p></blockquote><img src="/images/2020/screencapture2020-11-30 PM9.13.29.jpg"><h1 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h1><ol><li><p>人物跳跃，左右移动</p><ul><li><p>跳跃速度与重量无关 -&gt; ForceMode.VelocityChange</p></li><li><p>跳跃时保持左右速度 -&gt; rigidbodyComponent.velocity</p></li><li><p>不可在空中跳跃 -&gt; 检查Physics.OverlapSphere()</p></li><li><p>左右移动同时检查←→AD -&gt; Input.GetAxis(“Horizontal”)</p></li><li><p>碰到墙壁不会因为长按D贴在墙上 -&gt; 添加物理材质，摩擦力为0</p></li></ul></li><li><p>摄像头跟随角色 -&gt; 层级放在角色下即可</p></li><li><p>收集硬币</p><ul><li>不发生碰撞 -&gt; 勾选是触发器</li><li>检测碰撞 -&gt; OnTriggerEnter()</li><li>碰到后消除 -&gt; Destroy(other.gameObject);</li></ul></li></ol><h1 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h1><ol><li>在Update()中获取输入，在FixedUpdate()中apply physics</li><li>用[SerializeField] private，不要用public</li><li>减少不必要的Collider，提高效率</li><li>多用Prefab，善用Layer</li></ol><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class Player : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [SerializeField] private Transform groundCheckTransform &#x3D; null;</span><br><span class="line">    [SerializeField] private LayerMask playerMask;</span><br><span class="line">    private bool jumpKeyPressed;</span><br><span class="line">    private float horizontalInput;</span><br><span class="line">    private Rigidbody rigidbodyComponent;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Start is called before the first frame update</span><br><span class="line">    void Start() &#123;</span><br><span class="line">        rigidbodyComponent &#x3D; GetComponent&lt;Rigidbody&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Update is called once per frame</span><br><span class="line">    void Update() &#123;</span><br><span class="line">        horizontalInput &#x3D; Input.GetAxis(&quot;Horizontal&quot;);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Avoid jumping in the air (always colliding with the capsule collider)</span><br><span class="line">        if(Physics.OverlapSphere(groundCheckTransform.position, 0.1f, playerMask).Length &#x3D;&#x3D; 0)&#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if(Input.GetKeyDown(KeyCode.Space))&#123;</span><br><span class="line">            jumpKeyPressed &#x3D; true;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F; FixedUpdate is called once every physic update (Default 100&#x2F;s)</span><br><span class="line">    private void FixedUpdate() &#123;</span><br><span class="line">        if(jumpKeyPressed)&#123;</span><br><span class="line">            rigidbodyComponent.AddForce(Vector3.up * 5,ForceMode.VelocityChange);</span><br><span class="line">            jumpKeyPressed &#x3D; false;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        rigidbodyComponent.velocity &#x3D; new Vector3(horizontalInput * 2, rigidbodyComponent.velocity.y, 0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void OnTriggerEnter(Collider other) &#123;</span><br><span class="line">        &#x2F;&#x2F; Collide with 9.Coin layer</span><br><span class="line">        if(other.gameObject.layer &#x3D;&#x3D; 9)&#123;</span><br><span class="line">            Destroy(other.gameObject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=pwZpJzpE2lQ&amp;amp;t=4178s&amp;amp;ab_channel=Imphenzia&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ht
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="unity" scheme="http://yoursite.com/tags/unity/"/>
    
  </entry>
  
  <entry>
    <title>看源码笔记 DeephageTP</title>
    <link href="http://yoursite.com/2020/11/19/code-note/"/>
    <id>http://yoursite.com/2020/11/19/code-note/</id>
    <published>2020-11-19T09:02:01.000Z</published>
    <updated>2020-11-19T10:16:44.490Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://github.com/chuym726/DeephageTP" target="_blank" rel="noopener">https://github.com/chuym726/DeephageTP</a></p></blockquote><h1 id="环境搭建-amp-数据准备"><a href="#环境搭建-amp-数据准备" class="headerlink" title="环境搭建&amp;数据准备"></a>环境搭建&amp;数据准备</h1><p>（已有：conda 4.9.2）</p><ol><li><p>下载<a href="https://github.com/chuym726/DeephageTP" target="_blank" rel="noopener">https://github.com/chuym726/DeephageTP</a></p></li><li><p>创建新的虚拟环境deephageTP</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create --name deephageTP python&#x3D;3.6 numpy theano keras scikit-learn</span><br></pre></td></tr></table></figure><ol start="3"><li><p>新建工程文件夹DeephageTP-test（需要的文件从下载的DeephageTP-master拷）</p></li><li><p>PyCharm打开DeephageTP-test，激活环境</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate deephageTP</span><br></pre></td></tr></table></figure><img src="/images/2020/screencapture2020-11-19 PM5.23.40.jpg"><p>Python Interpreter也改成deephageTP</p><img src="/images/2020/screencapture2020-11-19 PM5.25.35.jpg"><img src="/images/2020/screencapture2020-11-19 PM5.26.51.jpg"><h1 id="测试example-data-fa"><a href="#测试example-data-fa" class="headerlink" title="测试example_data.fa"></a>测试example_data.fa</h1><p>代码里面直接读的training_data.faa，X和Y应该在同一个文件里，</p><p>但是给的training_data.faa.X.npy.tar.gz、training_data.faa.Y.npy.tar.gz是在不同文件</p><p>于是先用example_data.fa试一下（遇到bug #1，解决见Debug）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">(deephageTP) coconutnut@x86_64-apple-darwin13 DeephageTP-test % python DeephageTP_model_training.py</span><br><span class="line">Using TensorFlow backend.</span><br><span class="line">only amino acid code.</span><br><span class="line">ok! there is the same number (193) of labels and sequences. </span><br><span class="line">193</span><br><span class="line">193</span><br><span class="line">193</span><br><span class="line">ok! windows is 900.</span><br><span class="line">ok! raw data has been saved as a npy file example_data.fa.X&#x2F;Y</span><br><span class="line">now runing is DL_Train.</span><br><span class="line">nb_filters:  50</span><br><span class="line">kernel_s:  3</span><br><span class="line">n_batch:  10</span><br><span class="line">n_echos:  20</span><br><span class="line">dropout1:  0.1</span><br><span class="line">dropout2:  0.1</span><br><span class="line">ok! the npy file example_data.fa.X&#x2F;Y.npy are loaded!</span><br><span class="line">ok! all labels are in 4 kinds.</span><br><span class="line">193</span><br><span class="line">now training for all, Be noted here no test part !!!</span><br><span class="line">[[1. 0. 0. 0.]</span><br><span class="line"> [1. 0. 0. 0.]</span><br><span class="line"> [1. 0. 0. 0.]</span><br><span class="line">......</span><br><span class="line"> [0. 0. 0. 1.]</span><br><span class="line"> [0. 0. 0. 1.]</span><br><span class="line"> [0. 0. 0. 1.]</span><br><span class="line"> [0. 0. 0. 1.]]</span><br><span class="line">2020-11-19 17:30:03.895070: I tensorflow&#x2F;core&#x2F;platform&#x2F;cpu_feature_guard.cc:145] This TensorFlow binary is optimized with Intel(R) MKL-DNN to use the following CPU instructions in performance critical operations:  SSE4.1 SSE4.2 AVX AVX2 FMA</span><br><span class="line">To enable them in non-MKL-DNN operations, rebuild TensorFlow with the appropriate compiler flags.</span><br><span class="line">2020-11-19 17:30:03.895316: I tensorflow&#x2F;core&#x2F;common_runtime&#x2F;process_util.cc:115] Creating new thread pool with default inter op setting: 8. Tune using inter_op_parallelism_threads for best performance.</span><br><span class="line">Epoch 1&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 12s 64ms&#x2F;step - loss: 1.1962 - accuracy: 0.4767</span><br><span class="line">Epoch 2&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 11s 55ms&#x2F;step - loss: 0.4503 - accuracy: 0.8446</span><br><span class="line">Epoch 3&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 53ms&#x2F;step - loss: 0.1844 - accuracy: 0.9534</span><br><span class="line">Epoch 4&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 52ms&#x2F;step - loss: 0.1079 - accuracy: 0.9845</span><br><span class="line">Epoch 5&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 11s 55ms&#x2F;step - loss: 0.0383 - accuracy: 1.0000</span><br><span class="line">Epoch 6&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 50ms&#x2F;step - loss: 0.0203 - accuracy: 1.0000</span><br><span class="line">Epoch 7&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 12s 61ms&#x2F;step - loss: 0.0105 - accuracy: 1.0000</span><br><span class="line">Epoch 8&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 51ms&#x2F;step - loss: 0.0063 - accuracy: 1.0000</span><br><span class="line">Epoch 9&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 51ms&#x2F;step - loss: 0.0058 - accuracy: 1.0000</span><br><span class="line">Epoch 10&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 50ms&#x2F;step - loss: 0.0104 - accuracy: 0.9948</span><br><span class="line">Epoch 11&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 51ms&#x2F;step - loss: 0.0066 - accuracy: 1.0000</span><br><span class="line">Epoch 12&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 51ms&#x2F;step - loss: 0.0041 - accuracy: 1.0000</span><br><span class="line">Epoch 13&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 52ms&#x2F;step - loss: 0.0017 - accuracy: 1.0000</span><br><span class="line">Epoch 14&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 50ms&#x2F;step - loss: 0.0026 - accuracy: 1.0000</span><br><span class="line">Epoch 15&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 51ms&#x2F;step - loss: 0.0017 - accuracy: 1.0000</span><br><span class="line">Epoch 16&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 50ms&#x2F;step - loss: 0.0013 - accuracy: 1.0000</span><br><span class="line">Epoch 17&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 10s 52ms&#x2F;step - loss: 0.0011 - accuracy: 1.0000</span><br><span class="line">Epoch 18&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 9s 48ms&#x2F;step - loss: 8.4943e-04 - accuracy: 1.0000</span><br><span class="line">Epoch 19&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 9s 49ms&#x2F;step - loss: 8.9927e-04 - accuracy: 1.0000</span><br><span class="line">Epoch 20&#x2F;20</span><br><span class="line">193&#x2F;193 [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] - 9s 49ms&#x2F;step - loss: 0.0011 - accuracy: 1.0000</span><br><span class="line">the model (example_data.fa.all.h5) has saved!</span><br></pre></td></tr></table></figure><p>产生了3个文件</p><p>example_data.fa.all.h5</p><p>example_data.fa.X.npy</p><p>example_data.fa.Y.npy</p><p>所以给的training_data.faa.X.npy.tar.gz、training_data.faa.Y.npy.tar.gz也是生成的吗？data文件夹里就一个叫a的空文件，难道是没传training_data.faa？😧</p><p>看了下代码，还真是🙄</p><p>aa_ref2npy()用来转格式，存成one-hot编码后，X和Y分开的形式</p><p>DL_Train()用来训练</p><p>既然如此，直接用training_data.faa.X.npy.tar.gz、training_data.faa.Y.npy.tar.gz解压，不跑aa_ref2npy()，就可以直接训练了</p><h1 id="测试training-data-faa"><a href="#测试training-data-faa" class="headerlink" title="测试training_data.faa"></a>测试training_data.faa</h1><p>解压training_data.faa.X.npy.tar.gz、training_data.faa.Y.npy.tar.gz</p><p>（25.3MB解压后3.97 GB，是得有多少0啊，不愧是one-hot）</p><p>代码改了2处：</p><p>第8行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.cross_validation import train_test_split</span><br></pre></td></tr></table></figure><p>改成</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.model_selection import train_test_split</span><br></pre></td></tr></table></figure><p>最后的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if 1:</span><br><span class="line">aa_ref2npy(ref_Data&#x3D;ref_Data,len_w&#x3D;len_w)</span><br></pre></td></tr></table></figure><p>注释掉</p><p>运行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">(deephageTP) coconutnut@x86_64-apple-darwin13 DeephageTP-test % python DeephageTP_model_training.py</span><br><span class="line">Using TensorFlow backend.</span><br><span class="line">only amino acid code.</span><br><span class="line">now runing is DL_Train.</span><br><span class="line">nb_filters:  50</span><br><span class="line">kernel_s:  3</span><br><span class="line">n_batch:  10</span><br><span class="line">n_echos:  20</span><br><span class="line">dropout1:  0.1</span><br><span class="line">dropout2:  0.1</span><br><span class="line">ok! the npy file training_data.faa.X&#x2F;Y.npy are loaded!</span><br><span class="line">ok! all labels are in 4 kinds.</span><br><span class="line">27585</span><br><span class="line">now training for all, Be noted here no test part !!!</span><br><span class="line">[[1. 0. 0. 0.]</span><br><span class="line"> [1. 0. 0. 0.]</span><br><span class="line"> [1. 0. 0. 0.]</span><br><span class="line"> ...</span><br><span class="line"> [0. 0. 0. 1.]</span><br><span class="line"> [0. 0. 0. 1.]</span><br><span class="line"> [0. 0. 0. 1.]]</span><br><span class="line">2020-11-19 17:52:30.350217: I tensorflow&#x2F;core&#x2F;platform&#x2F;cpu_feature_guard.cc:145] This TensorFlow binary is optimized with Intel(R) MKL-DNN to use the following CPU instructions in performance critical operations:  SSE4.1 SSE4.2 AVX AVX2 FMA</span><br><span class="line">To enable them in non-MKL-DNN operations, rebuild TensorFlow with the appropriate compiler flags.</span><br><span class="line">2020-11-19 17:52:30.350529: I tensorflow&#x2F;core&#x2F;common_runtime&#x2F;process_util.cc:115] Creating new thread pool with default inter op setting: 8. Tune using inter_op_parallelism_threads for best performance.</span><br><span class="line">Epoch 1&#x2F;20</span><br><span class="line"> 1250&#x2F;27585 [&gt;.............................] - ETA: 22:33 - loss: 0.5788 - accuracy: 0.8016</span><br></pre></td></tr></table></figure><p>太大了，不跑了</p><h1 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h1><p>训练部分 DeephageTP_model_training.py</p><h2 id="aa-ref2npy"><a href="#aa-ref2npy" class="headerlink" title="aa_ref2npy()"></a>aa_ref2npy()</h2><p>做one-hot编码用的</p><p>把蛋白质序列↓</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;UniRef100_A0A017QK57 PBSX family phage terminase large subunit n&#x3D;1 Tax&#x3D;Glaesserella parasuis str. Nagasaki TaxID&#x3D;1117322 RepID&#x3D;A0A017QK57_HAEPR 1</span><br><span class="line">MKIQLNLPPKLIPVFTQQNVRYRGAYGGRGSAKTRTFAKMTAVVAYQRAMQGESGVILCGREFMNSLEDSSLEEIKQAIQSEPWLTDFFEVGEKYVRTKCGRISYIFTGLRHNLDSIKSKARILLAWIDEAESVSEMAWRKLLPTVRENGSEIWLTWNPEKKGSATDLRFRQHQDESMAIVEMNYSDNPWFPDVLEQERLRDKARLDDATYRWIWEGAYLEQSEAQIFRDKFQELEFKPNGDFSGPYFGLDFGFAQDPTAAVKCWVFKDELYIEYEAGKVGLELDDTATFLQKGIVGIEQYVIRADSARPESISYLKRHGLPRIDGVSKWKGSVEDGIAHIKSYKKIYIHPRCQQTLNEFRLYSYKTDRLSGDILPVVLDENNHYIDALRYALEPLMKGRQSWFG</span><br></pre></td></tr></table></figure><p>one-hot编码，np.array格式，保存（分别存X和Y）</p><p>把X打出来看下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[[0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],  对应M</span><br><span class="line"> [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0],  对应K</span><br><span class="line"> [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0],  对应I</span><br><span class="line"> [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0],</span><br><span class="line"> [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0],</span><br><span class="line"> [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],</span><br><span class="line"> [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0],</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure><p>就是和蛋白质序列MKI…一一对应的one-hot编码（还是手动写死的）</p><p>大小是(900, 20)，和文中描述一样</p><p>这里Y是0，根据每个蛋白质第一行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;UniRef100_A0A017QK57 PBSX family phage terminase large subunit n&#x3D;1 Tax&#x3D;Glaesserella parasuis str. Nagasaki TaxID&#x3D;1117322 RepID&#x3D;A0A017QK57_HAEPR 1</span><br></pre></td></tr></table></figure><p>最后这个数字-1表示类别</p><p>如下面这个蛋白的类别是2</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;UniRef100_A0A072NPV4 Phage terminase, small subunit n&#x3D;1 Tax&#x3D;Bacillus azotoformans MEV2011 TaxID&#x3D;1348973 RepID&#x3D;A0A072NPV4_BACAZ 3</span><br><span class="line">MAKDGTNRGGARVGAGAKKKPLTDKIAEGNPGGRKLTVMEFKDTADLKGLEMPEPNKMLEAIQKDGKALVAGEIYRNTWAWLNERGCAALVSPQLLERYAMSVARWIQCEEAVTEYGFLAKHPTTGNAIQSPYVAMGQNYMNQTNRLWMEIFQIVKENCTGEYSGINPQDDVMERLLTARRGK</span><br></pre></td></tr></table></figure><h2 id="DL-Train"><a href="#DL-Train" class="headerlink" title="DL_Train()"></a>DL_Train()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">DL_Train</span><span class="params">(ref_Data, len_w)</span>:</span></span><br><span class="line"><span class="comment"># 参数设置</span></span><br><span class="line">nb_filters = <span class="number">50</span></span><br><span class="line">kernel_s = <span class="number">3</span></span><br><span class="line">n_batch = <span class="number">10</span></span><br><span class="line">n_echos = <span class="number">20</span></span><br><span class="line">dropout1 = <span class="number">0.10</span></span><br><span class="line">dropout2 = <span class="number">0.10</span></span><br><span class="line"><span class="keyword">print</span> (<span class="string">"now runing is DL_Train."</span>)</span><br><span class="line"><span class="comment"># end_lossrint("all is ended.")</span></span><br><span class="line"><span class="keyword">print</span> (<span class="string">"nb_filters: "</span>, nb_filters)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"kernel_s: "</span>, kernel_s)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"n_batch: "</span>, n_batch)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"n_echos: "</span>, n_echos)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"dropout1: "</span>, dropout1)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"dropout2: "</span>, dropout2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 处理数据</span></span><br><span class="line">X2 = np.load(ref_Data + <span class="string">".X.npy"</span>)</span><br><span class="line">Y2 = np.load(ref_Data + <span class="string">".Y.npy"</span>)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"ok! the npy file "</span> + ref_Data + <span class="string">".X/Y.npy are loaded!"</span> )</span><br><span class="line">n_classes = <span class="number">4</span>    <span class="comment">#len(np.unique(Y))</span></span><br><span class="line"><span class="keyword">print</span> (<span class="string">"ok! all labels are in "</span> + str(n_classes) + <span class="string">" kinds."</span> )</span><br><span class="line">YY_t = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> Y2:</span><br><span class="line">ll = np.zeros(n_classes)</span><br><span class="line">ll[i] = <span class="number">1</span></span><br><span class="line">YY_t.append(ll)</span><br><span class="line">YY_t = np.array(YY_t)</span><br><span class="line">print(len(YY_t))</span><br><span class="line">print(<span class="string">"now training for all, Be noted here no test part !!!"</span>)</span><br><span class="line">X_train = X2.reshape(<span class="number">-1</span>,<span class="number">1</span>,len_w,matrix_size)</span><br><span class="line">Y_train = YY_t</span><br><span class="line">print(Y_train)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构建模型</span></span><br><span class="line">model = Sequential()</span><br><span class="line">model.add(Conv2D(filters=nb_filters,kernel_size=(<span class="number">7</span>,<span class="number">1</span>),padding=<span class="string">'same'</span>,input_shape=(<span class="number">1</span>,len_w,matrix_size),data_format=<span class="string">'channels_first'</span>))</span><br><span class="line">model.add(Activation(<span class="string">'relu'</span>))</span><br><span class="line">model.add(MaxPooling2D(pool_size=(<span class="number">3</span>,<span class="number">3</span>)))</span><br><span class="line">model.add(Dropout(dropout1))</span><br><span class="line">model.add(Flatten())</span><br><span class="line">model.add(Dense(<span class="number">100</span>,activation=<span class="string">'relu'</span>))</span><br><span class="line">model.add(Dropout(dropout2))</span><br><span class="line">model.add(Dense(n_classes,activation=<span class="string">'softmax'</span>))</span><br><span class="line">model.compile(loss=<span class="string">'categorical_crossentropy'</span>,optimizer=Adam(),metrics=[<span class="string">'accuracy'</span>])   </span><br><span class="line"></span><br><span class="line"><span class="comment"># 训练模型</span></span><br><span class="line">model.fit(X_train,Y_train,batch_size=n_batch,epochs=n_echos,verbose=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存模型</span></span><br><span class="line">model.save(ref_Data + <span class="string">'.all.h5'</span>)</span><br><span class="line">print(<span class="string">"the model ("</span> + ref_Data + <span class="string">".all.h5) has saved!"</span>)</span><br></pre></td></tr></table></figure><h1 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h1><h3 id="1"><a href="#1" class="headerlink" title="#1"></a>#1</h3><p>第一次跑DeephageTP_model_training.py时遇到的bug</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ModuleNotFoundError: No module named &#39;sklearn.cross_validation&#39;</span><br></pre></td></tr></table></figure><p>解决：</p><p><a href="https://blog.csdn.net/qq_35962520/article/details/85295228" target="_blank" rel="noopener">https://blog.csdn.net/qq_35962520/article/details/85295228</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># from sklearn.cross_validation import train_test_split # cross_validation不再使用，移至model_selection</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/chuym726/DeephageTP&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/chuym726/DeephageTP&lt;/a&gt;&lt;/
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="bioinformatics" scheme="http://yoursite.com/tags/bioinformatics/"/>
    
  </entry>
  
  <entry>
    <title>读论文笔记 DeephageTP</title>
    <link href="http://yoursite.com/2020/11/19/paper-note/"/>
    <id>http://yoursite.com/2020/11/19/paper-note/</id>
    <published>2020-11-19T07:39:03.000Z</published>
    <updated>2020-11-19T09:02:48.965Z</updated>
    
    <content type="html"><![CDATA[<p><strong>DeephageTP: A Convolutional Neural Network Framework for Identifying Phage-specific Proteins from metagenomic sequencing data<br> Running title: an alignment-free deep learning framework for identifying phage- specific proteins</strong></p><p>参考：原文 &amp; Github <a href="https://github.com/chuym726/DeephageTP" target="_blank" rel="noopener">https://github.com/chuym726/DeephageTP</a></p><hr><h1 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h1><p>3 specific proteins of the tailed phage:</p><ol><li>Portal (portal protein)</li><li>TerL (large terminase subunit protein) </li><li>TerS (small terminase subunit protein)</li></ol><p>Develop a <strong>CNN-based framework</strong> to identify these 3 proteins from <strong>metagenome data</strong></p><h1 id="数据集"><a href="#数据集" class="headerlink" title="数据集"></a>数据集</h1><h2 id="train-test-set"><a href="#train-test-set" class="headerlink" title="train/test set"></a>train/test set</h2><p>(原文位置：106-127行)</p><p>来源：Uniport(<a href="http://www.uniprot.org" target="_blank" rel="noopener">www.uniprot.org</a>)</p><p>预处理过程：</p><ol><li><p>从数据库中获取各类蛋白质序列</p><blockquote><p>according to the taxonomy in the UniProt database, all proteins in archaea, bacteria and viruses were obtained from the database;</p></blockquote><p>看example_data.fa文件，长这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;UniRef100_A0A017QK57 PBSX family phage terminase large subunit n&#x3D;1 Tax&#x3D;Glaesserella parasuis str. Nagasaki TaxID&#x3D;1117322 RepID&#x3D;A0A017QK57_HAEPR 1</span><br><span class="line">MKIQLNLPPKLIPVFTQQNVRYRGAYGGRGSAKTRTFAKMTAVVAYQRAMQGESGVILCGREFMNSLEDSSLEEIKQAIQSEPWLTDFFEVGEKYVRTKCGRISYIFTGLRHNLDSIKSKARILLAWIDEAESVSEMAWRKLLPTVRENGSEIWLTWNPEKKGSATDLRFRQHQDESMAIVEMNYSDNPWFPDVLEQERLRDKARLDDATYRWIWEGAYLEQSEAQIFRDKFQELEFKPNGDFSGPYFGLDFGFAQDPTAAVKCWVFKDELYIEYEAGKVGLELDDTATFLQKGIVGIEQYVIRADSARPESISYLKRHGLPRIDGVSKWKGSVEDGIAHIKSYKKIYIHPRCQQTLNEFRLYSYKTDRLSGDILPVVLDENNHYIDALRYALEPLMKGRQSWFG</span><br><span class="line">&gt;UniRef100_A0A017QKX8 PBSX family phage terminase large subunit n&#x3D;1 Tax&#x3D;Glaesserella parasuis str. Nagasaki TaxID&#x3D;1117322 RepID&#x3D;A0A017QKX8_HAEPR 1</span><br><span class="line">MKIQLNLPPKLIPVFTQQNVRYRGAYGGRGSAKTRTFAKMTAVVAYQRAMQGESGVILCGREFMNSLEDSSLEEIKQAIQSEPWLANFFDVGEKYVHTKCGRISYIFTGLRHNLDSIKSKARILLAWIDEAESVSEMAWRKLLPTVRESGSEIWLTWNPEKKGSATDLRFRQYQDESMAIVEMNYNDNPWFPDVLKQERLRDKARLDDATYRWIWEGDYLEESEAQVFRGKYQELEFKPLPDFEGPYHGLDFGFAQDPTAAIKCWVFKDELYIEYEAGKVGLELDDTATFLQKGIVGIEQYVIRADSARPESISYLKRHGLPRIDGVSKWKGSVEDGIAHIKSYKKIYIHPRCQQTLNEFRLYSYKTDRLSGDVLPTLVDAHNHYIDALRYALNPRIQRKGDFSQNPLKLY</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p>去除无关数据</p><blockquote><p>the protein sequences were searched by the keywords (i.e., portal, large terminase subunit, and small terminase subunit), and the noise sequences with the uncertain keywords (e.g., hypothetical, possible, like, predicted) were removed to ensure that the selected protein sequences in the three categories are veracious;</p></blockquote></li><li><p>其它类过多，随机留一部分</p><blockquote><p>the remaining sequences without the keywords of interest (portal, large terminase subunit and, small terminase subunit) were labeled as the ‘others’ category. However, the size of the ‘others’ category is more than 75 times larger than that of the three categories. To relieve the class-imbalance problem brought by this situation, we randomly selected 20000 protein sequences  from the remaining sequences and labeled as the ‘others’ category;</p></blockquote></li><li><p>去除不正常长度的序列</p><blockquote><p>to further guarantee that the sequences from the database with the three categories are veracious, we calculated length distribution of these sequences (see Fig. S1), then manually checked the sequences with the abnormal length (&lt;5% and &gt; 95%) using Blastp (<a href="https://blast.ncbi.nlm.nih.gov/Blast.cgi" target="_blank" rel="noopener">https://blast.ncbi.nlm.nih.gov/Blast.cgi</a>) against NCBI nr database, and the sequences without hitting to the targeted references were filtered out (almost all the sequences with abnormal length) and labeled as the ‘others’ category.</p></blockquote></li></ol><p>最终结果：</p><img src="/images/2020/screencapture2020-11-19 PM4.09.05.jpg"><h2 id="mimic-metagenomic-dataset"><a href="#mimic-metagenomic-dataset" class="headerlink" title="mimic metagenomic dataset"></a>mimic metagenomic dataset</h2><p>(原文位置：128-140行)</p><p>来源：UniRef100 (<a href="https://www.uniprot.org/uniref/" target="_blank" rel="noopener">https://www.uniprot.org/uniref/</a>)</p><p>处理过程和上面类似</p><p>且：2个数据库有重合，手动删除重合部分</p><p>用这组数据测试了模型在不同数据集大小上的表现效果</p><h2 id="virome-dataset"><a href="#virome-dataset" class="headerlink" title="virome dataset"></a>virome dataset</h2><p>(原文位置：141-147行)</p><p>用于测试模型在真实数据集上的结果</p><p>这组是原始数据，自行获取蛋白质序列</p><h2 id="3个数据集的用途"><a href="#3个数据集的用途" class="headerlink" title="3个数据集的用途"></a>3个数据集的用途</h2><p>(原文位置：193-197行 + Fig.1A)</p><ol><li>用train/test set训练模型，分析可行性</li><li>用mimic dataset测试cutoff value</li><li>用virome dataset测试真实效果</li></ol><blockquote><p>In summary, as shown in Fig. 1A, in this study, the proposed DeephageTP framework was firstly implemented on the training dataset for feasibility analysis, and then the trained model was applied on the mimic dataset for test and the cutoff value of each category of interest was determined according to the responding loss values distributions; finally, we applied the trained model on the real metagenomic datasets for examining the performance of our framework.</p></blockquote><img src="/images/2020/screencapture2020-11-19 PM3.47.08.jpg"><h1 id="蛋白质序列编码"><a href="#蛋白质序列编码" class="headerlink" title="蛋白质序列编码"></a>蛋白质序列编码</h1><p>(原文位置：148-161行)</p><p>方法：one-hot</p><p>对20个氨基酸进行one-hot编码，1个氨基酸占20位</p><img src="/images/2020/screencapture2020-11-19 PM4.20.48.jpg" width="300px"><p>L个氨基酸的蛋白质序列将被编码成 L * 20 的矩阵</p><p>输入需要固定，故设置最大长度为900，多了砍掉，少了填0</p><p>最终每个蛋白质序列都被编码成 900 * 20 的矩阵，作为输入</p><h1 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h1><h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><p>(原文位置：163-170行)</p><ol><li><p>输入层 (ReLu)</p></li><li><p>卷积层</p></li><li><p>最大池化层 (dropout)</p></li><li><p>全连接层1 (ReLu) (dropout)</p></li><li><p>全连接层2</p></li><li><p>输出层 (SoftMax)</p></li></ol><img src="/images/2020/screencapture2020-11-19 PM4.20.481.jpg"><h2 id="超参数选择"><a href="#超参数选择" class="headerlink" title="超参数选择"></a>超参数选择</h2><p>(原文位置：171-189行)</p><p>全连接单元数量、dropout rate、learning rate等的取值，大部分是常用的默认值；一些用5-fold cross-validation确定</p><p>20个氨基酸分成7组（根据dipole moments &amp; side-chain）： {A,G,V}, {I,L,F,P}, {Y,M,T,S}, {H,N,Q,W}, {R,K}, {D,E} and {C} -&gt; 卷积层filter大小设置为 7 * 1</p><h2 id="模型评估指标"><a href="#模型评估指标" class="headerlink" title="模型评估指标"></a>模型评估指标</h2><p>(原文位置：198-213行)</p><ul><li>Accuracy</li><li>Precision</li><li>Recall</li><li>F1-score</li></ul><h2 id="Loss计算"><a href="#Loss计算" class="headerlink" title="Loss计算"></a>Loss计算</h2><p>(原文位置：214-234行)</p><img src="/images/2020/screencapture2020-11-19 PM4.50.00.jpg"><p>yk 第k维的序列的真实标签</p><p>pk 第k维的序列的预测标签</p><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>(原文位置：190-192行)</p><p>Python 3.6</p><p>Keras</p><p><a href="https://github.com/chuym726/DeephageTP" target="_blank" rel="noopener">https://github.com/chuym726/DeephageTP</a></p><h1 id="没看懂的"><a href="#没看懂的" class="headerlink" title="没看懂的"></a>没看懂的</h1><ol><li>cutoff value是做什么的？怎么算的？</li><li>loss怎么算的？</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;DeephageTP: A Convolutional Neural Network Framework for Identifying Phage-specific Proteins from metagenomic sequencing data&lt;br&gt;
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="bioinformatics" scheme="http://yoursite.com/tags/bioinformatics/"/>
    
  </entry>
  
  <entry>
    <title>读论文笔记 ANN to Detect Structural Proteins</title>
    <link href="http://yoursite.com/2020/11/13/reading-note/"/>
    <id>http://yoursite.com/2020/11/13/reading-note/</id>
    <published>2020-11-13T07:15:21.000Z</published>
    <updated>2020-11-14T03:27:08.465Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Artificial Neural Networks Trained to Detect Viral and Phage Structural Proteins</strong></p><h1 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h1><p>来源：GenBank’s non-redun- dant database</p><p>原始数据：</p><ul><li><p>正样本：6000+噬菌体结构蛋白序列</p></li><li><p>负样本：6000+噬菌体和原核基因组非结构蛋白序列</p></li></ul><p>处理后的网络输入：氨基酸百分比组成（人工标记每个样本是/不是结构蛋白）</p><p>目的：有一段新的序列，计算氨基酸百分比组成，输入网络，预测是否为结构蛋白</p><h1 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h1><h2 id="训练"><a href="#训练" class="headerlink" title="训练"></a>训练</h2><p>目标：找最佳的网络结构&amp;数据集划分</p><p>备选网络结构：</p><ul><li>隐藏层1，1~100个神经元</li><li>隐藏层2，1~30个神经元</li></ul><p>备选train/validation set划分：</p><ul><li>50:50, 60:40, 70:30, 80:20, 95:5</li></ul><p>验证方法：160-fold交叉验证（图3A画的是10-fold交叉验证的结果）</p><p>验证结果：</p><ol><li><p>输入层（20个输入单元）+ 1个隐藏层（90个神经元）+ 输出层（1个输出单元）表现最好，准确率85.6%</p></li><li><p>train/validation set划分80:20表现最好，准确率86.2%</p></li><li><p>由于没有很大差别，最终选了160个网络，投票决定</p></li></ol><h2 id="更多工作"><a href="#更多工作" class="headerlink" title="更多工作"></a>更多工作</h2><p>关注对结构蛋白亚类的分类结果，如：是否是衣壳结构蛋白</p><p>即输入数据的标记，原来标记是否为结构蛋白，现在标记是否为衣壳结构蛋白，重新训练网络，评估分类准确度</p><p>还做了针对古细菌和真核生物衣壳蛋白的</p><p>Isoelectric point？没看懂</p><h1 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h1><p>Neural Network Toolbox 7.0 in Matlab version 7.6.0.324</p><p>computations and data manipulations were done with Java, UNIX shell utilities, and Perl and Bash scripts</p><h1 id="web-interface"><a href="#web-interface" class="headerlink" title="web interface"></a>web interface</h1><p><a href="https://vdm.sdsu.edu/ivireons/" target="_blank" rel="noopener">https://vdm.sdsu.edu/ivireons/</a></p><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>随便上Genbank找了一个序列<a href="https://www.ncbi.nlm.nih.gov/protein/SYW18879.1" target="_blank" rel="noopener">https://www.ncbi.nlm.nih.gov/protein/SYW18879.1</a></p><p>下载FASTA格式</p><p>sequence.fasta:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;SYW18879.1 putative transcriptional regulator (Immunity repressor; phage) [Oenococcus oeni]</span><br><span class="line">MENKPNIAKNIREIRIKEDLTQEKLAELSGLSINFVSRLERSNNQNVSINKLEAIASALKVDIWRLLKSN</span><br><span class="line">DSEINKKEFPLHTKILFDKLSEFDPERSDRISKTILSLLEELELKQK</span><br></pre></td></tr></table></figure><p>提交测试</p><img src="/images/2020/screencapture2020-11-14 AM11.19.45.jpg"><p><strong>Structural, MCP, &amp; Tail Protein Network Predictions</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">AnnotationStructural</span><br><span class="line">MCP 1:1</span><br><span class="line">MCP 2:1</span><br><span class="line">MCP 3:1</span><br><span class="line">MCP 4:1</span><br><span class="line">MCP 7:1</span><br><span class="line">MCP Lambda:1</span><br><span class="line">MCP Lambda2:1</span><br><span class="line">Tail 1:1</span><br><span class="line">Tail 2:1</span><br><span class="line">Tail 3:1</span><br><span class="line">Tail 4:1</span><br><span class="line">Tail 7:1</span><br><span class="line">Tail Lambda:1</span><br><span class="line">Tail Lambda2:1</span><br><span class="line">SDSSD MCP 1:1</span><br><span class="line">SD MCP 2:1</span><br><span class="line">SD MCP 3:1</span><br><span class="line">SD MCP 4:1</span><br><span class="line">SD MCP 7:1</span><br><span class="line">SD MCP Lambda:1</span><br><span class="line">SD MCP Lambda2:1</span><br><span class="line">SD Tail 1:1</span><br><span class="line">SD Tail 2:1</span><br><span class="line">SD Tail,3:1</span><br><span class="line">SD Tail 4:1</span><br><span class="line">SD Tail 7:1</span><br><span class="line">SD Tail Lambda:1</span><br><span class="line">SD Tail Lambda2:1</span><br></pre></td></tr></table></figure><p><strong>Percent Compositions and Isoelectric Point Estimates (last column)</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0.0427 0.0000 0.0513 0.1197 0.0342 0.0085 0.0085 0.1026 0.1197 0.1453 0.0085 0.0855 0.0256 0.0256 0.0598 0.1026 0.0256 0.0256 0.0085 0.0000 9.07</span><br></pre></td></tr></table></figure><p>根据<a href="http://vdm.sdsu.edu/ivireons/interpret.html" target="_blank" rel="noopener">interpret your results</a>的提示…没看懂</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;Artificial Neural Networks Trained to Detect Viral and Phage Structural Proteins&lt;/strong&gt;&lt;/p&gt;
&lt;h1 id=&quot;数据&quot;&gt;&lt;a href=&quot;#数据&quot; class=&quot;he
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="bioinformatics" scheme="http://yoursite.com/tags/bioinformatics/"/>
    
  </entry>
  
  <entry>
    <title>AR Foundation笔记05 Gaze Interaction</title>
    <link href="http://yoursite.com/2020/09/28/note-arfoundation-05/"/>
    <id>http://yoursite.com/2020/09/28/note-arfoundation-05/</id>
    <published>2020-09-28T13:31:47.000Z</published>
    <updated>2020-09-28T15:49:36.200Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.youtube.com/watch?v=OE66gtiF8QQ&amp;ab_channel=ThirdAurora" target="_blank" rel="noopener">https://www.youtube.com/watch?v=OE66gtiF8QQ&amp;ab_channel=ThirdAurora</a></p></blockquote><hr><h1 id="First-Try-Failed"><a href="#First-Try-Failed" class="headerlink" title="First Try (Failed)"></a>First Try (Failed)</h1><h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p>start from : <a href="https://github.com/Third-Aurora/ARFoundationExample" target="_blank" rel="noopener">https://github.com/Third-Aurora/ARFoundationExample</a> </p><p>新建一个Project03，把Assets拷进去</p><p>资源管理器里+ARFoundation &amp; AR Core</p><p>切换平台到Android，一系列设置同笔记01</p><h2 id="Content-Parent"><a href="#Content-Parent" class="headerlink" title="Content Parent"></a>Content Parent</h2><p>已导入资源：</p><img src="/images/2020/screencapture2020-09-28 PM9.39.17.jpg" width=300><p>Content Parent -&gt; Cube xyz都改成0.5</p><p>创建空对象叫SectionInfo</p><p>创建3D Object Quad叫InfoParent</p><p>把SectionInfo拖高一点 Y-&gt;1.5</p><p>旋转InfoParent Y-&gt;180 缩放 X-&gt;2</p><h2 id="Materials"><a href="#Materials" class="headerlink" title="Materials"></a>Materials</h2><p>Assets中新建文件夹Materials</p><p>创建材质trans，拖到InfoParent上</p><p>颜色：Black 0.7Opacity</p><p>Rendering Mode：Transparent</p><p>另外创建一个blue材质，拖到cube上</p><h2 id="InfoParent"><a href="#InfoParent" class="headerlink" title="InfoParent"></a>InfoParent</h2><p>InfoParent下创建Cube，调整一下位置</p><img src="/images/2020/screencapture2020-09-28 PM9.50.14.jpg"><p>也用trans材质</p><p>创建Text - TextMeshPro，import TMP essentials</p><p>调整大小，文字居中，Auto Size（min 0，max 1000）</p><img src="/images/2020/screencapture2020-09-28 PM10.11.12.jpg"><p>InfoParent拖成和SectionInfo同级</p><p>拖动SectionInfo的锚点高度和Cube上方对齐</p><p>再把InfoParent拖进去</p><p>此时调整SetcionInfo Scale的y，牌子像从Box里出来</p><p>(Text -&gt; Extra Setting -&gt; Order in Layer改成1 )</p><h2 id="Script"><a href="#Script" class="headerlink" title="Script"></a>Script</h2><ol><li>让SectionInfo出现</li></ol><p>新建Script叫InfoBehavior，拖到Cube上</p><p>并把SetionInfo拖到变量上</p><img src="/images/2020/screencapture2020-09-28 PM10.42.07.jpg"><ol start="2"><li>SectionInfo旋转对准摄像头</li></ol><p>新建script叫FaceCamera</p><p>AR Camera标签为MainCamera</p><p>script拖到SectionInfo上</p><p>此时拖动camera，牌子就会跟着动了（不行就删了script然后重新拖进去）</p><img src="/images/2020/screencapture2020-09-28 PM11.18.36.jpg" width=400><ol start="3"><li>Gaze</li></ol><p>Cube加标签hasInfo</p><img src="/images/2020/screencapture2020-09-28 PM11.26.14.jpg" width=400><p>新建script叫Gaze，拖到MainCamera上</p><hr><p>测试并没有预期效果？</p><p>而且之前导入的一堆Assets并没有用到？</p><p>重新创建空白项目试试</p><hr><h1 id="Second-Try"><a href="#Second-Try" class="headerlink" title="Second Try"></a>Second Try</h1>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=OE66gtiF8QQ&amp;amp;ab_channel=ThirdAurora&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="ar" scheme="http://yoursite.com/tags/ar/"/>
    
  </entry>
  
  <entry>
    <title>AR Foundation笔记04 Tap to Place Objects in AR</title>
    <link href="http://yoursite.com/2020/09/28/note-arfoundation-04/"/>
    <id>http://yoursite.com/2020/09/28/note-arfoundation-04/</id>
    <published>2020-09-28T13:05:16.000Z</published>
    <updated>2020-09-28T13:26:42.554Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.youtube.com/watch?v=xguiSueY1Lw&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=5&amp;ab_channel=DineshPunni" target="_blank" rel="noopener">https://www.youtube.com/watch?v=xguiSueY1Lw&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=5&amp;ab_channel=DineshPunni</a></p></blockquote><hr><p>(接笔记03)</p><p>Create New Folder (Scripts)</p><p>Create C# Script</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.XR.ARFoundation;</span><br><span class="line">using UnityEngine.XR.ARSubsystems;</span><br><span class="line"></span><br><span class="line">[RequireComponent(typeof(ARRaycastManager))]</span><br><span class="line">public class ARTapToPlaceObject : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public GameObject gameObjectToInstantiate;</span><br><span class="line">    </span><br><span class="line">    private GameObject spawnedObject;</span><br><span class="line">    private ARRaycastManager arRaycastManager;</span><br><span class="line">    private Vector2 touchPosition;</span><br><span class="line">    </span><br><span class="line">    static List&lt;ARRaycastHit&gt; hits &#x3D; new List&lt;ARRaycastHit&gt;();</span><br><span class="line">    </span><br><span class="line">    private void Awake()</span><br><span class="line">    &#123;</span><br><span class="line">        arRaycastManager &#x3D; GetComponent&lt;ARRaycastManager&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    bool TryGetTouchPosition(out Vector2 touchPosition)</span><br><span class="line">    &#123;</span><br><span class="line">        if(Input.touchCount &gt; 0)</span><br><span class="line">        &#123;</span><br><span class="line">            touchPosition &#x3D; Input.GetTouch(0).position;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        touchPosition &#x3D; default;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if(!TryGetTouchPosition(out Vector2 touchPosition))</span><br><span class="line">        &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        if(arRaycastManager.Raycast(touchPosition,hits,TrackableType.PlaneWithinPolygon))</span><br><span class="line">        &#123;</span><br><span class="line">            var hitPose &#x3D; hits[0].pose;</span><br><span class="line">            </span><br><span class="line">            if(spawnedObject &#x3D;&#x3D; null)</span><br><span class="line">            &#123;</span><br><span class="line">                spawnedObject &#x3D; Instantiate(gameObjectToInstantiate, hitPose.position, hitPose.rotation);</span><br><span class="line">            &#125;</span><br><span class="line">            else</span><br><span class="line">            &#123;</span><br><span class="line">                spawnedObject.transform.position &#x3D; hitPose.position;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>把Script拖进AR Session Origin</p><p>Create Cube拖进Prefabs，拖进GameObjectToInstantiate</p><img src="/images/2020/screencapture2020-09-28 PM9.20.08.jpg"><p>Build</p><img src="/images/2020/Screenshot_2020-09-28-21-25-16-503_com.coconutnut.jpg" width=400><p>Yeah~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=xguiSueY1Lw&amp;amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;amp;index=5&amp;amp;ab_channel=
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="ar" scheme="http://yoursite.com/tags/ar/"/>
    
  </entry>
  
  <entry>
    <title>AR Foundation笔记03 Plane Detection</title>
    <link href="http://yoursite.com/2020/09/28/note-arfoundation-03/"/>
    <id>http://yoursite.com/2020/09/28/note-arfoundation-03/</id>
    <published>2020-09-28T12:16:29.000Z</published>
    <updated>2020-09-28T13:05:02.587Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p> <a href="https://www.youtube.com/watch?v=uWWiYfPTUtU&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=4&amp;ab_channel=DineshPunni" target="_blank" rel="noopener">https://www.youtube.com/watch?v=uWWiYfPTUtU&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=4&amp;ab_channel=DineshPunni</a></p></blockquote><hr><ol><li>add AR Plane Manager</li></ol><p>AR Session Origin-&gt; add component -&gt; AR Plane Manager</p><ol start="2"><li>Build your own plane object (or use prebuilt prefab)</li></ol><p>Create Empty Object</p><p>Add Components</p><img src="/images/2020/screencapture2020-09-28 PM8.44.02.jpg" width=400><p>Line Renderer</p><img src="/images/2020/screencapture2020-09-28 PM8.46.59.jpg" width=400><ol start="3"><li>Add material to Mesh Renderer</li></ol><p>Create a folder in Assets</p><p>Create Material</p><img src="/images/2020/screencapture2020-09-28 PM8.49.54.jpg"><p>Assign to Mesh Renderer</p><ol start="4"><li>Create prefab of this plane</li></ol><p>Create a folder (Prefabs)</p><p>Drag ARPlane to folder</p><p>Assign to AR Plane Manager</p><img src="/images/2020/screencapture2020-09-28 PM8.52.28.jpg"><ol start="5"><li>Build</li></ol><img src="/images/2020/Screenshot_2020-09-28-20-59-24-106_com.coconutnut.jpg" width=400><p>🧐很是迷惑</p><img src="/images/2020/Screenshot_2020-09-28-21-03-08-471_com.coconutnut.jpg" width=400><p>改了一下顺眼多了</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=uWWiYfPTUtU&amp;amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;amp;index=4&amp;amp;ab_channel
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="ar" scheme="http://yoursite.com/tags/ar/"/>
    
  </entry>
  
  <entry>
    <title>AR Foundation笔记02 Image Tracking</title>
    <link href="http://yoursite.com/2020/09/26/note-arfoundation-02/"/>
    <id>http://yoursite.com/2020/09/26/note-arfoundation-02/</id>
    <published>2020-09-26T10:21:08.000Z</published>
    <updated>2020-09-26T10:49:32.732Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.youtube.com/watch?v=o_z_Eb8Yh2g&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=3&amp;ab_channel=DineshPunni" target="_blank" rel="noopener">https://www.youtube.com/watch?v=o_z_Eb8Yh2g&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=3&amp;ab_channel=DineshPunni</a></p></blockquote><hr><p>AR Session Origin -&gt; Add AR Tracked Image Manager</p><p>Assets -&gt; Create -&gt; XR -&gt; Reference Image Library</p><p>拖一张图到Assets里</p><p>Reference Library -&gt; Add Image 把图拖进去，填Physical Size</p><img src="/images/2020/screencapture2020-09-26 PM6.30.20.jpg"><p>AR Session Origin -&gt; 把Reference Library拖到AR Tracked Image Manager中</p><p>Assets -&gt; Create -&gt; C# Script -&gt; 重命名ImageRecognitionExample</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.XR.ARFoundation;</span><br><span class="line"></span><br><span class="line">public class NewBehaviourScript : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    private ARTrackedImageManager _arTrackedImageManager;</span><br><span class="line">    </span><br><span class="line">    private void Awake()</span><br><span class="line">    &#123;</span><br><span class="line">        _arTrackedImageManager &#x3D; FindObjectOfType&lt;ARTrackedImageManager&gt;();    </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void OnEnable()</span><br><span class="line">    &#123;</span><br><span class="line">        _arTrackedImageManager.trackedImagesChanged +&#x3D; OnImageChanged;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void onDisable()</span><br><span class="line">    &#123;</span><br><span class="line">        _arTrackedImageManager.trackedImagesChanged -&#x3D; OnImageChanged;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void OnImageChanged(ARTrackedImagesChangedEventArgs args)</span><br><span class="line">    &#123;</span><br><span class="line">        foreach (var trackedImage in args.added)</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(trackedImage.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Create 3D Object Cube，调整位置、大小</p><img src="/images/2020/screencapture2020-09-26 PM6.44.08.jpg"><p>拖进Assets（变成prefab），在SampleScene中删除</p><p>把prefab拖进AR Tracked Image Manager</p><p>Build</p><img src="/images/2020/Screenshot_2020-09-26-18-48-02-522_com.coconutnut.jpg" width=400><p>成功~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=o_z_Eb8Yh2g&amp;amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;amp;index=3&amp;amp;ab_channel=
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="ar" scheme="http://yoursite.com/tags/ar/"/>
    
  </entry>
  
  <entry>
    <title>AR Foundation笔记01 安卓Setup</title>
    <link href="http://yoursite.com/2020/09/26/note-arfoundation-01/"/>
    <id>http://yoursite.com/2020/09/26/note-arfoundation-01/</id>
    <published>2020-09-26T09:37:55.000Z</published>
    <updated>2020-09-26T10:22:06.105Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p> <a href="https://www.youtube.com/watch?v=0mpsiO2lCx0&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=1&amp;ab_channel=DineshPunni" target="_blank" rel="noopener">https://www.youtube.com/watch?v=0mpsiO2lCx0&amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;index=1&amp;ab_channel=DineshPunni</a></p></blockquote><hr><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><p>macOS Catalina 10.15.6</p><p>Unity Hub 2.3.10</p><p>Unity 2020.1.6f1c1</p><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>File -&gt; Build Settings</p><p>切换平台到Android</p><p>-&gt; Player Settings</p><ol><li><p>Other Settings -&gt; 改Package Name</p></li><li><p>Disable Multithread Rendering (Android doesn’t support yet)</p></li><li><p>Graphics APIs -&gt; disable Vulkan</p></li><li><p>Minimun API level -&gt; 26</p></li></ol><h1 id="Package"><a href="#Package" class="headerlink" title="Package"></a>Package</h1><p>Window -&gt; Package Manager -&gt; Packages : Unity Registry</p><img src="/images/2020/screencapture2020-09-26 PM5.51.57.jpg" width=400><h1 id="Sample-Scene"><a href="#Sample-Scene" class="headerlink" title="Sample Scene"></a>Sample Scene</h1><ol><li><p>删除Main Camera</p></li><li><p>Right Click -&gt; XR -&gt; AR Session Origin</p><p>AR Camera 标签 MainCamera</p></li><li><p>Right Click -&gt; XR -&gt; AR Session</p></li><li><p>Right Click -&gt; 3D Object -&gt; Cube<br>位置改成0，0，0<br>缩放改成0.2，0.2，0.2<br>随便转转</p></li></ol><h1 id="Build"><a href="#Build" class="headerlink" title="Build"></a>Build</h1><p>手机 -&gt; 开发者模式</p><p>连上</p><p>File -&gt; Build Settings -&gt; Run Device -&gt; 选中手机</p><p> Add Open Scene</p><p>Build and Run</p><img src="/images/2020/Screenshot_2020-09-26-18-10-31-833_com.coconutnut.jpg" width=400><p>成功<del>~</del></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=0mpsiO2lCx0&amp;amp;list=PL6VJLOFcTt7awvyIGIbLLPOBrW6-Y1R-J&amp;amp;index=1&amp;amp;ab_channel
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="ar" scheme="http://yoursite.com/tags/ar/"/>
    
  </entry>
  
  <entry>
    <title>安装splinter记录</title>
    <link href="http://yoursite.com/2020/09/09/note-splinter/"/>
    <id>http://yoursite.com/2020/09/09/note-splinter/</id>
    <published>2020-09-09T07:07:12.000Z</published>
    <updated>2020-10-16T07:11:03.376Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install splinter</span><br></pre></td></tr></table></figure><p>坑</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask install chromedriver</span><br></pre></td></tr></table></figure><p>特别慢，装完一跑发现版本是81</p><p>但是chrome://version查看是85，用不了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask uninstall chromedriver</span><br></pre></td></tr></table></figure><p>卸了</p><p>直接在<a href="https://sites.google.com/a/chromium.org/chromedriver/downloads" target="_blank" rel="noopener">https://sites.google.com/a/chromium.org/chromedriver/downloads</a> 下载了对应版本，拖到/usr/local/bin/ 里</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">% chromedriver -v</span><br><span class="line">ChromeDriver 85.0.4183.87 (cd6713ebf92fa1cacc0f1a598df280093af0c5d7-refs&#x2F;branch-heads&#x2F;4183@&#123;#1689&#125;)</span><br></pre></td></tr></table></figure><p>成功</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span cla
      
    
    </summary>
    
    
      <category term="Debug" scheme="http://yoursite.com/categories/Debug/"/>
    
    
  </entry>
  
  <entry>
    <title>记录部署静态页面</title>
    <link href="http://yoursite.com/2020/08/10/webpage/"/>
    <id>http://yoursite.com/2020/08/10/webpage/</id>
    <published>2020-08-09T16:05:05.000Z</published>
    <updated>2020-08-09T16:09:21.064Z</updated>
    
    <content type="html"><![CDATA[<p>把index.html和assets准备好</p><p>ssh连上服务器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install apache2</span><br></pre></td></tr></table></figure><p>把文件传到/var/www/html</p><p>（一开始传成了/root/var/www/html，index.html一直显示不对）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;apache2&#x2F;apache2.conf</span><br></pre></td></tr></table></figure><p>最后加一句</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServerName ***.**.**.89</span><br></pre></td></tr></table></figure><p>然后</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;apache2&#x2F;mods-available&#x2F;dir.conf</span><br></pre></td></tr></table></figure><p>改成</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;IfModule mod_dir.c&gt;</span><br><span class="line">DirectoryIndex  index.html</span><br><span class="line">&lt;&#x2F;IfModule&gt;</span><br></pre></td></tr></table></figure><p>重启</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apache2ctl -k restart</span><br></pre></td></tr></table></figure><p>浏览器访问</p><p><a href="http://xxx/index.html" target="_blank" rel="noopener">http://xxx/index.html</a></p><p>ok</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;把index.html和assets准备好&lt;/p&gt;
&lt;p&gt;ssh连上服务器&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
  </entry>
  
  <entry>
    <title>读书笔记 大脑修复术</title>
    <link href="http://yoursite.com/2020/07/25/brain/"/>
    <id>http://yoursite.com/2020/07/25/brain/</id>
    <published>2020-07-25T12:17:15.000Z</published>
    <updated>2020-07-25T12:27:06.421Z</updated>
    
    <content type="html"><![CDATA[<img src="/images/2020/brain1.png"><img src="/images/2020/brain2.png"><img src="/images/2020/brain3.png"><img src="/images/2020/brain4.png">]]></content>
    
    <summary type="html">
    
      
      
        &lt;img src=&quot;/images/2020/brain1.png&quot;&gt;

&lt;img src=&quot;/images/2020/brain2.png&quot;&gt;

&lt;img src=&quot;/images/2020/brain3.png&quot;&gt;

&lt;img src=&quot;/images/2020/brain4
      
    
    </summary>
    
    
      <category term="Memo" scheme="http://yoursite.com/categories/Memo/"/>
    
    
      <category term="mindmap" scheme="http://yoursite.com/tags/mindmap/"/>
    
  </entry>
  
  <entry>
    <title>记录服务器安装Anaconda</title>
    <link href="http://yoursite.com/2020/06/24/memo-python/"/>
    <id>http://yoursite.com/2020/06/24/memo-python/</id>
    <published>2020-06-24T04:28:18.000Z</published>
    <updated>2020-11-20T07:12:04.936Z</updated>
    
    <content type="html"><![CDATA[<p>pyenv每次都要source ~/.bash_profile才能生效，扎心，卸了</p><p>现在笔记本上应该只有系统自带的2.7（和没卸干净的遗留文件）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">coconutnut@Ss-MacBook-Pro ~ % python -V</span><br><span class="line">Python 2.7.17</span><br><span class="line">coconutnut@Ss-MacBook-Pro ~ % pip -V</span><br><span class="line">pip 19.3.1 from &#x2F;usr&#x2F;local&#x2F;lib&#x2F;python2.7&#x2F;site-packages&#x2F;pip (python 2.7)</span><br></pre></td></tr></table></figure><p>想了下干脆装服务器上好了</p><hr><h1 id="安装Anaconda"><a href="#安装Anaconda" class="headerlink" title="安装Anaconda"></a>安装Anaconda</h1><blockquote><p><a href="https://blog.csdn.net/qq_41813258/article/details/102400325" target="_blank" rel="noopener">https://blog.csdn.net/qq_41813258/article/details/102400325</a></p></blockquote><blockquote><p><a href="https://repo.anaconda.com/archive/" target="_blank" rel="noopener">https://repo.anaconda.com/archive/</a></p></blockquote><p>官网下了个最新版anaconda3-2020.02-linux-x86_64.sh/</p><p>bash安装，配置环境变量</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># conda -V</span><br><span class="line">conda 4.8.2</span><br></pre></td></tr></table></figure><p>完成</p><p>创建一个3.7.6的环境</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># conda create -n env3.7 python&#x3D;3.7.6</span><br><span class="line">...</span><br><span class="line">#</span><br><span class="line"># To activate this environment, use</span><br><span class="line">#</span><br><span class="line">#     $ conda activate env3.7</span><br><span class="line">#</span><br><span class="line"># To deactivate an active environment, use</span><br><span class="line">#</span><br><span class="line">#     $ conda deactivate</span><br></pre></td></tr></table></figure><h1 id="配置Jupyter-notebook"><a href="#配置Jupyter-notebook" class="headerlink" title="配置Jupyter notebook"></a>配置Jupyter notebook</h1><blockquote><p><a href="https://blog.csdn.net/qq_43058685/article/details/103804238" target="_blank" rel="noopener">https://blog.csdn.net/qq_43058685/article/details/103804238</a></p></blockquote><p>端口配的2020</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook --ip&#x3D;0.0.0.0 --no-browser --allow-root</span><br></pre></td></tr></table></figure><p>浏览器试了一下，ok</p><h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 打开jupyter notebook</span><br><span class="line">jupyter notebook --allow-root</span><br><span class="line"></span><br><span class="line"># 后台运行</span><br><span class="line">nohup jupyter notebook --allow-root &amp;</span><br><span class="line"></span><br><span class="line"># 找到jupyter进程</span><br><span class="line">ps aux | grep jupyter</span><br><span class="line"></span><br><span class="line"># 关闭它</span><br><span class="line">kill XXX(pid)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;pyenv每次都要source ~/.bash_profile才能生效，扎心，卸了&lt;/p&gt;
&lt;p&gt;现在笔记本上应该只有系统自带的2.7（和没卸干净的遗留文件）&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=
      
    
    </summary>
    
    
      <category term="Memo" scheme="http://yoursite.com/categories/Memo/"/>
    
    
  </entry>
  
  <entry>
    <title>读书笔记 推荐系统实践</title>
    <link href="http://yoursite.com/2020/06/24/recommender-system/"/>
    <id>http://yoursite.com/2020/06/24/recommender-system/</id>
    <published>2020-06-24T04:02:22.000Z</published>
    <updated>2020-06-24T04:04:07.653Z</updated>
    
    <content type="html"><![CDATA[<img src="/images/2020/recommendation_system.png">]]></content>
    
    <summary type="html">
    
      
      
        &lt;img src=&quot;/images/2020/recommendation_system.png&quot;&gt;


      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
      <category term="mindmap" scheme="http://yoursite.com/tags/mindmap/"/>
    
  </entry>
  
  <entry>
    <title>笔记 推荐系统</title>
    <link href="http://yoursite.com/2020/06/23/recommendation/"/>
    <id>http://yoursite.com/2020/06/23/recommendation/</id>
    <published>2020-06-23T01:46:41.000Z</published>
    <updated>2020-06-23T05:33:43.965Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://www.bilibili.com/video/av30578499/" target="_blank" rel="noopener">https://www.bilibili.com/video/av30578499/</a></p></blockquote><h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><img src="/images/2020/screencapture2020-06-23 AM9.48.46.jpg"><h1 id="传统推荐系统"><a href="#传统推荐系统" class="headerlink" title="传统推荐系统"></a>传统推荐系统</h1><p>Content-based：unstructured，文字、图像等，需理解语义、提取大量特征，算法复杂延迟高</p><p>Collaborative filtering协同过滤：基于User、Item历史，如点击是1、不点击是0</p><p>Demographic：地域信息</p><p>Knowledge-based：根据专业知识</p><p>Community-based：类似Content-based，如社交网络、人群兴趣</p><p>Hybrid：综合</p><h2 id="协同过滤"><a href="#协同过滤" class="headerlink" title="协同过滤"></a>协同过滤</h2><img src="/images/2020/screencapture2020-06-23 AM9.52.31.jpg"><p>基于相似User判断</p><p>计算相似性 </p><ul><li>Memery-based<ul><li>Item-based 如，把Item转成矩阵计算相似性</li><li>User-based</li></ul></li><li>Model-based 建立User和Item的方程，给定一个User和Item返回一个分数</li></ul><img src="/images/2020/screencapture2020-06-23 AM9.55.53.jpg"><p>思想：根据User-Item Rating矩阵，学到User和Item低维的特征表示，用它计算相似性</p><p>购买为1，点击未购买为0，剩下补0</p><p>矩阵分解：降维 找一个矩阵代表User，一个代表Item，相乘得到</p><p>可做Regularization</p><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul><li>Easy to implement，系统简单，响应快</li><li>Content-independent，与用户其它特征无关，不需要获取这些信息即可实现</li></ul><h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><ul><li>数据稀疏</li><li>Cold-start problem 如新用户特征向量全0，无法计算</li><li>Do not consider content</li></ul><h1 id="深度学习"><a href="#深度学习" class="headerlink" title="深度学习"></a>深度学习</h1><p>优势：表征能力强、不需要做特征工程、</p><p>先创建深度学习的网络结构实现协同过滤，再加入Content-based</p><h2 id="Neural-Collaborative-filtering"><a href="#Neural-Collaborative-filtering" class="headerlink" title="Neural Collaborative filtering"></a>Neural Collaborative filtering</h2><img src="/images/2020/screencapture2020-06-23 AM11.29.37.jpg"><ul><li><p>Embedding Layers</p><ul><li>把任何一个User、Item变成一个低维向量</li><li>One-Hot Encoding</li></ul></li><li><p>Neural CF Layers</p><ul><li>做矩阵分解</li><li>可以加隐藏层，学习非线性表征</li></ul></li></ul><h2 id="Neural-Matrix-Factorization-Model"><a href="#Neural-Matrix-Factorization-Model" class="headerlink" title="Neural Matrix Factorization Model"></a>Neural Matrix Factorization Model</h2><img src="/images/2020/screencapture2020-06-23 AM11.36.27.jpg"><p>线性的和非线性的结合到一起</p><p>问题：没有Content-based，希望加入手工提取的特征</p><h2 id="Wide-Deep-Neural-Network"><a href="#Wide-Deep-Neural-Network" class="headerlink" title="Wide Deep Neural Network"></a>Wide Deep Neural Network</h2><p>Wide部分输入手工特征工程的结果，如：年龄、历史记录</p><p>Deep部分是User、Item</p><p>最后结合到一起做出预测</p><p>Eg: Google Play</p><img src="/images/2020/screencapture2020-06-23 AM11.41.51.jpg"><h2 id="传统的-Factorization-Machines"><a href="#传统的-Factorization-Machines" class="headerlink" title="传统的 Factorization Machines"></a>传统的 Factorization Machines</h2><p>直接对产品的类型信息做One-Hot Encoding</p><img src="/images/2020/screencapture2020-06-23 AM11.48.13.jpg"><p>特征交叉 如性别=男，年龄=20 把对应的维相乘，数据过大是难处理</p><p>用矩阵分解的思想，wij变成&lt;vi,vj&gt;，其中vi,vj都是低维向量</p><p>变形版本：</p><h3 id="Field-aware-Factorization-Machines"><a href="#Field-aware-Factorization-Machines" class="headerlink" title="Field-aware Factorization Machines"></a>Field-aware Factorization Machines</h3><img src="/images/2020/screencapture2020-06-23 AM11.53.47.jpg"><p>考虑特征是来自哪里的</p><p>每一个特征，与其他类别交叉时，有一个不一样的依赖向量</p><h2 id="Deep-Factorization-Machines"><a href="#Deep-Factorization-Machines" class="headerlink" title="Deep Factorization Machines"></a>Deep Factorization Machines</h2><img src="/images/2020/screencapture2020-06-23 AM11.56.26.jpg"><p>左侧：传统部分</p><p>每个种类做Embedding</p><p>为了实现交叉，两两做特征交叉</p><p>线性部分，求和（最左的+）</p><p>右侧：深度部分</p><p>美团的测试结果：</p><img src="/images/2020/screencapture2020-06-23 AM11.58.58.jpg"><p>Wide &amp; Deep 要做特征工程，DeepFM 做了一阶、二阶的特征交叉，同时用Deep神经网络做特征工程</p><h2 id="Deep-Cooperative-Neural-Network"><a href="#Deep-Cooperative-Neural-Network" class="headerlink" title="Deep Cooperative Neural Network"></a>Deep Cooperative Neural Network</h2><p>卷积神经网络</p><p>涉及图片、文字时可参考</p><img src="/images/2020/screencapture2020-06-23 PM12.09.24.jpg"><p>Word-Embedding 把每个单词映射成向量（Google : word2vec）</p><p>最后得到User记录的低维表示，Item描述的低维表示</p><h2 id="Recurrent-Neural-Network"><a href="#Recurrent-Neural-Network" class="headerlink" title="Recurrent Neural Network"></a>Recurrent Neural Network</h2><img src="/images/2020/screencapture2020-06-23 PM1.22.14.jpg"><p>给一个input，映射成低维向量，输出output</p><p>同时反复自己迭代</p><p>可学习与时间有关的信息，如不需要login的网站上用户点击的行为</p><h3 id="Session-based-Recommendation-with-RNN"><a href="#Session-based-Recommendation-with-RNN" class="headerlink" title="Session-based Recommendation with RNN"></a>Session-based Recommendation with RNN</h3><img src="/images/2020/screencapture2020-06-23 PM1.25.03.jpg"><p>预测用户下一步行为</p><h1 id="强化学习"><a href="#强化学习" class="headerlink" title="强化学习"></a>强化学习</h1><p>因为用户行为随时在变化，传统推荐系统无法实时做出调整</p><img src="/images/2020/screencapture2020-06-23 PM1.27.37.jpg"><p>State可以是用户的点击行为</p><p>Reward可以是点击了推荐的产品</p><p>根据当前的State和Reward返回下一步Action</p><p>用户对Action做出反应，得到新的State和Reward</p><p>阿里的例子：</p><img src="/images/2020/screencapture2020-06-23 PM1.30.26.jpg">]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/av30578499/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/av3057849
      
    
    </summary>
    
    
      <category term="Note" scheme="http://yoursite.com/categories/Note/"/>
    
    
  </entry>
  
</feed>
