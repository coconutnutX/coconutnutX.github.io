<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>CoCoNutNut&#39;s NoteBook</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://coconutnutx.github.io/"/>
  <updated>2021-12-06T10:09:23.000Z</updated>
  <id>https://coconutnutx.github.io/</id>
  
  <author>
    <name>coconutnut</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>CA project debugè®°å½•</title>
    <link href="https://coconutnutx.github.io/2021/12/06/ca-debug/"/>
    <id>https://coconutnutx.github.io/2021/12/06/ca-debug/</id>
    <published>2021-12-06T10:09:23.000Z</published>
    <updated>2021-12-06T10:09:23.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é˜¶æ®µä¸€"><a href="#é˜¶æ®µä¸€" class="headerlink" title="é˜¶æ®µä¸€"></a>é˜¶æ®µä¸€</h1><p>å†™å®Œreadã€writeç­‰åŸºç¡€æ“ä½œï¼Œå…ˆåŠ äº†ä¸ªå…¨å±€é”ï¼Œæ”¾åˆ°è™šæ‹Ÿæœºé‡Œæµ‹ä¸€ä¸‹é€»è¾‘ã€‚</p><h2 id="atomic-loadæ—¶segmentation-fault"><a href="#atomic-loadæ—¶segmentation-fault" class="headerlink" title="atomic_loadæ—¶segmentation fault"></a>atomic_loadæ—¶segmentation fault</h2><p>æœ¬åœ°è·‘æ²¡é—®é¢˜ï¼Œä½†æ˜¯è™šæ‹Ÿæœºé‡Œmake build-libs runå°±Segmentation faultã€‚ä¸€ç•ªæŠ˜è…¾åï¼Œå®šä½åˆ°æ˜¯atomic intergerçš„é—®é¢˜ã€‚ç”¨atomic_storeæˆ–è€…atomic_loadçš„æ—¶å€™å°±ä¼šæŠ¥é”™ã€‚</p><h3 id="å°è¯•1"><a href="#å°è¯•1" class="headerlink" title="å°è¯•1"></a>å°è¯•1</h3><p>åœ¨è®¡ç®—control structureçš„åç§»é‡æ—¶ï¼Œç¬¬ä¸€ä¸ªsegmentæ²¡è½¬(void*)ï¼Œäºæ˜¯å–åœ°å€å‡ºäº†é—®é¢˜ï¼Œatomic_loadæ—¶å°±å´©äº†</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">void</span>*)segment+segment-&gt;offset_control+CONTROL_SIZE*index</span><br></pre></td></tr></table></figure><p>æ”¹æˆè¿™æ ·æœ¬åœ°è·‘åˆå–ä¸åˆ°äº†ï¼Œå°±ç¦»è°±</p><h3 id="å°è¯•2ï¼ˆå…³äºç»“æ„ä½“æŒ‡é’ˆï¼‰"><a href="#å°è¯•2ï¼ˆå…³äºç»“æ„ä½“æŒ‡é’ˆï¼‰" class="headerlink" title="å°è¯•2ï¼ˆå…³äºç»“æ„ä½“æŒ‡é’ˆï¼‰"></a>å°è¯•2ï¼ˆå…³äºç»“æ„ä½“æŒ‡é’ˆï¼‰</h3><p>æ€€ç–‘æ˜¯ç»“æ„ä½“æŒ‡é’ˆçš„é—®é¢˜ï¼Œæ‰“å°äº†ä¸€ä¸‹ç›¸å…³çš„å€¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">struct segment* segment;</span><br><span class="line"></span><br><span class="line">DEBUG segment=0x7fb229405a30</span><br><span class="line">DEBUG (uint8_t*)segment=0x7fb229405a30</span><br><span class="line">DEBUG (void*)segment=0x7fb229405a30</span><br><span class="line">DEBUG &amp;segment=0x7ffedfedf530</span><br></pre></td></tr></table></figure><p>å‰ä¸‰ä¸ªæ˜¯ä¸€æ ·çš„ï¼Œç¬¦åˆé¢„æœŸã€‚é‚£ä¹ˆè®¡ç®—åç§»é‡çš„æ—¶å€™æ˜¯å¦ä¹Ÿä¸€æ ·ï¼Ÿ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DEBUG offset=208</span><br><span class="line"></span><br><span class="line">DEBUG segment+offset=0x7fb22940b530</span><br><span class="line">DEBUG (uint8_t*)segment+offset=0x7fb229405b00</span><br><span class="line">DEBUG (void*)segment+offset=0x7fb229405b00</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç®—å‡ºæ¥å°±ä¸ä¸€æ ·äº†</p><p>b530-5a30 = 0x5b00 = 23296 = 208 * 112<br>è€Œ112æ­£å¥½æ˜¯struct segmentçš„å¤§å°ï¼Œæ‰€ä»¥ä¸è½¬æ¢ç›´æ¥åŠ ï¼Œå•ä½æ˜¯struct size</p><p>5b00-5a30 = 0xd0 = 208<br>è¿™æ ·å°±æ˜¯å¯¹çš„ï¼Œæ‰€ä»¥åº”è¯¥å…ˆè½¬æ¢æŒ‡é’ˆç±»å‹</p><p>é‚£ä¹ˆå°è¯•1åŠ äº†(void*)åº”è¯¥æ–¹å‘æ˜¯å¯¹çš„</p><h2 id="controlä¿®æ”¹é”™è¯¯"><a href="#controlä¿®æ”¹é”™è¯¯" class="headerlink" title="controlä¿®æ”¹é”™è¯¯"></a>controlä¿®æ”¹é”™è¯¯</h2><p>æ¥ä¸Šä¸€ä¸ªbugï¼Œæ”¹å®Œä¹‹åï¼Œå‘ç°set control ownerå‡ºç°é—®é¢˜ï¼Œæ²¡æœ‰setæˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[owner=0 v=0 w=0 s=0]</span><br></pre></td></tr></table></figure><p>å†™å†…å­˜æˆåŠŸäº†ï¼Œåœ¨å‡½æ•°å†…éƒ¨æ‰“å°controlä¹Ÿæ˜¯å¯¹çš„ï¼Œä½†æ˜¯ç»“æŸä¹‹åæ•´ä½“print regionæ—¶ï¼Œcontrolæ˜¯ç©ºçš„</p><p>è§£å†³ï¼š<br>æ‰“å°å‘ç°ä¸¤æ¬¡ç”¨controlæ—¶åœ°å€ä¸ä¸€æ ·ã€‚æ˜¯åé¢ç®—controlèµ·å§‹åœ°å€æ²¡æœ‰æ”¹è¿‡æ¥ï¼Œä»æ˜¯ç›´æ¥ç®—çš„ï¼Œæ²¡æœ‰ç”¨å®šä¹‰çš„å®</p><p>æ”¹è¿‡æ¥ä¹‹åé¡ºä¾¿æ£€æŸ¥äº†ä¸€éï¼Œæ‰€æœ‰è®¡ç®—controlåœ°å€çš„ä½ç½®ï¼Œéƒ½æ˜¯ç”¨å®</p><h2 id="batché—´reset-controlåsegmentation-fault"><a href="#batché—´reset-controlåsegmentation-fault" class="headerlink" title="batché—´reset controlåsegmentation fault"></a>batché—´reset controlåsegmentation fault</h2><p>ç›®å‰æœ¬åœ°æµ‹è¯•ä¸€è½®ä¸­çš„transactionæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯tm_end()ã€è°ƒç”¨batcher_cleanup()ä¹‹åï¼Œæ‰“å°regionå‡ºé”™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">--------segment1--------</span><br><span class="line">[0] 00000000 | 11111111 [owner=0 v=1 w=0 s=0]</span><br><span class="line">[1] 00000000 | 11111111 [owner=0 v=1 w=0 s=0]</span><br><span class="line">[2] 00000000 | 22222222 [owner=0 v=1 w=0 s=0]</span><br><span class="line">[3] 00000000 | 22222222 [owner=0 v=1 w=0 s=0]</span><br><span class="line">--------segment0--------</span><br><span class="line">zsh: segmentation fault  ./tm.o</span><br></pre></td></tr></table></figure><p>åº”è¯¥æ˜¯segment2ï¼Œè€Œä¸æ˜¯0</p><h3 id="å°è¯•1-1"><a href="#å°è¯•1-1" class="headerlink" title="å°è¯•1"></a>å°è¯•1</h3><p>åœ¨batch_cleanup()ä¸­æ‰“å°äº†ä¸€ä¸‹segment id</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while(segment)&#123;</span><br><span class="line">        clean_up_segment(segment);</span><br><span class="line">        segment = segment-&gt;next;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å‘ç°ç¬¬äºŒæ¬¡æ˜¯0<br>å¯èƒ½æ˜¯segmentæŒ‡é’ˆçš„é—®é¢˜<br>ä½†æ˜¯print_region()é‡Œé¢ä¹Ÿæœ‰è¿™ä¸ªå¾ªç¯ï¼Œæ²¡æœ‰é—®é¢˜ï¼Œé‚£è¾¹æ˜¯è¿™æ ·å†™çš„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while(segment != NULL)&#123;</span><br><span class="line">        print_segment(segment);</span><br><span class="line">        segment = segment-&gt;next;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æ€»ä¸èƒ½æ˜¯!=NULLçš„é—®é¢˜å§<br>è¯•äº†ä¸€ä¸‹ï¼Œæœç„¶ä¸æ˜¯</p><h3 id="å°è¯•2"><a href="#å°è¯•2" class="headerlink" title="å°è¯•2"></a>å°è¯•2</h3><p>åœ¨batcher_cleanup()çš„å¾ªç¯é‡ŒåŠ äº†å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå¥½äº†ä¸€æ¬¡ï¼Œå†æµ‹åˆä¸è¡Œäº†</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">segment = (struct segment*)(segment-&gt;next);</span><br></pre></td></tr></table></figure><h3 id="å°è¯•3ï¼ˆå…³äºå†…å­˜åˆ†é…ï¼‰"><a href="#å°è¯•3ï¼ˆå…³äºå†…å­˜åˆ†é…ï¼‰" class="headerlink" title="å°è¯•3ï¼ˆå…³äºå†…å­˜åˆ†é…ï¼‰"></a>å°è¯•3ï¼ˆå…³äºå†…å­˜åˆ†é…ï¼‰</h3><p>æ‰“å°regionå’Œsegmentçš„åœ°å€éƒ½æ˜¯å¯¹çš„ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¯»å‡ºæ¥ä¸œè¥¿å°±ä¸å¯¹å‘¢ï¼Ÿ</p><p>ä»”ç»†çœ‹äº†ä¸‹ä¸¤å—segmentçš„åœ°å€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">--------segment1-------- addr=0x7f9bc9c05a30</span><br><span class="line">[0] 00000000 | 11111111 [owner=1 v=0 w=1 s=1]</span><br><span class="line">[1] 00000000 | 11111111 [owner=1 v=0 w=1 s=1]</span><br><span class="line">[2] 00000000 | 22222222 [owner=1 v=0 w=1 s=1]</span><br><span class="line">[3] 00000000 | 22222222 [owner=1 v=0 w=1 s=1]</span><br><span class="line">--------segment2-------- addr=0x7f9bc9c05b30</span><br></pre></td></tr></table></figure><p>a30å’Œb30è¿™æ‰éš”äº†256ï¼Œè‚¯å®šä¼šæ’å§ï¼éš¾é“æ˜¯ä¸€å¼€å§‹åˆ†é…å°±æœ‰é—®é¢˜ï¼Ÿ</p><p>åˆå§‹åŒ–æ—¶çš„ä»£ç æ˜¯</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">segment</span>* <span class="title">segment</span>;</span></span><br><span class="line">    <span class="keyword">size_t</span> total_size = <span class="keyword">sizeof</span>(struct segment) + size*<span class="number">3</span> + size/align*<span class="keyword">sizeof</span>(<span class="keyword">atomic_uint_least64_t</span>);</span><br><span class="line">    <span class="keyword">if</span> (unlikely(posix_memalign((<span class="keyword">void</span>**)&amp;segment, align, total_size) != <span class="number">0</span>)) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;create_segment failed. cannot align memory.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>çœ‹äº†ä¸‹referenceä»£ç ï¼Œå…ˆmallocçš„regionï¼Œåé¢æ‰posix_memalignçš„segment</p><p>æ”¹æˆ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">size_t</span> total_size = <span class="keyword">sizeof</span>(struct segment) + size*<span class="number">3</span> + size/align*<span class="keyword">sizeof</span>(<span class="keyword">atomic_uint_least64_t</span>);</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">segment</span>* <span class="title">segment</span> =</span> (struct segment*) <span class="built_in">malloc</span>(total_size);</span><br><span class="line">    <span class="keyword">if</span> (unlikely(posix_memalign((<span class="keyword">void</span>**)&amp;segment, align, total_size) != <span class="number">0</span>)) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;create_segment failed. cannot align memory.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p> æˆåŠŸï¼</p><p> ç°åœ¨çš„åœ°å€æ˜¯<br> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">--------segment1-------- addr=0x7fde98405b20</span><br><span class="line">[0] 00000000 | 11111111 [owner=0 v=1 w=0 s=0]</span><br><span class="line">[1] 00000000 | 11111111 [owner=0 v=1 w=0 s=0]</span><br><span class="line">[2] 00000000 | 22222222 [owner=0 v=1 w=0 s=0]</span><br><span class="line">[3] 00000000 | 22222222 [owner=0 v=1 w=0 s=0]</span><br><span class="line">--------segment2-------- addr=0x7fde98405d10</span><br><span class="line">[0] 00000000 | 00000000 [owner=0 v=0 w=0 s=0]</span><br><span class="line">[1] 00000000 | 00000000 [owner=0 v=0 w=0 s=0]</span><br><span class="line">[2] 00000000 | 00000000 [owner=0 v=0 w=0 s=0]</span><br><span class="line">[3] 00000000 | 00000000 [owner=0 v=0 w=0 s=0]</span><br></pre></td></tr></table></figure><br>d10-b20 = 0x1f0 = 496</p><h2 id="é˜¶æ®µä¸€æµ‹è¯•"><a href="#é˜¶æ®µä¸€æµ‹è¯•" class="headerlink" title="é˜¶æ®µä¸€æµ‹è¯•"></a>é˜¶æ®µä¸€æµ‹è¯•</h2><p>ä¸¢è¿›è™šæ‹Ÿæœºè·‘grading<br><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-12-06 PM11.54.31.jpg"                      width=600                ><br>ç”¨æ—¶å¤ªä¹…ï¼Œæ­£å¸¸ã€‚ä½†æ˜¯æ²¡æœ‰segmentation faultäº†ï¼Œåº”è¯¥read writeæ“ä½œä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜äº†ï¼Œç¬¬ä¸€æ­¥å®Œæˆï¼è€¶ï¼</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;é˜¶æ®µä¸€&quot;&gt;&lt;a href=&quot;#é˜¶æ®µä¸€&quot; class=&quot;headerlink&quot; title=&quot;é˜¶æ®µä¸€&quot;&gt;&lt;/a&gt;é˜¶æ®µä¸€&lt;/h1&gt;&lt;p&gt;å†™å®Œreadã€writeç­‰åŸºç¡€æ“ä½œï¼Œå…ˆåŠ äº†ä¸ªå…¨å±€é”ï¼Œæ”¾åˆ°è™šæ‹Ÿæœºé‡Œæµ‹ä¸€ä¸‹é€»è¾‘ã€‚&lt;/p&gt;
&lt;h2 id=&quot;atomic-loadæ—¶seg
      
    
    </summary>
    
    
      <category term="Debug" scheme="https://coconutnutx.github.io/categories/Debug/"/>
    
    
      <category term="concurrent_algorithm" scheme="https://coconutnutx.github.io/tags/concurrent-algorithm/"/>
    
  </entry>
  
  <entry>
    <title>DA project 2 validation tool</title>
    <link href="https://coconutnutx.github.io/2021/11/30/validate/"/>
    <id>https://coconutnutx.github.io/2021/11/30/validate/</id>
    <published>2021-11-30T08:40:52.000Z</published>
    <updated>2021-11-30T08:40:52.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ºäº†æµ‹è¯•submission2(Localized Causal Broadcast)çš„è¾“å‡ºå†™äº†ä¸ªç®€é™‹å·¥å…·ï¼Œä»…<strong>æœ‰é™æƒ…å†µ</strong>ä¸‹<strong>æµ‹è¯•</strong>ç”¨<br>ä»…ï¼ä¾›ï¼å‚ï¼è€ƒï¼ä¸ï¼ä¿ï¼è¯ï¼å¯¹ï¼</p><h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><p>å¦‚ï¼Œprocess 1ä¾èµ–2ã€3ï¼Œå’Œ4ã€5æ²¡å…³ç³»ï¼Œå…ˆæ‰¾å‡ºæ‰€æœ‰processè¾“å‡ºä¸­å…³äº1ã€2ã€3çš„æ¶ˆæ¯ï¼Œç„¶åç»Ÿè®¡1 broadcastæ¯æ¡æ¶ˆæ¯æ—¶çš„vector clockï¼Œä»¥åŠå…¶å®ƒprocess deliveræ¯æ¡æ¶ˆæ¯æ—¶çš„vector clockï¼Œåè€…çš„&gt;=å‰è€…ã€‚1çš„è¾“å‡ºå¯ä»¥æ¯”å…¶å®ƒå¤šï¼Œæ­¤æ—¶å¤šçš„ä¸è€ƒè™‘ï¼Œåªæ¯”è¾ƒå‰é¢çš„éƒ¨åˆ†ã€‚</p><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p>åŸºæœ¬å’Œç»™çš„validate_fifo.pyå·®ä¸å¤š<br>æŠŠä»£ç ã€configã€outputæ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹å†…ï¼ˆå³stress.pyçš„æ‰€æœ‰è¾“å‡ºï¼Œæœ‰å¤šä½™çš„æ²¡å…³ç³»ï¼‰<br>å¸¦å‚æ•°â€“proc_numè¿è¡Œ</p><h2 id="æµç¨‹ç¤ºä¾‹"><a href="#æµç¨‹ç¤ºä¾‹" class="headerlink" title="æµç¨‹ç¤ºä¾‹"></a>æµç¨‹ç¤ºä¾‹</h2><ol><li>cdåˆ°tools</li><li>æŠŠvalidate_lcausal.pyæ”¾åˆ°toolsä¸­</li><li>run stress<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python stress.py -r ../template_java/run.sh -t lcausal -l output -p 4 -m 100</span><br><span class="line"></span><br><span class="line">// VM</span><br><span class="line">python3 stress.py -r ../template_java/run.sh -t lcausal -l output -p 4 -m 100</span><br></pre></td></tr></table></figure><img src="/images/2021/screencapture2021-11-30 AM9.51.22.jpg" width='400px'></li><li>run validate<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python validate_lcausal.py --proc_num 4</span><br><span class="line"></span><br><span class="line">// VM</span><br><span class="line">python3 validate_lcausal.py --proc_num 4</span><br></pre></td></tr></table></figure><img src="/images/2021/screencapture2021-12-01 PM3.03.46.jpg" width='600px'></li></ol><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">config_path = <span class="string">&#x27;./output/config&#x27;</span></span><br><span class="line">output_path = <span class="string">&#x27;./output/proc0&#x27;</span>   <span class="comment"># append id.output later, id&lt;=9</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_config</span>():</span></span><br><span class="line">    f = <span class="built_in">open</span>(config_path,<span class="string">&quot;r&quot;</span>)</span><br><span class="line">    data = f.readlines()</span><br><span class="line">    m = <span class="number">0</span></span><br><span class="line">    <span class="built_in">dict</span> = &#123;&#125;</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> data:</span><br><span class="line">        splited = line.split(<span class="string">&quot; &quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> count == <span class="number">0</span>:</span><br><span class="line">            m = <span class="built_in">int</span>(splited[<span class="number">0</span>]) <span class="comment"># how many messages each process should broadcast</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">        sender = <span class="built_in">int</span>(splited[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(splited)):</span><br><span class="line">            <span class="built_in">dict</span>.setdefault(sender,[]).append(<span class="built_in">int</span>(splited[i])) <span class="comment"># dependency (including sender itself)</span></span><br><span class="line">        count+=<span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dict</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># find all &#x27;d sender seq&#x27; in output_id, where sender is in depent set</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getDependentList</span>(<span class="params"><span class="built_in">id</span>, dset</span>):</span></span><br><span class="line">    cur_output_path = output_path+<span class="built_in">str</span>(<span class="built_in">id</span>)+<span class="string">&#x27;.output&#x27;</span></span><br><span class="line">    f = <span class="built_in">open</span>(cur_output_path,<span class="string">&quot;r&quot;</span>)</span><br><span class="line">    data = f.readlines()</span><br><span class="line">    </span><br><span class="line">    sequence = []</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> data:</span><br><span class="line">        splited = line.split(<span class="string">&quot; &quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> splited[<span class="number">0</span>] == <span class="string">&quot;d&quot;</span>: <span class="comment"># only consider diliver</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">int</span>(splited[<span class="number">1</span>]) <span class="keyword">in</span> dset: <span class="comment"># only consider sender in depent set</span></span><br><span class="line">                sequence.append(line)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">str</span>(<span class="built_in">id</span>),<span class="string">&#x27;#msg:&#x27;</span>,<span class="built_in">len</span>(sequence))</span><br><span class="line">    <span class="keyword">return</span> sequence</span><br><span class="line"></span><br><span class="line"><span class="comment"># find all &#x27;b seq&#x27; and relevent delivered message in output_id, where sender is in depent set</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getDependentListOfCreator</span>(<span class="params"><span class="built_in">id</span>, dset</span>):</span></span><br><span class="line">    cur_output_path = output_path+<span class="built_in">str</span>(<span class="built_in">id</span>)+<span class="string">&#x27;.output&#x27;</span></span><br><span class="line">    f = <span class="built_in">open</span>(cur_output_path,<span class="string">&quot;r&quot;</span>)</span><br><span class="line">    data = f.readlines()</span><br><span class="line">    </span><br><span class="line">    sequence = []</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> data:</span><br><span class="line">        splited = line.split(<span class="string">&quot; &quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> splited[<span class="number">0</span>] == <span class="string">&quot;b&quot;</span>:</span><br><span class="line">            sequence.append(line)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">int</span>(splited[<span class="number">1</span>]) <span class="keyword">in</span> dset:</span><br><span class="line">                sequence.append(line)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">str</span>(<span class="built_in">id</span>),<span class="string">&#x27;#msg:&#x27;</span>,<span class="built_in">len</span>(sequence))</span><br><span class="line">    <span class="keyword">return</span> sequence</span><br><span class="line">    </span><br><span class="line"><span class="comment"># get vector clock associated with each message created by id from sequence</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getVectorClock</span>(<span class="params">sequence, <span class="built_in">id</span>, proc_num</span>):</span></span><br><span class="line">    clock = []</span><br><span class="line">    msg_clock_list = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(proc_num+<span class="number">1</span>):</span><br><span class="line">        clock.append(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> msg <span class="keyword">in</span> sequence:</span><br><span class="line">        splited = msg.split(<span class="string">&quot; &quot;</span>)</span><br><span class="line">        sender = <span class="built_in">int</span>(splited[<span class="number">1</span>])</span><br><span class="line">        clock[sender]+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> sender==<span class="built_in">id</span>:</span><br><span class="line">            msg_clock_list.append(clock.copy())</span><br><span class="line">    <span class="keyword">return</span> msg_clock_list</span><br><span class="line"></span><br><span class="line"><span class="comment"># get vector clock associated with each message broadcasted by id from sequence</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getVectorClockOfCreator</span>(<span class="params">sequence, <span class="built_in">id</span>, proc_num</span>):</span></span><br><span class="line">    clock = []</span><br><span class="line">    msg_clock_list = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(proc_num+<span class="number">1</span>):</span><br><span class="line">        clock.append(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> msg <span class="keyword">in</span> sequence:</span><br><span class="line">        splited = msg.split(<span class="string">&quot; &quot;</span>)</span><br><span class="line">        sender = <span class="built_in">int</span>(splited[<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">if</span> splited[<span class="number">0</span>]==<span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">            clock[sender]+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            msg_clock_list.append(clock.copy())</span><br><span class="line">    <span class="keyword">return</span> msg_clock_list</span><br><span class="line">    </span><br><span class="line"><span class="comment"># check if dependency of id is satisfied in all other process</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">checkProcessId</span>(<span class="params"><span class="built_in">id</span>, dset</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;checing process&#x27;</span>, <span class="built_in">str</span>(<span class="built_in">id</span>), <span class="string">&#x27;,depend on&#x27;</span>, dset)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># sequence of currrent process</span></span><br><span class="line">    ref_sequence = getDependentListOfCreator(<span class="built_in">id</span>, dset)</span><br><span class="line">    ref_clock = getVectorClockOfCreator(ref_sequence, <span class="built_in">id</span>, proc_num)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">id</span>,<span class="string">&#x27;#clock:&#x27;</span>,<span class="built_in">len</span>(ref_clock))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(proc_num):</span><br><span class="line">        cur_id = i+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> cur_id != <span class="built_in">id</span>:</span><br><span class="line">            <span class="comment"># sequence of other process</span></span><br><span class="line">            sequence = getDependentList(cur_id, dset)</span><br><span class="line">            <span class="comment"># get vector clock</span></span><br><span class="line">            clock = getVectorClock(sequence, <span class="built_in">id</span>, proc_num)</span><br><span class="line">            <span class="built_in">print</span>(cur_id,<span class="string">&#x27;#clock:&#x27;</span>,<span class="built_in">len</span>(clock))</span><br><span class="line">            <span class="comment"># number should be less of equal</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(clock)&gt;<span class="built_in">len</span>(ref_clock):</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;Number exceeds!&#x27;</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="comment"># output should be the same with ref_sequence</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(clock)):</span><br><span class="line">                <span class="keyword">if</span> ref_clock[i] &gt; clock[i]:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&#x27;Clock not match!&#x27;</span>)</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&#x27;ref_clock:&#x27;</span>,ref_clock[i])</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&#x27;clock    :&#x27;</span>,clock[i])</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># check output of all processes</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">checkProcess</span>(<span class="params">proc_num</span>):</span></span><br><span class="line">    depend = read_config()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;dependency:&#x27;</span>,depend,<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(proc_num):</span><br><span class="line">        <span class="built_in">id</span> = i+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> checkProcessId(<span class="built_in">id</span>, depend[<span class="built_in">id</span>])==<span class="literal">False</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;validate process&#x27;</span>,<span class="built_in">str</span>(<span class="built_in">id</span>),<span class="string">&#x27;OK\n&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    parser = argparse.ArgumentParser()</span><br><span class="line"></span><br><span class="line">    parser.add_argument(</span><br><span class="line">        <span class="string">&quot;--proc_num&quot;</span>,</span><br><span class="line">        required=<span class="literal">True</span>,</span><br><span class="line">        dest=<span class="string">&quot;proc_num&quot;</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Total number of processes&quot;</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    results = parser.parse_args()</span><br><span class="line">    </span><br><span class="line">    proc_num = <span class="built_in">int</span>(results.proc_num)</span><br><span class="line">    <span class="keyword">if</span> checkProcess(proc_num):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Validation OK&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Validation failed!&quot;</span>)</span><br></pre></td></tr></table></figure><h1 id="å…³äºdependency"><a href="#å…³äºdependency" class="headerlink" title="å…³äºdependency"></a>å…³äºdependency</h1><blockquote><p>We say that a process <code>x</code> is affected by a process <code>z</code> if all the messages which process <code>z</code> broadcasts and which process <code>x</code> delivers become dependencies for all future messages broadcast by process <code>x</code>.</p></blockquote><p>ä¸ªäººç†è§£æ˜¯ï¼Œå¦‚æœ</p><ul><li>p1 b 1</li><li>p2 d 1 1</li><li>p1 d 2 1</li><li>p1 d 3 1</li><li>p1 b 2<br>æ­¤æ—¶p1çš„dependencyæ˜¯[1 1 1]ï¼Œp2åœ¨d 1 2æ—¶éœ€è¦æœ‰è¿™äº›dependency<br>åŠ å…¥broadcastæˆ–deliveræ¯æ¡æ¶ˆæ¯æ—¶å¯¹åº”çš„clock</li><li>p1 b 1 [0 0 0]</li><li>p2 d 1 1 [0 0 0]</li><li>p1 d 2 1</li><li>p1 d 3 1</li><li>p1 b 2 [1 1 1]</li><li>p2 d 3 1</li><li>p2 d 2 1</li><li>p2 d 1 2 [1 1 1]<br>ç»Ÿè®¡æ—¶ï¼Œå¯¹referenceéœ€è¦ç»Ÿè®¡broadcastæ—¶çš„clockï¼Œè€Œå…¶å®ƒéœ€ç»Ÿè®¡deliveræ—¶çš„clock</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä¸ºäº†æµ‹è¯•submission2(Localized Causal Broadcast)çš„è¾“å‡ºå†™äº†ä¸ªç®€é™‹å·¥å…·ï¼Œä»…&lt;strong&gt;æœ‰é™æƒ…å†µ&lt;/strong&gt;ä¸‹&lt;strong&gt;æµ‹è¯•&lt;/strong&gt;ç”¨&lt;br&gt;ä»…ï¼ä¾›ï¼å‚ï¼è€ƒï¼ä¸ï¼ä¿ï¼è¯ï¼å¯¹ï¼&lt;/p&gt;
&lt;h1 id=&quot;æ€è·¯&quot;&gt;&lt;a 
      
    
    </summary>
    
    
      <category term="Note" scheme="https://coconutnutx.github.io/categories/Note/"/>
    
    
      <category term="distributed_algorithm" scheme="https://coconutnutx.github.io/tags/distributed-algorithm/"/>
    
  </entry>
  
  <entry>
    <title>CA project æ€è·¯ç¬”è®°</title>
    <link href="https://coconutnutx.github.io/2021/11/28/ca-project/"/>
    <id>https://coconutnutx.github.io/2021/11/28/ca-project/</id>
    <published>2021-11-28T13:33:12.000Z</published>
    <updated>2021-11-28T13:33:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>çœ‹Project descriptioné‡Œç»™çš„Dual-versioned transactional memoryçš„ä¸€äº›è®°å½•</p><h1 id="å…³äºaccess-set"><a href="#å…³äºaccess-set" class="headerlink" title="å…³äºaccess set"></a>å…³äºaccess set</h1><h2 id="æƒ…å†µåˆ†æ"><a href="#æƒ…å†µåˆ†æ" class="headerlink" title="æƒ…å†µåˆ†æ"></a>æƒ…å†µåˆ†æ</h2><p>å‡è®¾å½“å‰Aæ˜¯readable copyï¼ŒBæ˜¯writable copyï¼ŒæŸä¸€ä¸ªä½ç½®å¯èƒ½å‡ºç°çš„ä¸€äº›æƒ…å†µï¼š</p><ol><li>å°æ˜è¯»ï¼ŒæˆåŠŸï¼ŒåŠ å…¥set<ol><li>å¼ ä¸‰è¯»ï¼ŒæˆåŠŸï¼ŒåŠ å…¥set<ol><li>å°æ˜å†™ï¼Œå‘ç°å¼ ä¸‰ä¹Ÿåœ¨setï¼Œå¤±è´¥ <font color="red">åªè¦seté‡Œæœ‰åˆ«äººï¼Œå°±ä¸èƒ½å†™äº†</font></li></ol></li><li>å¼ ä¸‰å†™ï¼Œå‘ç°å°æ˜å·²ç»åœ¨setï¼Œå¤±è´¥ <font color="red">åªè¦seté‡Œæœ‰åˆ«äººï¼Œå°±ä¸èƒ½å†™äº†</font></li><li>å°æ˜å†™ï¼Œseté‡Œåªæœ‰è‡ªå·±ï¼ŒæˆåŠŸ<ol><li>å°æ˜è¯»ï¼Œå‘ç°å·²ç»è¢«å†™è¿‡äº†ï¼Œè‡ªå·±åœ¨seté‡Œï¼ŒæˆåŠŸï¼Œè¯»B</li><li>å¼ ä¸‰è¯»ï¼Œå‘ç°å·²ç»è¢«å†™è¿‡äº†ï¼Œè‡ªå·±ä¸åœ¨seté‡Œï¼Œå¤±è´¥</li></ol></li></ol></li></ol><h2 id="ä»€ä¹ˆæ—¶å€™å¯ä»¥åŠ å…¥ï¼Ÿ"><a href="#ä»€ä¹ˆæ—¶å€™å¯ä»¥åŠ å…¥ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ—¶å€™å¯ä»¥åŠ å…¥ï¼Ÿ"></a>ä»€ä¹ˆæ—¶å€™å¯ä»¥åŠ å…¥ï¼Ÿ</h2><ol><li>è¯»æˆåŠŸçš„æ—¶å€™<br> ä»€ä¹ˆæ—¶å€™å¯ä»¥è¯»ï¼Ÿ<ol><li>æ²¡äººå†™è¿‡ï¼Œéšä¾¿è¯»ï¼Œè¯»A</li><li>è‡ªå·±å†™è¿‡ï¼Œå¯ä»¥è¯»ï¼Œè¯»B <font color="red">å¦‚æœæ˜¯åˆ«äººå†™çš„ï¼Œè‡ªå·±ä¸å¯èƒ½åœ¨seté‡Œï¼Œä¸èƒ½è¯»</font></li></ol></li><li>å†™æˆåŠŸçš„æ—¶å€™<br> ä»€ä¹ˆæ—¶å€™å¯ä»¥å†™ï¼Ÿ<ol><li>æ²¡äººå†™è¿‡ï¼Œä¸”seté‡Œæ²¡åˆ«äºº <font color="red">åªå¯èƒ½æœ‰ä¸€ä¸ªäººæ˜¯é€šè¿‡å†™åŠ å…¥setçš„</font></li><li>è‡ªå·±å†™è¿‡</li></ol></li></ol><p>ä»è€Œä¿è¯ï¼š</p><ol><li>åªå¯èƒ½æœ‰ä¸€ä¸ªäººå†™</li><li>å†™è¿‡çš„åœ°æ–¹åªæœ‰å†™çš„äººèƒ½è¯»</li><li>æ²¡å†™è¿‡çš„åœ°æ–¹éƒ½å¯ä»¥è¯»</li></ol><h2 id="setå¯ä»¥åªè®°ç¬¬ä¸€ä¸ª"><a href="#setå¯ä»¥åªè®°ç¬¬ä¸€ä¸ª" class="headerlink" title="setå¯ä»¥åªè®°ç¬¬ä¸€ä¸ª"></a>setå¯ä»¥åªè®°ç¬¬ä¸€ä¸ª</h2><p>seté‡Œå¯ä»¥åªè®°å½•ç¬¬ä¸€ä¸ªåŠ å…¥setçš„äººï¼Œå› ä¸ºï¼š</p><ol><li>å¦‚æœç¬¬ä¸€ä¸ªåŠ å…¥setæ˜¯é€šè¿‡å†™åŠ å…¥çš„<ol><li>åé¢å¯ä»¥é€šè¿‡setåˆ¤æ–­è‡ªå·±å†™è¿‡ï¼Œå¯ä»¥ç»§ç»­è¯»å†™</li><li>å…¶ä»–äººå‘ç°å†™è¿‡ï¼Œä¸”ä¸æ˜¯è‡ªå·±å†™çš„ï¼Œè¯»å†™éƒ½ä¸å¯ä»¥</li></ol></li><li>å¦‚æœç¬¬ä¸€ä¸ªåŠ å…¥setæ˜¯é€šè¿‡è¯»åŠ å…¥çš„ï¼Œ<ol><li>åˆ«äººä¸èƒ½å†™ï¼Œå› ä¸ºè™½ç„¶æ²¡äººå†™è¿‡ï¼Œä½†seté‡Œå·²ç»æœ‰äººäº†</li><li>åˆ«äººå¯ä»¥è¯»</li><li>è‡ªå·±å¯ä»¥å†™ï¼Œè‡ªå·±å†™è¿‡ä¹‹åï¼Œåˆ«äººä¹Ÿä¸å¯ä»¥è¯»äº†<br>è¿™ä¸ªç¬¬ä¸€ä¸ªåŠ å…¥setçš„ï¼Œå¯ä»¥è§†ä¸ºæ‰€æœ‰è€…</li></ol></li></ol><p>ğŸ§project descriptioné‡Œé¢è¯´ä¸è¦implement an actual setï¼Œé‚£ä¹ˆæŒ‰è¿™ä¸ªé€»è¾‘ï¼Œåªå­˜ä¸€ä¸ªå€¼åº”è¯¥å°±è¶³å¤Ÿäº†</p><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªä½ç½®æ˜¯å¦å¯ä»¥è¯»å†™æœ‰ä»¥ä¸‹å‡ ç§çŠ¶æ€ï¼š<br><img src="/images/2021/screencapture2021-11-28 PM2.36.51.jpg"></p><p>ä»¥ä¸Šéƒ½æ˜¯é’ˆå¯¹è¯»å†™äº‹åŠ¡ï¼Œåªè¯»äº‹åŠ¡å¯ä»¥ç›´æ¥è¯»ï¼Œä¸å½±å“</p><h2 id="å…¶å®ƒé—®é¢˜"><a href="#å…¶å®ƒé—®é¢˜" class="headerlink" title="å…¶å®ƒé—®é¢˜"></a>å…¶å®ƒé—®é¢˜</h2><p>Qï¼šå¯èƒ½æœ‰å†™æˆåŠŸçš„ï¼Œä½†åç»­æ“ä½œå¤±è´¥ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ<br>Aï¼šè¿™æ ·çš„TXä¸ä¼šåˆ°commit()ï¼Œè€Œåªæœ‰åœ¨commit()ä¸­å¯ä»¥æ›´æ”¹valid copyï¼Œå› æ­¤ä¸‹ä¸€è½®ä¸­æœ‰æ•ˆçš„ä»æ˜¯æ—§çš„å€¼</p><h1 id="å…³äºbatcher"><a href="#å…³äºbatcher" class="headerlink" title="å…³äºbatcher"></a>å…³äºbatcher</h1><p>ä»€ä¹ˆæ—¶å€™è°ƒï¼Ÿ</p><pre><code>1. äº‹åŠ¡å¼€å§‹ï¼Œè°ƒenter() -&gt; å³åœ¨tm_begin()ä¸­2. æœ€åä¸€ä¸ªæ“ä½œç»“æŸæ—¶ï¼Œè°ƒleave() -&gt; å³åœ¨tm_end()ä¸­</code></pre><h2 id="æƒ…å†µåˆ†æ-1"><a href="#æƒ…å†µåˆ†æ-1" class="headerlink" title="æƒ…å†µåˆ†æ"></a>æƒ…å†µåˆ†æ</h2><ol><li>åˆå§‹æ—¶ï¼Œremaining=0</li><li>ç¬¬ä¸€ä¸ªäººenter()ï¼Œremainingå˜æˆ1</li><li>åé¢çš„äººenter()ï¼Œéƒ½è¢«æŒ‚åˆ°blocked</li><li>ç¬¬ä¸€ä¸ªäººleave()ï¼Œremainingå˜æˆ0</li><li>counter+1  <font color="red">ç›¸å½“äºè¿›å…¥ä¸‹ä¸€è½®</font><ul><li>remainingé‡è®¾ä¸ºblockedçš„é•¿åº¦</li><li>å«é†’æ‰€æœ‰blockedé‡Œçš„çº¿ç¨‹</li><li>æ¸…ç©ºblocked</li></ul></li><li>æ­¤æ—¶ä¸Šä¸€è½®ä¸­è¢«blockedçš„çº¿ç¨‹ï¼Œåœ¨è¿™ä¸€è½®ä¸­ä¸€èµ·å¼€å§‹å·¥ä½œã€‚å½“æœ‰æ–°çº¿ç¨‹è°ƒenter()ï¼Œåˆä¼šè¢«æŒ‚åˆ°blockedé‡Œï¼Œç­‰å¾…ä¸‹ä¸€è½®</li></ol><h2 id="é—ç•™é—®é¢˜"><a href="#é—ç•™é—®é¢˜" class="headerlink" title="é—ç•™é—®é¢˜"></a>é—ç•™é—®é¢˜</h2><p>Qï¼šä¸ºä»€ä¹ˆcommit()ä¸­äº¤æ¢valid copyè¦æ¨è¿Ÿåˆ°ä¸¤è½®äº¤æ›¿çš„é—´éš™è¿›è¡Œï¼Ÿ</p><p>Qï¼šget_epoch()ä»€ä¹ˆæ—¶å€™ç”¨åˆ°ï¼Ÿæ˜¯å¹²ä»€ä¹ˆç”¨çš„ï¼Ÿ</p><h1 id="å…³äºtx-t"><a href="#å…³äºtx-t" class="headerlink" title="å…³äºtx_t"></a>å…³äºtx_t</h1><p>ä¸€ä¸ªäº‹åŠ¡éœ€è¦è®°å½•çš„ä¸œè¥¿ï¼š</p><ul><li>boolean æ˜¯å¦æˆåŠŸ <font color="red">å¦‚æœå·²ç»å¤±è´¥äº†ï¼Œåé¢è¯»å†™çš„æ—¶å€™å¯ä»¥ç›´æ¥è¿”å›</font></li><li>boolean æ˜¯å¦åªè¯» <font color="red">è¯»çš„æ—¶å€™å¯ä»¥ç›´æ¥è¯»</font></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;çœ‹Project descriptioné‡Œç»™çš„Dual-versioned transactional memoryçš„ä¸€äº›è®°å½•&lt;/p&gt;
&lt;h1 id=&quot;å…³äºaccess-set&quot;&gt;&lt;a href=&quot;#å…³äºaccess-set&quot; class=&quot;headerlink&quot; titl
      
    
    </summary>
    
    
      <category term="Note" scheme="https://coconutnutx.github.io/categories/Note/"/>
    
    
      <category term="concurrent_algorithm" scheme="https://coconutnutx.github.io/tags/concurrent-algorithm/"/>
    
  </entry>
  
  <entry>
    <title>æ›´æ”¹ä¸»é¢˜è®°å½•</title>
    <link href="https://coconutnutx.github.io/2021/11/16/theme/"/>
    <id>https://coconutnutx.github.io/2021/11/16/theme/</id>
    <published>2021-11-16T11:01:22.000Z</published>
    <updated>2021-11-16T11:01:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰ä¸€ç›´ç”¨çš„<a class="link"   href="https://github.com/Shen-Yu/hexo-theme-ayer" >Ayer<i class="fas fa-external-link-alt"></i></a>ä¸»é¢˜ï¼Œçªç„¶å‘ç°æœç´¢ä¸èƒ½ç”¨ï¼Œdebugäº†ä¸€æ—©ä¸Šè§£å†³ä¸äº†ï¼Œå†³å®šå¹²è„†æ¢ä¸ªä¸»é¢˜</p><p>å°è¯•è¿‡ä¸‰ä¸ªä¸»é¢˜å<br><a class="link"   href="https://github.com/lh1me/hexo-theme-aomori" >Aomori<i class="fas fa-external-link-alt"></i></a><br><a class="link"   href="https://github.com/SukkaW/hexo-theme-suka" >suka<i class="fas fa-external-link-alt"></i></a><br><a class="link"   href="https://github.com/XPoet/hexo-theme-keep" >keep<i class="fas fa-external-link-alt"></i></a></p><p>å†³å®šç”¨keep<br>å¤ªä¼˜é›…äº†ï¼Œæœç´¢ä¹Ÿæ²¡æœ‰bugï¼Œå¦™</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä¹‹å‰ä¸€ç›´ç”¨çš„&lt;a class=&quot;link&quot;   href=&quot;https://github.com/Shen-Yu/hexo-theme-ayer&quot; &gt;Ayer&lt;i class=&quot;fas fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;ä¸»é¢˜ï¼Œçªç„¶å‘ç°æœç´¢ä¸èƒ½ç”¨ï¼Œd
      
    
    </summary>
    
    
      <category term="Memo" scheme="https://coconutnutx.github.io/categories/Memo/"/>
    
    
      <category term="tool" scheme="https://coconutnutx.github.io/tags/tool/"/>
    
  </entry>
  
  <entry>
    <title>sync example note2ï¼šmemory order</title>
    <link href="https://coconutnutx.github.io/2021/11/13/concurrent2/"/>
    <id>https://coconutnutx.github.io/2021/11/13/concurrent2/</id>
    <published>2021-11-13T09:26:37.000Z</published>
    <updated>2021-11-13T09:26:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>Producer consumer example</p><p>There might be conflict on buffer[], but consumed_until and produced_until prevent that (if used correctly).</p><p>So, only need to make sure consumed_until and produced_until accessed correctly under concurrency.</p><h1 id="Using-locks"><a href="#Using-locks" class="headerlink" title="Using locks"></a>Using locks</h1><p>In each round of produce()</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  lock_acquire(&amp;lock);</span><br><span class="line">  <span class="keyword">if</span> (consumed_until + BUFFER_SIZE &gt; r) <span class="keyword">break</span>;</span><br><span class="line">  lock_release(&amp;lock);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">produced[r] = ...</span><br><span class="line">buffer[r % BUFFER_SIZE] = produced[r];</span><br><span class="line">produced_until++;</span><br><span class="line">lock_release(&amp;lock);</span><br></pre></td></tr></table></figure><p>Two locks:</p><ol><li>check if can produce: conflict on consumed_until</li><li>conflict on produced_until</li></ol><p>In each round of consume()</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  lock_acquire(&amp;lock);</span><br><span class="line">  <span class="keyword">if</span> (produced_until &gt; r) <span class="keyword">break</span>;</span><br><span class="line">  lock_release(&amp;lock);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">consumed[r] = buffer[r % BUFFER_SIZE];</span><br><span class="line">consumed_until++;</span><br><span class="line">lock_release(&amp;lock);</span><br></pre></td></tr></table></figure><p>Two locks:</p><ol><li>check if can consume: conflict on produced_until</li><li>conflict on consumed_until</li></ol><h1 id="Using-atomic-vairables"><a href="#Using-atomic-vairables" class="headerlink" title="Using atomic vairables"></a>Using atomic vairables</h1><p>In produce, two locks can be modified:</p><ol><li><p>check if can produce: conflict on consumed_until</p><p>no ordering constraints -&gt; memory_order_relaxed</p></li><li><p>conflict on produced_until</p><p>store produced_until should happen after all operations -&gt; load-store + store-store = release</p></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="comment">// The memory order can be relaxed as we don&#x27;t read anything &quot;produced&quot; by the consumer.</span></span><br><span class="line">  <span class="keyword">int</span> local_cu = atomic_load_explicit(&amp;consumed_until, memory_order_relaxed);</span><br><span class="line">  <span class="keyword">if</span> (local_cu + BUFFER_SIZE &gt; r) <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">produced[r] = ...</span><br><span class="line">buffer[r % BUFFER_SIZE] = produced[r];</span><br><span class="line"><span class="comment">// We want to increment &quot;produced_until&quot; after the buffer has been written.</span></span><br><span class="line"><span class="comment">// By using memory_order_release, we prevent the STOREs on buffer from being</span></span><br><span class="line"><span class="comment">// reordered after the atomic operation.</span></span><br><span class="line">atomic_fetch_add_explicit(&amp;produced_until, <span class="number">1</span>, memory_order_release);</span><br></pre></td></tr></table></figure><p>In consume, two locks can be modified:</p><ol><li><p>check if can consume: conflict on produced_until</p><p>load produced_until should happen before all operations -&gt; load-load + load-store = acquire</p></li><li><p>conflict on consumed_until</p><p>store consumed_until should happen after all operations -&gt; load-store + store-store = release</p></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="comment">// We don&#x27;t want to access the buffer before checking the atomic variable.</span></span><br><span class="line">  <span class="comment">// The memory_order_acquire prevents this reordering.</span></span><br><span class="line">  <span class="keyword">int</span> local_pu = atomic_load_explicit(&amp;produced_until, memory_order_acquire);</span><br><span class="line">  <span class="keyword">if</span> (local_pu &gt; r) <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">consumed[r] = buffer[r % BUFFER_SIZE];</span><br><span class="line">atomic_fetch_add_explicit(&amp;consumed_until, <span class="number">1</span>, memory_order_release);</span><br></pre></td></tr></table></figure><h1 id="Memory-barriers"><a href="#Memory-barriers" class="headerlink" title="Memory barriers"></a>Memory barriers</h1><blockquote><p><a class="link"   href="https://en.cppreference.com/w/cpp/atomic/memory_order" >std::memory_order<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://www.modernescpp.com/index.php/fences-as-memory-barriers" >Fences are Memory Barriers<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://www.youtube.com/watch?v=qlkMbxUbKfw&ab_channel=CodeBlacksmith" >Memory Barriers - Learn Modern C++<i class="fas fa-external-link-alt"></i></a></p></blockquote><ul><li><p>memory_order_relaxed: no ordering constraints</p></li><li><p>memory_order_consume</p></li><li><p>memory_order_acquire: load-load + load-store</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-11-13 AM10.59.57.jpg"                                     ></li><li><p>memory_order_release: load-store + store-store</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-11-13 AM11.00.42.jpg"                                     ></li><li><p>memory_order_acq_rel</p></li><li><p>memory_order_seq_cst</p></li></ul><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-11-13 AM10.55.43.jpg"                                     ><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-11-13 AM10.57.03.jpg"                                     >]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Producer consumer example&lt;/p&gt;
&lt;p&gt;There might be conflict on buffer[], but consumed_until and produced_until prevent that (if used correct
      
    
    </summary>
    
    
      <category term="Note" scheme="https://coconutnutx.github.io/categories/Note/"/>
    
    
      <category term="concurrent_algorithm" scheme="https://coconutnutx.github.io/tags/concurrent-algorithm/"/>
    
  </entry>
  
  <entry>
    <title>sync example note1</title>
    <link href="https://coconutnutx.github.io/2021/11/13/concurrent/"/>
    <id>https://coconutnutx.github.io/2021/11/13/concurrent/</id>
    <published>2021-11-13T08:53:44.000Z</published>
    <updated>2021-11-13T08:53:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>Cync example for C concurrent programing</p><h1 id="Threads"><a href="#Threads" class="headerlink" title="Threads"></a>Threads</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RUNS (4096 * 256)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> THREADS 4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> counter = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">count</span><span class="params">(<span class="keyword">void</span>* null)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;New thread created\n&quot;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// do something</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// declare an array of 4 threads</span></span><br><span class="line">  <span class="keyword">pthread_t</span> handlers[THREADS];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">intptr_t</span> i = <span class="number">0</span>; i &lt; THREADS; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> res = pthread_create(&amp;handlers[i], <span class="literal">NULL</span>, count, <span class="literal">NULL</span>);</span><br><span class="line">    assert(!res);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; THREADS; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> res = pthread_join(handlers[i], <span class="literal">NULL</span>);</span><br><span class="line">    assert(!res);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (counter != RUNS * THREADS) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Didn&#x27;t count so well. :/, found %d\n&quot;</span>, counter);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Counted up to %d.\n&quot;</span>, counter);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Lock"><a href="#Lock" class="headerlink" title="Lock"></a>Lock</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;lock.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span>* <span class="title">count</span><span class="params">(<span class="keyword">void</span>* null)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> r = <span class="number">0</span>; r &lt; RUNS; r++) &#123;</span><br><span class="line">    lock_acquire(&amp;lock);</span><br><span class="line">    counter++;</span><br><span class="line">    lock_release(&amp;lock);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Better version: use lock_wait(&amp;lock) and lock_wake_up(&amp;lock) to prevent bucy wait, but rely on a notification.</p><h1 id="Atomic-variable"><a href="#Atomic-variable" class="headerlink" title="Atomic  variable"></a>Atomic  variable</h1><p>Atomic variables (~atomic registers) do not enforce atomic operation blocks.</p><p>Need to use atomic operation.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">atomic_int</span> counter = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span>* <span class="title">count</span><span class="params">(<span class="keyword">void</span>* null)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> r = <span class="number">0</span>; r &lt; RUNS; r++) &#123;</span><br><span class="line">    atomic_fetch_add(&amp;counter, <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Another example</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> expected = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (atomic_compare_exchange_strong(&amp;leader[r], &amp;expected, tid)) &#123;</span><br><span class="line">atomic_fetch_add(&amp;nb_leaders[r], <span class="number">1</span>); <span class="comment">// used to check correctness</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h1><p>å½“æœ‰include .hæ—¶ï¼ŒæŠ¥é”™</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clang: error: linker command failed with <span class="built_in">exit</span> code <span class="number">1</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨Terminal</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc election2.c lock.c -o ekection2.o</span><br><span class="line">./election2.o</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Cync example for C concurrent programing&lt;/p&gt;
&lt;h1 id=&quot;Threads&quot;&gt;&lt;a href=&quot;#Threads&quot; class=&quot;headerlink&quot; title=&quot;Threads&quot;&gt;&lt;/a&gt;Threads&lt;/h1&gt;&lt;figu
      
    
    </summary>
    
    
      <category term="Note" scheme="https://coconutnutx.github.io/categories/Note/"/>
    
    
      <category term="concurrent_algorithm" scheme="https://coconutnutx.github.io/tags/concurrent-algorithm/"/>
    
  </entry>
  
  <entry>
    <title>Summary on basic register reductions</title>
    <link href="https://coconutnutx.github.io/2021/10/31/register/"/>
    <id>https://coconutnutx.github.io/2021/10/31/register/</id>
    <published>2021-10-31T17:01:49.000Z</published>
    <updated>2021-10-31T17:01:49.000Z</updated>
    
    <content type="html"><![CDATA[<img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-10-31 PM5.58.54.jpg"                                     >]]></content>
    
    <summary type="html">
    
      
      
        &lt;img  
                     lazyload
                     src=&quot;/images/loading.svg&quot;
                     data-src=&quot;/images/2021/screencaptur
      
    
    </summary>
    
    
      <category term="Note" scheme="https://coconutnutx.github.io/categories/Note/"/>
    
    
      <category term="distributed_algorithm" scheme="https://coconutnutx.github.io/tags/distributed-algorithm/"/>
    
  </entry>
  
  <entry>
    <title>CountSketch Matrix</title>
    <link href="https://coconutnutx.github.io/2021/10/27/countsketch/"/>
    <id>https://coconutnutx.github.io/2021/10/27/countsketch/</id>
    <published>2021-10-27T20:58:59.000Z</published>
    <updated>2021-10-27T20:58:59.000Z</updated>
    
    <content type="html"><![CDATA[<p>Drew a simple example to help understanding what I learned in class.</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/2021-10-27-225725.png"                                     ><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/2021-10-27-225726.png"                                     >]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Drew a simple example to help understanding what I learned in class.&lt;/p&gt;
&lt;img  
                     lazyload
                     src=&quot;/
      
    
    </summary>
    
    
      <category term="Note" scheme="https://coconutnutx.github.io/categories/Note/"/>
    
    
      <category term="sublinear_algorithm" scheme="https://coconutnutx.github.io/tags/sublinear-algorithm/"/>
    
  </entry>
  
  <entry>
    <title>DA project0 test record</title>
    <link href="https://coconutnutx.github.io/2021/10/19/DA-project-test/"/>
    <id>https://coconutnutx.github.io/2021/10/19/DA-project-test/</id>
    <published>2021-10-19T16:28:01.000Z</published>
    <updated>2021-10-19T16:28:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>Project0è¦æ±‚å®ç°Perfect Linkï¼Œç»™äº†æµ‹è¯•ç”¨çš„tc.pyç”¨æ¥ä¿®æ”¹ç½‘ç»œæƒ…å†µï¼Œstress.pyæ¨¡æ‹Ÿå‘æ¶ˆæ¯ã€‚ï¼ˆDistributed Algorithms 2021-2022 Project Validation.pdfï¼‰</p><p>æƒ³æµ‹ä¸€ä¸‹è¯•è¯•ã€‚</p><p>æ³¨ï¼šä»¥ä¸‹å‡ ä¸ªæµ‹è¯•éƒ½æ²¡æœ‰æ”¹tc.pyçš„å‚æ•°ï¼Œå³â†“</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-10-19 PM6.43.30.jpg"                                     ><h1 id="Round-1"><a href="#Round-1" class="headerlink" title="Round 1"></a>Round 1</h1><p>å‚æ•°å¦‚å›¾ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">testConfig = &#123;</span><br><span class="line">        <span class="string">&#x27;concurrency&#x27;</span> : <span class="number">8</span>, <span class="comment"># How many threads are interferring with the running processes</span></span><br><span class="line">        <span class="string">&#x27;attempts&#x27;</span> : <span class="number">8</span>, <span class="comment"># How many interferring attempts each threads does</span></span><br><span class="line">        <span class="string">&#x27;attemptsDistribution&#x27;</span> : &#123; <span class="comment"># Probability with which an interferring thread will</span></span><br><span class="line">            <span class="string">&#x27;STOP&#x27;</span>: <span class="number">0.48</span>,          <span class="comment"># select an interferring action (make sure they add up to 1)</span></span><br><span class="line">            <span class="string">&#x27;CONT&#x27;</span>: <span class="number">0.48</span>,</span><br><span class="line">            <span class="string">&#x27;TERM&#x27;</span>:<span class="number">0.04</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 stress.py -r ../template_java/run.sh -t perfect -l output -p <span class="number">10</span> -m <span class="number">10</span></span><br></pre></td></tr></table></figure><p>testConfigåœ¨stress.pyæœ€åï¼Œè¿™é‡Œå…¨æ˜¯é»˜è®¤ï¼Œ10ä¸ªprocessï¼Œæ¯ä¸ªå‘10æ¡æ¶ˆæ¯ï¼ˆconfigä¸­åªæœ‰ä¸€è¡Œ 10 1ï¼‰</p><p>ç†è®ºä¸Šæ¥è¯´ï¼Œåº”è¯¥æ˜¯2-9å·éƒ½è¦ç»™1å·å‘10æ¡ï¼Œæ€»å…±90æ¡</p><p>ä½†æ˜¯å‡ºæ¥çš„æ•°æ®ä¸å®Œå…¨æ˜¯90</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-10-19 PM6.46.31.jpg"                                     ><p>ï¼ˆè¿™é‡Œç»Ÿè®¡è¾“å‡ºå†™äº†ä¸ªç®€å•å·¥å…·ï¼Œè§æœ€åï¼‰</p><p>æ ¹æ®åé¢æµ‹è¯•çš„ç»“æœæ¨æµ‹ï¼Œé—®é¢˜åœ¨testConfigè¿™é‡Œã€‚concurrencyå’Œattemptsæ•°å€¼éƒ½æ˜¯8ï¼Œä¹Ÿå°±æ˜¯æœ‰8ä¸ªæ£ä¹±çº¿ç¨‹å„å¹²é¢„8æ¬¡ã€‚STOPå’ŒCONTåªæ˜¯æš‚åœå’Œç»§ç»­ï¼Œä¸ä¼šå¹²æ‰°æœ€åçš„ç»“æœã€‚ä½†æ˜¯è¿™é‡Œè¿˜æœ‰0.04çš„æ¦‚ç‡ä¼šå‘TERMï¼Œç›´æ¥æŠŠæ­£åœ¨å¹²æ´»çš„processæ€äº†ã€‚æ‰€ä»¥æœ€åæœ‰çš„åªå‘äº†79ã€80</p><h1 id="Round-2"><a href="#Round-2" class="headerlink" title="Round 2"></a>Round 2</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;concurrency&#x27;</span> : <span class="number">16</span></span><br><span class="line"><span class="string">&#x27;attempts&#x27;</span> : <span class="number">16</span></span><br><span class="line"><span class="string">&#x27;attemptsDistribution&#x27;</span> : </span><br><span class="line">            <span class="string">&#x27;STOP&#x27;</span>: <span class="number">0.48</span>,</span><br><span class="line">            <span class="string">&#x27;CONT&#x27;</span>: <span class="number">0.48</span>,</span><br><span class="line">            <span class="string">&#x27;TERM&#x27;</span>:<span class="number">0.04</span></span><br><span class="line"></span><br><span class="line">-p <span class="number">20</span> -m <span class="number">20</span></span><br></pre></td></tr></table></figure><p>è¯•äº†å‡ æ¬¡è¿™ä¸ªå‚æ•°ï¼Œæƒ…å†µå·®ä¸å¤šã€‚åº”è¯¥æœ‰19*20=380æ¡ï¼Œä½†æ˜¯ç»“æœåˆ†åˆ«æ˜¯ï¼š267ã€299ã€360ã€319</p><h1 id="çªç„¶"><a href="#çªç„¶" class="headerlink" title="çªç„¶"></a>çªç„¶</h1><p>ç»å¦ä¸€ä½å½“å€¼çš„æ˜†è™«é¦†ç®¡ç†å‘˜æé†’ï¼Œæµ‹è¯•è¿›ç¨‹æ•°æ˜¯æœ‰ä¸Šé™çš„</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-10-19 PM6.08.42.jpg"                                     ><p>å¯¹ä¸èµ·æˆ‘çš„CPUğŸ™‡â€â™‚ï¸</p><p>ï¼ˆä½†æ˜¯è¿™é‡Œåˆ°åº•æ˜¯åœ¨è¯´9 100æ˜¯ä¸Šé™ï¼Œè¿˜æ˜¯ä¸¾ä¸ªä¾‹å­è¯´å¦‚æœ9 100ï¼Œè®©è·‘25åˆ†é’Ÿï¼Ÿï¼Ÿï¼Ÿï¼‰</p><h1 id="Round-3"><a href="#Round-3" class="headerlink" title="Round 3"></a>Round 3</h1><p>äºæ˜¯å°±æŠŠpå’Œmç›´æ¥è®¾æˆ9å’Œ100</p><p>æ„è¯†åˆ°TERMå¯èƒ½ä¼šå¯¹correctnessæœ‰å½±å“ï¼Œè¿™é‡ŒæŠŠTERMä¹Ÿè°ƒæˆäº†0</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;concurrency&#x27;</span> : <span class="number">8</span></span><br><span class="line"><span class="string">&#x27;attempts&#x27;</span> : <span class="number">8</span></span><br><span class="line"><span class="string">&#x27;attemptsDistribution&#x27;</span> : </span><br><span class="line">            <span class="string">&#x27;STOP&#x27;</span>: <span class="number">0.5</span>,</span><br><span class="line">            <span class="string">&#x27;CONT&#x27;</span>: <span class="number">0.5</span>,</span><br><span class="line">            <span class="string">&#x27;TERM&#x27;</span>:<span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">-p <span class="number">9</span> -m <span class="number">100</span></span><br></pre></td></tr></table></figure><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-10-19 PM7.06.12.jpg"                                     ><p>è¾“å‡ºæ²¡æ¯›ç—…</p><h1 id="Round-4"><a href="#Round-4" class="headerlink" title="Round 4"></a>Round 4</h1><p>ç„¶åæŠŠTERMæ”¹å›å»</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;concurrency&#x27;</span> : <span class="number">8</span></span><br><span class="line"><span class="string">&#x27;attempts&#x27;</span> : <span class="number">8</span></span><br><span class="line"><span class="string">&#x27;attemptsDistribution&#x27;</span> : </span><br><span class="line">            <span class="string">&#x27;STOP&#x27;</span>: <span class="number">0.48</span>,</span><br><span class="line">            <span class="string">&#x27;CONT&#x27;</span>: <span class="number">0.48</span>,</span><br><span class="line">            <span class="string">&#x27;TERM&#x27;</span>:<span class="number">0.04</span></span><br><span class="line"></span><br><span class="line">-p <span class="number">9</span> -m <span class="number">100</span></span><br></pre></td></tr></table></figure><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-10-19 PM7.07.10.jpg"                                     ><p>å·¦è¾¹æ˜¯è¿è¡Œä¸­éƒ¨åˆ†è¾“å‡º</p><p>å¯ä»¥å‘ç°æœ‰çš„processè¢«SIGTERMæ€æ‰äº†ï¼Œç¬¬ä¸€æ¬¡SIGTERMå¤šä¸€äº›ï¼Œæœ€åæ”¶åˆ°çš„å°‘ä¸€äº›ã€‚ç¬¬äºŒæ¬¡æœ€åæ‰æœ‰ä¸€ä¸ªSIGTERMï¼Œæ­¤æ—¶å·²ç»å‘å®Œäº†</p><p>ç¬¦åˆé¢„æœŸ</p><h1 id="Tool"><a href="#Tool" class="headerlink" title="Tool"></a>Tool</h1><p>ç”±äºè¾“å‡ºé•¿å¾—å®åœ¨æ²¡çœ¼çœ‹ï¼Œä¸å¥½debugï¼Œå†™äº†ä¸ªå·¥å…·ç»Ÿè®¡ä¸€ä¸‹</p><p>è¿™ä¸¤æ”¾ä¸€ä¸ªç›®å½•ä¸‹ï¼š</p><ul><li>count.py</li><li>output.txt</li></ul><p>output.txtæ˜¯stress.pyçš„è¾“å‡ºï¼ˆåªæ˜¯process 1çš„outputï¼Œå…¨æ˜¯deliveræ²¡æœ‰broadcastçš„ï¼Œé•¿è¿™æ ·â†“ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">d 2 81</span><br><span class="line">d 2 87</span><br><span class="line">d 2 85</span><br><span class="line">d 6 48</span><br><span class="line">d 6 58</span><br><span class="line">d 6 86</span><br><span class="line">d 6 90</span><br><span class="line">d 6 93</span><br><span class="line">d 6 95</span><br><span class="line">d 6 99</span><br><span class="line">d 6 94</span><br><span class="line">d 2 11</span><br><span class="line">d 2 61</span><br><span class="line">d 2 92</span><br><span class="line">d 2 2</span><br><span class="line">d 2 9</span><br><span class="line">d 6 54</span><br><span class="line">d 2 21</span><br><span class="line">d 2 14</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>count.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;output.txt&quot;</span>,<span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">data = f.readlines()</span><br><span class="line"></span><br><span class="line"><span class="built_in">dict</span> = &#123;&#125;</span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> data:</span><br><span class="line">splited = line.split(<span class="string">&quot; &quot;</span>)</span><br><span class="line">sender = <span class="built_in">int</span>(splited[<span class="number">1</span>])</span><br><span class="line">seq = <span class="built_in">int</span>(splited[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">dict</span>.setdefault(sender,[]).append(seq)</span><br><span class="line">count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\nTotal number of senders: &quot;</span> , <span class="built_in">len</span>(<span class="built_in">dict</span>), <span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Total number of messages: &quot;</span>,  count, <span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Details (S: sender id; T: total message received, Q: seq)\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">keys = []</span><br><span class="line"><span class="keyword">for</span> sender <span class="keyword">in</span> <span class="built_in">dict</span>.keys():</span><br><span class="line">keys.append(<span class="built_in">int</span>(sender))</span><br><span class="line">keys.sort()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> sender <span class="keyword">in</span> keys:</span><br><span class="line"><span class="built_in">dict</span>[sender].sort()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;S:&quot;</span>, <span class="built_in">format</span>(sender,<span class="string">&quot;&lt;4&quot;</span>), <span class="string">&quot; T:&quot;</span>, <span class="built_in">format</span>(<span class="built_in">len</span>(<span class="built_in">dict</span>[sender]),<span class="string">&quot;&lt;5&quot;</span>), <span class="string">&quot; Q:&quot;</span>, <span class="built_in">dict</span>[sender])</span><br><span class="line"><span class="comment"># print(&quot;S:&quot;, format(sender,&quot;&lt;4&quot;), &quot; T:&quot;, format(len(dict[sender]),&quot;&lt;5&quot;))</span></span><br></pre></td></tr></table></figure><p>åé¢è¾“å‡ºå¤šäº†ï¼Œå¯ä»¥æŠŠå…·ä½“çš„SEQåˆ æ‰æ‰ï¼Œå‰é¢å°‘çš„æ—¶å€™å¯ä»¥çœ‹çœ‹æœ‰æ²¡æœ‰é‡å¤</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Project0è¦æ±‚å®ç°Perfect Linkï¼Œç»™äº†æµ‹è¯•ç”¨çš„tc.pyç”¨æ¥ä¿®æ”¹ç½‘ç»œæƒ…å†µï¼Œstress.pyæ¨¡æ‹Ÿå‘æ¶ˆæ¯ã€‚ï¼ˆDistributed Algorithms 2021-2022 Project Validation.pdfï¼‰&lt;/p&gt;
&lt;p&gt;æƒ³æµ‹ä¸€ä¸‹è¯•è¯•ã€‚&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="Memo" scheme="https://coconutnutx.github.io/categories/Memo/"/>
    
    
      <category term="distributed_algorithm" scheme="https://coconutnutx.github.io/tags/distributed-algorithm/"/>
    
  </entry>
  
  <entry>
    <title>è®°å½•ankiå¡ç‰‡</title>
    <link href="https://coconutnutx.github.io/2021/04/21/anki/"/>
    <id>https://coconutnutx.github.io/2021/04/21/anki/</id>
    <published>2021-04-21T09:45:17.000Z</published>
    <updated>2021-04-21T09:45:17.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ‰“ç®—ç”¨ankièƒŒæ³•è¯­å•è¯ï¼Œç”¨Fast Word QueryåŠ å‘éŸ³</p><p>å­—æ®µï¼š</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-04-21 AM11.48.55.jpg"                      width="400px"                ><p>å¡ç‰‡ï¼š</p><p>æ­£é¢æ¨¡æ¿</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;/br&gt;</span><br><span class="line">&lt;center&gt;</span><br><span class="line">&lt;div class=&quot;background&quot;&gt;</span><br><span class="line">&lt;div&gt;&#123;&#123;word&#125;&#125;&lt;/div&gt;&lt;/br&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/center&gt;</span><br></pre></td></tr></table></figure><p>èƒŒé¢æ¨¡æ¿</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;center&gt;</span><br><span class="line">&lt;div class=&quot;background&quot;&gt;</span><br><span class="line">&#123;&#123;FrontSide&#125;&#125;</span><br><span class="line">&lt;hr id=answer&gt;</span><br><span class="line">&lt;div&gt;&#123;&#123;pronunciation&#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;div&gt;&#123;&#123;explanation&#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;div&gt;&#123;&#123;example&#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/center&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;var initVoice = function () &#123;</span><br><span class="line">    var player = document.getElementById(&#x27;dictVoice&#x27;);</span><br><span class="line">    document.addEventListener(&#x27;click&#x27;, function (e) &#123;</span><br><span class="line">        var target = e.target;</span><br><span class="line">        if (target.hasAttribute(&#x27;role&#x27;) &amp;&amp; target.getAttribute(&#x27;role&#x27;).indexOf(&#x27;dict_audio_js&#x27;) &gt;= 0) &#123;</span><br><span class="line">            var url = target.getAttribute(&#x27;data-rel&#x27;);</span><br><span class="line">            player.setAttribute(&#x27;src&#x27;, url);</span><br><span class="line">            player.volume = 1;</span><br><span class="line">            player.play();</span><br><span class="line">            e.preventDefault();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, false);</span><br><span class="line">&#125;;</span><br><span class="line">initVoice();&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>Fast Word Queryé…ç½®ï¼š</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-04-21 AM11.47.38.jpg"                                     ><p>è¯•äº†ä¸€ä¸‹æ³•è¯­åŠ©æ‰‹åªèƒ½æŸ¥åˆ°å‘éŸ³ï¼Œæ²¡æœ‰è§£é‡Šï¼Œäºæ˜¯è§£é‡Šç”¨äº†æœ‰é“</p><p>æ­¤æ—¶æ•ˆæœï¼š</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-04-21 AM11.51.40.jpg"                                     ><p>ç¿»é¢è‡ªåŠ¨å‘éŸ³ï¼Œä¾‹å¥çš„è¯­éŸ³ä¹Ÿå¯ä»¥ç‚¹</p><p>ä½†æœ‰ä¸ªé—®é¢˜æ˜¯ï¼ŒæŸ¥åˆ°çš„ä¾‹å¥æ˜¯ç™½è‰²ï¼ŒèƒŒæ™¯ä¹Ÿæ˜¯ç™½è‰²</p><p>é€‰ä¸­exampleæ¡†ï¼Œåœ¨ç¼–è¾‘htmlä¸­æ‰¾åˆ°äº†è¿™å‡ ä¸ªdivçš„classï¼Œå¡ç‰‡ä¸­æ”¹æ ·å¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.card &#123;</span><br><span class="line">font-family: arial;</span><br><span class="line">font-size: 20px;</span><br><span class="line">&#125;</span><br><span class="line">.background&#123;</span><br><span class="line">max-width: 800px;</span><br><span class="line">&#125;</span><br><span class="line">.mcols-layout&#123;</span><br><span class="line"> background-color:#333335</span><br><span class="line">&#125;</span><br><span class="line">.trans-container&#123;</span><br><span class="line">background-color: #333335;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æå®š~</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-04-21 PM12.22.46.jpg"                                     ><hr><p>åˆåŠ äº†ä¸ªpreå­—æ®µï¼Œå¯ä»¥æ”¾le laä¹‹ç±»çš„ï¼Œæ˜¾ç¤ºæ—¶åœ¨wordä¹‹å‰ </p><p>æŸ¥çš„æ—¶å€™å¿½ç•¥ï¼ˆåœ¨Fast Word Queryä¸­Ignoreæ‰ï¼‰ï¼Œä»åªæŸ¥wordï¼Œé¿å…æŸ¥ä¸åˆ°è§£é‡Š</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æ‰“ç®—ç”¨ankièƒŒæ³•è¯­å•è¯ï¼Œç”¨Fast Word QueryåŠ å‘éŸ³&lt;/p&gt;
&lt;p&gt;å­—æ®µï¼š&lt;/p&gt;
&lt;img  
                     lazyload
                     src=&quot;/images/loading.svg&quot;
     
      
    
    </summary>
    
    
      <category term="Memo" scheme="https://coconutnutx.github.io/categories/Memo/"/>
    
    
      <category term="tool" scheme="https://coconutnutx.github.io/tags/tool/"/>
    
  </entry>
  
  <entry>
    <title>Unity Debug WebGLæ’­æ”¾è§†é¢‘</title>
    <link href="https://coconutnutx.github.io/2021/04/02/unity-debug/"/>
    <id>https://coconutnutx.github.io/2021/04/02/unity-debug/</id>
    <published>2021-04-02T07:53:07.000Z</published>
    <updated>2021-04-02T07:53:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>Unityå†…è¿è¡Œæ—¶æ’­æ”¾è§†é¢‘æ²¡é—®é¢˜ï¼Œå¯¼å‡ºåç”¨ç«ç‹æ‰“å¼€å°±æ”¾ä¸äº†ï¼Œçœ‹æ§åˆ¶å°æŠ¥é”™æ˜¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å·²æ‹¦æˆªè·¨æºè¯·æ±‚ï¼šåŒæºç­–ç•¥ç¦æ­¢è¯»å–ä½äº file:///Users/.../unity/Backups/WebV0.3/sharedassets0.resource çš„è¿œç¨‹èµ„æºã€‚ï¼ˆåŸå› ï¼šCORS è¯·æ±‚ä¸æ˜¯ httpï¼‰ã€‚</span><br></pre></td></tr></table></figure><h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><ol><li><p>WebGLåªèƒ½é€šè¿‡URLæ’­æ”¾è§†é¢‘</p><blockquote><p><a class="link"   href="https://blog.csdn.net/wuyt2008/article/details/107592492?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522161752087116780265448826%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=161752087116780265448826&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~times_rank-10-107592492.first_rank_v2_pc_rank_v29&utm_term=unity+webgl+%E8%A7%86%E9%A2%91%E9%BB%91%E5%B1%8F" >Unity2019åœ¨WebGLä¸‹æ’­æ”¾è§†é¢‘<i class="fas fa-external-link-alt"></i></a></p></blockquote></li><li><p>ç«ç‹æµè§ˆå™¨è®¾ç½®å…è®¸è·¨åŸŸ</p><p>security.fileuri.strict_origin_policyæ”¹false</p><blockquote><p><a class="link"   href="https://blog.csdn.net/qq_28867949/article/details/99890103?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-1&spm=1001.2101.3001.4242" >Firefoxç«ç‹æµè§ˆå™¨è®¿é—®æœ¬åœ°æ–‡ä»¶-æç¤ºè·¨åŸŸé—®é¢˜<i class="fas fa-external-link-alt"></i></a></p></blockquote></li><li><p>ç«ç‹æµè§ˆå™¨è®¾ç½®å…è®¸æ’­æ”¾è§†é¢‘</p><blockquote><p><a class="link"   href="https://blog.csdn.net/qq_34243277/article/details/114398872?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-1&spm=1001.2101.3001.4242" >Unity2018å‘å¸ƒwebglè§†é¢‘æ— æ³•æ’­æ”¾<i class="fas fa-external-link-alt"></i></a></p></blockquote></li></ol><h1 id="å„ç§å¤±è´¥å°è¯•è®°å½•"><a href="#å„ç§å¤±è´¥å°è¯•è®°å½•" class="headerlink" title="å„ç§å¤±è´¥å°è¯•è®°å½•"></a>å„ç§å¤±è´¥å°è¯•è®°å½•</h1><p>1.</p><blockquote><p><a class="link"   href="https://blog.kongregate.com/unity-html5-cors-and-you/" >https://blog.kongregate.com/unity-html5-cors-and-you/<i class="fas fa-external-link-alt"></i></a></p></blockquote><p>å†™äº†é—®é¢˜åŸå› ï¼Œä½†æ˜¯æ²¡çœ‹åˆ°é’ˆå¯¹Unityæ€ä¹ˆè§£å†³</p><p>2.</p><blockquote><p><a class="link"   href="https://www.jianshu.com/p/78904381ba32" >https://www.jianshu.com/p/78904381ba32<i class="fas fa-external-link-alt"></i></a></p></blockquote><p>è¯´æŠŠprivacy.file_unique_originæ”¹æˆfalseï¼Œä½†æ˜¯å®ƒå·²ç»æ˜¯falseäº†</p><p>3.</p><p>å‘ç°Unityä¸­Video Playerçš„è§†é¢‘æºæœ‰è§†é¢‘å‰ªè¾‘å’ŒURLä¸¤ç§æ–¹å¼</p><p>ä¹‹å‰ç”¨çš„æ˜¯è§†é¢‘å‰ªè¾‘ï¼Œç›´æ¥æŠŠmp4æ–‡ä»¶æ‹–è¿›å»</p><p>æ”¹ç”¨URLè¯•è¯•ï¼Œä»æµè§ˆä¸­æ‰¾åˆ°åŒä¸€ä¸ªæ–‡ä»¶ï¼Œæµ‹è¯•ä¹Ÿå¯ä»¥æ’­æ”¾ã€‚è¯•äº†ä¸€ä¸ªç½‘ç»œä¸Šçš„mp4çš„URLï¼Œæµ‹è¯•ä¹Ÿå¯ä»¥</p><p>é‚£æˆ–è®¸å¯ä»¥å°è¯•æŠŠmp4ä¸Šä¼ ï¼Œç„¶åç”¨URLè®¿é—®</p><blockquote><p><a class="link"   href="https://blog.csdn.net/weixin_33912453/article/details/94087306?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-6.baidujs&amp;dist_request_id=&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-6.baidujs" >https://blog.csdn.net/weixin_33912453/article/details/94087306?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-6.baidujs&amp;dist_request_id=&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-6.baidujs<i class="fas fa-external-link-alt"></i></a></p></blockquote><p>è¯•è¯•è¿™ä¸ªç”¨çˆ±å¥‡è‰ºå¼€æ”¾å¹³å°çš„</p><p>å‘ç°æ³¨å†Œåº”ç”¨å¿…é¡»æœ‰url</p><p>4.</p><p>å†æ‰¾ä¸€ä¸‹æœ‰æ²¡æœ‰è§†é¢‘æ‰˜ç®¡ç½‘ç«™</p><p><a class="link"   href="https://www.zhihu.com/question/23036186/answer/1716470191" >https://www.zhihu.com/question/23036186/answer/1716470191<i class="fas fa-external-link-alt"></i></a></p><p>æ‰¾äº†ä¸€ä¸ªé…·æ’­äº‘ï¼Œè§†é¢‘è¦å®¡æ ¸ï¼Œç­‰ä¼šå†çœ‹ï¼ˆä¼¼ä¹ä¸èƒ½ç›´æ¥æ‹¿åˆ°URLï¼Œå¯èƒ½è¦å‡‰ï¼‰</p><p><a class="link"   href="http://www.stonepoll.com/helpcenter/hc/kb/article/fcc34c50-301a-822a-df8c-e690f5af5bb5/" >http://www.stonepoll.com/helpcenter/hc/kb/article/fcc34c50-301a-822a-df8c-e690f5af5bb5/<i class="fas fa-external-link-alt"></i></a></p><p>è…¾è®¯äº‘è¦ä¹°æœåŠ¡ï¼Œç®—äº†å…ˆ</p><p>åˆä¼ äº†ä¸€ä¸ªä¼˜é…·çš„ï¼Œç­‰ä¼šçœ‹å®¡æ ¸</p><p>å¾—ï¼Œæ‹¿ä¸åˆ°mp4çš„URL</p><p>5.</p><p>è¿˜æ˜¯ä»æµè§ˆå™¨å…¥æ‰‹å§ï¼Œè¯•è¯•å…è®¸è·¨åŸŸ</p><p><a class="link"   href="https://blog.csdn.net/nju_zjy/article/details/108870385" >https://blog.csdn.net/nju_zjy/article/details/108870385<i class="fas fa-external-link-alt"></i></a></p><p>å‚è€ƒè¿™ä¸ªï¼Œè£…ä¸€ä¸ªç«ç‹æ’ä»¶</p><p>æ²¡ç”¨</p><p>å¤šè¯•äº†å‡ ä¸ªæ’ä»¶ï¼Œéƒ½æ²¡ç”¨</p><p>6.</p><p>æœ‰æ‰¾åˆ°ä¸€ä¸ªè°ƒæµè§ˆå™¨è®¾ç½®çš„</p><p><a class="link"   href="https://blog.csdn.net/qq_28867949/article/details/99890103?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-1&amp;spm=1001.2101.3001.4242" >https://blog.csdn.net/qq_28867949/article/details/99890103?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-1&amp;spm=1001.2101.3001.4242<i class="fas fa-external-link-alt"></i></a></p><p>æŠŠsecurity.fileuri.strict_origin_policyæ”¹æˆfalse</p><p>ã€é‡å¯åä¸æŠ¥é”™äº†ï¼ã€‘</p><p>ä½†æ˜¯è§†é¢‘è¿˜æ˜¯æ’­æ”¾ä¸äº†</p><p>7.</p><p><a class="link"   href="https://blog.csdn.net/qq_38229886/article/details/103139228?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-2&amp;spm=1001.2101.3001.4242" >https://blog.csdn.net/qq_38229886/article/details/103139228?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-2&amp;spm=1001.2101.3001.4242<i class="fas fa-external-link-alt"></i></a></p><p>WebGLä¸æ”¯æŒmp4ï¼Ÿï¼â€¦</p><p>è½¬æˆogvã€‚æ²¡ç”¨</p><p>8.</p><p>æ‰¾äº†ä¸€ä¸ªåœ¨çº¿çš„mp4åœ°å€ï¼Œæœ¬åœ°ok</p><p>å¯¼å‡ºWebGLè¿è¡Œï¼Œä¸æŠ¥é”™ï¼Œæ’­æ”¾ä¸äº†</p><p>9.</p><p><a class="link"   href="https://blog.csdn.net/weixin_43779625/article/details/103410836" >https://blog.csdn.net/weixin_43779625/article/details/103410836<i class="fas fa-external-link-alt"></i></a></p><p>æ”¹ç”¨Render Textureçš„æ–¹å¼ï¼ˆä»¥å‰æ˜¯æè´¨è¦†ç›–ï¼‰</p><p>ä¸è¡Œï¼ˆç”šè‡³æœ¬åœ°éƒ½æ˜¾ç¤ºä¸äº†è§†é¢‘ï¼Œåªæœ‰å£°éŸ³ï¼‰</p><p>10.</p><p><a class="link"   href="https://blog.csdn.net/JLX_Sir/article/details/82684491?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-2.baidujs&amp;dist_request_id=&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-2.baidujs" >https://blog.csdn.net/JLX_Sir/article/details/82684491?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-2.baidujs&amp;dist_request_id=&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-2.baidujs<i class="fas fa-external-link-alt"></i></a></p><p>è¯´WebGLä¸æ”¯æŒé«˜åˆ†è¾¨ç‡</p><p>è¯•è¯•åœ¨æ£€æŸ¥å™¨é‡Œè®¾ç½®è½¬ç  1/4åˆ†è¾¨ç‡ï¼Œæ¯”ç‰¹ç‡æ¨¡å¼ä½ï¼Œç©ºé—´è´¨é‡ä½</p><p>å¯¼å‡ºï¼Œä¸è¡Œ</p><p>11.</p><p><a class="link"   href="https://blog.csdn.net/qq_34243277/article/details/114398872?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-1&amp;spm=1001.2101.3001.4242" >https://blog.csdn.net/qq_34243277/article/details/114398872?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-1&amp;spm=1001.2101.3001.4242<i class="fas fa-external-link-alt"></i></a></p><p>ç«ç‹è¿˜æœ‰é˜»æ­¢éŸ³è§†é¢‘çš„é»˜è®¤è®¾ç½®ï¼Ÿï¼Ÿå…³æ‰</p><p>mp4å’Œogvéƒ½ä¸è¡Œ</p><p>12.</p><p><a class="link"   href="https://blog.csdn.net/s1314_JHC/article/details/80618252" >https://blog.csdn.net/s1314_JHC/article/details/80618252<i class="fas fa-external-link-alt"></i></a></p><p>è¿˜æœ‰è¯´æ˜¯WebGLä¸æ”¯æŒMovieTextureçš„ï¼Œç”¨æ’ä»¶</p><p>å¯¼å‡ºåæ˜¯é»‘çš„ï¼Œç–¯ç‹‚æŠ¥é”™</p><p>13.</p><p><a class="link"   href="https://blog.csdn.net/wuyt2008/article/details/107592492?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522161752087116780265448826%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=161752087116780265448826&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~times_rank-10-107592492.first_rank_v2_pc_rank_v29&amp;utm_term=unity+webgl+%E8%A7%86%E9%A2%91%E9%BB%91%E5%B1%8F" >https://blog.csdn.net/wuyt2008/article/details/107592492?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522161752087116780265448826%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=161752087116780265448826&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~times_rank-10-107592492.first_rank_v2_pc_rank_v29&amp;utm_term=unity+webgl+%E8%A7%86%E9%A2%91%E9%BB%91%E5%B1%8F<i class="fas fa-external-link-alt"></i></a></p><p>è¿™ä¸ªè¯´WebGLåªèƒ½é€šè¿‡urlæ’­æ”¾</p><p>ç°åœ¨è°ƒè¿‡ç«ç‹çš„è®¾ç½®äº†ï¼Œå†è¯•è¯•urlå§</p><p>!!!!!!!!!!!!æˆåŠŸäº†ğŸ˜­!!!!!!!!!!!!</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Unityå†…è¿è¡Œæ—¶æ’­æ”¾è§†é¢‘æ²¡é—®é¢˜ï¼Œå¯¼å‡ºåç”¨ç«ç‹æ‰“å¼€å°±æ”¾ä¸äº†ï¼Œçœ‹æ§åˆ¶å°æŠ¥é”™æ˜¯&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/sp
      
    
    </summary>
    
    
      <category term="Note" scheme="https://coconutnutx.github.io/categories/Note/"/>
    
    
      <category term="unity" scheme="https://coconutnutx.github.io/tags/unity/"/>
    
  </entry>
  
  <entry>
    <title>Unity Project ç‰ˆæœ¬è®°å½•</title>
    <link href="https://coconutnutx.github.io/2021/03/21/unity-project-memo/"/>
    <id>https://coconutnutx.github.io/2021/03/21/unity-project-memo/</id>
    <published>2021-03-21T16:35:47.000Z</published>
    <updated>2021-03-21T16:35:47.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="02-16-V0-1"><a href="#02-16-V0-1" class="headerlink" title="02.16 V0.1"></a>02.16 V0.1</h1><h2 id="æ–°å¢åŸºç¡€ç§»åŠ¨æ“ä½œ"><a href="#æ–°å¢åŸºç¡€ç§»åŠ¨æ“ä½œ" class="headerlink" title="æ–°å¢åŸºç¡€ç§»åŠ¨æ“ä½œ"></a>æ–°å¢åŸºç¡€ç§»åŠ¨æ“ä½œ</h2><ul><li><p>ç‚¹å‡»å¯»è·¯</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Feb-16-2021 18-29-31.gif"                                     ></li><li><p>é è¿‘æ˜¾ç¤ºä»‹ç»</p></li><li><p>é¼ æ ‡æ»šåŠ¨å‰åå¹³ç§»</p></li><li><p>é”®ç›˜å‰åå·¦å³å¹³ç§»</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Feb-16-2021 18-30-32.gif"                                     ></li><li><p>é¼ æ ‡æ‹–æ‹½æ—‹è½¬è§†è§’</p></li></ul><h1 id="02-19-V0-1-1"><a href="#02-19-V0-1-1" class="headerlink" title="02.19 V0.1.1"></a>02.19 V0.1.1</h1><h2 id="æ–°å¢ä»‹ç»ç‰Œ"><a href="#æ–°å¢ä»‹ç»ç‰Œ" class="headerlink" title="æ–°å¢ä»‹ç»ç‰Œ"></a>æ–°å¢ä»‹ç»ç‰Œ</h2><ul><li><p>åˆ é™¤é è¿‘æ˜¾ç¤ºä»‹ç»</p></li><li><p>ä»‹ç»ç‰Œé¼ æ ‡ç§»å…¥é«˜äº®</p></li><li><p>ç‚¹å‡»ä»‹ç»ç‰Œå¯»è·¯</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Feb-19-2021 17-25-59.gif"                                     ><ul><li>å¯»è·¯ä¸­ä»»æ„æ“ä½œæ‰“æ–­</li><li>åˆ°è¾¾ç›®çš„åœ°åè½¬å‘ä»‹ç»ç‰Œ</li></ul></li></ul><h2 id="æ–°å¢å¯¼æ¸¸æ "><a href="#æ–°å¢å¯¼æ¸¸æ " class="headerlink" title="æ–°å¢å¯¼æ¸¸æ "></a>æ–°å¢å¯¼æ¸¸æ </h2><ul><li><p>ç‚¹å‡»ä¸­é—´æŒ‰é’®å¯»è·¯</p></li><li><p>ç‚¹å‡»å·¦å³æŒ‰é’®æ›´æ–°å¯¼æ¸¸æ å¹¶å¯»è·¯</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Feb-19-2021 17-26-58.gif"                                     ><ul><li>æœ€å·¦/æœ€å³æ—¶æŒ‰é’®ä¸å¯ç”¨</li></ul></li></ul><h2 id="æ–°å¢èœå•æ "><a href="#æ–°å¢èœå•æ " class="headerlink" title="æ–°å¢èœå•æ "></a>æ–°å¢èœå•æ </h2><ul><li>ç‚¹å‡»å¸®åŠ©æŒ‰é’®å¼¹å‡ºä»‹ç»</li></ul><h1 id="03-09-V0-1-2"><a href="#03-09-V0-1-2" class="headerlink" title="03.09 V0.1.2"></a>03.09 V0.1.2</h1><h2 id="æ–°å¢ä»‹ç»"><a href="#æ–°å¢ä»‹ç»" class="headerlink" title="æ–°å¢ä»‹ç»"></a>æ–°å¢ä»‹ç»</h2><ul><li><p>ç‚¹å‡»å¯¼èˆªæ ä¸­æŒ‰é’®ï¼Œæ˜¾ç¤ºç®€ä»‹</p><ul><li>æ–‡å­—è¶…å‡ºæ—¶æ˜¾ç¤ºæ»šåŠ¨æ¡</li></ul><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Mar-09-2021 17-34-17.gif"                                     ><ul><li>ç‚¹å‡»æŸ¥çœ‹å¤§å›¾æ‰“å¼€æ–°é¡µé¢</li></ul></li></ul><h1 id="03-11-V0-2"><a href="#03-11-V0-2" class="headerlink" title="03.11 V0.2"></a>03.11 V0.2</h1><h2 id="é‡å»ºå±•å…"><a href="#é‡å»ºå±•å…" class="headerlink" title="é‡å»ºå±•å…"></a>é‡å»ºå±•å…</h2><ul><li><p>åˆå§‹æ”¾å…¥éš‹åˆ°äº”ä»£çš„8å¼ ç”»</p></li><li><p>è°ƒæ•´ä»‹ç»ç‰Œæ ·å¼</p></li><li><p>åŠ å…¥å¤©èŠ±æ¿å’Œç¯</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Mar-11-2021 16-54-44.gif"                                     ></li></ul><h1 id="03-16-V0-2-1"><a href="#03-16-V0-2-1" class="headerlink" title="03.16 V0.2.1"></a>03.16 V0.2.1</h1><h2 id="åŠ å…¥å¸®åŠ©æŒ‰é’®"><a href="#åŠ å…¥å¸®åŠ©æŒ‰é’®" class="headerlink" title="åŠ å…¥å¸®åŠ©æŒ‰é’®"></a>åŠ å…¥å¸®åŠ©æŒ‰é’®</h2><ul><li><p>ç‚¹å‡»æ˜¾ç¤ºæ“ä½œè¯´æ˜</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Mar-16-2021 11-50-45.gif"                                     ></li></ul><h2 id="è°ƒæ•´"><a href="#è°ƒæ•´" class="headerlink" title="è°ƒæ•´"></a>è°ƒæ•´</h2><ul><li>ç‚¹å‡»æŸ¥çœ‹å¤§å›¾æ—¶ï¼Œåœ¨æ–°çª—å£æ‰“å¼€é¡µé¢</li><li>è°ƒæ•´ç‚¹å‡»å¯»è·¯ç²’å­æ•ˆæœ</li></ul><h1 id="03-20-V0-2-2"><a href="#03-20-V0-2-2" class="headerlink" title="03.20 V0.2.2"></a>03.20 V0.2.2</h1><h2 id="HallAæ­å»ºåŸºæœ¬å®Œæˆ"><a href="#HallAæ­å»ºåŸºæœ¬å®Œæˆ" class="headerlink" title="HallAæ­å»ºåŸºæœ¬å®Œæˆ"></a>HallAæ­å»ºåŸºæœ¬å®Œæˆ</h2><ul><li><p>å…±28å¼ ç”»ä½œ</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Mar-21-2021 22-30-25.gif"                                     ></li><li><p>è®¾ç½®åº§æ¤…ã€ç»¿æ¤ã€èŠ±ç“¶ç­‰</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Mar-21-2021 22-32-51.gif"                                     ></li></ul><h1 id="03-25-V0-2-3"><a href="#03-25-V0-2-3" class="headerlink" title="03.25 V0.2.3"></a>03.25 V0.2.3</h1><ul><li><p>ä¿®æ”¹å¯¼èˆªæ é«˜äº®æ•ˆæœ</p></li><li><p>æ–°å¢è£…é¥°æ•ˆæœ</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Mar-26-2021 10-03-52.gif"                                     ></li></ul><h2 id="æ–°å¢éŸ³ä¹"><a href="#æ–°å¢éŸ³ä¹" class="headerlink" title="æ–°å¢éŸ³ä¹"></a>æ–°å¢éŸ³ä¹</h2><ul><li>ç§»åŠ¨æ—¶æ·»åŠ è„šæ­¥éŸ³æ•ˆ</li><li>åƒé‡Œæ±Ÿå±±å›¾èµ°å»Šä¸­æ·»åŠ æµæ°´éŸ³æ•ˆ</li></ul><h1 id="03-31-V0-2-4"><a href="#03-31-V0-2-4" class="headerlink" title="03.31 V0.2.4"></a>03.31 V0.2.4</h1><p>ä¿®æ”¹UI</p><ul><li><p>ä¿®æ”¹å¯¼èˆªæ å›¾æ ‡ä¸ºæ–‡å­—ï¼Œé¿å…å·¦å³ç®­å¤´ä¸ç§»åŠ¨æ–¹å‘ä¸ä¸€è‡´å½±å“ä½“éªŒ</p></li><li><p>æ–°å¢ä¸Šä¸‹å·¦å³ç§»åŠ¨æŒ‰é’®</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Apr-02-2021 09-24-45.gif"                                     ></li><li><p>å¯¼èˆªæ åˆå§‹æ˜¾ç¤º0å±•è§ˆä»‹ç»ï¼Œæ­¤æ—¶åªæœ‰ä¸‹ä¸€å¹…æŒ‰é’®å¯ç‚¹å‡»</p></li></ul><p>ä¿®æ”¹å±•å…</p><ul><li>æ–°å¢å±•è§ˆä»‹ç»ï¼Œé»˜è®¤è¿›å…¥åœºæ™¯æ—¶é¢å‘å±•è§ˆä»‹ç»ï¼Œç‚¹ä¸‹ä¸€å¹…æ¥åˆ°ç¬¬ä¸€å¹…ç”»ä½œ</li><li>è°ƒæ•´æœä»£ä»‹ç»ä½ç½®ï¼Œä½¿å¯¼èˆªåˆ°ç”»ä½œæ—¶èƒ½å®Œæ•´æµè§ˆ</li><li>æ–°å¢å‡ºå£</li><li>æ–°å¢æ–¹å‘æŒ‡ç¤ºç‰Œï¼Œå°†éƒ¨åˆ†åœ°ä¸Šçš„èŠ±ç“¶ç§»åŠ¨åˆ°æŒ‡ç¤ºç‰Œå¹³å°ä¸Š</li></ul><p>ä¿®æ”¹å¯¼èˆªæ¨¡å—</p><ul><li>ç‚¹å‡»ç”»ä½œä¹Ÿå¯å¯¼èˆª</li></ul><h1 id="04-02-V0-3"><a href="#04-02-V0-3" class="headerlink" title="04.02 V0.3"></a>04.02 V0.3</h1><p>æ–°å¢å½±å…</p><ul><li><p>å¼€å§‹å’Œæš‚åœè§†é¢‘</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Apr-02-2021 09-18-14.gif"                                     ></li></ul><p>å¯¼èˆªæ æ–°å¢å±•å¼€æŒ‰é’®</p><ul><li>ç‚¹å‡»å±•å¼€å»å½±å…å’Œå›èµ·ç‚¹æŒ‰é’®</li><li>å»å½±å…å¯¼èˆªåˆ°å½±å…</li><li>ä¼šèµ·ç‚¹å¯¼èˆªåˆ°å±•å…ä»‹ç»</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;02-16-V0-1&quot;&gt;&lt;a href=&quot;#02-16-V0-1&quot; class=&quot;headerlink&quot; title=&quot;02.16 V0.1&quot;&gt;&lt;/a&gt;02.16 V0.1&lt;/h1&gt;&lt;h2 id=&quot;æ–°å¢åŸºç¡€ç§»åŠ¨æ“ä½œ&quot;&gt;&lt;a href=&quot;#æ–°å¢åŸºç¡€ç§»åŠ¨æ“ä½œ&quot; cla
      
    
    </summary>
    
    
      <category term="Memo" scheme="https://coconutnutx.github.io/categories/Memo/"/>
    
    
      <category term="unity" scheme="https://coconutnutx.github.io/tags/unity/"/>
    
  </entry>
  
  <entry>
    <title>Project V0.2 Record</title>
    <link href="https://coconutnutx.github.io/2021/03/16/unity/"/>
    <id>https://coconutnutx.github.io/2021/03/16/unity/</id>
    <published>2021-03-16T09:15:39.000Z</published>
    <updated>2021-03-16T09:15:39.000Z</updated>
    
    <content type="html"><![CDATA[<p>é‡æ–°æ­å»ºäº†åœºæ™¯ï¼Œunityä¸­è¿è¡Œæ²¡é—®é¢˜</p><h1 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h1><p>æ„å»ºåé‡åˆ°ä¸€äº›bug</p><h2 id="æŒ‰é’®æ–‡å­—ç¼ºå¤±"><a href="#æŒ‰é’®æ–‡å­—ç¼ºå¤±" class="headerlink" title="æŒ‰é’®æ–‡å­—ç¼ºå¤±"></a>æŒ‰é’®æ–‡å­—ç¼ºå¤±</h2><p>æ„å»ºmacç‰ˆæœ¬åï¼ŒæŒ‰é’®ä¸Šçš„æ–‡å­—æ¶ˆå¤±äº†ï¼Œä½†æ˜¯å…¶å®ƒåœ°æ–¹ï¼ˆè¯¦æƒ…ã€åœºæ™¯ä¸­ï¼‰éƒ½æ­£å¸¸</p><p>å‘ç°åŸæœ¬çš„æŒ‰é’®ä½¿ç”¨äº†TextMeshProï¼Œä½†æ˜¯æ²¡æœ‰å¿…è¦ï¼Œæ”¹æˆäº†ç”¨Textçš„</p><p>ä»£ç ä¹Ÿä¿®æ”¹æˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// [SerializeField] private TextMeshProUGUI guideText = null;</span><br><span class="line">    [SerializeField] private Text guideText = null;</span><br></pre></td></tr></table></figure><p>é‡æ–°æ„å»ºï¼Œå°±æ²¡æœ‰é—®é¢˜äº†</p><p>é¡ºä¾¿ä¸Šä¸€ç‰ˆä¸­ç¬¬ä¸€æ¬¡ç‚¹å¼€è¯¦æƒ…æ²¡æœ‰æ–‡å­—çš„bugä¹Ÿæ¶ˆå¤±äº†</p><h2 id="unityFramework-is-not-defined"><a href="#unityFramework-is-not-defined" class="headerlink" title="unityFramework is not defined"></a>unityFramework is not defined</h2><p>æ„å»ºwebglç‰ˆæœ¬åï¼Œfirefoxæµè§ˆå™¨åŠ è½½æ—¶è¿›åº¦æ¡å¡åœ¨80%å·¦å³ï¼Œæ§åˆ¶å°æŠ¥é”™</p><p>Uncaught ReferenceError: unityFramework is not defined</p><p>ï¼ˆä½†æ˜¯å‘å¸ƒåˆ°itch.ioåå¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼‰</p><p><a class="link"   href="https://forum.unity.com/threads/uncaught-referenceerror-unityframework-is-not-defined-at-htmlscriptelement-script-onload-webgl.803967/" >https://forum.unity.com/threads/uncaught-referenceerror-unityframework-is-not-defined-at-htmlscriptelement-script-onload-webgl.803967/<i class="fas fa-external-link-alt"></i></a></p><p>å‚è€ƒâ†‘ä¸­ä¸€ä¸ªå›ç­”ï¼šTry to disable compression</p><p>è§£å†³ğŸ˜„</p><p>ä¹‹å‰çœ‹æ•™ç¨‹çš„æ—¶å€™åº”è¯¥æ˜¯è°ƒè¿‡è¿™ä¸ªå‚æ•°çš„ï¼Œè¿™æ¬¡æå¿˜äº†</p><h1 id="V0-2-1"><a href="#V0-2-1" class="headerlink" title="V0.2.1"></a>V0.2.1</h1><h2 id="æ–°æ ‡ç­¾é¡µæ‰“å¼€ç½‘é¡µ"><a href="#æ–°æ ‡ç­¾é¡µæ‰“å¼€ç½‘é¡µ" class="headerlink" title="æ–°æ ‡ç­¾é¡µæ‰“å¼€ç½‘é¡µ"></a>æ–°æ ‡ç­¾é¡µæ‰“å¼€ç½‘é¡µ</h2><p>macç‰ˆæœ¬ä¸­ï¼Œç‚¹æŸ¥çœ‹å¤§å›¾ä¼šæ‰“å¼€æµè§ˆå™¨æ–°é¡µé¢</p><p>webglç‰ˆæœ¬ä¸­ï¼Œç‚¹æŸ¥çœ‹å¤§å›¾ä¼šç›´æ¥åœ¨å½“å‰é¡µè·³è½¬</p><p>æƒ³æ”¹æˆæ–°æ ‡ç­¾é¡µ</p><p>å‚è€ƒ<a class="link"   href="https://stackoverflow.com/questions/62348214/how-to-open-a-link-on-a-new-tab-using-webgl-c-through-unity" >https://stackoverflow.com/questions/62348214/how-to-open-a-link-on-a-new-tab-using-webgl-c-through-unity<i class="fas fa-external-link-alt"></i></a></p><blockquote><p>using .jslib file</p><p>Assets/plugins/plugin.jslib</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var plugin = &#123;</span><br><span class="line">    OpenNewTab : function(url)</span><br><span class="line">    &#123;</span><br><span class="line">        url = Pointer_stringify(url);</span><br><span class="line">        window.open(url,&#x27;_blank&#x27;);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">mergeInto(LibraryManager.library, plugin);</span><br></pre></td></tr></table></figure><p>Your C# script</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using System.Runtime.InteropServices;</span><br><span class="line"></span><br><span class="line">public class OpenURL : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [DllImport(&quot;__Internal&quot;)]</span><br><span class="line">    private static extern void OpenNewTab(string url);</span><br><span class="line"></span><br><span class="line">    public void openIt(string url)</span><br><span class="line">    &#123;</span><br><span class="line">#if !UNITY_EDITOR &amp;&amp; UNITY_WEBGL</span><br><span class="line">             OpenNewTab(url);</span><br><span class="line">#endif</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if (Input.GetKeyDown(KeyCode.Return))</span><br><span class="line">        &#123;</span><br><span class="line">            openIt(&quot;www.wateverurluwant.com&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote><p>firefoxå’Œitch.ioæµ‹è¯•å‡å¯~</p><h2 id="å¸®åŠ©æŒ‰é’®"><a href="#å¸®åŠ©æŒ‰é’®" class="headerlink" title="å¸®åŠ©æŒ‰é’®"></a>å¸®åŠ©æŒ‰é’®</h2><p>è¿˜éœ€è¦æŠŠå¸®åŠ©æŒ‰é’®åŠ å›æ¥</p><p>å¹¶ä¸”é»˜è®¤é¦–æ¬¡æ‰“å¼€ç¨‹åºæ—¶å¼¹å‡ºæ˜¾ç¤º</p><h1 id="V0-2-2"><a href="#V0-2-2" class="headerlink" title="V0.2.2"></a>V0.2.2</h1><h2 id="å›¾ç‰‡æ¨¡ç³Šé—®é¢˜"><a href="#å›¾ç‰‡æ¨¡ç³Šé—®é¢˜" class="headerlink" title="å›¾ç‰‡æ¨¡ç³Šé—®é¢˜"></a>å›¾ç‰‡æ¨¡ç³Šé—®é¢˜</h2><p>æŠŠæ‰€æœ‰å›¾ç‰‡åŠ è¿›å»äº†</p><p>å‘ç°åƒé‡Œæ±Ÿå±±å›¾å¯¼å…¥ä¹‹åå¾ˆæ¨¡ç³Š</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-03-18 PM2.38.54.jpg"                                     ><p>å‘ç°å¯ä»¥è°ƒæœ€å¤§å°ºå¯¸ï¼Œå°±æ¸…æ™°äº†</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-03-18 PM2.41.11.jpg"                                     ><hr><p>æµ‹è¯•å‘å¸ƒçš„æ—¶å€™V0.2.2ï¼Œbuildé‡Œé¢dataæ–‡ä»¶æœ‰235.4MBï¼Œitch.ioæ— æ³•åŠ è½½</p><p>å°†å›¾ç‰‡å…¨ä½“é™äº†ä¸€ä¸ªæ¸…æ™°åº¦ï¼Œå˜æˆ114MBï¼Œå¯ä»¥åŠ è½½äº†ï¼Œä½†è¿˜æ˜¯å¾ˆå¤§</p><p>å°†5ç§èŠ±åˆ æˆ2ç§ï¼Œå˜æˆ104.7MB</p><p>æŠŠæ³¢æµªé•¿æ¤…æ¢æˆå’Œå…¶å®ƒåœ°æ–¹ä¸€æ ·çš„ç«¹æ¤…ï¼Œå¢™å¤–çš„ç«¹å­å¶å­å…¨åˆ åˆ°æœ€å°‘ï¼Œå˜æˆ102.1MB</p><p>å¢™å¤–ç«¹å­å…¨åˆ æ‰ï¼Œå˜æˆ91.3MB</p><p>V0.2.1çš„æ—¶å€™æ˜¯42.3MBï¼Œçœ‹æ¥è¿˜æ˜¯ç”»æœ€å ç©ºé—´</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;é‡æ–°æ­å»ºäº†åœºæ™¯ï¼Œunityä¸­è¿è¡Œæ²¡é—®é¢˜&lt;/p&gt;
&lt;h1 id=&quot;Debug&quot;&gt;&lt;a href=&quot;#Debug&quot; class=&quot;headerlink&quot; title=&quot;Debug&quot;&gt;&lt;/a&gt;Debug&lt;/h1&gt;&lt;p&gt;æ„å»ºåé‡åˆ°ä¸€äº›bug&lt;/p&gt;
&lt;h2 id=&quot;æŒ‰é’®æ–‡å­—ç¼ºå¤±&quot;&gt;
      
    
    </summary>
    
    
      <category term="Note" scheme="https://coconutnutx.github.io/categories/Note/"/>
    
    
      <category term="unity" scheme="https://coconutnutx.github.io/tags/unity/"/>
    
  </entry>
  
  <entry>
    <title>Project V0.1.2 Record</title>
    <link href="https://coconutnutx.github.io/2021/03/09/unity/"/>
    <id>https://coconutnutx.github.io/2021/03/09/unity/</id>
    <published>2021-03-09T16:15:34.000Z</published>
    <updated>2021-03-09T16:15:34.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æè¿°éƒ¨åˆ†"><a href="#æè¿°éƒ¨åˆ†" class="headerlink" title="æè¿°éƒ¨åˆ†"></a>æè¿°éƒ¨åˆ†</h1><p>ç»™å¯¼èˆªæ åŠ äº†ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»æ˜¾ç¤ºæè¿°</p><p>ä»¥åŠä¸€ä¸ªæŸ¥çœ‹å¤§å›¾çš„æŒ‰é’®ï¼Œæ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢</p><h1 id="æŸ¥çœ‹å¤§å›¾"><a href="#æŸ¥çœ‹å¤§å›¾" class="headerlink" title="æŸ¥çœ‹å¤§å›¾"></a>æŸ¥çœ‹å¤§å›¾</h1><p>å…³äºå›¾ç”»ç»†èŠ‚çš„æµè§ˆï¼Œè®¾æƒ³è¿‡å‡ ç§æ–¹æ¡ˆï¼š</p><ul><li><p>åœ¨Unityå†…æ”¾å¤§å›¾ï¼Œé€šè¿‡ç§»åŠ¨äººç‰©æˆ–æ»šåŠ¨å›¾ç‰‡æ¥æŸ¥çœ‹ç»†èŠ‚</p><p>ä½†æ˜¯ç§»åŠ¨çš„æ“ä½œä¼šæ¯”è¾ƒå¤æ‚ï¼Œå’Œç°æœ‰çš„æ§åˆ¶å†²çª</p><p>æ»šåŠ¨å›¾ç‰‡çš„è¯ï¼Œå„å¼ å›¾çš„å¤§å°å·®åˆ«å¤ªå¤§ï¼Œä¹Ÿä¸å¥½æ”¾</p><p>è¿˜æœ‰ä¸€ä¸ªæ˜¯å›¾ç‰‡çš„ç‰ˆæƒé—®é¢˜ï¼Œä¸‹è½½å¤§å›¾æ”¾åœ¨å·¥ç¨‹é‡Œæ„Ÿè§‰è¿˜æ˜¯ä¸å¤ªå¥½</p></li><li><p>å†…åµŒç½‘é¡µ</p><p>å¯»æ‰¾äº†ä¸€äº›å®ç°æ–¹å¼ï¼Œä½†æ˜¯éƒ½æ¯”è¾ƒå±€é™ï¼Œæ²¡æœ‰å®˜æ–¹çš„è§£å†³æ–¹æ¡ˆ</p></li><li><p>æ‰“å¼€æ–°é¡µé¢</p><p>ç®€å•ç²—æš´ï¼Œè™½ç„¶è¦è·³å‡ºä¸€ä¸‹ï¼Œä½†æ˜¯ä¸“ä¸šçš„ç½‘ç«™çœ‹å›¾ä¹Ÿå¥½æ“ä½œ</p></li></ul><p>äºæ˜¯æš‚ä¸”å°±è¿™æ ·äº†</p><h1 id="å›¾ç”»ä¿¡æ¯å’Œå±•æ¿ç®¡ç†"><a href="#å›¾ç”»ä¿¡æ¯å’Œå±•æ¿ç®¡ç†" class="headerlink" title="å›¾ç”»ä¿¡æ¯å’Œå±•æ¿ç®¡ç†"></a>å›¾ç”»ä¿¡æ¯å’Œå±•æ¿ç®¡ç†</h1><p>ä»¥å‰æ˜¯ç›´æ¥æŠŠæ–‡å­—ä¿¡æ¯æ”¾åœ¨å±•æ¿çš„Objectä¸Š</p><p>ä½†æ˜¯éšç€ä»¥åå±•å…çš„å¼•å…¥ï¼Œä¼šå¾ˆéº»çƒ¦</p><p>äºæ˜¯å°†ä¸»è¦ä¿¡æ¯å­˜åˆ°äº†csvé‡Œï¼Œå¹¶ä¸”æ–°å¢äº†ä¸€ä¸ªå•ä¾‹çš„ArtManagerï¼Œç”¨äºç®¡ç†æ‰€æœ‰çš„æ–‡æœ¬ä¿¡æ¯å’Œæ¨¡å‹ä¸­å±•æ¿çš„å¼•ç”¨ã€‚å…¶å®ƒBoardä»¥åŠGuideBarä¸­è¦ç”¨åˆ°è¿™äº›ä¿¡æ¯æ—¶ï¼Œç›´æ¥é€šè¿‡ArtManagerè·å¾—ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class ArtManager : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public static ArtManager instance;</span><br><span class="line"></span><br><span class="line">    // reference to each board in each hall</span><br><span class="line">    [SerializeField] private Board[] boardsInHall0 = null;</span><br><span class="line">    [SerializeField] private Board[] boardsInHall1 = null;</span><br><span class="line"></span><br><span class="line">    // number of halls</span><br><span class="line">    private int numOfHalls = 2;</span><br><span class="line"></span><br><span class="line">    // store art info in each hall</span><br><span class="line">    private Dictionary&lt;int, ArtInfo&gt;[] artInfoStore;</span><br><span class="line"></span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        if(instance != null)&#123;</span><br><span class="line">            GameObject.Destroy(this.gameObject);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        instance = this;</span><br><span class="line"></span><br><span class="line">        // load art info</span><br><span class="line">        artInfoStore = new Dictionary&lt;int, ArtInfo&gt;[numOfHalls];</span><br><span class="line">        for(int i=0; i&lt;artInfoStore.Length; i++)&#123;</span><br><span class="line">            artInfoStore[i] = new Dictionary&lt;int, ArtInfo&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        ArtInfoLoader.LoadArtInfo(artInfoStore);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ---------- Functions for Board &amp; GuidBar ----------</span><br><span class="line">    public ArtInfo GetArtInfo(int hall, int index)&#123;</span><br><span class="line">        return artInfoStore[hall][index];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ---------- Functions for GuideBar ----------</span><br><span class="line">    public string getGuideMenuText(int hall, int index)&#123;</span><br><span class="line">        return artInfoStore[hall][index].title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getBoardNumInHall(int hall)&#123;</span><br><span class="line">        return artInfoStore[hall].Count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Vector3[] getDestination(int hall, int index)&#123;</span><br><span class="line">        Vector3[] ret = null;</span><br><span class="line"></span><br><span class="line">        if(hall == 0)&#123;</span><br><span class="line">            ret = boardsInHall0[index - 1].GetDesitination(); // index begin with 1</span><br><span class="line">        &#125;else if(hall == 1)&#123;</span><br><span class="line">            ret = boardsInHall1[index - 1].GetDesitination();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¸åŒå±•å…çš„å±•æ¿åˆ†äº†ä¸åŒçš„æ•°ç»„ï¼Œå› ä¸ºäºŒç»´æ•°ç»„æ²¡æ³•åœ¨Unityé‡Œæ‹–å¼•ç”¨ï¼Œåªå¥½é€€è€Œæ±‚å…¶æ¬¡äº†</p><p>è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚æ˜¯ï¼Œç”»çš„indexéƒ½æ˜¯ä»1å¼€å§‹ï¼Œè¿™ä¸ªä¹Ÿç»Ÿä¸€åœ¨ArtManagerä¸­å¤„ç†äº†ï¼Œå…¶å®ƒç±»ä¸­å°±ä¸ç”¨ç®¡äº†</p><h1 id="ç”Ÿæˆæ„å»ºDebug"><a href="#ç”Ÿæˆæ„å»ºDebug" class="headerlink" title="ç”Ÿæˆæ„å»ºDebug"></a>ç”Ÿæˆæ„å»ºDebug</h1><p>ç”ŸæˆWebGLåï¼Œéƒ¨åˆ†æ–‡å­—æ˜¾ç¤ºä¸å…¨</p><p>æŸ¥åˆ°ä¸€ç§è§£å†³æ–¹å¼ï¼šæŠŠé¢œè‰²ç©ºé—´æ”¹æˆLinearï¼Œæœ‰é”™è¯¯æç¤ºï¼Œç„¶ååˆæŠŠè‡ªåŠ¨APIå–æ¶ˆå‹¾é€‰äº†ã€‚Graphics APIå˜æˆäº†WebGL2.0ã€‚æ²¡ç”¨</p><p>popupå’ŒæŒ‰é’®ä¸­çš„ä¸­æ–‡éƒ½æ²¡æœ‰äº†ï¼Œéš¾é“æ˜¯å­—ä½“çš„é—®é¢˜ï¼Ÿ</p><p>æ”¹äº†å­—ä½“ï¼Œé‡æ–°ç”Ÿæˆï¼Œå¯ä»¥æ˜¾ç¤º</p><p>ä½†æ˜¯ï¼Œæ¯æ¬¡ç¬¬ä¸€æ¬¡æ‰“å¼€æ€»æ˜¯æ²¡æœ‰ï¼Ÿè¦å…ˆç‚¹è¿‡ä¸€æ¬¡å·¦æˆ–è€…å³ï¼Œåç»­æ‰æœ‰æ˜¾ç¤ºã€‚ä¹Ÿè®¸æ˜¯åŠ è½½é¡ºåºçš„é—®é¢˜ï¼Ÿ</p><p>è°ƒäº†å‡ æ¬¡é¡ºåºï¼Œè¿˜æ˜¯ä¸è¡Œ</p><p>ä¸ä»…æ˜¯æ–‡å­—æ˜¾ç¤ºï¼Œæœ‰æ—¶åˆšå¼€å§‹æ»šåŠ¨æ¡ä¹Ÿæ²¡æœ‰ï¼Œåé¢æ…¢æ…¢è§£å†³å§</p><p>MARK æœªè§£å†³çš„Bugï¼š</p><p>æ–°åŠ è½½åï¼Œç¬¬ä¸€æ¬¡ç‚¹æ›´å¤šï¼Œæ— æ–‡å­—</p><p>ç‚¹ä¸€æ¬¡å·¦/å³åï¼Œæœ‰æ–‡å­—ï¼Œä½†æ— æ³•æ˜¾ç¤ºæ»šåŠ¨æ¡</p><p>é‡æ–°ç‚¹å¼€æ›´å¤šï¼Œæœ‰æ»šåŠ¨æ¡</p><h1 id="å¯»è·¯è½¬å‘Debug"><a href="#å¯»è·¯è½¬å‘Debug" class="headerlink" title="å¯»è·¯è½¬å‘Debug"></a>å¯»è·¯è½¬å‘Debug</h1><p>æœ‰çš„æ—¶å€™å¯»è·¯åˆ°äº†ç»ˆç‚¹ä¸ä¼šè‡ªåŠ¨è½¬å‘</p><p>å‘ç°è®¾ç½®GuideStatusä¸ºReadyåï¼Œæœ‰æ—¶Agentçš„remainingDistanceä»æ˜¯0ï¼ˆä¹Ÿè®¸æ˜¯æœ‰å»¶è¿Ÿï¼‰ï¼Œäºæ˜¯å°±ç›´æ¥åˆ°äº†stopçŠ¶æ€</p><p>äºæ˜¯æ”¹æˆåœ¨Update()ä¸­ä¿®æ”¹çŠ¶æ€ï¼Œå½“å‰ä¸ºReadyä¸”remainingDistance!=0ï¼ŒçŠ¶æ€æ”¹ä¸ºOn</p><p>å½“å‰ä¸ºOnä¸”remainingDistance==0ï¼Œè®¾ç½®è½¬å‘ï¼ŒçŠ¶æ€æ”¹ä¸ºStatic</p><p>ä½†æ˜¯è¿™æ ·åˆå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå³åœ¨åŸåœ°ç‚¹å‡»å¯»è·¯ï¼ŒçŠ¶æ€æ— æ³•å˜æˆOn</p><p>äºæ˜¯åœ¨SetNewDestination()ä¸­å…ˆåšä¸€æ¬¡åˆ¤æ–­ï¼Œå¦‚æœå½“å‰ä½ç½®å·²ç»æ˜¯ç›®çš„ä½ç½®ï¼Œç›´æ¥å°†çŠ¶æ€è®¾ç½®æˆOn</p><p>ä¹‹å‰Readyå’ŒOnçŠ¶æ€æ˜¯ä¸ºäº†å¤„ç†é¼ æ ‡ç‚¹å‡»çš„ä¸€äº›é—®é¢˜ï¼Œç›®å‰å…³äºé¼ æ ‡ï¼š</p><ul><li>é€”ä¸­ OK</li><li>åŸåœ°ï¼ˆå·²ç»åˆ°è¾¾ï¼Œæµ‹è¯•è½¬å‘ï¼‰<ul><li>å¯¼èˆªæ  OK</li><li>å±•æ¿<ul><li>å¿«ç‚¹ã€è¢«æ‰“æ–­ã€‘</li><li>æ…¢ç‚¹ OK</li></ul></li></ul></li></ul><p>å°±å¾ˆè¿·æƒ‘ï¼Œå…ˆè¿™æ ·å§</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;æè¿°éƒ¨åˆ†&quot;&gt;&lt;a href=&quot;#æè¿°éƒ¨åˆ†&quot; class=&quot;headerlink&quot; title=&quot;æè¿°éƒ¨åˆ†&quot;&gt;&lt;/a&gt;æè¿°éƒ¨åˆ†&lt;/h1&gt;&lt;p&gt;ç»™å¯¼èˆªæ åŠ äº†ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»æ˜¾ç¤ºæè¿°&lt;/p&gt;
&lt;p&gt;ä»¥åŠä¸€ä¸ªæŸ¥çœ‹å¤§å›¾çš„æŒ‰é’®ï¼Œæ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢&lt;/p&gt;
&lt;h1 id=&quot;æŸ¥çœ‹å¤§å›¾&quot;
      
    
    </summary>
    
    
      <category term="Note" scheme="https://coconutnutx.github.io/categories/Note/"/>
    
    
      <category term="unity" scheme="https://coconutnutx.github.io/tags/unity/"/>
    
  </entry>
  
  <entry>
    <title>Unity Note - Project11 Wave2</title>
    <link href="https://coconutnutx.github.io/2021/03/08/unity/"/>
    <id>https://coconutnutx.github.io/2021/03/08/unity/</id>
    <published>2021-03-08T11:03:50.000Z</published>
    <updated>2021-03-08T11:03:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>æŒ‰ç…§ä¸Šæ¬¡çš„è®¾æƒ³ï¼š</p><ul><li><p>PerlinNoiseç”Ÿæˆæ³¢æµª</p><blockquote><p><a class="link"   href="https://docs.unity3d.com/cn/current/ScriptReference/Mathf.PerlinNoise.html" >https://docs.unity3d.com/cn/current/ScriptReference/Mathf.PerlinNoise.html<i class="fas fa-external-link-alt"></i></a></p></blockquote></li><li><p>ç”¨Meshç»˜åˆ¶</p></li><li><p>éšæ—¶é—´æ›´æ–°</p></li></ul><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Mar-08-2021 12-02-11.gif"                                     ><p>æ•ˆæœè¿˜ä¸é”™</p><p>åŠ äº†å‡ ä¸ªï¼Œè°ƒä¸‹å‚æ•°</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Mar-08-2021 12-35-32.gif"                                     ><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class WaveCreator : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [SerializeField] private int waveLength = 100; // length of wave</span><br><span class="line">    [SerializeField] private float segLen = 0.2f; // length of each segment</span><br><span class="line">    [SerializeField] private float samplingInterval = 20f;</span><br><span class="line">    [SerializeField] private float maxHeight = 10f;</span><br><span class="line"></span><br><span class="line">    [SerializeField] private string colorHex = &quot;#45b787&quot;;</span><br><span class="line">    [SerializeField] private float colorAlpha = 0.8f;</span><br><span class="line"></span><br><span class="line">    private Color waveColor;</span><br><span class="line">    private float seedX = 0;</span><br><span class="line">    private float seedY = 0;</span><br><span class="line">    </span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        // generate random seed</span><br><span class="line">        seedX = Random.value * 100f;</span><br><span class="line">        seedY = Random.value * 100f;</span><br><span class="line"></span><br><span class="line">        // set material</span><br><span class="line">        GetComponent&lt;MeshRenderer&gt;().material = InitMaterial();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void Update() &#123;</span><br><span class="line">        float[] arr = GenerateNoiseArray(waveLength);</span><br><span class="line">        DrawWave(arr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private float[] GenerateNoiseArray(int len)&#123;</span><br><span class="line">        // generate wave height array</span><br><span class="line">        float[] arr = new float[len];</span><br><span class="line">        for(int i=0; i&lt;arr.Length; i++)&#123;</span><br><span class="line">            float x = (i + seedX + Time.time) / samplingInterval;</span><br><span class="line">            float y = (i + seedY) / samplingInterval;</span><br><span class="line">            // noise between 0.0 and 1.0</span><br><span class="line">            arr[i] = Mathf.PerlinNoise(x, y) * maxHeight;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return arr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void DrawWave(float[] arr)&#123;</span><br><span class="line">        int n = arr.Length;</span><br><span class="line"></span><br><span class="line">        Vector3[] vertices = new Vector3[2*n];</span><br><span class="line">        List&lt;int&gt; triangleList = new List&lt;int&gt;();</span><br><span class="line"></span><br><span class="line">        // add vertices</span><br><span class="line">        for(int i=0; i&lt;n; i++)&#123;</span><br><span class="line">            vertices[2*i] = new Vector3(segLen*(i+1), 0, 0);</span><br><span class="line">            vertices[2*i + 1] = new Vector3(segLen*(i+1), arr[i], 0);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // add triangles</span><br><span class="line">        for(int i=0;i&lt;n-1;i++)&#123;</span><br><span class="line">            // clockwise order</span><br><span class="line">            triangleList.Add(2*i);</span><br><span class="line">            triangleList.Add(2*i + 1);</span><br><span class="line">            triangleList.Add(2*i + 2);</span><br><span class="line"></span><br><span class="line">            triangleList.Add(2*i + 2);</span><br><span class="line">            triangleList.Add(2*i + 1);</span><br><span class="line">            triangleList.Add(2*i + 3);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        int[] triangles = triangleList.ToArray();</span><br><span class="line"></span><br><span class="line">        // get mesh</span><br><span class="line">        Mesh mesh = GetComponent&lt;MeshFilter&gt;().mesh;</span><br><span class="line"></span><br><span class="line">        // clear original mesh</span><br><span class="line">        mesh.Clear();</span><br><span class="line"></span><br><span class="line">        // set new vertices</span><br><span class="line">        mesh.vertices = vertices;</span><br><span class="line"></span><br><span class="line">        // set new triangles</span><br><span class="line">        mesh.triangles = triangles;</span><br><span class="line"></span><br><span class="line">        // calculate mesh</span><br><span class="line">        mesh.RecalculateNormals();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private Material InitMaterial()&#123;</span><br><span class="line">        Material material = new Material(Shader.Find(&quot;Standard&quot;));</span><br><span class="line"></span><br><span class="line">        // set rendering mode</span><br><span class="line">        SetFade(material);</span><br><span class="line"></span><br><span class="line">        // set color</span><br><span class="line">        ColorUtility.TryParseHtmlString(colorHex, out waveColor);</span><br><span class="line">        waveColor.a = colorAlpha;</span><br><span class="line">        material.SetColor(&quot;_Color&quot;, waveColor);</span><br><span class="line"></span><br><span class="line">        return material;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void SetFade(Material material)&#123;</span><br><span class="line">        // set rendering mode to fade to show alpha</span><br><span class="line">        material.SetInt(&quot;_SrcBlend&quot;, (int)UnityEngine.Rendering.BlendMode.SrcAlpha);</span><br><span class="line">        material.SetInt(&quot;_DstBlend&quot;, (int)UnityEngine.Rendering.BlendMode.OneMinusSrcAlpha);</span><br><span class="line">        material.SetInt(&quot;_ZWrite&quot;, 0);</span><br><span class="line">        material.DisableKeyword(&quot;_ALPHATEST_ON&quot;);</span><br><span class="line">        material.EnableKeyword(&quot;_ALPHABLEND_ON&quot;);</span><br><span class="line">        material.DisableKeyword(&quot;_ALPHAPREMULTIPLY_ON&quot;);</span><br><span class="line">        material.renderQueue = 3000;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æŒ‰ç…§ä¸Šæ¬¡çš„è®¾æƒ³ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;PerlinNoiseç”Ÿæˆæ³¢æµª&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a class=&quot;link&quot;   href=&quot;https://docs.unity3d.com/cn/current/ScriptReference/
      
    
    </summary>
    
    
      <category term="Note" scheme="https://coconutnutx.github.io/categories/Note/"/>
    
    
      <category term="unity" scheme="https://coconutnutx.github.io/tags/unity/"/>
    
  </entry>
  
  <entry>
    <title>Unity Note - Project10 Wave</title>
    <link href="https://coconutnutx.github.io/2021/02/21/unity/"/>
    <id>https://coconutnutx.github.io/2021/02/21/unity/</id>
    <published>2021-02-21T13:49:27.000Z</published>
    <updated>2021-02-21T13:49:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>å°è¯•åšä¸ªæ³¢æµªåŠ¨ç”»ï¼Œæœ€åæ•ˆæœï¼š</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Feb-21-2021 15-51-45.gif"                                     ><hr><p>stripåšæˆPrefab</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using DG.Tweening;</span><br><span class="line"></span><br><span class="line">public class Strip : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public void Activate(float waitSecond, float moveDistance, float moveDuration)</span><br><span class="line">    &#123;</span><br><span class="line">        StartCoroutine(ActivateMovement(waitSecond, moveDistance, moveDuration));</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private IEnumerator ActivateMovement(float waitSecond, float moveDistance, float moveDuration)</span><br><span class="line">    &#123;</span><br><span class="line">        // wait for some time</span><br><span class="line">        yield return new WaitForSeconds(waitSecond);</span><br><span class="line">        </span><br><span class="line">        // set movement</span><br><span class="line">        DOTween.Sequence()</span><br><span class="line">            .Append(transform.DOMoveY(moveDistance, moveDuration).SetEase(Ease.InOutSine))</span><br><span class="line">            .SetLoops(-1,LoopType.Yoyo);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŠ ä¸€ä¸ªcontroller</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class StripController : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    // object setting</span><br><span class="line">    [SerializeField] private int stripNum = 10;</span><br><span class="line">    [SerializeField] private Vector3 stripScale = new Vector3(0.2f,5,0.01f);</span><br><span class="line">    [SerializeField] private Vector3 stripInterval = new Vector3(0.25f,0,0);</span><br><span class="line"></span><br><span class="line">    // movement setting</span><br><span class="line">    [SerializeField] private float moveDistance = 2f;</span><br><span class="line">    [SerializeField] private float moveDuration = 2f;</span><br><span class="line">    [SerializeField] private float moveInterval = 0.1f;</span><br><span class="line"></span><br><span class="line">    private Strip stripPrefab;</span><br><span class="line">    private Strip[] strips;</span><br><span class="line">    </span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        stripPrefab = Resources.Load&lt;Strip&gt;(&quot;strip&quot;);</span><br><span class="line">        CreateStrips();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void CreateStrips()</span><br><span class="line">    &#123;</span><br><span class="line">        strips = new Strip[stripNum];</span><br><span class="line">        for(int i=0; i&lt;stripNum; i++)&#123;</span><br><span class="line">            // create cube</span><br><span class="line">            Strip obj = Instantiate(stripPrefab);</span><br><span class="line">            // set position</span><br><span class="line">            obj.transform.position = transform.position + stripInterval * i;</span><br><span class="line">            obj.transform.localScale = stripScale;</span><br><span class="line">            // activate movement</span><br><span class="line">            obj.Activate(moveInterval*(i+5), moveDistance, moveDuration);</span><br><span class="line">            // add to array</span><br><span class="line">            strips[i] = obj;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¥‡æ€ªçš„ä¸€ç‚¹ï¼Œå‰å‡ ä¸ªæ¡çš„èµ·å§‹æ—¶é—´æ€»æ˜¯æœ‰ç‚¹é—®é¢˜ï¼Œæš‚æ—¶æ‰¾ä¸å‡ºæ¥ä¸ºä»€ä¹ˆï¼Œå…ˆæŠŠæ‰€æœ‰èµ·å§‹æ—¶é—´å¾€åæŒªä¸€ç‚¹ MARK</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-02-21 PM3.21.01.jpg"                                     ><p>è¿™æ ·å°±æ²¡é—®é¢˜äº†</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-02-21 PM3.23.48.jpg"                                     ><hr><p>å…³äºWaitForSeconds()</p><blockquote><p><a class="link"   href="https://forum.unity.com/threads/waitforseconds-in-c.75411/" >https://forum.unity.com/threads/waitforseconds-in-c.75411/<i class="fas fa-external-link-alt"></i></a></p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">private void executeWait()</span><br><span class="line">&#123;</span><br><span class="line">  Debug.Log(&quot;wait start&quot;);</span><br><span class="line">  StartCoroutine(Wait(20.0f));</span><br><span class="line">  Debug.Log(&quot;This gets called after starting the Coroutine&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private IEnumerator Wait(float seconds)</span><br><span class="line">&#123;</span><br><span class="line">  Debug.Log(&quot;waiting&quot;);</span><br><span class="line">  yield return new WaitForSeconds(seconds);</span><br><span class="line">  Debug.Log(&quot;wait end&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>ç°åœ¨è¿™ä¸ªæ³¢æµªæ•ˆæœä¸€ä¸ªé—®é¢˜æ˜¯DOTWeenæ¶ˆè€—å¤ªå¤§</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-02-21 PM3.56.56.jpg"                                     ><p>ä¹Ÿè®¸è¿˜æ˜¯ç›´æ¥ç”¨æ³¢æµªå½¢ç‰©ä½“å¹³ç§»ï¼Ÿ</p><hr><p>ä¸€ä¸ªå¾ˆå–œæ¬¢çš„chromeæ’ä»¶å‡ ææ˜¯ç”¨noiseåšçš„æ³¢æµªï¼Œè¯•ä¸€ä¸‹Mathf.PerlinNoise()</p><p>å‚è€ƒï¼š</p><blockquote><p><a class="link"   href="https://blog.csdn.net/FumikiSAMA/article/details/80212432" >https://blog.csdn.net/FumikiSAMA/article/details/80212432<i class="fas fa-external-link-alt"></i></a></p><p><a class="link"   href="https://docs.unity3d.com/ScriptReference/Mathf.PerlinNoise.html" >https://docs.unity3d.com/ScriptReference/Mathf.PerlinNoise.html<i class="fas fa-external-link-alt"></i></a></p></blockquote><p>ç½‘æ ¼æ‹“æ‰‘ç»˜åˆ¶å›¾å½¢</p><blockquote><p><a class="link"   href="https://www.jianshu.com/p/1f79e33308a6" >https://www.jianshu.com/p/1f79e33308a6<i class="fas fa-external-link-alt"></i></a></p></blockquote><p>è¯•ç€ç”»äº†ä¸€ä¸ªå››é¢ä½“</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-02-21 PM5.09.05.jpg"                                     ><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Vector3[] vertices = new Vector3[4];</span><br><span class="line">vertices[0] = new Vector3(0, 0, 0);</span><br><span class="line">vertices[1] = new Vector3((float)System.Math.Sqrt(3), 1, 0);</span><br><span class="line">vertices[2] = new Vector3(0, 2, 0);</span><br><span class="line">vertices[3] = new Vector3((float)System.Math.Sqrt(1/3), 1, (float)System.Math.Sqrt(8/3));</span><br><span class="line"></span><br><span class="line">int[] triangle = new int[12] &#123;0,2,1,0,1,3,1,2,3,2,0,3&#125;;</span><br><span class="line"></span><br><span class="line">// get mesh</span><br><span class="line">Mesh mesh = GetComponent&lt;MeshFilter&gt;().mesh;</span><br><span class="line"></span><br><span class="line">// clear original mesh</span><br><span class="line">mesh.Clear();</span><br><span class="line"></span><br><span class="line">// set new vertices</span><br><span class="line">mesh.vertices = vertices;</span><br><span class="line"></span><br><span class="line">// set new triangles</span><br><span class="line">mesh.triangles = triangle;</span><br><span class="line"></span><br><span class="line">// calculate mesh</span><br><span class="line">mesh.RecalculateNormals();</span><br></pre></td></tr></table></figure><p>ä¸‹æ¬¡ç”¨è¿™ä¸ªç”»æ³¢æµªè¯•è¯•</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å°è¯•åšä¸ªæ³¢æµªåŠ¨ç”»ï¼Œæœ€åæ•ˆæœï¼š&lt;/p&gt;
&lt;img  
                     lazyload
                     src=&quot;/images/loading.svg&quot;
                     data-src=&quot;/im
      
    
    </summary>
    
    
      <category term="Note" scheme="https://coconutnutx.github.io/categories/Note/"/>
    
    
      <category term="unity" scheme="https://coconutnutx.github.io/tags/unity/"/>
    
  </entry>
  
  <entry>
    <title>Project V0.1.1 Record - UI,Event</title>
    <link href="https://coconutnutx.github.io/2021/02/17/unity/"/>
    <id>https://coconutnutx.github.io/2021/02/17/unity/</id>
    <published>2021-02-17T14:59:43.000Z</published>
    <updated>2021-02-17T14:59:43.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Canvaså¤§å°"><a href="#Canvaså¤§å°" class="headerlink" title="Canvaså¤§å°"></a>Canvaså¤§å°</h1><blockquote><p><a class="link"   href="https://www.youtube.com/watch?v=OKK69bmjmJE&amp;ab_channel=Creagines" >https://www.youtube.com/watch?v=OKK69bmjmJE&amp;ab_channel=Creagines<i class="fas fa-external-link-alt"></i></a></p></blockquote><p>Canvas Scaler-&gt; ç¼©æ”¾æ¨¡å¼ -&gt; å±å¹•å¤§å°ç¼©æ”¾</p><p>è§£å†³äº†ä¸Šæ¬¡æ–‡å­—é£æ‰çš„é—®é¢˜</p><p>å¯ä»¥ä¸‹ä¸€æ­¥å•¦</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-02-17 PM5.26.42.jpg"                                     ><h1 id="ç‚¹å‡»æŒ‰é’®"><a href="#ç‚¹å‡»æŒ‰é’®" class="headerlink" title="ç‚¹å‡»æŒ‰é’®"></a>ç‚¹å‡»æŒ‰é’®</h1><blockquote><p><a class="link"   href="https://www.cnblogs.com/Peng18233754457/p/7792442.html" >https://www.cnblogs.com/Peng18233754457/p/7792442.html<i class="fas fa-external-link-alt"></i></a></p></blockquote><p>ä¸€å¼€å§‹äº‹ä»¶ç”¨çš„æ˜¯Buttonçš„onClick()</p><p>å‘ç°Event Systemæ›´å¥½ç”¨</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-02-17 PM8.10.25.jpg"                                     ><ul><li>Buttonä¸Šé¼ æ ‡å•å‡»()é‡Œ+ ï¼ˆå…¶å®ƒäº‹ä»¶å¯ä»¥æ·»åŠ ç»„ä»¶è§¦å‘ï¼‰</li><li>EventTest.csä¸­ public void A()</li></ul><p>Buttonè¿™æ ·å°±å¯ä»¥äº†</p><p>3Dç‰©ä½“è¦ä½¿ç”¨ï¼Œè¿˜è¦å…ˆç»™Main CameraåŠ ä¸€ä¸ªPhysics Raycasterç»„ä»¶</p><h1 id="ç‚¹å‡»å¯»è·¯"><a href="#ç‚¹å‡»å¯»è·¯" class="headerlink" title="ç‚¹å‡»å¯»è·¯"></a>ç‚¹å‡»å¯»è·¯</h1><p>Playerç›‘å¬ç‚¹å‡»å®ç°ï¼Œæ›´æ”¹å¯»è·¯</p><blockquote><p><a class="link"   href="https://www.youtube.com/watch?v=wlo-ZvV3ovg&amp;ab_channel=JasonWeimann" >https://www.youtube.com/watch?v=wlo-ZvV3ovg&amp;ab_channel=JasonWeimann<i class="fas fa-external-link-alt"></i></a></p></blockquote><p>å‚è€ƒâ†‘é€šè¿‡Actionå®ç°ï¼Œé¿å…åˆ°å¤„reference</p><h1 id="å¯»è·¯è½¬å‘"><a href="#å¯»è·¯è½¬å‘" class="headerlink" title="å¯»è·¯è½¬å‘"></a>å¯»è·¯è½¬å‘</h1><p>å¯»è·¯å®Œæˆåè½¬å‘board</p><p>è®¾ç½®äº†ä¸€ä¸ªisNavigatingå˜é‡ï¼Œè®°å½•çŠ¶æ€</p><p>åˆ°è¾¾åç”¨DOTWeenè½¬å‘</p><h1 id="å¯»è·¯æ‰“æ–­"><a href="#å¯»è·¯æ‰“æ–­" class="headerlink" title="å¯»è·¯æ‰“æ–­"></a>å¯»è·¯æ‰“æ–­</h1><p>æ¯æ¬¡æœ‰è¾“å…¥æ—¶ï¼Œæ‰“æ–­å¯»è·¯ï¼ŒåŒæ—¶å°†è®¾ç½®æˆfalse</p><p>ä¸€ä¸ªå°é—®é¢˜æ˜¯ï¼Œç¬¬ä¸€æ¬¡ç‚¹å‡»boardæ—¶å°†isNavigatingè®¾æˆtrueï¼Œä½†åŒæ—¶Input.GetMouseButtonUp(0)ä¹Ÿä¼šä¸ºtrueï¼Œæ‰€ä»¥é¢å¤–ç”¨äº†ä¸€ä¸ªfirstClickåˆ¤æ–­æ˜¯å¦ä¸ºç¬¬ä¸€æ¬¡ç‚¹å‡»</p><p>æœ€åç›¸å…³ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">private bool isNavigating = false;</span><br><span class="line">private bool firstClick = true;</span><br><span class="line">private Vector3 turnPosition;</span><br><span class="line"></span><br><span class="line">void Update()</span><br><span class="line">&#123;</span><br><span class="line">  if(Input.GetMouseButtonUp(0))&#123;</span><br><span class="line">    if(isNavigating)&#123;</span><br><span class="line">      if(firstClick)&#123;</span><br><span class="line">        firstClick = false;</span><br><span class="line">      &#125;else&#123;</span><br><span class="line">        isNavigating = false;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      firstClick = true; </span><br><span class="line">      // è¿™é‡Œå¯èƒ½æœ‰ç‚¹ç‚¹é—®é¢˜ï¼ŒisNavigatingè®¾æˆfalseä¹‹åï¼Œè¦ä¸‹ä¸€æ¬¡Updateæ‰èƒ½æ£€æµ‹åˆ°ï¼Œä½†æ˜¯Updateè°ƒå¾—å¾ˆå¿«ï¼ŒåŸºæœ¬æ„Ÿè§‰ä¸åˆ°ï¼Œæ‰€ä»¥æš‚æ—¶å°±è¿™æ ·å†™äº†ï¼Œçœ‹ç€èˆ’æœäº›ã€‚ä½†MARKä¸€ä¸‹ï¼Œä»¥åå¦‚æœæœ‰é—®é¢˜ï¼Œå†æŠŠè¿™é‡Œæ‹†å‡ºå»å•ç‹¬åˆ¤æ–­ã€‚</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">// ...</span><br><span class="line"></span><br><span class="line">  &#125;else if(Input.GetMouseButton(0))&#123;</span><br><span class="line">    isNavigating = false;</span><br><span class="line"></span><br><span class="line">   // ...</span><br><span class="line"></span><br><span class="line">  &#125;else if(Input.GetAxis(&quot;Mouse ScrollWheel&quot;)!=0 || Input.GetAxis(&quot;Horizontal&quot;)!=0 || Input.GetAxis(&quot;Vertical&quot;)!=0)&#123;</span><br><span class="line">    isNavigating = false;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private void SetNewDestination(Vector3 destination, Vector3 boardPosition) &#123;</span><br><span class="line">  // set new destination</span><br><span class="line">  agent.SetDestination(destination);</span><br><span class="line"></span><br><span class="line">  // set turn destination</span><br><span class="line">  turnPosition = boardPosition;</span><br><span class="line">  isNavigating = true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="02-19-update"><a href="#02-19-update" class="headerlink" title="02.19 update"></a>02.19 update</h2><p>åç»­åšå¯¼æ¸¸æ—¶å‘ç°ï¼Œç‚¹å‡»UIå¯»è·¯æŒ‰é’®æ—¶ï¼Œäº‹ä»¶å‘ç”Ÿçš„é¡ºåºæ˜¯ï¼š</p><ul><li>GetMouseButton</li><li>Set Destination</li><li>GetMouseButtonUp</li></ul><p>è€Œå†æ¬¡GetMouseButtonå’ŒGetMouseButtonUpéƒ½éœ€è¦æ‰“æ–­ï¼Œç”¨ä¹‹å‰çš„æ–¹æ³•å¾ˆæ··ä¹±</p><p>äºæ˜¯æ”¹æˆä¸‰ç§çŠ¶æ€ï¼Œåªèƒ½æŒ‰é¡ºåºåˆ‡æ¢</p><ol><li><p>GuideStatus.Static é»˜è®¤çŠ¶æ€</p></li><li><p>GuideStatus.Ready è®¾ç½®å¯»è·¯åï¼ŒStatic-&gt;Ready</p></li><li><p>GuideStatus.On</p><ul><li>ReadyçŠ¶æ€è·å–åˆ°ä¸€æ¬¡GetMouseButtonUpï¼Œå˜æˆOn</li><li>OnçŠ¶æ€æ—¶ï¼ŒGetMouseButtonæˆ–GetMouseButtonUpå‡ä¼šæ‰“æ–­å¯»è·¯ï¼Œå˜æˆStatic</li><li>OnçŠ¶æ€åˆ°è¾¾ç›®çš„åœ°åï¼Œå˜æˆStatic</li></ul></li></ol><p>æµ‹è¯•ç›®å‰æ²¡ä»€ä¹ˆé—®é¢˜</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">private Vector3 turnPosition;</span><br><span class="line">private GuideStatus currentGuideStatus = GuideStatus.Static;</span><br><span class="line">private enum GuideStatus</span><br><span class="line">&#123;</span><br><span class="line">  Static,</span><br><span class="line">  Ready,</span><br><span class="line">  On</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Update()</span><br><span class="line">&#123;</span><br><span class="line">  if(Input.GetMouseButtonUp(0))&#123;</span><br><span class="line">    // if is click</span><br><span class="line">    if(mouseDownCount &lt; 2)&#123;</span><br><span class="line">      if(currentGuideStatus == GuideStatus.Ready)&#123;</span><br><span class="line">        currentGuideStatus = GuideStatus.On;</span><br><span class="line">      &#125;else if(currentGuideStatus == GuideStatus.On)&#123;</span><br><span class="line">        currentGuideStatus = GuideStatus.Static;</span><br><span class="line">        Debug.Log(&quot;[guide] disrupted by GetMouseButtonUp-Click&quot;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // ...</span><br><span class="line">    mouseDownCount = 0;</span><br><span class="line"></span><br><span class="line">  &#125;else if(Input.GetMouseButton(0))&#123;</span><br><span class="line">    if(currentGuideStatus==GuideStatus.On)&#123;</span><br><span class="line">      currentGuideStatus = GuideStatus.Static;</span><br><span class="line">      Debug.Log(&quot;[guide] disrupted by GetMouseButton&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line"></span><br><span class="line">    mouseDownCount++;</span><br><span class="line"></span><br><span class="line">  &#125;else if(Input.GetAxis(&quot;Mouse ScrollWheel&quot;)!=0 || Input.GetAxis(&quot;Horizontal&quot;)!=0 || Input.GetAxis(&quot;Vertical&quot;)!=0)&#123;</span><br><span class="line">      if(currentGuideStatus==GuideStatus.On)&#123;</span><br><span class="line">        currentGuideStatus = GuideStatus.Static;</span><br><span class="line">        Debug.Log(&quot;[guide] disrupted by Movement&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      // ...</span><br><span class="line">    </span><br><span class="line">  &#125;else&#123;</span><br><span class="line">    if(currentGuideStatus==GuideStatus.On &amp;&amp; agent.remainingDistance==0)&#123;</span><br><span class="line">      Debug.Log(&quot;[guide] look at &quot;+turnPosition);</span><br><span class="line">      transform.DOLookAt(turnPosition,turnDuration,AxisConstraint.Y);</span><br><span class="line">      currentGuideStatus = GuideStatus.Static;</span><br><span class="line">      Debug.Log(&quot;[guide] end&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private void SetNewDestination(Vector3 destination, Vector3 destination2) &#123;</span><br><span class="line">  Debug.Log(&quot;[guide] start&quot;);</span><br><span class="line">  currentGuideStatus = GuideStatus.Ready;</span><br><span class="line"></span><br><span class="line">  // set new destination</span><br><span class="line">  agent.SetDestination(destination);</span><br><span class="line"></span><br><span class="line">  // set turn destination</span><br><span class="line">  turnPosition = destination2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="UIé®ç›–Raycast"><a href="#UIé®ç›–Raycast" class="headerlink" title="UIé®ç›–Raycast"></a>UIé®ç›–Raycast</h1><p>åŠ å®Œå¯¼èˆªå¯»è·¯çš„UIä¹‹åï¼Œå‘ç°raycastä»å¯ä»¥ç©¿é€UIï¼ŒåŒæ—¶ç‚¹å‡»å¯»è·¯</p><p>çœ‹åˆ°ä¸€ç§è§£å†³æ˜¯ç”¨EventSystem.current.IsPointerOverGameObject()</p><p>ä½†æ˜¯Canvasæ˜¯å…¨å±å¤§å°ï¼Œç‚¹å‡»å“ªé‡Œéƒ½æ˜¯true</p><p>Canvas Groupä¹Ÿæ²¡æœ‰ç”¨</p><blockquote><p><a class="link"   href="https://stackoverflow.com/questions/52654002/unity-not-ignoring-button-click-in-ignore-raycast-layer" >https://stackoverflow.com/questions/52654002/unity-not-ignoring-button-click-in-ignore-raycast-layer<i class="fas fa-external-link-alt"></i></a></p></blockquote><p>æœ€åå‚è€ƒè¿™ä¸ª</p><blockquote><p><a class="link"   href="https://gameinstitute.qq.com/community/detail/129017" >https://gameinstitute.qq.com/community/detail/129017<i class="fas fa-external-link-alt"></i></a></p></blockquote><p>ç»™æ‰€æœ‰çš„ButtonåŠ äº†tagæ¥åˆ¤æ–­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">private bool IsPointerOverUIObject()&#123;</span><br><span class="line">    // get mouse position</span><br><span class="line">    PointerEventData eventDataCurrentPosition = new PointerEventData(EventSystem.current);</span><br><span class="line">    eventDataCurrentPosition.position = new Vector2(Input.mousePosition.x, Input.mousePosition.y);</span><br><span class="line"></span><br><span class="line">    // get all raycast result</span><br><span class="line">    List&lt;RaycastResult&gt; results = new List&lt;RaycastResult&gt;();</span><br><span class="line">    EventSystem.current.RaycastAll(eventDataCurrentPosition, results);</span><br><span class="line">    </span><br><span class="line">    // check UI tag</span><br><span class="line">    foreach(RaycastResult r in results)&#123;</span><br><span class="line">        if(r.gameObject.tag == &quot;UI&quot;)&#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è„šæœ¬æ‰§è¡Œé¡ºåºé—®é¢˜"><a href="#è„šæœ¬æ‰§è¡Œé¡ºåºé—®é¢˜" class="headerlink" title="è„šæœ¬æ‰§è¡Œé¡ºåºé—®é¢˜"></a>è„šæœ¬æ‰§è¡Œé¡ºåºé—®é¢˜</h1><p>åšäº†å¯¼èˆªæ ä¹‹åï¼Œå‘ç°åˆå§‹åŒ–é¡ºåºæœ‰ç‚¹é—®é¢˜</p><p>å¯¼èˆªæ è¦ä½¿ç”¨Boardä¸Šçš„æ•°å­—å’Œåå­—ï¼Œæœ‰æ—¶ä¼šä¸ºé»˜è®¤å€¼</p><p>é€‰ä¸­ä»»æ„ä¸€ä¸ªscriptï¼Œè°ƒæ•´Inspector-&gt;Execution Orderï¼Œè§£å†³</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Canvaså¤§å°&quot;&gt;&lt;a href=&quot;#Canvaså¤§å°&quot; class=&quot;headerlink&quot; title=&quot;Canvaså¤§å°&quot;&gt;&lt;/a&gt;Canvaså¤§å°&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;a class=&quot;link&quot;   href=&quot;https://w
      
    
    </summary>
    
    
      <category term="Note" scheme="https://coconutnutx.github.io/categories/Note/"/>
    
    
      <category term="unity" scheme="https://coconutnutx.github.io/tags/unity/"/>
    
  </entry>
  
  <entry>
    <title>Project V0.1 Record</title>
    <link href="https://coconutnutx.github.io/2021/02/16/unity/"/>
    <id>https://coconutnutx.github.io/2021/02/16/unity/</id>
    <published>2021-02-16T17:24:56.000Z</published>
    <updated>2021-02-16T17:24:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>åšäº†ä¸ªåˆç‰ˆè¯•è¯•æ°´~ğŸ˜ƒ</p><h1 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h1><h2 id="ç‚¹å‡»å¯»è·¯"><a href="#ç‚¹å‡»å¯»è·¯" class="headerlink" title="ç‚¹å‡»å¯»è·¯"></a>ç‚¹å‡»å¯»è·¯</h2><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Feb-16-2021 18-29-31.gif"                                     ><h2 id="é è¿‘æ˜¾ç¤ºä»‹ç»"><a href="#é è¿‘æ˜¾ç¤ºä»‹ç»" class="headerlink" title="é è¿‘æ˜¾ç¤ºä»‹ç»"></a>é è¿‘æ˜¾ç¤ºä»‹ç»</h2><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Feb-16-2021 18-29-44.gif"                                     ><h2 id="é¼ æ ‡æ»šåŠ¨å‰åå¹³ç§»"><a href="#é¼ æ ‡æ»šåŠ¨å‰åå¹³ç§»" class="headerlink" title="é¼ æ ‡æ»šåŠ¨å‰åå¹³ç§»"></a>é¼ æ ‡æ»šåŠ¨å‰åå¹³ç§»</h2><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Feb-16-2021 18-30-18.gif"                                     ><h2 id="é”®ç›˜å‰åå·¦å³å¹³ç§»"><a href="#é”®ç›˜å‰åå·¦å³å¹³ç§»" class="headerlink" title="é”®ç›˜å‰åå·¦å³å¹³ç§»"></a>é”®ç›˜å‰åå·¦å³å¹³ç§»</h2><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Feb-16-2021 18-30-32.gif"                                     ><h2 id="é¼ æ ‡æ‹–æ‹½æ—‹è½¬è§†è§’"><a href="#é¼ æ ‡æ‹–æ‹½æ—‹è½¬è§†è§’" class="headerlink" title="é¼ æ ‡æ‹–æ‹½æ—‹è½¬è§†è§’"></a>é¼ æ ‡æ‹–æ‹½æ—‹è½¬è§†è§’</h2><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Feb-16-2021 18-30-55.gif"                                     ><h1 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h1><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-02-16 PM6.27.11.jpg"                                     ><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><h2 id="PlayerController"><a href="#PlayerController" class="headerlink" title="PlayerController"></a>PlayerController</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerController : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [SerializeField, Range(0f,500f)]</span><br><span class="line">    private float mouseLookSensitivity = 200f;</span><br><span class="line"></span><br><span class="line">    [SerializeField, Range(0f,100f)]</span><br><span class="line">    private float mouseMoveSensitivity = 10f;</span><br><span class="line"></span><br><span class="line">    [SerializeField, Range(0f,10f)]</span><br><span class="line">    private float keyMoveSensitivity = 5f;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Transform cameraTransform = null;</span><br><span class="line"></span><br><span class="line">    private float cameraRotation = 0f;</span><br><span class="line">    private int mouseDownCount = 0;</span><br><span class="line"></span><br><span class="line">    UnityEngine.AI.NavMeshAgent agent;</span><br><span class="line"></span><br><span class="line">    GameObject clickEffect;</span><br><span class="line"></span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        agent = GetComponent&lt;UnityEngine.AI.NavMeshAgent&gt;();</span><br><span class="line"></span><br><span class="line">        clickEffect = Resources.Load&lt;GameObject&gt;(&quot;Prefabs/ClickEffect&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if(Input.GetMouseButtonUp(0))&#123;</span><br><span class="line">            // if is click</span><br><span class="line">            if(mouseDownCount &lt; 2)&#123;</span><br><span class="line">                // click to navigate</span><br><span class="line">                RaycastHit hit;</span><br><span class="line">                Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">                if(Physics.Raycast(ray, out hit, Mathf.Infinity))&#123;</span><br><span class="line">                    // move when hit floor</span><br><span class="line">                    if(hit.transform.tag == &quot;Floor&quot;)&#123;</span><br><span class="line">                        agent.SetDestination(hit.point);</span><br><span class="line"></span><br><span class="line">                        // click effect</span><br><span class="line">                        GameObject clickEffectObject = Instantiate(clickEffect);</span><br><span class="line">                        clickEffectObject.transform.position = hit.point;</span><br><span class="line">                        Destroy(clickEffectObject, 1);</span><br><span class="line">                    &#125; </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            mouseDownCount = 0;</span><br><span class="line"></span><br><span class="line">        &#125;else if(Input.GetMouseButton(0))&#123;</span><br><span class="line">            // stop navigation</span><br><span class="line">            agent.ResetPath();</span><br><span class="line"></span><br><span class="line">            // get mouse position</span><br><span class="line">            float mouseX = Input.GetAxis(&quot;Mouse X&quot;) * mouseLookSensitivity * Time.deltaTime;</span><br><span class="line">            float mouseY = Input.GetAxis(&quot;Mouse Y&quot;) * mouseLookSensitivity * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">            // rotate camera up and down</span><br><span class="line">            cameraRotation -= mouseY;</span><br><span class="line">            cameraRotation = Mathf.Clamp(cameraRotation, -30f, 30f);</span><br><span class="line">            cameraTransform.localRotation = Quaternion.Euler(cameraRotation, 0f, 0f);</span><br><span class="line"></span><br><span class="line">            // rotate player left and right</span><br><span class="line">            transform.Rotate(Vector3.up * (mouseX));</span><br><span class="line"></span><br><span class="line">            mouseDownCount++;</span><br><span class="line"></span><br><span class="line">        &#125;else if(Input.GetAxis(&quot;Mouse ScrollWheel&quot;)!=0 || Input.GetAxis(&quot;Horizontal&quot;)!=0 || Input.GetAxis(&quot;Vertical&quot;)!=0)&#123;</span><br><span class="line">            // stop navigation</span><br><span class="line">            agent.ResetPath();</span><br><span class="line"></span><br><span class="line">            // mouse scroll input</span><br><span class="line">            float mouseV = Input.GetAxis(&quot;Mouse ScrollWheel&quot;);</span><br><span class="line">            // keyborad input</span><br><span class="line">            float keyV = Input.GetAxis(&quot;Vertical&quot;);</span><br><span class="line">            float keyH = Input.GetAxis(&quot;Horizontal&quot;);</span><br><span class="line"></span><br><span class="line">            Vector3 move = transform.forward * (mouseV * mouseMoveSensitivity + keyV * keyMoveSensitivity)</span><br><span class="line">                        + transform.right * keyH * keyMoveSensitivity;</span><br><span class="line"></span><br><span class="line">            agent.Move(move * Time.deltaTime);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ArtTextController"><a href="#ArtTextController" class="headerlink" title="ArtTextController"></a>ArtTextController</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.UI;</span><br><span class="line"></span><br><span class="line">public class ArtTextController : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [SerializeField]</span><br><span class="line">    private string title;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private string description;</span><br><span class="line"></span><br><span class="line">    [SerializeField, Range(0f,10f)]</span><br><span class="line">    private float displayTextDistance = 5f;</span><br><span class="line"></span><br><span class="line">    private Transform playerTransform;</span><br><span class="line"></span><br><span class="line">    private Text displayArtTitle;</span><br><span class="line">    private Text displayArtDescription;</span><br><span class="line"></span><br><span class="line">    private float dist;</span><br><span class="line"></span><br><span class="line">    private bool check;</span><br><span class="line"></span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        // get player transform</span><br><span class="line">        playerTransform = GameObject.FindWithTag(&quot;Player&quot;).GetComponent&lt;Transform&gt;();</span><br><span class="line"></span><br><span class="line">        // get UI text</span><br><span class="line">        displayArtTitle = GameObject.FindWithTag(&quot;ArtTitle&quot;).GetComponent&lt;Text&gt;();</span><br><span class="line">        displayArtDescription = GameObject.FindWithTag(&quot;ArtDescription&quot;).GetComponent&lt;Text&gt;();</span><br><span class="line"></span><br><span class="line">        // set default text</span><br><span class="line">        displayArtTitle.text = &quot;&quot;;</span><br><span class="line">        displayArtDescription.text = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">        check = false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if(playerTransform)</span><br><span class="line">        &#123;</span><br><span class="line">            // distance between art and player</span><br><span class="line">            dist = Vector3.Distance(transform.position, playerTransform.position);</span><br><span class="line">            if (dist &lt; displayTextDistance)</span><br><span class="line">            &#123;</span><br><span class="line">                displayArtTitle.text = title;</span><br><span class="line">                displayArtDescription.text = description;</span><br><span class="line">                check = true;</span><br><span class="line">            &#125;</span><br><span class="line">            // turn off display</span><br><span class="line">            if (dist &gt; displayTextDistance &amp;&amp; check == true)</span><br><span class="line">            &#123;</span><br><span class="line">                Start();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ„å»ºæµ‹è¯•"><a href="#æ„å»ºæµ‹è¯•" class="headerlink" title="æ„å»ºæµ‹è¯•"></a>æ„å»ºæµ‹è¯•</h1><p>MacOS æ²¡é—®é¢˜</p><p>Android è¯•äº†ä¸€ä¸‹ï¼Œåœºæ™¯æ²¡é—®é¢˜ï¼Œæ“ä½œæ··ä¹±</p><p>â€‹    å®‰å“å¯¼å‡ºå‚è€ƒ<a href="https://coconutnutx.github.io/2020/09/26/note-arfoundation-01/">AR Foundationç¬”è®°01 å®‰å“Setup</a></p><p>â€‹    ç›®å‰çš„æ“ä½œæ–¹å¼é’ˆå¯¹ç”µè„‘ï¼Œæ‰‹æœºç«¯ä»¥åå†çœ‹è¦ä¸è¦åš</p><p>WebGL æ•´äº†åŠå¤©</p><p>â€‹    å‚è€ƒ<a class="link"   href="https://www.youtube.com/watch?v=G7TK0-vbEYc&ab_channel=UGuruz" >WebGL Export in Unity 2020<i class="fas fa-external-link-alt"></i></a></p><p>â€‹    æˆåŠŸå‘å¸ƒåˆ°itch.ioï¼Œä½†æ˜¯é è¿‘æ˜¾ç¤ºä»‹ç»æ²¡æœ‰äº†ï¼Ÿ</p><p>â€‹    æœ¬åœ°Firefoxæ‰“å¼€ï¼Œä¹Ÿæ²¡æœ‰</p><h2 id="WebGL-Debug"><a href="#WebGL-Debug" class="headerlink" title="WebGL Debug"></a>WebGL Debug</h2><p>Unityé‡Œè·‘æ²¡é—®é¢˜</p><p>Debug.Logäººç‰©å’Œç”»çš„è·ç¦»ï¼Œå¯ä»¥æ˜¾ç¤ºï¼Œæ‰€ä»¥å¯èƒ½æ˜¯</p><p>â€‹    UIæ˜¾ç¤ºå‡ºäº†é—®é¢˜</p><p>â€‹    æ–‡å­—æ²¡æœ‰èµ‹å€¼æˆåŠŸ</p><p>â€‹    ä½ç½®åäº†</p><p>ç»™Textè®¾äº†é»˜è®¤å€¼ï¼Œå†è¯•</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-02-16 PM9.59.05.jpg"                                     ><p>é»˜è®¤å€¼æ˜¾ç¤ºäº†</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-02-16 PM9.59.12.jpg"                                     ><p>é è¿‘æ²¡æœ‰äº†</p><p>æ‰€ä»¥åº”è¯¥æ˜¯ä½ç½®ä¸å¯¹</p><p>ä¸è¿‡åé¢å‡†å¤‡æ”¹æ˜¾ç¤ºæ–¹æ³•ï¼Œæš‚æ—¶MARKï¼Œä»¥åæ”¾UIçš„æ—¶å€™ä¹Ÿæœ‰å¯èƒ½ç¢°åˆ°è¿™ä¸ªé—®é¢˜</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åšäº†ä¸ªåˆç‰ˆè¯•è¯•æ°´~ğŸ˜ƒ&lt;/p&gt;
&lt;h1 id=&quot;åŠŸèƒ½&quot;&gt;&lt;a href=&quot;#åŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;åŠŸèƒ½&quot;&gt;&lt;/a&gt;åŠŸèƒ½&lt;/h1&gt;&lt;h2 id=&quot;ç‚¹å‡»å¯»è·¯&quot;&gt;&lt;a href=&quot;#ç‚¹å‡»å¯»è·¯&quot; class=&quot;headerlink&quot; title
      
    
    </summary>
    
    
      <category term="Note" scheme="https://coconutnutx.github.io/categories/Note/"/>
    
    
      <category term="unity" scheme="https://coconutnutx.github.io/tags/unity/"/>
    
  </entry>
  
  <entry>
    <title>Unity Note - Project09 Movement</title>
    <link href="https://coconutnutx.github.io/2021/02/15/unity-09/"/>
    <id>https://coconutnutx.github.io/2021/02/15/unity-09/</id>
    <published>2021-02-15T19:17:07.000Z</published>
    <updated>2021-02-15T19:17:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€ç»ˆæƒ³è¦åšçš„ç§»åŠ¨æ–¹å¼ï¼š</p><ul><li>ç‚¹å‡»åœ°é¢å¯¼èˆª</li><li>æ‹–æ‹½æ—‹è½¬</li><li>ç¼©æ”¾å¹³ç§»</li><li>ç‚¹å‡»ç”»å¯¼èˆª</li></ul><p>äº¤äº’æ–¹å¼å‚è€ƒï¼š</p><blockquote><p><a class="link"   href="https://sketchfab.com/3d-models/richards-art-gallery-audio-tour-0e3e19faa6474fd5974e6a7ed1b221d8" >https://sketchfab.com/3d-models/richards-art-gallery-audio-tour-0e3e19faa6474fd5974e6a7ed1b221d8<i class="fas fa-external-link-alt"></i></a></p></blockquote><h1 id="æ­å»º"><a href="#æ­å»º" class="headerlink" title="æ­å»º"></a>æ­å»º</h1><h2 id="ç‚¹å‡»ç§»åŠ¨"><a href="#ç‚¹å‡»ç§»åŠ¨" class="headerlink" title="ç‚¹å‡»ç§»åŠ¨"></a>ç‚¹å‡»ç§»åŠ¨</h2><p>å‚è€ƒProject02ï¼ŒAIå¯¼èˆª+NavMeshAgent</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if(Input.GetMouseButtonDown(0))&#123;</span><br><span class="line">  RaycastHit hit;</span><br><span class="line">  Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">  if(Physics.Raycast(ray, out hit, Mathf.Infinity))&#123;</span><br><span class="line">    agent.SetDestination(hit.point);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ¤æ–­è½ç‚¹ï¼Œåªæœ‰æ˜¯åœ°é¢æ‰ç§»åŠ¨ï¼ˆåœ°é¢æ‰“Tagï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if(Input.GetMouseButtonDown(0))&#123;</span><br><span class="line">RaycastHit hit;</span><br><span class="line">Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">if(Physics.Raycast(ray, out hit, Mathf.Infinity))&#123;</span><br><span class="line">if(hit.transform.tag == &quot;Floor&quot;)&#123;</span><br><span class="line">agent.SetDestination(hit.point);</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç‚¹å‡»ç‰¹æ•ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// click to navigate</span><br><span class="line">if(Input.GetMouseButtonDown(0))&#123;</span><br><span class="line">    RaycastHit hit;</span><br><span class="line">    Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">    if(Physics.Raycast(ray, out hit, Mathf.Infinity))&#123;</span><br><span class="line">        // move when hit floor</span><br><span class="line">        if(hit.transform.tag == &quot;Floor&quot;)&#123;</span><br><span class="line">            agent.SetDestination(hit.point);</span><br><span class="line"></span><br><span class="line">            // click effect</span><br><span class="line">            GameObject clickEffectObject = Instantiate(clickEffect);</span><br><span class="line">            clickEffectObject.transform.position = hit.point;</span><br><span class="line">            Destroy(clickEffectObject, 0.5f);</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‹–æ‹½æ—‹è½¬è§†è§’"><a href="#æ‹–æ‹½æ—‹è½¬è§†è§’" class="headerlink" title="æ‹–æ‹½æ—‹è½¬è§†è§’"></a>æ‹–æ‹½æ—‹è½¬è§†è§’</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// get mouse position</span><br><span class="line">float mouseX = Input.GetAxis(&quot;Mouse X&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line">float mouseY = Input.GetAxis(&quot;Mouse Y&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">// rotate camera up and down</span><br><span class="line">cameraRotation -= mouseY;</span><br><span class="line">cameraRotation = Mathf.Clamp(cameraRotation, -30f, 30f);</span><br><span class="line">cameraTransform.localRotation = Quaternion.Euler(cameraRotation, 0f, 0f);</span><br><span class="line"></span><br><span class="line">// rotate player left and right</span><br><span class="line">transform.Rotate(Vector3.up * (mouseX));</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶é•¿æŒ‰æ‹–æ‹½å’Œç‚¹å‡»å¯»è·¯ä¼šæ··ï¼ŒåŠ ä¸€ä¸ªmouseDownCountè®¡æ•°</p><h2 id="ç¼©æ”¾å‰åç§»åŠ¨"><a href="#ç¼©æ”¾å‰åç§»åŠ¨" class="headerlink" title="ç¼©æ”¾å‰åç§»åŠ¨"></a>ç¼©æ”¾å‰åç§»åŠ¨</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// stop navigation</span><br><span class="line">agent.ResetPath();</span><br><span class="line"></span><br><span class="line">// scroll to move forward and backward</span><br><span class="line">Vector3 move = transform.forward * Input.GetAxis(&quot;Mouse ScrollWheel&quot;) * scrollSensitivity;</span><br><span class="line">agent.Move(move * Time.deltaTime);</span><br></pre></td></tr></table></figure><p>ï¼è¿™é‡Œä¸€å®šè¦å…ˆåœæ­¢å¯»è·¯ï¼Œå¦åˆ™ä¼šä¹±æŠ–</p><h1 id="æœ€ç»ˆ"><a href="#æœ€ç»ˆ" class="headerlink" title="æœ€ç»ˆ"></a>æœ€ç»ˆ</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerController : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [SerializeField, Range(0f,100f)]</span><br><span class="line">    private float scrollSensitivity = 10f;</span><br><span class="line"></span><br><span class="line">    [SerializeField, Range(0f,500f)]</span><br><span class="line">    private float mouseSensitivity = 200f;</span><br><span class="line"></span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Transform cameraTransform = null;</span><br><span class="line"></span><br><span class="line">    private float cameraRotation = 0f;</span><br><span class="line">    private int mouseDownCount = 0;</span><br><span class="line"></span><br><span class="line">    UnityEngine.AI.NavMeshAgent agent;</span><br><span class="line"></span><br><span class="line">    GameObject clickEffect;</span><br><span class="line"></span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        agent = GetComponent&lt;UnityEngine.AI.NavMeshAgent&gt;();</span><br><span class="line"></span><br><span class="line">        clickEffect = Resources.Load&lt;GameObject&gt;(&quot;Prefabs/ClickEffect&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if(Input.GetMouseButtonUp(0))&#123;</span><br><span class="line">            // if is click</span><br><span class="line">            if(mouseDownCount &lt; 2)&#123;</span><br><span class="line">                // click to navigate</span><br><span class="line">                RaycastHit hit;</span><br><span class="line">                Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">                if(Physics.Raycast(ray, out hit, Mathf.Infinity))&#123;</span><br><span class="line">                    // move when hit floor</span><br><span class="line">                    if(hit.transform.tag == &quot;Floor&quot;)&#123;</span><br><span class="line">                        agent.SetDestination(hit.point);</span><br><span class="line"></span><br><span class="line">                        // click effect</span><br><span class="line">                        GameObject clickEffectObject = Instantiate(clickEffect);</span><br><span class="line">                        clickEffectObject.transform.position = hit.point;</span><br><span class="line">                        Destroy(clickEffectObject, 1);</span><br><span class="line">                    &#125; </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            mouseDownCount = 0;</span><br><span class="line">        &#125;else if(Input.GetAxis(&quot;Mouse ScrollWheel&quot;) != 0)&#123;</span><br><span class="line">            // stop navigation</span><br><span class="line">            agent.ResetPath();</span><br><span class="line"></span><br><span class="line">            // scroll to move forward and backward</span><br><span class="line">            Vector3 move = transform.forward * Input.GetAxis(&quot;Mouse ScrollWheel&quot;) * scrollSensitivity;</span><br><span class="line">            agent.Move(move * Time.deltaTime);</span><br><span class="line">        &#125;else if(Input.GetMouseButton(0))&#123;</span><br><span class="line">            // stop navigation</span><br><span class="line">            agent.ResetPath();</span><br><span class="line"></span><br><span class="line">            // get mouse position</span><br><span class="line">            float mouseX = Input.GetAxis(&quot;Mouse X&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line">            float mouseY = Input.GetAxis(&quot;Mouse Y&quot;) * mouseSensitivity * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">            // rotate camera up and down</span><br><span class="line">            cameraRotation -= mouseY;</span><br><span class="line">            cameraRotation = Mathf.Clamp(cameraRotation, -30f, 30f);</span><br><span class="line">            cameraTransform.localRotation = Quaternion.Euler(cameraRotation, 0f, 0f);</span><br><span class="line"></span><br><span class="line">            // rotate player left and right</span><br><span class="line">            transform.Rotate(Vector3.up * (mouseX));</span><br><span class="line"></span><br><span class="line">            mouseDownCount++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç‚¹å‡»å¯»è·¯</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Feb-16-2021 16-49-06.gif"                                     ><p>æ»šåŠ¨å‰åå¹³ç§»</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Feb-16-2021 16-49-24.gif"                                     ><p>æ‹–æ‹½æ—‹è½¬è§†è§’</p><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/Feb-16-2021 16-49-34.gif"                                     ><p>ä¸”å¯»è·¯è¿‡ç¨‹ä¸­ï¼Œæ»šåŠ¨æˆ–æ‹–æ‹½å‡æ‰“æ–­å¯»è·¯</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æœ€ç»ˆæƒ³è¦åšçš„ç§»åŠ¨æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‚¹å‡»åœ°é¢å¯¼èˆª&lt;/li&gt;
&lt;li&gt;æ‹–æ‹½æ—‹è½¬&lt;/li&gt;
&lt;li&gt;ç¼©æ”¾å¹³ç§»&lt;/li&gt;
&lt;li&gt;ç‚¹å‡»ç”»å¯¼èˆª&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;äº¤äº’æ–¹å¼å‚è€ƒï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a class=&quot;link&quot;   hr
      
    
    </summary>
    
    
      <category term="Note" scheme="https://coconutnutx.github.io/categories/Note/"/>
    
    
      <category term="unity" scheme="https://coconutnutx.github.io/tags/unity/"/>
    
  </entry>
  
  <entry>
    <title>Unity Note - Project08 Gallery</title>
    <link href="https://coconutnutx.github.io/2021/02/15/unity/"/>
    <id>https://coconutnutx.github.io/2021/02/15/unity/</id>
    <published>2021-02-15T16:59:21.000Z</published>
    <updated>2021-02-15T16:59:21.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a class="link"   href="https://learn.unity.com/project/create-a-personal-3d-gallery-project-with-unity" >Create a Personal 3D Gallery Project with Unity<i class="fas fa-external-link-alt"></i></a></p></blockquote><ol><li><p>Use the [first person controller](First Person All-in-One) in asset store</p></li><li><p>Model scale ~= Cube 40*40</p></li></ol><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-02-15 PM6.13.09.jpg"                                     ><ol start="3"><li><p>Add Component-&gt;Physic-&gt;Mesh Collider to models</p></li><li><p>Light: turn off shadow &amp; increase range to 20</p></li><li><p>Sound effect for different walking materials</p><p>Change Material in Mesh Collider, not Mesh Renderer</p></li></ol><img                       lazyload                     src="/images/loading.svg"                     data-src="/images/2021/screencapture2021-02-15 PM6.26.31.jpg"                                     ><ol start="6"><li><p>Add UI-&gt;Text</p><p>When setting Rect Transform, press Alt(Option) to set position as well</p></li><li><p>Add Tag to Text</p></li><li><p>Add Image: Drag jpg onto Plane</p></li><li><p>Close to display text</p></li></ol><p>drag script onto image</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.UI;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class Proximity : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public string newTitle;</span><br><span class="line">    public string newAuthor;</span><br><span class="line">    public string newDesc;</span><br><span class="line">    private Transform other;</span><br><span class="line">    private Text myTitle;</span><br><span class="line">    private Text myAuthor;</span><br><span class="line">    private Text myDesc;</span><br><span class="line">    private float dist;</span><br><span class="line">    private GameObject player;</span><br><span class="line">    private GameObject message1;</span><br><span class="line">    private GameObject message2;</span><br><span class="line">    private GameObject message3;</span><br><span class="line">    private bool check;</span><br><span class="line"></span><br><span class="line">    // Start is called before the first frame update</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        player = GameObject.FindWithTag(&quot;Player&quot;);</span><br><span class="line">        other = player.GetComponent&lt;Transform&gt;();</span><br><span class="line">        message1 = GameObject.FindWithTag(&quot;ArtTitle&quot;);</span><br><span class="line">        message2 = GameObject.FindWithTag(&quot;ArtAuthor&quot;);</span><br><span class="line">        message3 = GameObject.FindWithTag(&quot;ArtDescription&quot;);</span><br><span class="line">        myTitle = message1.GetComponent&lt;Text&gt;();</span><br><span class="line">        myTitle.text = &quot;&quot;;</span><br><span class="line">        myAuthor = message2.GetComponent&lt;Text&gt;();</span><br><span class="line">        myAuthor.text = &quot;&quot;;</span><br><span class="line">        myDesc = message3.GetComponent&lt;Text&gt;();</span><br><span class="line">        myDesc.text = &quot;&quot;;</span><br><span class="line">        check = false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if (other)</span><br><span class="line">        &#123;</span><br><span class="line">            dist = Vector3.Distance(transform.position, other.position);</span><br><span class="line">            print(&quot;Distance to player: &quot; + dist);</span><br><span class="line">            if (dist &lt; 4)</span><br><span class="line">            &#123;</span><br><span class="line">                myTitle.text = newTitle;</span><br><span class="line">                myAuthor.text = newAuthor;</span><br><span class="line">                myDesc.text = newDesc;</span><br><span class="line">                check = true;</span><br><span class="line">            &#125;</span><br><span class="line">            if (dist &gt; 4 &amp;&amp; check == true)</span><br><span class="line">            &#123;</span><br><span class="line">                Start();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a class=&quot;link&quot;   href=&quot;https://learn.unity.com/project/create-a-personal-3d-gallery-project-with-unity&quot; &gt;Create a Personal 
      
    
    </summary>
    
    
      <category term="Note" scheme="https://coconutnutx.github.io/categories/Note/"/>
    
    
      <category term="unity" scheme="https://coconutnutx.github.io/tags/unity/"/>
    
  </entry>
  
</feed>
